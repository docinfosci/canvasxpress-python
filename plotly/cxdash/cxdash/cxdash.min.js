/*! For license information please see cxdash.min.js.LICENSE.txt */
window.cxdash=function(t){var e={};function i(s){if(e[s])return e[s].exports;var a=e[s]={i:s,l:!1,exports:{}};return t[s].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(s,a,function(e){return t[e]}.bind(null,a));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var s,a=function(){var t=document.currentScript;if(!t){for(var e=document.getElementsByTagName("script"),i=[],s=0;s<e.length;s++)i.push(e[s]);t=(i=i.filter((function(t){return!t.async&&!t.text&&!t.textContent}))).slice(-1)[0]}return t};if(Object.defineProperty(i,"p",{get:(s=a().src.split("/").slice(0,-1).join("/")+"/",function(){return s})}),"undefined"!=typeof jsonpScriptSrc){var r=jsonpScriptSrc;jsonpScriptSrc=function(t){var e=function(t){return/\/_dash-component-suites\//.test(t.src)}(a()),i=r(t);if(!e)return i;var s=i.split("/"),n=s.slice(-1)[0].split(".");return n.splice(1,0,"v1_1_0m1659475123"),s.splice(-1,1,n.join(".")),s.join("/")}}return i(i.s=4)}([function(t,e){t.exports=window.PropTypes},function(t,e){t.exports=window.React},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return CXDashElement}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),prop_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),prop_types__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__),canvasxpress_react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(3);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _createForOfIteratorHelper(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var s=0,a=function(){};return{s:a,n:function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,n=!0,o=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return n=t.done,t},e:function(t){o=!0,r=t},f:function(){try{n||null==i.return||i.return()}finally{if(o)throw r}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var i,s=_getPrototypeOf(t);if(e){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(s,arguments,a)}else i=s.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _defineProperty(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var CXDashElement=function(_Component){_inherits(CXDashElement,_Component);var _super=_createSuper(CXDashElement);function CXDashElement(){var t;_classCallCheck(this,CXDashElement);for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return _defineProperty(_assertThisInitialized(t=_super.call.apply(_super,[this].concat(i))),"after_render_functions",[]),_defineProperty(_assertThisInitialized(t),"after_render_target",""),t}return _createClass(CXDashElement,[{key:"add_canvasxpress_script",value:function(t){var e="https://www.canvasxpress.org/dist/canvasXpress.min.js";void 0!==t&&(e="https://cdnjs.cloudflare.com/ajax/libs/canvasXpress/"+t+"/canvasXpress.min.js");if(!document.getElementById("CXDashElementIncludeScript")){var i=document.getElementsByTagName("head")[0],s=document.createElement("script");s.type="text/javascript",s.src=e,s.id="CXDashElementIncludeScript",i.appendChild(s)}}},{key:"add_canvasxpress_css",value:function(t){var e="https://www.canvasxpress.org/dist/canvasXpress.css";void 0!==t&&(e="https://cdnjs.cloudflare.com/ajax/libs/canvasXpress/"+t+"canvasXpress.css");if(!document.getElementById("CXDashElementIncludeCSS")){var i=document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",s.src=e,s.id="CXDashElementIncludeCSS",i.appendChild(s)}}},{key:"componentDidMount",value:function componentDidMount(){try{var _iterator=_createForOfIteratorHelper(this.after_render_functions),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var fx=_step.value,fx_string="CanvasXpress.$('"+this.after_render_target+"')."+fx[0]+"(",first_param=!0,_iterator2=_createForOfIteratorHelper(fx[1]),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var p=_step2.value;!1===first_param&&(fx_string+=", "),fx_string+=void 0!==p?p:"null",first_param&&(first_param=!1)}}catch(t){_iterator2.e(t)}finally{_iterator2.f()}fx_string+=");",console.log("Executing "+fx_string),eval(fx_string)}}catch(t){_iterator.e(t)}finally{_iterator.f()}}catch(t){console.log("CanvasXpress afterRender error: "+t.toString())}}},{key:"render",value:function render(){var _this$props=this.props,id=_this$props.id,data=_this$props.data,config=_this$props.config,events=_this$props.events,after_render=_this$props.after_render,cdn_edition=_this$props.cdn_edition,width=_this$props.width,height=_this$props.height,adjusted_data,adjusted_config,adjusted_events;if(this.add_canvasxpress_script(cdn_edition),this.add_canvasxpress_css(cdn_edition),void 0!==after_render)try{this.after_render_functions=eval("("+after_render+")")}catch(t){this.after_render_functions=[]}if(this.after_render_target=id,void 0!==data)try{adjusted_data=JSON.parse(data)}catch(t){adjusted_data=data}if(void 0!==config)try{adjusted_config=JSON.parse(config)}catch(t){adjusted_config=config}if(void 0!==events)try{adjusted_events=eval("("+events+")")}catch(t){adjusted_events=events}return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{id:id+"-dcxc-parent-context"},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(canvasxpress_react__WEBPACK_IMPORTED_MODULE_2__.a,{target:id,data:adjusted_data,config:adjusted_config,events:adjusted_events,width:width,height:height}))}}]),CXDashElement}(react__WEBPACK_IMPORTED_MODULE_0__.Component);CXDashElement.defaultProps={},CXDashElement.propTypes={id:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string.isRequired,data:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string,config:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string,events:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string,after_render:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string,cdn_edition:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string,width:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string,height:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string,setProps:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.func}},function(t,e,i){"use strict";var s=i(1),a=i(5);i(7);class r extends s.Component{constructor(t){super(t),this.target=!!t.target&&t.target,this.data=!!t.data&&t.data,this.config=!!t.config&&t.config,this.events=!!t.events&&t.event,this.width=t.width?t.width:500,this.height=t.height?t.height:500}componentDidMount(){this.graph=new a.init(this.target,this.data,this.config,this.events),this.props.onRef&&this.props.onRef(this.graph)}shouldComponentUpdate(t,e){return!(t.data===this.data&&t.config===this.config)}componentDidUpdate(){this.graph.resetConfig(),this.graph.updateConfig(this.props.config),this.graph.updateData(this.props.data)}componentWillUnmount(){this.graph.destroy(),this.props.onRef&&this.props.onRef(void 0)}render(){return s.createElement("canvas",{id:this.target,width:this.width,height:this.height})}}e.a=r},function(t,e,i){"use strict";i.r(e);var s=i(2);i.d(e,"CXDashElement",(function(){return s.a}))},function(module,exports,__webpack_require__){(function(global){!function(t){this&&(this.window,this.document),CanvasXpress=function(t,e,i,s,a,r,n,o,h,l){var c=this,d=function(){c.init(t,e,i,s,a,r,n,o,h,l)};i&&i.fonts||t&&t.config&&t.config.fonts?i&&i.fonts?CanvasXpress.loadFonts(i.fonts,d):CanvasXpress.loadFonts(t.config.fonts,d):i&&i.fontsExternal||t&&t.config&&t.config.fontsExternal?i&&i.fontsExternal?CanvasXpress.loadFontsExternal(i.fontsExternal,d):CanvasXpress.loadFontsExternal(t.config.fontsExternal,d):this.init(t,e,i,s,a,r,n,o,h,l)}}(),cxplot=function(t,e,i,s){if("object"==typeof t&&t.isGGPlot){var a=function(t){return Array.isArray(t)&&!t.length?{}:t};delete t.isGGPlot;for(var r=Array.isArray(t.geoms)?t.geoms:[t.geoms],n=new cxplot(t.renderTo,t.data,aes(t.aes)),o=0;o<r.length;o++){var h=r[o],l=h.toLowerCase().replace("geom","geom_").replace("2","_2").replace("filled","_filled").replace("_qql","_qq_l");n[l]&&n[l](a(t.layers[h]))}return n.gg_labels(a(t.labels)),n.gg_scales(a(t.scales)),n.gg_theme(a(t.theme)),n.gg_facet(a(t.facet)),n}return new CanvasXpress(t,e,{aes:i||{},remoteTransitionEffect:"none",theme:"GGPlot",widthFactor:2,isCxplot:!0},s)},aes=function(){for(var t=arguments,e={},i=["x","y","z","fill","color","shape","size"],s=0;s<t.length;s++)if(Array.isArray(t[s])&&Array.isArray(t[s][0]))e.data=t[s];else if(t[s]instanceof Object)for(var a in t[s])e[a]=t[s][a],"factor"==a?(e.stringSampleFactors||(e.stringSampleFactors=[]),e.stringVariableFactors||(e.stringVariableFactors=[]),e.asSampleFactors||(e.asSampleFactors=[]),e.asVariableFactors||(e.asVariableFactors=[]),e.stringSampleFactors.push(t[s][a]),e.stringVariableFactors.push(t[s][a]),e.asSampleFactors.push(t[s][a]),e.asVariableFactors.push(t[s][a]),t.length>1&&(0==s?e.x=t[s][a]:1==s?e.y=t[s][a]:2==s&&(e.z=t[s][a]))):i.includes(a)?t[s][a]instanceof Object&&t[s][a].factor&&(e.stringSampleFactors||(e.stringSampleFactors=[]),e.stringVariableFactors||(e.stringVariableFactors=[]),e.asSampleFactors||(e.asSampleFactors=[]),e.asVariableFactors||(e.asVariableFactors=[]),e.stringSampleFactors.push(t[s][a].factor),e.stringVariableFactors.push(t[s][a].factor),e.asSampleFactors.push(t[s][a].factor),e.asVariableFactors.push(t[s][a].factor),e[a]=t[s][a].factor):"sample"==a&&(e.x=t[s][a]);else 0==s?e.x=t[s]:1==s?e.y=t[s]:2==s&&(e.z=t[s]),e[t[s]]=t[s];return e},CanvasXpress.instances=[],CanvasXpress.config=[],CanvasXpress.transitions={},CanvasXpress.cacheImages={},CanvasXpress.cacheImagesReady=!1,CanvasXpress.cachePatterns={},CanvasXpress.cacheText={},CanvasXpress.fonts={Arial:!0,Courier:!0,Verdana:!0},CanvasXpress.loadFonts=function(t,e){if(t&&t.length){for(var i=!1,s=0;s<t.length;s++)if(!CanvasXpress.fonts.hasOwnProperty(t[s])){i=!0;break}WebFontConfig={google:{families:t},timeout:2e3},e&&(WebFontConfig.active=e),function(s){if(window.navigator.onLine&&i){var a=s.createElement("script"),r=s.scripts[0];a.src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js",a.async=!0,r.parentNode.insertBefore(a,r);for(var n=0;n<t.length;n++)CanvasXpress.fonts[t[n]]=!0}else e()}(document)}},CanvasXpress.loadFontsExternal=function(t,e){if(t&&t.length){var i=!1;CanvasXpress.fonts.hasOwnProperty(t[0].name)||(i=!0),function(s){if(window.navigator.onLine&&i){var a=new XMLHttpRequest;a.addEventListener("readystatechange",(function(i){if(2==a.readyState&&200==a.status);else if(3==a.readyState);else if(4==a.readyState){var s=new FontFace(t[0].name,a.response);document.fonts.add(s),CanvasXpress.fonts[t[0].name]=!0,e()}})),a.responseType="arraybuffer",a.open("get",t[0].url),a.send()}else e()}(document)}},CanvasXpress.selector={vars:{},smps:{},meta:{},comp:{},nodes:{},edges:{},mixed:{},selections:0,groups:{},graphType:!1},CanvasXpress.hidden={hiddenVars:{},hiddenSmps:{},hiddenGrps:{},hiddenMapFeatures:{}},CanvasXpress.stack={},CanvasXpress.current=!1,CanvasXpress.chain={},CanvasXpress.resizing=!1,CanvasXpress.registered="082E849561EB0097227432E68E",CanvasXpress.system={},CanvasXpress.ready=!1,CanvasXpress.factory={version:39.3,buildDate:"08-01-2022",client:"",siteSrc:!1,valid:"string"==typeof window.cX?window.cX:void 0,href:window.location.href},CanvasXpress.factory.services="https://www.canvasxpress.org/cgi-bin/services.pl",CanvasXpress.onReady=function(){var t=[],e=!1,i=!1,s=function(){if(!e){console.log("canvasXpress JS ready"),e=!0;for(var i=0;i<t.length;i++)t[i].fn.call(window,t[i].ctx);t=[],CanvasXpress.system.isHTMLWidgets="undefined"!=typeof HTMLWidgets,CanvasXpress.system.isShiny=void 0!==window.Shiny&&!!window.Shiny.outputBindings,CanvasXpress.system.isRViewer=/\bviewer_pane=1\b/.test(window.location),CanvasXpress.system.isRConsole=CanvasXpress.system.isHTMLWidgets&&!CanvasXpress.system.isShiny&&!CanvasXpress.system.isRViewer,CanvasXpress.system.isjQuery="function"==typeof $,CanvasXpress.system.isReveal="undefined"!=typeof Reveal,CanvasXpress.system.isZoom="undefined"!=typeof zoom,CanvasXpress.factory.valid="string"==typeof window.cX?window.cX:void 0}},a=function(){"complete"===window.document.readyState&&s()},r=function(){s()};return window.onReady=function(n,o){e?setTimeout((function(){n(o)}),1):(t.push({fn:n,ctx:o}),"complete"===window.document.readyState?setTimeout(s,1):i||(window.document.addEventListener?(window.document.addEventListener("DOMContentLoaded",s,!1),window.addEventListener("load",r,!1)):(window.document.attachEvent("onreadystatechange",a),window.attachEvent("onload",r)),i=!0))},!0}(),CanvasXpress.loadScripts=function(){var i=0;return function(files,callback,scope){var head=window.document.getElementsByTagName("head")[0],loadScript=function(t,e){t.type.match(/javascript/i)?(t.onreadystatechange=function(){"loaded"!==t.readyState&&"complete"!==t.readyState||(t.onreadystatechange=null,e())},t.onload=function(){e()},head.appendChild(t)):(head.appendChild(t),e())},count=function(){i===files.length?(i=0,callback&&("function"==typeof callback?callback.call(scope):"string"==typeof callback&&(eval("var fn = "+callback),fn()))):CanvasXpress.loadScripts(files,callback,scope)};i++,loadScript(files[i-1],count)}}(),CanvasXpress.transferDatasetAttributes=function(t,e,i){var s=JSON.parse(JSON.stringify(t.dataset));for(var a in s)if(s.hasOwnProperty(a))if(i)e[a.replace(/^data-/,"")]=s[a];else{var r="data-"+a.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase();e.setAttribute(r,s[a])}},CanvasXpress.initCanvas=function(){for(var t=window.document.getElementsByTagName("canvas"),e=0;e<t.length;e++){var i=t[e];if("CanvasXpress"==i.className&&i.id){var s=!1,a={},r=CanvasXpress.getObject(i.id);i.hasAttribute("data-src")&&!r&&(s=i.getAttribute("data-src"),CanvasXpress.transferDatasetAttributes(i,a,!0),Object.keys(a).length?new CanvasXpress(i.id,s,a):new CanvasXpress(i.id,s))}}},CanvasXpress.initImage=function(){for(var t=window.document.getElementsByTagName("img"),e=0;e<t.length;e++){var i=t[e];if("CanvasXpress"==i.className&&i.id){var s=CanvasXpress.getObject(i.id),a=i.parentNode;if(!s){var r=i.src,n=i.id,o=window.document.createElement("canvas");o.width=i.clientWidth,o.height=i.clientHeight,CanvasXpress.transferDatasetAttributes(i,o),a.removeChild(i),o.id=n,a.appendChild(o),new CanvasXpress(n,r)}}}},CanvasXpress.initTable=function(){for(var t=window.document.getElementsByTagName("table"),e=0;e<t.length;e++){var i=t[e];if("CanvasXpress"==i.className&&i.id){var s=CanvasXpress.getObject(i.id),a=i.parentNode;if(!s){var r=i.id,n=window.document.createElement("canvas");n.id="temp-table-id-"+i.id,n.width=i.hasAttribute("data-width")?i.getAttribute("data-width"):500,n.height=i.hasAttribute("data-height")?i.getAttribute("data-height"):500,CanvasXpress.transferDatasetAttributes(i,n),a.appendChild(n),new CanvasXpress({data:r,renderTo:r})}}}},CanvasXpress.getObject=function(t,e){if(t){for(;CanvasXpress.chain.hasOwnProperty(t);)t=CanvasXpress.chain[t];for(var i=0;i<CanvasXpress.instances.length;i++)if(CanvasXpress.instances[i].target==t)return CanvasXpress.instances[i]}else{if(e){var s=window.document.getElementById(t);if(!s){var a=window.document.createElement("canvas");a.id=t,a.width=100,a.height=100,window.document.body.appendChild(a),s=new CanvasXpress({renderTo:t,hidden:!0})}return s}if(CanvasXpress.instances.length)return CanvasXpress.instances[0]}},CanvasXpress.json=function(t,e){var i=new FileReader;i.onload=function(){try{e(JSON.parse(i.result))}catch(t){alert("Oooops! Not a valid callback")}},i.readAsText(t)},CanvasXpress.csv=function(t,e){var i=new FileReader;i.onload=function(){try{var t=JSON.parse(i.result),s=t.split(/\r\n|\r|\n/g),a=0,r=0;t.match(/,/g)&&(a=t.match(/,/g).length),t.match(/\t/g)&&(r=t.match(/\t/g).length);for(var n=a>r?",":"\t",o=0;o<s.length;o++)if(s[o].match(/^#/))s.splice(o,1),o--;else{for(var h=s[o].split(n),l=h.length-1;l>=0;l--)if('"'==h[l].replace(/"\s+$/,'"').charAt(h[l].length-1)){var c=h[l].replace(/^\s+"/,'"');c.length>1&&'"'==c.charAt(0)?h[l]=h[l].replace(/^\s*"|"\s*$/g,"").replace(/""/g,'"'):l?h.splice(l-1,2,[h[l-1],h[l]].join(n)):h=h.shift().split(n).concat(h)}else h[l].replace(/""/g,'"');1!=h.length||""!=h[0]?s[o]=h:(s.splice(o,1),o--)}e(s)}catch(t){alert("Oooops! Not a valid callback")}},i.readAsText(t)},CanvasXpress.$=function(t,e){return CanvasXpress.getObject(t,e)},CanvasXpress.destroy=function(t,e){CanvasXpress.instances.length>0&&CanvasXpress.instances[0].destroy(t,e)},CanvasXpress.prototype.init=function(t,e,i,s,a,r,n,o,h,l){if(this.setInit=function(){this.target=t,this.events=s,this.info=a,this.userId=1,this.url={},this.meta={ids:{},time:{start:(new Date).getTime(),elapsed:null,end:null,draw:[],render:[]},data:!1,canvas:{},config:{user:i,orig:{},vals:{},remote:!1},vals:{},render:{objects:[],groups:{},types:{},order:[],map:{},origin:[],transition:!1},events:{},state:{save:0,clip:!1,translate:[0,0],rotate:[0],scale:[1,1],last:{translate:[0,0],rotate:[0],scale:[1,1]}},stack:[],def:{},dom:{}},this.config={},this.legend={color:{},shape:{},size:{},sample:{},variable:{},line:{},pattern:{},outline:{},connect:{},contour:{},bin2d:{},decoration:{},oncoprint:{},overlays:{},colorNode:{},shapeNode:{},sizeNode:{},patternNode:{},colorEdge:{},sizeEdge:{}},this.scales={},this.panel={},this.plot={}},this.validateParameters=function(t){this.validateData(t),this.validateConfig(t),this.validateEvents(t),this.validateInfo(t),this.validateAfterRender(t)},this.validateData=function(t){if(this.dataURL=!1,this.dataString=!1,"string"==typeof t.data)if((a=window.document.getElementById(t.data))&&"table"==a.tagName.toLowerCase()&&"CanvasXpress"==a.className&&a.id){var i=t.data;t.data=this.parseHTMLTable(a,!0),t.config=t.data.config,t.data=t.data.data,a.parentNode.removeChild(a);var s=window.document.getElementById("temp-table-id-"+i);s?s.id=i:alert("Dude! What did you do?")}else{var a;switch((a=this.isValidString(t.data)).type){case"URL":this.dataURL=t.data,t.data=!1;break;case"XML":this.dataString=a.data,t.data=!1;break;case"JSON":t.data=a.data;break;case"DELIM":t.data=a.data.data,t.config||(t.config=a.data.config);break;default:alert("Not a valid data string\n")}}else if("function"==typeof t.data)try{t.data=e.call(this)}catch(t){alert("Not a valid Data object:\n"+t)}else if(!l)try{this.stringifyJSON(t.data)}catch(t){alert("Data object malformed:\n"+t)}},this.validateConfig=function(t){if(t.config){if("function"==typeof t.config)try{t.config=t.config.call(this)}catch(t){alert("Not a valid Data object:\n"+t)}else if(!t.noValidate)try{this.stringifyJSON(t.config)}catch(t){alert("Config object malformed:\n"+t)}if(this.topoJSONURL=!1,t.config.topoJSON&&"string"==typeof t.config.topoJSON)switch(this.isValidString(t.config.topoJSON).type){case"URL":this.topoJSONURL=t.config.topoJSON}}},this.validateEvents=function(t){},this.validateInfo=function(t){t.info||(t.info="")},this.validateAfterRender=function(t){if(t.afterRender)try{this.stringifyJSON(t.afterRender)}catch(t){alert("AfterRender object malformed:\n"+t)}},this.isOneTimeFunctionInConfig=function(t){return t||(t=this),!!t.transposeData||(!!t.transformData||(!(!t.asSampleFactors||!t.asSampleFactors.length)||(!(!t.asVariableFactors||!t.asVariableFactors.length)||(!(!t.stringSampleFactors||!t.stringSampleFactors.length)||(!(!t.stringVariableFactors||!t.stringVariableFactors.length)||(!!t.histogramData||(!!t.ridgeBy||(!(!t.sortData||!t.sortData.length)||(t.asDOE,!1)))))))))},this.getAfterRender=function(t){var e=[];if((t.histogramData||t.ridgeBy)&&(!0===t.histogramData&&t.colorBy?e.unshift(["createHistogram",[],{}]):e.unshift(["createHistogram",[t.ridgeBy||t.histogramData||t.colorBy],{}])),t.stringVariableFactors&&t.stringVariableFactors.length)for(var i=0;i<t.stringVariableFactors.length;i++)e.unshift(["switchNumericToString",[t.stringVariableFactors[i]],{}]);if(t.stringSampleFactors&&t.stringSampleFactors.length)for(i=0;i<t.stringSampleFactors.length;i++)e.unshift(["switchNumericToString",[t.stringSampleFactors[i],!0],{}]);if(t.asVariableFactors&&t.asVariableFactors.length)for(i=0;i<t.asVariableFactors.length;i++)e.unshift(["switchVarToAnnotation",[t.asVariableFactors[i]],{}]);if(t.asSampleFactors&&t.asSampleFactors.length)for(i=0;i<t.asSampleFactors.length;i++)e.unshift(["switchSmpToAnnotation",[t.asSampleFactors[i]],{}]);if(t.transposeData&&e.unshift(["transpose",[!1,!0],{}]),t.transformData&&e.unshift(["transform",[t.transformData,t.transformAxis,!1,!0],{}]),t.sortData&&t.sortData.length)for(i=0;i<t.sortData.length;i++)e.push(["modifySort",[t.sortData[i][0],t.sortData[i][1],t.sortData[i][2],!1,i==this.sortData.length-1],{}]);return t.asDOE&&e.push(["createDOE",[],{}]),e},this.applyAfterRender=function(){if(this.isCxplot&&this.meta.config.user.aes){var t=this.meta.config.user.aes;t.stringVariableFactors&&(this.stringVariableFactors=this.cloneObject(t.stringVariableFactors)),t.stringSampleFactors&&(this.stringSampleFactors=this.cloneObject(t.stringSampleFactors)),t.asVariableFactors&&(this.asVariableFactors=this.cloneObject(this.asVariableFactors)),t.asSampleFactors&&(this.asSampleFactors=this.cloneObject(t.asSampleFactors))}},this.afterRender=function(t){this.afterRendering=!0,t||(t=[]);var e=this.meta.time.start,i="Scatter2D"==this.graphType&&"visium"==this.scatterType;if(this.applyAfterRender(),(this.histogramData||this.ridgeBy)&&(!0===this.histogramData?t.push(["createHistogram",[],{},e,!0]):t.push(["createHistogram",[this.ridgeBy||this.histogramData],{},e,!0]),this.histogramData=!1,delete CanvasXpress.stack[this.target].config.histogramData),this.stringVariableFactors.length){for(var s=0;s<this.stringVariableFactors.length;s++)t.unshift(["switchNumericToString",[this.stringVariableFactors[s],!1],{},e,!0]);this.stringVariableFactors=[],this.layoutRestore=!1}if(this.stringSampleFactors.length){for(s=0;s<this.stringSampleFactors.length;s++)t.unshift(["switchNumericToString",[this.stringSampleFactors[s],!0],{},e,!0]);this.stringSampleFactors=[],this.layoutRestore=!1}if(this.asVariableFactors.length){for(s=0;s<this.asVariableFactors.length;s++)t.unshift(["switchVarToAnnotation",[this.asVariableFactors[s],!1],{},e,!0]);this.asVariableFactors=[],this.layoutRestore=!1}if(this.asSampleFactors.length){for(s=0;s<this.asSampleFactors.length;s++)t.unshift(["switchSmpToAnnotation",[this.asSampleFactors[s],!1],{},e,!0]);this.asSampleFactors=[],this.layoutRestore=!1}if(this.transposeData&&(t.unshift(["transpose",[!1,this.sortData.length||this.selectedDataPoints.length],{},e,!0]),this.transposeData=!1,delete CanvasXpress.stack[this.target].config.transposeData),this.sortData){for(s=0;s<this.sortData.length;s++)t.push(["modifySort",[this.sortData[s][0],this.sortData[s][1],this.sortData[s][2],!1,s==this.sortData.length-1],{},e,!0]);this.sortData=[],delete CanvasXpress.stack[this.target].config.sortData}if(this.selectedDataPoints.length&&this.xAxisIndices&&this.xAxisIndices.length&&this.yAxisIndices&&this.yAxisIndices.length){var a=!1;for(s=0;s<this.selectedDataPoints.length;s++){var r=this.getVariableIndices(this.selectedDataPoints[s]);r>=0&&(this.addRemoveToSelected([r,this.xAxisIndices[0],this.yAxisIndices[0]]),a=!0)}a&&t.unshift(["broadcastDraw",[{func:"afterRender"}],{},e,!0])}var n=t.length-1,o=!1;for(s=0;s<t.length;s++){var h=t[s],l=h.shift();if(l){var c=h.length>0?h.shift():[],d=h.length>0?h.shift():{},p=(h.length>0&&h.shift(),h.length>0&&h.shift());this.showFunctionNamesAfterRender&&this.flashInfoSpan(20,20,l);var g=!!(t[s+1]&&t[s+1][0]&&t[s+1][0].match(/drag/i));for(var u in this.skipRender="createDOE"!=l&&"createHistogram"!=l&&"modifyColorScheme"!=l&&!l.match(/segregate/)&&!g&&(!this.showTransition&&s<n||"table"==this.view),this.skipRender=!!(l.match(/switch/)&&s<n),d)this[u]=d[u];if(l.match(/switch/)&&i&&s==n&&(o=!0),this[l].apply(this,c),l.match(/switch/)&&s==n&&!o&&this.draw(),"moveCanvas"==l&&CanvasXpress.stack[this.target].afterRender.push([l,c]),p){var m=CanvasXpress.stack[this.target].afterRender.length-1;CanvasXpress.stack[this.target].afterRender[m][4]=!0}o&&this.masterReset()}}this.asDOE&&this.isDOEable()&&this.createDOE(this.asDOE),"table"==this.view?(this.view="canvas",this.clickView()):"layout"==this.view&&(this.view="canvas",this.clickLayout(!1,!1,"none")),this.triggerDataLoaded("afterRender"),this.afterRendering=!1},this.setURL=function(){if(""!=window.location.search)for(var t=location.search.substring(1).split("&"),e=0;e<t.length;e++){var i=t[e].split("=");i[0]&&(i[0].match(/^cX/)?this.url[i[0]]=i[1]||!0:this.url[i[0]]="false"!=i[1]&&("true"==i[1]||i[1]))}},this.createThumbnailBase64=function(){if(this.url.hasOwnProperty("cXprint")||this.printThumbnail){this.printThumbnail=!1;var t=!0!==this.url.cXprint&&"true"!==this.url.cXprint?this.url.cXprint:this.saveFilename?this.saveFilename:this.target+".png",e=this,i=function(t,i){e.saveAs(t,i),setTimeout((function(){window.close()}),4e3)};e.print(!1,t,i)}else if(this.url.hasOwnProperty("cXprintBase64")||this.cacheBase64){this.cacheBase64=!1;i=function(){};CanvasXpress.$(this.target)&&this.print(!1,!1,i)}},this.logConsole=function(t){this.verbose&&console.log(this.target,this.prettyJSON(t))},this.triggerDataLoaded=function(t,e){var i=this,s=function(){var s=e||i;s.logConsole("canvasXpress data ready - "+t),s.createThumbnailBase64(),CanvasXpress.ready=!0};CanvasXpress.cacheImagesReady&&("afterRender"==t?this.isAnimation||this.isTransitionOn||this.dataURL||this.dataString||h||this.isUpdateRemoteData||n||s():"Network"==this.graphType?this.isAnimation||this.isUpdateRemoteData||s():this.isTransitionOn||s())},this.saveFirstState=function(){CanvasXpress.stack[this.target].state.push(this.getConfigState())},this.continueInitialization=function(){var t=CanvasXpress.stack[this.target],e=this.isOneTimeFunctionInConfig();this.initializeGraph(!1,!1,!1,!1,!1,!1,e),this.dataURL||this.afterRender(t.afterRenderInit),this.getDataFromURLOrString(this.target,t.config,t.events,t.info,o),this.saveFirstState(),CanvasXpress.current=this.target,this.meta.time.end=(new Date).getTime(),this.meta.time.elapsed=this.meta.time.end-this.meta.time.start,this.hideMask()},this.pauseInitialization=function(){(!this.lazyLoad||!this.loaded&&this.isInViewport(this.meta.canvas.ctx.canvas))&&this.continueInitialization()},this.initializeProcessing=function(t){var e=this;e.initializeBrowser(),e.initializeConfig(t.config),e.initializeViewport(t.hidden),e.validateUserColors(),e.initializeApi(),e.initializeDimensions(),e.initializeData(t.data),e.initializeLayout(),e.initializeDataFilters(),e.initializeEvents(),e.initializeRemote(),e.initStack(t.data,t.config,t.events,t.info,t.afterRender),e.initTransitions(),e.pauseInitialization()},this.initialize=function(t){CanvasXpress.instances.push(this),this.setInit(),this.setURL(),this.initDOM(),this.initSVG(),this.initInterface(),this.initSave(),this.validateParameters(t),this.initConfig(),this.initDate(),this.initViewport(),this.initPrimitives(),this.initUtils(),this.initNumeric(),this.initjLouvain(),this.initMathUtils(),this.initLegendUtils(),this.initMarkerUtils(),this.initFilterUtils(),this.initClusterUtils(),this.initSortUtils(),this.initExample(),this.initDataUtils(),this.initRandom(),this.initData(),this.initValidity(),this.initLayout(),this.initEvents(),this.initTooltip(),this.initTooltipMouse(),this.initTooltipDiv(),this.initToolbar(),this.initMenus(),this.initLinks(),this.initDataFilter(),this.initDataTable(),this.initCodeInfo(),this.initBin(),this.initCustomizer(),this.initAnimation(),this.initRemote(),this.initAxes(),this.initGraph(),this.initCxplot(),this.initializeProcessing(t)},t){if("object"==typeof t&&t.renderTo){if(t.isGGPlot)return new cxplot(t);e=t.tracks?{tracks:t.tracks}:t.nodes?{nodes:t.nodes}:t.venn?{venn:t.venn}:!!t.data&&t.data,i=t.config||!1,t.version&&(i.createVersion=t.version),t.factory&&(i.createFactory=t.factory),s=t.events||!1,a=!!t.info&&t.info.replace(/'/g,"'").replace(/"/g,"'"),r=t.afterRender||!1,n=t.hidden||!1,o=t.callback||!1,h=t.uploadFile||!1,l=t.noValidate?t.noValidate:!(!i||!i.noValidate)&&i.noValidate,t=t.renderTo}var c={target:t,data:e,config:i,events:s,info:a,afterRender:r,hidden:n,callback:o,uploadFile:h,noValidate:l};this.initialize(c)}},CanvasXpress.png="data:image/png;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",CanvasXpress.letters=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],CanvasXpress.dates={Sun:1,Mon:2,Tue:3,Wed:4,Thu:5,Fri:6,Sat:7,Sunday:1,Monday:2,Tuesday:3,Wednesday:4,Thursday:5,Friday:6,Saturday:7,Jan:"01",Feb:"02",Mar:"03",Apr:"04",May:"05",Jun:"06",Jul:"07",Aug:"08",Sep:"09",Oct:"10",Nov:"11",Dec:"12",January:"01",February:"02",March:"03",April:"04",May:"05",June:"06",July:"07",August:"08",September:"09",October:"10",November:"11",December:"12"},CanvasXpress.constants={DBL_EPSILON:2220446049250313e-31},CanvasXpress.countries={AFG:["Afghanistan","Asia","South Asia","AF",33.939,67.709],ALA:["Aland Islands","Europe","North Europe","AX",48.464,-122.706],ALB:["Albania","Europe","South Europe","AL",41.153,20.168],DZA:["Algeria","Africa","North Africa","DZ",28.033,1.659],ASM:["American Samoa","Oceania","Polynesia","AS",-14.271,-170.133],AND:["Andorra","Europe","South Europe","AD",42.546,1.601],AGO:["Angola","Africa","Middle Africa","AO",-11.203,17.873],AIA:["Anguilla","America","Caribbean","AI",18.22,-63.069],ATA:["Antarctica","","","AQ",-75.251,-.072],ATG:["Antigua and Barbuda","America","Caribbean","AG",17.06,-61.797],ARG:["Argentina","America","South America","AR",-38.417,-63.617],ARM:["Armenia","Asia","West Asia","AM",40.069,45.038],ABW:["Aruba","America","Caribbean","AW",12.521,-69.969],AUS:["Australia","Oceania","Australia and New Zealand","AU",-25.275,133.775],AUT:["Austria","Europe","West Europe","AT",47.516,14.55],AZE:["Azerbaijan","Asia","West Asia","AZ",40.143,47.576],BHS:["Bahamas","America","Caribbean","BS",25.034,-77.397],BHR:["Bahrain","Asia","West Asia","BH",25.93,50.637],BGD:["Bangladesh","Asia","South Asia","BD",23.684,90.356],BRB:["Barbados","America","Caribbean","BB",13.193,-59.544],BLR:["Belarus","Europe","East Europe","BY",53.709,27.953],BEL:["Belgium","Europe","West Europe","BE",50.503,4.469],BLZ:["Belize","America","Central America","BZ",17.189,-88.498],BEN:["Benin","Africa","West Africa","BJ",9.307,2.315],BMU:["Bermuda","America","North America","BM",32.321,-64.758],BTN:["Bhutan","Asia","South Asia","BT",27.514,90.433],BOL:["Bolivia","America","South America","BO",-16.291,-63.589],BES:["Bonaire","America","Caribbean","BQ",12.201,-68.262],BIH:["Bosnia and Herzegovina","Europe","South Europe","BA",43.915,17.679],BWA:["Botswana","Africa","South Africa","BW",-22.329,24.684],BVT:["Bouvet Island","","","BV",-54.424,3.413],BRA:["Brazil","America","South America","BR",-14.236,-51.926],IOT:["British Indian Ocean Territory","","","IO",-6.344,71.876],BRN:["Brunei Darussalam","Asia","South-East Asia","BN",4.535,114.727],BGR:["Bulgaria","Europe","East Europe","BG",42.733,25.485],BFA:["Burkina Faso","Africa","West Africa","BF",12.238,-1.562],BDI:["Burundi","Africa","East Africa","BI",-3.374,29.918],KHM:["Cambodia","Asia","South-East Asia","KH",12.565,104.99],CMR:["Cameroon","Africa","Middle Africa","CM",7.369,12.354],CAN:["Canada","America","North America","CA",56.13,-106.347],CPV:["Cabo Verde","Africa","West Africa","CV",16.002,-24.014],CYM:["Cayman Islands","America","Caribbean","KY",19.513,-80.567],CAF:["Central African Republic","Africa","Middle Africa","CF",6.611,20.939],TCD:["Chad","Africa","Middle Africa","TD",15.454,18.732],CHL:["Chile","America","South America","CL",-35.676,-71.543],CHN:["China","Asia","East Asia","CN",35.861,104.195],CXR:["Christmas Island","","","CX",-10.448,105.69],CCK:["Cocos (Keeling) Islands","","","CC",-12.165,96.87],COL:["Colombia","America","South America","CO",4.57,-74.298],COM:["Comoros","Africa","East Africa","KM",-11.876,43.872],COG:["Congo","Africa","Middle Africa","CG",-.229,15.827],COD:["Congo (Democratic Republic of the)","Africa","Middle Africa","CD",-4.039,21.758],COK:["Cook Islands","Oceania","Polynesia","CK",-21.237,-159.778],CRI:["Costa Rica","America","Central America","CR",9.748,-83.754],CIV:["Cote d'Ivoire","Africa","West Africa","CI",7.539,-5.548],HRV:["Croatia","Europe","South Europe","HR",45.1,15.2],CUB:["Cuba","America","Caribbean","CU",21.521,-77.782],CUW:["Cura�ao","America","Caribbean","CW",12.169,-68.99],CYP:["Cyprus","Asia","West Asia","CY",35.126,33.429],CZE:["Czech Republic","Europe","East Europe","CZ",49.817,15.472],DNK:["Denmark","Europe","North Europe","DK",56.263,9.501],DJI:["Djibouti","Africa","East Africa","DJ",11.825,42.59],DMA:["Dominica","America","Caribbean","DM",15.414,-61.371],DOM:["Dominican Republic","America","Caribbean","DO",18.735,-70.163],ECU:["Ecuador","America","South America","EC",-1.832,-78.184],EGY:["Egypt","Africa","North Africa","EG",26.82,30.802],SLV:["El Salvador","America","Central America","SV",13.794,-88.897],GNQ:["Equatorial Guinea","Africa","Middle Africa","GQ",1.65,10.267],ERI:["Eritrea","Africa","East Africa","ER",15.179,39.782],EST:["Estonia","Europe","North Europe","EE",58.595,25.013],ETH:["Ethiopia","Africa","East Africa","ET",9.145,40.489],FLK:["Falkland Islands","America","South America","FK",-51.797,-59.524],FRO:["Faroe Islands","Europe","North Europe","FO",61.892,-6.912],FJI:["Fiji","Oceania","Melanesia","FJ",-16.579,179.414],FIN:["Finland","Europe","North Europe","FI",61.924,25.748],FRA:["France","Europe","West Europe","FR",46.227,2.213],GUF:["French Guiana","America","South America","GF",3.933,-53.126],PYF:["French Polynesia","Oceania","Polynesia","PF",-17.68,-149.407],ATF:["French Southern Territories","","","TF",-49.281,69.348],GAB:["Gabon","Africa","Middle Africa","GA",-.804,11.609],GMB:["Gambia","Africa","West Africa","GM",13.443,-15.311],GEO:["Georgia","Asia","West Asia","GE",42.315,43.356],DEU:["Germany","Europe","West Europe","DE",51.165,10.451],GHA:["Ghana","Africa","West Africa","GH",7.946,-1.024],GIB:["Gibraltar","Europe","South Europe","GI",36.137,-5.346],GRC:["Greece","Europe","South Europe","GR",39.074,21.824],GRE:["Greece","Europe","South Europe","EL",39.074,21.824],GRL:["Greenland","America","North America","GL",71.706,-42.605],GRD:["Grenada","America","Caribbean","GD",12.262,-61.605],GLP:["Guadeloupe","America","Caribbean","GP",16.995,-62.068],GUM:["Guam","Oceania","Micronesia","GU",13.444,144.793],GTM:["Guatemala","America","Central America","GT",15.783,-90.231],GGY:["Guernsey","Europe","North Europe","GG",49.465,-2.586],GIN:["Guinea","Africa","West Africa","GN",9.945,-9.697],GNB:["Guinea-Bissau","Africa","West Africa","GW",11.803,-15.181],GUY:["Guyana","America","South America","GY",4.86,-58.931],HTI:["Haiti","America","Caribbean","HT",18.971,-72.286],HMD:["Heard Island and McDonald Islands","","","HM",-53.082,73.504],VAT:["Holy See","Europe","South Europe","VA",41.902,12.453],HND:["Honduras","America","Central America","HN",15.199,-86.242],HKG:["Hong Kong","Asia","East Asia","HK",22.396,114.109],HUN:["Hungary","Europe","East Europe","HU",47.162,19.503],ISL:["Iceland","Europe","North Europe","IS",64.963,-19.021],IND:["India","Asia","South Asia","IN",20.593,78.962],IDN:["Indonesia","Asia","South-East Asia","ID",-.79,113.921],IRN:["Iran","Asia","South Asia","IR",32.427,53.688],IRQ:["Iraq","Asia","West Asia","IQ",33.223,43.679],IRL:["Ireland","Europe","North Europe","IE",53.412,-8.244],IMN:["Isle of Man","Europe","North Europe","IM",54.236,-4.549],ISR:["Israel","Asia","West Asia","IL",31.046,34.851],ITA:["Italy","Europe","South Europe","IT",41.871,12.567],JAM:["Jamaica","America","Caribbean","JM",18.109,-77.298],JPN:["Japan","Asia","East Asia","JP",36.204,138.252],JEY:["Jersey","Europe","North Europe","JE",49.214,-2.132],JOR:["Jordan","Asia","West Asia","JO",30.585,36.238],KAZ:["Kazakhstan","Asia","Central Asia","KZ",48.019,66.923],KEN:["Kenya","Africa","East Africa","KE",-.024,37.906],KIR:["Kiribati","Oceania","Micronesia","KI",-3.371,-168.735],PRK:["Korea (Democratic People's Republic of)","Asia","East Asia","KP",40.339,127.51],KOR:["Korea (Republic of)","Asia","East Asia","KR",35.907,127.766],XKX:["Kosovo","Europe","South Europe","XK",42.602,20.902],KWT:["Kuwait","Asia","West Asia","KW",29.311,47.481],KGZ:["Kyrgyzstan","Asia","Central Asia","KG",41.204,74.766],LAO:["Lao People's Democratic Republic","Asia","South-East Asia","LA",19.856,102.495],LVA:["Latvia","Europe","North Europe","LV",56.879,24.603],LBN:["Lebanon","Asia","West Asia","LB",33.854,35.862],LSO:["Lesotho","Africa","South Africa","LS",-29.61,28.233],LBR:["Liberia","Africa","West Africa","LR",6.428,-9.43],LBY:["Libya","Africa","North Africa","LY",26.335,17.228],LIE:["Liechtenstein","Europe","West Europe","LI",47.166,9.555],LTU:["Lithuania","Europe","North Europe","LT",55.169,23.881],LUX:["Luxembourg","Europe","West Europe","LU",49.815,6.129],MAC:["Macao","Asia","East Asia","MO",22.198,113.543],MKD:["Macedonia","Europe","South Europe","MK",41.608,21.745],MDG:["Madagascar","Africa","East Africa","MG",-18.767,46.869],MWI:["Malawi","Africa","East Africa","MW",-13.255,34.301],MYS:["Malaysia","Asia","South-East Asia","MY",4.21,101.975],MDV:["Maldives","Asia","South Asia","MV",3.202,73.22],MLI:["Mali","Africa","West Africa","ML",17.57,-3.997],MLT:["Malta","Europe","South Europe","MT",35.937,14.375],MHL:["Marshall Islands","Oceania","Micronesia","MH",7.131,171.184],MTQ:["Martinique","America","Caribbean","MQ",14.641,-61.025],MRT:["Mauritania","Africa","West Africa","MR",21.007,-10.941],MUS:["Mauritius","Africa","East Africa","MU",-20.349,57.552],MYT:["Mayotte","Africa","East Africa","YT",-12.828,45.166],MEX:["Mexico","America","Central America","MX",23.634,-102.553],FSM:["Micronesia","Oceania","Micronesia","FM",7.425,150.55],MDA:["Moldova","Europe","East Europe","MD",47.411,28.369],MCO:["Monaco","Europe","West Europe","MC",43.75,7.412],MNG:["Mongolia","Asia","East Asia","MN",46.862,103.846],MNE:["Montenegro","Europe","South Europe","ME",42.708,19.374],MSR:["Montserrat","America","Caribbean","MS",16.742,-62.188],MAR:["Morocco","Africa","North Africa","MA",31.791,-7.093],MOZ:["Mozambique","Africa","East Africa","MZ",-18.666,35.529],MMR:["Myanmar","Asia","South-East Asia","MM",21.913,95.956],NAM:["Namibia","Africa","South Africa","NA",-22.958,18.49],NRU:["Nauru","Oceania","Micronesia","NR",-.523,166.931],NPL:["Nepal","Asia","South Asia","NP",28.394,84.124],NLD:["Netherlands","Europe","West Europe","NL",52.132,5.291],ANT:["Netherlands Antilles","","","AN",12.226,-69.061],NCL:["New Caledonia","Oceania","Melanesia","NC",-20.905,165.618],NZL:["New Zealand","Oceania","Australia and New Zealand","NZ",-40.901,174.885],NIC:["Nicaragua","America","Central America","NI",12.865,-85.208],NER:["Niger","Africa","West Africa","NE",17.607,8.081],NGA:["Nigeria","Africa","West Africa","NG",9.081,8.675],NIU:["Niue","Oceania","Polynesia","NU",-19.055,-169.868],NFK:["Norfolk Island","Oceania","Australia and New Zealand","NF",-29.041,167.954],MNP:["West Mariana Islands","Oceania","Micronesia","MP",17.33,145.384],NOR:["Norway","Europe","North Europe","NO",60.472,8.468],OMN:["Oman","Asia","West Asia","OM",21.512,55.923],PAK:["Pakistan","Asia","South Asia","PK",30.375,69.345],PLW:["Palau","Oceania","Micronesia","PW",7.514,134.582],PSE:["Palestine","Asia","West Asia","PS",31.952,35.233],PAN:["Panama","America","Central America","PA",8.537,-80.783],PNG:["Papua New Guinea","Oceania","Melanesia","PG",-6.315,143.955],PRY:["Paraguay","America","South America","PY",-23.443,-58.444],PER:["Peru","America","South America","PE",-9.19,-75.016],PHL:["Philippines","Asia","South-East Asia","PH",12.879,121.774],PCN:["Pitcairn","Oceania","Polynesia","PN",-24.704,-127.44],POL:["Poland","Europe","East Europe","PL",51.919,19.145],PRT:["Portugal","Europe","South Europe","PT",39.399,-8.225],PRI:["Puerto Rico","America","Caribbean","PR",18.22,-66.591],QAT:["Qatar","Asia","West Asia","QA",25.354,51.183],REU:["R�union","Africa","East Africa","RE",-21.116,55.536],ROU:["Romania","Europe","East Europe","RO",45.943,24.966],RUS:["Russian Federation","Europe","East Europe","RU",61.524,105.318],RWA:["Rwanda","Africa","East Africa","RW",-1.941,29.873],BLM:["Saint Barthelemy","America","Caribbean","BL",17.899,-62.833],SHN:["Saint Helena","Africa","West Africa","SH",-24.144,-10.031],KNA:["Saint Kitts and Nevis","America","Caribbean","KN",17.357,-62.783],LCA:["Saint Lucia","America","Caribbean","LC",13.909,-60.979],MAF:["Saint Martin","America","Caribbean","MF",18.075,-63.06],SPM:["Saint Pierre and Miquelon","America","North America","PM",46.941,-56.272],VCT:["Saint Vincent and the Grenadines","America","Caribbean","VC",12.984,-61.288],WSM:["Samoa","Oceania","Polynesia","WS",-13.76,-172.105],SMR:["San Marino","Europe","South Europe","SM",43.942,12.457],STP:["Sao Tome and Principe","Africa","Middle Africa","ST",.186,6.613],SAU:["Saudi Arabia","Asia","West Asia","SA",23.885,45.079],SEN:["Senegal","Africa","West Africa","SN",14.497,-14.453],SRB:["Serbia","Europe","South Europe","RS",44.016,21.005],SYC:["Seychelles","Africa","East Africa","SC",-4.68,55.491],SLE:["Sierra Leone","Africa","West Africa","SL",8.46,-11.78],SGP:["Singapore","Asia","South-East Asia","SG",1.352,103.819],SXM:["Sint Maarten","America","Caribbean","SX",18.042,-63.054],SVK:["Slovakia","Europe","East Europe","SK",48.669,19.699],SVN:["Slovenia","Europe","South Europe","SI",46.151,14.995],SLB:["Solomon Islands","Oceania","Melanesia","SB",-9.646,160.156],SOM:["Somalia","Africa","East Africa","SO",5.152,46.199],ZAF:["South Africa","Africa","South Africa","ZA",-30.56,22.937],SGS:["South Georgia and the South Sandwich Islands","","","GS",-54.43,-36.588],SSD:["South Sudan","Africa","East Africa","SS",4.859,31.571],ESP:["Spain","Europe","South Europe","ES",40.463,-3.75],LKA:["Sri Lanka","Asia","South Asia","LK",7.873,80.771],SDN:["Sudan","Africa","North Africa","SD",12.862,30.217],SUR:["Suriname","America","South America","SR",3.919,-56.028],SJM:["Svalbard and Jan Mayen","Europe","North Europe","SJ",77.553,23.67],SWZ:["Swaziland","Africa","South Africa","SZ",-26.523,31.465],SWE:["Sweden","Europe","North Europe","SE",60.128,18.643],CHE:["Switzerland","Europe","West Europe","CH",46.818,8.227],SYR:["Syrian Arab Republic","Asia","West Asia","SY",34.802,38.996],TWN:["Taiwan","Asia","East Asia","TW",23.697,120.96],TJK:["Tajikistan","Asia","Central Asia","TJ",38.861,71.276],TZA:["Tanzania","Africa","East Africa","TZ",-6.37,34.888],THA:["Thailand","Asia","South-East Asia","TH",15.87,100.992],TLS:["Timor-Leste","Asia","South-East Asia","TL",-8.875,125.727],TGO:["Togo","Africa","West Africa","TG",8.619,.824],TKL:["Tokelau","Oceania","Polynesia","TK",-8.968,-171.856],TON:["Tonga","Oceania","Polynesia","TO",-21.179,-175.199],TTO:["Trinidad and Tobago","America","Caribbean","TT",10.691,-61.223],TUN:["Tunisia","Africa","North Africa","TN",33.886,9.537],TUR:["Turkey","Asia","West Asia","TR",38.963,35.243],TKM:["Turkmenistan","Asia","Central Asia","TM",38.969,59.556],TCA:["Turks and Caicos Islands","America","Caribbean","TC",21.694,-71.798],TUV:["Tuvalu","Oceania","Polynesia","TV",-7.11,177.649],UGA:["Uganda","Africa","East Africa","UG",1.373,32.29],UKR:["Ukraine","Europe","East Europe","UA",48.379,31.165],ARE:["United Arab Emirates","Asia","West Asia","AE",23.424,53.847],GBR:["United Kingdom of Great Britain and Northern Ireland","Europe","North Europe","GB",55.378,-3.436],UKM:["United Kingdom of Great Britain and Northern Ireland","Europe","North Europe","UK",55.378,-3.436],USA:["United States of America","America","North America","US",37.09,-95.713],UMI:["United States Minor Outlying Islands","","","UM",-.374,-159.996],URY:["Uruguay","America","South America","UY",-32.523,-55.766],UZB:["Uzbekistan","Asia","Central Asia","UZ",41.377,64.585],VUT:["Vanuatu","Oceania","Melanesia","VU",-15.377,166.959],VEN:["Venezuela","America","South America","VE",6.423,-66.59],VNM:["Vietnam","Asia","South-East Asia","VN",14.058,108.277],VGB:["Virgin Islands (British)","America","Caribbean","VG",18.42,-64.64],VIR:["Virgin Islands (U.S.)","America","Caribbean","VI",18.335,-64.897],WLF:["Wallis and Futuna","Oceania","Polynesia","WF",-13.769,-177.157],ESH:["Western Sahara","Africa","North Africa","EH",24.215,-12.886],XXX:["Unespecified Nationality","","","XX"],YEM:["Yemen","Asia","West Asia","YE",15.552,48.516],ZMB:["Zambia","Africa","East Africa","ZM",-13.134,27.849],ZWE:["Zimbabwe","Africa","East Africa","ZW",-19.016,29.154]},CanvasXpress.usa={AK:["Alaska",63.588753,-154.493062],AL:["Alabama",32.318231,-86.902298],AR:["Arkansas",35.20105,-91.831833],AZ:["Arizona",34.048928,-111.093731],CA:["California",36.778261,-119.417932],CO:["Colorado",39.550051,-105.782067],CT:["Connecticut",41.603221,-73.087749],DC:["District of Columbia",38.905985,-77.033418],DE:["Delaware",38.910832,-75.52767],FL:["Florida",27.664827,-81.515754],GA:["Georgia",32.157435,-82.907123],HI:["Hawaii",19.898682,-155.665857],IA:["Iowa",41.878003,-93.097702],ID:["Idaho",44.068202,-114.742041],IL:["Illinois",40.633125,-89.398528],IN:["Indiana",40.551217,-85.602364],KS:["Kansas",39.011902,-98.484246],KY:["Kentucky",37.839333,-84.270018],LA:["Louisiana",31.244823,-92.145024],MA:["Massachusetts",42.407211,-71.382437],MD:["Maryland",39.045755,-76.641271],ME:["Maine",45.253783,-69.445469],MI:["Michigan",44.314844,-85.602364],MN:["Minnesota",46.729553,-94.6859],MO:["Missouri",37.964253,-91.831833],MS:["Mississippi",32.354668,-89.398528],MT:["Montana",46.879682,-110.362566],NC:["North Carolina",35.759573,-79.0193],ND:["NorthDakota",47.551493,-101.002012],NE:["Nebraska",41.492537,-99.901813],NH:["New Hampshire",43.193852,-71.572395],NJ:["New Jersey",40.058324,-74.405661],NM:["New Mexico",34.97273,-105.032363],NV:["Nevada",38.80261,-116.419389],NY:["New York",43.299428,-74.217933],OH:["Ohio",40.417287,-82.907123],OK:["Oklahoma",35.007752,-97.092877],OR:["Oregon",43.804133,-120.554201],PA:["Pennsylvania",41.203322,-77.194525],PR:["Puerto Rico",18.220833,-66.590149],RI:["Rhode Island",41.580095,-71.477429],SC:["South Carolina",33.836081,-81.163725],SD:["South Dakota",43.969515,-99.901813],TN:["Tennessee",35.517491,-86.580447],TX:["Texas",31.968599,-99.901813],UT:["Utah",39.32098,-111.093731],VA:["Virginia",37.431573,-78.656894],VT:["Vermont",44.558803,-72.577841],WA:["Washington",47.751074,-120.740139],WI:["Wisconsin",43.78444,-88.787868],WV:["West Virginia",38.597626,-80.454903],WY:["Wyoming",43.075968,-107.290284]},CanvasXpress.maps={Africa:"/data/africa.geo.json",Argentina:"/data/argentina.geo.json",Asia:"/data/asia.geo.json",Belgium:"/data/belgium.geo.json",China:"/data/china.geo.json",Colombia:"/data/colombia.geo.json",Countries:"/data/countries.geo.json",Europe:"/data/europe.geo.json",France:"/data/france.geo.json",India:"/data/india.geo.json",Italy:"/data/italy.geo.json",NorthAmerica:"/data/north-america.geo.json",Oceania:"/data/oceania.geo.json",SouthAmerica:"/data/south-america.geo.json",Spain:"/data/spain.geo.json",UnitedKingdom:"/data/united-kindom.geo.json",USA:"/data/USA.geo.json",USACounties:"/data/usa-counties.json",USADistricts:"/data/usa-districts.json",USAStates:"/data/usa-states.json",WorldContinents:"/data/world-continents-geo.json",World:"/data/world.geo.json"},CanvasXpress.chromosomes={hg19:{columns:["start","end","name","stain"],order:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,"X","Y"],data:{1:[[0,23e5,"p36.33","gneg"],[23e5,54e5,"p36.32","gpos25"],[54e5,72e5,"p36.31","gneg"],[72e5,92e5,"p36.23","gpos25"],[92e5,127e5,"p36.22","gneg"],[127e5,162e5,"p36.21","gpos50"],[162e5,204e5,"p36.13","gneg"],[204e5,239e5,"p36.12","gpos25"],[239e5,28e6,"p36.11","gneg"],[28e6,302e5,"p35.3","gpos25"],[302e5,324e5,"p35.2","gneg"],[324e5,346e5,"p35.1","gpos25"],[346e5,401e5,"p34.3","gneg"],[401e5,441e5,"p34.2","gpos25"],[441e5,468e5,"p34.1","gneg"],[468e5,507e5,"p33","gpos75"],[507e5,561e5,"p32.3","gneg"],[561e5,59e6,"p32.2","gpos50"],[59e6,613e5,"p32.1","gneg"],[613e5,689e5,"p31.3","gpos50"],[689e5,697e5,"p31.2","gneg"],[697e5,849e5,"p31.1","gpos100"],[849e5,884e5,"p22.3","gneg"],[884e5,92e6,"p22.2","gpos75"],[92e6,947e5,"p22.1","gneg"],[947e5,997e5,"p21.3","gpos75"],[997e5,1022e5,"p21.2","gneg"],[1022e5,1072e5,"p21.1","gpos100"],[1072e5,1118e5,"p13.3","gneg"],[1118e5,1161e5,"p13.2","gpos50"],[1161e5,1178e5,"p13.1","gneg"],[1178e5,1206e5,"p12","gpos50"],[1206e5,1215e5,"p11.2","gneg"],[1215e5,125e6,"p11.1","acen"],[125e6,1289e5,"q11","acen"],[1289e5,1426e5,"q12","gvar"],[1426e5,147e6,"q21.1","gneg"],[147e6,1503e5,"q21.2","gpos50"],[1503e5,155e6,"q21.3","gneg"],[155e6,1565e5,"q22","gpos50"],[1565e5,1591e5,"q23.1","gneg"],[1591e5,1605e5,"q23.2","gpos50"],[1605e5,1655e5,"q23.3","gneg"],[1655e5,1672e5,"q24.1","gpos50"],[1672e5,1709e5,"q24.2","gneg"],[1709e5,1729e5,"q24.3","gpos75"],[1729e5,176e6,"q25.1","gneg"],[176e6,1803e5,"q25.2","gpos50"],[1803e5,1858e5,"q25.3","gneg"],[1858e5,1908e5,"q31.1","gpos100"],[1908e5,1938e5,"q31.2","gneg"],[1938e5,1987e5,"q31.3","gpos100"],[1987e5,2072e5,"q32.1","gneg"],[2072e5,2115e5,"q32.2","gpos25"],[2115e5,2145e5,"q32.3","gneg"],[2145e5,2241e5,"q41","gpos100"],[2241e5,2246e5,"q42.11","gneg"],[2246e5,227e6,"q42.12","gpos25"],[227e6,2307e5,"q42.13","gneg"],[2307e5,2347e5,"q42.2","gpos50"],[2347e5,2366e5,"q42.3","gneg"],[2366e5,2437e5,"q43","gpos75"],[2437e5,249250621,"q44","gneg"]],2:[[0,44e5,"p25.3","gneg"],[44e5,71e5,"p25.2","gpos50"],[71e5,122e5,"p25.1","gneg"],[122e5,167e5,"p24.3","gpos75"],[167e5,192e5,"p24.2","gneg"],[192e5,24e6,"p24.1","gpos75"],[24e6,279e5,"p23.3","gneg"],[279e5,3e7,"p23.2","gpos25"],[3e7,321e5,"p23.1","gneg"],[321e5,366e5,"p22.3","gpos75"],[366e5,386e5,"p22.2","gneg"],[386e5,418e5,"p22.1","gpos50"],[418e5,478e5,"p21","gneg"],[478e5,529e5,"p16.3","gpos100"],[529e5,55e6,"p16.2","gneg"],[55e6,613e5,"p16.1","gpos100"],[613e5,641e5,"p15","gneg"],[641e5,686e5,"p14","gpos50"],[686e5,715e5,"p13.3","gneg"],[715e5,735e5,"p13.2","gpos50"],[735e5,75e6,"p13.1","gneg"],[75e6,833e5,"p12","gpos100"],[833e5,905e5,"p11.2","gneg"],[905e5,933e5,"p11.1","acen"],[933e5,968e5,"q11.1","acen"],[968e5,1027e5,"q11.2","gneg"],[1027e5,106e6,"q12.1","gpos50"],[106e6,1075e5,"q12.2","gneg"],[1075e5,1102e5,"q12.3","gpos25"],[1102e5,1144e5,"q13","gneg"],[1144e5,1188e5,"q14.1","gpos50"],[1188e5,1224e5,"q14.2","gneg"],[1224e5,1299e5,"q14.3","gpos50"],[1299e5,1325e5,"q21.1","gneg"],[1325e5,1351e5,"q21.2","gpos25"],[1351e5,1368e5,"q21.3","gneg"],[1368e5,1422e5,"q22.1","gpos100"],[1422e5,1441e5,"q22.2","gneg"],[1441e5,1487e5,"q22.3","gpos100"],[1487e5,1499e5,"q23.1","gneg"],[1499e5,1505e5,"q23.2","gpos25"],[1505e5,1549e5,"q23.3","gneg"],[1549e5,1598e5,"q24.1","gpos75"],[1598e5,1637e5,"q24.2","gneg"],[1637e5,1697e5,"q24.3","gpos75"],[1697e5,178e6,"q31.1","gneg"],[178e6,1806e5,"q31.2","gpos50"],[1806e5,183e6,"q31.3","gneg"],[183e6,1894e5,"q32.1","gpos75"],[1894e5,1919e5,"q32.2","gneg"],[1919e5,1974e5,"q32.3","gpos75"],[1974e5,2033e5,"q33.1","gneg"],[2033e5,2049e5,"q33.2","gpos50"],[2049e5,209e6,"q33.3","gneg"],[209e6,2153e5,"q34","gpos100"],[2153e5,2215e5,"q35","gneg"],[2215e5,2252e5,"q36.1","gpos75"],[2252e5,2261e5,"q36.2","gneg"],[2261e5,231e6,"q36.3","gpos100"],[231e6,2356e5,"q37.1","gneg"],[2356e5,2373e5,"q37.2","gpos50"],[2373e5,243199373,"q37.3","gneg"]],3:[[0,28e5,"p26.3","gpos50"],[28e5,4e6,"p26.2","gneg"],[4e6,87e5,"p26.1","gpos50"],[87e5,118e5,"p25.3","gneg"],[118e5,133e5,"p25.2","gpos25"],[133e5,164e5,"p25.1","gneg"],[164e5,239e5,"p24.3","gpos100"],[239e5,264e5,"p24.2","gneg"],[264e5,309e5,"p24.1","gpos75"],[309e5,321e5,"p23","gneg"],[321e5,365e5,"p22.3","gpos50"],[365e5,394e5,"p22.2","gneg"],[394e5,437e5,"p22.1","gpos75"],[437e5,441e5,"p21.33","gneg"],[441e5,442e5,"p21.32","gpos50"],[442e5,506e5,"p21.31","gneg"],[506e5,523e5,"p21.2","gpos25"],[523e5,544e5,"p21.1","gneg"],[544e5,586e5,"p14.3","gpos50"],[586e5,637e5,"p14.2","gneg"],[637e5,698e5,"p14.1","gpos50"],[698e5,742e5,"p13","gneg"],[742e5,798e5,"p12.3","gpos75"],[798e5,835e5,"p12.2","gneg"],[835e5,872e5,"p12.1","gpos75"],[872e5,879e5,"p11.2","gneg"],[879e5,91e6,"p11.1","acen"],[91e6,939e5,"q11.1","acen"],[939e5,983e5,"q11.2","gvar"],[983e5,1e8,"q12.1","gneg"],[1e8,1009e5,"q12.2","gpos25"],[1009e5,1028e5,"q12.3","gneg"],[1028e5,1062e5,"q13.11","gpos75"],[1062e5,1079e5,"q13.12","gneg"],[1079e5,1113e5,"q13.13","gpos50"],[1113e5,1135e5,"q13.2","gneg"],[1135e5,1173e5,"q13.31","gpos75"],[1173e5,119e6,"q13.32","gneg"],[119e6,1219e5,"q13.33","gpos75"],[1219e5,1238e5,"q21.1","gneg"],[1238e5,1258e5,"q21.2","gpos25"],[1258e5,1292e5,"q21.3","gneg"],[1292e5,1337e5,"q22.1","gpos25"],[1337e5,1357e5,"q22.2","gneg"],[1357e5,1387e5,"q22.3","gpos25"],[1387e5,1428e5,"q23","gneg"],[1428e5,1489e5,"q24","gpos100"],[1489e5,1521e5,"q25.1","gneg"],[1521e5,155e6,"q25.2","gpos50"],[155e6,157e6,"q25.31","gneg"],[157e6,159e6,"q25.32","gpos50"],[159e6,1607e5,"q25.33","gneg"],[1607e5,1676e5,"q26.1","gpos100"],[1676e5,1709e5,"q26.2","gneg"],[1709e5,1757e5,"q26.31","gpos75"],[1757e5,179e6,"q26.32","gneg"],[179e6,1827e5,"q26.33","gpos75"],[1827e5,1845e5,"q27.1","gneg"],[1845e5,186e6,"q27.2","gpos25"],[186e6,1879e5,"q27.3","gneg"],[1879e5,1923e5,"q28","gpos75"],[1923e5,198022430,"q29","gneg"]],4:[[0,45e5,"p16.3","gneg"],[45e5,6e6,"p16.2","gpos25"],[6e6,113e5,"p16.1","gneg"],[113e5,152e5,"p15.33","gpos50"],[152e5,178e5,"p15.32","gneg"],[178e5,213e5,"p15.31","gpos75"],[213e5,277e5,"p15.2","gneg"],[277e5,358e5,"p15.1","gpos100"],[358e5,412e5,"p14","gneg"],[412e5,446e5,"p13","gpos50"],[446e5,482e5,"p12","gneg"],[482e5,504e5,"p11","acen"],[504e5,527e5,"q11","acen"],[527e5,595e5,"q12","gneg"],[595e5,666e5,"q13.1","gpos100"],[666e5,705e5,"q13.2","gneg"],[705e5,763e5,"q13.3","gpos75"],[763e5,789e5,"q21.1","gneg"],[789e5,824e5,"q21.21","gpos50"],[824e5,841e5,"q21.22","gneg"],[841e5,869e5,"q21.23","gpos25"],[869e5,88e6,"q21.3","gneg"],[88e6,937e5,"q22.1","gpos75"],[937e5,951e5,"q22.2","gneg"],[951e5,988e5,"q22.3","gpos75"],[988e5,1011e5,"q23","gneg"],[1011e5,1077e5,"q24","gpos50"],[1077e5,1141e5,"q25","gneg"],[1141e5,1208e5,"q26","gpos75"],[1208e5,1238e5,"q27","gneg"],[1238e5,1288e5,"q28.1","gpos50"],[1288e5,1311e5,"q28.2","gneg"],[1311e5,1395e5,"q28.3","gpos100"],[1395e5,1415e5,"q31.1","gneg"],[1415e5,1468e5,"q31.21","gpos25"],[1468e5,1485e5,"q31.22","gneg"],[1485e5,1511e5,"q31.23","gpos25"],[1511e5,1556e5,"q31.3","gneg"],[1556e5,1618e5,"q32.1","gpos100"],[1618e5,1645e5,"q32.2","gneg"],[1645e5,1701e5,"q32.3","gpos100"],[1701e5,1719e5,"q33","gneg"],[1719e5,1763e5,"q34.1","gpos75"],[1763e5,1775e5,"q34.2","gneg"],[1775e5,1832e5,"q34.3","gpos100"],[1832e5,1871e5,"q35.1","gneg"],[1871e5,191154276,"q35.2","gpos25"]],5:[[0,45e5,"p15.33","gneg"],[45e5,63e5,"p15.32","gpos25"],[63e5,98e5,"p15.31","gneg"],[98e5,15e6,"p15.2","gpos50"],[15e6,184e5,"p15.1","gneg"],[184e5,233e5,"p14.3","gpos100"],[233e5,246e5,"p14.2","gneg"],[246e5,289e5,"p14.1","gpos100"],[289e5,338e5,"p13.3","gneg"],[338e5,384e5,"p13.2","gpos25"],[384e5,425e5,"p13.1","gneg"],[425e5,461e5,"p12","gpos50"],[461e5,484e5,"p11","acen"],[484e5,507e5,"q11.1","acen"],[507e5,589e5,"q11.2","gneg"],[589e5,629e5,"q12.1","gpos75"],[629e5,632e5,"q12.2","gneg"],[632e5,667e5,"q12.3","gpos75"],[667e5,684e5,"q13.1","gneg"],[684e5,733e5,"q13.2","gpos50"],[733e5,769e5,"q13.3","gneg"],[769e5,814e5,"q14.1","gpos50"],[814e5,828e5,"q14.2","gneg"],[828e5,923e5,"q14.3","gpos100"],[923e5,982e5,"q15","gneg"],[982e5,1028e5,"q21.1","gpos100"],[1028e5,1045e5,"q21.2","gneg"],[1045e5,1096e5,"q21.3","gpos100"],[1096e5,1115e5,"q22.1","gneg"],[1115e5,1131e5,"q22.2","gpos50"],[1131e5,1152e5,"q22.3","gneg"],[1152e5,1214e5,"q23.1","gpos100"],[1214e5,1273e5,"q23.2","gneg"],[1273e5,1306e5,"q23.3","gpos100"],[1306e5,1362e5,"q31.1","gneg"],[1362e5,1395e5,"q31.2","gpos25"],[1395e5,1445e5,"q31.3","gneg"],[1445e5,1498e5,"q32","gpos75"],[1498e5,1527e5,"q33.1","gneg"],[1527e5,1557e5,"q33.2","gpos50"],[1557e5,1599e5,"q33.3","gneg"],[1599e5,1685e5,"q34","gpos100"],[1685e5,1728e5,"q35.1","gneg"],[1728e5,1766e5,"q35.2","gpos25"],[1766e5,180915260,"q35.3","gneg"]],6:[[0,23e5,"p25.3","gneg"],[23e5,42e5,"p25.2","gpos25"],[42e5,71e5,"p25.1","gneg"],[71e5,106e5,"p24.3","gpos50"],[106e5,116e5,"p24.2","gneg"],[116e5,134e5,"p24.1","gpos25"],[134e5,152e5,"p23","gneg"],[152e5,252e5,"p22.3","gpos75"],[252e5,27e6,"p22.2","gneg"],[27e6,304e5,"p22.1","gpos50"],[304e5,321e5,"p21.33","gneg"],[321e5,335e5,"p21.32","gpos25"],[335e5,366e5,"p21.31","gneg"],[366e5,405e5,"p21.2","gpos25"],[405e5,462e5,"p21.1","gneg"],[462e5,518e5,"p12.3","gpos100"],[518e5,529e5,"p12.2","gneg"],[529e5,57e6,"p12.1","gpos100"],[57e6,587e5,"p11.2","gneg"],[587e5,61e6,"p11.1","acen"],[61e6,633e5,"q11.1","acen"],[633e5,634e5,"q11.2","gneg"],[634e5,7e7,"q12","gpos100"],[7e7,759e5,"q13","gneg"],[759e5,839e5,"q14.1","gpos50"],[839e5,849e5,"q14.2","gneg"],[849e5,88e6,"q14.3","gpos50"],[88e6,931e5,"q15","gneg"],[931e5,995e5,"q16.1","gpos100"],[995e5,1006e5,"q16.2","gneg"],[1006e5,1055e5,"q16.3","gpos100"],[1055e5,1146e5,"q21","gneg"],[1146e5,1183e5,"q22.1","gpos75"],[1183e5,1185e5,"q22.2","gneg"],[1185e5,1261e5,"q22.31","gpos100"],[1261e5,1271e5,"q22.32","gneg"],[1271e5,1303e5,"q22.33","gpos75"],[1303e5,1312e5,"q23.1","gneg"],[1312e5,1352e5,"q23.2","gpos50"],[1352e5,139e6,"q23.3","gneg"],[139e6,1428e5,"q24.1","gpos75"],[1428e5,1456e5,"q24.2","gneg"],[1456e5,149e6,"q24.3","gpos75"],[149e6,1525e5,"q25.1","gneg"],[1525e5,1555e5,"q25.2","gpos50"],[1555e5,161e6,"q25.3","gneg"],[161e6,1645e5,"q26","gpos50"],[1645e5,171115067,"q27","gneg"]],7:[[0,28e5,"p22.3","gneg"],[28e5,45e5,"p22.2","gpos25"],[45e5,73e5,"p22.1","gneg"],[73e5,138e5,"p21.3","gpos100"],[138e5,165e5,"p21.2","gneg"],[165e5,209e5,"p21.1","gpos100"],[209e5,255e5,"p15.3","gneg"],[255e5,28e6,"p15.2","gpos50"],[28e6,288e5,"p15.1","gneg"],[288e5,35e6,"p14.3","gpos75"],[35e6,372e5,"p14.2","gneg"],[372e5,433e5,"p14.1","gpos75"],[433e5,454e5,"p13","gneg"],[454e5,49e6,"p12.3","gpos75"],[49e6,505e5,"p12.2","gneg"],[505e5,54e6,"p12.1","gpos75"],[54e6,58e6,"p11.2","gneg"],[58e6,599e5,"p11.1","acen"],[599e5,617e5,"q11.1","acen"],[617e5,67e6,"q11.21","gneg"],[67e6,722e5,"q11.22","gpos50"],[722e5,775e5,"q11.23","gneg"],[775e5,864e5,"q21.11","gpos100"],[864e5,882e5,"q21.12","gneg"],[882e5,911e5,"q21.13","gpos75"],[911e5,928e5,"q21.2","gneg"],[928e5,98e6,"q21.3","gpos75"],[98e6,1038e5,"q22.1","gneg"],[1038e5,1045e5,"q22.2","gpos50"],[1045e5,1074e5,"q22.3","gneg"],[1074e5,1146e5,"q31.1","gpos75"],[1146e5,1174e5,"q31.2","gneg"],[1174e5,1211e5,"q31.31","gpos75"],[1211e5,1238e5,"q31.32","gneg"],[1238e5,1271e5,"q31.33","gpos75"],[1271e5,1292e5,"q32.1","gneg"],[1292e5,1304e5,"q32.2","gpos25"],[1304e5,1326e5,"q32.3","gneg"],[1326e5,1382e5,"q33","gpos50"],[1382e5,1431e5,"q34","gneg"],[1431e5,1479e5,"q35","gpos75"],[1479e5,1526e5,"q36.1","gneg"],[1526e5,1551e5,"q36.2","gpos25"],[1551e5,159138663,"q36.3","gneg"]],8:[[0,22e5,"p23.3","gneg"],[22e5,62e5,"p23.2","gpos75"],[62e5,127e5,"p23.1","gneg"],[127e5,19e6,"p22","gpos100"],[19e6,233e5,"p21.3","gneg"],[233e5,274e5,"p21.2","gpos50"],[274e5,288e5,"p21.1","gneg"],[288e5,365e5,"p12","gpos75"],[365e5,383e5,"p11.23","gneg"],[383e5,397e5,"p11.22","gpos25"],[397e5,431e5,"p11.21","gneg"],[431e5,456e5,"p11.1","acen"],[456e5,481e5,"q11.1","acen"],[481e5,522e5,"q11.21","gneg"],[522e5,526e5,"q11.22","gpos75"],[526e5,555e5,"q11.23","gneg"],[555e5,616e5,"q12.1","gpos50"],[616e5,622e5,"q12.2","gneg"],[622e5,66e6,"q12.3","gpos50"],[66e6,68e6,"q13.1","gneg"],[68e6,705e5,"q13.2","gpos50"],[705e5,739e5,"q13.3","gneg"],[739e5,783e5,"q21.11","gpos100"],[783e5,801e5,"q21.12","gneg"],[801e5,846e5,"q21.13","gpos75"],[846e5,869e5,"q21.2","gneg"],[869e5,933e5,"q21.3","gpos100"],[933e5,99e6,"q22.1","gneg"],[99e6,1016e5,"q22.2","gpos25"],[1016e5,1062e5,"q22.3","gneg"],[1062e5,1105e5,"q23.1","gpos75"],[1105e5,1121e5,"q23.2","gneg"],[1121e5,1177e5,"q23.3","gpos100"],[1177e5,1192e5,"q24.11","gneg"],[1192e5,1225e5,"q24.12","gpos50"],[1225e5,1273e5,"q24.13","gneg"],[1273e5,1315e5,"q24.21","gpos50"],[1315e5,1364e5,"q24.22","gneg"],[1364e5,1399e5,"q24.23","gpos75"],[1399e5,146364022,"q24.3","gneg"]],9:[[0,22e5,"p24.3","gneg"],[22e5,46e5,"p24.2","gpos25"],[46e5,9e6,"p24.1","gneg"],[9e6,142e5,"p23","gpos75"],[142e5,166e5,"p22.3","gneg"],[166e5,185e5,"p22.2","gpos25"],[185e5,199e5,"p22.1","gneg"],[199e5,256e5,"p21.3","gpos100"],[256e5,28e6,"p21.2","gneg"],[28e6,332e5,"p21.1","gpos100"],[332e5,363e5,"p13.3","gneg"],[363e5,384e5,"p13.2","gpos25"],[384e5,41e6,"p13.1","gneg"],[41e6,436e5,"p12","gpos50"],[436e5,473e5,"p11.2","gneg"],[473e5,49e6,"p11.1","acen"],[49e6,507e5,"q11","acen"],[507e5,659e5,"q12","gvar"],[659e5,687e5,"q13","gneg"],[687e5,722e5,"q21.11","gpos25"],[722e5,74e6,"q21.12","gneg"],[74e6,792e5,"q21.13","gpos50"],[792e5,811e5,"q21.2","gneg"],[811e5,841e5,"q21.31","gpos50"],[841e5,869e5,"q21.32","gneg"],[869e5,904e5,"q21.33","gpos50"],[904e5,918e5,"q22.1","gneg"],[918e5,939e5,"q22.2","gpos25"],[939e5,966e5,"q22.31","gneg"],[966e5,993e5,"q22.32","gpos25"],[993e5,1026e5,"q22.33","gneg"],[1026e5,1082e5,"q31.1","gpos100"],[1082e5,1113e5,"q31.2","gneg"],[1113e5,1149e5,"q31.3","gpos25"],[1149e5,1177e5,"q32","gneg"],[1177e5,1225e5,"q33.1","gpos75"],[1225e5,1258e5,"q33.2","gneg"],[1258e5,1303e5,"q33.3","gpos25"],[1303e5,1335e5,"q34.11","gneg"],[1335e5,134e6,"q34.12","gpos25"],[134e6,1359e5,"q34.13","gneg"],[1359e5,1374e5,"q34.2","gpos25"],[1374e5,141213431,"q34.3","gneg"]],10:[[0,3e6,"p15.3","gneg"],[3e6,38e5,"p15.2","gpos25"],[38e5,66e5,"p15.1","gneg"],[66e5,122e5,"p14","gpos75"],[122e5,173e5,"p13","gneg"],[173e5,186e5,"p12.33","gpos75"],[186e5,187e5,"p12.32","gneg"],[187e5,226e5,"p12.31","gpos75"],[226e5,246e5,"p12.2","gneg"],[246e5,296e5,"p12.1","gpos50"],[296e5,313e5,"p11.23","gneg"],[313e5,344e5,"p11.22","gpos25"],[344e5,38e6,"p11.21","gneg"],[38e6,402e5,"p11.1","acen"],[402e5,423e5,"q11.1","acen"],[423e5,461e5,"q11.21","gneg"],[461e5,499e5,"q11.22","gpos25"],[499e5,529e5,"q11.23","gneg"],[529e5,612e5,"q21.1","gpos100"],[612e5,645e5,"q21.2","gneg"],[645e5,706e5,"q21.3","gpos100"],[706e5,749e5,"q22.1","gneg"],[749e5,777e5,"q22.2","gpos50"],[777e5,82e6,"q22.3","gneg"],[82e6,879e5,"q23.1","gpos100"],[879e5,895e5,"q23.2","gneg"],[895e5,929e5,"q23.31","gpos75"],[929e5,941e5,"q23.32","gneg"],[941e5,97e6,"q23.33","gpos50"],[97e6,993e5,"q24.1","gneg"],[993e5,1019e5,"q24.2","gpos50"],[1019e5,103e6,"q24.31","gneg"],[103e6,1049e5,"q24.32","gpos25"],[1049e5,1058e5,"q24.33","gneg"],[1058e5,1119e5,"q25.1","gpos100"],[1119e5,1149e5,"q25.2","gneg"],[1149e5,1191e5,"q25.3","gpos75"],[1191e5,1217e5,"q26.11","gneg"],[1217e5,1231e5,"q26.12","gpos50"],[1231e5,1275e5,"q26.13","gneg"],[1275e5,1306e5,"q26.2","gpos50"],[1306e5,135534747,"q26.3","gneg"]],11:[[0,28e5,"p15.5","gneg"],[28e5,107e5,"p15.4","gpos50"],[107e5,127e5,"p15.3","gneg"],[127e5,162e5,"p15.2","gpos50"],[162e5,217e5,"p15.1","gneg"],[217e5,261e5,"p14.3","gpos100"],[261e5,272e5,"p14.2","gneg"],[272e5,31e6,"p14.1","gpos75"],[31e6,364e5,"p13","gneg"],[364e5,435e5,"p12","gpos100"],[435e5,488e5,"p11.2","gneg"],[488e5,516e5,"p11.12","gpos75"],[516e5,537e5,"p11.11","acen"],[537e5,557e5,"q11","acen"],[557e5,599e5,"q12.1","gpos75"],[599e5,617e5,"q12.2","gneg"],[617e5,634e5,"q12.3","gpos25"],[634e5,659e5,"q13.1","gneg"],[659e5,684e5,"q13.2","gpos25"],[684e5,704e5,"q13.3","gneg"],[704e5,752e5,"q13.4","gpos50"],[752e5,771e5,"q13.5","gneg"],[771e5,856e5,"q14.1","gpos100"],[856e5,883e5,"q14.2","gneg"],[883e5,928e5,"q14.3","gpos100"],[928e5,972e5,"q21","gneg"],[972e5,1021e5,"q22.1","gpos100"],[1021e5,1029e5,"q22.2","gneg"],[1029e5,1104e5,"q22.3","gpos100"],[1104e5,1125e5,"q23.1","gneg"],[1125e5,1145e5,"q23.2","gpos50"],[1145e5,1212e5,"q23.3","gneg"],[1212e5,1239e5,"q24.1","gpos50"],[1239e5,1278e5,"q24.2","gneg"],[1278e5,1308e5,"q24.3","gpos50"],[1308e5,135006516,"q25","gneg"]],12:[[0,33e5,"p13.33","gneg"],[33e5,54e5,"p13.32","gpos25"],[54e5,101e5,"p13.31","gneg"],[101e5,128e5,"p13.2","gpos75"],[128e5,148e5,"p13.1","gneg"],[148e5,2e7,"p12.3","gpos100"],[2e7,213e5,"p12.2","gneg"],[213e5,265e5,"p12.1","gpos100"],[265e5,278e5,"p11.23","gneg"],[278e5,307e5,"p11.22","gpos50"],[307e5,333e5,"p11.21","gneg"],[333e5,358e5,"p11.1","acen"],[358e5,382e5,"q11","acen"],[382e5,464e5,"q12","gpos100"],[464e5,491e5,"q13.11","gneg"],[491e5,515e5,"q13.12","gpos25"],[515e5,549e5,"q13.13","gneg"],[549e5,566e5,"q13.2","gpos25"],[566e5,581e5,"q13.3","gneg"],[581e5,631e5,"q14.1","gpos75"],[631e5,651e5,"q14.2","gneg"],[651e5,677e5,"q14.3","gpos50"],[677e5,715e5,"q15","gneg"],[715e5,757e5,"q21.1","gpos75"],[757e5,803e5,"q21.2","gneg"],[803e5,867e5,"q21.31","gpos100"],[867e5,89e6,"q21.32","gneg"],[89e6,926e5,"q21.33","gpos100"],[926e5,962e5,"q22","gneg"],[962e5,1016e5,"q23.1","gpos75"],[1016e5,1038e5,"q23.2","gneg"],[1038e5,109e6,"q23.3","gpos50"],[109e6,1117e5,"q24.11","gneg"],[1117e5,1123e5,"q24.12","gpos25"],[1123e5,1143e5,"q24.13","gneg"],[1143e5,1168e5,"q24.21","gpos50"],[1168e5,1181e5,"q24.22","gneg"],[1181e5,1207e5,"q24.23","gpos50"],[1207e5,1259e5,"q24.31","gneg"],[1259e5,1293e5,"q24.32","gpos50"],[1293e5,133851895,"q24.33","gneg"]],13:[[0,45e5,"p13","gvar"],[45e5,1e7,"p12","stalk"],[1e7,163e5,"p11.2","gvar"],[163e5,179e5,"p11.1","acen"],[179e5,195e5,"q11","acen"],[195e5,233e5,"q12.11","gneg"],[233e5,255e5,"q12.12","gpos25"],[255e5,278e5,"q12.13","gneg"],[278e5,289e5,"q12.2","gpos25"],[289e5,322e5,"q12.3","gneg"],[322e5,34e6,"q13.1","gpos50"],[34e6,355e5,"q13.2","gneg"],[355e5,401e5,"q13.3","gpos75"],[401e5,452e5,"q14.11","gneg"],[452e5,458e5,"q14.12","gpos25"],[458e5,473e5,"q14.13","gneg"],[473e5,509e5,"q14.2","gpos50"],[509e5,553e5,"q14.3","gneg"],[553e5,596e5,"q21.1","gpos100"],[596e5,623e5,"q21.2","gneg"],[623e5,657e5,"q21.31","gpos75"],[657e5,686e5,"q21.32","gneg"],[686e5,733e5,"q21.33","gpos100"],[733e5,754e5,"q22.1","gneg"],[754e5,772e5,"q22.2","gpos50"],[772e5,79e6,"q22.3","gneg"],[79e6,877e5,"q31.1","gpos100"],[877e5,9e7,"q31.2","gneg"],[9e7,95e6,"q31.3","gpos100"],[95e6,982e5,"q32.1","gneg"],[982e5,993e5,"q32.2","gpos25"],[993e5,1017e5,"q32.3","gneg"],[1017e5,1048e5,"q33.1","gpos100"],[1048e5,107e6,"q33.2","gneg"],[107e6,1103e5,"q33.3","gpos100"],[1103e5,115169878,"q34","gneg"]],14:[[0,37e5,"p13","gvar"],[37e5,81e5,"p12","stalk"],[81e5,161e5,"p11.2","gvar"],[161e5,176e5,"p11.1","acen"],[176e5,191e5,"q11.1","acen"],[191e5,246e5,"q11.2","gneg"],[246e5,333e5,"q12","gpos100"],[333e5,353e5,"q13.1","gneg"],[353e5,366e5,"q13.2","gpos50"],[366e5,378e5,"q13.3","gneg"],[378e5,435e5,"q21.1","gpos100"],[435e5,472e5,"q21.2","gneg"],[472e5,509e5,"q21.3","gpos100"],[509e5,541e5,"q22.1","gneg"],[541e5,555e5,"q22.2","gpos25"],[555e5,581e5,"q22.3","gneg"],[581e5,621e5,"q23.1","gpos75"],[621e5,648e5,"q23.2","gneg"],[648e5,679e5,"q23.3","gpos50"],[679e5,702e5,"q24.1","gneg"],[702e5,738e5,"q24.2","gpos50"],[738e5,793e5,"q24.3","gneg"],[793e5,836e5,"q31.1","gpos100"],[836e5,849e5,"q31.2","gneg"],[849e5,898e5,"q31.3","gpos100"],[898e5,919e5,"q32.11","gneg"],[919e5,947e5,"q32.12","gpos25"],[947e5,963e5,"q32.13","gneg"],[963e5,1014e5,"q32.2","gpos50"],[1014e5,1032e5,"q32.31","gneg"],[1032e5,104e6,"q32.32","gpos50"],[104e6,107349540,"q32.33","gneg"]],15:[[0,39e5,"p13","gvar"],[39e5,87e5,"p12","stalk"],[87e5,158e5,"p11.2","gvar"],[158e5,19e6,"p11.1","acen"],[19e6,207e5,"q11.1","acen"],[207e5,257e5,"q11.2","gneg"],[257e5,281e5,"q12","gpos50"],[281e5,303e5,"q13.1","gneg"],[303e5,312e5,"q13.2","gpos50"],[312e5,336e5,"q13.3","gneg"],[336e5,401e5,"q14","gpos75"],[401e5,428e5,"q15.1","gneg"],[428e5,436e5,"q15.2","gpos25"],[436e5,448e5,"q15.3","gneg"],[448e5,495e5,"q21.1","gpos75"],[495e5,529e5,"q21.2","gneg"],[529e5,591e5,"q21.3","gpos75"],[591e5,593e5,"q22.1","gneg"],[593e5,637e5,"q22.2","gpos25"],[637e5,672e5,"q22.31","gneg"],[672e5,673e5,"q22.32","gpos25"],[673e5,675e5,"q22.33","gneg"],[675e5,727e5,"q23","gpos25"],[727e5,752e5,"q24.1","gneg"],[752e5,766e5,"q24.2","gpos25"],[766e5,783e5,"q24.3","gneg"],[783e5,817e5,"q25.1","gpos50"],[817e5,852e5,"q25.2","gneg"],[852e5,891e5,"q25.3","gpos50"],[891e5,943e5,"q26.1","gneg"],[943e5,985e5,"q26.2","gpos50"],[985e5,102531392,"q26.3","gneg"]],16:[[0,79e5,"p13.3","gneg"],[79e5,105e5,"p13.2","gpos50"],[105e5,126e5,"p13.13","gneg"],[126e5,148e5,"p13.12","gpos50"],[148e5,168e5,"p13.11","gneg"],[168e5,212e5,"p12.3","gpos50"],[212e5,242e5,"p12.2","gneg"],[242e5,281e5,"p12.1","gpos50"],[281e5,346e5,"p11.2","gneg"],[346e5,366e5,"p11.1","acen"],[366e5,386e5,"q11.1","acen"],[386e5,47e6,"q11.2","gvar"],[47e6,526e5,"q12.1","gneg"],[526e5,567e5,"q12.2","gpos50"],[567e5,574e5,"q13","gneg"],[574e5,667e5,"q21","gpos100"],[667e5,708e5,"q22.1","gneg"],[708e5,729e5,"q22.2","gpos50"],[729e5,741e5,"q22.3","gneg"],[741e5,792e5,"q23.1","gpos75"],[792e5,817e5,"q23.2","gneg"],[817e5,842e5,"q23.3","gpos50"],[842e5,871e5,"q24.1","gneg"],[871e5,887e5,"q24.2","gpos25"],[887e5,90354753,"q24.3","gneg"]],17:[[0,33e5,"p13.3","gneg"],[33e5,65e5,"p13.2","gpos50"],[65e5,107e5,"p13.1","gneg"],[107e5,16e6,"p12","gpos75"],[16e6,222e5,"p11.2","gneg"],[222e5,24e6,"p11.1","acen"],[24e6,258e5,"q11.1","acen"],[258e5,318e5,"q11.2","gneg"],[318e5,381e5,"q12","gpos50"],[381e5,384e5,"q21.1","gneg"],[384e5,409e5,"q21.2","gpos25"],[409e5,449e5,"q21.31","gneg"],[449e5,474e5,"q21.32","gpos25"],[474e5,502e5,"q21.33","gneg"],[502e5,576e5,"q22","gpos75"],[576e5,583e5,"q23.1","gneg"],[583e5,611e5,"q23.2","gpos75"],[611e5,626e5,"q23.3","gneg"],[626e5,642e5,"q24.1","gpos50"],[642e5,671e5,"q24.2","gneg"],[671e5,709e5,"q24.3","gpos75"],[709e5,748e5,"q25.1","gneg"],[748e5,753e5,"q25.2","gpos25"],[753e5,81195210,"q25.3","gneg"]],18:[[0,29e5,"p11.32","gneg"],[29e5,71e5,"p11.31","gpos50"],[71e5,85e5,"p11.23","gneg"],[85e5,109e5,"p11.22","gpos25"],[109e5,154e5,"p11.21","gneg"],[154e5,172e5,"p11.1","acen"],[172e5,19e6,"q11.1","acen"],[19e6,25e6,"q11.2","gneg"],[25e6,327e5,"q12.1","gpos100"],[327e5,372e5,"q12.2","gneg"],[372e5,435e5,"q12.3","gpos75"],[435e5,482e5,"q21.1","gneg"],[482e5,538e5,"q21.2","gpos75"],[538e5,562e5,"q21.31","gneg"],[562e5,59e6,"q21.32","gpos50"],[59e6,616e5,"q21.33","gneg"],[616e5,668e5,"q22.1","gpos100"],[668e5,687e5,"q22.2","gneg"],[687e5,731e5,"q22.3","gpos25"],[731e5,78077248,"q23","gneg"]],19:[[0,69e5,"p13.3","gneg"],[69e5,139e5,"p13.2","gpos25"],[139e5,14e6,"p13.13","gneg"],[14e6,163e5,"p13.12","gpos25"],[163e5,2e7,"p13.11","gneg"],[2e7,244e5,"p12","gvar"],[244e5,265e5,"p11","acen"],[265e5,286e5,"q11","acen"],[286e5,324e5,"q12","gvar"],[324e5,355e5,"q13.11","gneg"],[355e5,383e5,"q13.12","gpos25"],[383e5,387e5,"q13.13","gneg"],[387e5,434e5,"q13.2","gpos25"],[434e5,452e5,"q13.31","gneg"],[452e5,48e6,"q13.32","gpos25"],[48e6,514e5,"q13.33","gneg"],[514e5,536e5,"q13.41","gpos25"],[536e5,563e5,"q13.42","gneg"],[563e5,59128983,"q13.43","gpos25"]],20:[[0,51e5,"p13","gneg"],[51e5,92e5,"p12.3","gpos75"],[92e5,121e5,"p12.2","gneg"],[121e5,179e5,"p12.1","gpos75"],[179e5,213e5,"p11.23","gneg"],[213e5,223e5,"p11.22","gpos25"],[223e5,256e5,"p11.21","gneg"],[256e5,275e5,"p11.1","acen"],[275e5,294e5,"q11.1","acen"],[294e5,321e5,"q11.21","gneg"],[321e5,344e5,"q11.22","gpos25"],[344e5,376e5,"q11.23","gneg"],[376e5,417e5,"q12","gpos75"],[417e5,421e5,"q13.11","gneg"],[421e5,464e5,"q13.12","gpos25"],[464e5,498e5,"q13.13","gneg"],[498e5,55e6,"q13.2","gpos75"],[55e6,565e5,"q13.31","gneg"],[565e5,584e5,"q13.32","gpos50"],[584e5,63025520,"q13.33","gneg"]],21:[[0,28e5,"p13","gvar"],[28e5,68e5,"p12","stalk"],[68e5,109e5,"p11.2","gvar"],[109e5,132e5,"p11.1","acen"],[132e5,143e5,"q11.1","acen"],[143e5,164e5,"q11.2","gneg"],[164e5,24e6,"q21.1","gpos100"],[24e6,268e5,"q21.2","gneg"],[268e5,315e5,"q21.3","gpos75"],[315e5,358e5,"q22.11","gneg"],[358e5,378e5,"q22.12","gpos50"],[378e5,397e5,"q22.13","gneg"],[397e5,426e5,"q22.2","gpos50"],[426e5,48129895,"q22.3","gneg"]],22:[[0,38e5,"p13","gvar"],[38e5,83e5,"p12","stalk"],[83e5,122e5,"p11.2","gvar"],[122e5,147e5,"p11.1","acen"],[147e5,179e5,"q11.1","acen"],[179e5,222e5,"q11.21","gneg"],[222e5,235e5,"q11.22","gpos25"],[235e5,259e5,"q11.23","gneg"],[259e5,296e5,"q12.1","gpos50"],[296e5,322e5,"q12.2","gneg"],[322e5,376e5,"q12.3","gpos50"],[376e5,41e6,"q13.1","gneg"],[41e6,442e5,"q13.2","gpos50"],[442e5,484e5,"q13.31","gneg"],[484e5,494e5,"q13.32","gpos50"],[494e5,51304566,"q13.33","gneg"]],X:[[0,43e5,"p22.33","gneg"],[43e5,6e6,"p22.32","gpos50"],[6e6,95e5,"p22.31","gneg"],[95e5,171e5,"p22.2","gpos50"],[171e5,193e5,"p22.13","gneg"],[193e5,219e5,"p22.12","gpos50"],[219e5,249e5,"p22.11","gneg"],[249e5,293e5,"p21.3","gpos100"],[293e5,315e5,"p21.2","gneg"],[315e5,376e5,"p21.1","gpos100"],[376e5,424e5,"p11.4","gneg"],[424e5,464e5,"p11.3","gpos75"],[464e5,498e5,"p11.23","gneg"],[498e5,548e5,"p11.22","gpos25"],[548e5,581e5,"p11.21","gneg"],[581e5,606e5,"p11.1","acen"],[606e5,63e6,"q11.1","acen"],[63e6,646e5,"q11.2","gneg"],[646e5,678e5,"q12","gpos50"],[678e5,718e5,"q13.1","gneg"],[718e5,739e5,"q13.2","gpos50"],[739e5,76e6,"q13.3","gneg"],[76e6,846e5,"q21.1","gpos100"],[846e5,862e5,"q21.2","gneg"],[862e5,918e5,"q21.31","gpos100"],[918e5,935e5,"q21.32","gneg"],[935e5,983e5,"q21.33","gpos75"],[983e5,1026e5,"q22.1","gneg"],[1026e5,1037e5,"q22.2","gpos50"],[1037e5,1087e5,"q22.3","gneg"],[1087e5,1165e5,"q23","gpos75"],[1165e5,1209e5,"q24","gneg"],[1209e5,1287e5,"q25","gpos100"],[1287e5,1304e5,"q26.1","gneg"],[1304e5,1336e5,"q26.2","gpos25"],[1336e5,138e6,"q26.3","gneg"],[138e6,1403e5,"q27.1","gpos75"],[1403e5,1421e5,"q27.2","gneg"],[1421e5,1471e5,"q27.3","gpos100"],[1471e5,155270560,"q28","gneg"]],Y:[[0,25e5,"p11.32","gneg"],[25e5,3e6,"p11.31","gpos50"],[3e6,116e5,"p11.2","gneg"],[116e5,125e5,"p11.1","acen"],[125e5,134e5,"q11.1","acen"],[134e5,151e5,"q11.21","gneg"],[151e5,198e5,"q11.221","gpos50"],[198e5,221e5,"q11.222","gneg"],[221e5,262e5,"q11.223","gpos50"],[262e5,288e5,"q11.23","gneg"],[288e5,59373566,"q12","gvar"]]}},hg38:{columns:["start","end","name","stain"],order:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,"X","Y"],data:{1:[[0,23e5,"p36.33","gneg"],[23e5,53e5,"p36.32","gpos25"],[53e5,71e5,"p36.31","gneg"],[71e5,91e5,"p36.23","gpos25"],[91e5,125e5,"p36.22","gneg"],[125e5,159e5,"p36.21","gpos50"],[159e5,201e5,"p36.13","gneg"],[201e5,236e5,"p36.12","gpos25"],[236e5,276e5,"p36.11","gneg"],[276e5,299e5,"p35.3","gpos25"],[299e5,323e5,"p35.2","gneg"],[323e5,343e5,"p35.1","gpos25"],[343e5,396e5,"p34.3","gneg"],[396e5,437e5,"p34.2","gpos25"],[437e5,463e5,"p34.1","gneg"],[463e5,502e5,"p33","gpos75"],[502e5,556e5,"p32.3","gneg"],[556e5,585e5,"p32.2","gpos50"],[585e5,608e5,"p32.1","gneg"],[608e5,685e5,"p31.3","gpos50"],[685e5,693e5,"p31.2","gneg"],[693e5,844e5,"p31.1","gpos100"],[844e5,879e5,"p22.3","gneg"],[879e5,915e5,"p22.2","gpos75"],[915e5,943e5,"p22.1","gneg"],[943e5,993e5,"p21.3","gpos75"],[993e5,1018e5,"p21.2","gneg"],[1018e5,1067e5,"p21.1","gpos100"],[1067e5,1112e5,"p13.3","gneg"],[1112e5,1155e5,"p13.2","gpos50"],[1155e5,1172e5,"p13.1","gneg"],[1172e5,1204e5,"p12","gpos50"],[1204e5,1217e5,"p11.2","gneg"],[1217e5,1234e5,"p11.1","acen"],[1234e5,1251e5,"q11","acen"],[1251e5,1432e5,"q12","gvar"],[1432e5,1475e5,"q21.1","gneg"],[1475e5,1506e5,"q21.2","gpos50"],[1506e5,1551e5,"q21.3","gneg"],[1551e5,1566e5,"q22","gpos50"],[1566e5,1591e5,"q23.1","gneg"],[1591e5,1605e5,"q23.2","gpos50"],[1605e5,1655e5,"q23.3","gneg"],[1655e5,1672e5,"q24.1","gpos50"],[1672e5,1709e5,"q24.2","gneg"],[1709e5,173e6,"q24.3","gpos75"],[173e6,1761e5,"q25.1","gneg"],[1761e5,1803e5,"q25.2","gpos50"],[1803e5,1858e5,"q25.3","gneg"],[1858e5,1908e5,"q31.1","gpos100"],[1908e5,1938e5,"q31.2","gneg"],[1938e5,1987e5,"q31.3","gpos100"],[1987e5,2071e5,"q32.1","gneg"],[2071e5,2113e5,"q32.2","gpos25"],[2113e5,2144e5,"q32.3","gneg"],[2144e5,2239e5,"q41","gpos100"],[2239e5,2244e5,"q42.11","gneg"],[2244e5,2268e5,"q42.12","gpos25"],[2268e5,2305e5,"q42.13","gneg"],[2305e5,2346e5,"q42.2","gpos50"],[2346e5,2364e5,"q42.3","gneg"],[2364e5,2435e5,"q43","gpos75"],[2435e5,248956422,"q44","gneg"]],2:[[0,44e5,"p25.3","gneg"],[44e5,69e5,"p25.2","gpos50"],[69e5,12e6,"p25.1","gneg"],[12e6,165e5,"p24.3","gpos75"],[165e5,19e6,"p24.2","gneg"],[19e6,238e5,"p24.1","gpos75"],[238e5,277e5,"p23.3","gneg"],[277e5,298e5,"p23.2","gpos25"],[298e5,318e5,"p23.1","gneg"],[318e5,363e5,"p22.3","gpos75"],[363e5,383e5,"p22.2","gneg"],[383e5,415e5,"p22.1","gpos50"],[415e5,475e5,"p21","gneg"],[475e5,526e5,"p16.3","gpos100"],[526e5,547e5,"p16.2","gneg"],[547e5,61e6,"p16.1","gpos100"],[61e6,639e5,"p15","gneg"],[639e5,684e5,"p14","gpos50"],[684e5,713e5,"p13.3","gneg"],[713e5,733e5,"p13.2","gpos50"],[733e5,748e5,"p13.1","gneg"],[748e5,831e5,"p12","gpos100"],[831e5,918e5,"p11.2","gneg"],[918e5,939e5,"p11.1","acen"],[939e5,96e6,"q11.1","acen"],[96e6,1021e5,"q11.2","gneg"],[1021e5,1053e5,"q12.1","gpos50"],[1053e5,1067e5,"q12.2","gneg"],[1067e5,1087e5,"q12.3","gpos25"],[1087e5,1122e5,"q13","gneg"],[1122e5,1181e5,"q14.1","gpos50"],[1181e5,1216e5,"q14.2","gneg"],[1216e5,1291e5,"q14.3","gpos50"],[1291e5,1317e5,"q21.1","gneg"],[1317e5,1343e5,"q21.2","gpos25"],[1343e5,1361e5,"q21.3","gneg"],[1361e5,1415e5,"q22.1","gpos100"],[1415e5,1434e5,"q22.2","gneg"],[1434e5,1479e5,"q22.3","gpos100"],[1479e5,149e6,"q23.1","gneg"],[149e6,1496e5,"q23.2","gpos25"],[1496e5,154e6,"q23.3","gneg"],[154e6,1589e5,"q24.1","gpos75"],[1589e5,1629e5,"q24.2","gneg"],[1629e5,1689e5,"q24.3","gpos75"],[1689e5,1771e5,"q31.1","gneg"],[1771e5,1797e5,"q31.2","gpos50"],[1797e5,1821e5,"q31.3","gneg"],[1821e5,1885e5,"q32.1","gpos75"],[1885e5,1911e5,"q32.2","gneg"],[1911e5,1966e5,"q32.3","gpos75"],[1966e5,2025e5,"q33.1","gneg"],[2025e5,2041e5,"q33.2","gpos50"],[2041e5,2082e5,"q33.3","gneg"],[2082e5,2145e5,"q34","gpos100"],[2145e5,2207e5,"q35","gneg"],[2207e5,2243e5,"q36.1","gpos75"],[2243e5,2252e5,"q36.2","gneg"],[2252e5,2301e5,"q36.3","gpos100"],[2301e5,2347e5,"q37.1","gneg"],[2347e5,2364e5,"q37.2","gpos50"],[2364e5,242193529,"q37.3","gneg"]],3:[[0,28e5,"p26.3","gpos50"],[28e5,4e6,"p26.2","gneg"],[4e6,81e5,"p26.1","gpos50"],[81e5,116e5,"p25.3","gneg"],[116e5,132e5,"p25.2","gpos25"],[132e5,163e5,"p25.1","gneg"],[163e5,238e5,"p24.3","gpos100"],[238e5,263e5,"p24.2","gneg"],[263e5,308e5,"p24.1","gpos75"],[308e5,32e6,"p23","gneg"],[32e6,364e5,"p22.3","gpos50"],[364e5,393e5,"p22.2","gneg"],[393e5,436e5,"p22.1","gpos75"],[436e5,441e5,"p21.33","gneg"],[441e5,442e5,"p21.32","gpos50"],[442e5,506e5,"p21.31","gneg"],[506e5,523e5,"p21.2","gpos25"],[523e5,544e5,"p21.1","gneg"],[544e5,586e5,"p14.3","gpos50"],[586e5,638e5,"p14.2","gneg"],[638e5,697e5,"p14.1","gpos50"],[697e5,741e5,"p13","gneg"],[741e5,798e5,"p12.3","gpos75"],[798e5,835e5,"p12.2","gneg"],[835e5,871e5,"p12.1","gpos75"],[871e5,878e5,"p11.2","gneg"],[878e5,909e5,"p11.1","acen"],[909e5,94e6,"q11.1","acen"],[94e6,986e5,"q11.2","gvar"],[986e5,1003e5,"q12.1","gneg"],[1003e5,1012e5,"q12.2","gpos25"],[1012e5,1031e5,"q12.3","gneg"],[1031e5,1065e5,"q13.11","gpos75"],[1065e5,1082e5,"q13.12","gneg"],[1082e5,1116e5,"q13.13","gpos50"],[1116e5,1137e5,"q13.2","gneg"],[1137e5,1176e5,"q13.31","gpos75"],[1176e5,1193e5,"q13.32","gneg"],[1193e5,1222e5,"q13.33","gpos75"],[1222e5,1241e5,"q21.1","gneg"],[1241e5,1261e5,"q21.2","gpos25"],[1261e5,1295e5,"q21.3","gneg"],[1295e5,134e6,"q22.1","gpos25"],[134e6,136e6,"q22.2","gneg"],[136e6,139e6,"q22.3","gpos25"],[139e6,1431e5,"q23","gneg"],[1431e5,1492e5,"q24","gpos100"],[1492e5,1523e5,"q25.1","gneg"],[1523e5,1553e5,"q25.2","gpos50"],[1553e5,1573e5,"q25.31","gneg"],[1573e5,1593e5,"q25.32","gpos50"],[1593e5,161e6,"q25.33","gneg"],[161e6,1679e5,"q26.1","gpos100"],[1679e5,1712e5,"q26.2","gneg"],[1712e5,176e6,"q26.31","gpos75"],[176e6,1793e5,"q26.32","gneg"],[1793e5,183e6,"q26.33","gpos75"],[183e6,1848e5,"q27.1","gneg"],[1848e5,1863e5,"q27.2","gpos25"],[1863e5,1882e5,"q27.3","gneg"],[1882e5,1926e5,"q28","gpos75"],[1926e5,198295559,"q29","gneg"]],4:[[0,45e5,"p16.3","gneg"],[45e5,6e6,"p16.2","gpos25"],[6e6,113e5,"p16.1","gneg"],[113e5,15e6,"p15.33","gpos50"],[15e6,177e5,"p15.32","gneg"],[177e5,213e5,"p15.31","gpos75"],[213e5,277e5,"p15.2","gneg"],[277e5,358e5,"p15.1","gpos100"],[358e5,412e5,"p14","gneg"],[412e5,446e5,"p13","gpos50"],[446e5,482e5,"p12","gneg"],[482e5,5e7,"p11","acen"],[5e7,518e5,"q11","acen"],[518e5,585e5,"q12","gneg"],[585e5,655e5,"q13.1","gpos100"],[655e5,694e5,"q13.2","gneg"],[694e5,753e5,"q13.3","gpos75"],[753e5,78e6,"q21.1","gneg"],[78e6,815e5,"q21.21","gpos50"],[815e5,832e5,"q21.22","gneg"],[832e5,86e6,"q21.23","gpos25"],[86e6,871e5,"q21.3","gneg"],[871e5,928e5,"q22.1","gpos75"],[928e5,942e5,"q22.2","gneg"],[942e5,979e5,"q22.3","gpos75"],[979e5,1001e5,"q23","gneg"],[1001e5,1067e5,"q24","gpos50"],[1067e5,1132e5,"q25","gneg"],[1132e5,1199e5,"q26","gpos75"],[1199e5,1228e5,"q27","gneg"],[1228e5,1279e5,"q28.1","gpos50"],[1279e5,1301e5,"q28.2","gneg"],[1301e5,1385e5,"q28.3","gpos100"],[1385e5,1406e5,"q31.1","gneg"],[1406e5,1459e5,"q31.21","gpos25"],[1459e5,1475e5,"q31.22","gneg"],[1475e5,1502e5,"q31.23","gpos25"],[1502e5,1546e5,"q31.3","gneg"],[1546e5,1608e5,"q32.1","gpos100"],[1608e5,1636e5,"q32.2","gneg"],[1636e5,1692e5,"q32.3","gpos100"],[1692e5,171e6,"q33","gneg"],[171e6,1754e5,"q34.1","gpos75"],[1754e5,1766e5,"q34.2","gneg"],[1766e5,1823e5,"q34.3","gpos100"],[1823e5,1862e5,"q35.1","gneg"],[1862e5,190214555,"q35.2","gpos25"]],5:[[0,44e5,"p15.33","gneg"],[44e5,63e5,"p15.32","gpos25"],[63e5,99e5,"p15.31","gneg"],[99e5,15e6,"p15.2","gpos50"],[15e6,184e5,"p15.1","gneg"],[184e5,233e5,"p14.3","gpos100"],[233e5,246e5,"p14.2","gneg"],[246e5,289e5,"p14.1","gpos100"],[289e5,338e5,"p13.3","gneg"],[338e5,384e5,"p13.2","gpos25"],[384e5,425e5,"p13.1","gneg"],[425e5,461e5,"p12","gpos50"],[461e5,488e5,"p11","acen"],[488e5,514e5,"q11.1","acen"],[514e5,596e5,"q11.2","gneg"],[596e5,636e5,"q12.1","gpos75"],[636e5,639e5,"q12.2","gneg"],[639e5,674e5,"q12.3","gpos75"],[674e5,691e5,"q13.1","gneg"],[691e5,74e6,"q13.2","gpos50"],[74e6,776e5,"q13.3","gneg"],[776e5,821e5,"q14.1","gpos50"],[821e5,835e5,"q14.2","gneg"],[835e5,93e6,"q14.3","gpos100"],[93e6,989e5,"q15","gneg"],[989e5,1034e5,"q21.1","gpos100"],[1034e5,1051e5,"q21.2","gneg"],[1051e5,1102e5,"q21.3","gpos100"],[1102e5,1122e5,"q22.1","gneg"],[1122e5,1138e5,"q22.2","gpos50"],[1138e5,1159e5,"q22.3","gneg"],[1159e5,1221e5,"q23.1","gpos100"],[1221e5,1279e5,"q23.2","gneg"],[1279e5,1312e5,"q23.3","gpos100"],[1312e5,1369e5,"q31.1","gneg"],[1369e5,1401e5,"q31.2","gpos25"],[1401e5,1451e5,"q31.3","gneg"],[1451e5,1504e5,"q32","gpos75"],[1504e5,1533e5,"q33.1","gneg"],[1533e5,1563e5,"q33.2","gpos50"],[1563e5,1605e5,"q33.3","gneg"],[1605e5,169e6,"q34","gpos100"],[169e6,1733e5,"q35.1","gneg"],[1733e5,1771e5,"q35.2","gpos25"],[1771e5,181538259,"q35.3","gneg"]],6:[[0,23e5,"p25.3","gneg"],[23e5,42e5,"p25.2","gpos25"],[42e5,71e5,"p25.1","gneg"],[71e5,106e5,"p24.3","gpos50"],[106e5,116e5,"p24.2","gneg"],[116e5,134e5,"p24.1","gpos25"],[134e5,152e5,"p23","gneg"],[152e5,252e5,"p22.3","gpos75"],[252e5,271e5,"p22.2","gneg"],[271e5,305e5,"p22.1","gpos50"],[305e5,321e5,"p21.33","gneg"],[321e5,335e5,"p21.32","gpos25"],[335e5,366e5,"p21.31","gneg"],[366e5,405e5,"p21.2","gpos25"],[405e5,462e5,"p21.1","gneg"],[462e5,518e5,"p12.3","gpos100"],[518e5,53e6,"p12.2","gneg"],[53e6,572e5,"p12.1","gpos100"],[572e5,585e5,"p11.2","gneg"],[585e5,598e5,"p11.1","acen"],[598e5,626e5,"q11.1","acen"],[626e5,627e5,"q11.2","gneg"],[627e5,692e5,"q12","gpos100"],[692e5,752e5,"q13","gneg"],[752e5,832e5,"q14.1","gpos50"],[832e5,842e5,"q14.2","gneg"],[842e5,873e5,"q14.3","gpos50"],[873e5,925e5,"q15","gneg"],[925e5,989e5,"q16.1","gpos100"],[989e5,1e8,"q16.2","gneg"],[1e8,105e6,"q16.3","gpos100"],[105e6,1142e5,"q21","gneg"],[1142e5,1179e5,"q22.1","gpos75"],[1179e5,1181e5,"q22.2","gneg"],[1181e5,1258e5,"q22.31","gpos100"],[1258e5,1268e5,"q22.32","gneg"],[1268e5,13e7,"q22.33","gpos75"],[13e7,1309e5,"q23.1","gneg"],[1309e5,1347e5,"q23.2","gpos50"],[1347e5,1383e5,"q23.3","gneg"],[1383e5,1422e5,"q24.1","gpos75"],[1422e5,1451e5,"q24.2","gneg"],[1451e5,1485e5,"q24.3","gpos75"],[1485e5,1521e5,"q25.1","gneg"],[1521e5,1552e5,"q25.2","gpos50"],[1552e5,1606e5,"q25.3","gneg"],[1606e5,1641e5,"q26","gpos50"],[1641e5,170805979,"q27","gneg"]],7:[[0,28e5,"p22.3","gneg"],[28e5,45e5,"p22.2","gpos25"],[45e5,72e5,"p22.1","gneg"],[72e5,137e5,"p21.3","gpos100"],[137e5,165e5,"p21.2","gneg"],[165e5,209e5,"p21.1","gpos100"],[209e5,255e5,"p15.3","gneg"],[255e5,279e5,"p15.2","gpos50"],[279e5,288e5,"p15.1","gneg"],[288e5,349e5,"p14.3","gpos75"],[349e5,371e5,"p14.2","gneg"],[371e5,433e5,"p14.1","gpos75"],[433e5,454e5,"p13","gneg"],[454e5,49e6,"p12.3","gpos75"],[49e6,505e5,"p12.2","gneg"],[505e5,539e5,"p12.1","gpos75"],[539e5,581e5,"p11.2","gneg"],[581e5,601e5,"p11.1","acen"],[601e5,621e5,"q11.1","acen"],[621e5,675e5,"q11.21","gneg"],[675e5,727e5,"q11.22","gpos50"],[727e5,779e5,"q11.23","gneg"],[779e5,867e5,"q21.11","gpos100"],[867e5,885e5,"q21.12","gneg"],[885e5,915e5,"q21.13","gpos75"],[915e5,933e5,"q21.2","gneg"],[933e5,984e5,"q21.3","gpos75"],[984e5,1042e5,"q22.1","gneg"],[1042e5,1049e5,"q22.2","gpos50"],[1049e5,1078e5,"q22.3","gneg"],[1078e5,115e6,"q31.1","gpos75"],[115e6,1177e5,"q31.2","gneg"],[1177e5,1214e5,"q31.31","gpos75"],[1214e5,1241e5,"q31.32","gneg"],[1241e5,1275e5,"q31.33","gpos75"],[1275e5,1296e5,"q32.1","gneg"],[1296e5,1308e5,"q32.2","gpos25"],[1308e5,1329e5,"q32.3","gneg"],[1329e5,1385e5,"q33","gpos50"],[1385e5,1434e5,"q34","gneg"],[1434e5,1482e5,"q35","gpos75"],[1482e5,1528e5,"q36.1","gneg"],[1528e5,1552e5,"q36.2","gpos25"],[1552e5,159345973,"q36.3","gneg"]],8:[[0,23e5,"p23.3","gneg"],[23e5,63e5,"p23.2","gpos75"],[63e5,128e5,"p23.1","gneg"],[128e5,192e5,"p22","gpos100"],[192e5,235e5,"p21.3","gneg"],[235e5,275e5,"p21.2","gpos50"],[275e5,29e6,"p21.1","gneg"],[29e6,367e5,"p12","gpos75"],[367e5,385e5,"p11.23","gneg"],[385e5,399e5,"p11.22","gpos25"],[399e5,432e5,"p11.21","gneg"],[432e5,452e5,"p11.1","acen"],[452e5,472e5,"q11.1","acen"],[472e5,513e5,"q11.21","gneg"],[513e5,517e5,"q11.22","gpos75"],[517e5,546e5,"q11.23","gneg"],[546e5,606e5,"q12.1","gpos50"],[606e5,613e5,"q12.2","gneg"],[613e5,651e5,"q12.3","gpos50"],[651e5,671e5,"q13.1","gneg"],[671e5,696e5,"q13.2","gpos50"],[696e5,72e6,"q13.3","gneg"],[72e6,746e5,"q21.11","gpos100"],[746e5,747e5,"q21.12","gneg"],[747e5,835e5,"q21.13","gpos75"],[835e5,859e5,"q21.2","gneg"],[859e5,923e5,"q21.3","gpos100"],[923e5,979e5,"q22.1","gneg"],[979e5,1005e5,"q22.2","gpos25"],[1005e5,1051e5,"q22.3","gneg"],[1051e5,1095e5,"q23.1","gpos75"],[1095e5,1111e5,"q23.2","gneg"],[1111e5,1167e5,"q23.3","gpos100"],[1167e5,1183e5,"q24.11","gneg"],[1183e5,1215e5,"q24.12","gpos50"],[1215e5,1263e5,"q24.13","gneg"],[1263e5,1304e5,"q24.21","gpos50"],[1304e5,1354e5,"q24.22","gneg"],[1354e5,1389e5,"q24.23","gpos75"],[1389e5,145138636,"q24.3","gneg"]],9:[[0,22e5,"p24.3","gneg"],[22e5,46e5,"p24.2","gpos25"],[46e5,9e6,"p24.1","gneg"],[9e6,142e5,"p23","gpos75"],[142e5,166e5,"p22.3","gneg"],[166e5,185e5,"p22.2","gpos25"],[185e5,199e5,"p22.1","gneg"],[199e5,256e5,"p21.3","gpos100"],[256e5,28e6,"p21.2","gneg"],[28e6,332e5,"p21.1","gpos100"],[332e5,363e5,"p13.3","gneg"],[363e5,379e5,"p13.2","gpos25"],[379e5,39e6,"p13.1","gneg"],[39e6,4e7,"p12","gpos50"],[4e7,422e5,"p11.2","gneg"],[422e5,43e6,"p11.1","acen"],[43e6,455e5,"q11","acen"],[455e5,615e5,"q12","gvar"],[615e5,65e6,"q13","gneg"],[65e6,693e5,"q21.11","gpos25"],[693e5,713e5,"q21.12","gneg"],[713e5,766e5,"q21.13","gpos50"],[766e5,785e5,"q21.2","gneg"],[785e5,815e5,"q21.31","gpos50"],[815e5,843e5,"q21.32","gneg"],[843e5,878e5,"q21.33","gpos50"],[878e5,892e5,"q22.1","gneg"],[892e5,912e5,"q22.2","gpos25"],[912e5,939e5,"q22.31","gneg"],[939e5,965e5,"q22.32","gpos25"],[965e5,998e5,"q22.33","gneg"],[998e5,1054e5,"q31.1","gpos100"],[1054e5,1085e5,"q31.2","gneg"],[1085e5,1121e5,"q31.3","gpos25"],[1121e5,1149e5,"q32","gneg"],[1149e5,1198e5,"q33.1","gpos75"],[1198e5,1231e5,"q33.2","gneg"],[1231e5,1275e5,"q33.3","gpos25"],[1275e5,1306e5,"q34.11","gneg"],[1306e5,1311e5,"q34.12","gpos25"],[1311e5,1331e5,"q34.13","gneg"],[1331e5,1345e5,"q34.2","gpos25"],[1345e5,138394717,"q34.3","gneg"]],10:[[0,3e6,"p15.3","gneg"],[3e6,38e5,"p15.2","gpos25"],[38e5,66e5,"p15.1","gneg"],[66e5,122e5,"p14","gpos75"],[122e5,173e5,"p13","gneg"],[173e5,183e5,"p12.33","gpos75"],[183e5,184e5,"p12.32","gneg"],[184e5,223e5,"p12.31","gpos75"],[223e5,243e5,"p12.2","gneg"],[243e5,293e5,"p12.1","gpos50"],[293e5,311e5,"p11.23","gneg"],[311e5,342e5,"p11.22","gpos25"],[342e5,38e6,"p11.21","gneg"],[38e6,398e5,"p11.1","acen"],[398e5,416e5,"q11.1","acen"],[416e5,455e5,"q11.21","gneg"],[455e5,486e5,"q11.22","gpos25"],[486e5,511e5,"q11.23","gneg"],[511e5,594e5,"q21.1","gpos100"],[594e5,628e5,"q21.2","gneg"],[628e5,688e5,"q21.3","gpos100"],[688e5,731e5,"q22.1","gneg"],[731e5,759e5,"q22.2","gpos50"],[759e5,803e5,"q22.3","gneg"],[803e5,861e5,"q23.1","gpos100"],[861e5,877e5,"q23.2","gneg"],[877e5,911e5,"q23.31","gpos75"],[911e5,923e5,"q23.32","gneg"],[923e5,953e5,"q23.33","gpos50"],[953e5,975e5,"q24.1","gneg"],[975e5,1001e5,"q24.2","gpos50"],[1001e5,1012e5,"q24.31","gneg"],[1012e5,1031e5,"q24.32","gpos25"],[1031e5,104e6,"q24.33","gneg"],[104e6,1101e5,"q25.1","gpos100"],[1101e5,1131e5,"q25.2","gneg"],[1131e5,1173e5,"q25.3","gpos75"],[1173e5,1199e5,"q26.11","gneg"],[1199e5,1214e5,"q26.12","gpos50"],[1214e5,1257e5,"q26.13","gneg"],[1257e5,1288e5,"q26.2","gpos50"],[1288e5,133797422,"q26.3","gneg"]],11:[[0,28e5,"p15.5","gneg"],[28e5,117e5,"p15.4","gpos50"],[117e5,138e5,"p15.3","gneg"],[138e5,169e5,"p15.2","gpos50"],[169e5,22e6,"p15.1","gneg"],[22e6,262e5,"p14.3","gpos100"],[262e5,272e5,"p14.2","gneg"],[272e5,31e6,"p14.1","gpos75"],[31e6,364e5,"p13","gneg"],[364e5,434e5,"p12","gpos100"],[434e5,488e5,"p11.2","gneg"],[488e5,51e6,"p11.12","gpos75"],[51e6,534e5,"p11.11","acen"],[534e5,558e5,"q11","acen"],[558e5,601e5,"q12.1","gpos75"],[601e5,619e5,"q12.2","gneg"],[619e5,636e5,"q12.3","gpos25"],[636e5,661e5,"q13.1","gneg"],[661e5,687e5,"q13.2","gpos25"],[687e5,705e5,"q13.3","gneg"],[705e5,755e5,"q13.4","gpos50"],[755e5,774e5,"q13.5","gneg"],[774e5,859e5,"q14.1","gpos100"],[859e5,886e5,"q14.2","gneg"],[886e5,93e6,"q14.3","gpos100"],[93e6,974e5,"q21","gneg"],[974e5,1023e5,"q22.1","gpos100"],[1023e5,103e6,"q22.2","gneg"],[103e6,1106e5,"q22.3","gpos100"],[1106e5,1127e5,"q23.1","gneg"],[1127e5,1146e5,"q23.2","gpos50"],[1146e5,1213e5,"q23.3","gneg"],[1213e5,124e6,"q24.1","gpos50"],[124e6,1279e5,"q24.2","gneg"],[1279e5,1309e5,"q24.3","gpos50"],[1309e5,135086622,"q25","gneg"]],12:[[0,32e5,"p13.33","gneg"],[32e5,53e5,"p13.32","gpos25"],[53e5,1e7,"p13.31","gneg"],[1e7,126e5,"p13.2","gpos75"],[126e5,146e5,"p13.1","gneg"],[146e5,198e5,"p12.3","gpos100"],[198e5,211e5,"p12.2","gneg"],[211e5,263e5,"p12.1","gpos100"],[263e5,276e5,"p11.23","gneg"],[276e5,305e5,"p11.22","gpos50"],[305e5,332e5,"p11.21","gneg"],[332e5,355e5,"p11.1","acen"],[355e5,378e5,"q11","acen"],[378e5,46e6,"q12","gpos100"],[46e6,487e5,"q13.11","gneg"],[487e5,511e5,"q13.12","gpos25"],[511e5,545e5,"q13.13","gneg"],[545e5,562e5,"q13.2","gpos25"],[562e5,577e5,"q13.3","gneg"],[577e5,627e5,"q14.1","gpos75"],[627e5,647e5,"q14.2","gneg"],[647e5,673e5,"q14.3","gpos50"],[673e5,711e5,"q15","gneg"],[711e5,753e5,"q21.1","gpos75"],[753e5,799e5,"q21.2","gneg"],[799e5,863e5,"q21.31","gpos100"],[863e5,886e5,"q21.32","gneg"],[886e5,922e5,"q21.33","gpos100"],[922e5,958e5,"q22","gneg"],[958e5,1012e5,"q23.1","gpos75"],[1012e5,1035e5,"q23.2","gneg"],[1035e5,1086e5,"q23.3","gpos50"],[1086e5,1113e5,"q24.11","gneg"],[1113e5,1119e5,"q24.12","gpos25"],[1119e5,1139e5,"q24.13","gneg"],[1139e5,1164e5,"q24.21","gpos50"],[1164e5,1177e5,"q24.22","gneg"],[1177e5,1203e5,"q24.23","gpos50"],[1203e5,1254e5,"q24.31","gneg"],[1254e5,1287e5,"q24.32","gpos50"],[1287e5,133275309,"q24.33","gneg"]],13:[[0,46e5,"p13","gvar"],[46e5,101e5,"p12","stalk"],[101e5,165e5,"p11.2","gvar"],[165e5,177e5,"p11.1","acen"],[177e5,189e5,"q11","acen"],[189e5,226e5,"q12.11","gneg"],[226e5,249e5,"q12.12","gpos25"],[249e5,272e5,"q12.13","gneg"],[272e5,283e5,"q12.2","gpos25"],[283e5,316e5,"q12.3","gneg"],[316e5,334e5,"q13.1","gpos50"],[334e5,349e5,"q13.2","gneg"],[349e5,395e5,"q13.3","gpos75"],[395e5,446e5,"q14.11","gneg"],[446e5,452e5,"q14.12","gpos25"],[452e5,467e5,"q14.13","gneg"],[467e5,503e5,"q14.2","gpos50"],[503e5,547e5,"q14.3","gneg"],[547e5,59e6,"q21.1","gpos100"],[59e6,618e5,"q21.2","gneg"],[618e5,652e5,"q21.31","gpos75"],[652e5,681e5,"q21.32","gneg"],[681e5,728e5,"q21.33","gpos100"],[728e5,749e5,"q22.1","gneg"],[749e5,767e5,"q22.2","gpos50"],[767e5,785e5,"q22.3","gneg"],[785e5,871e5,"q31.1","gpos100"],[871e5,894e5,"q31.2","gneg"],[894e5,944e5,"q31.3","gpos100"],[944e5,975e5,"q32.1","gneg"],[975e5,987e5,"q32.2","gpos25"],[987e5,1011e5,"q32.3","gneg"],[1011e5,1042e5,"q33.1","gpos100"],[1042e5,1064e5,"q33.2","gneg"],[1064e5,1096e5,"q33.3","gpos100"],[1096e5,114364328,"q34","gneg"]],14:[[0,36e5,"p13","gvar"],[36e5,8e6,"p12","stalk"],[8e6,161e5,"p11.2","gvar"],[161e5,172e5,"p11.1","acen"],[172e5,182e5,"q11.1","acen"],[182e5,241e5,"q11.2","gneg"],[241e5,329e5,"q12","gpos100"],[329e5,348e5,"q13.1","gneg"],[348e5,361e5,"q13.2","gpos50"],[361e5,374e5,"q13.3","gneg"],[374e5,43e6,"q21.1","gpos100"],[43e6,467e5,"q21.2","gneg"],[467e5,504e5,"q21.3","gpos100"],[504e5,536e5,"q22.1","gneg"],[536e5,55e6,"q22.2","gpos25"],[55e6,576e5,"q22.3","gneg"],[576e5,616e5,"q23.1","gpos75"],[616e5,643e5,"q23.2","gneg"],[643e5,674e5,"q23.3","gpos50"],[674e5,698e5,"q24.1","gneg"],[698e5,733e5,"q24.2","gpos50"],[733e5,788e5,"q24.3","gneg"],[788e5,831e5,"q31.1","gpos100"],[831e5,844e5,"q31.2","gneg"],[844e5,893e5,"q31.3","gpos100"],[893e5,914e5,"q32.11","gneg"],[914e5,942e5,"q32.12","gpos25"],[942e5,958e5,"q32.13","gneg"],[958e5,1009e5,"q32.2","gpos50"],[1009e5,1027e5,"q32.31","gneg"],[1027e5,1035e5,"q32.32","gpos50"],[1035e5,107043718,"q32.33","gneg"]],15:[[0,42e5,"p13","gvar"],[42e5,97e5,"p12","stalk"],[97e5,175e5,"p11.2","gvar"],[175e5,19e6,"p11.1","acen"],[19e6,205e5,"q11.1","acen"],[205e5,255e5,"q11.2","gneg"],[255e5,278e5,"q12","gpos50"],[278e5,3e7,"q13.1","gneg"],[3e7,309e5,"q13.2","gpos50"],[309e5,334e5,"q13.3","gneg"],[334e5,398e5,"q14","gpos75"],[398e5,425e5,"q15.1","gneg"],[425e5,433e5,"q15.2","gpos25"],[433e5,445e5,"q15.3","gneg"],[445e5,492e5,"q21.1","gpos75"],[492e5,526e5,"q21.2","gneg"],[526e5,588e5,"q21.3","gpos75"],[588e5,59e6,"q22.1","gneg"],[59e6,634e5,"q22.2","gpos25"],[634e5,669e5,"q22.31","gneg"],[669e5,67e6,"q22.32","gpos25"],[67e6,672e5,"q22.33","gneg"],[672e5,724e5,"q23","gpos25"],[724e5,749e5,"q24.1","gneg"],[749e5,763e5,"q24.2","gpos25"],[763e5,78e6,"q24.3","gneg"],[78e6,814e5,"q25.1","gpos50"],[814e5,847e5,"q25.2","gneg"],[847e5,885e5,"q25.3","gpos50"],[885e5,938e5,"q26.1","gneg"],[938e5,98e6,"q26.2","gpos50"],[98e6,101991189,"q26.3","gneg"]],16:[[0,78e5,"p13.3","gneg"],[78e5,104e5,"p13.2","gpos50"],[104e5,125e5,"p13.13","gneg"],[125e5,147e5,"p13.12","gpos50"],[147e5,167e5,"p13.11","gneg"],[167e5,212e5,"p12.3","gpos50"],[212e5,242e5,"p12.2","gneg"],[242e5,285e5,"p12.1","gpos50"],[285e5,353e5,"p11.2","gneg"],[353e5,368e5,"p11.1","acen"],[368e5,384e5,"q11.1","acen"],[384e5,47e6,"q11.2","gvar"],[47e6,526e5,"q12.1","gneg"],[526e5,56e6,"q12.2","gpos50"],[56e6,573e5,"q13","gneg"],[573e5,666e5,"q21","gpos100"],[666e5,708e5,"q22.1","gneg"],[708e5,728e5,"q22.2","gpos50"],[728e5,741e5,"q22.3","gneg"],[741e5,792e5,"q23.1","gpos75"],[792e5,816e5,"q23.2","gneg"],[816e5,841e5,"q23.3","gpos50"],[841e5,87e6,"q24.1","gneg"],[87e6,887e5,"q24.2","gpos25"],[887e5,90338345,"q24.3","gneg"]],17:[[0,34e5,"p13.3","gneg"],[34e5,65e5,"p13.2","gpos50"],[65e5,108e5,"p13.1","gneg"],[108e5,161e5,"p12","gpos75"],[161e5,227e5,"p11.2","gneg"],[227e5,251e5,"p11.1","acen"],[251e5,274e5,"q11.1","acen"],[274e5,335e5,"q11.2","gneg"],[335e5,398e5,"q12","gpos50"],[398e5,402e5,"q21.1","gneg"],[402e5,428e5,"q21.2","gpos25"],[428e5,468e5,"q21.31","gneg"],[468e5,493e5,"q21.32","gpos25"],[493e5,521e5,"q21.33","gneg"],[521e5,595e5,"q22","gpos75"],[595e5,602e5,"q23.1","gneg"],[602e5,631e5,"q23.2","gpos75"],[631e5,646e5,"q23.3","gneg"],[646e5,662e5,"q24.1","gpos50"],[662e5,691e5,"q24.2","gneg"],[691e5,729e5,"q24.3","gpos75"],[729e5,768e5,"q25.1","gneg"],[768e5,772e5,"q25.2","gpos25"],[772e5,83257441,"q25.3","gneg"]],18:[[0,29e5,"p11.32","gneg"],[29e5,72e5,"p11.31","gpos50"],[72e5,85e5,"p11.23","gneg"],[85e5,109e5,"p11.22","gpos25"],[109e5,154e5,"p11.21","gneg"],[154e5,185e5,"p11.1","acen"],[185e5,215e5,"q11.1","acen"],[215e5,275e5,"q11.2","gneg"],[275e5,351e5,"q12.1","gpos100"],[351e5,395e5,"q12.2","gneg"],[395e5,459e5,"q12.3","gpos75"],[459e5,507e5,"q21.1","gneg"],[507e5,562e5,"q21.2","gpos75"],[562e5,586e5,"q21.31","gneg"],[586e5,613e5,"q21.32","gpos50"],[613e5,639e5,"q21.33","gneg"],[639e5,691e5,"q22.1","gpos100"],[691e5,71e6,"q22.2","gneg"],[71e6,754e5,"q22.3","gpos25"],[754e5,80373285,"q23","gneg"]],19:[[0,69e5,"p13.3","gneg"],[69e5,126e5,"p13.2","gpos25"],[126e5,138e5,"p13.13","gneg"],[138e5,161e5,"p13.12","gpos25"],[161e5,199e5,"p13.11","gneg"],[199e5,242e5,"p12","gvar"],[242e5,262e5,"p11","acen"],[262e5,281e5,"q11","acen"],[281e5,319e5,"q12","gvar"],[319e5,351e5,"q13.11","gneg"],[351e5,378e5,"q13.12","gpos25"],[378e5,382e5,"q13.13","gneg"],[382e5,429e5,"q13.2","gpos25"],[429e5,447e5,"q13.31","gneg"],[447e5,475e5,"q13.32","gpos25"],[475e5,509e5,"q13.33","gneg"],[509e5,531e5,"q13.41","gpos25"],[531e5,558e5,"q13.42","gneg"],[558e5,58617616,"q13.43","gpos25"]],20:[[0,51e5,"p13","gneg"],[51e5,92e5,"p12.3","gpos75"],[92e5,12e6,"p12.2","gneg"],[12e6,179e5,"p12.1","gpos75"],[179e5,213e5,"p11.23","gneg"],[213e5,223e5,"p11.22","gpos25"],[223e5,257e5,"p11.21","gneg"],[257e5,281e5,"p11.1","acen"],[281e5,304e5,"q11.1","acen"],[304e5,335e5,"q11.21","gneg"],[335e5,358e5,"q11.22","gpos25"],[358e5,39e6,"q11.23","gneg"],[39e6,431e5,"q12","gpos75"],[431e5,435e5,"q13.11","gneg"],[435e5,478e5,"q13.12","gpos25"],[478e5,512e5,"q13.13","gneg"],[512e5,564e5,"q13.2","gpos75"],[564e5,578e5,"q13.31","gneg"],[578e5,597e5,"q13.32","gpos50"],[597e5,64444167,"q13.33","gneg"]],21:[[0,31e5,"p13","gvar"],[31e5,7e6,"p12","stalk"],[7e6,109e5,"p11.2","gvar"],[109e5,12e6,"p11.1","acen"],[12e6,13e6,"q11.1","acen"],[13e6,15e6,"q11.2","gneg"],[15e6,226e5,"q21.1","gpos100"],[226e5,255e5,"q21.2","gneg"],[255e5,302e5,"q21.3","gpos75"],[302e5,344e5,"q22.11","gneg"],[344e5,364e5,"q22.12","gpos50"],[364e5,383e5,"q22.13","gneg"],[383e5,412e5,"q22.2","gpos50"],[412e5,46709983,"q22.3","gneg"]],22:[[0,43e5,"p13","gvar"],[43e5,94e5,"p12","stalk"],[94e5,137e5,"p11.2","gvar"],[137e5,15e6,"p11.1","acen"],[15e6,174e5,"q11.1","acen"],[174e5,217e5,"q11.21","gneg"],[217e5,231e5,"q11.22","gpos25"],[231e5,255e5,"q11.23","gneg"],[255e5,292e5,"q12.1","gpos50"],[292e5,318e5,"q12.2","gneg"],[318e5,372e5,"q12.3","gpos50"],[372e5,406e5,"q13.1","gneg"],[406e5,438e5,"q13.2","gpos50"],[438e5,481e5,"q13.31","gneg"],[481e5,491e5,"q13.32","gpos50"],[491e5,50818468,"q13.33","gneg"]],X:[[0,44e5,"p22.33","gneg"],[44e5,61e5,"p22.32","gpos50"],[61e5,96e5,"p22.31","gneg"],[96e5,174e5,"p22.2","gpos50"],[174e5,192e5,"p22.13","gneg"],[192e5,219e5,"p22.12","gpos50"],[219e5,249e5,"p22.11","gneg"],[249e5,293e5,"p21.3","gpos100"],[293e5,315e5,"p21.2","gneg"],[315e5,378e5,"p21.1","gpos100"],[378e5,425e5,"p11.4","gneg"],[425e5,476e5,"p11.3","gpos75"],[476e5,501e5,"p11.23","gneg"],[501e5,548e5,"p11.22","gpos25"],[548e5,581e5,"p11.21","gneg"],[581e5,61e6,"p11.1","acen"],[61e6,638e5,"q11.1","acen"],[638e5,654e5,"q11.2","gneg"],[654e5,685e5,"q12","gpos50"],[685e5,73e6,"q13.1","gneg"],[73e6,747e5,"q13.2","gpos50"],[747e5,768e5,"q13.3","gneg"],[768e5,854e5,"q21.1","gpos100"],[854e5,87e6,"q21.2","gneg"],[87e6,927e5,"q21.31","gpos100"],[927e5,943e5,"q21.32","gneg"],[943e5,991e5,"q21.33","gpos75"],[991e5,1033e5,"q22.1","gneg"],[1033e5,1045e5,"q22.2","gpos50"],[1045e5,1094e5,"q22.3","gneg"],[1094e5,1174e5,"q23","gpos75"],[1174e5,1218e5,"q24","gneg"],[1218e5,1295e5,"q25","gpos100"],[1295e5,1313e5,"q26.1","gneg"],[1313e5,1345e5,"q26.2","gpos25"],[1345e5,1389e5,"q26.3","gneg"],[1389e5,1412e5,"q27.1","gpos75"],[1412e5,143e6,"q27.2","gneg"],[143e6,148e6,"q27.3","gpos100"],[148e6,156040895,"q28","gneg"]],Y:[[0,3e5,"p11.32","gneg"],[3e5,6e5,"p11.31","gpos50"],[6e5,103e5,"p11.2","gneg"],[103e5,104e5,"p11.1","acen"],[104e5,106e5,"q11.1","acen"],[106e5,124e5,"q11.21","gneg"],[124e5,171e5,"q11.221","gpos50"],[171e5,196e5,"q11.222","gneg"],[196e5,238e5,"q11.223","gpos50"],[238e5,266e5,"q11.23","gneg"],[266e5,57227415,"q12","gvar"]]}}},CanvasXpress.graphTypes={Area:["Area"],AreaLine:["AreaLine"],Bar:["Bar"],BarLine:["BarLine"],Boxplot:["Boxplot"],Fish:["Fish"],Gantt:["Gantt"],Circular:["Circular"],Correlation:["Correlation"],DotLine:["DotLine"],Dotplot:["Dotplot"],Genome:["Genome"],Heatmap:["Heatmap"],Line:["Line"],Map:["Map"],Meter:["Meter"],Network:["Network"],ParallelCoordinates:["ParallelCoordinates"],Pie:["Pie"],Sankey:["Sankey"],Scatter2D:["Scatter2D"],ScatterBubble2D:["ScatterBubble2D"],Scatter3D:["Scatter3D"],Stacked:["Stacked"],StackedLine:["StackedLine"],StackedPercent:["StackedPercent"],StackedPercentLine:["StackedPercentLine"],TagCloud:["TagCloud"],Tree:["Tree"],Treemap:["Treemap"],Venn:["Venn"],DotGraphs:["Boxplot","DotLine","Dotplot"],LineGraphs:["AreaLine","BarLine","DotLine","Line","ParallelCoordinates","StackedLine","StackedPercentLine"],CombinationLineGraphs:["AreaLine","BarLine","DotLine","StackedLine","StackedPercentLine"],ScatterGraphs:["Scatter2D","ScatterBubble2D","Scatter3D"],StackedGraphs:["Stacked","StackedLine","StackedPercent","StackedPercentLine"],OneDPlots:["Area","AreaLine","Bar","BarLine","Boxplot","Gantt","Meter","DotLine","Dotplot","Heatmap","Line","ParallelCoordinates","Sankey","Stacked","StackedLine","StackedPercent","StackedPercentLine","TagCloud","Tree","Treemap"],OneDGraphs:["Area","AreaLine","Bar","BarLine","Boxplot","Gantt","Meter","DotLine","Dotplot","Heatmap","Line","ParallelCoordinates","Stacked","StackedLine","StackedPercent","StackedPercentLine"],OneTwoThreeeDGraphs:["Area","AreaLine","Bar","BarLine","Boxplot","Fish","Gantt","Meter","Circular","DotLine","Dotplot","Heatmap","Line","ParallelCoordinates","Pie","Scatter2D","ScatterBubble2D","Scatter3D","Stacked","StackedLine","StackedPercent","StackedPercentLine","Treemap"],AllGraphs:["Area","AreaLine","Bar","BarLine","Boxplot","Gantt","Fish","Meter","Circular","Correlation","DotLine","Dotplot","Genome","Heatmap","Line","Map","Network","ParallelCoordinates","Pie","Sankey","Scatter2D","ScatterBubble2D","Scatter3D","Stacked","StackedLine","StackedPercent","StackedPercentLine","TagCloud","Tree","Treemap","Venn"],AGraphs:["Area","AreaLine","Bar","BarLine","Boxplot","Gantt","Fish","Meter","Circular","Correlation","DotLine","Dotplot","Heatmap","Line","Map","ParallelCoordinates","Sankey","Scatter2D","ScatterBubble2D","Scatter3D","Stacked","StackedLine","StackedPercent","StackedPercentLine","TagCloud","Tree","Treemap"],AttGraphs:["Bar","BarLine","Boxplot","Dotplot","Treemap","Heatmap","Stacked","StackedLine","StackedPercent","StackedPercentLine","ParallelCoordinates","Line","Sankey","Tree","TagCloud","Gantt"],NoneDGraphs:["Fish","Genome","Map","Network","Sankey","TagCloud","Tree","Treemap","Venn"],NonSegregatable:["Fish","Genome","Map","Network","Sankey","TagCloud","Tree","Treemap","Venn","Circular","Gantt"]},CanvasXpress.colorNames={aliceblue:"f0f8ff",antiquewhite1:"ffefdb",antiquewhite2:"eedfcc",antiquewhite3:"cdc0b0",antiquewhite4:"8b8378",antiquewhite:"faebd7",aqua:"00ffff",aquamarine1:"7fffd4",aquamarine2:"76eec6",aquamarine4:"458b74",aquamarine:"7fffd4",azure1:"f0ffff",azure2:"e0eeee",azure3:"c1cdcd",azure4:"838b8b",azure:"f0ffff",beige:"f5f5dc",bisque1:"ffe4c4",bisque2:"eed5b7",bisque3:"cdb79e",bisque4:"8b7d6b",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blue1:"0000ff",blue2:"0000ee",blue3:"1874cd",blue4:"00008b",blueviolet:"8a2be2",brown1:"ff4040",brown2:"ee3b3b",brown3:"cd3333",brown4:"8b2323",brown:"a52a2a",burlywood1:"ffd39b",burlywood2:"eec591",burlywood3:"cdaa7d",burlywood4:"8b7355",burlywood:"deb887",cadetblue1:"98f5ff",cadetblue2:"8ee5ee",cadetblue3:"7ac5cd",cadetblue4:"53868b",cadetblue:"5f9ea0",chartreuse1:"7fff00",chartreuse2:"76ee00",chartreuse3:"66cd00",chartreuse4:"458b00",chartreuse:"7fff00",chocolate1:"ff7f24",chocolate2:"ee7621",chocolate3:"cd661d",chocolate:"d2691e",coral1:"ff7256",coral2:"ee6a50",coral3:"cd5b45",coral4:"8b3e2f",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk1:"fff8dc",cornsilk2:"eee8cd",cornsilk3:"cdc8b1",cornsilk4:"8b8878",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",cyan1:"00ffff",cyan2:"00eeee",cyan3:"00cdcd",cyan4:"008b8b",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod1:"ffb90f",darkgoldenrod2:"eead0e",darkgoldenrod3:"cd950c",darkgoldenrod4:"8b6508",darkgoldenrod4:"8b6508",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen1:"caff70",darkolivegreen2:"bcee68",darkolivegreen3:"a2cd5a",darkolivegreen4:"6e8b3d",darkolivegreen:"556b2f",darkorange1:"ff7f00",darkorange2:"ee7600",darkorange3:"cd6600",darkorange4:"8b4500",darkorange:"ff8c00",darkorchid1:"bf3eff",darkorchid2:"b23aee",darkorchid3:"9a32cd",darkorchid4:"68228b",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen1:"c1ffc1",darkseagreen2:"b4eeb4",darkseagreen3:"9bcd9b",darkseagreen4:"698b69",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray1:"97ffff",darkslategray2:"8deeee",darkslategray:"2f4f4f",darkslategray3:"79cdcd",darkslategray4:"528b8b",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink1:"ff1493",deeppink2:"ee1289",deeppink3:"cd1076",deeppink4:"8b0a50",deeppink:"ff1493",deepskyblue:"00bfff",deepskyblue1:"00bfff",deepskyblue2:"00b2ee",deepskyblue3:"009acd",deepskyblue4:"00688b",dimgray:"696969",dimgrey:"696969",dodgerblue1:"1e90ff",dodgerblue:"1e90ff",dodgerblue2:"1c86ee",dodgerblue3:"1874cd",dodgerblue4:"104e8b",firebrick1:"ff3030",firebrick2:"ee2c2c",firebrick3:"cd2626",firebrick4:"8b1a1a",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold1:"ffd700",gold2:"eec900",gold3:"cdad00",gold4:"8b7500",goldenrod1:"ffc125",goldenrod2:"eeb422",goldenrod3:"cd9b1d",goldenrod4:"8b6914",goldenrod:"daa520",goldenrod:"daa520",gold:"ffd700",gray10:"1a1a1a",gray1:"030303",gray11:"1c1c1c",gray12:"1f1f1f",gray13:"212121",gray14:"242424",gray15:"262626",gray16:"292929",gray17:"2b2b2b",gray18:"2e2e2e",gray19:"303030",gray20:"333333",gray2:"050505",gray21:"363636",gray22:"383838",gray23:"3b3b3b",gray24:"3d3d3d",gray25:"404040",gray26:"424242",gray27:"454545",gray28:"474747",gray29:"4a4a4a",gray30:"4d4d4d",gray3:"080808",gray31:"4f4f4f",gray32:"525252",gray33:"545454",gray34:"575757",gray35:"595959",gray36:"5c5c5c",gray37:"5e5e5e",gray38:"616161",gray39:"636363",gray40:"666666",gray4:"0a0a0a",gray41:"696969",gray42:"6b6b6b",gray43:"6e6e6e",gray44:"707070",gray45:"737373",gray46:"757575",gray47:"787878",gray48:"7a7a7a",gray49:"7d7d7d",gray50:"7f7f7f",gray5:"0d0d0d",gray51:"828282",gray52:"858585",gray53:"878787",gray54:"8a8a8a",gray55:"8c8c8c",gray56:"8f8f8f",gray57:"919191",gray58:"949494",gray59:"969696",gray60:"999999",gray6:"0f0f0f",gray61:"9c9c9c",gray62:"9e9e9e",gray63:"a1a1a1",gray64:"a3a3a3",gray65:"a6a6a6",gray66:"a8a8a8",gray67:"ababab",gray68:"adadad",gray69:"b0b0b0",gray70:"b3b3b3",gray7:"121212",gray71:"b5b5b5",gray72:"b8b8b8",gray73:"bababa",gray74:"bdbdbd",gray75:"bfbfbf",gray76:"c2c2c2",gray77:"c4c4c4",gray78:"c7c7c7",gray79:"c9c9c9",gray:"808080",gray80:"cccccc",gray8:"141414",gray81:"cfcfcf",gray82:"d1d1d1",gray83:"d4d4d4",gray84:"d6d6d6",gray85:"d9d9d9",gray86:"dbdbdb",gray87:"dedede",gray88:"e0e0e0",gray89:"e3e3e3",gray90:"e5e5e5",gray9:"171717",gray91:"e8e8e8",gray92:"ebebeb",gray93:"ededed",gray94:"f0f0f0",gray95:"f2f2f2",gray97:"f7f7f7",gray98:"fafafa",gray99:"fcfcfc",gray:"bebebe",green:"008000",green1:"00ff00",green2:"00ee00",green3:"00cd00",green4:"008b00",greenyellow:"adff2f",grey:"808080",honeydew1:"f0fff0",honeydew2:"e0eee0",honeydew3:"c1cdc1",honeydew4:"838b83",honeydew:"f0fff0",hotpink1:"ff6eb4",hotpink2:"ee6aa7",hotpink3:"cd6090",hotpink4:"8b3a62",hotpink:"ff69b4",indianred1:"ff6a6a",indianred2:"ee6363",indianred3:"cd5555",indianred4:"8b3a3a",indianred:"cd5c5c",indigo:"4b0082",ivory1:"fffff0",ivory2:"eeeee0",ivory3:"cdcdc1",ivory4:"8b8b83",ivory:"fffff0",khaki1:"fff68f",khaki2:"eee685",khaki3:"cdc673",khaki4:"8b864e",khaki:"f0e68c",lavenderblush1:"fff0f5",lavenderblush2:"eee0e5",lavenderblush3:"cdc1c5",lavenderblush4:"8b8386",lavenderblush:"fff0f5",lavender:"e6e6fa",lawngreen:"7cfc00",lemonchiffon1:"fffacd",lemonchiffon2:"eee9bf",lemonchiffon3:"cdc9a5",lemonchiffon4:"8b8970",lemonchiffon:"fffacd",lightblue1:"bfefff",lightblue2:"b2dfee",lightblue3:"9ac0cd",lightblue4:"68838b",lightblue:"add8e6",lightcoral:"f08080",lightcyan1:"e0ffff",lightcyan2:"d1eeee",lightcyan3:"b4cdcd",lightcyan4:"7a8b8b",lightcyan:"e0ffff",light:"eedd82",lightgoldenrod1:"ffec8b",lightgoldenrod2:"eedc82",lightgoldenrod3:"cdbe70",lightgoldenrod4:"8b814c",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink1:"ffaeb9",lightpink2:"eea2ad",lightpink3:"cd8c95",lightpink4:"8b5f65",lightpink:"ffb6c1",lightsalmon1:"ffa07a",lightsalmon2:"ee9572",lightsalmon3:"cd8162",lightsalmon4:"8b5742",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue1:"b0e2ff",lightskyblue2:"a4d3ee",lightskyblue3:"8db6cd",lightskyblue4:"607b8b",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightslategrey:"778899",lightsteelblue1:"cae1ff",lightsteelblue2:"bcd2ee",lightsteelblue3:"a2b5cd",lightsteelblue4:"6e7b8b",lightsteelblue:"b0c4de",lightyellow1:"ffffe0",lightyellow2:"eeeed1",lightyellow3:"cdcdb4",lightyellow4:"8b8b7a",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta2:"ee00ee",magenta3:"cd00cd",magenta4:"8b008b",magenta:"ff00ff",maroon1:"ff34b3",maroon2:"ee30a7",maroon3:"cd2990",maroon4:"8b1c62",maroon:"800000",maroon:"b03060",medium:"66cdaa",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid1:"e066ff",mediumorchid2:"d15fee",mediumorchid3:"b452cd",mediumorchid4:"7a378b",mediumorchid:"ba55d3",mediumpurple1:"ab82ff",mediumpurple2:"9f79ee",mediumpurple3:"8968cd",mediumpurple4:"5d478b",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose1:"ffe4e1",mistyrose2:"eed5d2",mistyrose3:"cdb7b5",mistyrose4:"8b7d7b",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite1:"ffdead",navajowhite2:"eecfa1",navajowhite3:"cdb38b",navajowhite4:"8b795e",navajowhite:"ffdead",navy:"000080",navyblue:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab1:"c0ff3e",olivedrab2:"b3ee3a",olivedrab4:"698b22",olivedrab:"6b8e23",orange1:"ffa500",orange2:"ee9a00",orange3:"cd8500",orange4:"8b5a00",orange:"ffa500",orangered1:"ff4500",orangered2:"ee4000",orangered3:"cd3700",orangered4:"8b2500",orangered:"ff4500",orchid1:"ff83fa",orchid2:"ee7ae9",orchid3:"cd69c9",orchid4:"8b4789",orchid:"da70d6",pale:"db7093",palegoldenrod:"eee8aa",palegreen1:"9aff9a",palegreen2:"90ee90",palegreen3:"7ccd7c",palegreen4:"548b54",palegreen:"98fb98",paleturquoise1:"bbffff",paleturquoise2:"aeeeee",paleturquoise3:"96cdcd",paleturquoise4:"668b8b",paleturquoise:"afeeee",palevioletred1:"ff82ab",palevioletred2:"ee799f",palevioletred3:"cd6889",palevioletred4:"8b475d",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff1:"ffdab9",peachpuff2:"eecbad",peachpuff3:"cdaf95",peachpuff4:"8b7765",peachpuff:"ffdab9",peru:"cd853f",pink1:"ffb5c5",pink2:"eea9b8",pink3:"cd919e",pink4:"8b636c",pink:"ffc0cb",plum1:"ffbbff",plum2:"eeaeee",plum3:"cd96cd",plum4:"8b668b",plum:"dda0dd",powderblue:"b0e0e6",purple1:"9b30ff",purple2:"912cee",purple3:"7d26cd",purple4:"551a8b",purple:"800080",purple:"a020f0",rebeccapurple:"663399",red1:"ff0000",red2:"ee0000",red3:"cd0000",red4:"8b0000",red:"ff0000",rosybrown1:"ffc1c1",rosybrown2:"eeb4b4",rosybrown3:"cd9b9b",rosybrown4:"8b6969",rosybrown:"bc8f8f",royalblue1:"4876ff",royalblue2:"436eee",royalblue3:"3a5fcd",royalblue:"4169e1",royalblue4:"27408b",saddlebrown:"8b4513",salmon1:"ff8c69",salmon2:"ee8262",salmon3:"cd7054",salmon4:"8b4c39",salmon:"fa8072",sandybrown:"f4a460",seagreen1:"54ff9f",seagreen2:"4eee94",seagreen:"2e8b57",seagreen3:"43cd80",seagreen4:"2e8b57",seashell1:"fff5ee",seashell2:"eee5de",seashell3:"cdc5bf",seashell4:"8b8682",seashell:"fff5ee",sienna1:"ff8247",sienna2:"ee7942",sienna3:"cd6839",sienna4:"8b4726",sienna:"a0522d",silver:"c0c0c0",skyblue1:"87ceff",skyblue2:"7ec0ee",skyblue3:"6ca6cd",skyblue4:"4a708b",skyblue:"87ceeb",slateblue1:"836fff",slateblue2:"7a67ee",slateblue3:"6959cd",slateblue4:"473c8b",slateblue:"6a5acd",slategray1:"c6e2ff",slategray2:"b9d3ee",slategray3:"9fb6cd",slategray4:"6c7b8b",slategray:"708090",slategrey:"708090",snow1:"fffafa",snow2:"eee9e9",snow3:"cdc9c9",snow4:"8b8989",snow:"fffafa",springgreen:"00ff7f",springgreen1:"00ff7f",springgreen2:"00ee76",springgreen3:"00cd66",springgreen4:"008b45",steelblue1:"63b8ff",steelblue2:"5cacee",steelblue3:"4f94cd",steelblue4:"36648b",steelblue:"4682b4",tan1:"ffa54f",tan2:"ee9a49",tan3:"cd853f",tan4:"8b5a2b",tan:"d2b48c",teal:"008080",thistle1:"ffe1ff",thistle2:"eed2ee",thistle3:"cdb5cd",thistle4:"8b7b8b",thistle:"d8bfd8",tomato1:"ff6347",tomato2:"ee5c42",tomato3:"cd4f39",tomato4:"8b3626",tomato:"ff6347",turquoise1:"00f5ff",turquoise2:"00e5ee",turquoise3:"00c5cd",turquoise4:"00868b",turquoise:"40e0d0",violet:"ee82ee",violetred1:"ff3e96",violetred2:"ee3a8c",violetred3:"cd3278",violetred4:"8b2252",violetred:"d02090",wheat1:"ffe7ba",wheat2:"eed8ae",wheat3:"cdba96",wheat4:"8b7e66",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow1:"ffff00",yellow2:"eeee00",yellow3:"cdcd00",yellow4:"8b8b00",yellow:"ffff00",yellowgreen:"9acd32"},CanvasXpress.setColorSchemes=function(){for(var t in CanvasXpress.colorSchemes={YlGn:{3:"f7fcb9addd8e31a354",4:"ffffccc2e69978c679238443",5:"ffffccc2e69978c67931a354006837",6:"ffffccd9f0a3addd8e78c67931a354006837",7:"ffffccd9f0a3addd8e78c67941ab5d238443005a32",8:"ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32",9:"ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529"},YlGnBu:{3:"edf8b17fcdbb2c7fb8",4:"ffffcca1dab441b6c4225ea8",5:"ffffcca1dab441b6c42c7fb8253494",6:"ffffccc7e9b47fcdbb41b6c42c7fb8253494",7:"ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84",8:"ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84",9:"ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58"},GnBu:{3:"e0f3dba8ddb543a2ca",4:"f0f9e8bae4bc7bccc42b8cbe",5:"f0f9e8bae4bc7bccc443a2ca0868ac",6:"f0f9e8ccebc5a8ddb57bccc443a2ca0868ac",7:"f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e",8:"f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e",9:"f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081"},BuGn:{3:"e5f5f999d8c92ca25f",4:"edf8fbb2e2e266c2a4238b45",5:"edf8fbb2e2e266c2a42ca25f006d2c",6:"edf8fbccece699d8c966c2a42ca25f006d2c",7:"edf8fbccece699d8c966c2a441ae76238b45005824",8:"f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824",9:"f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b"},PuBuGn:{3:"ece2f0a6bddb1c9099",4:"f6eff7bdc9e167a9cf02818a",5:"f6eff7bdc9e167a9cf1c9099016c59",6:"f6eff7d0d1e6a6bddb67a9cf1c9099016c59",7:"f6eff7d0d1e6a6bddb67a9cf3690c002818a016450",8:"fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450",9:"fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636"},PuBu:{3:"ece7f2a6bddb2b8cbe",4:"f1eef6bdc9e174a9cf0570b0",5:"f1eef6bdc9e174a9cf2b8cbe045a8d",6:"f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d",7:"f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b",8:"fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b",9:"fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858"},BuPu:{3:"e0ecf49ebcda8856a7",4:"edf8fbb3cde38c96c688419d",5:"edf8fbb3cde38c96c68856a7810f7c",6:"edf8fbbfd3e69ebcda8c96c68856a7810f7c",7:"edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b",8:"f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b",9:"f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b"},RdPu:{3:"fde0ddfa9fb5c51b8a",4:"feebe2fbb4b9f768a1ae017e",5:"feebe2fbb4b9f768a1c51b8a7a0177",6:"feebe2fcc5c0fa9fb5f768a1c51b8a7a0177",7:"feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177",8:"fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177",9:"fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a"},PuRd:{3:"e7e1efc994c7dd1c77",4:"f1eef6d7b5d8df65b0ce1256",5:"f1eef6d7b5d8df65b0dd1c77980043",6:"f1eef6d4b9dac994c7df65b0dd1c77980043",7:"f1eef6d4b9dac994c7df65b0e7298ace125691003f",8:"f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f",9:"f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f"},OrRd:{3:"fee8c8fdbb84e34a33",4:"fef0d9fdcc8afc8d59d7301f",5:"fef0d9fdcc8afc8d59e34a33b30000",6:"fef0d9fdd49efdbb84fc8d59e34a33b30000",7:"fef0d9fdd49efdbb84fc8d59ef6548d7301f990000",8:"fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000",9:"fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000"},YlOrRd:{3:"ffeda0feb24cf03b20",4:"ffffb2fecc5cfd8d3ce31a1c",5:"ffffb2fecc5cfd8d3cf03b20bd0026",6:"ffffb2fed976feb24cfd8d3cf03b20bd0026",7:"ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026",8:"ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026",9:"ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026"},YlOrBr:{3:"fff7bcfec44fd95f0e",4:"ffffd4fed98efe9929cc4c02",5:"ffffd4fed98efe9929d95f0e993404",6:"ffffd4fee391fec44ffe9929d95f0e993404",7:"ffffd4fee391fec44ffe9929ec7014cc4c028c2d04",8:"ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04",9:"ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506"},Purples:{3:"efedf5bcbddc756bb1",4:"f2f0f7cbc9e29e9ac86a51a3",5:"f2f0f7cbc9e29e9ac8756bb154278f",6:"f2f0f7dadaebbcbddc9e9ac8756bb154278f",7:"f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486",8:"fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486",9:"fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d"},Blues:{3:"deebf79ecae13182bd",4:"eff3ffbdd7e76baed62171b5",5:"eff3ffbdd7e76baed63182bd08519c",6:"eff3ffc6dbef9ecae16baed63182bd08519c",7:"eff3ffc6dbef9ecae16baed64292c62171b5084594",8:"f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594",9:"f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b"},Greens:{3:"e5f5e0a1d99b31a354",4:"edf8e9bae4b374c476238b45",5:"edf8e9bae4b374c47631a354006d2c",6:"edf8e9c7e9c0a1d99b74c47631a354006d2c",7:"edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32",8:"f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32",9:"f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b"},Oranges:{3:"fee6cefdae6be6550d",4:"feeddefdbe85fd8d3cd94701",5:"feeddefdbe85fd8d3ce6550da63603",6:"feeddefdd0a2fdae6bfd8d3ce6550da63603",7:"feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04",8:"fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04",9:"fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704"},Reds:{3:"fee0d2fc9272de2d26",4:"fee5d9fcae91fb6a4acb181d",5:"fee5d9fcae91fb6a4ade2d26a50f15",6:"fee5d9fcbba1fc9272fb6a4ade2d26a50f15",7:"fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d",8:"fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d",9:"fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d"},Greys:{3:"f0f0f0bdbdbd636363",4:"f7f7f7cccccc969696525252",5:"f7f7f7cccccc969696636363252525",6:"f7f7f7d9d9d9bdbdbd969696636363252525",7:"f7f7f7d9d9d9bdbdbd969696737373525252252525",8:"fffffff0f0f0d9d9d9bdbdbd969696737373525252252525",9:"fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000",256:"fffffffffffffefefefefefefdfdfdfdfdfdfcfcfcfcfcfcfbfbfbfbfbfbfafafafafafaf9f9f9f9f9f9f9f9f9f8f8f8f8f8f8f7f7f7f7f7f7f6f6f6f6f6f6f5f5f5f5f5f5f4f4f4f4f4f4f3f3f3f3f3f3f2f2f2f2f2f2f1f1f1f1f1f1f0f0f0f0f0f0efefefefefefeeeeeeeeeeeeededededededececececececebebebebebebeaeaeaeaeaeae9e9e9e9e9e9e8e8e8e8e8e8e7e7e7e7e7e7e6e6e6e6e6e6e5e5e5e5e5e5e4e4e4e4e4e4e3e3e3e3e3e3e2e2e2e2e2e2e1e1e1e1e1e1e0e0e0e0e0e0dfdfdfdfdfdfdedededddddddddddddcdcdcdcdcdcdbdbdbdbdbdbdadadadadadad9d9d9d9d9d9d8d8d8d7d7d7d7d7d7d6d6d6d6d6d6d5d5d5d5d5d5d4d4d4d4d4d4d3d3d3d2d2d2d2d2d2d1d1d1d1d1d1d0d0d0cfcfcfcfcfcfcececececececdcdcdcdcdcdcccccccbcbcbcbcbcbcacacacacacac9c9c9c8c8c8c8c8c8c7c7c7c7c7c7c6c6c6c5c5c5c5c5c5c4c4c4c3c3c3c3c3c3c2c2c2c2c2c2c1c1c1c0c0c0c0c0c0bfbfbfbebebebebebebdbdbdbcbcbcbcbcbcbbbbbbbabababababab9b9b9b8b8b8b8b8b8b7b7b7b6b6b6b6b6b6b5b5b5b4b4b4b4b4b4b3b3b3b2b2b2b2b2b2b1b1b1b0b0b0afafafafafafaeaeaeadadadadadadacacacabababaaaaaaaaaaaaa9a9a9a8a8a8a7a7a7a7a7a7a6a6a6a5a5a5a4a4a4a4a4a4a3a3a3a2a2a2a1a1a1a0a0a0a0a0a09f9f9f9e9e9e9d9d9d9c9c9c9c9c9c9b9b9b9a9a9a9999999898989797979797979696969595959494949393939292929191919090909090908f8f8f8e8e8e8d8d8d8c8c8c8b8b8b8a8a8a8989898888888787878686868585858484848383838282828181818080807f7f7f7e7e7e7d7d7d7c7c7c7b7b7b7a7a7a7878787777777676767575757474747373737272727070706f6f6f6e6e6e6d6d6d6b6b6b6a6a6a6969696767676666666565656363636262626060605f5f5f5d5d5d5c5c5c5a5a5a5959595757575555555454545252525050504e4e4e4c4c4c4a4a4a4848484646464444444242424040403d3d3d3b3b3b3838383535353232322e2e2e2b2b2b2727272222221c1c1c15151500000"},PuOr:{3:"f1a340f7f7f7998ec3",4:"e66101fdb863b2abd25e3c99",5:"e66101fdb863f7f7f7b2abd25e3c99",6:"b35806f1a340fee0b6d8daeb998ec3542788",7:"b35806f1a340fee0b6f7f7f7d8daeb998ec3542788",8:"b35806e08214fdb863fee0b6d8daebb2abd28073ac542788",9:"b35806e08214fdb863fee0b6f7f7f7d8daebb2abd28073ac542788",10:"7f3b08b35806e08214fdb863fee0b6d8daebb2abd28073ac5427882d004b",11:"7f3b08b35806e08214fdb863fee0b6f7f7f7d8daebb2abd28073ac5427882d004b"},BrBG:{3:"d8b365f5f5f55ab4ac",4:"a6611adfc27d80cdc1018571",5:"a6611adfc27df5f5f580cdc1018571",6:"8c510ad8b365f6e8c3c7eae55ab4ac01665e",7:"8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e",8:"8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e",9:"8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e",10:"5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30",11:"5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30"},PRGn:{3:"af8dc3f7f7f77fbf7b",4:"7b3294c2a5cfa6dba0008837",5:"7b3294c2a5cff7f7f7a6dba0008837",6:"762a83af8dc3e7d4e8d9f0d37fbf7b1b7837",7:"762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837",8:"762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837",9:"762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837",10:"40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b",11:"40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b"},PiYG:{3:"e9a3c9f7f7f7a1d76a",4:"d01c8bf1b6dab8e1864dac26",5:"d01c8bf1b6daf7f7f7b8e1864dac26",6:"c51b7de9a3c9fde0efe6f5d0a1d76a4d9221",7:"c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221",8:"c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221",9:"c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221",10:"8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419",11:"8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419"},RdBu:{3:"ef8a62f7f7f767a9cf",4:"ca0020f4a58292c5de0571b0",5:"ca0020f4a582f7f7f792c5de0571b0",6:"b2182bef8a62fddbc7d1e5f067a9cf2166ac",7:"b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac",8:"b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac",9:"b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac",10:"67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061",11:"67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061"},RdGy:{3:"ef8a62ffffff999999",4:"ca0020f4a582bababa404040",5:"ca0020f4a582ffffffbababa404040",6:"b2182bef8a62fddbc7e0e0e09999994d4d4d",7:"b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d",8:"b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d",9:"b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d",10:"67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a",11:"67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a"},RdYlBu:{3:"fc8d59ffffbf91bfdb",4:"d7191cfdae61abd9e92c7bb6",5:"d7191cfdae61ffffbfabd9e92c7bb6",6:"d73027fc8d59fee090e0f3f891bfdb4575b4",7:"d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4",8:"d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4",9:"d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4",10:"a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695",11:"a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695"},Spectral:{3:"fc8d59ffffbf99d594",4:"d7191cfdae61abdda42b83ba",5:"d7191cfdae61ffffbfabdda42b83ba",6:"d53e4ffc8d59fee08be6f59899d5943288bd",7:"d53e4ffc8d59fee08bffffbfe6f59899d5943288bd",8:"d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd",9:"d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd",10:"9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2",11:"9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2"},RdYlGn:{3:"fc8d59ffffbf91cf60",4:"d7191cfdae61a6d96a1a9641",5:"d7191cfdae61ffffbfa6d96a1a9641",6:"d73027fc8d59fee08bd9ef8b91cf601a9850",7:"d73027fc8d59fee08bffffbfd9ef8b91cf601a9850",8:"d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850",9:"d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850",10:"a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837",11:"a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837"},Accent:{3:"7fc97fbeaed4fdc086",4:"7fc97fbeaed4fdc086ffff99",5:"7fc97fbeaed4fdc086ffff99386cb0",6:"7fc97fbeaed4fdc086ffff99386cb0f0027f",7:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17",8:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"},Dark2:{3:"1b9e77d95f027570b3",4:"1b9e77d95f027570b3e7298a",5:"1b9e77d95f027570b3e7298a66a61e",6:"1b9e77d95f027570b3e7298a66a61ee6ab02",7:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d",8:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"},Paired:{3:"a6cee31f78b4b2df8a",4:"a6cee31f78b4b2df8a33a02c",5:"a6cee31f78b4b2df8a33a02cfb9a99",6:"a6cee31f78b4b2df8a33a02cfb9a99e31a1c",7:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6f",8:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00",9:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d6",10:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9a",11:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99",12:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"},Pastel1:{3:"fbb4aeb3cde3ccebc5",4:"fbb4aeb3cde3ccebc5decbe4",5:"fbb4aeb3cde3ccebc5decbe4fed9a6",6:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcc",7:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bd",8:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaec",9:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"},Pastel2:{3:"b3e2cdfdcdaccbd5e8",4:"b3e2cdfdcdaccbd5e8f4cae4",5:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9",6:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2ae",7:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cc",8:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"},Set1:{3:"e41a1c377eb84daf4a",4:"e41a1c377eb84daf4a984ea3",5:"e41a1c377eb84daf4a984ea3ff7f00",6:"e41a1c377eb84daf4a984ea3ff7f00ffff33",7:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628",8:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf",9:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"},Set2:{3:"66c2a5fc8d628da0cb",4:"66c2a5fc8d628da0cbe78ac3",5:"66c2a5fc8d628da0cbe78ac3a6d854",6:"66c2a5fc8d628da0cbe78ac3a6d854ffd92f",7:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494",8:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"},Set3:{3:"8dd3c7ffffb3bebada",4:"8dd3c7ffffb3bebadafb8072",5:"8dd3c7ffffb3bebadafb807280b1d3",6:"8dd3c7ffffb3bebadafb807280b1d3fdb462",7:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69",8:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5",9:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9",10:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bd",11:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5",12:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"},Default:{20:"fe296c487eb6a7ce31f8cc03ff8c02699696b7784483acd0c2e076fadc5aff549fffaf549ab8b7d2a6833d699b87ac22cda908d02158d07300567676",36:"ff00000000ff00ff00ffff0000ffffff00ff993300000080808000ff6600008080660066ff99cc666699333300ffcc99ccffff9999ffff80803366ff339966ffcc0000ccffd020909933660066cc99cc00ff990033cccccc99ff800000333399008000ffffcc99ccff800080"},Basic:{24:"0000ffff004dffbf0074ff00a400ffff7400ffff0000ffffff0000ffd3003d00ff00ff00ff00ffff9200d3ff000090ff6d00ffff4900ffe80000ff92ff0090ffaa00aaff00004dff"},Light:{24:"6565ffff6593ffd865abff65c865ffffab65ffff6565ffffff6565ffe5658965ff65ff65ff65ffffbd65e5ff6565bcffa765ffff9165fff16565ffbdff65bcffcc65ccff656593ff"},Favorite:{1:"ff0000",2:"ff000000ffff",3:"ff000000ff000000ff",4:"ff000080ff0000ffff8000ff",5:"ff0000bfff0000ff800040ffff00ff",6:"ff0000ffff0000ff0000ffff0000ffff00ff",8:"ff0000ffbf0080ff0000ff4000ffff0040ff8000ffff00bf",10:"ff0000ff8000ffff0080ff0000ff0000ff8000ffff0080ff0000ff8000ff",12:"ff0000ff8000ffff0080ff0000ff0000ff8000ffff0080ff0000ff8000ffff00ffff0080",24:"ff0000ff4000ff8000ffbf00ffff00bfff0080ff0040ff0000ff0000ff4000ff8000ffbf00ffff00bfff0080ff0040ff0000ff4000ff8000ffbf00ffff00ffff00bfff0080ff0040"},Pastel:{24:"b5b5ffffb5cbffedb5d7ffb5e5b5ffffd7b5ffffb5b5ffffffb5b5fff2b5c7b5ffb5ffb5ffb5ffffdfb5f2ffb5b5dfffd5b5ffffcab5fff8b5b5ffdfffb5dfffe6b5e6ffb5b5cbff"},Balanced:{20:"fe296c487eb6a7ce31f8cc03ff8c02699696b7784483acd0c2e076fadc5aff549fffaf549ab8b7d2a6833d699b87ac22cda908d02158d07300567676"},Rpalette:{8:"000000ff000000cd000000ff00ffffff00ffffff00bebebe"},RlatticeBackground:{7:"ffe5ccccffccccffffcce6ffffccffffccccffffcc"},RlatticeShingle:{7:"ff7f0000ff0000ffff0080ffff00ffff0000ffff00"},RlatticeLine:{7:"0080ffff00ff006400ff0000ffa50000ff00a52a2a"},RlatticePolygon:{7:"ccffffffccffccffccffe5cccce6ffffffccffcccc"},Bootstrap:{1:"337ab7",2:"337ab7d9534f",3:"337ab75cb85cd9534f",4:"337ab75cb85cf0ad4ed9534f",5:"337ab75cb85c5bc0def0ad4ed9534f",6:"337ab75cb85c9370db5bc0def0ad4ed9534f",7:"337ab75cb85cd9534ff0ad4e5bc0de84fe83ff9976",8:"337ab75cb85cd9534ff0ad4e5bc0de84fe83ff9976c86727"},ColorSpectrum:{1:""},White:{1:"ffffff"},Black:{1:"000000"},NPG:{10:"e64b354dbbd500a0873c5488f39b7f8491b491d1c2dc00007e6148b09c85"},AAAS:{10:"3b4992ee0000008b45631879008280bb00215f559ba200568081801b1919"},NEJM:{8:"bc3c290072b5e1872720854e7876b16f99adffdc91ee4c97"},Lancet:{9:"00468bed000042b5400099b4925e9ffdaf91ad002aadb6b61b1919"},Jama:{7:"374e55df8f4400a1d5b2474579af976a659980796b"},JCO:{10:"0073c2efc000868686cd534c7aa6dc003c678f77003b3b3ba730304a6990"},Economist:{12:"6794a7014d6476c0c101a2d97ad2f600887dadadad7bd3f67c260bee8f7176c0c1a18376"},EconomistBG:{5:"d5e4ebc3d6dfed111aebebebc9c9c9"},Excel:{7:"ff00ffffff0000ffff8000808000000080800000ff"},Excel2:{7:"993366ffffccccffff660066ff80800066ccccccff"},Excel3:{10:"365e9698333477973d5d437c36869fd1702f8197c5c47f80acc4849887b0"},GGPlot:{1:"595959",2:"f8766d00bfc4",3:"f8766d00ba38619cff",4:"f8766d7cae0000bfc4c77cff",5:"f8766da3a50000bf7d00b0f6e76bf3",6:"f8766db79f0000ba3800bfc4619cfff564e3",7:"f8766dc49a0053b40000c09400b6eba58afffb61d7",8:"f8766dcd96007cae0000be6700bfc400a9ffc77cffff61cc",9:"f8766dd3920093aa0000ba3800c19f00b9e3619cffdb72fbff61c3",10:"f8766dd89000a3a50039b60000bf7d00bfc400b0f69590ffe76bf3ff62bc",11:"f8766ddb8e00aea20064b20000bd5c00c1a700bade00a6ffb385ffef67ebff63b6",12:"f8766dde8c00b79f007cae0000ba3800c08b00bfc400b4f0619cffc77cfff564e3ff64b0",13:"f8766de18a00be9c008cab0024b70000be7000c1ab00bbda00acfc8b93ffd575fef962ddff65ac",14:"f8766de38900c49a0099a80053b40000bc5600c09400bfc400b6eb06a4ffa58affdf70f8fb61d7ff66a8",15:"f8766de58700c99800a3a5006bb10000ba3800bf7d00c0af00bcd800b0f6619cffb983ffe76bf3fd61d1ff67a4",16:"f8766de68613cd9600aba3007cae000cb70200be6700c19a00bfc400b8e700a9ff8494ffc77cffed68edff61ccff68a1",17:"f8766de7851ed09400b2a10089ac0045b50000bc5100c08700c0b200bcd600b3f229a3ff9c8dffd277fff166e8ff61c7ff689e",18:"f8766de88526d39200b79f0093aa005eb30000ba3800bf7400c19f00bfc400b9e300adfa619cffae87ffdb72fbf564e3ff61c3ff699c"},Solarized:{1:"b58900",2:"b58900859900",3:"b58900c671c4859900",4:"b58900dc322f268bd2859900",5:"b58900dc322f6c71c4268bd2859900",6:"b58900cb4b16d336826c71c42aa198859900",7:"b58900cb4b16dc322f6c71c4268bd22aa198859900",8:"b58900cb4b16dc322fd336826c71c4268bd22aa198859900"},SolarizedBase:{7:"002b36073642586e7583949693a1a1eee8d5fdf6e3",8:"002b36073642586e75657b8383949693a1a1eee8d5fdf6e3"},PaulTol:{1:"4477aa",2:"4477aacc6677",3:"4477aaddcc77cc6677",4:"4477aa117733ddcc77cc6677",5:"4477aa88ccee117733ddcc77cc6677",6:"4477aa88ccee117733ddcc77cc6677aa4499",7:"33228888ccee44aa99117733ddcc77cc6677aa4499",8:"33228888ccee44aa99117733999933ddcc77cc6677aa4499",9:"33228888ccee44aa99117733999933ddcc77cc6677882255aa4499",10:"33228888ccee44aa99117733999933ddcc77661100cc6677882255aa4499",11:"3322886699cc88ccee44aa99117733999933ddcc77661100cc6677882255aa4499",12:"3322886699cc88ccee44aa99117733999933ddcc77661100cc6677aa4466882255aa4499"},ColorBlind:{8:"000000e69f0056b4e9009e73f0e4420072b2d55e00cc79a7"},Tableau:{20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"},TableauMedium:{10:"729eceff9e4a67bf5ced665dad8bc9a8786eed97caa2a2a2cdcc5d6dccda"},TableauLight:{10:"aec7e8ffbb7898df8aff9896c5b0d5c49c94f7b6d2c7c7c7dbdb8d9edae5"},TableauGrey:{5:"60636aa5acaf4144518f8782cfcfcf"},TableauColorBlind:{10:"006ba4ff800eababab5959595f9ed1c85200898989a2c8ecffbc79cfcfcf"},TableauTrafficLight:{9:"b10318dba13a309343d82526ffc15669b764f26c64ffdd719fcd99"},TableauPurpleGrey:{12:"7b66d2a699e8dc5fbdffc0da5f5a41b4b19b995688d898baab6ad5d098ee8b7c6edbd4c5"},TableauBlueRed:{12:"2c69b0b5c8e2f02720ffb6b0ac613ce9c39b6ba3d6b5dffdac8763ddc9b4bd0a36f4737a"},TableauGreenOrange:{12:"32a251acd98dff7f0fffb9773cb7cc98d9e4b85a0dffd94a39737c86b4a982853bccc94d"},TableauCyclic:{20:"1f83b41696ac18a18829a03c54a33882a93fadb828d8bd35ffbd4cffb022ff9c0eff810ee75727d23e4ec94d8cc04aa7b446b39658b18061b46f63bb"},TableauPairSequential:{32:"bccfb49c0824bccfb409622ab4d4da26456ef0c2947b3014c3c3c31e1e1ee5e5e5ffb2b6e5e5e5b7e6a7e5e5e5c4d8f3e5e5e5ffcc9ef5cac7bd1100dbe8b43c8200f3e0c2bb5137feffd941b7c4f7e4c6bb5137efedf5807dbaf0f0f0737373"},TableauTripleDiverging:{48:"9c0824cacaca26456e9c0824cacaca09622a9c0824ffffff09622a9c0824cacaca1e1e1e9c0824ffffff1e1e1e09622acacaca26456e7b3014cacaca26456e7b3014ffffff26456effb2b6e5e5e5b7e6a7ffb2b6ffffffb7e6a7ffb2b6ffffffc6c6c6ffcc9ee5e5e5c4d8f3ffcc9effffffc4d8f3e0ad30e4e4e27492aaeda389cde1d35c8b70529985dbcf47c26b51"},WallStreetJournal:{4:"efefefe9f3ead4dee7f8f2e4"},WallStreetJournal2:{4:"d3ba68d5695d5d8ca865a479"},WallStreetJournalRedGreen:{2:"088158ba2f2a"},WallStreetJournalBlackGreen:{4:"00000059595959a77f008856"},WallStreetJournalDemRep:{3:"006a8eb1283aa8a6a7"},WallStreetJournal3:{6:"c72e29016392be9c2e098154fb832d000000"},Stata:{15:"1a476f90353b55752fe37e006e8e84c10534938dd2cac27ea0522d7b92a82d6d669c8847bfa19cffd200d9e6eb"},Stata2:{15:"ffff0000ff000080ffff00ffff7f00ff0000add8e6ffe47400ff80c0dcc0ff45000000ffff00806e8e84a0522d"},Stata3:{15:"006000ff45001a476f90353b6e8e84a0522dff7f00ff00ff00ffffff000000ff009c8847800080c0dcc0add8e6"},StataMono:{15:"606060a0a0a0808080404040000000e0e0e0202020707070909090b0b0b0d0d0d0f0f0f0303030c0c0c0505050"},BlackAndWhite:{3:"f0f0f0bdbdbd636363",4:"f7f7f7cccccc969696525252",5:"f7f7f7cccccc969696636363252525",6:"f7f7f7d9d9d9bdbdbd969696636363252525",7:"f7f7f7d9d9d9bdbdbd969696737373525252252525",8:"fffffff0f0f0d9d9d9bdbdbd969696737373525252252525",9:"fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000"},BehancePair:{2:"6b5dd3cec8ff",4:"6b5dd3cec8ffffa2c0ffc6db",6:"6b5dd3cec8ffffa2c0ffc6db3f8cffa0d7e7",8:"6b5dd3cec8ffffa2c0ffc6db3f8cffa0d7e7fece73ffa25f",10:"6b5dd3cec8ffffa2c0ffc6db3f8cffa0d7e7fece73ffa25f1b1d218d8e90"},BehanceTrio:{3:"6b5dd3cec8ff9d93e9",6:"6b5dd3cec8ff9d93e9ffa2c0ffc6dbff78a4",9:"6b5dd3cec8ff9d93e9ffa2c0ffc6dbff78a43f8cffa0d7e71b49c5",12:"6b5dd3cec8ff9d93e9ffa2c0ffc6dbff78a43f8cffa0d7e71b49c5fece73ffa25ffee2ab",15:"6b5dd3cec8ff9d93e9ffa2c0ffc6dbff78a43f8cffa0d7e71b49c5fece73ffa25ffee2ab1b1d218d8e90494a4d"},BehanceQuartet:{4:"6b5dd3cec8ff9d93e98072dc",8:"6b5dd3cec8ff9d93e98072dcffa2c0ffc6dbff78a4ffbed3",12:"6b5dd3cec8ff9d93e98072dcffa2c0ffc6dbff78a4ffbed33f8cffa0d7e71b49c5cdf4ff",16:"6b5dd3cec8ff9d93e98072dcffa2c0ffc6dbff78a4ffbed33f8cffa0d7e71b49c5cdf4fffece73ffa25ffee2abfedd9d",20:"6b5dd3cec8ff9d93e98072dcffa2c0ffc6dbff78a4ffbed33f8cffa0d7e71b49c5cdf4fffece73ffa25ffee2abfedd9d1b1d218d8e90494a4dfafafa"},Behance:{1:"6b5dd3",2:"6b5dd3ffa2c0",3:"6b5dd3ffa2c03f8cff",4:"6b5dd3ffa2c03f8cfffece73",5:"6b5dd33f8cffffa2c0fece731b1d21",6:"6b5dd3ffa2c03f8cff9d93e9ffc6dba0d7e7",7:"6b5dd33f8cffffa2c0fece731b1d21ffa25fcdf4ff",8:"6b5dd3ffa2c03f8cfffece739d93e9a0d7e7ffc6dbfee2ab",9:"6b5dd33f8cffffa2c0fece731b1d219d93e9a0d7e7ffc6dbfee2ab",10:"6b5dd33f8cffffa2c0fece731b1d219d93e9a0d7e7ffc6dbfee2ab8d8e90",15:"6b5dd33f8cffffa2c0fece731b1d219d93e9a0d7e7ffc6dbfee2ab8d8e90cec8ff1b49c5ff78a4ffa25f494a4d",20:"6b5dd33f8cffffa2c0fece731b1d219d93e9a0d7e7ffc6dbfee2ab8d8e90cec8ff1b49c5ff78a4ffa25f494a4d8072dccdf4ffffbed3fedd9dfafafa"},Prism:{1:"1f7ff1",2:"1f7ff1814cff",3:"1f7ff1814cffff7d00",4:"1f7ff1814cffff7d0012c5ff",5:"1f7ff1814cffff7d0012c5fff4d4fe",6:"1f7ff1814cffff7d0012c5fff4d4fee9c505",7:"1f7ff1814cffff7d0012c5fff4d4fee9c505898790"},PrismPair:{2:"1f7ff112c5ff",4:"1f7ff112c5ff814cfff4d4fe",6:"1f7ff112c5ff814cfff4d4feff7d00e9c505",8:"1f7ff112c5ff814cfff4d4feff7d00e9c505042d710ccffe"},PrismTrio:{3:"61459939d4fbfe7d29"},CanvasXpress:{1:"4575b4",2:"d730274575b4",3:"d7191cfdae612c7bb6",4:"d7191cfdae61abd9e92c7bb6",5:"d7191cfdae61ffffbfabd9e92c7bb6",6:"d73027fc8d59fee090e0f3f891bfdb4575b4",7:"d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4",8:"d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4",9:"d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4",10:"a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695",11:"a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695"},CanvasXpressTraditional:{1:"f2000d",2:"f2000d000df2",3:"f2000d000df20df200",4:"f2000d000df20df200f2f20d",5:"f2000d000df20df200f2f20df20df2",6:"f2000d000df20df200f2f20df20df20df2f2",7:"f2000d000df20df200f2f20df20df20df2f2f2f2f2",8:"f2000d000df20df200f2f20df20df20df2f2f2f2f2fe8bd3",9:"f2000d000df20df200f2f20df20df20df2f2f2f2f2fe8bd38bd3fe",10:"f2000d000df20df200f2f20df20df20df2f2f2f2f2fe8bd38bd3fed3fe8b",11:"f2000d000df20df200f2f20df20df20df2f2f2f2f2fe8bd38bd3fed3fe8b5d0016",12:"f2000d000df20df200f2f20df20df20df2f2f2f2f2fe8bd38bd3fed3fe8b5d001600165d",13:"f2000d000df20df200f2f20df20df20df2f2f2f2f2fe8bd38bd3fed3fe8b5d001600165d165d00",14:"f2000d000df20df200f2f20df20df20df2f2f2f2f2fe8bd38bd3fed3fe8b5d001600165d165d00080808",15:"f2000d000df20df200f2f20df20df20df2f2f2f2f2fe8bd38bd3fed3fe8b5d001600165d165d00080808fed38b",16:"f2000d000df20df200f2f20df20df20df2f2f2f2f2fe8bd38bd3fed3fe8b5d001600165d165d00080808fed38bd38bfe",17:"f2000d000df20df200f2f20df20df20df2f2f2f2f2fe8bd38bd3fed3fe8b5d001600165d165d00080808fed38bd38bfe8bfed3",18:"f2000d000df20df200f2f20df20df20df2f2f2f2f2fe8bd38bd3fed3fe8b5d001600165d165d00080808fed38bd38bfe8bfed3404040"},Matlab:{7:"0072bdd95319edb1207e2f8e77ac304dbeeea2142f"},Parula:{10:"352a870f5cdd127dd8079ccf15b1b459bd8ca5be6be1b952fcce2ef9fb0e"},Viridis:{3:"44015421908cfde725",4:"44015431688e35b779fde725",5:"4401543b528b21908c5dc863fde725",6:"4401544144872a788e22a8847ad151fde725",7:"440154443a8331688e21908c35b7798fd744fde725",8:"44015446337e365c8d277f8e1fa1874ac16d9fda3afde725",9:"440154472d7b3b528b2c728e21908c27ad815dc863aadc32fde725",10:"4401544828783e4a8931688e26828e1f9e8935b7796dcd59b4de2cfde725",11:"44015448257641448735608d2a788e21908c22a88443bf717ad151bbdf27fde725",12:"440154482173433e8538598c2d708e25858e1e9b8a2bb07f51c56a85d54ac2df23fde725",256:"44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"},Magma:{3:"000004b63679fcfdbf",4:"000004721f81f1605dfcfdbf",5:"00000451127cb63679fb8861fcfdbf",6:"0000043b0f708c2981de4968fe9f6dfcfdbf",7:"0000042d1160721f81b63679f1605dfeaf77fcfdbf",8:"0000042311515f187f982d80d3436ef8765cfeba80fcfdbf",9:"0000041d114751127c822681b63679e65164fb8861fec287fcfdbf",10:"000004180f3e451077721f819f2f7fcd4071f1605dfd9567fec98dfcfdbf",11:"000004150e373b0f70641a808c2981b63679de4968f76f5cfe9f6dfece91fcfdbf",12:"000004120d323310685a167e7d2482a3307ec83e73e95562f97c5dfea873fed395fcfdbf",256:"00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf"},Plasma:{3:"0d0887cc4678f0f921",4:"0d08879c179eed7953f0f921",5:"0d08877e03a8cc4678f89441f0f921",6:"0d08876a00a8b12a90e16462fca636f0f921",7:"0d08875d01a69c179ecc4678ed7953fdb32ff0f921",8:"0d08875402a38b0aa5b93289db5c68f48849febc2af0f921",9:"0d08874c02a17e03a8a92395cc4678e56b5df89441fdc328f0f921",10:"0d088747039f7301a89c179ebd3786d8576bed7953fa9e3bfdc926f0f921",11:"0d088742049e6a00a8900da4b12a90cc4678e16462f1844bfca636fcce25f0f921",12:"0d08873e049c6300a78707a6a62098c03a83d5546ee76f5af58c46fdad32fcd225f0f921",256:"0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"},Inferno:{3:"000004bb3754fcffa4",4:"000004781c6ded6925fcffa4",5:"00000456106ebb3754f98c0afcffa4",6:"000004420a68932667dd513afca50afcffa4",7:"000004330a5f781c6dbb3754ed6925fcb519fcffa4",8:"000004280b5465156e9f2a63d44842f57d15fac127fcffa4",9:"000004210c4a56106e89226abb3754e35932f98c0af9c932fcffa4",10:"0000041b0c424b0c6b781c6da52c60cf4446ed6925fb9a06f7d03cfcffa4",11:"000004170c3a420a686b186e932667bb3754dd513af3771afca50af6d645fcffa4",12:"000004140b353a096360136e85216ba92e5ecb4149e65d2ff78311fcad12f5db4bfcffa4",256:"00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4"},Cividis:{3:"00204d7c7b78ffea46",4:"00204d575c6da69d75ffea46",5:"00204d414d6b7c7b78bcaf6fffea46",6:"00204d31446b666970958f78cbba69ffea46",7:"00204d233e6c575c6d7c7b78a69d75d3c164ffea46",8:"00204d16396d4b546c6c6e728e8a79b3a772dbc761ffea46",9:"00204d05366e414d6b61646f7c7b789b9477bcaf6fe0cb5effea46",10:"00204d00336f39486b575c6d7071738a8779a69d75c4b56ce4cf5bffea46",11:"00204d00326f31446b4e576c6669707c7b78958f78b0a473cbba69e7d159ffea46",12:"00204d00306f2a406c48526b5e626e7273748784799e9677b6a971d0be67ead357ffea46",256:"00204c00204e00215000225100235300235500245600255800265a00265b00275d00285f002861002963002a64002a66002b68002c6a002d6c002d6d002e6e002e6f002f6f002f6f00306f00316f00316f00326e00336e00346e00346e01356e06366e0a376d0e376d12386d15396d17396d1a3a6c1c3b6c1e3c6c203c6c223d6c243e6c263e6c273f6c29406b2b416b2c416b2e426b2f436b31446b32446b33456b35466b36466b37476b38486b3a496b3b496b3c4a6b3d4b6b3e4b6b404c6b414d6b424e6b434e6b444f6b45506b46506b47516b48526b49536b4a536b4b546b4c556b4d556b4e566b4f576c50586c51586c52596c535a6c545a6c555b6c565c6c575d6d585d6d595e6d5a5f6d5b5f6d5c606d5d616e5e626e5f626e5f636e60646e61656f62656f63666f64676f65676f666870676970686a70686a70696b716a6c716b6d716c6d726d6e726e6f726f6f726f70737071737172737272747373747474757575757575757676767777767878767978777a79777b7a777b7b787c7b787d7c787e7d787f7e78807e78817f788280788381788481788582788683788784788885788985788a86788b87788c88788d88788e89788f8a78908b78918c78928c78938d78948e78958f78968f779790779891779992779a93779b93779c94779d95779e96769f9776a09876a19876a29976a39a75a49b75a59c75a69c75a79d75a89e74a99f74aaa074aba174aca173ada273aea373afa473b0a572b1a672b2a672b4a771b5a871b6a971b7aa70b8ab70b9ab70baac6fbbad6fbcae6ebdaf6ebeb06ebfb16dc0b16dc1b26cc2b36cc3b46cc5b56bc6b66bc7b76ac8b86ac9b869cab969cbba68ccbb68cdbc67cebd67d0be66d1bf66d2c065d3c065d4c164d5c263d6c363d7c462d8c561d9c661dbc760dcc860ddc95fdeca5edfcb5de0cb5de1cc5ce3cd5be4ce5be5cf5ae6d059e7d158e8d257e9d356ebd456ecd555edd654eed753efd852f0d951f1da50f3db4ff4dc4ef5dd4df6de4cf7df4bf9e049fae048fbe147fce246fde345ffe443ffe542ffe642ffe743ffe844ffe945"},Rainbow:{3:"ff000000ff000000ff",4:"ff000080ff0000ffff8000ff",5:"ff0000ccff0000ff660066ffcc00ff",6:"ff0000ffff0000ff0000ffff0000ffff00ff",7:"ff0000ffdb0049ff0000ff920092ff4900ffff00db",8:"ff0000ffbf0080ff0000ff4000ffff0040ff8000ffff00bf",9:"ff0000ffaa00aaff0000ff0000ffaa00aaff0000ffaa00ffff00aa",10:"ff0000ff9900ccff0033ff0000ff6600ffff0066ff3300ffcc00ffff0099",11:"ff0000ff8b00e8ff005dff0000ff2e00ffb900b9ff002eff5d00ffe800ffff008b",12:"ff0000ff8000ffff0080ff0000ff0000ff8000ffff0080ff0000ff8000ffff00ffff0080"},Heat:{3:"ff0000ff8000ffff00",4:"ff0000ff8000ffff00ffff80",5:"ff0000ff5500ffaa00ffff00ffff80",6:"ff0000ff4000ff8000ffbf00ffff00ffff80",7:"ff0000ff3300ff6600ff9900ffcc00ffff00ffff80",8:"ff0000ff3300ff6600ff9900ffcc00ffff00ffff40ffffbf",9:"ff0000ff2a00ff5500ff8000ffaa00ffd500ffff00ffff40ffffbf",10:"ff0000ff2400ff4900ff6d00ff9200ffb600ffdb00ffff00ffff40ffffbf",11:"ff0000ff2000ff4000ff6000ff8000ff9f00ffbf00ffdf00ffff00ffff40ffffbf",12:"ff0000ff2000ff4000ff6000ff8000ff9f00ffbf00ffdf00ffff00ffff2affff80ffffd5"},LastAirBenderFire:{8:"ecb100a100007E605EFF45009948234B4C4E572530000000"},LastAirBenderAir:{7:"ff9933C24841FFFF338B5B4587AFD1EEB05ADBC5A0"},LastAirBenderEarth:{9:"015E05B1A8667A5C1264674225351C4C7022C7C45ED2CFABFEFED8"},LastAirBenderWater:{8:"0047ab1DB4D3A2CAEDAFB5B8120976fffafa174D79949BBC"},SpongeBob:{11:"C86925FDF56CC4433F989B46FC95765D57AFB2CE31FF2027000000B1D6C5AB8323"},Simpsons:{10:"fed90f424f46d1b271FB4122ABC67D0363C37A491E000000FC020946732E"},RickyAndMorty:{9:"01B4C697ce4cFFF874BEE5FDF675DA44281d3a4767F8D3ACE64358"},ParksAndRecreation:{10:"bdbdbda51209ffdb58ec70147A491EC24841005502f7fcb969983ab5651d"},KimPossible:{12:"FF8C0002466370D42389160402001F9CF6F7FFCE455D734DFEC3BB662C9Cfff9f5000000"},GravityFalls:{14:"417BA1ff1493ffff2e3456348b0000ff670093C0D58b45139248A71c88594747478fbc8fd2b48c000000"},GameOfThronesStark:{9:"cadde17B906F174D79fffafa898989D4CDB1708090120976000000"},GameOfThronesStannis:{7:"FF0000ff8d1aFFD700b20000cc6600FFFF66000000"},GameOfThronesLannister:{6:"89080AC5AA73FEDF25C248418B5B45000000"},GameOfThronesTyrell:{9:"068105F7DC27808000AB681BF9FE768DA08071749798FB983CB371"},GameOfThronesTargaryen:{5:"AC1F25272727ff993382878896804b"},GameOfThronesMartell:{8:"ff8000cc6600b81b1873110ff8fc23fafd7b4c2600a57642"},GameOfThronesTully:{6:"212250AE432FE4EDCA8B5B454682B4000000"},GameOfThronesGreyjoy:{6:"000000708090D4CDB1DCDCDCF7DC27808080"},GameOfThronesManderly:{7:"40e0d080808000ff00282828015202195953FFFFFF"},GameOfThronesArryn:{7:"007fff7fbfff0019334c4cffffefb2a89797FFFFFF"},Brooklyn99Regular:{10:"e7298a72bcd4e41a1cFCF40E49f149f16913525252F9FEFF000E33000000"},Brooklyn99Dark:{9:"6CA9C33A3533000E33800000CBCFD2175E78DAA520174D79000000"}},CanvasXpress.colorSchemes)for(var e in CanvasXpress.colorSchemes[t]){var i=CanvasXpress.colorSchemes[t][e].match(/.{6}/g);CanvasXpress.colorSchemes[t][e]=i?i.map((function(t){return"#"+t})):[]}}(),CanvasXpress.ambiguityCodes={"-":["-"],A:["A"],C:["C"],G:["G"],T:["T"],M:["A","C"],R:["A","G"],W:["A","T"],S:["C","G"],Y:["C","T"],K:["G","T"],V:["A","C","G"],H:["A","C","T"],D:["A","G","T"],B:["C","G","T"],N:["A","C","G","T"],X:["A","C","G","T"]},CanvasXpress.codon={TTT:["F","Phe","Phenylalanine"],TCT:["S","Ser","Serine"],TAT:["Y","Tyr","Tyrosine"],TGT:["C","Cys","Cysteine"],TTC:["F","Phe","Phenylalanine"],TCC:["S","Ser","Serine"],TAC:["Y","Tyr","Tyrosine"],TGC:["C","Cys","Cysteine"],TTA:["L","Leu","Leucine"],TCA:["S","Ser","Serine"],TAA:["*","Stop","Ochre"],TGA:["*","Stop","Opal"],TTG:["L","Leu","Leucine"],TCG:["S","Ser","Serine"],TAG:["*","Stop","Amber"],TGG:["W","Trp","Tryptophan"],CTT:["L","Leu","Leucine"],CCT:["P","Pro","Proline"],CAT:["H","His","Histidine"],CGT:["R","Arg","Arginine"],CTC:["L","Leu","Leucine"],CCC:["P","Pro","Proline"],CAC:["H","His","Histidine"],CGC:["R","Arg","Arginine"],CTA:["L","Leu","Leucine"],CCA:["P","Pro","Proline"],CAA:["Q","Gln","Glutamine"],CGA:["R","Arg","Arginine"],CTG:["L","Leu","Leucine"],CCG:["P","Pro","Proline"],CAG:["Q","Gln","Glutamine"],CGG:["R","Arg","Arginine"],ATT:["I","Ile","Isoleucine"],ACT:["T","Thr","Threonine"],AAT:["N","Asn","Asparagine"],AGT:["S","Ser","Serine"],ATC:["I","Ile","Isoleucine"],ACC:["T","Thr","Threonine"],AAC:["N","Asn","Asparagine"],AGC:["S","Ser","Serine"],ATA:["I","Ile","Isoleucine"],ACA:["T","Thr","Threonine"],AAA:["K","Lys","Lysine"],AGA:["R","Arg","Arginine"],ATG:["M","Met","Methionine"],ACG:["T","Thr","Threonine"],AAG:["K","Lys","Lysine"],AGG:["R","Arg","Arginine"],GTT:["V","Val","Valine"],GCT:["A","Ala","Alanine"],GAT:["D","Asp","Aspartic acid"],GGT:["G","Gly","Glycine"],GTC:["V","Val","Valine"],GCC:["A","Ala","Alanine"],GAC:["D","Asp","Aspartic acid"],GGC:["G","Gly","Glycine"],GTA:["V","Val","Valine"],GCA:["A","Ala","Alanine"],GAA:["E","Glu","Glutamic acid"],GGA:["G","Gly","Glycine"],GTG:["V","Val","Valine"],GCG:["A","Ala","Alanine"],GAG:["E","Glu","Glutamic acid"],GGG:["G","Gly","Glycine"]},CanvasXpress.reverseComplement={A:"T",C:"G",G:"C",T:"A",U:"A",Y:"R",R:"Y",W:"W",S:"S",K:"M",M:"K",B:"V",V:"B",D:"H",H:"D",X:"X",N:"N",a:"t",c:"g",g:"c",t:"a",u:"a",y:"r",r:"y",w:"w",s:"s",k:"m",m:"k",b:"v",v:"b",d:"h",h:"d",x:"x",n:"n"," ":" ","-":"-","/":"/","[":"[","]":"]"},CanvasXpress.themeDef={names:["economist","excel","tableau","stata","igray","solarized","paulTol","ggplot","wallStreetJournal","cx","blackAndWhite","lastAirBender","gameOfThrones","none"],axisTickColor:["#000000","#000000","#000000","#000000","#000000","#93A1A1","#000000","#000000","#000000","#000000","#000000","#333333","#333333","#000000"],axisTickScaleFontFactor:[1,1,1,1,1,1,1,1,1,1,1,1,1,1],axisTitleColor:["#000000","#000000","#000000","#000000","#000000","#93A1A1","#000000","#000000","#000000","#000000","#000000","#333333","#333333","#000000"],axisTitleScaleFontFactor:[1,1,1,1,1,1,1,1,1,1,1,1,1,1],background:["#D5E4EB","#FFFFFF","#E5E5E5","#EAF2F3","#E5E5E5","#FDF6E3","#FFFFFF","#FFFFFF","#F8F2E4","#FFFFFF","#FFFFFF","#ECE5D3","#FFFFFF","#FFFFFF"],backgroundType:["solid","window","window","window","window","solid","solid","window","solid","window","solid","solid","solid","solid"],backgroundWindow:["#D5E4EB","#C0C0C0","#FFFFFF","#FFFFFF","#FFFFFF","#FDF6E3","#FFFFFF","#E5E5E5","#F8F2E4","#E8E8E8","#FFFFFF","#ECE5D3","#FFFFFF","#F4F4F4"],colorScheme:["Economist","Excel","TableauMedium","Stata","GGPlot","Solarized","PaulTol","GGPlot","WallStreetJournal3","CanvasXpress","BlackAndWhite",!1,!1,"User"],colors:[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,["#fe296c","#487eb6","#a7ce31","#f8cc03","#ff8c02","#699696","#b77844","#83acd0","#c2e076","#fadc5a","#ff549f","#ffaf54","#9ab8b7","#d2a683","#3d699b","#87ac22","#cda908","#d02158","#d07300","#567676"]],fitLineColor:["#FFD700","#FFD700","#FFD700","#FFD700","#0000FF","#FFD700","#FFD700","#0000FF","#FFD700","#FFD700","#000000","#FFD700","#FFD700","#FFD700"],foreground:["#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#333333","#333333","#000000"],guides:[!1,!1,!1,!1,!1,!1,!1,!0,!1,!1,!1,!1,!1,!1],guidesColor:["#CCCCCC","#CCCCCC","#CCCCCC","#CCCCCC","#CCCCCC","#CCCCCC","#CCCCCC","#FFFFFF","#CCCCCC","#CCCCCC","#FFFFFF","#FFFFFF","#FFFFFF","#CCCCCC"],legendBackgroundBorderColor:["#000000","#000000","#E5E5E5","#000000","#000000","#93A1A1","#000000","#000000","#000000","#FFFFFF","#FFFFFF","#ECE5D3","#FFFFFF","#CCCCCC"],legendBackgroundColor:["#D5E4EB","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#F8F2E4","#E8E8E8","#FFFFFF","#ECE5D3","#FFFFFF","#FFFFFF"],legendColumns:[4,1,1,4,1,1,1,1,4,1,1,3,3,1],legendInside:[!0,!1,!1,!1,!1,!1,!1,!1,!0,!1,!1,!1,!1,!1],legendKeyBackgroundBorderColor:["#CCCCCC","#CCCCCC","#CCCCCC","#CCCCCC","#CCCCCC","#CCCCCC","#CCCCCC","#CCCCCC","#CCCCCC","#FFFFFF","#CCCCCC","#CCCCCC","#CCCCCC","#CCCCCC"],legendKeyBackgroundColor:["#CCCCCC","#CCCCCC","#CCCCCC","#CCCCCC","#CCCCCC","#CCCCCC","#CCCCCC","#CCCCCC","#CCCCCC","#CCCCCC","#CCCCCC","#CCCCCC","#CCCCCC","#CCCCCC"],legendPosition:["top","right","right","bottom","right","right","right","right","top","right","right","bottom","bottom","right"],legendTextColor:["#000000","#000000","#000000","#000000","#000000","#93A1A1","#000000","#000000","#000000","#000000","#000000","#333333","#333333","#000000"],legendTextScaleFontFactor:[1,1,1,1,1,1,1,1,1,1,1,1,1,1],lineDecoration:["symbol","symbol","symbol","symbol","symbol","symbol","symbol","symbol","symbol","symbol","pattern","false","false","symbol"],mapOutlineColor:["#D5E4EB","#C0C0C0","#E5E5E5","#EAF2F3","#FFFFFF","#FDF6E3","#FFFFFF","#FFFFFF","#F8F2E4","#CCCCCC","#000000","#333333","#333333","#CCCCCC"],objectBorderColor:["#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000"],plotBox:[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!0,!1,!1,!1],plotBoxColor:["#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#333333","#333333","#000000"],showLegendBorder:[!1,!0,!0,!0,!1,!0,!1,!0,!1,!0,!1,!1,!1,!1],subtitleAlign:["left","left","left","center","center","left","left","center","left","center","center","center","center","center"],subtitleColor:["#000000","#000000","#000000","#000000","#000000","#93A1A1","#000000","#000000","#000000","#000000","#000000","#333333","#333333","#000000"],titleAlign:["left","left","left","center","center","left","left","center","left","center","center","center","center","center"],titleColor:["#000000","#000000","#000000","#000000","#000000","#93A1A1","#000000","#000000","#000000","#000000","#000000","#333333","#333333","#000000"],xAxisTickColor:["#000000","#000000","#E5E5E5","#000000","#E5E5E5","#93A1A1","#E5E5E5","#FFFFFF","#000000","#FFFFFF","#000000","#333333","#333333","#CCCCCC"],xAxisTickGuideColor:["#000000","#000000","#E5E5E5","#000000","#000000","#93A1A1","#E5E5E5","#FFFFFF","#000000","#337AB7","#000000","#333333","#333333","#CCCCCC"],xAxisTickGuideSize:[1,1,1,1,1,1,1,1,1,1,1,1,1,1],xAxisTickLeftColor:["#000000","#000000","#E5E5E5","#000000","#000000","#93A1A1","#E5E5E5","#FFFFFF","#000000","#337AB7","#000000","#333333","#333333","#CCCCCC"],xAxisTickLeftShow:[!1,!0,!0,!0,!1,!0,!1,!0,!1,!0,!0,!0,!0,!0],xAxisTickLeftSize:[1,1,1,2,1,2,1,1,1,1,1,1,1,1],xAxisTickLineType:["solid","solid","solid","solid","solid","solid","solid","solid","dotted","solid","dotted","solid","solid","solid"],xAxisTickRightColor:["#000000","#000000","#E5E5E5","#000000","#000000","#93A1A1","#E5E5E5","#FFFFFF","#000000","#337AB7","#000000","#333333","#333333","#CCCCCC"],xAxisTickRightShow:[!1,!0,!0,!1,!1,!1,!1,!1,!1,!0,!0,!0,!0,!0],xAxisTickRightSize:[1,1,1,2,1,2,1,1,1,1,1,1,1,1],xAxisTickSize:[2,1,1,1,1,1,1,1,2,1,1,1,1,1],xAxisTicksMajorShow:[!1,!1,!0,!1,!0,!0,!0,!0,!1,!0,!0,!0,!0,!0],xAxisTicksMinorShow:[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!0,!0,!0,!0],yAxis2Show:[!0,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],yAxisShow:[!1,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0],yAxisTickBottomColor:["#000000","#000000","#E5E5E5","#000000","#000000","#93A1A1","#E5E5E5","#FFFFFF","#000000","#337AB7","#000000","#333333","#333333","#CCCCCC"],yAxisTickBottomShow:[!0,!0,!0,!0,!1,!0,!1,!0,!0,!0,!0,!0,!0,!0],yAxisTickBottomSize:[1,1,1,1,1,2,1,1,1,1,1,1,1,1],yAxisTickColor:["#FFFFFF","#000000","#E5E5E5","#EAF2F3","#E5E5E5","#93A1A1","#E5E5E5","#FFFFFF","#000000","#FFFFFF","#000000","#333333","#333333","#CCCCCC"],yAxisTickGuideColor:["#000000","#000000","#E5E5E5","#000000","#000000","#93A1A1","#E5E5E5","#FFFFFF","#000000","#337AB7","#000000","#333333","#333333","#CCCCCC"],yAxisTickGuideSize:[1,1,1,1,1,1,1,1,1,1,1,1,1,1],yAxisTickLineType:["solid","solid","solid","solid","solid","solid","solid","solid","dotted","solid","dotted","solid","solid","solid"],yAxisTickSize:[2,1,1,1,1,1,1,1,2,1,1,1,1,1],yAxisTickTopColor:["#000000","#000000","#E5E5E5","#000000","#000000","#93A1A1","#E5E5E5","#FFFFFF","#000000","#337AB7","#000000","#333333","#333333","#CCCCCC"],yAxisTickTopShow:[!1,!0,!0,!1,!1,!1,!1,!1,!1,!0,!0,!0,!0,!0],yAxisTickTopSize:[1,1,1,1,1,2,1,1,1,1,1,1,1,1],yAxisTicksMajorShow:[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0],yAxisTicksMinorShow:[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!0,!0,!0,!0],conditional:[{OneDPlots:{xAxisTicksMajorShow:!0}},{OneDPlots:{xAxisTicksMajorShow:!0}},!1,{OneDPlots:{xAxisTicksMajorShow:!0}},!1,!1,!1,!1,{OneDPlots:{xAxisTicksMajorShow:!0}},{OneDPlots:{plotBox:!0,plotBoxColor:"#337AB7"}},!1,!1,!1,!1]},CanvasXpress.R={lty:[[0,0],[],[8,6],[1,3],[1,3,5,3],[14,6],[4,3,8,3]],ltyNames:["blank","solid","dashed","dotted","dotdash","longdash","twodash"]},CanvasXpress.prototype.initDOM=function(){var toStr,isCallable,maxSafeInteger,toLength;this.$=function(t){return window.document.getElementById(t)},this.$cX=function(t,e,i){var s=window.document.createElement(t);if(e)for(var a in e)s[a]=e[a];if(i)for(var a in i)s.style[a]=i[a];return s},this.$cXI=function(t,e,i,s,a){var r=document.createElementNS("http://www.w3.org/2000/svg","svg"),n="";if(CanvasXpress.icons.use.hasOwnProperty(t)){var o='<rect class="cxnc" x="0" y="0" width="100" height="100" />';CanvasXpress.icons.gradients.hasOwnProperty(t)&&(o+=CanvasXpress.icons.gradients[t].replace(/&quot;/g,'"'));for(var h=0;h<CanvasXpress.icons.use[t].length;h++)o+=CanvasXpress.icons.symbols[CanvasXpress.icons.use[t][h]].replace(/&quot;/g,'"').replace(/&apos;/g,"'");var l=function(t){for(var e={},i=t.split(/class=/),s="<style>",a=1;a<i.length;a++){var r=i[a].match(/"(.+?)"/);if(r)for(var n=r[1].split(/\s+/),o=0;o<n.length;o++){var h=n[o];CanvasXpress.icons.classes.hasOwnProperty(h)&&!e.hasOwnProperty(h)&&(s+="."+h+CanvasXpress.icons.classes[h])}}return s+="</style>"}(o);if(a||(a=24),r.setAttribute("xmlns","http://www.w3.org/2000/svg"),r.setAttribute("viewBox","0 0 100 100"),r.setAttribute("style","width:"+a+"px;height:"+a+"px;box-sizing:border-box;"),e)for(var h in e)"className"==h?r.setAttribute("class",e[h]):(r.setAttribute(h,e[h]),"title"==h&&(n="<title>"+e[h]+"</title>"));if(i)for(var h in i)r.style[h]=i[h];r.innerHTML=n+l+o}return s?(new XMLSerializer).serializeToString(r):r},this.$cXIU=function(t,e,i,s){var a="";if(t&&CanvasXpress.icons.use.hasOwnProperty(e)){var r='<rect class="cxnc" x="0" y="0" width="100" height="100" />';CanvasXpress.icons.gradients.hasOwnProperty(e)&&(r+=CanvasXpress.icons.gradients[e].replace(/&quot;/g,'"'));for(var n=0;n<CanvasXpress.icons.use[e].length;n++)r+=CanvasXpress.icons.symbols[CanvasXpress.icons.use[e][n]].replace(/&quot;/g,'"').replace(/&apos;/g,"'");var o=function(t){for(var e={},i=t.split(/class=/),s="<style>",a=1;a<i.length;a++){var r=i[a].match(/"(.+?)"/);if(r)for(var n=r[1].split(/\s+/),o=0;o<n.length;o++){var h=n[o];CanvasXpress.icons.classes.hasOwnProperty(h)&&!e.hasOwnProperty(h)&&(s+="."+h+CanvasXpress.icons.classes[h])}}return s+="</style>"}(r);if(i)for(var n in i)"className"==n?t.setAttribute("class",i[n]):(t.setAttribute(n,i[n]),"title"==n&&(a="<title>"+i[n]+"</title>"));if(s)for(var n in s)t.style[n]=s[n];t.innerHTML=a+o+r}},this.setPixelImage=function(){1==CanvasXpress.instances.length?this.beaconImage=this.$cX("img",{id:this.target+"-cX-Beacon-Image",src:window.navigator.onLine?"https://www.canvasxpress.org/assets/images/beacon.gif?"+CanvasXpress.factory.client:CanvasXpress.png,title:"",alt:""}):this.beaconImage=CanvasXpress.instances[0].beaconImage},this.$$=function(){for(var t=this,e=CanvasXpress,i=function(t){if(t){if(t.length>36)return 0}else t=e[r[4]];var i=t.length,s=Number(t.substring(2,3)),a=Number(t.substring(i-3,i-2)),n=t.substring(3+s,3+s+5)[r[7]]("")[r[8]]()[r[9]](""),o=t.substring(i-(3+a+5),i-(3+a));return Number(n+""+o+"000")},s=["686578546f537472696e67","6472617754657874","666163746f7279","73797374656d","72656769737465726564","76616c6964","737562737472696e67","73706c6974","72657665727365","6a6f696e","43616e766173587072657373","4e6f7420612076616c696420636f7079206f6620","556e737570706f727465642056657273696f6e206f6620","20522056657273696f6e","204e6f64652056657273696f6e","697352566965776572","697352436f6e736f6c65","68726566","2f7777772e63616e7661737870726573732e6f72672f646973742f","72616e646f6d496e744265747765656e","666f6e7453697a65","666f6e744e616d65","69734378706c6f74","6378706c6f742042792043616e766173587072657373","736574506978656c496d616765","64697361626c65426561636f6e"],a=t.hexToString("686578546f537472696e67"),r=[],n=0;n<s.length;n++)r.push(t[a](s[n]));var o=Number(i()),h=Number(t.meta.time.start),l=isNaN(e[r[2]][r[5]])?Number(i(e[r[2]][r[5]])):0,c=new RegExp(r[18]).test(e[r[2]][r[17]])||e[r[3]][r[15]]||e[r[3]][r[16]],d=t[r[22]]?r[23]:r[10];c||o-h<0&&(!l||l-h<0)&&(e[r[2]][r[5]]&&(d=r[11]+r[10]),setTimeout((function(){t.$$$(d)}),1e3*t[r[19]](1,8)))},this.$$$=function(t){for(var e=this,i=["6472617754657874","666f6e744e616d65"],s=e.hexToString("686578546f537472696e67"),a=[],r=0;r<i.length;r++)a.push(e[s](i[r]));var n=e[a[1]]+20+"px";e[a[0]](t,e.width-6,e.height-10,n,"rgba(0,0,0,1)","right","middle")},this.showMask=function(){var t=this.$(this.target),e=this.$(this.target+"canvasXpressLoadingTimer");e&&(e.style.height=parseInt(t.height/2-100.5)+"px",e.style.display="block")},this.hideMask=function(){var t=this.$(this.target+"canvasXpressLoadingTimer");t&&(t.style.display="none"),this.loaded=!0,this.$$()},this.createNewTarget=function(){var t=this.$cX("canvas").setAttribute("id",this.newId("-canvasXpress-"));return window.document.body.appendChild(t),t.id},this.newId=function(t){for(var e=0,i=this.target+t+e;this.meta.ids[i];)e++,i=this.target+t+e;return this.meta.ids[i]=!0,i},this.insertTarget=function(t,e,i,s,a){if(t&&e){var r=this.$(t);if(r)return;r=this.$cX("canvas",{id:t,width:i,height:s}),this.castCanvasAttributes(r),a?e.parentNode.insertBefore(r,e.nextSibling):e.parentNode.insertBefore(r,e)}},this.castCanvasAttributes=function(t,e){e||(e=this.meta.canvas.ctx.canvas),CanvasXpress.transferDatasetAttributes(e,t)},this.removeTarget=function(t){var e=this.$(t);e&&e.parentNode.removeChild(e)},this.getWindowSize=function(){var t=window.document;return[window.innerWidth||t.documentElement.clientWidth||t.body.clientWidth,window.innerHeight||t.documentElement.clientHeight||t.body.clientHeight]},this.getWindowScroll=function(){var t=window.document.documentElement;return[(window.pageXOffset||t.scrollLeft)-(t.clientLeft||0),(window.pageYOffset||t.scrollTop)-(t.clientTop||0)]},this.isInViewport=function(t,e){var i=this.getWindowSize(),s=t.getBoundingClientRect(),a=s.right-.5*this.width,r=s.bottom-.5*this.height;return s.left>=0&&s.top>=0&&a<=i[0]&&r<=i[1]},this.hasClass=function(t,e){return!!t&&t.classList.contains(e)},this.addClass=function(t,e){t&&t.classList.add(e)},this.removeClass=function(t,e){t&&t.classList.remove(e)},this.getComputedCSS=function(t){for(var e="",i=getComputedStyle(t),s=0;s<i.length;s++)e+=i[s]+":"+i.getPropertyValue(i[s])+";";return e},this.cancelEvent=function(t){if(t)return!CanvasXpress.system.browser.match(/safari/i)&&void(t.preventDefault?t.preventDefault():t.returnValue=!1)},this.stopEvent=function(t){t&&(t.stopPropagation?t.stopPropagation():t.cancelBubble=!0)},this.normalizeEvtName=function(t){return CanvasXpress.system.isIE?"on"+t:t},this.copyEvent=function(t){var e={};for(var i in t)e[i]=t[i];return e},this.addEvtListener=function(t,e,i,s){if(t&&"string"==typeof t&&(t=this.$(t)),t&&e&&i){var a=this.meta.events;t.id?(a[t.id]||(a[t.id]={}),a[t.id][e]=[i,s]):(a[t]||(a[t]={}),a[t][e]=[i,s]),CanvasXpress.system.isIE?t.attachEvent(this.normalizeEvtName(e),i):"touchstart"==e?t.addEventListener(e,i,s):"mousewheel"==e?(t.addEventListener(e,i,s),t.addEventListener("DOMMouseScroll",i,s)):t.addEventListener(e,i,s)}},this.removeEvtListener=function(t,e,i,s){if(t&&"string"==typeof t&&(t=this.$(t)),t&&e&&i){var a=this.meta.events,r=a[t.id||t];if(r&&r.hasOwnProperty(e)){delete r[e],CanvasXpress.system.isIE?t.detachEvent(this.normalizeEvtName(e),i):(t.removeEventListener(e,i,s),"mousewheel"==e&&t.removeEventListener("DOMMouseScroll",i,s));var n=this.getKeys(a[t.id||t]);n&&n.length<1&&delete a[t.id||t]}}},this.addRemoveEvtListener=function(t,e,i,s,a){t&&e&&i&&s&&this[t](e,i,s,a)},this.purgeEventListeners=function(){var t=this.meta.events;for(var e in t){var i=this.$(e)||e;for(var s in t[e])this.removeEvtListener(i,s,t[e][0],t[e][1])}},this.preventSelection=function(){var t=window.document;t.selection?t.selection.empty():window.getSelection&&window.getSelection().removeAllRanges()},this.getTargetEvent=function(t){var e=t.target||t.srcElement;return"object"!=typeof e&&(e=this.$(e)),e instanceof SVGElement&&e.ownerSVGElement&&(e=e.ownerSVGElement),e},this.dispatchEvent=function(t,e){t.dispatchEvent(e)},this.requestAnimationFrame=function(t,e){t&&(raf=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame,raf?raf(t):(e||(e=1e3/60),window.setTimeout(t,e)))},this.setTimeout=function(t,e){if(this.isR)setTimeout(t,e);else{var i=this;(function(t){return new Promise((function(e,i){t?setTimeout(e,t):setTimeout(e,1e3)}))})(e).then((function(){t.apply(i)}))}},this.setInterval=function(t,e){return this.logConsole("canvasXpress setInterval ready - "+arguments.callee.caller.name+" - "+e),setInterval(t,e)},"function"!=typeof JSON.decycle&&(JSON.decycle=function(t,e){var i=new WeakMap;return function t(s,a){var r,n;return void 0!==e&&(s=e(s)),"object"!=typeof s||null===s||s instanceof Boolean||s instanceof Date||s instanceof Number||s instanceof RegExp||s instanceof String?s:void 0!==(r=i.get(s))?{$ref:r}:(i.set(s,a),Array.isArray(s)?(n=[],s.forEach((function(e,i){n[i]=t(e,a+"["+i+"]")}))):(n={},Object.keys(s).forEach((function(e){n[e]=t(s[e],a+"["+JSON.stringify(e)+"]")}))),n)}(t,"$")}),"function"!=typeof JSON.retrocycle&&(JSON.retrocycle=function retrocycle($){var px=/^\$(?:\[(?:\d+|"(?:[^\\"\u0000-\u001f]|\\([\\"\/bfnrt]|u[0-9a-zA-Z]{4}))*")\])*$/;return function rez(value){value&&"object"==typeof value&&(Array.isArray(value)?value.forEach((function(element,i){if("object"==typeof element&&null!==element){var path=element.$ref;"string"==typeof path&&px.test(path)?value[i]=eval(path):rez(element)}})):Object.keys(value).forEach((function(name){var item=value[name];if("object"==typeof item&&null!==item){var path=item.$ref;"string"==typeof path&&px.test(path)?value[name]=eval(path):rez(item)}})))}($),$}),Array.from||(Array.from=(toStr=Object.prototype.toString,isCallable=function(t){return"function"==typeof t||"[object Function]"===toStr.call(t)},maxSafeInteger=Math.pow(2,53)-1,toLength=function(t){var e=function(t){var e=Number(t);return isNaN(e)?0:0!==e&&isFinite(e)?(e>0?1:-1)*Math.floor(Math.abs(e)):e}(t);return Math.min(Math.max(e,0),maxSafeInteger)},function(t){var e=this,i=Object(t);if(null==t)throw new TypeError("Array.from requires an array-like object - not null or undefined");var s,a=arguments.length>1?arguments[1]:void 0;if(void 0!==a){if(!isCallable(a))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(s=arguments[2])}for(var r,n=toLength(i.length),o=isCallable(e)?Object(new e(n)):new Array(n),h=0;h<n;)r=i[h],o[h]=a?void 0===s?a(r,h):a.call(s,r,h):r,h+=1;return o.length=n,o})),Array.prototype.fill||Object.defineProperty(Array.prototype,"fill",{value:function(t){if(null==this)throw new TypeError("this is null or not defined");for(var e=Object(this),i=e.length>>>0,s=arguments[1],a=s>>0,r=a<0?Math.max(i+a,0):Math.min(a,i),n=arguments[2],o=void 0===n?i:n>>0,h=o<0?Math.max(i+o,0):Math.min(o,i);r<h;)e[r]=t,r++;return e}}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),s=1;s<arguments.length;s++){var a=arguments[s];if(null!=a)for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(i[r]=a[r])}return i},writable:!0,configurable:!0}),Array.prototype.map||(Array.prototype.map=function(t){var e,i,s;if(null==this)throw new TypeError("this is null or not defined");var a=Object(this),r=a.length>>>0;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(arguments.length>1&&(e=arguments[1]),i=new Array(r),s=0;s<r;){var n,o;s in a&&(n=a[s],o=t.call(e,n,s,a),i[s]=o),s++}return i}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(t){if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),i=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var s=arguments[1],a=0;a<i;){var r=e[a];if(t.call(s,r,a,e))return a;a++}return-1}}),"function"!=typeof window.CustomEvent&&(window.CustomEvent=function(t,e){e=e||{bubbles:!1,cancelable:!1,detail:null};var i=document.createEvent("CustomEvent");return i.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),i}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(t,e){if(null==this)throw new TypeError('"this" is null or not defined');var i=Object(this),s=i.length>>>0;if(0===s)return!1;var a,r,n=0|e,o=Math.max(n>=0?n:s-Math.abs(n),0);for(;o<s;){if((a=i[o])===(r=t)||"number"==typeof a&&"number"==typeof r&&isNaN(a)&&isNaN(r))return!0;o++}return!1}}),this.isInIframe=function(){try{return window.self!==window.top}catch(t){return!0}},this.initializeBrowser=function(){var t=function(){var t,e=window.navigator.userAgent,i=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(i[1])?"IE "+((t=/\brv[ :]+(\d+)/g.exec(e)||[])[1]||""):"Chrome"===i[1]&&null!=(t=e.match(/\b(OPR|Edge)\/(\d+)/))?t.slice(1).join(" ").replace("OPR","Opera"):(i=i[2]?[i[1],i[2]]:[window.navigator.appName,window.navigator.appVersion,"-?"],null!=(t=e.match(/version\/(\d+)/i))&&i.splice(1,1,t[1]),i.join(" "))}().split(" "),e=function(){var t=window.navigator.userAgent,e=window.navigator.platform,i=null;return-1!==["Macintosh","MacIntel","MacPPC","Mac68K"].indexOf(e)?i="Mac OS":-1!==["iPhone","iPad","iPod"].indexOf(e)?i="iOS":-1!==["Win32","Win64","Windows","WinCE"].indexOf(e)?i="Windows":/Android/.test(t)?i="Android":!i&&/Linux/.test(e)&&(i="Linux"),i}();CanvasXpress.system={browser:t[0],browserVersion:t[1],os:e,alt:"Mac OS"==e?"&#8997;":"Alt",command:"&#8984;",control:"Mac OS"==e?"&#8963;":"Ctrl",shift:"Mac OS"==e?"&#8679;":"Shift",isjQuery:"function"==typeof $,isReveal:"undefined"!=typeof Reveal,isZoom:"undefined"!=typeof zoom,isIE:"IE"==this.browser,isInIframe:!!t[0].match(/safari/i)||this.isInIframe(),isTouchScreen:"ontouchstart"in window||"onmsgesturechange"in window||window.navigator.maxTouchPoints}}},CanvasXpress.prototype.initSVG=function(){function t(t,e){var i,s=Object.keys(e);for(i=0;i<s.length;i++)t=t.replace(new RegExp("\\{"+s[i]+"\\}","gi"),e[s[i]]);return t}function e(t){var e,i,s;if(!t)throw new Error("cannot create a random attribute name for an undefined object");e="ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",i="";do{for(i="",s=0;s<12;s++)i+=e[Math.floor(Math.random()*e.length)]}while(t[i]);return i}function i(t){var e={left:"start",right:"end",center:"middle",start:"start",end:"end"};return e[t]||e.start}function s(t){var e={alphabetic:"alphabetic",hanging:"hanging",top:"text-before-edge",bottom:"text-after-edge",middle:"central"};return e[t]||e.alphabetic}var a=function(t,e){var i,s,a,r={};for(t=t.split(","),e=e||10,i=0;i<t.length;i+=2)s="&"+t[i+1]+";",a=parseInt(t[i],e),r[s]="&#"+a+";";return r["\\xa0"]="&#160;",r}("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),r={strokeStyle:{svgAttr:"stroke",canvas:"#000000",svg:"none",apply:"stroke"},fillStyle:{svgAttr:"fill",canvas:"#000000",svg:null,apply:"fill"},lineCap:{svgAttr:"stroke-linecap",canvas:"butt",svg:"butt",apply:"stroke"},lineJoin:{svgAttr:"stroke-linejoin",canvas:"miter",svg:"miter",apply:"stroke"},miterLimit:{svgAttr:"stroke-miterlimit",canvas:10,svg:4,apply:"stroke"},lineWidth:{svgAttr:"stroke-width",canvas:1,svg:1,apply:"stroke"},globalAlpha:{svgAttr:"opacity",canvas:1,svg:1,apply:"fill stroke"},font:{canvas:"10px sans-serif"},shadowColor:{canvas:"#000000"},shadowOffsetX:{canvas:0},shadowOffsetY:{canvas:0},shadowBlur:{canvas:0},textAlign:{canvas:"start"},textBaseline:{canvas:"alphabetic"},lineDash:{svgAttr:"stroke-dasharray",canvas:[],svg:null,apply:"stroke"}},n=function(t,e){this.__root=t,this.__ctx=e};n.prototype.addColorStop=function(e,i){var s,a=this.__ctx.__createElement("stop");a.setAttribute("offset",e),-1!==i.indexOf("rgba")?(s=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(i),a.setAttribute("stop-color",t("rgb({r},{g},{b})",{r:s[1],g:s[2],b:s[3]})),a.setAttribute("stop-opacity",s[4])):a.setAttribute("stop-color",i),this.__root.appendChild(a)};var o=function(t,e){this.__root=t,this.__ctx=e},h=function(t){var e,i={width:500,height:500,enableMirroring:!1};if(arguments.length>1?((e=i).width=arguments[0],e.height=arguments[1]):e=t||i,!(this instanceof h))return new h(e);this.width=e.width||i.width,this.height=e.height||i.height,this.enableMirroring=void 0!==e.enableMirroring?e.enableMirroring:i.enableMirroring,this.canvas=this,this.__document=e.document||document,e.ctx?this.__ctx=e.ctx:(this.__canvas=this.__document.createElement("canvas"),this.__ctx=this.__canvas.getContext("2d")),this.__setDefaultStyles(),this.__stack=[this.__getStyleState()],this.__groupStack=[],this.__root=this.__document.createElementNS("http://www.w3.org/2000/svg","svg"),this.__root.setAttribute("version",1.1),this.__root.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.__root.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),this.__root.setAttribute("width",this.width),this.__root.setAttribute("height",this.height),this.__ids={},this.__defs=this.__document.createElementNS("http://www.w3.org/2000/svg","defs"),this.__root.appendChild(this.__defs),this.__currentElement=this.__document.createElementNS("http://www.w3.org/2000/svg","g"),this.__root.appendChild(this.__currentElement)};h.prototype.__createElement=function(t,e,i){void 0===e&&(e={});var s,a,r=this.__document.createElementNS("http://www.w3.org/2000/svg",t),n=Object.keys(e);for(i&&(r.setAttribute("fill","none"),r.setAttribute("stroke","none")),s=0;s<n.length;s++)a=n[s],r.setAttribute(a,e[a]);return r},h.prototype.__setDefaultStyles=function(){var t,e,i=Object.keys(r);for(t=0;t<i.length;t++)this[e=i[t]]=r[e].canvas},h.prototype.__applyStyleState=function(t){var e,i,s=Object.keys(t);for(e=0;e<s.length;e++)this[i=s[e]]=t[i]},h.prototype.__getStyleState=function(){var t,e,i={},s=Object.keys(r);for(t=0;t<s.length;t++)i[e=s[t]]=this[e];return i},h.prototype.__applyStyleToCurrentElement=function(e){var i=this.__currentElement,s=this.__currentElementsToStyle;s&&(i.setAttribute(e,""),i=s.element,s.children.forEach((function(t){t.setAttribute(e,"")})));var a,h,l,c,d,p=Object.keys(r);for(a=0;a<p.length;a++)if(h=r[p[a]],l=this[p[a]],h.apply)if(l instanceof o){if(l.__ctx)for(;l.__ctx.__defs.childNodes.length;)c=l.__ctx.__defs.childNodes[0].getAttribute("id"),this.__ids[c]=c,this.__defs.appendChild(l.__ctx.__defs.childNodes[0]);i.setAttribute(h.apply,t("url(#{id})",{id:l.__root.getAttribute("id")}))}else if(l instanceof n)i.setAttribute(h.apply,t("url(#{id})",{id:l.__root.getAttribute("id")}));else if(-1!==h.apply.indexOf(e)&&h.svg!==l)if("stroke"!==h.svgAttr&&"fill"!==h.svgAttr||!l.indexOf||-1===l.indexOf("rgba")){var g=h.svgAttr;if("globalAlpha"===p[a]&&(g=e+"-"+h.svgAttr,i.getAttribute(g)))continue;i.setAttribute(g,l)}else{d=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(l),i.setAttribute(h.svgAttr,t("rgb({r},{g},{b})",{r:d[1],g:d[2],b:d[3]}));var u=d[4],m=this.globalAlpha;null!=m&&(u*=m),i.setAttribute(h.svgAttr+"-opacity",u)}},h.prototype.__closestGroupOrSvg=function(t){return"g"===(t=t||this.__currentElement).nodeName||"svg"===t.nodeName?t:this.__closestGroupOrSvg(t.parentNode)},h.prototype.getSerializedSvg=function(t){var e,i,s,r,n,o=(new XMLSerializer).serializeToString(this.__root);if(/xmlns="http:\/\/www\.w3\.org\/2000\/svg".+xmlns="http:\/\/www\.w3\.org\/2000\/svg/gi.test(o)&&(o=o.replace('xmlns="http://www.w3.org/2000/svg','xmlns:xlink="http://www.w3.org/1999/xlink')),t)for(e=Object.keys(a),i=0;i<e.length;i++)s=e[i],r=a[s],(n=new RegExp(s,"gi")).test(o)&&(o=o.replace(n,r));return o},h.prototype.getSvg=function(){return this.__root},h.prototype.save=function(){var t=this.__createElement("g"),e=this.__closestGroupOrSvg();this.__groupStack.push(e),e.appendChild(t),this.__currentElement=t,this.__stack.push(this.__getStyleState())},h.prototype.restore=function(){this.__currentElement=this.__groupStack.pop(),this.__currentElementsToStyle=null,this.__currentElement||(this.__currentElement=this.__root.childNodes[1]);var t=this.__stack.pop();this.__applyStyleState(t)},h.prototype.__addTransform=function(t){var e=this.__closestGroupOrSvg();if(e.childNodes.length>0){"path"===this.__currentElement.nodeName&&(this.__currentElementsToStyle||(this.__currentElementsToStyle={element:e,children:[]}),this.__currentElementsToStyle.children.push(this.__currentElement),this.__applyCurrentDefaultPath());var i=this.__createElement("g");e.appendChild(i),this.__currentElement=i}var s=this.__currentElement.getAttribute("transform");s?s+=" ":s="",s+=t,this.__currentElement.setAttribute("transform",s)},h.prototype.scale=function(e,i){void 0===i&&(i=e),this.__addTransform(t("scale({x},{y})",{x:e,y:i}))},h.prototype.rotate=function(e){var i=180*e/Math.PI;this.__addTransform(t("rotate({angle},{cx},{cy})",{angle:i,cx:0,cy:0}))},h.prototype.translate=function(e,i){this.__addTransform(t("translate({x},{y})",{x:e,y:i}))},h.prototype.transform=function(e,i,s,a,r,n){this.__addTransform(t("matrix({a},{b},{c},{d},{e},{f})",{a:e,b:i,c:s,d:a,e:r,f:n}))},h.prototype.beginPath=function(){var t;this.__currentDefaultPath="",this.__currentPosition={},t=this.__createElement("path",{},!0),this.__closestGroupOrSvg().appendChild(t),this.__currentElement=t},h.prototype.__applyCurrentDefaultPath=function(){var t=this.__currentElement;"path"===t.nodeName?t.setAttribute("d",this.__currentDefaultPath):console.error("Attempted to apply path command to node",t.nodeName)},h.prototype.__addPathCommand=function(t){this.__currentDefaultPath+=" ",this.__currentDefaultPath+=t},h.prototype.moveTo=function(e,i){"path"!==this.__currentElement.nodeName&&this.beginPath(),this.__currentPosition={x:e,y:i},this.__addPathCommand(t("M {x} {y}",{x:e,y:i}))},h.prototype.closePath=function(){this.__currentDefaultPath&&this.__addPathCommand("Z")},h.prototype.lineTo=function(e,i){this.__currentPosition={x:e,y:i},this.__currentDefaultPath.indexOf("M")>-1?this.__addPathCommand(t("L {x} {y}",{x:e,y:i})):this.__addPathCommand(t("M {x} {y}",{x:e,y:i}))},h.prototype.bezierCurveTo=function(e,i,s,a,r,n){this.__currentPosition={x:r,y:n},this.__addPathCommand(t("C {cp1x} {cp1y} {cp2x} {cp2y} {x} {y}",{cp1x:e,cp1y:i,cp2x:s,cp2y:a,x:r,y:n}))},h.prototype.quadraticCurveTo=function(e,i,s,a){this.__currentPosition={x:s,y:a},this.__addPathCommand(t("Q {cpx} {cpy} {x} {y}",{cpx:e,cpy:i,x:s,y:a}))};var l=function(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]);return[t[0]/e,t[1]/e]};h.prototype.arcTo=function(t,e,i,s,a){var r=this.__currentPosition&&this.__currentPosition.x,n=this.__currentPosition&&this.__currentPosition.y;if(void 0!==r&&void 0!==n){if(a<0)throw new Error("IndexSizeError: The radius provided ("+a+") is negative.");if(r===t&&n===e||t===i&&e===s||0===a)this.lineTo(t,e);else{var o=l([r-t,n-e]),h=l([i-t,s-e]);if(o[0]*h[1]!=o[1]*h[0]){var c=o[0]*h[0]+o[1]*h[1],d=Math.acos(Math.abs(c)),p=l([o[0]+h[0],o[1]+h[1]]),g=a/Math.sin(d/2),u=t+g*p[0],m=e+g*p[1],f=[-o[1],o[0]],y=[h[1],-h[0]],x=function(t){var e=t[0];return t[1]>=0?Math.acos(e):-Math.acos(e)},v=x(f),b=x(y);this.lineTo(u+f[0]*a,m+f[1]*a),this.arc(u,m,a,v,b)}else this.lineTo(t,e)}}},h.prototype.stroke=function(){"path"===this.__currentElement.nodeName&&this.__currentElement.setAttribute("paint-order","fill stroke markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("stroke")},h.prototype.fill=function(){"path"===this.__currentElement.nodeName&&this.__currentElement.setAttribute("paint-order","stroke fill markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("fill")},h.prototype.rect=function(t,e,i,s){"path"!==this.__currentElement.nodeName&&this.beginPath(),this.moveTo(t,e),this.lineTo(t+i,e),this.lineTo(t+i,e+s),this.lineTo(t,e+s),this.lineTo(t,e),this.closePath()},h.prototype.fillRect=function(t,e,i,s){var a;a=this.__createElement("rect",{x:t,y:e,width:i,height:s},!0),this.__closestGroupOrSvg().appendChild(a),this.__currentElement=a,this.__applyStyleToCurrentElement("fill")},h.prototype.strokeRect=function(t,e,i,s){var a;a=this.__createElement("rect",{x:t,y:e,width:i,height:s},!0),this.__closestGroupOrSvg().appendChild(a),this.__currentElement=a,this.__applyStyleToCurrentElement("stroke")},h.prototype.__clearCanvas=function(){for(var t=this.__closestGroupOrSvg().getAttribute("transform"),e=this.__root.childNodes[1],i=e.childNodes,s=i.length-1;s>=0;s--)i[s]&&e.removeChild(i[s]);this.__currentElement=e,this.__groupStack=[],t&&this.__addTransform(t)},h.prototype.clearRect=function(t,e,i,s){if(0!==t||0!==e||i!==this.width||s!==this.height){var a,r=this.__closestGroupOrSvg();a=this.__createElement("rect",{x:t,y:e,width:i,height:s,fill:"#FFFFFF"},!0),r.appendChild(a)}else this.__clearCanvas()},h.prototype.createLinearGradient=function(t,i,s,a){var r=this.__createElement("linearGradient",{id:e(this.__ids),x1:t+"px",x2:s+"px",y1:i+"px",y2:a+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(r),new n(r,this)},h.prototype.createRadialGradient=function(t,i,s,a,r,o){var h=this.__createElement("radialGradient",{id:e(this.__ids),cx:a+"px",cy:r+"px",r:o+"px",fx:t+"px",fy:i+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(h),new n(h,this)},h.prototype.__parseFont=function(){var t=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-,\'\"\sa-z0-9]+?)\s*$/i.exec(this.font),e={style:t[1]||"normal",size:t[4]||"10px",family:t[6]||"sans-serif",weight:t[3]||"normal",decoration:t[2]||"normal",href:null};return"underline"===this.__fontUnderline&&(e.decoration="underline"),this.__fontHref&&(e.href=this.__fontHref),e},h.prototype.__wrapTextLink=function(t,e){if(t.href){var i=this.__createElement("a");return i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.href),i.appendChild(e),i}return e},h.prototype.__applyText=function(t,e,a,r){var n=this.__parseFont(),o=this.__closestGroupOrSvg(),h=this.__createElement("text",{"font-family":n.family,"font-size":n.size,"font-style":n.style,"font-weight":n.weight,"text-decoration":n.decoration,x:e,y:a,"text-anchor":i(this.textAlign),"dominant-baseline":s(this.textBaseline)},!0);h.appendChild(this.__document.createTextNode(t)),this.__currentElement=h,this.__applyStyleToCurrentElement(r),o.appendChild(this.__wrapTextLink(n,h))},h.prototype.fillText=function(t,e,i){this.__applyText(t,e,i,"fill")},h.prototype.strokeText=function(t,e,i){this.__applyText(t,e,i,"stroke")},h.prototype.measureText=function(t){return this.__ctx.font=this.font,this.__ctx.measureText(t)},h.prototype.arc=function(e,i,s,a,r,n){if(a!==r){(a%=2*Math.PI)===(r%=2*Math.PI)&&(r=(r+2*Math.PI-.001*(n?-1:1))%(2*Math.PI));var o=e+s*Math.cos(r),h=i+s*Math.sin(r),l=e+s*Math.cos(a),c=i+s*Math.sin(a),d=n?0:1,p=0,g=r-a;g<0&&(g+=2*Math.PI),p=n?g>Math.PI?0:1:g>Math.PI?1:0,this.lineTo(l,c),this.__addPathCommand(t("A {rx} {ry} {xAxisRotation} {largeArcFlag} {sweepFlag} {endX} {endY}",{rx:s,ry:s,xAxisRotation:0,largeArcFlag:p,sweepFlag:d,endX:o,endY:h})),this.__currentPosition={x:o,y:h}}},h.prototype.clip=function(){var i=this.__closestGroupOrSvg(),s=this.__createElement("clipPath"),a=e(this.__ids),r=this.__createElement("g");this.__applyCurrentDefaultPath(),i.removeChild(this.__currentElement),s.setAttribute("id",a),s.appendChild(this.__currentElement),this.__defs.appendChild(s),i.setAttribute("clip-path",t("url(#{id})",{id:a})),i.appendChild(r),this.__currentElement=r},h.prototype.drawImage=function(){var t,e,i,s,a,r,n,o,l,c,d,p,g,u=Array.prototype.slice.call(arguments),m=u[0],f=0,y=0;if(3===u.length)t=u[1],e=u[2],i=a=m.width,s=r=m.height;else if(5===u.length)t=u[1],e=u[2],i=u[3],s=u[4],a=m.width,r=m.height;else{if(9!==u.length)throw new Error("Inavlid number of arguments passed to drawImage: "+arguments.length);f=u[1],y=u[2],a=u[3],r=u[4],t=u[5],e=u[6],i=u[7],s=u[8]}n=this.__closestGroupOrSvg(),this.__currentElement;var x="translate("+t+", "+e+")";if(m instanceof h){if((o=m.getSvg().cloneNode(!0)).childNodes&&o.childNodes.length>1){for(l=o.childNodes[0];l.childNodes.length;)g=l.childNodes[0].getAttribute("id"),this.__ids[g]=g,this.__defs.appendChild(l.childNodes[0]);if(c=o.childNodes[1]){var v,b=c.getAttribute("transform");v=b?b+" "+x:x,c.setAttribute("transform",v),n.appendChild(c)}}}else"CANVAS"!==m.nodeName&&"IMG"!==m.nodeName||((d=this.__createElement("image")).setAttribute("width",i),d.setAttribute("height",s),d.setAttribute("preserveAspectRatio","none"),(f||y||a!==m.width||r!==m.height)&&((p=this.__document.createElement("canvas")).width=i,p.height=s,p.getContext("2d").drawImage(m,f,y,a,r,0,0,i,s),m=p),d.setAttribute("transform",x),d.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","CANVAS"===m.nodeName?m.toDataURL():m.getAttribute("src")),n.appendChild(d))},h.prototype.createPattern=function(t,i){var s,a=this.__document.createElementNS("http://www.w3.org/2000/svg","pattern"),r=e(this.__ids);return a.setAttribute("id",r),a.setAttribute("width",t.width),a.setAttribute("height",t.height),"CANVAS"===t.nodeName||"IMG"===t.nodeName?((s=this.__document.createElementNS("http://www.w3.org/2000/svg","image")).setAttribute("width",t.width),s.setAttribute("height",t.height),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","CANVAS"===t.nodeName?t.toDataURL():t.getAttribute("src")),a.appendChild(s),this.__defs.appendChild(a)):t instanceof h&&(a.appendChild(t.__root.childNodes[1]),this.__defs.appendChild(a)),new o(a,this)},h.prototype.setLineDash=function(t){t&&t.length>0?this.lineDash=t.join(","):this.lineDash=null},h.prototype.drawFocusRing=function(){},h.prototype.createImageData=function(){},h.prototype.getImageData=function(){},h.prototype.putImageData=function(){},h.prototype.globalCompositeOperation=function(){},h.prototype.setTransform=function(){},this.canvasToSVG=h},CanvasXpress.prototype.initInterface=function(){this.parseJSON=function(s,r){return s.toString().match(/<!DOCTYPE/)?void 0:r?JSON.parse(s,r):JSON.parse(s,(function(k,v){return"string"==typeof v&&v.startsWith&&v.startsWith("/Function(")&&v.endsWith&&v.endsWith(")/")?(v=v.substring(10,v.length-2).replace(/&quot;/g,'"'),eval("("+v+")")):v}))},this.stringifyJSON=function(t,e,i){return e?JSON.stringify(t,e,i||null):!!t&&JSON.stringify(t,(function(t,e){if("function"==typeof e)return"/Function("+e.toString().replace(/"/g,"&quot;")+")/";if("events"==t&&"object"==typeof e)return e;if("state"!=t&&"stateIndex"!=t&&"gantt"!=t){if(e instanceof Array){for(var i in e)if(Array.isArray(e[i])||e[i]instanceof Object)return e;return JSON.stringify(e)}return e}}),i||null).replace(/\\n/g,"").replace(/\\/g,"").replace(/\"\[/g,"[").replace(/\]\"/g,"]").replace(/\"\{/g,"{").replace(/\}\"/g,"}").replace(/u0000/g,"")},this.isValidURL=function(t){var e=new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.?)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;,\\s\\(\\)\\[\\]&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i"),i=new RegExp("^(\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.?)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;,\\s\\(\\)\\[\\]&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i");return e.test(t)||i.test(t)},this.stringToXML=function(t){var e=!1;return window.DOMParser?e=(new DOMParser).parseFromString(t,"text/xml"):void 0!==window.ActiveXObject&&new window.ActiveXObject("Microsoft.XMLDOM")&&((e=new window.ActiveXObject("Microsoft.XMLDOM")).async="false",e.loadXML(t)),e},this.isValidXML=function(t){var e=this.stringToXML(t);return null!=e&&0==e.getElementsByTagName("parsererror").length},this.isValidBZ2=function(t){return t.match(/.xml.bz2$/)},this.isValidJSON=function(t){try{JSON.parse(t)}catch(t){return!1}return!0},this.isValidDelimitedFile=function(t){var e=this.delimitedToArray(t);return this.isArray(e)&&this.isArray(e[0])},this.isValidString=function(t){var e={type:!1,data:!1};return this.isValidURL(t)?(e.type="URL",e.data=t):this.isValidXML(t)?(e.type="XML",e.data=this.stringToXML(t)):this.isValidBZ2(t)?(e.type="URL",e.data=t):this.isValidJSON(t)?(e.type="JSON",e.data=JSON.parse(t)):this.isValidDelimitedFile(t)&&(e.type="DELIM",e.data=this.delimitedToArray(t,!1,!0,"Network"==this.graphType)),e},this.loadParamsFile=function(t){return function(e){t.removeMenus();var i=e.target.files[0],s=(i.type,i.name.split(".")),a=new FileReader;"json"==s.pop()?(a.onload=function(){try{var i=t.parseJSON(a.result);for(var s in t.setConfigDefaults(),t.layoutValid=!1,i.config)t[s]=i.config[s];if(i.afterRender)for(var r=0;r<i.afterRender.length;r++){var n=i.afterRender[r],o=n[0],h=n[1]||[];t[o].apply(t,h)}else t.draw({func:"loadParamsFile",par:e})}catch(t){alert("Oooops! Not a valid CanvasXpress json parameter file")}},a.readAsText(i)):alert("Oooops! Not a valid CanvasXpress json parameter file")}}(this),this.parseDataFromPNG=function(t){var e=new DataView(t),i=e.getUint32(8),s=e.getUint32(16+i+4);if(function(t,e){for(var i="",s=0;s<4;s++)i+=String.fromCharCode(t.getUint8(e+s));return"tEXt"==i}(e,16+i+4+4)&&function(t,e,i){for(var s="",a=0;a<i;a++)s+=String.fromCharCode(t.getUint8(e+a));return s.match(/CanvasXpress/)}(e,16+i+4+4+4,s)){for(var a=e.getUint32(16+i+4+4+4+s+4),r=16+i+4+4+4+s+4+4+4,n="",o=0;o<a;o++)n+=String.fromCharCode(e.getUint8(r+o));return n=n.replace("ReproducibleResearch\0",""),this.parseJSON(n)}alert("Oooops! Not a valid CanvasXpress Image")},this.parseNodeLinks=function(t){for(var e=[],i=[],s=[],a=[],r=0;r<t.links.length;r++){var n=t.links[r];n.source&&n.target&&n.value&&(s.push(n.source),a.push(n.target),i.push(n.value),e.push("Smp"+(r+1)))}return{renderTo:"newSankey",data:{y:{vars:["Weight"],smps:e,data:[i]},x:{Source:s,Target:a}},config:{graphType:"Sankey",sankeySource:"Source",sankeyTarget:"Target"}}},this.parseHierarchy=function(t){var e=this;return function(i){for(var s=0,a=[],r=[],n={},o=function(t,i,h,l){return Array.prototype.concat.apply(t.map((function(t){n.hasOwnProperty(t.name)||(n[t.name]=0),n[t.name]++,n[t.name]>1&&(t.name+=n[t.name]);var i=e.cloneObject(t);return i.level=h||1,i.parent=l||null,i})),t.map((function(t){return s=Math.max(s,(h||1)+1),t.children||(a.push(t.name),r.push(t.value||1)),o(i(t)||[],i,(h||1)+1,t.name)})))},h=function(t){return t.children||null},l=o(h(i),h).map((function(t){return t.n=t.children?t.children.length:0,delete t.children&&t})),c={y:{vars:["Dummy"],smps:a,data:[r]},x:{}},d=0;d<c.y.smps.length;d++)for(var p=0;p<l.length;p++)if(!l[p].n&&c.y.smps[d]==l[p].name){l[p].smp=d;break}var g=[],u=t.name;c.x[u]=[],g.push(u);for(d=2;d<s-1;d++)c.x[u+d]=[],g.push(u+d);var m={};for(d=0;d<l.length;d++)m[l[d].name]=d;for(d=0;d<g.length;d++)for(p=0;p<c.y.smps.length;p++)c.x[g[d]][p]=null;for(d=0;d<l.length;d++)if(l[d].parent){var f=m[l[d].parent],y=l[d].smp,x=l[d].level-1,v=l[f].parent;for(c.x[u+(x>1?x:"")][y]=l[f].name;v;)x=l[f=m[v]].level,c.x[u+(x>1?x:"")][y]=l[f].name,v=l[f].parent}return{renderTo:"newTree",data:c,config:{graphType:"Tree",hierarchy:g}}}(t)},this.loadFile=function(t){return function(e,i,s,a){t.removeMenus(),t.showMask();var r=function(e){if(e.config&&e.config.backgroundImage&&e.config.backgroundImage.match(/^javascript:\/\//)&&e.config.backgroundImageSrc){var i=new Image;i.id=e.config.backgroundImage.split("//")[1],i.style.display="none",i.src="data:image/png;base64,"+atob(e.config.backgroundImageSrc),document.body.appendChild(i),CanvasXpress.cacheImages[t.getFileName(i.src)]=i}},n=a||(e.target?e.target.files[0]:e.files[0]),o=n.type,h=n.name.split("."),l=new FileReader;if("image/png"==o){l.onload=function(){var e=new DataView(this.result),a=e.getUint32(8),n=e.getUint32(16+a+4);if(function(t,e){for(var i="",s=0;s<4;s++)i+=String.fromCharCode(t.getUint8(e+s));return"tEXt"==i}(e,16+a+4+4)&&function(t,e,i){for(var s="",a=0;a<i;a++)s+=String.fromCharCode(t.getUint8(e+a));return s.match(/CanvasXpress/)}(e,16+a+4+4+4,n)){for(var o=e.getUint32(16+a+4+4+4+n+4),h=16+a+4+4+4+n+4+4+4,l="",c=0;c<o;c++)l+=String.fromCharCode(e.getUint8(h+c));l=l.replace("ReproducibleResearch\0","");var d=t.parseJSON(l);if(i)return d;r(d),d.hasOwnProperty("config")&&delete d.config.remoteService,d.uploadFile=!0,t.remoteServiceType="file",t.updateRemoteData(d,s),t.hideMask()}else t.hideMask(),alert("Oooops! Not a valid CanvasXpress Image")},l.readAsArrayBuffer(n)}else if("application/x-bzip2"==o)l.onload=function(){var e=t.bz2(this.result);if(h[1].match(/ml$/))try{var i=t.parseXML(e);t.loadXML(i,h[0])}catch(e){t.hideMask(),alert("Oooops! Not a valid bz2 file for CanvasXpress")}else t.hideMask(),alert("Oooops! Not a valid bz2 file for CanvasXpress")},l.readAsBinaryString(n);else{var c=h.pop();"json"==c?l.onload=function(){try{var n=t.parseJSON(l.result);if(r(n),n.data||n&&n.config&&n.config.graphType&&"Map"==n.config.graphType)n.config.topoJSON&&n.config.mapId&&(delete window[n.config.mapId],delete t.meta.map,delete t.topoJSON,delete t.topoJSONURL),n.uploadFile=!0,t.remoteServiceType="file",t.updateRemoteData(n,s),t.hideMask();else if(n.config){for(var o in t.setConfigDefaults(),t.layoutValid=!1,n.config)t[o]=n.config[o];if(n.afterRender)for(var h=0;h<n.afterRender.length;h++){var c=n.afterRender[h],d=c[0],p=c[1]||[];t[d].apply(t,p)}else t.draw({func:"loadFile",par:[e,i,s,a]})}else if(n.children&&n.children.length)(n=t.parseHierarchy(n)).uploadFile=!0,t.remoteServiceType="file",t.updateRemoteData(n,s),t.hideMask();else if(n.nodes&&n.links)(n=t.parseNodeLinks(n)).uploadFile=!0,t.remoteServiceType="file",t.updateRemoteData(n,s),t.hideMask();else if(n.type&&n.type.match(/FeatureCollection|Topology/)){var g={data:!1,config:{graphType:"Map",topoJSON:n,mapId:"cXMap"}};window.cXMap=n,t.updateData(g),t.hideMask()}else n.error.error}catch(e){t.hideMask(),alert("Oooops! Not a valid CanvasXpress json file")}}:"geojson"==c?l.onload=function(){try{var e=t.parseJSON(l.result);if(e.type&&e.type.match(/FeatureCollection|Topology/)){var i={data:!1,config:{graphType:"Map",topoJSON:e,mapId:"cXMap"}};window.cXMap=e,t.updateData(i),t.hideMask()}else e.error.error}catch(e){t.hideMask(),alert("Oooops! Not a valid geojson file")}}:"svg"==c?l.onload=function(){try{var e=t.SVGtoCX(l.result);e.uploadFile=!0,t.remoteServiceType="file",t.updateRemoteData(e,s),t.hideMask()}catch(e){t.hideMask(),alert("Oooops! Not a valid CanvasXpress json file")}}:"txt"==c||"csv"==c||"tsv"==c||"tab"==c?l.onload=function(){try{var e=l.result,i=0,a=0;e.match(/,/g)&&(i=e.match(/,/g).length),e.match(/\t/g)&&(a=e.match(/\t/g).length);var r,n="csv"==c&&i>a?",":"\t";if("Network"==t.graphType){if((r=t.delimitedToArray(e,n,!1,!0))&&!t.isArray(r)){var o="";return r.fail>0&&(o=r.fail+" records couldn't be mapped to network data"),alert(r.rows+" "+r.type+" records added to network data\n"+o),"node"==r.type?t.appendNodeData(r.data):t.appendEdgeData(r.data),void t.hideMask()}r=t.arrayToCanvasXpress(r)}else{if((r=t.isMetaDataFile(t.delimitedToArray(e,n),"Map"==t.graphType))&&!t.isArray(r))return r.addt?alert(r.recs+" records added as an additional data set\n"):alert(r.recs+" records added to meta data\n"),t.appendMetaData(r.data,r.addt),void t.hideMask();r=t.arrayToCanvasXpress(r)}r.renderTo=h[0].replace(/\s/g,"").replace(/\(/g,"").replace(/\)/g,""),r.uploadFile=!0,t.remoteServiceType="file",t.updateRemoteData(r,s),t.hideMask()}catch(e){t.hideMask(),alert("Oooops! Not a valid CanvasXpress delimited file")}}:"esv"==c?l.onload=function(){try{var e=l.result,i=0,a=0;e.match(/,/g)&&(i=e.match(/,/g).length),e.match(/\t/g)&&(a=e.match(/\t/g).length);var r=i>a?",":"\t",n=t.delimitedToArray(e,r,!1,!0,"edge");n.renderTo=h[0],n.uploadFile=!0,t.remoteServiceType="file",t.updateRemoteData(n,s),t.hideMask()}catch(e){t.hideMask(),alert("Oooops! Not a valid CanvasXpress delimited file")}}:"gml"==c?l.onload=function(){try{var e=t.parseGML(l.result);e.renderTo=h[0],e.uploadFile=!0,t.remoteServiceType="file",t.updateRemoteData(e,s),t.hideMask()}catch(e){t.hideMask(),alert("Oooops! Not a valid gml file for CanvasXpress")}}:"gexf"==c?l.onload=function(){t.remoteServiceType="file";try{var e=t.parseXML(l.result);t.gexfToCX(e,h[0])}catch(e){t.hideMask(),alert("Oooops! Not a valid "+c+" file for CanvasXpress")}}:c.match(/ml$/)&&(l.onload=function(){try{var e=t.parseXML(l.result);t.loadXML(e,h[0])}catch(e){t.hideMask(),alert("Oooops! Not a valid "+c+" file for CanvasXpress")}}),l.readAsText(n)}}}(this),this.loadXML=function(t,e,i,s){this.remoteServiceType="file";var a=t.childNodes[0],r=t.childNodes[2]||t.childNodes[1];a.tagName&&"map"==a.tagName.toLowerCase()?this.metabaseToCX(t,e,i,s):a.tagName&&"graph"==a.tagName.toLowerCase()?this.cytoscapeToCX(t,e,i,s):a.tagName&&"pathway"==a.tagName.toLowerCase()?this.wikipathwayToCX(t,e,i,s):r&&r.tagName&&"pathway"==r.tagName.toLowerCase()&&this.keggToCX(t,e,i,s)},this.editJSFiddle=function(t){return function(e,i){if(t.editable||i){t.removeMenus();var s="onReady(function () {\n"+t.getCodeJSONJS()+"})",a="<link rel='stylesheet' href='https://www.canvasxpress.org/dist/canvasXpress.css' type='text/css'/>\n";a+="<script type='text/javascript' src='https://www.canvasxpress.org/dist/canvasXpress.min.js'><\/script>\n\n",a+="<canvas id='"+t.target+"' width='"+t.width+"' height='"+t.height+"'></canvas>";var r=t.$cX("form",{id:"submitToJSFiddle",method:"post",action:"https://jsfiddle.net/api/post/library/pure/",target:"check"},{display:"none"});document.body.appendChild(r);var n=t.$cX("textarea",{name:"title",value:t.title||"CanvasXpress"}),o=t.$cX("textarea",{name:"html",value:a}),h=t.$cX("textarea",{name:"js",value:s}),l=t.$cX("button",{type:"submit"});r.appendChild(n),r.appendChild(o),r.appendChild(h),r.appendChild(l),l.click(),document.body.removeChild(r)}}}(this),this.editCodePen=function(t){return function(e,i){if(t.editable||i){t.removeMenus();var s="onReady(function () {\n"+t.getCodeJSONJS().replace(/\'/g,"")+"})",a='<link rel="stylesheet" href="https://www.canvasxpress.org/dist/canvasXpress.css" type="text/css"/>\n';a+='<script type="text/javascript" src="https://www.canvasxpress.org/dist/canvasXpress.min.js"><\/script>\n\n',a+='<canvas id="'+t.target+'" width="'+t.width+'" height="'+t.height+'"></canvas>';var r="https://www.canvasxpress.org/dist/canvasXpress.css;https://www.canvasxpress.org/dist/canvasXpress.min.js",n=t.title;n='{"title": "CanvasXpress", "html": "'+a.replace(/"/g,"'")+'", "js": "'+s.replace(/"/g,"'")+'", "js_external": "'+r.replace(/"/g,"'")+'"}';var o=t.$cX("form",{id:"submitToCodePen",method:"post",action:"https://codepen.io/pen/define",target:"_blank"},{display:"none"});document.body.appendChild(o);var h=t.$cX("input",{type:"hidden",name:"data",value:n}),l=t.$cX("button",{type:"submit"});o.appendChild(h),o.appendChild(l),l.click(),document.body.appendChild(o)}}}(this),this.saveCurrent=function(){this.resortData();for(var t=CanvasXpress.stack[this.target],e=t.afterRender,i=[],s=0;s<e.length;s++)e[s][0].match(/^sort/)&&i.push(this.cloneObject(e[s]));return this.prettyJSON({renderTo:t.renderTo,data:this.data,config:this.getConfig(),afterRender:i,factory:t.factory,system:t.system,version:t.version})},this.save=function(t){return function(e,i,s,a){t.removeMenus();var r,n=i?i+".json":t.saveFilename?t.saveFilename+".json":"cX-"+t.target+".json";n=n.replace(/.json.json$/,".json"),CanvasXpress.stack[t.target].factory=CanvasXpress.factory,CanvasXpress.stack[t.target].system=CanvasXpress.system,r=s?t.prettyJSON({config:CanvasXpress.stack[t.target].config,afterRender:CanvasXpress.stack[t.target].afterRender||[]}):a||e&&(e.ctrlKey||e.altKey)?t.saveCurrent():t.prettyJSON(t.cleanDataObject(t.cloneObject(CanvasXpress.stack[t.target])));var o=new Blob([r],{type:"text/plain"});t.saveAs(o,n)}}(this),this.saveSVG=function(t){return function(e,i){t.removeMenus(),CanvasXpress.stack[t.target].factory=CanvasXpress.factory,CanvasXpress.stack[t.target].system=CanvasXpress.system,t.isSVG=!0;var s=t.showTransition;t.showTransition=!1,t.meta.canvas.SVG=new this.canvasToSVG({width:t.width,height:t.height,desc:t.isReproducibleResearch?t.prettyJSON(t.cleanDataObject(t.cloneObject(CanvasXpress.stack[t.target]))):""}),t.renderGraph(!0);var a=t.meta.canvas.SVG.getSerializedSvg();t.isReproducibleResearch&&t.flashInfoSpan(100,100,"<h2>Please be aware <br>the actual data is stored<br>inside the downloaded image</h2>",5e3);var r=i?i+".svg":t.saveFilename?t.saveFilename+".svg":"cX-"+t.target+".svg";r=r.replace(/.svg.svg$/,".svg");var n=new Blob([a],{type:"image/svg+xml"});t.saveAs(n,r),t.showTransition=s,delete t.meta.canvas.SVG,t.isSVG=!1}}(this),this.parseXML=function(t){var e=null;if(window.DOMParser)try{e=(new DOMParser).parseFromString(t,"text/xml")}catch(t){e=null}else if(window.ActiveXObject)try{(e=new ActiveXObject("Microsoft.XMLDOM")).async=!1,e.loadXML(t)||window.alert(e.parseError.reason+e.parseError.srcText)}catch(t){e=null}else alert("cannot parse xml string!");return e},this.parseHTMLTable=function(t,e){for(var i=[],s=0;s<t.rows.length;s++){for(var a=[],r=0;r<t.rows.item(s).cells.length;r++)a.push(t.rows.item(s).cells.item(r).innerHTML);i.push(a)}return e?(e=this.arrayToCanvasXpress(i),CanvasXpress.transferDatasetAttributes(t,e.config,!0),e):i},this.SVGtoCX=function(t){var e=this.parseXML(t).childNodes[0];if(e.tagName.match(/svg/i)){var i=e.getAttribute("desc");if(i)return this.parseJSON(i)}},this.arrayBufferToBase64=function(t){for(var e="",i=new Uint8Array(t),s=i.byteLength,a=0;a<s;a++)e+=String.fromCharCode(i[a]);return window.btoa(e)},this.base64ToArrayBuffer=function(t){for(var e=window.atob(t),i=e.length,s=new Uint8Array(i),a=0;a<i;a++)s[a]=e.charCodeAt(a);return s.buffer},this.bz2=function(t){function e(t,e){var i=t.length;if(e>=i)throw RangeError("Out of bound");if(e<0)throw RangeError("Out of bound");var s=t;t=t.join(""),s.sort();for(var a={},r=i-1;r>=0;r--)a[s[r]]=r;var n=[];for(r=0;r<i;r++)n.push(a[t[r]]++);for(var o=s[r=e],h=[],l=1;l<i;l++)h.push(s[r=n[r]]);return o+h.reverse().join("")}function i(t,e,i){for(var s=t[e],a=e;a>0;t[a]=t[--a]);i.push(t[0]=s)}var s=function(){this.init=function(t){this.masks=[];for(var e=0;e<31;e++)this.masks[e]=(1<<e)-1;this.masks[31]=-2147483648,this.f=t,this.bits=0,this.bitfield=0,this.count=0},this.readbits2=function(t){var e=t>>1;return this.readbits(e)*(1<<e)+this.readbits(t-e)},this.readbits=function(t){for(;this.bits<t;)this.bitfield=(this.bitfield<<8)+this.f.charCodeAt(this.count++),this.bits+=8;var e=this.masks[t],i=this.bitfield>>this.bits-t&e;return this.bits-=t,this.bitfield&=~(e<<this.bits),i}},a=function(t,e){this.code=t,this.bits=e,this.symbol=void 0},r=function(){this.process=function(t){for(var e=t.length,i=[],s=0;s<e;s++)i.push([s,t[s]]);i.push([e,-1]);for(var r=[],n=i[0],o=n[0],h=n[1],l=1;l<i.length;l++){var c=i[l][0],d=i[l][1];if(h)for(var p=o;p<c;p++)r.push(new a(p,h));if(o=c,h=d,-1==d)break}r.sort((function(t,e){return t.bits-e.bits||t.code-e.code})),this.table=r;var g=0,u=-1;this.faht=[];var m=null;for(s=0;s<this.table.length;s++){var f=this.table[s];u+=1,f.bits!=g&&(u<<=f.bits-g,m=this.faht[g=f.bits]={}),m[f.symbol=u]=f}this.min_bits=16,this.max_bits=-1,this.table.forEach((function(t){t.bits<this.min_bits&&(this.min_bits=t.bits),t.bits>this.max_bits&&(this.max_bits=t.bits)}),this)}};return function(t){var a=new s;if(a.init(t),a.readbits(16),104!=a.readbits(8))throw"Unknown (not type 'h'uffman Bzip2) compression method";var n=a.readbits(8);if(!(49<=n&&n<=57))throw"Unknown (not size '1'-'9') Bzip2 blocksize";function o(t){for(var e=[],i=t.readbits(16),s=32768;s>0;s>>=1)if(i&s)for(var a=t.readbits(16),r=32768;r>0;r>>=1)e.push(Boolean(a&r));else for(var n=0;n<16;n++)e.push(!1);return e}n-=48;var h=[];return function(){for(;;){var t=a.readbits2(48);a.readbits2(32);if(54156738319193!=t){if(25779555029136==t){a.readbits(7&a.bits);break}throw"Illegal Bzip2 blocktype = 0x"+t.toString(16)}if(a.readbits(1))throw"Bzip2 randomised support not implemented";var s=a.readbits(24),n=o(a),l=a.readbits(3);if(2>l||l>6)throw RangeError("Bzip2: Number of Huffman groups not in range 2..6");for(var c=[0,1,2,3,4,5,6].slice(0,l),d=[],p=0,g=a.readbits(15);p<g;p++){for(var u=0;a.readbits(1);)if(u++>=l)throw RangeError("More than max ("+l+") groups");i(c,u,d)}for(var m=[],f=n.reduce((function(t,e){return t+e}),0)+2,y=0;y<l;y++){var x=a.readbits(5),v=[];for(p=0;p<f;p++){if(x<0||x>20)throw RangeError("Bzip2 Huffman length code outside range 0..20");for(;a.readbits(1);)x-=2*a.readbits(1)-1;v.push(x)}m.push(v)}for(var b=[],A=0;A<m.length;A++){var w=new r;w.process(m[A]),b.push(w)}var C=[];for(u=n.length-1;u>=0;u--)n[u]&&C.push(String.fromCharCode(u));C.reverse();for(var T,S,M=0,D=0,k=0,L=0,I=[];;){for(var z in--D<=0&&(D=50,M<=d.length&&(T=b[d[M++]])),T.faht)if(a.bits<z&&(a.bitfield=(a.bitfield<<8)+a.f.charCodeAt(a.count++),a.bits+=8),S=T.faht[z][a.bitfield>>a.bits-z]){a.bitfield&=a.masks[a.bits-=z],S=S.code;break}if(0<=S&&S<=1)0==k&&(L=1),k+=L<<S,L<<=1;else{for(var N=C[0];k>0;k--)I.push(N);if(S==f-1)break;i(C,S-1,I)}}for(var B=e(I,s),P=[],R=(p=0,B.length);p<R;){u=B.charCodeAt(p);if(p<R-4&&B.charCodeAt(p+1)==u&&B.charCodeAt(p+2)==u&&B.charCodeAt(p+3)==u){u=B.charAt(p);for(var O=B.charCodeAt(p+4)+4;O>0;O--)P.push(u);p+=5}else P.push(B[p++])}h.push(P.join(""))}}(),h.join("")}(t)},this.print=function(t){return function(e,i,s){var a=window,r=t.width,n=t.height,o=t.printMagnification,h=t.autoScaleFont,l=t.showTransition,c=t.skipStack,d=["outlineWidth","lineThickness","xAxisTickSize","yAxisTickSize","zAxisTickSize","xAxisTickLeftSize","xAxisTickRightSize","yAxisTickTopSize","yAxisTickBottomSize","guidesWidth","boxplotMedianWidth","boxplotConnectWidth","treeLinkWidth","connectByWidth","histogramBarWidth","heatmapCellBoxWidth","heatmapCellBoxHighlightWidth","edgeThickness","maxTextSize","treemapBorderWidth","errorBarsThickness","ganttDependencyThickness"];CanvasXpress.stack.hasOwnProperty(t.target)||(t=CanvasXpress.getObject(CanvasXpress.current.replace("-events","")));var p=function(e){if(e&&1!=o){for(var i=0;i<d.length;i++)t[d[i]]/=o;t.autoScaleFont=h,t.showTransition=l,t.setDimensions(r,n,!0),t.skipStack=c}else if(1!=o){t.skipStack=!0,t.showTransition=!1;for(i=0;i<d.length;i++)t[d[i]]*=o;t.autoScaleFont=!0,t.setDimensions(r*o,n*o,!0)}},g=function(t,e){var i=new Uint8Array(t.byteLength+e.byteLength);return i.set(new Uint8Array(t),0),i.set(new Uint8Array(e),t.byteLength),i.buffer},u=function(t){var e=t.length,i=function(t){for(var e=a.crcTable||(a.crcTable=function(){for(var t,e=[],i=0;i<256;i++){t=i;for(var s=0;s<8;s++)t=1&t?3988292384^t>>>1:t>>>1;e[i]=t}return e}()),i=-1,s=0;s<t.length;s++)i=i>>>8^e[255&(i^t.charCodeAt(s))];return(-1^i)>>>0}("tEXt"+t),s=new ArrayBuffer(12+e),r=new DataView(s);r.setUint32(0,e);for(var n=0;n<"tEXt".length;n++)r.setUint8(4+n,"tEXt".charCodeAt(n));for(n=0;n<t.length;n++)r.setUint8(8+n,t.charCodeAt(n));return r.setUint32(8+e,i),s};p(),t.removeMenus(),CanvasXpress.stack[t.target].factory=CanvasXpress.factory,CanvasXpress.stack[t.target].system=CanvasXpress.system,CanvasXpress.factory.valid||t.$$$("CanvasXpress"),t.meta.canvas.ctx.canvas.toBlob((function(a){var r=new FileReader,n=i?i+".png":t.saveFilename?t.saveFilename+".png":"cX-"+t.target+".png";n=n.replace(/.png.png$/,".png"),r.onloadend=function(){var i=16+new DataView(this.result).getUint32(8)+4,a=this.result.slice(0,i),r=this.result.slice(i),o=function(t,e,i,s){var a=g(t,e);return a=g(a,i),a=g(a,s)}(a,u("Software\0CanvasXpress Version: "+CanvasXpress.factory.version),u("ReproducibleResearch\0"+function(){if(t.isReproducibleResearch)return 1!=t.printMagnification&&delete CanvasXpress.stack[t.target].config.showTransition,e&&(e.ctrlKey||e.altKey)?t.saveCurrent():t.stringifyJSON(t.cleanDataObject(t.cloneObject(CanvasXpress.stack[t.target])));var i=t.parseJSON(e.ctrlKey||e.altKey?t.saveCurrent():t.stringifyJSON(CanvasXpress.stack[t.target]));return i.afterRender=[i.afterRender[0]],t.stringifyJSON(i)}()),r),h=new Blob([o],{type:"image/png"});t.meta.base64=t.arrayBufferToBase64(o),s?s(h,n):"download"==t.printType?(t.isReproducibleResearch&&t.flashInfoSpan(100,100,"<h2>Please be aware <br>the actual data is stored<br>inside the downloaded image</h2>",5e3),t.saveAs(h,n)):function(i){var s=new FileReader,a="";t.isReproducibleResearch?a+="<h2>Please be aware that the actual data is stored inside the image! Right click to save!</h2>":a+="<h2>Right click to save image</h2>",s.onload=function(i){a+="<img width="+t.width+" height="+t.height+" src= '"+i.target.result+"'/>",t.showTooltipDiv(e,a,t.getTargetEvent(e),{maxWidth:t.width+"px",whiteSpace:"normal"},40,40)},s.readAsDataURL(i)}(h),p(!0)},r.readAsArrayBuffer(a)}),"image/png"),t.customizing||t.maximized&&t.clickGraphMaxMin(e)}}(this),this.exportToSVG=function(t){return function(e){var i=t.meta.canvas.ctx;t.meta.canvas.ctx=new this.canvasToSVG({width:t.width,height:t.height}),t.draw({func:"exportToSVG",par:[e]});var s=t.prettyXML(t.meta.canvas.ctx.getSerializedSvg());return window.open("",t.target+"-SVG").document.write(s),t.meta.canvas.ctx=i,t.draw({func:"exportToSVG",par:[e]}),!1}}(this),this.exportToExcel=function(t){return this.exportToTabDelimited(t)},this.exportToHTML=function(t,e){for(var i="<table>",s=0;s<t.length;s++)i+="<tr><td>",i+=t[s].join("</td><td>"),i+="</td></tr>";return i+="</table>",e?i:window.open().document.write(i)},this.exportToTabDelimited=function(t){for(var e="",i=0;i<t.length;i++)e+=t[i].join("\t")+"\n";var s=this.$(this.target+"-cX-linkTab");s||(s=this.$cX("a",{id:this.target+"-cX-linkTab"},{display:"none"}),window.document.body.appendChild(s)),s.download=this.target+".tsv",s.href="data:text/tab-separated-values;charset=UTF-8,"+encodeURIComponent(e),s.click()},this.arrayToHTML=function(t){var e="";if(t[0].length){e+='<div class="CanvasXpressDataTableContainer" style="overflow:scroll;max-height:400px;max-width:600px;position:inherit;padding-left:18px;">',e+='<table class="CanvasXpressDataTable" style="position:inherit;">',e+="<tbody>",e+="<tr>";for(var i=0;i<t[0][0].length;i++)e+='<th class="CanvasXpressTableCellHead" style="height:18px">',e+='<div class="CanvasXpressTableCell" style="height:18px">',e+=t[0][0][i],e+="</div>",e+="</th>";e+="</tr>";for(i=1;i<t[0].length;i++){e+="<tr>";for(var s=0;s<t[0][i].length;s++)0==s?(e+='<th class="CanvasXpressTableCellHead" style="height:18px">',e+='<div class="CanvasXpressTableCell" style="height:18px">',e+=t[0][i][s],e+="</div>",e+="</th>"):(t[2]&&t[2][i]&&t[2][i][s]?e+='<td class="CanvasXpressTableCell" style="height:18px;background-color:'+t[2][i][s]+'">':e+='<td class="CanvasXpressTableCell" style="height:18px">',e+='<div class="CanvasXpressTableCell" style="height:18px">',e+=t[0][i][s],e+="</div>",e+="</td>");e+="</tr>"}e+="</tbody>",e+="</table>",e+="</div>"}return e},this.rToPrettyR=function(t){for(var e=[],i=t.split(/\n(?=(?:(?:[^"]*"){2})*[^"]*$)/),s=["header","quote","row.names","fill","check.names","stringsAsFactors"],a=!1,r=0;r<i.length;r++){var n=i[r];if(n.match(/library\(canvasXpress\)/))e.push(n.replace("library(canvasXpress)",'library(<span class="json-value">canvasXpress</span>)'));else if(n.match(/canvasXpress\(/))e.push(n.replace("canvasXpress(",'<span class="json-value">canvasXpress</span>(')),a=!0;else if(n.match(/\"http.+\"/)){n=n.replace(/(\"http.+?\")/,'<span class="json-string">$1</span>');for(var o=0;o<s.length;o++)n=n.replace(s[o],'<span class="json-key">'+s[o]+"</span>");n=(n=(n=(n=(n=n.replace('""','<span class="json-string">""</span>,')).replace(/\"\t\"/,'<span class="json-string">"&#92;t"</span>')).replace("=1,",'=<span class="json-number">1</span>,')).replace(/FALSE/g,'<span class="json-boolean">FALSE</span>')).replace(/TRUE/g,'<span class="json-boolean">TRUE</span>'),e.push(n)}else a&&(n.match(/\".+?\"/)?n=n.replace(/(\".+?\")/g,'<span class="json-string">$1</span>'):n.match(/[^xis][\d\.]+/)&&(n=n.replace(/([\d\.]+)/,'<span class="json-number">$1</span>')),n=(n=(n=(n=n.replace(/\n/,"&#92;n")).replace(/(\w+)?=/,'<span class="json-key">$1=</span>')).replace(/FALSE/g,'<span class="json-boolean">FALSE</span>')).replace(/TRUE/g,'<span class="json-boolean">TRUE</span>')),e.push(n)}return'<pre class="CanvasXpressCodeContent">\n<code>'+e.join("</code>\n<code>")+"</code>\n</pre>"},this.prettyColoredR=function(t,e,i){var s=this.stringifyJSON(t,e||null,2);return s.length>1e4&&(i=!1),i&&(s=s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),(s=s.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,(function(t){var e="number";return/^"/.test(t)?/:$/.test(t)?(t=t.replace(/"/g,"").replace(":"," ="),e="key"):e="string":/true|false/.test(t)?(t=t.replace("false","FALSE").replace("true","TRUE"),e="boolean"):/null/.test(t)&&(t=t.replace("null","NULL"),e="null"),i?'<span class="json-'+e+'">'+t+"</span>":t}))).replace(/\[/g,"list(").replace(/]/g,")").replace(/{/g,"list(").replace(/}/g,")").replace(/^list\(\n/,"").replace(/\)$/,"")},this.dataToR=function(){var t,e,i=[],s=[],a="",r=CanvasXpress.stack[this.target].data,n="<span class=json-value>canvasXpress</span>(\n";if(this.meta.config.remote&&!this.isObject(this.meta.config.remote.data))!1===this.meta.config.remote.data?a+="data = FALSE\n":a+='data = "'+this.meta.config.remote.data+'"\n',n+="  <span class=json-key>data</span> = data,\n";else if("Map"!=this.graphType||this.isObject(this.meta.config.remote.data)){if(r.y){i=[];for(var o=0;o<r.y.vars.length;o++){for(var h=[],l=0;l<r.y.smps.length;l++)h.push(null!=r.y.data[o][l]?r.y.data[o][l]:"NA");i.push("<span class=json-number>"+h.join("</span>,<span class=json-number>")+"</span>,")}i[i.length-1]=i[i.length-1].replace(/,$/,""),a+=(e="vals = c("+i.join("\n")+")\n")+('vars = c(<span class=json-string>"'+r.y.vars.join('"</span>,\n<span class=json-string>"')+'"</span>)\n')+('smps = c(<span class=json-string>"'+r.y.smps.join('"</span>,\n<span class=json-string>"')+'"</span>)\n')+("data = as.data.frame(matrix(vals, <span class=json-key>nrow</span> = <span class=json-number>"+r.y.vars.length+"</span>, <span class=json-key>ncol</span> = <span class=json-number>"+r.y.smps.length+"</span>, <span class=json-key>byrow</span> = <span class=json-boolean>TRUE</span>, <span class=json-key>dimnames</span> = list(vars, smps)))\n"),n+="  <span class=json-key>data</span> = data,\n"}if(r.x){for(var o in i=[],s=[],e="",r.x)"Numeric"==this.meta.data.x[o].type?i.push("<span class=json-number>"+r.x[o].join("</span>,\n<span class=json-number>")+"</span>,"):i.push('<span class=json-string>"'+r.x[o].join('"</span>,\n<span class=json-string>"')+'"</span>,'),s.push(o);i[i.length-1]=i[i.length-1].replace(/,$/,""),e="valx = c("+i.join("\n ")+")\n","Tree"==this.graphType&&(e=e.replace(/\"\"/g,"NA")),a+=e+('varx = c(<span class=json-string>"'+s.join('"</span>,<span class=json-string>"')+'"</span>)\n')+("datx = as.data.frame(matrix(valx, <span class=json-key>nrow</span> = <span class=json-number>"+s.length+"</span>, <span class=json-key>ncol</span> = <span class=json-number>"+r.y.smps.length+"</span>, <span class=json-key>byrow</span> = <span class=json-boolean>TRUE</span>, <span class=json-key>dimnames</span> = list(varx, smps)))\n"),n+="  <span class=json-key>smpAnnot</span> = datx,\n"}if(r.z){for(var o in i=[],s=[],e="",r.z)"Numeric"==this.meta.data.z[o].type?i.push("<span class=json-number>"+r.z[o].join("</span>,\n<span class=json-number>")+"</span>,"):i.push('<span class=json-string>"'+r.z[o].join('"</span>,\n<span class=json-string>"')+'"</span>,'),s.push(o);i[i.length-1]=i[i.length-1].replace(/,$/,""),a+=(e="valz = c("+i.join("\n ")+")\n")+('smpz = c(<span class=json-string>"'+s.join('"</span>,<span class=json-string>"')+'"</span>)\n')+("datz = as.data.frame(matrix(valz, <span class=json-key>nrow</span> = <span class=json-number>"+r.y.vars.length+"</span>, <span class=json-key>ncol</span> = <span class=json-number>"+s.length+"</span>, <span class=json-key>byrow</span> = <span class=json-boolean>FALSE</span>, <span class=json-key>dimnames</span> = list(vars, smpz)))\n"),n+="  <span class=json-key>varAnnot</span> = datz,\n"}r.nodes&&(a+="nodes = list(\n"+this.prettyColoredR(r.nodes,(function(t,e){if("layout"!=t)return e}),!0)+")\n",n+="  <span class=json-key>nodeData</span> = nodes,\n"),r.edges&&(a+="edges = list(\n"+this.prettyColoredR(r.edges,!1,!0)+")\n",n+="  <span class=json-key>edgeData</span> = edges,\n"),r.venn&&(a+="venn = data.frame(\n"+this.prettyColoredR(r.venn.data,!1,!0)+")\n",n+="  <span class=json-key>vennData</span> = venn,\n",r.venn.legend&&(a+="legn = data.frame(\n"+this.prettyColoredR(r.venn.legend,!1,!0)+")\n",n+="  <span class=json-key>vennLegend</span> = legn,\n")),r.tracks&&(n+="  <span class=json-key>tracks</span> = genome,\n",a+="genome = list(\n"+this.prettyColoredR(r.tracks,!1,!0)+")\n")}else a+="",n+="  <span class=json-key>data</span> = <span class=json-value>FALSE</span>,\n";return t=this.meta.config.remote?this.cloneObject(this.meta.config.remote.config):this.cloneObject(CanvasXpress.stack[this.target].config),CanvasXpress.stack[this.target].afterRender&&CanvasXpress.stack[this.target].afterRender.length>1&&(t.afterRender=this.cloneObject(CanvasXpress.stack[this.target].afterRender)),"<code> "+("library(<span class=json-value>canvasXpress</span>)\n"+a+(n+=this.prettyColoredR(t,!1,!0)+")")).replace(/\n/g,"</code>\n<code> ")+"</code>"},this.prettyJSON=function(t,e,i,s){return i&&t?this.prettyColoredJSON(t,e):!!t&&this.stringifyJSON(t,e,s||2)},this.prettyColoredJSON=function(t,e){if(t){var i=this.stringifyJSON(t,e||null,2);return i.length>1e4?i:(i=i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,(function(t){var e="number";return/^"/.test(t)?e=/:$/.test(t)?"key":"string":/true|false/.test(t)?e="boolean":/null/.test(t)&&(e="null"),'<span class="json-'+e+'">'+t+"</span>"}))}return!1},this.prettyXML=function(t){for(var e="",i=t.replace(/(>)\s*(<)(\/*)/g,"$1\n$2$3").replace(/ *(.*) +\n/g,"$1\n").replace(/(<.+>)(.+\n)/g,"$1\n$2").split("\n"),s=0,a="other",r={"single->single":0,"single->closing":-1,"single->opening":0,"single->other":0,"closing->single":0,"closing->closing":-1,"closing->opening":0,"closing->other":0,"opening->single":1,"opening->closing":0,"opening->opening":1,"opening->other":1,"other->single":0,"other->closing":-1,"other->opening":0,"other->other":0},n=0;n<i.length;n++){var o=i[n],h=Boolean(o.match(/<.+\/>/)),l=Boolean(o.match(/<\/.+>/)),c=Boolean(o.match(/<[^!].*>/)),d=h?"single":l?"closing":c?"opening":"other",p=a+"->"+d;a=d;var g="";s+=r[p];for(var u=0;u<s;u++)g+="  ";e+=g+o+"\n"}return e},this.dataToPython=function(t){var e=this.getDataJSON(!0).replace(/\n/g,"\n  ").replace(/true/g,"True").replace(/false/g,"False").replace(/null/g,"None"),i=this.getConfigJSON(!0).replace(/\n/g,"\n  ").replace(/true/g,"True").replace(/false/g,"False").replace(/null/g,"None"),s=this.getEventsJSON(!0),a=this.getAfterRenderJSON(!0),r="";return r+="<span class=json-key>from</span> canvasxpress.canvas <span class=json-key>import</span> CanvasXpress\n",r+=t?"<span class=json-key>from</span> canvasxpress.render.jupyter <span class=json-key>import</span> CXNoteBook\n":"<span class=json-key>from</span> canvasxpress.render.popup <span class=json-key>import</span> CXBrowserPopup\n\n",r+="cx = CanvasXpress(\n",r+='  render_to = </span>"'+this.target+'"</span>,\n',r+="  data = "+e+",\n",r+="  config = "+i+",\n",s&&(r+="  events = "+s.replace(/\n/g,"\n  ").replace(/true/g,"True").replace(/false/g,"False").replace(/null/g,"None")+",\n"),a&&(r+="  after_render = "+a.replace(/\n/g,"\n  ").replace(/true/g,"True").replace(/false/g,"False").replace(/null/g,"None")+",\n"),r+="  width = <span class=json-number>"+this.width+"</span>,\n",r+="  height = <span class=json-number>"+this.height+"</span>\n",r+=")\n\n",r+=t?"display = CXNoteBook(cx)\n":"display = CXBrowserPopup(cx)\n","<code> "+(r+="display.render()").replace(/\n/g,"</code>\n<code> ")+"</code>"},this.delimitedToArrayOrig=function(t,e,i){e=e||",";for(var s=new RegExp("(\\"+e+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+e+"\\r\\n]*))","gi"),a=[[]],r=null;r=s.exec(t);){var n,o=r[1];o.length&&o!==e&&a.push([]),n=r[2]?r[2].replace(new RegExp('""',"g"),'"'):r[3],a[a.length-1].push(this.isNumber(n)?Number(n):n!=this.missingDataValue?n:null)}return i?this.arrayToCanvasXpress(a):a},this.delimitedToArray=function(t,e,i,s,a){var r,n,o=t.split(/\r\n|\r|\n/g);e||(r=0,n=0,t.match(/,/g)&&(r=t.match(/,/g).length),t.match(/\t/g)&&(n=t.match(/\t/g).length),e=r>n?",":"\t");for(var h=0;h<o.length;h++)if(o[h].match(/^#/))o.splice(h,1),h--;else{for(var l=o[h].split(e),c=l.length-1;c>=0;c--)if('"'==l[c].replace(/"\s+$/,'"').charAt(l[c].length-1)){var d=l[c].replace(/^\s+"/,'"');d.length>1&&'"'==d.charAt(0)?l[c]=l[c].replace(/^\s*"|"\s*$/g,"").replace(/""/g,'"'):c?l.splice(c-1,2,[l[c-1],l[c]].join(e)):l=l.shift().split(e).concat(l)}else l[c].replace(/""/g,'"');for(var p=0;p<l.length;p++)this.isNumber(l[p])?l[p]=Number(l[p]):l[p]==this.missingDataValue?l[p]=null:l[p].match(/^\[.+\]$/)||l[p].match(/^\{.+\}$/)?l[p]=this.parseJSON(l[p]):l[p]=l[p].replace(/"/g,"'");1!=l.length||""!=l[0]?o[h]=l:(o.splice(h,1),h--)}return i&&!a?this.arrayToCanvasXpress(o):s?this.isNetworkFile(o,a):o},this.isMetaDataFile=function(t,e){if(this.varIndices.length&&this.smpIndices.length){var i=this,s=function(t){return"s"==t?{y:{smps:i.cloneObject(i.data.y.smps)},x:{}}:{y:{vars:i.cloneObject(i.data.y.vars)},z:{}}},a={};if(e&&this.data.z&&this.data.z.hasOwnProperty("cXId"))for(var r=0;r<this.data.z.cXId.length;r++)a[this.data.z.cXId[r]]=r;var n,o={s:[],v:[]},h={s:[],v:[]},l=!1;for(r=1;r<t.length;r++)(n=this.getSampleIndices(t[r][0]))>-1?o.s.push([r,n]):(n=e&&a.hasOwnProperty(t[r][0])?a[t[r][0]]:this.getVariableIndices(t[r][0]))>-1&&o.v.push([r,n]);for(r=1;r<t[0].length;r++)(n=e&&a.hasOwnProperty(t[r][0])?a[t[r][0]]:this.getVariableIndices(t[0][r]))>-1?h.v.push([r,n]):(n=this.getSampleIndices(t[0][r]))>-1&&h.s.push([r,n]);var c=o.s.length>2?o.s.length:0,d=o.v.length>2?o.v.length:0,p=h.s.length>2?h.s.length:0,g=h.v.length>2?h.v.length:0,u=this.data.y.smps.length,m=this.data.y.vars.length;if(c||d||p||g){var f=0;if(c==u&&g==m){var y=[];for(r=0;r<h.v.length;r++){var x=h.v[r][0];y[C=h.v[r][1]]=[];for(var v=0;v<o.s.length;v++){var b=o.s[v][0],A=o.s[v][1];y[C][A]=t[b][x],f++}}l=!0}else if(p==u&&d==m){for(y=[],r=0;r<o.v.length;r++){x=o.v[r][0];y[C=o.v[r][1]]=[];for(v=0;v<h.s.length;v++){b=h.s[v][0],A=h.s[v][1];y[C][A]=t[x][b],f++}}l=!0}else if(c>=d&&c>=p&&c>=g)for(y=s("s"),r=1;r<t[0].length;r++){y.x[t[0][r]]=[];var w=0;for(v=0;v<o.s.length;v++){b=o.s[v][0],A=o.s[v][1];y.x[t[0][r]][A]=t[b][r],f++,w=t[b][r]?w+1:w}w||delete y.x[t[0][r]]}else if(d>=c&&d>=p&&d>=g)for(y=s("v"),r=1;r<t[0].length;r++){y.z[t[0][r]]=[];for(w=0,v=0;v<o.v.length;v++){b=o.v[v][0],A=o.v[v][1];y.z[t[0][r]][A]=t[b][r],f++,w=t[b][r]?w+1:w}w||delete y.z[t[0][r]]}else if(p>c&&p>=d&&p>=g)for(y=s("s"),r=0;r<h.s.length;r++){x=h.s[r][0];var C=h.s[r][1];for(w=0,v=1;v<t.length;v++)0==r&&(y.x[t[v][0]]=[]),y.x[t[v][0]][C]=t[v][x],f++,w=t[v][x]?w+1:w;w||delete y.x[t[v][0]]}else if(g>c&&g>=d&&g>=p)for(y=s("v"),r=0;r<o.s.length;r++){for(x=o.s[r][0],C=o.s[r][1],w=0,v=1;v<t.length;v++)0==r&&(y.z[t[v][0]]=[]),y.z[t[v][0]][C]=t[v][x],f++,w=t[v][x]?w+1:w;w||delete y.z[t[v][0]]}return{data:y,recs:f,addt:l}}return t}return t},this.isNetworkFile=function(t,e){var i={},s=t[0],a=0,r=0,n=0,o=e||!1;if("node"!=o){if("edge"==o){a={},i.data={nodes:[],edges:[]},done={};for(var h=1;h<t.length;h++){var l=t[h][0],c=t[h][1];if(l&&c){for(var d={id:l},p={id:c},g={id1:l,id2:c},u=2;u<t[h].length;u++)d[t[0][u]]=t[h][u],p[t[0][u]]=t[h][u],g[t[0][u]]=t[h][u];done.hasOwnProperty(l)||(i.data.nodes.push(d),done[l]=!0),done.hasOwnProperty(c)||(i.data.nodes.push(p),done[c]=!0),i.data.edges.push(g)}}return i.config={graphType:"Network"},i}if("guess"==o)return t[0][0].match(/id1/i)&&t[0][1].match(/id2/i)?this.isNetworkFile(t,"edge"):t[0][0].match(/id1/i)?this.isNetworkFile(t,"node"):this.isNetworkFile(t);var m={};for(h=1;h<t.length;h++){var f=t[h][0],y=t[h][1];this.data.nodeIndices.hasOwnProperty(f)&&this.data.nodeIndices.hasOwnProperty(y)?r++:this.data.nodeIndices.hasOwnProperty(f)?a++:n++,m[f]=h}if(!a&&!r)for(h=0;h<this.data.nodes.length;h++){(f=this.data.nodes[h]).hasOwnProperty("extId")&&m.hasOwnProperty(f.extId)&&(t[m[f.extId]][0]=f.id,a++)}if(r>a){a=0,r=0,n=0,o="edge";for(h=1;h<t.length;h++){f=t[h][0],y=t[h][1];if(this.data.nodeIndices.hasOwnProperty(f)&&this.data.nodeIndices.hasOwnProperty(y)){r++,i[f+":"+y]={};for(u=2;u<s.length;u++)i[f+":"+y][s[u]]=t[h][u]}else n++}}else{if(!(a>8))return t;a=0,r=0,n=0,o="node";for(h=1;h<t.length;h++){f=t[h][0];if(this.data.nodeIndices.hasOwnProperty(f)){a++,i[f]={};for(u=1;u<s.length;u++)i[f][s[u]]=t[h][u]}else n++}}return"edge"==o&&(r>5||r>=t.length-1)||"node"==o&&(a>5||a>=t.length-1)?{data:i,rows:Math.max(a,r),fail:n,type:o}:t}},this.XMLToJSON=function(t,e,i,s){var a={},r=new RegExp(/(?!xmlns)^.*:/),n=new RegExp(/^\s+|\s+$/g);if(e||(e={}),i&&!e[i]&&(e[i]=[]),t.attributes&&t.attributes.length>0){for(var o=0;o<t.attributes.length;o++){var h=t.attributes.item(o),l=h.name.replace(r,"").replace(/\[/g,"&#91").replace(/\]/g,"&#93").toLowerCase();i?a[l]=h.value.replace(n,""):e[l]=h.value.replace(n,"")}i&&e[i].push(a)}else"alt"==i&&e[i].push(t.textContent.replace(/\"/g,"'").replace(/\[/g,"&#91").replace(/\]/g,"&#93"));if(t.hasChildNodes()&&!s)for(o=0;o<t.childNodes.length;o++){4==(l=t.childNodes.item(o)).nodeType||3==l.nodeType||1==l.nodeType&&(i=l.nodeName.replace(r,"").toLowerCase(),this.XMLToJSON(l,e,i))}return e},this.cytoscapeToCX=function(t,e,i,s){var a={ELLIPSE:"oval",arc:"circle",bitmap:"circle",line:"minus",text:"circle",ver_ellipsis:"oval",hor_ellipsis:"oval"},r=[],n=[],o="",h=t.childNodes[0];if("graph"==h.tagName.toLowerCase()){this.XMLToJSON(h,!1,!1,!0);for(var l=0;l<h.childNodes.length;l++){var c=h.childNodes[l];if(c.nodeName){var d=c.nodeName.toLowerCase(),p=this.XMLToJSON(c);switch(d){case"node":if(p.graphics&&p.id){var g=p.graphics[0],u={id:p.id,x:Number(g.x),y:Number(g.y),z:Number(g.z),width:Number(g.w),height:Number(g.h),shape:a[g.type]||g.type,color:g.fill,outline:g.outline,outlineWidth:Number(g.width)};if(p.label&&(u.name=p.label),p.att)for(var m=0;m<p.att.length;m++){if((y=p.att[m]).name&&!y.name.match(/NODE_/)&&"selected"!=y.name&&"isInPath"!=y.name)switch(y.type){case"String":"COMMON"==y.name&&y.value?u.label=y.value:y.value&&(u[y.name]=y.value);break;case"Double":case"Integer":null!=y.value&&(u[y.name]=Number(y.value));break;case"Boolean":null!=y.value&&(u[y.name]=0!=y.value)}}r.push(u)}break;case"edge":if(p.source&&p.target){var f={id1:p.source,id2:p.target};if(p.id&&(f.intId=p.id),p.label&&(f.label=p.label),p.directed&&(f.directed=p.directed),p.graphics&&(f.color=p.graphics[0].fill,f.width=p.graphics[0].width),p.att)for(m=0;m<p.att.length;m++){var y;if((y=p.att[m]).name&&!y.name.match(/EDGE_/)&&"selected"!=y.name&&"isInPath"!=y.name)switch(y.type){case"String":y.value&&(f[y.name]=y.value);break;case"Double":case"Integer":null!=y.value&&(f[y.name]=Number(y.value));break;case"Boolean":null!=y.value&&(f[y.name]=0!=y.value)}}n.push(f)}break;case"att":p.name&&p.value&&"Dataset Name"==p.name&&(o=p.value)}}}}else alert("Ooops! Not a cytoscape xgmml file!");var x="Number of Nodes: "+r.length+"\nNumber of Edges: "+n.length+"\n";x=x.replace(/\n/g,"<br>");var v={data:{nodes:r,edges:n},config:{adjustBezier:!1,graphType:"Network",calculateLayout:!1,showAnimation:!1,networkNodesOnTop:!0,showNodeNameThreshold:2e4,networkFreeze:!1,preScaleNetwork:!1,title:o,moveParentsWithChildren:!0,ignoreEventlessOrder:!0,networkVendor:"Cytoscape"},renderTo:e,events:s,uploadFile:!this.dataString,afterRender:[["flashInfoSpan",[100,100,x,5e3]],["appendNetworkDataFromURL",[]]]};if(i)for(var b in i)v.config[b]=i[b];var A=!1,w=this.dataURL||this.dataString,C=this.cloneObject(this.meta.config.user);if("Network"==this.graphType){for(var b in this.meta.config.user)v.config[b]=this.meta.config.user[b];A=function(t){t.meta.config.remote={data:w,config:C},t.networkFreeze=!0}}this.updateRemoteData(v,A),this.hideMask()},this.keggToCX=function(t,e,i,s){var a,r,n,o,h=this,l=t.childNodes[2]||t.childNodes[1],c=[],d=[];if("pathway"==l.tagName.toLowerCase()){var p=this.XMLToJSON(l,!1,!1,!0);a=p.title,r=p.image,p.link;var g=new Image;g.onload=function(){n=this.width,o=this.height;var t="Number of Nodes: "+c.length+"\n";t+="Number of Edges: "+d.length+"\n",c.push({id:"__zero__",type:"anchor",shape:"circle",color:"rgba(0,0,0,0)",outline:"rgb(0,0,0)",width:1,height:1,x:0,y:0,hideLabel:!0},{id:"__max__",type:"anchor",shape:"circle",color:"rgba(0,0,0,0)",outline:"rgb(0,0,0)",width:1,height:1,x:n,y:o,hideLabel:!0}),h.remoteServiceType="file",h.networkFreeze=!1;var l={data:{nodes:c,edges:d},config:{adjustBezier:!1,graphType:"Network",calculateLayout:!1,showAnimation:!1,networkNodesOnTop:!1,networkFreeze:!1,showNodeNameThreshold:2e4,preScaleNetwork:!1,title:a,backgroundType:"image",backgroundImage:r,networkVendor:"Kegg"},renderTo:e,events:s,uploadFile:!h.dataString,afterRender:[["flashInfoSpan",[100,100,t,5e3]],["appendNetworkDataFromURL",[]]]};if(i)for(var p in i)l.config[p]=i[p];var g=!1,u=h.dataURL||h.dataString,m=h.cloneObject(h.meta.config.user);if("Network"==h.graphType){for(var p in h.meta.config.user)l.config[p]=h.meta.config.user[p];g=function(t){t.meta.config.remote={data:u,config:m},t.networkFreeze=!0}}h.updateRemoteData(l,g),h.hideMask()},(CanvasXpress.system.isR&&!CanvasXpress.system.isInIframe||!CanvasXpress.system.isR)&&(g.crossOrigin="anonymous"),g.src=p.image;for(var u=0;u<l.childNodes.length;u++){var m=l.childNodes[u];if(m.nodeName)switch(m.nodeName.toLowerCase()){case"entry":if("roundrectangle"==(p=this.XMLToJSON(m)).graphics[0].type&&(p.graphics[0].type="roundrect",p.graphics[0].fgcolor="rgba(0,0,0,0)"),p.graphics&&1==p.graphics.length&&"line"!=p.graphics[0].type){var f="group"==p.type?5:0,y={id:p.id,type:p.type,link:p.link,name:p.graphics[0].name,shape:p.graphics[0].type,color:"rgba(0,0,0,0)",outline:h.validateColor(p.graphics[0].fgcolor)||"rgb(0,0,0)",width:parseInt(p.graphics[0].width)+f,height:parseInt(p.graphics[0].height)+f,x:parseInt(p.graphics[0].x),y:parseInt(p.graphics[0].y),hideLabel:!0,fixed:!0};"group"==p.type?c.unshift(y):c.push(y)}else if(p.graphics&&1==p.graphics.length&&"line"==p.graphics[0].type){var x=p.graphics[0].coords.split(",");if(4==x.length){for(var v,b,A,w=[],C=[];x.length>1;)w.push(parseInt(x.shift())),C.push(parseInt(x.shift()));var T=parseInt(this.mean(w)),S=parseInt(this.mean(C));w[0]==w[1]?(T+=1,v=2,b=C[1]-C[0],A=0):C[0]==C[1]?(S+=1,v=w[1]-w[0],b=2,A=0):(b=this.lineLength(w[0],C[0],w[1],C[1]),v=2,A=this.getAngle(w[0],C[0],w[1],C[1]));y={id:p.id,type:p.type,link:p.link,name:p.graphics[0].name,shape:"rect",color:"rgba(0,0,0,0)",outline:"rgba(0,0,0,0)",x:T,y:S,width:v,height:b,rotate:A,hideLabel:!0,fixed:!0};c.push(y)}}break;case"relation":case"reaction":(p=this.XMLToJSON(m)).id1=this.cloneObject(p.entry1),p.id2=this.cloneObject(p.entry2),delete p.entry1,delete p.entry2,p.color="rgba(0,0,0,0)",d.push(p)}}}else alert("Ooops! Not a kgml file!")},this.wikipathwayToCX=function(t,e,i,s){var a,r=t.childNodes[0],n={},o=[],h={},l={},c={},d={},p=1,g=0,u=[],m={},f={},y={},x="\nWarnings:\n",v={Line:!1,Arrow:"arrow",TBar:"square","mim-necessary-stimulation":!1,"mim-binding":!1,"mim-conversion":"arrow","mim-stimulation":"arrow","mim-catalysis":"round","mim-modification":!1,"mim-inhibition":"square","mim-covalent-bond":!1,"mim-transcription-translation":!1},b=function(t,e){for(var i=Number.MAX_VALUE,s=Number.MAX_VALUE,a=-Number.MAX_VALUE,r=-Number.MAX_VALUE,o=[],h=[],l=!1,c=0;c<t.length;c++)i=Math.min(i,t[c][1]-t[c][3]/2),s=Math.min(s,t[c][2]-t[c][4]/2),a=Math.max(a,t[c][1]+t[c][3]/2),r=Math.max(r,t[c][2]+t[c][4]/2),o.push(t[c][0]),n[t[c][0]].parentNode=e,h.push(n[t[c][0]].zorder),"label"!=n[t[c][0]].nodeName&&(l=!0),h.sort((function(t,e){return t-e}));var p=a-i,m=r-s,f={id:e,x:(i+a)/2,y:(s+r)/2,width:p+(t.length>1&&p>10?5:0),height:m+(t.length>1&&m>10?5:0),group:o,hideLabel:!0,hideTooltip:!1,type:"Group",color:l?"rgba(245,245,245,0.5)":"rgba(0,0,0,0)",outline:l?"rgb(0,0,0)":"rgba(0,0,0,0)",shape:"rectangle",zorder:h[0]};d[e]=g--,n[e]=f,u.push(e)},A=function(t,e){var i={id:e,x:Math.round(10*t.x)/10,y:Math.round(10*t.y)/10,width:t.width?Math.round(t.width):1,height:t.height?Math.round(t.height):1,hideLabel:!t.show,hideTooltip:!1,eventless:!t.show,type:t.type||"Anchor",color:t.color||"rgba(0,0,0,0)",outline:t.outline||"rgba(0,0,0,0)",shape:t.shape||"circle",label:t.label||"",zorder:t.zorder||0};d[e]=p++,n[e]=i,u.push(e)},w=function(t){switch(t){case"r":case"l":return"rl";case"b":case"t":case"c":return"tb"}},C=function(t){return 1==parseInt(t.relx)?"r":-1==parseInt(t.relx)?"l":1==parseInt(t.rely)?"b":-1==parseInt(t.rely)?"t":Math.abs(t.relx)>Math.abs(t.rely)?parseFloat(t.relx)>0?"r":"l":parseFloat(t.rely)>0?"b":parseFloat(t.rely)<0?"t":"c"},T=function(t,e,i){if(i)switch(t){case"r":return[e[0]+20,e[1]];case"l":return[e[0]-20,e[1]];case"t":case"c":return[e[0],e[1]-20];case"b":return[e[0],e[1]+20]}else switch(t){case"r":case"l":return[e[0][0],e[1][1]];case"t":case"b":case"c":return[e[1][0],e[0][1]]}},S=function(t,e){for(var i=[e[0]],s=e[0],a=1;a<e.length;a++){var r=e[a];switch(t){case"rl":i.push([r[0],s[1]]);break;case"tb":i.push([s[0],r[1]])}s=i[a],t="rl"==t?"tb":"rl"}return i.push(e[e.length-1]),i},M=function(t){for(var e=t.point,i=[],s=0;s<e.length;s++)i.push([Math.round(10*e[s].x)/10,Math.round(10*e[s].y)/10]);return i},D=function(t){var e=t.point,i=e.length-1,s=function(t,e){var i=function(t,e,i){switch(t){case"r":if(parseFloat(e.x)>=parseFloat(i.x))return 2;break;case"l":if(parseFloat(e.x)<=parseFloat(i.x))return 2;break;case"t":case"c":if(parseFloat(e.y)<=parseFloat(i.y))return 2;break;case"b":if(parseFloat(e.y)>=parseFloat(i.y))return 2}return 0},s=C(t),a=C(e),r=2;return w(s)==w(a)&&r++,s!=a&&(r+=i(s,t,e),r+=i(a,e,t)),r}(e[0],e[i]),a=C(e[0]),r=C(e[i]),n=w(a),o=M(t);if(s==e.length)o=S(n,o);else if(2==e.length)o.splice(1,0,T(a,o[0],!0)),s>3?(s>3&&o.splice(2,0,T(r,o[2],!0)),s>4?(s>4&&o.splice(3,0,[(o[1][0]+o[2][0])/2,(o[1][1]+o[2][1])/2]),s>5&&(o=M(t),o=S(n,o))):o.splice(2,0,T(a,[o[1],o[2]]))):o[0][0]==o[1][0]&&o[1][0]==o[2][0]||o[0][1]==o[1][1]&&o[1][1]==o[2][1]?o.splice(1,1):o.splice(2,0,T(a,[o[1],o[2]]));else if(e.length>s)o=S(n,o);else for(var h=0;h<i;h++){var l=2*h;"tb"==n?(n="rl",o.splice(l+1,0,[o[l][0],o[l+1][1]])):(n="tb",o.splice(l+1,0,[o[l+1][0],o[l][1]]))}var c=[[o[0][0],o[0][1]]];for(h=1;h<o.length;h++)o[h][0]==o[h-1][0]&&o[h][1]==o[h-1][1]||c.push([o[h][0],o[h][1]]);return c},k=function(t,e,i){var s,a,r,n,o=t.point,h=o.length-1,l=C(o[0]),c=C(o[h]),d=w(l),p=w(c),g=M(t),u=[];if(1==h)s=g[0],a=g[1],e&&i&&(d==p?(r=(s[0]+a[0])/2,n=(s[1]+a[1])/2,"tb"==d?("t"==c?n>i.y-i.height&&(n-=i.height):"b"==c&&n<i.y+i.height&&(n+=i.height),u.push([s[0],s[1],s[0],n,r,n]),u.push([r,n,a[0],n,a[0],a[1]])):("l"==c?r>i.x-i.width&&(r-=.5*i.width):"r"==c&&r<i.x+i.width&&(r+=.5*i.width),u.push([s[0],s[1],r,s[1],r,n]),u.push([r,n,r,a[1],a[0],a[1]]))):"t"==l||"b"==l?(r="l"==c?.5*-i.width:"r"==c?.5*i.width:.5*-i.width,n=(a[1]-s[1])/3,"l"==c&&s[0]>i.x-i.width||"r"==c&&s[0]<i.x+i.width?(u.push([s[0],s[1],s[0],s[1]+n,a[0],s[1]+n]),u.push([a[0],s[1]+n,a[0]+r,s[1]+n,a[0]+r,s[1]+n+n]),u.push([a[0]+r,s[1]+n+n,a[0]+r,a[1],a[0],a[1]])):u.push([s[0],s[1],s[0],a[1],a[0],a[1]])):(r=(a[0]-s[0])/3,n="t"==c?-i.height:"b"==c?i.height:-i.height,"t"==c&&s[1]>i.y-i.height||"b"==c&&s[1]<i.y+i.height?(u.push([s[0],s[1],s[0]+r,s[1],s[0]+r,a[1]]),u.push([s[0]+r,a[1],s[0]+r,a[1]+n,s[0]+r+r,a[1]+n]),u.push([s[0]+r+r,a[1]+n,a[0],a[1]+n,a[0],a[1]])):u.push([s[0],s[1],a[0],s[1],a[0],a[1]])));else if(s=g[0],"t"==l||"b"==l){for(var m=1;m<h;m++)a=g[m],m%2?u.push([s[0],s[1],s[0],a[1],a[0],a[1]]):u.push([s[0],s[1],a[0],s[1],a[0],a[1]]),s=a;a=g[h],h%2?u.push([s[0],s[1],s[0],a[1],a[0],a[1]]):u.push([s[0],s[1],a[0],s[1],a[0],a[1]])}else{for(m=1;m<h;m++)a=g[m],m%2?u.push([s[0],s[1],a[0],s[1],a[0],a[1]]):u.push([s[0],s[1],s[0],a[1],a[0],a[1]]),s=a;a=g[h],h%2?u.push([s[0],s[1],a[0],s[1],a[0],a[1]]):u.push([s[0],s[1],s[0],a[1],a[0],a[1]])}return u},L=function(t,e){var i=parseFloat(e.relx),s=parseFloat(e.rely),a=t.width/2,r=t.height/2;return[t.x+i*a,t.y+s*r]},I=function(t,e,i,s){var a={},r=new RegExp(/(?!xmlns)^.*:/),n=new RegExp(/^\s+|\s+$/g);if(e||(e={}),!i||"point"!=i&&"anchor"!=i||e[i]||(e[i]=[]),t.attributes&&t.attributes.length>0){for(var o=0;o<t.attributes.length;o++){var h=t.attributes.item(o),l=h.name.replace(r,"").replace(/\[/g,"&#91").replace(/\]/g,"&#93").toLowerCase();!i||"point"!=i&&"anchor"!=i?e[l]=h.value.replace(n,""):a[l]=h.value.replace(n,"")}!i||"point"!=i&&"anchor"!=i||e[i].push(a)}if(t.hasChildNodes()&&!s)for(o=0;o<t.childNodes.length;o++){4==(l=t.childNodes.item(o)).nodeType||3==l.nodeType||1==l.nodeType&&(i=l.nodeName.replace(r,"").toLowerCase(),I(l,e,i))}return e};if("pathway"==r.tagName.toLowerCase()){a=(E=I(r,!1,!1,!0)).name,E.organism;for(var z=0;z<r.childNodes.length;z++){var N=r.childNodes[z];if(N.nodeName){var B=N.nodeName.toLowerCase();switch(B){case"comment":case"graphics":break;case"state":(E=I(N)).nodeName=B,h[E.graphid]=E;break;case"datanode":case"label":case"shape":(E=I(N)).nodeName=B,E.centerx&&(E.x=Math.round(10*E.centerx)/10,delete E.centerx),E.centery&&(E.y=Math.round(10*E.centery)/10,delete E.centery),E.width&&(E.width=parseInt(E.width)),E.height&&(E.height=parseInt(E.height)),E.textlabel&&(E.label=E.textlabel,delete E.textlabel),E.database&&E.id&&(E.database+=" : "+E.id),E.graphid&&(E.id=E.graphid),E.fontsize&&(E.labelSize=parseInt(E.fontsize)),E.rotation&&(E.rotate=180*parseFloat(E.rotation)/Math.PI+180),E.shapetype&&("RoundedRectangle"==E.shapetype&&(E.shapetype=E.value&&"Double"==E.value?"roundrectd":"roundrect"),"Arc"==E.shapetype&&(E.shapetype="arc3"),"Mitochondria"==E.shapetype&&(E.shapetype="image",E.imagePath="https://www.canvasxpress.org/assets/images/mit.png"),this.isValidShape(E.shapetype.toLowerCase())?E.shape=E.shapetype.toLowerCase():"None"==E.shapetype?E.shape="rectangle":(x+=E.id+" has an unkown shape: "+E.shapetype+"\n",E.shape=E.shapetype),"oval"==E.shape&&E.value&&"Double"==E.value&&(E.shape="ovald"),delete E.shapetype),E.shape||(E.shape="rectangle"),"shape"==B?E.labelColor=E.color?this.validateColor(E.color):"rgb(0,0,0)":E.color?E.labelColor=this.validateColor(E.color):E.labelColor="rgb(0,0,0)",E.fillcolor?(E.color=this.validateColor(E.fillcolor),delete E.fillcolor):E.color="rgba(0,0,0,0)","rgb(0,0,0)"==E.color&&(E.color="rgba(0,0,0,0)"),"rgb(255,255,255)"==E.color&&(E.color="rgba(255,255,255,0)"),"label"==B?(E.label&&""!=E.label||(E.hideLabel=!0,E.hideTooltip=!1,E.eventless=!0),E.outline="rgba(0,0,0,0)",E.color="rgba(0,0,0,0)"):E.outline=E.labelColor,"shape"!=B||E.label&&""!=E.label||(E.hideLabel=!0,E.hideTooltip=!1,E.outline=E.labelColor),E.groupref&&(m.hasOwnProperty(E.groupref)||(m[E.groupref]=[]),m[E.groupref].push([E.id,E.x,E.y,E.width,E.height]),E.parentNode=E.groupref),d[E.id]=p++,n[E.id]=E,u.push(E.id);break;case"interaction":if((E=I(N)).nodeName=B,E.anchor){for(var P=0;P<E.anchor.length;P++)c[E.anchor[P].graphid]=!0;delete E.anchor}var R=E.point.length-1;E.point[0].graphref&&E.point[R].graphref&&(E.id1=E.point[0].graphref,E.id2=E.point[R].graphref);var O="solid";E.linestyle&&"Broken"==E.linestyle&&(O="dashed"),E.connectortype&&"Curved"==E.connectortype&&(O+="Bezier"),E.type=O,E.point[0].arrowhead&&v[E.point[0].arrowhead]&&(E.startArrow=v[E.point[0].arrowhead]),E.point[R].arrowhead&&v[E.point[R].arrowhead]&&(E.endArrow=v[E.point[R].arrowhead]),E.linethickness&&(E.thickness=parseInt(10*E.linethickness)/10,delete E.linethickness),E.point[0].relx&&E.point[0].rely&&(E.startX=parseFloat(E.point[0].relx),E.startY=parseFloat(E.point[0].rely)),E.point[R].relx&&E.point[R].rely&&(E.endX=parseFloat(E.point[R].relx),E.endY=parseFloat(E.point[R].rely)),delete E.id,o.push(E);break;case"group":(E=I(N)).nodeName=B,E.groupref&&E.groupid?(l.hasOwnProperty(E.groupref)||(l[E.groupref]=[]),l[E.groupref].push(E.groupid),f[E.graphid]=E.groupref):y[E.graphid]=E.groupid}}}}else alert("Ooops! Not a gpml file!");for(var X in h){var F=h[X].graphref;if(n[F]){var _=L(n[F],h[X]);A($={id:F,x:_[0],y:_[1],width:h[X].width,height:h[X].height,label:""==h[X].textlabel?" ":h[X].textlabel,type:"State",color:""==h[X].textlabel?"rgb(255,255,255)":this.validateColor(h[X].fillcolor),outline:"rgb(0,0,0)",shape:"oval",show:!0},X)}}for(var F in m)b(m[F],F);for(var F in l)if(m.hasOwnProperty(F)){for(z=0;z<l[F].length;z++){var E=n[l[F][z]];m[F].push([E.id,E.x,E.y,E.width,E.height])}b(m[F],F)}var V=[],H=[];for(z=0;z<o.length;z++){R=(E=o[z]).point.length-1;E.point[0].graphref||E.point[R].graphref||(E.exact=!0);for(P=0;P<E.point.length;P++){var G=E.point[P];if(G.graphref)n.hasOwnProperty(G.graphref)||(0==P?y[G.graphref]?E.id1=y[G.graphref]:(A(G,G.graphref),E.hideTooltip=!1,E.exactStart=!!c[G.graphref],E.id1=G.graphref):P==E.point.length-1&&(y[G.graphref]?E.id2=y[G.graphref]:(A(G,G.graphref),E.hideTooltip=!1,E.exactEnd=!!c[G.graphref],E.id2=G.graphref)));else if(0==P||P==E.point.length-1){var q=0==P?E.graphid+".1":E.graphid+".2",j=0==P?E.point.length-1:0;A(G,q),0==P?(E.id1=q,E.exactStart=!0):(E.id2=q,E.exactEnd=!0),E.hideTooltip=!1,E.point[j].graphref&&(!n.hasOwnProperty(E.point[j].graphref)&&y[E.point[j].graphref]?0==P?E.id2=y[E.point[j].graphref]:E.id1=y[E.point[j].graphref]:0==P?E.id2=E.point[j].graphref:E.id1=E.point[j].graphref)}}E.connectortype&&("Elbow"==E.connectortype?E.elbows=D(E):"Curved"==E.connectortype?E.elbows=k(E,n[E.id1],n[E.id2]):"Segmented"==E.connectortype&&(E.elbows=M(E))),n[E.id1]&&n[E.id2]?V.push(E):H.push(E)}u.sort((function(t,e){return n[t].zorder&&n[e].zorder?parseInt(n[t].zorder)-parseInt(n[e].zorder)==0?d[t]-d[e]:parseInt(n[t].zorder)-parseInt(n[e].zorder):d[t]-d[e]}));var U=[];for(z=0;z<u.length;z++)U.push(n[u[z]]);var Y="Number of Nodes: "+U.length+"\n";if(Y+="Number of Edges: "+V.length+"\n",H.length>0){Y+="Number of Failed Edges: "+H.length+"\n";for(z=0;z<H.length;z++)Y+="\t"+(z+1)+". "+H[z].graphid+"\n"}"\nWarnings:\n"!=x&&(Y+=x),Y=Y.replace(/\n/g,"<br>");var W={data:{nodes:U,edges:V},config:{adjustBezier:!1,graphType:"Network",calculateLayout:!1,showAnimation:!1,networkNodesOnTop:!1,showNodeNameThreshold:2e4,networkFreeze:!1,preScaleNetwork:!1,title:a,networkVendor:"Wikipathways"},renderTo:e,events:s,uploadFile:!this.dataString,afterRender:[["flashInfoSpan",[100,100,Y,5e3]],["appendNetworkDataFromURL",[]]]};if(i)for(var $ in i)W.config[$]=i[$];var Q=!1,K=this.dataURL||this.dataString,J=this.cloneObject(this.meta.config.user);if("Network"==this.graphType){for(var $ in this.meta.config.user)W.config[$]=this.meta.config.user[$];Q=function(t){t.meta.config.remote={data:K,config:J},t.networkFreeze=!0}}this.updateRemoteData(W,Q),this.hideMask()},this.metabaseToCX=function(t,e,i,s){var a=this,r={3:"microsome",13:"epr",21:"lysosome",43:"nucleus",67:"golgi",1287:"mitochondria",1312:"peroxisome"},n=function(t){var e=function(){return{shape:"rectangle",color:"rgba(255,255,255,0)",outline:"rgba(0,0,0,0)",outlineWidth:0,hideLabel:!0,immutable:!0,eventless:!0,type:t.type,zorder:t.zorder+1,width:32,height:32}},i=function(){var i=e();return i.id=t.id+"-membraneTL",i.pattern="membraneTL",i.x=t.x-.5*t.width,i.y=t.y-.5*t.height,i.width=64,i.height=64,i},s=function(){var i=e();return i.id=t.id+"-membraneTR",i.pattern="membraneTR",i.x=t.x+.5*t.width-32,i.y=t.y-.5*t.height,i.width=64,i.height=64,i},a=function(){var i=e();return i.id=t.id+"-membraneBL",i.pattern="membraneBL",i.x=t.x-.5*t.width,i.y=t.y+.5*t.height-32,i.width=64,i.height=64,i},r=function(){var i=e();return i.id=t.id+"-membraneBR",i.pattern="membraneBR",i.x=t.x+.5*t.width-32,i.y=t.y+.5*t.height-32,i.width=64,i.height=64,i},n=function(i){var s=e();return s.id=t.id+"-membraneT",s.pattern="membraneTop",s.x=t.x+(0==i?0:1==i?-16:2==i?16:0),s.y=t.y-.5*t.height,s.width=t.width-(0==i?0:1==i||2==i?32:64),s},o=function(e){var i=n(e);return i.id=t.id+"-membraneB",i.pattern="membraneBottom",i.y=t.y+.5*t.height-16,i},h=function(i){var s=e();return s.id=t.id+"-membraneR",s.pattern="membraneRight",s.x=t.x+.5*t.width-16,s.y=t.y+(0==i?0:1==i?-16:2==i?16:0),s.height=t.height-(0==i?0:1==i||2==i?32:64),s},l=function(e){var i=h(e);return i.id=t.id+"-membraneL",i.pattern="membraneLeft",i.x=t.x-.5*t.width,i};switch(t.type){case 1:return t.shape="rectangle",[n(0)];case 2:return t.shape="rectangle",[h(0)];case 3:return t.shape="roundrecttr",[n(1),h(2),s()];case 4:return t.shape="rectangle",[o(0)];case 5:return t.shape="rectangle",[n(0),o(0)];case 6:return t.shape="roundrectbr",[o(1),h(1),r()];case 7:return t.shape="roundrectr",[n(1),o(1),h(3),r(),s()];case 8:return t.shape="rectangle",[l(0)];case 9:return t.shape="roundrecttl",[n(2),l(2),i()];case 10:return t.shape="rectangle",[h(0),l(0)];case 11:return t.shape="roundrectt",[n(3),h(2),l(2),s(),i()];case 12:return t.shape="roundrectbl",[o(2),l(1),a()];case 13:return t.shape="roundrectl",[n(2),o(2),l(3),i(),a()];case 14:return t.shape="roundrectb",[o(3),h(1),l(1),r(),a()];case 15:return t.width<64||t.height<64?(t.shape="rectangle",delete t.gradient,delete t.color1,delete t.color2,delete t.color3,[n(0)]):(t.shape="roundrect2",[n(3),o(3),h(3),l(3),s(),i(),r(),a()])}return[]},o=function(t,e,i,s,r){r.width,r.height;var n=a.clip("line",[t,e,i,s],[t-r.width/2,e-r.height/2,r.width+(t-r.width/2),r.height+(e-r.height/2)]);return a.lineLength(n[0],n[1],n[2],n[3])+2},h=[],l=[],c=t.childNodes[0];if("map"==c.tagName.toLowerCase()){var d={},p=[],g=0,u=this.XMLToJSON(c,!1,!1,!0);h.push({id:"__background__",type:"background",shape:"rectangle",color:"rgb(220,231,232)",outline:"rgb(29,154,195)",outlineWidth:3,width:Number(u.width),height:Number(u.height),x:.5*Number(u.width),y:.5*Number(u.height),hideLabel:!0,immutable:!0,eventless:!0,zorder:1}),p.push(g++);for(var m=0;m<c.childNodes.length;m++){var f=c.childNodes[m];if(f.nodeName)switch(f.nodeName.toLowerCase()){case"localizations":for(var y=0;y<f.childNodes.length;y++){if((S=f.childNodes[y]).nodeName&&"loc"==S.nodeName.toLowerCase()){var x=this.XMLToJSON(S),v=r.hasOwnProperty(x.id)?"image":"16"==x.id?"roundrect2":"roundrect",b={id:"loc"+(y+1),shape:v,hideLabel:!0,immutable:!0,eventless:!0,x:Number(x.x)+.5*Number(x.width),y:Number(x.y)+.5*Number(x.height),width:Number(x.width),height:Number(x.height),type:Number(x.type),zorder:x.appearance&&x.appearance[0].zorder?Number(x.appearance[0].zorder.replace("Integer: ","")):2};for(var A in"image"!=v&&(b.color="rgba(0,0,0,0)",b.outline="16"==x.id?"rgba(0,0,0,0)":"rgb(83,158,188)",b.outlineWidth="16"!=x.id?3:0,"16"!=x.id&&(b.width-=6,b.height-=6)),x.appearance&&x.appearance[0].rotateangle&&(b.rotate=Number(x.appearance&&x.appearance[0].rotateangle.split(": ")[1]),b.rotate?(b.widthTMP=b.width,b.width=b.height,b.height=b.widthTMP,delete b.widthTMP):delete b.rotate),"16"==x.id&&(b.gradient="linear",b.color1="rgb(122,194,226)",b.color2="rgb(223,237,248)",b.color3="rgb(223,237,248)"),"image"==v&&("1287"==x.id?b.imagePath="1"==x.type?CanvasXpress.images.mitochondria2:CanvasXpress.images.mitochondria:b.imagePath=CanvasXpress.images[r[x.id]]),x)if("appearance"==A.toLowerCase())for(var w in x[A][0])switch(vk=x[A][0][w].split(": "),vk[0]){case"String":b[w]=vk[1];break;case"Integer":case"Double":b[w]=Number(vk[1]);break;case"Boolean":b[w]="true"==vk[1]}if(h.push(b),p.push(g++),16==Number(x.id)){var C=n(b);if(C.length)for(var T=0;T<C.length;T++)h.push(C[T]),p.push(g++)}}}break;case"nodes":for(y=0;y<f.childNodes.length;y++){var S;if((S=f.childNodes[y]).nodeName&&"node"==S.nodeName.toLowerCase()){x=this.XMLToJSON(S),b={};for(var A in x){if("alt"==A.toLowerCase()&&x[A][0].match(/\w/)&&(b.tooltip=x[A][0].replace(/\"/g,"'"),b.tooltip=x[A][0].replace(/\[/g,"&#91"),b.tooltip=x[A][0].replace(/\]/g,"&#93")),"appearance"==A.toLowerCase())for(var w in x[A][0])switch(vk=x[A][0][w].split(":"),vk[0]){case"String":b[w]=vk[1].replace(/\s/g,"");break;case"Integer":case"Double":b[w]=Number(vk[1].replace(/\s/g,""));break;case"Boolean":b[w]="true"==vk[1].replace(/\s/g,"");break;case"Rectangle":b[w]=vk[1].replace(/\s/g,"").split(",").map(Number);break;case"Color":b[w]=vk[1].replace(/\s/g,"").split(",").map(Number),b[w][3]=Math.round(b[w][3]/255*10)/10,b[w]="rgba("+b[w].join(",")+")";break;case"Font":b[w]=vk[1].replace(/\s/g,"").split(",")}b[A]="true"==x[A]||"false"!=x[A]&&(isNaN(x[A])?x[A]:Number(x[A]))}if(b.extId=x.id,b.id=x.nodeid.toString(),b.x=Number(x.x)+.5*Number(x.width),b.y=Number(x.y)+.5*Number(x.height),b.width=Number(x.width),b.height=Number(x.height),b.iconarea&&(b.width=b.iconarea[2],b.height=b.iconarea[3],b.x=b.iconarea[0]+.5*b.width,b.y=b.iconarea[1]+.5*b.height,delete b.iconarea),!x.icontype||0!=x.type&&16!=x.type)if(x.icontype){switch(x.type){case"-10":b.width-=5,b.height-=5,b.x+=2.5,b.y+=2.5,b.shape=b.arcwidth>40?"roundrecto":"roundrect";break;case"21":case"61":case"63":case"91":case"-11":case"-12":b.width-=4,b.height-=4,b.x+=2,b.y+=2,b.shape="roundrect"}b.immutable=!0}else b.shape="roundrect",b.immutable=!0;else isNaN(x.icontype)&&(x.icontype=1e3),Number(x.icontype)<10&&(x.icontype="0"+x.icontype),CanvasXpress.images.hasOwnProperty(x.icontype)?(b.zoomX=50/b.width,b.zoomY=50/b.height,b.shape="image",b.imagePath=CanvasXpress.images[x.icontype],b.immutable=!1):(b.shape="roundrect",b.immutable=!0);if(""==b.name?b.hideLabel=!0:b.name=b.name.toString().replace(/\[/g,"&#91").replace(/\]/g,"&#93").replace(/\"/g,"&quot"),b.textarea){var M=1;if(b.font&&(M=Math.floor(b.textarea[3]/(Number(b.font[2])+(Number(b.font[2])>12?1:0))),b.labelSize=14==b.font[2]?1.1:1,b.font[0].match(/Bold Italic/i)?b.labelStyle="Bold Italic":b.font[0].match(/Bold/i)?b.labelStyle="Bold":b.font[0].match(/Italic/i)&&(b.labelStyle="Italic")),M>1&&!b.name.toString().match(/\n/)){var D=this.nodeFontStyle+" "+Math.floor(10*b.labelSize)+"px "+this.fontName,k=Math.floor(b.textarea[2]/5.5),L=k>0?this.wrapText(b.name.toString(),k):b.name.toString(),I=L.split(/\n/),z=this.measureTextMultiple(L,D);if(I.length>M)for(;I.length>M&&k<b.name.toString().length;)I=(L=this.wrapText(b.name.toString(),k++)).split(/\n/),z=this.measureTextMultiple(L,D);if(z>b.textarea[2])for(I=(L=L.replace("(","\n(")).split(/\n/),z=this.measureTextMultiple(L,D);(z>b.textarea[2]||I.length*D>b.textarea[3]||I.length<M)&&k>3;)I=(L=this.wrapText(b.name,k--)).split(/\n/),z=this.measureTextMultiple(L,D);b.name=L}else 0==M&&(b.hideLabel=!0);b.labelX=b.textarea[0]+.5*b.textarea[2],b.labelY=b.textarea[1]+.5*b.textarea[3]}if(null!=b.textalignment&&(0==b.textalignment?(b.labelAlign="left",b.labelX-=.45*b.textarea[2]):1==b.textalignment?b.labelAlign="center":2==b.textalignment&&(b.labelAlign="right",b.labelX+=.45*b.textarea[2])),delete b.textarea,b.fontcolor&&(b.labelColor=b.fontcolor,delete b.fontcolor),b.backgroundcolor&&(b.color=b.backgroundcolor,delete b.backgroundcolor),b.bordercolor&&(b.outline=b.bordercolor,delete b.bordercolor),b.rotateangle&&(b.rotate="image"==b.shape?-b.rotateangle:270-b.rotateangle,"image"!=b.shape&&(b.labelRotate=-b.rotateangle),delete b.rotateangle),b.borderwidth&&(b.outlineWidth=Number(b.borderwidth)-1,delete b.borderwidth),d[b.id]=g,delete b.appearance,delete b.icontype,h.push(b),p.push(g++),b.complex&&(h.push({id:b.id+"-complex",x:b.x,y:b.y,width:14,height:14,shape:"star",color:"rgb(255,255,255)",hideLabel:!0,zorder:b.zorder+1,parentNode:b.id}),d[b.id+"-complex"]=g,p.push(g++),delete b.complex),b.pathstart){var N=0,B=0,P=0;switch(b.sideofpathstarteditor){case 0:N=90,P=-(40+b.pathstartarrowmargin);break;case 1:N=180,B=40+b.pathstartarrowmargin;break;case 2:N=270,P=40+b.pathstartarrowmargin;break;case 3:N=0,B=-(40+b.pathstartarrowmargin)}h.push({id:b.id+"-pathstart",x:b.x+B,y:b.y+P,width:40,height:40,shape:"image",imagePath:CanvasXpress.images[99],hideLabel:!0,immutable:!0,rotate:N,zorder:b.zorder+1,parentNode:b.id}),d[b.id+"-pathstart"]=g,p.push(g++),delete b.sideofpathstarteditor,delete b.pathstartarrowmargin,delete b.pathstart}b.organismspecificobject&&(h.push({id:b.id+"-organism",x:b.x,y:b.y,width:60,height:60,shape:"circle",color:"rgba(0,0,0,0.1)",outline:"rgb(255,255,0)",outlineWidth:3,hideLabel:!0,zorder:b.zorder-1,parentNode:b.id}),d[b.id+"-organism"]=g,p.push(g++),delete b.organismspecificobject)}}break;case"edges":for(y=0;y<f.childNodes.length;y++){var R=f.childNodes[y];if(R.nodeName&&"edge"==R.nodeName.toLowerCase()){x=this.XMLToJSON(R);var O={};for(var A in x)if("alt"!=A.toLowerCase()){if("appearance"==A.toLowerCase())for(var w in x[A][0])if("linkhighlighting"==w)vk=x[A][0][w].split(":"),"Color"==vk[1]&&vk[2]&&(vk[2]=vk[2].split(","),vk[2].pop(),O.highlight="rgb("+vk[2].join(",")+")");else switch(vk=x[A][0][w].split(": "),vk[0]){case"String":O[w]=vk[1];break;case"Integer":case"Double":O[w]=Number(vk[1]);break;case"Boolean":O[w]="true"==vk[1];break;case"Rectangle":O[w]=vk[1].replace(/\s/g,"").split(",").map(Number.isFinite);break;case"PointArray":var X=[];vk[1]=vk[1].replace(/\s/g,"").split(";");for(T=0;T<vk[1].length-1;T++)X.push(vk[1][T].split(",").map(Number.isFinite));O[w]=X}O[A]="true"==x[A]||"false"!=x[A]&&(isNaN(x[A])?x[A]:Number(x[A]))}if(O.id1=x.src,O.id2=x.dst,O.type&&(O.EdgeType=O.type,delete O.type),O.directed&&(O.endArrow="arrow",delete O.directed),O.color="grey",O.type=O.enhances?"dashed":"solid","Round"==O.visualization?(O.type="quadratic",O.angle=O.angle):"Bezier"==O.visualization&&(O.controlpoints?(O.type="bezier",O.angle=O.angle):(O.type="solid",O.linksourcepointindex=0,O.linktargetpointindex=0)),O.hasOwnProperty("effect")){if(O.effect>=0)switch(O.effect){case 0:O.color="rgb(152,156,158)";break;case 1:O.color="rgb(0,128,0)";break;case 2:O.color="rgb(170,0,0)"}if(null!=O.mech){var F={};if(O.showhexagon){var _=O.hexagoncustomcolor||O.color,E=O.hexagonindex||0,V=O.hexagoncoordinate||.5,H=0==O.effect?"black":"rgb(242,216,0)",G=function(t){return{label:t,labelColor:H,shape:"hexagon",color:_,index:E,pos:V}};switch(O.mech){case-1:F=G("");break;case 0:F=G("?");break;case 2:F=G("CM");break;case 3:F=G("+P");break;case 4:F=G("-P");break;case 5:F=G("B");break;case 6:F=G("Cn");break;case 7:F=G("T");break;case 8:F=G("C");break;case 9:F=G("TR");break;case 10:(F=G("GR")).labelColor="white",F.color="rgb(0,0,170)";break;case 11:F=G("CR");break;case 12:F=G("IE");break;case 14:(F=G("CS")).labelColor="white",F.color="rgb(0,0,170)";break;case 15:F=G("Z");break;case 16:F=G("Tn");break;case 20:F=G("cRT");break;case 21:F=G("PE");break;case 22:F=G("TE");break;case 24:F=G("M");break;case 31:F=G("SR");break;case 44:F=G("RG");break;default:F=G("")}""!=F.label&&(O.decoration=[F])}delete O.effect,delete O.mech,delete O.hexagonindex,delete O.hexagoncoordinate,delete O.showhexagon,delete O.hexagoncustomcolor}}if(O.broken&&(O.decoration||(O.decoration=[]),O.decoration.push({label:"X",labelColor:"purple",fontSize:20,shape:"square",color:"rgba(0,0,0,0)",index:O.brokenindex||0,pos:O.brokencoordinate||.5}),delete O.broken,delete O.brokenindex,delete O.brokencoordinate),O.weakens&&(O.decoration||(O.decoration=[]),O.decoration.push({label:"-x-",labelColor:"purple",fontSize:12,shape:"square",color:"rgba(0,0,0,0)",index:O.weakensindex||0,pos:O.weakenscoordinate||.5}),delete O.weakens,delete O.weakensindex,delete O.weakenscoordinate),O.disease&&(O.color="purple",O.thickness=2,delete O.disease),O.enhances&&(O.color="purple",O.thickness=2,delete O.enhances),delete O.appearance,delete O.src,delete O.dst,d.hasOwnProperty(O.id1)&&d.hasOwnProperty(O.id2)){var q,j,U,Y,W,$,Q,K,J,Z,tt,et,it,st=h[d[O.id1]],at=h[d[O.id2]],rt=st.x,nt=st.y,ot=.5*st.width,ht=.5*st.height,lt=at.x,ct=at.y,dt=.5*at.width,pt=.5*at.height;if(O.visualization&&"Right angle polyline"==O.visualization)if(q=O.linksourcepointindex?Math.floor((O.linksourcepointindex-1)/st.linkpointcount):-1,j=O.linksourcepointindex?(O.linksourcepointindex-st.linkpointcount*q)/(st.linkpointcount+1):0,O.firstleg&&"Vertical"==O.firstleg?(nt=(tt=!!O.controlpoints&&O.controlpoints[0][1])&&tt[1]>0?nt+ht:st.y>at.y||tt&&tt<0?nt-ht:nt+ht,0==q||2==q?rt=rt-ot+st.width*j:1==q?rt+=ot:3==q&&(rt-=ot),U="tb"):(rt=(tt=!!O.controlpoints&&O.controlpoints[0][0])&&tt>0?rt+ot:st.x>at.x||tt&&tt<0?rt-ot:rt+ot,1==q||3==q?nt=nt-ht+st.height*j:0==q?nt-=ht:2==q&&(nt+=ht),U="lr"),Y=O.linktargetpointindex?Math.floor((O.linktargetpointindex-1)/at.linkpointcount):-1,W=O.linktargetpointindex?(O.linktargetpointindex-at.linkpointcount*Y)/(at.linkpointcount+1):0,O.controlpoints?($=O.controlpoints.length%2?U:"tb"==U?"lr":"tb",it=O.controlpoints.length-1,et=O.controlpoints[it],O.linktargetpointindex?1==Y||3==Y?(st.x+et[0]>at.x?lt+=dt:lt-=dt,ct=ct-pt+at.height*W):0!=Y&&2!=Y||(lt=lt-dt+at.width*W,st.y+et[1]>at.y?ct+=pt:ct-=pt):(O.controlpoints.length%2?U==$&&"lr"==U&&(st.x+et[0]>at.x?lt+=dt:lt-=dt):lt=st.x+et[0]>at.x?lt+dt:lt-dt,O.controlpoints.length%2?U==$&&"lr"==U||(ct=st.y+et[1]>at.y?ct+pt:ct-pt):st.y+et[1]>at.y&&(ct+=pt))):O.firstleg&&"Vertical"==O.firstleg?(lt=st.x>at.x?lt+dt:lt-dt,1!=Y&&3!=Y||(ct=ct-pt+at.height*W)):(ct=st.y>at.y?ct+pt:ct-pt,0!=Y&&2!=Y||(lt=lt-dt+at.width*W)),O.controlpoints){if(O.elbows=[[rt,nt]],K=rt,J=nt,O.firstleg&&"Vertical"==O.firstleg){for(T=0;T<O.controlpoints.length;T++)T%2?K=rt+O.controlpoints[T][0]:J=nt+O.controlpoints[T][1],O.elbows.push([K,J]);O.controlpoints.length%2?O.elbows.push([lt,J]):O.elbows.push([K,ct])}else{for(T=0;T<O.controlpoints.length;T++)T%2?J=nt+O.controlpoints[T][1]:K=rt+O.controlpoints[T][0],O.elbows.push([K,J]);O.controlpoints.length%2?O.elbows.push([K,ct]):O.elbows.push([lt,J])}O.elbows.push([lt,ct])}else O.firstleg&&"Vertical"==O.firstleg?O.elbows=[[rt,nt],[rt,ct],[lt,ct]]:O.elbows=[[rt,nt],[lt,nt],[lt,ct]];else if(O.controlpoints&&null!=O.linksourcepointindex&&null!=O.linktargetpointindex&&O.id1!=O.id2){if(O.linksourcepointindex||O.controlpoints)if(tt=O.controlpoints?O.controlpoints[0]:[0,0],0==O.linksourcepointindex)Y=o(rt,nt,rt+tt[0],nt+tt[1],st),Q=this.getCoordinateAtDistance(rt,nt,rt+tt[0],nt+tt[1],Y),Z=this.getRadians(rt,nt,rt+tt[0],nt+tt[1]),rt=Q[0],nt=Q[1],-Y*-Math.cos(Z),Y*Math.sin(Z);else switch(q=Math.floor((O.linksourcepointindex-1)/st.linkpointcount),j=(O.linksourcepointindex-st.linkpointcount*q)/(st.linkpointcount+1),q){case 0:0,rt=st.width*j+rt-ot,nt-=ht;break;case 1:0,rt+=ot,nt=st.height*j+nt-ht;break;case 2:0,rt=st.width*j+rt-ot,nt+=ht;break;case 3:0,rt-=ot,nt=st.height*j+nt-ht}if(O.linktargetpointindex||O.controlpoints)if(et=O.controlpoints?this.cloneObject(O.controlpoints[O.controlpoints.length-1]):[0,0],0==O.linktargetpointindex)O.controlpoints&&(et[0]=lt-(rt+et[0]),et[1]=ct-(nt+et[1])),Y=o(lt,ct,lt+et[0],ct+et[1],at),Q=this.getCoordinateAtDistance(lt,ct,lt+et[0],ct+et[1],-Y),Z=this.getRadians(lt,ct,lt+et[0],ct+et[1]),lt=Q[0],ct=Q[1];else switch(Y=Math.floor((O.linktargetpointindex-1)/at.linkpointcount),W=(O.linktargetpointindex-at.linkpointcount*Y)/(at.linkpointcount+1),Y){case 0:lt=at.width*W+lt-dt,ct-=pt;break;case 1:lt+=dt,ct=at.height*W+ct-pt;break;case 2:lt=at.width*W+lt-dt,ct+=pt;break;case 3:lt-=dt,ct=at.height*W+ct-pt}O.elbows=[];for(T=0;T<O.controlpoints.length;T++)O.elbows.push([rt+O.controlpoints[T][0]+5,nt+O.controlpoints[T][1]]);O.elbows.unshift([rt,nt]),O.elbows.push([lt,ct])}else if(O.id1==O.id2)(q=O.linksourcepointindex?Math.floor((O.linksourcepointindex-1)/st.linkpointcount):-1)==(Y=O.linktargetpointindex?Math.floor((O.linktargetpointindex-1)/at.linkpointcount):-1)?O.self={dir:O.angle>0,pos:0==q?"top":1==q?"right":q="bottom",size:20,end:"arrow"}:q>Y||0==q&&3==Y?O.self={dir:O.angle>0,pos:0==q?"topLeft":q="topRight",size:20,end:"arrow"}:(Y>q||0==Y&&3==q)&&(O.self={dir:O.angle>0,pos:0==q?"topRight":1==q?"bottomRight":2==q?"bottomLeft":"topLeft",size:20,end:"arrow"});else if(O.linksourcepointindex&&(q=O.linksourcepointindex?Math.floor((O.linksourcepointindex-1)/st.linkpointcount):-1,j=O.linksourcepointindex?(O.linksourcepointindex-st.linkpointcount*q)/(st.linkpointcount+1):0,0==q||2==q?rt=rt-ot+st.width*j:nt=nt-ht+st.height*j),O.linktargetpointindex&&(Y=O.linktargetpointindex?Math.floor((O.linktargetpointindex-1)/at.linkpointcount):-1,W=O.linktargetpointindex?(O.linktargetpointindex-at.linkpointcount*Y)/(at.linkpointcount+1):0,0==Y||2==Y?lt=lt-dt+at.width*W:ct=ct-pt+at.height*W),O.linksourcepointindex||O.linktargetpointindex){if(O.linksourcepointindex){switch(q){case 0:nt-=ht;break;case 1:rt+=ot;break;case 2:nt+=ht;break;case 3:rt-=ot}if(O.linktargetpointindex)switch(Y){case 0:ct-=pt;break;case 1:lt+=dt;break;case 2:ct+=pt;break;case 3:lt-=dt}else Y=o(lt,ct,rt,nt,at),lt=(Q=this.getCoordinateAtDistance(lt,ct,rt,nt,Y))[0],ct=Q[1]}else{switch(Y){case 0:ct-=pt;break;case 1:lt+=dt;break;case 2:ct+=pt;break;case 3:lt-=dt}Y=o(rt,nt,lt,ct,st),rt=(Q=this.getCoordinateAtDistance(rt,nt,lt,ct,Y))[0],nt=Q[1]}O.elbows=[[rt,nt],[lt,ct]]}delete O.linksourcepointindex,delete O.linktargetpointindex,delete O.controlpoints,delete O.visualization,delete O.firstleg,l.push(O)}}}}}p.sort((function(t,e){return h[t].zorder-h[e].zorder==0?t-e:h[t].zorder-h[e].zorder}));var gt=[];for(m=0;m<p.length;m++)gt.push(h[p[m]]);h=gt}else alert("Ooops! Not a Metabase xgmml file!");var ut="Number of Nodes: "+h.length+"\nNumber of Edges: "+l.length+"\n";ut=ut.replace(/\n/g,"<br>");var mt={data:{nodes:h,edges:l},config:{adjustBezier:!1,graphType:"Network",calculateLayout:!1,showAnimation:!1,networkNodesOnTop:!1,showNodeNameThreshold:2e4,networkFreeze:!1,preScaleNetwork:!1,moveParentsWithChildren:!0,ignoreEventlessOrder:!0,networkVendor:"Metabase"},renderTo:e,events:s,uploadFile:!this.dataString,afterRender:[["flashInfoSpan",[100,100,ut,5e3]],["appendNetworkDataFromURL",[]]]};if(i)for(var A in i)mt.config[A]=i[A];var ft=!1,yt=this.dataURL||this.dataString,xt=this.cloneObject(this.meta.config.user);if("Network"==this.graphType){for(var A in this.meta.config.user)mt.config[A]=this.meta.config.user[A];ft=function(t){t.meta.config.remote={data:yt,config:xt},t.networkFreeze=!0}}this.updateRemoteData(mt,ft),this.hideMask()},this.gexfToCX=function(t,e,i,s){var a=[],r=[],n=!0,o=t.childNodes[0];if("gexf"==o.tagName.toLowerCase())for(var h=0;h<o.childNodes.length;h++){var l=o.childNodes[h];if(l.nodeName&&"graph"==l.nodeName.toLowerCase())for(var c=0;c<l.childNodes.length;c++){var d=l.childNodes[c];if(d.nodeName&&"nodes"==d.nodeName.toLowerCase())for(var p=0;p<d.childNodes.length;p++){var g=d.childNodes[p];if(g.nodeName&&"node"==g.nodeName.toLowerCase()){var u=this.XMLToJSON(g),m={};if(u.id){for(var f in u)switch(f.toLowerCase()){case"id":m.id=u.id;break;case"label":m.name=u.label;break;case"color":m.color="rgb("+u[f][0].r+","+u[f][0].g+","+u[f][0].b+")";break;case"position":m.x=Number(u[f][0].x),m.y=Number(u[f][0].y),m.z=Number(u[f][0].z),n=!1;break;case"size":m.width=Number(u[f][0].value),m.height=Number(u[f][0].value)}a.push(m)}}}else if(d.nodeName&&"edges"==d.nodeName.toLowerCase())for(p=0;p<d.childNodes.length;p++){var y=d.childNodes[p];if(y.nodeName&&"edge"==y.nodeName.toLowerCase()){var x={};(u=this.XMLToJSON(y)).source&&u.target&&(x.id1=u.source,x.id2=u.target,r.push(x))}}}}else alert("Ooops! Not a Gephi gexf file!");var v="Number of Nodes: "+a.length+"\nNumber of Edges: "+r.length+"\n";v=v.replace(/\n/g,"<br>");var b={data:{nodes:a,edges:r},config:{graphType:"Network",calculateLayout:n,showAnimation:!1,networkNodesOnTop:!0,showNodeNameThreshold:2e4,networkFreeze:!1,preScaleNetwork:!1,moveParentsWithChildren:!0,ignoreEventlessOrder:!0,networkVendor:"Gephi"},renderTo:e,events:s,uploadFile:!this.dataString,afterRender:[["flashInfoSpan",[100,100,v,5e3]],["appendNetworkDataFromURL",[]]]};if(i)for(var f in i)b.config[f]=i[f];var A=!1,w=this.dataURL||this.dataString,C=this.cloneObject(this.meta.config.user);if("Network"==this.graphType){for(var f in this.meta.config.user)b.config[f]=this.meta.config.user[f];A=function(t){t.meta.config.remote={data:w,config:C},t.networkFreeze=!0}}this.updateRemoteData(b,A),this.hideMask()},this.parseGML=function(t){var e,i,s=("{\n"+t+"\n}").replace(/^(\s*)(\w+)\s*\[/gm,'$1"$2": {').replace(/^(\s*)\]/gm,"$1},").replace(/^(\s*)(\w+)\s+(.+)$/gm,'$1"$2": $3,').replace(/,(\s*)\}/g,"$1}"),a={},r=[],n=[],o=0;s=s.replace(/^(\s*)"node"/gm,(function(t,e){return e+'"node['+o+++']"'})),o=0,s=s.replace(/^(\s*)"edge"/gm,(function(t,e){return e+'"edge['+o+++']"'}));try{s=this.parseJSON(s)}catch(t){throw new SyntaxError("bad format")}if(!this.isObject(s.graph))throw new SyntaxError("no graph tag");return e=s.graph,i=function(t,e){var i,s,o=t.match(/^(\w+)\[(\d+)\]$/);o?(i=o[1],s=parseInt(o[2],10),"node"===i?r[s]=e:"edge"===i?(n[s]=e,n[s].id1=n[s].source,n[s].id2=n[s].target,delete n[s].source,delete n[s].target):a[t]=e):a[t]=e},Object.keys(e).forEach((function(t){i(t,e[t])})),a.nodes=r,a.edges=n,{data:a,config:{graphType:"Network"}}},this.arrayToCanvasXpress=function(t){var e,i=function(t){for(var e=function(t){if("[object Date]"===toString.call(t))return!0;"function"==typeof t.replace&&t.replace(/^\s+|\s+$/gm,"");return/(^\d{1,4}?[\.|\\/|-]\d{1,2}?[\.|\\/|-]\d{1,4})(\s*(?:0?[1-9]:[0-5]|1(?=[012])\d:[0-5])\d\s*[ap]m)?$/.test(t)},i=t.length,s=0;s<i;s++)if(null!=t[s]&&!e(t[s]))return!1;return!0},s=function(t){return null==t||!isNaN(parseFloat(t))&&isFinite(t)},a={y:{vars:[],smps:[],data:[]}},r="Scatter2D",n=t[0].filter(Number.isFinite),o=!1;if(0==n.length)n=t.shift();else{n=[],o=!0;for(var h=0;h<t[0].length;h++)n.push("C"+(h+1))}var l=[],c=!1;for(h=0;h<t.length;h++)l.push(t[h][0].toString()),t[h][0].toString().match(/\./)&&(c=!0);if((e=l).filter((function(t,i){return e.indexOf(t)===i})).length!=l.length||c){l=[];for(h=0;h<t.length;h++)l.push("R"+(h+1))}else for(var h=0;h<t.length;h++)t[h].shift(t[h][0]);if(n.length>t[0].length&&(n.shift(),!n.length==t[0].length))return!1;if(t[0].length!=t[t.length-1].length&&(t.pop(),l.pop(),t[0].length!=t[t.length-1].length))return!1;var d=i(l);if(d){n.unshift("Date");for(h=0;h<l.length;h++)t[h].unshift(new Date(l[h]));l=[];for(h=0;h<t.length;h++)l.push("R"+(h+1))}i(n);var p=[],g=[],u=0;for(h=0;h<n.length;h++){p[h]=!1;for(var m=0;m<l.length;m++)if(isNaN(t[m][h])){p[h]=!0;break}if(p[h])a.z={};else{for(m=0;m<l.length;m++)0==h&&d||(t[m][h]=null==t[m][h]||null==t[m][h]?null:!isNaN(parseFloat(t[m][h]))&&isFinite(t[m][h])?Number(t[m][h]):null);u++}}var f=!0,y={};for(h=0;h<p.length;h++){if(!p[h]&&!s(t[0][h])){f=!1;break}if(y.hasOwnProperty(t[0][h].toString())){f=!1;break}y[t[0][h].toString()]=!0}f&&o&&a.z&&(delete a.z,a.x={});var x,v=!1;if(u>1){var b=Math.ceil(.6*u),A=0;for(h=p.length-1;h>=0;h--)p[h]?A<b&&(v=!0):A++}if(f&&o){var w=1;for(h=0;h<n.length;h++)p[h]?a.x[t[0][h]]=[]:(a.y.vars.push("V"+w),w++);a.y.smps=["Time"];for(h=1;h<l.length;h++)g.push(l[h]),a.y.smps.push(l[h]);for(w=0,h=0;h<n.length;h++)if(p[h])for(m=0;m<l.length;m++)a.x[t[0][h]].push(0==m?"":t[m][h]);else{a.y.data[w]=[];for(m=0;m<l.length;m++)a.y.data[w][m]=t[m][h];w++}}else{for(h=0;h<l.length;h++)a.y.data[h]=[],a.y.vars.push(l[h]);for(h=0;h<n.length;h++)if(this.isCxplot){var C=!(!this.aes.hasOwnProperty("stringSampleFactors")||!this.aes.stringSampleFactors.includes(n[h]));if(p[h]||n[h]!=this.aes.x&&n[h]!=this.aes.y&&n[h]!=this.aes.z||C){a.z||(a.z={}),a.z[n[h]]=[];for(m=0;m<l.length;m++)a.z[n[h]].push(t[m][h])}else{a.y.smps.push(n[h]);for(var m=0;m<l.length;m++)a.y.data[m].push(t[m][h])}}else if(p[h]||this.metaData&&this.metaData.hasOwnProperty(n[h])){a.z[n[h]]=[];for(m=0;m<l.length;m++)a.z[n[h]].push(t[m][h])}else{a.y.smps.push(n[h]);for(m=0;m<l.length;m++)a.y.data[m].push(t[m][h])}}if(0==a.y.smps.length){b=a.y.data.length;a.y.data=[[]];for(h=0;h<b;h++)a.y.data[0].push(1);a.y.smps=a.y.vars,a.y.vars=["counts"],a.x=a.z,delete a.z,r="Bar"}else if(1==a.y.smps.length||v){a.y.data=(x=a.y.data)[0].map((function(t,e){return x.map((function(t){return t[e]}))})),a.y.vars=a.y.smps,a.y.smps=l,a.x=a.z,delete a.z,r="Bar"}return f&&o?{data:a,config:{graphType:r,xAxis:["Time"],yAxis:g,scatterType:"line"}}:{data:a,config:{graphType:r}}},this.getRDatasets=function(){var t=function(t){return function(e){t.Rdatasets=t.parseJSON(e)}}(this),e=this.RdatasetsURL+"datasets.json";this.ajaxRequest(e,!1,t)},this.getRLibraryDataSets=function(t){this.getDataSetListFromURL(this.RdatasetsURL+"json/"+t+"/datasets.json")},this.appendNetworkDataFromURL=function(){var t=this,e=this.appendNetworkData.length>0&&this.appendNetworkData.shift(),i=function(i){var s=0,a=0;i.match(/,/g)&&(s=i.match(/,/g).length),i.match(/\t/g)&&(a=i.match(/\t/g).length);var r=e.match(/\.csv$/)&&s>a?",":"\t",n=t.delimitedToArray(i,r,!1,!0);if(n&&!t.isArray(n)){var o="";n.fail>0&&(o=n.fail+" records couldn't be mapped to network data"),t.flashInfoSpan(100,150,n.rows+" "+n.type+" records added to network data\n"+o,5e3);for(var h=t.meta.config.user,l=["colorNodeBy","shapeNodeBy","sizeNodeBy","patternNodeBy","colorEdgeBy","SizeEdgeBy","decorations"],c=0;c<l.length;c++){var d=l[c];h.hasOwnProperty(d)&&(t[d]=h[d])}"node"==n.type?t.appendNodeData(n.data):t.appendEdgeData(n.data),t.appendNetworkData.length>0?t.appendNetworkDataFromURL():(t.draw({func:"appendNetworkDataFromURL"}),t.hideMask())}},s=function(e){"node"==e.type?t.appendNodeData(e.data):t.appendEdgeData(e.data),t.appendNetworkData.length>0?t.appendNetworkDataFromURL():(t.draw({func:"appendNetworkDataFromURL"}),t.hideMask())},a=function(t){return function(s){e.match(/\.txt$/)||e.match(/\.csv$/)||e.match(/\.tsv$/)||e.match(/\.tab$/)?i(s):(t.hideMask(),alert("Oooops! Not a CanvasXpress Network delimited file"))}}(this);if(e)if("string"==typeof e){var r=this.isValidString(e);switch(r.type){case"URL":this.ajaxRequest(e,!1,a);break;case"XML":alert("XML not supported!");break;case"JSON":s(r.data);case"DELIM":i(e)}}else s(e)},this.getDataFromURLOrString=function(t,e,s,a,r){if(this.dataURL){var n=this,o=this.dataURL.match(/\.png$/)?"arraybuffer":!!this.dataURL.match(/ml.bz2$/)&&"binary",h=e&&"Network"==e.graphType,l=function(i){return function(o){var l=function(t){try{return n.parseJSON(t)}catch(t){return!1}}(o);if(i.remoteService=i.dataURL,i.remoteServiceType="file",i.isObject(l)){if(Array.isArray(l))return i.setDataSetsFromURL(o)}else if(i.dataURL.match(/\.png$/))l=i.parseDataFromPNG(o);else if(i.dataURL.match(/\.svg$/))l=i.SVGtoCX(o);else if(i.dataURL.match(/\.txt$/)||i.dataURL.match(/\.csv$/)||i.dataURL.match(/\.tsv$/)||i.dataURL.match(/\.tab$/))l=i.delimitedToArray(o,!1,!0,h,!!h&&"guess");else{if(i.dataURL.match(/.gexf/)){var c=i.parseXML(o);return i.gexfToCX(c,g)}if(i.dataURL.match(/\ml$/)||i.dataURL.match(/\ml.bz2$/)){var d=(c=i.dataURL.match(/\ml.bz2$/)?i.parseXML(i.bz2(o)):i.parseXML(o)).childNodes[0],p=c.childNodes[2],g=t||i.newId("-cX-data-url-");if(d.tagName&&"map"==d.tagName.toLowerCase())return i.metabaseToCX(c,g);if(d.tagName&&"graph"==d.tagName.toLowerCase())return i.cytoscapeToCX(c,g);if(d.tagName&&"pathway"==d.tagName.toLowerCase())return i.wikipathwayToCX(c,g);if(p&&p.tagName&&"pathway"==p.tagName.toLowerCase())return i.keggToCX(c,g)}}l.records=0,l.renderTo=t||(l.renderTo?l.renderTo:i.newId("-cX-data-url-")),l.config=e||(l.config?l.config:{graphType:"Scatter2D"}),"Network"==l.config.graphType&&(l.config.appendNetworkData=i.appendNetworkData),l.events=s||!!l.events&&l.events,l.info=a?a.toString().replace(/'/g,"'").replace(/"/g,"'"):!!l.info&&l.info.toString().replace(/'/g,"'").replace(/"/g,"'"),l.noValidate=!0,l.afterRender||(l.afterRender=[]),"Network"==l.config.graphType&&l.afterRender.push(["appendNetworkDataFromURL",[]]);var u=i.dataURL,m=i.cloneObject(i.meta.config.user);i.updateRemoteData(l,(function(t){t.meta.config.remote={data:u,config:m},t.reInitStack(l),r&&r.apply(t)}))}}(this);this.ajaxRequest(this.dataURL,!1,l,o)}else if(this.topoJSONURL){l=function(t){return function(e){var s=t.parseJSON(e),a=!t.isExample&&t.cloneObject(t.data),n=t.cloneObject(t.meta.config.user),o={renderTo:t.target,data:!t.isExample&&t.data,config:t.meta.config.user};window[t.mapId]&&t.isObject(window[t.mapId])||(o.config.remoteTransitionEffect="none",window[t.mapId]=s,t.remoteServiceType="file",t.updateRemoteData(o,(function(t){for(i in t.meta.config.remote={data:a,config:n},t.reInitStack(o),CanvasXpress.chain)CanvasXpress.chain[i]==t.target&&CanvasXpress.stack[i].hasOwnProperty("afterRender")&&t.afterRender(CanvasXpress.stack[i].afterRender);r&&r()})))}}(this);this.ajaxRequest(this.topoJSONURL,!1,l)}else this.dataString&&this.loadXML(this.dataString,t,e,s)},this.getDataSetListFromURL=function(t){this.remoteService=t,this.ajaxRequest(t,!1,this.setDataSetsFromURL)},this.setDataSetsFromURL=function(t){return function(e){for(var i=function(t){var e=d.parseJSON(t);d.updateRemoteData({data:e,ids:d.remoteIds,records:d.remoteIds.length})},s=t.parseJSON(e),a=s[0][1],r=[],n=0;n<s.length;n++)r.push(s[n][0]);var o=function(){for(var e=t.$("container-"+t.target).parentNode;e.id.match("canvasXpressRemoteWindow");)e=e.parentNode;return e.id||(e.id=t.newId("-cX-data-sets-url-container-")),e.id}(),h=t.$("container-"+t.target).parentNode,l=t.newId("-cX-data-sets-"),c=t.$cX("canvas",{id:l,width:t.originalWidth,height:t.originalHeight});t.castCanvasAttributes(c),h.appendChild(c);var d=new CanvasXpress(l,!1,{remoteService:t.remoteService});t.remoteIds=r,t.destroy(t.target),d.remoteData=s,d.remoteParentId=o,d.remoteIds=r,d.remoteServiceType="file",d.ajaxRequest(a,!1,i)}}(this),this.initStack=function(t,e,i,s,a){CanvasXpress.stack||(CanvasXpress.stack={});var r=this.$(this.target);r&&(CanvasXpress.stack[this.target]={version:CanvasXpress.factory.version,renderTo:this.target,data:this.isCxplot&&this.isArray(t)?this.cloneObject(this.data):!!t&&this.cloneObject(t),config:e||!1,events:i||!1,info:!!s&&s.toString().replace(/'/g,"'").replace(/"/g,"'"),afterRenderInit:a||!1,afterRender:[["setDimensions",[r.originalWidth,r.originalHeight,!0]]],state:[],stateIndex:0,noValidate:!0})},this.reInitStack=function(t){if(t.data){if(t.config.stringSampleFactors)for(var e=0;e<t.config.stringSampleFactors.length;e++){var i=t.config.stringSampleFactors[e];if(t.data.x&&t.data.x[i])for(var s=0;s<t.data.x[i].length;s++)t.data.x[i][s]=t.data.x[i][s]}if(t.config.stringVariableFactors)for(e=0;e<t.config.stringVariableFactors.length;e++){i=t.config.stringVariableFactors[e];if(t.data.z&&t.data.z[i])for(s=0;s<t.data.z[i].length;s++)t.data.z[i][s]=t.data.z[i][s]}CanvasXpress.stack[this.target].data=t.data}},this.getStack=function(){return CanvasXpress.stack[this.target].afterRender},this.getConfigState=function(){var t={meta:!0,animationOn:!0,arrows:!0,beaconImage:!0,bubble:!0,changingColorItemOn:!0,changingColorOn:!0,changingSliderItemOn:!0,currentCanvasContext:!0,draggingOn:!0,doubleClick:!0,events:!0,functions:!0,gantt:!0,images:!0,info:!0,infoStartTime:!0,isHighlightCanvas:!0,isTransitionOn:!0,keyOn:!0,lastCanvasEvent:!0,lastMousemove:!0,lines:!0,moveSankeyId:!0,movingOn:!0,nodes:!0,panningOn:!0,patterns:!0,resetOn:!0,resizeCanvasCursorShow:!0,shapes:!0,sizes:!0,skipClick:!0,skipTransition:!0,times:!0,touchEvent:!0,touches:!0,transitionIter:!0,userId:!0,validGraphTypes:!0,vennCompartments:!0,xMouseDown:!0,yMouseDown:!0};"Network"!=this.graphType&&(t.data=!0);for(var e=Object.keys(this),i=this.getObjectArray(CanvasXpress.config),s=[],a=0;a<e.length;a++){var r=e[a];i.hasOwnProperty(r)?s.push(r):this.isFunction(this[r])||t.hasOwnProperty(r)||s.push(r)}var n={};for(a=0;a<s.length;a++){n[r=s[a]]=this.isObject(this[r])?this.cloneObject(this[r],!0):this[r]}return n},this.setConfigState=function(t){t||(t=0);var e=CanvasXpress.stack[this.target].state[t];for(var i in e)this[i]=e[i];var s={calculateLayout:this.calculateLayout};for(var i in this.calculateLayout=!1,this.skipStack=!0,this.draw({func:"setConfigState",par:[t]}),this.skipStack=!1,s)this[i]=s[i]},this.stack=function(t){if(!this.skipStack&&t){var e=t.func,i=t.par?this.cleanEventInArguments(t.par):[],s=t.prop?this.cloneObject(t.prop):{},a=(new Date).getTime(),r=CanvasXpress.stack[this.target],n=r?r.afterRender.length:0;if(e&&r){switch(e){case"setDimensions":if(i&&i[0]==this.width&&i[1]==this.height)return;i&&i[5]&&(e="clickGraphMaxMin",i=i[5]>0?[!1,!1,!0]:[!1,this.maximized,!1]),r.afterRender.push([e,i,{},a]);break;case"broadcastDraw":e=i[0].func,s=(i=i[0]&&i[0].par?this.cleanEventInArguments(i[0].par):[])[0]&&i[0].prop||{},e&&r.afterRender.push([e,i,s,a]);break;case"drawIndicesAfterPannEvent":case"drawIndicesAfterWheelEvent":case"drawRangesAfterWheelEvent":case"updateDragCircular":case"updateDragScatter":case"updateDragNetwork":case"updateDragGenome":case"updateDragMap":case"updateDragMarker":var o=r.afterRender,h=r.state,l="updateDragNetwork"!=e||!i[0].shiftKey;if(n>1&&o[n-1][0]==e&&l)a-o[n-1][3]<1e3&&(o.pop(),h.pop());r.afterRender.push([e,i,s,a]);break;case"handleWheelEvent":r.afterRender.push([e,i,s,a]);break;case"resortSankeyDONOTUSE":o=r.afterRender,h=r.state;if(n>1&&"resortSankey"==o[n-1][0])a-o[n-1][3]<1e3&&(o.pop(),h.pop());default:r.afterRender.push([e,i,s,a])}if(!this.disableUndoRedoKeys&&r.stateIndex<r.state.length-1&&r.state.splice(r.stateIndex,r.state.length-1),this.meta.stack.push([e,this.meta.time.start,this.meta.time.elapsed]),!this.disableUndoRedoKeys){var c=this.getConfigState();r.state.push(c),r.stateIndex=r.state.length-1}}}},this.reproducePlay=function(t){return function(e){t.reproduce(e,!0)}}(this),this.reproduce=function(t){return function(e,i,s){t.maximized&&t.clickGraphMaxMin(),t.motionBy||(t.skipStack=!0,t.reproducing=!0,t.resetMenus(),t.resetLinks(),t.resetSelected(e,!0),t.meta.ids={},s?(t.setMotionObject(),t.clickMotion(e,!0,!0)):(t.addMotionDiv(e),(e&&e.shiftKey||i)&&t.clickMotion(e,!0)))}}(this),this.animate=function(t){return function(e){t.replot(e,!0)}}(this),this.replot=function(t){return function(e,i,s){var a=t.cloneObject(CanvasXpress.stack[t.target]);if(this.isRawData||a.data.y&&delete a.data.y.data,this.isQQ=!1,this.isCDF=!1,a.config.showTransition=!!i,s){var r=t.cloneObject(a.afterRender);a.afterRender=[];for(var n=0;n<r.length;n++){var o=r[n];"addCDFPlot"==o[0]&&a.config.decorations&&delete a.config.decorations.cdf,o&&o[4]&&a.afterRender.push(o)}}t.maximized&&t.clickGraphMaxMin(),t.destroy(t.target,!0),new CanvasXpress(a)}}(this)},CanvasXpress.prototype.initSave=function(){!function(t){if(t.URL=t.URL||t.webkitURL,t.Blob&&t.URL)try{return void new Blob}catch(t){}var e=t.BlobBuilder||t.WebKitBlobBuilder||t.MozBlobBuilder||function(t){var e=function(t){return Object.prototype.toString.call(t).match(/^\[object\s(.*)\]$/)[1]},i=function(){this.data=[]},s=function(t,e,i){this.data=t,this.size=t.length,this.type=e,this.encoding=i},a=i.prototype,r=s.prototype,n=t.FileReaderSync,o=function(t){this.code=this[this.name=t]},h="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),l=h.length,c=t.URL||t.webkitURL||t,d=c.createObjectURL,p=c.revokeObjectURL,g=c,u=t.btoa,m=t.atob,f=t.ArrayBuffer,y=t.Uint8Array,x=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(s.fake=r.fake=!0;l--;)o.prototype[h[l]]=l+1;return c.createObjectURL||(g=t.URL=function(t){var e,i=document.createElementNS("http://www.w3.org/1999/xhtml","a");return i.href=t,"origin"in i||("data:"===i.protocol.toLowerCase()?i.origin=null:(e=t.match(x),i.origin=e&&e[1])),i}),g.createObjectURL=function(t){var e,i=t.type;return null===i&&(i="application/octet-stream"),t instanceof s?(e="data:"+i,"base64"===t.encoding?e+";base64,"+t.data:"URI"===t.encoding?e+","+decodeURIComponent(t.data):u?e+";base64,"+u(t.data):e+","+encodeURIComponent(t.data)):d?d.call(c,t):void 0},g.revokeObjectURL=function(t){"data:"!==t.substring(0,5)&&p&&p.call(c,t)},a.append=function(t){var i=this.data;if(y&&(t instanceof f||t instanceof y)){for(var a="",r=new y(t),h=0,l=r.length;h<l;h++)a+=String.fromCharCode(r[h]);i.push(a)}else if("Blob"===e(t)||"File"===e(t)){if(!n)throw new o("NOT_READABLE_ERR");var c=new n;i.push(c.readAsBinaryString(t))}else t instanceof s?"base64"===t.encoding&&m?i.push(m(t.data)):"URI"===t.encoding?i.push(decodeURIComponent(t.data)):"raw"===t.encoding&&i.push(t.data):("string"!=typeof t&&(t+=""),i.push(unescape(encodeURIComponent(t))))},a.getBlob=function(t){return arguments.length||(t=null),new s(this.data.join(""),t,"raw")},a.toString=function(){return"[object BlobBuilder]"},r.slice=function(t,e,i){var a=arguments.length;return a<3&&(i=null),new s(this.data.slice(t,a>1?e:this.data.length),i,this.encoding)},r.toString=function(){return"[object Blob]"},r.close=function(){this.size=0,delete this.data},i}(t);t.Blob=function(t,i){var s=i&&i.type||"",a=new e;if(t)for(var r=0,n=t.length;r<n;r++)Uint8Array&&t[r]instanceof Uint8Array?a.append(t[r].buffer):a.append(t[r]);var o=a.getBlob(s);return!o.slice&&o.webkitSlice&&(o.slice=o.webkitSlice),o};var i=Object.getPrototypeOf||function(t){return t.__proto__};t.Blob.prototype=i(new t.Blob)}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content||this),function(t){var e,i=t.Uint8Array,s=t.HTMLCanvasElement,a=s&&s.prototype,r=/\s*;\s*base64\s*(?:;|$)/i,n="toDataURL",o=function(t){for(var s,a,r=t.length,n=new i(r/4*3|0),o=0,h=0,l=[0,0],c=0,d=0;r--;)a=t.charCodeAt(o++),255!==(s=e[a-43])&&void 0!==s&&(l[1]=l[0],l[0]=a,d=d<<6|s,4===++c&&(n[h++]=d>>>16,61!==l[1]&&(n[h++]=d>>>8),61!==l[0]&&(n[h++]=d),c=0));return n};i&&(e=new i([62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,0,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51])),!s||a.toBlob&&a.toBlobHD||(a.toBlob||(a.toBlob=function(t,e){if(e||(e="image/png"),this.mozGetAsFile)t(this.mozGetAsFile("canvas",e));else if(this.msToBlob&&/^\s*image\/png\s*(?:$|;)/i.test(e))t(this.msToBlob());else{var s,a=Array.prototype.slice.call(arguments,1),h=this[n].apply(this,a),l=h.indexOf(","),c=h.substring(l+1),d=r.test(h.substring(0,l));Blob.fake?((s=new Blob).encoding=d?"base64":"URI",s.data=c,s.size=c.length):i&&(s=d?new Blob([o(c)],{type:e}):new Blob([decodeURIComponent(c)],{type:e})),t(s)}}),!a.toBlobHD&&a.toDataURLHD?a.toBlobHD=function(){n="toDataURLHD";var t=this.toBlob();return n="toDataURL",t}:a.toBlobHD=a.toBlob)}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content||this);var t="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:this;function e(t,e,i){var s=new XMLHttpRequest;s.open("GET",t),s.responseType="blob",s.onload=function(){a(s.response,e,i)},s.onerror=function(){console.error("could not download file")},s.send()}function i(t){var e=new XMLHttpRequest;return e.open("HEAD",t,!1),e.send(),e.status>=200&&e.status<=299}function s(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(i){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var a=t.saveAs||"object"!=typeof window||window!==t?function(){}:"download"in HTMLAnchorElement.prototype?function(a,r,n){var o=t.URL||t.webkitURL,h=document.createElement("a");r=r||a.name||"download",h.download=r,h.rel="noopener","string"==typeof a?(h.href=a,h.origin!==location.origin?i(h.href)?e(a,r,n):s(h,h.target="_blank"):s(h)):(h.href=o.createObjectURL(a),setTimeout((function(){o.revokeObjectURL(h.href)}),4e4),setTimeout((function(){s(h)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,a,r){if(a=a||t.name||"download","string"==typeof t)if(i(t))e(t,a,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout((function(){s(n)}))}else navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Depricated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t}(t,r),a)}:function(i,s,a,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof i)return e(i,s,a);var n="application/octet-stream"===i.type,o=/constructor/i.test(t.HTMLElement)||t.safari,h=/CriOS\/[\d]+/.test(navigator.userAgent);if((h||n&&o)&&"object"==typeof FileReader){var l=new FileReader;l.onloadend=function(){var t=l.result;t=h?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=t:location=t,r=null},l.readAsDataURL(i)}else{var c=t.URL||t.webkitURL,d=c.createObjectURL(i);r?r.location=d:location.href=d,r=null,setTimeout((function(){c.revokeObjectURL(d)}),4e4)}};this.saveAs=a},CanvasXpress.prototype.initConfig=function(){this.defDoc=function(t){var e=CanvasXpress.doc;e.M[t]||(e.M[t]={}),e.M[t].P||(e.M[t].P=[])},this.defColor=function(t,e,i,s,a){this[t+"Color"]=0!=e&&(e||"rgb(0,0,0)");var r=CanvasXpress.doc,n=[t+"Color"];a.push.apply(a,n),this.defDoc(s),r.M[s].P=r.M[s].P.concat(n),r.P[t+"Color"]={C:"Color for the "+i+"<br>",D:this[t+"Color"],H:["{[*]}"],M:s,T:"color"}},this.defColor2=function(t,e,i,s,a){this[t]=e||"rgb(0,0,0)";var r=CanvasXpress.doc,n=[t];a.push.apply(a,n),this.defDoc(s),r.M[s].P=r.M[s].P.concat(n),r.P[t]={C:"Color for the "+i+"<br>",D:this[t],H:["{[*]}"],M:s,T:"color"}},this.defOption=function(t,e,i,s,a,r){this[t]=e||!1;var n=CanvasXpress.doc,o=[t];r.push.apply(r,o),this.defDoc(a),n.M[a].P=n.M[a].P.concat(o),n.P[t]={C:s+"<br>",D:this[t],H:["{[*]}"],M:a,O:i,T:"string"}},this.defOption2=function(t,e,i,s,a,r){this[t]=e||"";var n=CanvasXpress.doc,o=[t];r.push.apply(r,o),this.defDoc(a),n.M[a].P=n.M[a].P.concat(o),n.P[t]={C:s+"<br>",D:this[t],H:["{[*]}"],M:a,O:i,T:"string"}},this.defString=function(t,e,i,s,a){if(this[t]=e||!1,a){var r=CanvasXpress.doc,n=[t];a.push.apply(a,n),this.defDoc(s),r.M[s].P=r.M[s].P.concat(n),r.P[t]={C:i+"<br>",D:this[t],H:["{[*]}"],M:s,T:"string"}}},this.defInteger=function(t,e,i,s,a){if(this[t]=null==e?null:e||0,a){var r=CanvasXpress.doc,n=[t];a.push.apply(a,n),this.defDoc(s),r.M[s].P=r.M[s].P.concat(n),r.P[t]={C:i+"<br>",D:this[t],H:["{[*]}"],M:s,T:"integer"}}},this.defFloat=function(t,e,i,s,a){if(this[t]=null!=e?e:null,a){var r=CanvasXpress.doc,n=[t];a.push.apply(a,n),this.defDoc(s),r.M[s].P=r.M[s].P.concat(n),r.P[t]={C:i+"<br>",D:this[t],H:["{[*]}"],M:s,T:"float"}}},this.defBoolean=function(t,e,i,s,a){if(this[t]=e||!1,a){var r=CanvasXpress.doc,n=[t];a.push.apply(a,n),this.defDoc(s),r.M[s].P=r.M[s].P.concat(n),r.P[t]={C:i+"<br>",D:this[t],H:["{[*]}"],M:s,T:"boolean"}}},this.defArray=function(t,e,i,s,a){if(this[t]=e||[],a){var r=CanvasXpress.doc,n=[t];a.push.apply(a,n),this.defDoc(s),r.M[s].P=r.M[s].P.concat(n),r.P[t]={C:i+"<br>",D:this[t],H:["{[*]}"],M:s,T:"array"}}},this.defArray2=function(t,e,i,s,a){if(this[t]=0!=e&&(e||[]),a){var r=CanvasXpress.doc,n=[t];a.push.apply(a,n),this.defDoc(s),r.M[s].P=r.M[s].P.concat(n),r.P[t]={C:i+"<br>",D:this[t],H:["{[*]}"],M:s,T:"array"}}},this.defObject=function(t,e,i,s,a){if(this[t]=0!=e&&{},a){var r=CanvasXpress.doc,n=[t];a.push.apply(a,n),this.defDoc(s),r.M[s].P=r.M[s].P.concat(n),r.P[t]={C:i+"<br>",D:this[t],H:["{[*]}"],M:s,T:"object"}}},this.defFilter=function(t,e,i,s,a){if(this[t]=e||{cases:[],comp:[],op:[],type:[],value:[]},a){var r=CanvasXpress.doc,n=[t];a.push.apply(a,n),this.defDoc(s),r.M[s].P=r.M[s].P.concat(n),r.P[t]={C:i+"<br>",D:this[t],H:["{[*]}"],M:s,T:"filter"}}},this.defURL=function(t,e,i,s,a){if(this[t]=e||!1,a){var r=CanvasXpress.doc,n=[t];a.push.apply(a,n),this.defDoc(s),r.M[s].P=r.M[s].P.concat(n),r.P[t]={C:i+"<br>",D:this[t],H:["{[*]}"],M:s,T:"url"}}},this.defRect=function(t,e,i,s,a,r,n,o){this.defColor(t,e||"rgba(0,0,0,0)",r,n,o),this.defColor(t+"Border",i||"rgba(0,0,0,0)","border in "+r,n,o),this.defFloat(t+"BorderSize",s||.5,"Size for the border line in "+r,n,o),this.defOption(t+"BorderLineType",a||"solid",["rect","solid","spline","dotted","dashed","dotdash","longdash","twodash"],"Type of line for the border in "+r,n,o)},this.defText=function(t,e,i,s,a,r,n,o,h,l,c){this.defOption2(t+"FontStyle",e||"",["","bold","italic","bold italic"],"Font style for the "+h,l,c),this.defColor(t,0!=i&&(i||"rgb(0,0,0)"),"text in "+h,l,c),this.defInteger(t+"FontSize",s||12,"Font size for the text in "+h+". Be aware that auto scaling font must be turned off for this property to take effect. A more convenient way to modify the size is to use the "+t+"ScaleFontFactor",l,c),this.defFloat(t+"ScaleFontFactor",a||1,"Scaling factor used to increase or decrease the "+h+" font size in the canvas",l,c),this.defOption(t+"Align",r||"center",["left","center","right"],"Align for the "+h,l,c),this.defInteger(t+"Rotate",n||0,"Rotation in degrees for the "+h,l,c),this.defFloat(t+"Margin",o||5,"Margin used in "+h,l,c)},this.defDendrogram=function(t,e,i,s,a,r,n,o){var h=t.toLowerCase(),l="Var"==t?["top","bottom"]:["left","right"];this.defShow(t+"Dendrogram",0!=e,r,n,o),this.defString(h+"DendrogramNewick",i||!1,"Dendrogram in Newick format for the "+r,n,o),this.defPosition(h+"Dendrogram",s,l,r+" in the plot. It could be top, bottom, right or left depending on the orientation of the graph",n,o),this.defOption("color"+t+"DendrogramBy",a||!1,[!1],"Name of metadata annotation to color the "+r,n,o)},this.defLine=function(t,e,i,s,a,r,n,o,h){this.defColor(t,e,n,o,h),this.defFloat(t+"Size",i||.5,"Size for the "+n,o,h),this.defFloat(t+"Length",s||null,"Length for the "+n,o,h),this.defLineType(t,a,n,o,h),this.defShow2(t,r,n,o,h)},this.defHistogram=function(t,e,i,s,a,r){this.defBoolean(t+"HistogramShow",0!=e,"Flag to show/hide the histogram in the "+s,a,r),this.defInteger(t+"HistogramHeight",i||80,"Size in pixels for the histogram in the "+s,a,r)},this.defRug=function(t,e,i,s,a,r,n){this.defBoolean(t+"RugShow",0!=e,"Flag to show/hide a data rug in the "+a,r,n),this.defInteger(t+"RugHeight",i||80,"Size in pixels for the data rug in the "+a,r,n),this.defOption(t+"RugPosition",!!s&&s[0],s,"Position for the data rug in the"+a,r,n)},this.defPosition=function(t,e,i,s,a,r){this.defOption(t+"Position",e||"right",i,"Position for the "+s,a,r)},this.defDirection=function(t,e,i,s,a){this.defOption(t+"Direction",e||"vertical",["vertical","horizontal"],"Direction for "+i,s,a)},this.defShow=function(t,e,i,s,a){this.defBoolean("show"+t,0!=e,"Flag to show/hide the "+i,s,a)},this.defShow2=function(t,e,i,s,a){this.defBoolean(t+"Show",0!=e,"Flag to show/hide the "+i,s,a)},this.defLineType=function(t,e,i,s,a){this.defOption(t+"LineType",e||"solid",["rect","solid","spline","dotted","dashed","dotdash","longdash","twodash"],"Type of line for the "+i,s,a)},this.defTransform=function(t,e,i,s,a){this.defOption(t+"Transform",e||!1,[!1,"log2","log10","exp2","exp10","percentile"],"Type of transformation for values in "+i,s,a)},this.defAxis=function(t,e,i,s){var a=t.toUpperCase(),r="Y"==a?["Top","Bottom"]:"X"==a?["Right","Left"]:[],n="Y"==a?["left","rigth","both"]:"X"==a&&["bottom","top","both"],o="Y"==a?" on the left":"X"==a?" on the bottom":"",h="Y"==a?" on the right":"X"==a?" on the top":"",l="Z"==a?10:5;"R"!=a&&(this.defArray(t+"Axis",[],"Name of the samples, groups or variables to be displayed in the "+e,i,s),this.defArray(t+"AxisIndices",[])),"X"==a&&this.defArray(t+"Axis2",[],"Name of the samples, groups or variables to be displayed in the second "+e,i,s),this.defInteger(t+"AxisCurrent",0,"Sample id that is currently displayed in the "+e+". Important when there are more that one series displayed in the graph",i,s),this.defBoolean(t+"AxisShow",!0,"Flag to show/hide the "+e+o,i,s),"X"!=a&&"Y"!=a||this.defBoolean(t+"Axis2Show",!1,"Flag to show/hide the "+e+h,i,s),"R"!=a&&(this.defFloat("setMin"+a,null,"Set the minimum value for data in the "+e,i,s),this.defFloat("setMax"+a,null,"Set the maximum value for data in the "+e,i,s)),this.defFloat(t+"AxisAbsMin",null),this.defFloat(t+"AxisAbsMax",null),this.defString(t+"AxisMaxStrLength",!1),this.defFloat(t+"AxisMin",null),this.defFloat(t+"AxisMax",null),this.defFloat(t+"AxisRange",null),this.defFloat(t+"AxisIncr",null),this.defFloat(t+"AxisDecs",null),this.defBoolean(t+"AxisExtensionMin",!1),this.defBoolean(t+"AxisExtensionMax",!1),"X"==a&&(this.defFloat("setMin"+a+2,null,"Set the minimum value for data in the second "+e,i,s),this.defFloat("setMax"+a+2,null,"Set the maximum value for data in the second "+e,i,s),this.defFloat(t+"Axis2AbsMin",null),this.defFloat(t+"Axis2AbsMax",null),this.defString(t+"Axis2MaxStrLength",!1)),this.defBoolean(t+"AxisExact",!1,"Flag to force exact values in "+e,i,s),this.defArray(t+"AxisValues",[]),this.defArray(t+"AxisValuesRaw",[]),this.defArray(t+"AxisMinorValues",[]),"X"==a&&(this.defArray(t+"Axis2Values",[]),this.defArray(t+"Axis2ValuesRaw",[]),this.defArray(t+"Axis2MinorValues",[])),this.defTransform(t+"Axis",!1,e,i,s),this.defBoolean(t+"AxisTransformTicks",!1,"Flag to transform the values of the ticks in the "+e,i,s),this.defFloat(t+"AxisCeilValue",null,"Value to ceil the data in the "+e,i,s),this.defFloat(t+"AxisFloorValue",null,"Value to floor the data in the "+e,i,s),this.defString(t+"AxisTitle",!1,e+" title "+o,i,s),this.defString(t+"Axis2Title",!1,e+"2 title "+h,i,s),this.defBoolean(t+"AxisTitleDynamic",!1,"Set the title for the "+e+" dynamically as it changes when configured by the user",i,s),this.defLine(t+"AxisTickGuide","rgb(0,0,0)",.5,5,"solid",!0,"side tick lines indicators in the "+e+o,i,s),this.defLine(t+"AxisTick","rgb(204,204,204)",.5,null,"solid",!0,"tick lines across the "+e,i,s);for(var c=0;c<r.length;c++)this.defLine(t+"AxisTick"+r[c],"rgb(204,204,204)",.5,null,"solid",r[c]+" tick line across the "+e,1==c,i,s);this.defString(t+"AxisTickFormat",!1,e+"Format for the tick values in the "+e+'. It could be a string with the sprintf format or an array where the first parameter is the sprintf format and the second parameter is a modification applied to the value before is passed to the sprintf function, i.e. ("/1000", "+ 100", etc.)',i,s),this.defInteger(t+"AxisTicks",l,"Approx number of tick lines in the "+e,i,s),"X"==a&&(this.defString(t+"Axis2TickFormat",!1,e+"Format for the tick values in the second "+e+'. It could be a string with the sprintf format or an array where the first parameter is the sprintf format and the second parameter is a modification applied to the value before is passed to the sprintf function, i.e. ("/1000", "+ 100", etc.)',i,s),this.defInteger(t+"Axis2Ticks",null,"Approx number of tick lines in the second "+e,i,s)),this.defBoolean(t+"AxisTicksMinorShow",!1,"Flag to show/hide the minor tick lines in the "+e,i,s),this.defBoolean(t+"AxisTicksMajorShow",!0,"Flag to show/hide the major tick lines in the "+e,i,s),"X"!=a&&"Y"!=a||(this.defHistogram(t+"Axis",!1,80,e,i,s),n&&this.defRug(t+"Axis",!1,15,n,e,i,s))},this.setConfigDefaults=function(){var t=CanvasXpress.config;this.defOption("graphType","Bar",["Bar","Line","Area","AreaLine","BarLine","Boxplot","Dotplot","DotLine","Fish","Gantt","Meter","Heatmap","Stacked","StackedLine","StackedPercent","StackedPercentLine","Tree","Treemap","TagCloud","ParallelCoordinates","Sankey","Scatter2D","ScatterBubble2D","Scatter3D","Correlation","Pie","Venn","Network","Genome","Circular"],"Specifies the type of graph","General",t),this.defOption("graphOrientation","horizontal",["horizontal","vertical"],"Specifies the orientation of one dimensional graphs","General",t),this.defFloat("transparency",null,"Percentage of transparency applied to all elements in the visualizations","General",t),this.defFloat("transparencyHidden",.1,"Percentage of transparency applied to elements that are hidden","General",t),this.defBoolean("canvasBox",!1,"Flag to draw a box around the canvas","General",t),this.defColor("canvasBox","rgb(204,204,204)","box around the canvas","General",t),this.defBoolean("plotBox",!1,"Flag to draw a box around the x,y coordinates of the plot","General",t),this.defColor("plotBox","rgb(204,204,204)","box around the x,y coordinates of the plot","General",t),this.defBoolean("invertGraph",!1,"Flag to invert horizontal one dimensional graphs to plot from right to left","General",t),this.defOption("view","canvas",["canvas","table","layout"],"Specify the starting view of the data","General",t),this.defBoolean("isR",!1,"Flag to indicate is running from the R library. For developers only","General",t),this.defBoolean("isCxplot",!1,"Flag to indicate is using cxplot","General",t),this.defBoolean("isReproducibleResearch",!0,"Flag to indicate to track user modifications for Reproducible Research. For developers only","General",t),this.defInteger("reproduceTime",500,"Time to wait in milliseconds to reproduce user modifications through the UI","General",t),this.defOption("printType","download",["download","window"],"Type of printing when the camera icon in the UI is pressed. Download is to download the image while window is to save the image in a new browser window","General",t),this.defInteger("printMagnification",1,"Print Magnification to produce High Definition images. Courtesy of Baohong Zhang","General",t),this.defBoolean("printThumbnail",!1,"Print thumbnail","General",t),this.defBoolean("cacheBase64",!1,"Cache image in meta data as Base64","General",t),this.defBoolean("editable",!0,"Editable in JS Fiddle and CodePen","General",t),this.defBoolean("highlightGreyOut",!1,"Flag to add grey out when highlighting with mouse over","General",t),this.defFloat("highlightGreyOutTransparency",.67,"Fraction of transparency for grey out when highlighting with mouse over","General",t),this.defOption("theme","none",["none","economist","excel","tableau","stata","igray","solarized","paulTol","ggplot","wallStreetJournal","cx"],"Themes for the plot. This parameter will overwrite colors, background, axes, etc","General",t),this.defBoolean("useRawLines",!1,"Use raw lines rather than potentially crisp lines. Use only with circular graphs and networks","General",t),this.defInteger("fullTextMeasureCheck",500,"Full thorough check of variable and sample names when more than the specified number. This is useful for large data sets as canvas has not an efficent maner to measure text","General",t),this.defString("saveFilename",!1,"Filename to use when downloading the canvas as an image or as json. If not specified. the filename will be based on the target id of the canvas. cX- + canvas.targetId + extension","General",t),this.defBoolean("skipRender",!1,"Flag to skip initial rendering","General",!1),this.defArray("tags",[],"Tags","General",t),this.defFloat("createVersion",!1,"CanvasXpress Version used to create plot. This is parsed from the PNG or JSON data loaded","General",!1),this.defObject("createFactory",!1,"CanvasXpress Factory used to create plot. This is parsed from the PNG or JSON data loaded","General",!1),this.defObject("metaData",{},"Meta data for files read from a url","General",t),this.defString("password",!1,"Password to protect exploring data","General",t),this.defArray("functions",[],"Functions exposed to the api","General",!1),this.defObject("aes",{},"Initial Configuration passed to cxplot","cxplot",t),this.defOption("effect","none",["none","magic","puffIn","openDownLeft","openDownLeftOut","perspectiveDown","rotateDown","twisterInDown","puffOut","openDownRight","openDownRightOut","perspectiveUp","rotateUp","twisterInUp","vanishIn","openUpLeft","openUpLeftOut","perspectiveLeft","rotateLeft","swap","vanishOut","openUpRight","openUpRightOut","perspectiveRight","rotateRight","openDownLeftReturn","perspectiveDownReturn","openDownRightReturn","perspectiveUpReturn","openUpLeftReturn","perspectiveLeftReturn","openUpRightReturn","perspectiveRightReturn","slideDown","swashOut","tinRightOut","bombRightOut","boingInUp","spaceOutUp","slideUp","swashIn","tinLeftOut","bombLeftOut","boingOutDown","spaceOutRight","slideLeft","foolishIn","tinUpOut","spaceOutDown","slideRight","holeOut","tinDownOut","spaceOutLeft","slideDownReturn","tinRightIn","spaceInUp","slideUpReturn","tinLeftIn","spaceInRight","slideLeftReturn","tinUpIn","spaceInDown","slideRightReturn","tinDownIn","spaceInLeft"],"Effect used to show widgets Magic - Ver 1.3.0 - https://minimamente.com","Effect",t),this.defString("codeEffectIn","swashIn","Code Effect In","Effect",t),this.defString("codeEffectOut","holeOut","Code Effect Out","Effect",t),this.defString("customizerEffectIn","slideLeftReturn","Customize Effect In","Effect",t),this.defString("customizerEffectOut","slideUp2","Customizer Effect Out","Effect",t),this.defString("datafilterEffectIn","holeOut","Data Filter Effect In","Effect",t),this.defString("datafilterEffectOut","holeOut","Data Filter Effect Out","Effect",t),this.defString("datatableEffectIn","holeOut","Data Table Effect In","Effect",t),this.defString("datatableEffectOut","holeOut","Data Table Effect Out","Effect",t),this.defString("motionEffectIn","swashIn","Motion Effect In","Effect",t),this.defString("motionEffectOut","holeOut","Motion Effect Out","Effect",t),this.defString("remoteEffectIn","holeIn","Remote Effect In","Effect",t),this.defString("remoteEffectOut","holeOut","Remote Effect Out","Effect",t),this.defString("toolbarEffectIn","holeIn","Toolbar Effect In","Effect",t),this.defString("toolbarEffectOut","holeOut","Toolbar Effect Out","Effect",t),this.defString("tooltipDivEffectIn","holeOut","Tooltip Div Effect In","Effect",t),this.defString("tooltipDivEffectOut","spaceInUp","Tooltip Div Effect Out","Effect",t),this.defBoolean("gradient",!1,"Flag used to apply gradients to all objects in the graphs","Gradients",t),this.defOption("gradientType","radial",["linear","radial"],"Specifies the gradient pattern","Gradients",t),this.defOption("gradientOrientation","vertical",["vertical","horizontal"],"Specifies the orientation of the gradient if the gradient type is of the type linear","Gradients",t),this.defFloat("gradientRatio",1.3,"Specifies the ratio used to generate linear gradients","Gradients",t),this.defBoolean("adjustAspectRatio",!0,"Flag to automatically adjust the size of the bars or points in the one dimensional plots to fit in the provided canvas width and height. If the flag is set to false the width and height of the canvas will be sized according to the number of bars or points in the data set","Aspect Ratio, Space and width",t),this.defFloat("percentAspectRatioPlotArea",.5,"Specifies the minimum percentage for the plotting area","Aspect Ratio, Space and width",t),this.defFloat("fixedAspectRatio",0,"Keep fixed aspect ratio expressed as y / x. A zero value is used to ignore otherwise the x and y axes are set accordingly","Aspect Ratio, Space and width",t),this.defInteger("variableSpaceFactor",2,"Factor to adjust the spacing between the data points between the variables in the one dimensional plots. The greater the number, the greater the gap","Aspect Ratio, Space and width",t),this.defInteger("sampleSpaceFactor",1,"Factor to adjust the spacing between the data points between the samples in the one dimensional graphs. The greater the number, the greater the gap","Aspect Ratio, Space and width",t),this.defInteger("widthFactor",1,"Factor to adjust the width of the bars in the one dimensional and the three dimensional plots. The greater the number, the wider the bars","Aspect Ratio, Space and width",t),this.defInteger("dataPointSize",15,"Approximate size for the data points in scatter plots, dotplots and boxplots. The size will be adjusted according to the dimensions of the graph","Aspect Ratio, Space and width",t),this.defFloat("dataPointSizeScaleFactor",1,"Factor used to adjust the size of the dataPointSize","Aspect Ratio, Space and width",t),this.defInteger("adjustAspectRatioMax",3,"Specifies the number of times to try to automatically adjust the size of the canvas when adjustAspectRatio is true","Aspect Ratio, Space and width",!1),this.defInteger("adjustAspectRatioYTries",0,"Counter set when trying to automatically adjust the vertical size of the canvas when adjustAspectRatio is true","Aspect Ratio, Space and width",!1),this.defInteger("adjustAspectRatioXTries",0,"Counter set when trying to automatically adjust the horizontal size of the canvas when adjustAspectRatio is true","Aspect Ratio, Space and width",!1),this.defColor2("foreground","rgb(0,0,0)","Specifies the foreground color for text or lines not covered in a more specific configuration property","Foreground and Background",t),this.defColor2("background","rgb(255,255,255)","Specifies the background color for the canvas","Foreground and Background",t),this.defColor2("backgroundWindow","rgb(244,244,244)","Specifies the background color for the canvas when the background type is of a type window","Foreground and Background",t),this.defOption("backgroundType","solid",["solid","gradient","window","windowGradient","windowSolidGradient","image","windowImage"],"Specifies the style for the background of the canvas. The canvas background is composed of a frame with a window where the data is plotted. Either of these elements the may be a solid or gradient color or an image of your choosing. The colorScheme property will be used If gradient is specified","Foreground and Background",t),this.defURL("backgroundImage",!1,"Specifies the url for the background image when the background type is of the type image or windowImage","Foreground and Background",t),this.defString("backgroundImageSrc",!1,"Specifies the source for the background image when the background type is of the type image or windowImage","Foreground and Background",t),this.defInteger("margin",5,"Relative length in pixels for the distance between various objects in the graphs. This value is adjusted acording to the graph dimensions if the adjustAspectRatio parameter is set to true","Margins",t),this.defInteger("marginLeft",5,"Specifies the length in pixels for the left margin in the canvas","Margins",t),this.defInteger("marginTop",5,"Specifies the length in pixels for the top margin in the canvas","Margins",t),this.defInteger("marginBottom",5,"Specifies the length in pixels for the bottom margin in the canvas","Margins",t),this.defInteger("marginRight",5,"Specifies the length in pixels for the right margin in the canvas","Margins",t),this.defShow("Shadow",!1,"shadows in all graph objects in the canvas. It will be forced to false if the browser is IE","Shadows",t),this.defShow("TextShadow",!1,"shadows in text in the canvas. It will be forced to false if the browser is IE","Shadows",t),this.defInteger("shadowOffsetX",1,"Length in pixels for the shadow offset in the X axis","Shadows",t),this.defInteger("shadowOffsetY",1,"Length in pixels for the shadow offset in the Y axis","Shadows",t),this.defInteger("shadowBlur",2,"Amount in blur for the shadow","Shadows",t),this.defColor("shadow","rgba(0,0,0,0.5)","shadow","Shadows",t),this.defString("topoJSON",!1,"TopoJSON map string","Maps",t),this.defString("mapId",!1,"Map Id for the map div in the DOM","Maps",t),this.defString("mapPropertyId",!1,"Map Property Id use to match the data ids to the GeoJSON layer Id","Maps",t),this.defOption("mapProjection","mercator",["mercator","albers","orthographic"],"Map projection","Maps",t),this.defFloat("mapLatitudeOrigin",23,"Map Latitude Of Origin in degrees. (Applicable to Albers projection only). Default adjusts to USA maps","Maps",t),this.defFloat("mapCentralMeridian",-96,"Map Latitude Of Origin in degrees. (Applicable to Albers projection only). Default adjusts to USA maps","Maps",t),this.defFloat("mapStandardParallel1",29.5,"Map Standard Parallel 1 in degrees. (Applicable to Albers projection only). Default adjusts to USA maps","Maps",t),this.defFloat("mapStandardParallel2",45.5,"Map Standard Parallel 2 in degrees. (Applicable to Albers projection only). Default adjusts to USA maps","Maps",t),this.defBoolean("mapGraticuleShow",!1,"Show Map Graticule","Maps",t),this.defOption("mapGraticuleType","solid",["dashed","solid"],"Map Graticule type","Maps",t),this.defObject("mapConfig",!1,"Map config","Maps",t),this.defObject("mapConfigFeatures",!1,"Map config for features use to translate and scale","Maps",t),this.defArray("mapSmps",[],"Samples to use in maps","Maps",t),this.defArray("hiddenMapFeatures",[],"Hidden Map features","Maps",t),this.defArray("visibleMapFeatures",[],"Visible Map features. It Overrides the hidden features","Maps",t),this.defColor("map","rgb(105,210,230)","maps","Maps",t),this.defColor("mapOutline","rgb(204,204,204)","outline of the maps","Maps",t),this.defArray("fonts",[],"Goggle Fonts","Text",t),this.defArray("fontsExternal",[],"External Fonts","Text",t),this.defOption("fontName","Arial",["Courier","Arial","Verdana","sans-serif","Indie Flower","Ubuntu","Architects Daughter","Roboto"],"Font name. It will be set depending on the browser","Text",t),this.defOption("fontStyle","",["","bold","italic","bold italic"],"Font style","Text",t),this.defInteger("fontSize",12,"Font size for text in complex plot only. See other categories to modify specific font sizes","Text",t),this.defFloat("fontScaleFontFactor",1,"Scaling factor used to increase or decrease the font size in the canvas","Text",t),this.defOption("align","center",["right","center","left"],"Default horizontal alignment for drawing text","Text",t),this.defOption("baseline","middle",["top","middle","bottom"],"Default vertical alignment for drawing text","Text",t),this.defInteger("maxTextSize",40,"Maximum size for any text in the canvas","Text",t),this.defInteger("minTextSize",4,"Minimum size for any text in the canvas","Text",t),this.defBoolean("autoScaleFont",!0,"Flag to automatically adjust the font size in many visualization. Please be aware that scaling factors can still modify the font size. This flag needs to be false for the text to accept the specified font size","Text",t),this.defInteger("scaleTextConstantMult",25,"Constants to autoscale text","Text",!1),this.defFloat("scaleTextConstantAdd",2,"Constants to autoscale text (extra)","Text",!1),this.defString("title",!1,"Title of the graph","Titles and Subtitles",t),this.defString("subtitle",!1,"Subtitle of the graph","Titles and Subtitles",t),this.defText("title","","rgb(0,0,0)",16,1,"center",0,5,"title","Titles and Subtitles",t),this.defRect("titleBackground","rgba(0,0,0,0)","rgba(0,0,0,0)",.5,"solid","title background","Titles and Subtitles",t),this.defText("subtitle","","rgb(0,0,0)",14,1,"center",0,5,"subtitle","Titles and Subtitles",t),this.defRect("subtitleBackground","rgba(0,0,0,0)","rgba(0,0,0,0)",.5,"solid","subtitle background","Titles and Subtitles",t),this.defString("citation",!1,"A reference citation of the graph which is placed at the bottom right corner","Citations or References",t),this.defText("citation","","rgb(0,0,0)",7,1,"right",0,5,"citations","Citations or References",t),this.defInteger("dashLength",8,"Size in pixels of the length of the dashes and the separation between the dashes in the dashed lines","Lines",t),this.defInteger("dotLength",1,"Size in pixels of the length between dots in the doted lines","Lines",t),this.defInteger("arrowPointSize",9,"Size in pixels of the arrow head in arrow lines","Lines",t),this.defFloat("arrowQuadraticFactor",2.3,"Factor to use to bend the quadratic lines","Lines",t),this.defOption("capType","butt",["butt","round","square"],"Default type of cap for lines","Lines",t),this.defOption("joinType","mitter",["mitter","bevel","round"],"Default type for joining lines","Lines",t),this.defInteger("lineWidthEvent",2,"Size in pixels of the width for the events in the lines","Lines",!1),this.defFloat("outlineWidth",1,"Default width in pixels for lines in networks and other line elements in all visualizations except for the lines in the line plots","Lines",t),this.defFloat("lineThickness",1,"Default thickness in pixels for the lines in line plots","Lines",t),this.defBoolean("adjustBezier",!1,"Flag to automatically select the bezier line type. the bezier can start from the top or bottom (vertical), or from the side (horizontal). This will be based on the location of the two points joined by the line","Lines",t),this.defArray("lines",["line","solid","straight","bezier","curved","curvedCC","dashedLine","dashedBezier","dashedCurved","dashedCurvedCC","dottedLine","dottedBezier","dottedCurved","dottedCurvedCC"],"Line types in network graphs for the edges (or connections) between network nodes.<br> There are three styles: solid, dashed and dotted and four sub types: straight, bezier, curved (clockwise) and curvedCC (counter clockwise). The line types can be any combination of a style followed by a subtype. By default the type is always a solid straight line so there is no need to specify solid or stright as a style if there is a subtype.<br> Lines can also have elbows which are specified as a 2D-array. In the case a straight solid line each elements in the array will have an x,y coordinate and each segment will be perpendicular to the previous one. For example in this edge object:<br> <i>{ ..., type : line, elbows : [ [20, 40], [60, 80] ], ... }</i><br> A special subtype of line called segmented can also have elbows which are not perpendicalar to each other. For example in this edge object:<br> <i>{ ..., type : segmented, elbows : [ [20, 40], [60, 80] ], ... }</i><br> In the case of a bezier curved each element of the array will have an x,y coordinate for the control point 1, an x,y coordinate for the control point 2 and an x,y coordinate for the end of the line.<br> <i>{ ..., type : bezier, elbows : [ [20, 40, 40, 20, 40, 40], ... ], ... }</i><br> If the property elbow is specified the line will be drawn using the first and last elements of the array rather than the coordinates of the two nodes. A property startX and startY can be used to better adjust the position of the starting line. Similarly, a property endX and endY can be used to better adjust the position of the end line. These properties have a maginitud between -1 to 1 which will be used based on the width and height of the source and target node. For example in the following edge object the line will start in the middle bottom of the source node and will end at the upper left of the target node.<br>  <i>{ ..., type : line, startX : 0, startY : 1, endX : -1, endY : -0.5, ... }</i>","Lines",!1),this.defArray("arrows",["arrow","square","round"],"Arrows for the edges (or connections) in network graphs.<br> There are three arrow types: arrow, square and round. They can be at the start or at the end of the line. To specify an arrow at the start of the line include a startArrow property in the edge; to specify an arrow at the end of the line include a endArrow property in the edge. For example in this edge object:<br> <i>{ ..., type : line, startArrow : square, endArrow : arrow, ... }</i>","Lines",!1),this.defOption("colorScheme","User",["YlGn","YlGnBu","GnBu","BuGn","PuBuGn","PuBu","BuPu","RdPu","PuRd","OrRd","YlOrRd","YlOrBr","Purples","Blues","Greens","Oranges","Reds","Greys","PuOr","BrBG","PRGn","PiYG","RdBu","RdGy","RdYlBu","Spectral","RdYlGn","Accent","Dark2","Paired","Pastel1","Pastel2","Set1","Set2","Set3","Default","Basic","Light","Favorite","Pastel","Balanced","Rpalette","RlatticeBackground","RlatticeShingle","RlatticeLine","RlatticePolygon","Bootstrap","Economist","EconomistBG","Excel","Excel2","Excel3","GGPlot","Solarized","SolarizedBase","PaulTol","ColorBlind","Tableau","TableauGrey","TableauColorBlind","TableauTrafficLight","TableauPurpleGrey","TableauBlueRed","TableauGreenOrange","TableauCyclic","TableauPairSequential","TableauTripleDiverging","WallStreetJournal","WallStreetJournal2","WallStreetJournal3","WallStreetJournalRedGreen","WallStreetJournalBlackGreen","WallStreetJournalDemRep","Stata","Stata2","Stata3","StataMono","BlackAndWhite","CanvasXpress","CanvasXpressT"],"Color schemes can be user defined which will take the colors in the color property or one provided in canvasXpress. The order of the colors will be used to sequentially select when a different color is needed in a particular visualization","Colors",t),this.defArray("colors",["#fe296c","#487eb6","#a7ce31","#f8cc03","#ff8c02","#699696","#b77844","#83acd0","#c2e076","#fadc5a","#ff549f","#ffaf54","#9ab8b7","#d2a683","#3d699b","#87ac22","#cda908","#d02158","#d07300","#567676"],"Colors","Colors",t),this.defArray("colorHSV",[0,0,1],"Color HSV. Hue, Saturation and Value used when configuring colors","Colors",!1),this.defArray("colorRGB",[1,1,1],"Color RGB. Red, Green, Blue used when configuring colors","Colors",!1),this.defArray("colorSpectrum",["#4575b4","#91bfdb","#e0f3f8","#ffffbf","#fee090","#fc8d59","#d73027"],"An array with valid color names to create a color brew for the default color indicators","Colors",t),this.defArray("colorSpectrumBreaks",[],"An array with numbers in ascending order for the color spectrum to create discontinuous spectra. It must have the same length of the colorSpectrum array for example [0, 0.3, 1]","Colors",t),this.defFloat("colorSpectrumZeroValue",null,"A value to be at the center of the color spectrum to produce symmetrical heatmaps","Colors",t),this.defInteger("colorSpectrumNumber",100,"Number of colors to use in the color spectrum","Colors",t),this.defInteger("colorSpectrumTarget",10,"Approximate number of colors to use to build the color spectrum","Colors",t),this.defColor("odd","rgb(255,255,255)","odd numbers in samples when the property block contrast is set in one dimensional plots or the color for odd number residues in translations in genome plots","Colors",t),this.defColor("even","rgb(245,245,245)","even numbers in samples when the property block contrast is set in one dimensional plots or the color for odd number residues in translations in genome plots","Colors",t),this.defOption("blindnessType",!1,[!1,"protanopia","deuteranopia","tritanopia","monochromatic"],"Color Blindness","Colors",t),this.defInteger("roundedPolygonRadius",5,"Radius for rounded polygons","Shapes",t),this.defBoolean("useRoundRectangles",!1,"Use round rectangles in bar graphs, stacked graphs and boxplots","Shapes",t),this.defBoolean("useOpenShapes",!1,"Use open shapes in most visualizations","Shapes",t),this.defArray("shapes",["sphere","square","triangle","star","rhombus","octagon","oval","plus","minus","pacman","pacman2","mdavid","rect2","pentagon","rect3","arc","rectangle","image"],"Array with shapes used in visualizations. The order will dictate the utilization in the visualization","General Attributes",t),this.defArray("sizes",[8,12,16,20,24,28,32,36,40,44,48],"Array with sizes used invisualizations. The order will dictate the utilization in the visualization","General Attributes",t),this.defArray("images",[],"Array of urls of images used in scatter plots. Additional shapes will be used if the array does not contain as many images as needed","General Attributes",t),this.defArray("patterns",["solid","hatchForward","hatchReverse","stripeHorizontal","stripeVertical","polkaDot","crossHatch","crossStripe","squares","circles","plus","minus","bars","squiglesVertical","squiglesHorizontal","brickForward","brickReverse","art","pcx","hatchForward3","hatchReverse3"],"Patterns used in visualizations to fill objects. This array must contain one or more pattern names and in concert with the color array can be used to specify the pattern colors for all filled objects in the visualizations.. The order will dictate the utilization in the visualization","General Attributes",t),this.defArray("linePatterns",["solid","dotted","dashed","dotdash","longdash","twodash"],"Line Patterns used in line visualizations","General Attributes",t),this.defInteger("maxSmpStringLen",25,"Maximum length in characters a sample label or description can have so anything above is truncated","Samples",t),this.defString("smpTitle",!1,"Title for the sample axis in one dimensional plots","Samples",t),this.defInteger("smpLabelInterval",1,"Interval for the sample labels in one dimensional and circular plots","Samples",t),this.defBoolean("smpLabelImage",!1,"Use images as sample labels when possible","Samples",t),this.defBoolean("smpLabelImageRound",!1,"Use round images as sample labels","Samples",t),this.defShow("SampleNames",!0,"sample names","Samples",t),this.defArray("highlightSmp",[],"Name of samples to highlight","Samples",t),this.defColor("smpHighlight","rgb(255,0,0)","higlighted samples","Samples",t),this.defText("smpTitle","","rgb(0,0,0)",12,1,"center",0,5,"sample title","Samples",t),this.defText("smpLabel","","rgb(0,0,0)",12,1,"center",0,5,"sample labels","Samples",t),this.defInteger("maxVarStringLen",25,"Maximum length in characters a variable label or description can have so anything above is truncated","Variables",t),this.defString("varTitle",!1,"Title for the variables in hetamap plots","Variables",t),this.defInteger("varLabelInterval",1,"Interval for the variable labels in heatmaps","Variables",t),this.defShow("VariableNames",!0,"variable names","Variables",t),this.defArray("highlightVar",[],"Name of variables to highlight","Variables",t),this.defColor("varHighlight","rgb(255,0,0)","higlighted variables","Variables",t),this.defText("varTitle","","rgb(0,0,0)",12,1,"center",0,5,"variable title","Variables",t),this.defText("varLabel","","rgb(0,0,0)",12,1,"center",0,5,"variable labels","Variables",t),this.defObject("binConfigurations",{},"Properties for the binning functions","Bins",t),this.defInteger("maxOverlayStringLen",30,"Maximum length in characters for the sample or variable metadata when included as an overlay. Anything above is truncated","Overlays",t),this.defInteger("overlaysThickness",18,"Relative length in pixels for the thickness of the colored boxes to classify samples and or variables in one dimensional plots. This value is adjusted acording to the graph dimensions if the adjustAspectRatio parameter is set to true","Overlays",t),this.defArray("smpOverlays",[],"Sample metadata to overlay in one dimensional plots","Overlays",t),this.defObject("smpOverlayProperties",{},"Object to assign properties of the sample overlays. The key should be a valid sample annotation (metadata) and the value and object with properties like: type, color, spectrum, scheme, showLegend, showName, showBox, rotate, position, thicknes","Overlays",t),this.defInteger("smpOverlaysLegendColumns",1,"Number of columns for the sample overlay legends","Overlays",t),this.defShow("SmpOverlaysLegend",!1,"sample overlay legends","Overlays",t),this.defArray("varOverlays",[],"Variable metadata to overlay in heatmap plots","Overlays",t),this.defObject("varOverlayProperties",{},"Object to assign properties of the variable overlays. The key should be a valid variable annotation (metadata) and the value and object with properties like: type, color, spectrum, scheme, showLegend, showName, showBox, rotate, position, thicknes","Overlays",t),this.defInteger("varOverlaysLegendColumns",1,"Number of columns for the variable overlay legends","Overlays",t),this.defShow("VarOverlaysLegend",!1,"sample overlay legends","Overlays",t),this.defPosition("overlaysLegend","topRight",["topRight","right","bottomLeft","bottom"],"the variable and sample overlays legend","Overlays",t),this.defShow("Overlays",!0,"overlays in one dimensional plots","Overlays",t),this.defShow("LevelOverlays",!0,"overlay levels (values) in one dimensional plots","Overlays",t),this.defText("overlay","","rgb(0,0,0)",12,1,"center",0,5,"overlays","Overlays",t),this.defBoolean("legendInside",!1,"Position the legend inside the graphs","Legends",t),this.defInteger("legendColumns",1,"Number of columns in legends","Legends",t),this.defInteger("legendRows",1,"Number of rows in legends","Legends",t),this.defObject("legendOrder",!1,"Object to specify custom order for the levels in the legends. The key of the object is the name of a valid sample or variable annotation included in the data object. The value for element is an array with the levels for the corresponding factor","Legends",t),this.defArray("customLegend",[],"Custom legends : Array of objects [{ size : [], shape : [], shapeColor : [], line : [], lineColor : [], lineStart : [], lineEnd : [], text : [], x : number, y : number, title : string }]","Legends",t),this.defShow("Legend",!0,"legend","Legends",t),this.defShow("LegendTitle",!0,"the legend title","Legends",t),this.defShow("LegendBorder",!0,"the legend border","Legends",t),this.defPosition("legend","right",["topRight","right","bottomRight","bottom","bottomLeft","left","topLeft","top"],"the legend","Legends",t),this.defDirection("legend","vertical","legend","Legends",t),this.defRect("legendBackground","rgba(0,0,0,0)","rgb(0,0,0,0)",.5,"solid","legend background","Legends",t),this.defRect("legendKeyBackground","rgba(0,0,0,0)","rgb(0,0,0,0)",1,"solid","legend key background","Legends",t),this.defText("legendText","","rgb(0,0,0)",12,1,"left",0,8,"legends","Legends",t),this.defText("legendTitle","","rgb(0,0,0)",12,1,"center",0,8,"legends","Legends",t),this.defInteger("decorationsWidth",20,"Length in pixels of the width for the decorations in the networks","Decorations",t),this.defInteger("decorationsHeight",40,"Length in pixels of the height for the decorations in the networks","Decorations",t),this.defOption("decorationsType","bar",["pie","bar","heatmap","stacked","stackedpercent"],"Type for the decorations in the networks. The types stacked and stackedpercent must be two dimensional. Heatmap could be one or two dimensional","Decorations",t),this.defObject("decorations",!1,"Name of the node properties to include in the network decorations in the data.nodes object","Decorations",t),this.defArray("decorationsColors",[],"Array of colors used for selection in network decorations not to be confused by its singular form decorationsColor above","Decorations",t),this.defObject("decorationsProperties",{},"Object to assign properties like color for the network decorations","Decorations",t),this.defBoolean("decorationsInside",!1,"Position the decorations inside the graphs","Decorations",t),this.defShow("Decorations",!0,"decorations","Decorations",t),this.defShow("DecorationsLegend",!0,"decoration legends","Decorations",t),this.defShow("DecorationsBorder",!1,"the decoration legends border","Decorations",t),this.defPosition("decorations","bottom",["topRight","right","bottomRight","bottom","bottomLeft","left","topLeft","top"],"the decorations","Decorations",t),this.defRect("decorationsBackground","rgba(0,0,0,0)","rgb(204,204,204)",.5,"solid","decoration legends background","Decorations",t),this.defText("decorationsText","","rgb(0,0,0)",12,1,"center",0,5,"decoration legends","Decorations",t),this.defBoolean("isGroupedData",!1,"Flag to indicate if the data is grouped","Data",!1),this.defBoolean("isBoxplotCalc",!1,"Flag to indicate if the iqr has been calculated when the graph type is Boxplot","Data",!1),this.defArray("groupingFactors",[],"An array that holds the group names used for grouping the data. It must be a category in the data.x object","Data",t),this.defArray("segregateSamplesBy",[],"An array that holds the annotation(s) used to segregate the samples. It must be categories in the data.x object","Data",t),this.defArray("segregateVariablesBy",[],"An array that holds the annotation(s) used to segregate the variables. It must be categories in the data.z object","Data",t),this.defOption("summaryType",!1,[!1,"iqr","median","mean","cor","min","max","count","sum"],"Summary type for the data when grouping","Data",t),this.defBoolean("isTransformedData",!1,"Flag to indicate if the data is transformed","Data",!1),this.defInteger("transformBase",10,"Default log or exponential transformation for the data","Data",!1),this.defOption("transformData",!1,[!1,"log2","log10","exp2","exp10","percentile","zscore","ratio2","ratio10","save","reset","undo"],"Default transformation type for ALL the data. Data can also be transformed by axis (x,y,z) to give more flexibility. false, save, reset and undo are NOT real transformations. They are only used in the canvasXpress UIs to save the transformed data","Data",t),this.defOption("transformAxis","samples",["samples","variables"],"Default axis to use to transform the data when either z-score or ratio transformation is used","Data",t),this.defInteger("ratioReference",0,"Default index of sample used in ratio transformation. Almost private parameters used within the different CanvasXpress UIs","Data",t),this.defOption("ratioSampleReference",!1,[!1],"Name of the sample used in ratio transformation. Almost private parameters used within the different CanvasXpress UIs","Data",t),this.defOption("ratioGroupReference",!1,[!1],"Name of the group used in ratio transformation. Almost private parameters used within the different CanvasXpress UIs","Data",t),this.defOption("ratioLevelReference","",[],"Name of the level used in ratio transformation. Almost private parameters used within the different CanvasXpress UIs","Data",t),this.defBoolean("transposeData",!1,"Flag to transpose data as a parameter. This parameter accomplishes the same as the function transpose at load time","Data",t),this.defArray("asSampleFactors",[],"Array containing variable names. Numeric variable data (in rows) to be treated as a sample factor (move from y to x object). This parameter accomplishes the same as the function switchVarToAnnotation at load time. It can be used in conjunction with the parameter stringSampleFactors to be treated as a string. TO DO: write example","Data",t),this.defArray("asVariableFactors",[],"Array containing sample names. Numeric sample data (in columns) to be treated as a variable factor (move from y to z object). This parameter accomplishes the same as the function switchSmpToAnnotation at load time. It can be used in conjunction with the parameter stringVariableFactors to be treated as a string. TO DO: write example","Data",t),this.defArray("stringSampleFactors",[],"Array containing sample factors. The numeric sample factors will be treated as strings. This parameter accomplishes the same as the function switchNumericToString for samples at load time. It can be used in conjunction with the parameter asSampleFactors. TO DO: write example","Data",t),this.defArray("stringVariableFactors",[],"Array containing variable factors. The numeric variable factors will be treated as strings. This parameter accomplishes the same as the function switchNumericToString for variables at load time. It can be used in conjunction with the parameter asVariableFactors. TO DO: write example","Data",t),this.defString("histogramData",!1,"Flag or sample annotation to create histogram. If true is specified then the histogram will be done with all data","Data",t),this.defArray("appendNetworkData",[],"Array containing additional data files to append to networks. Useful for loading KEGG and Wikipatways to decorate the nodes and the edges","Data",t),this.defOption("timeFormat","isoDate",["default","shortDate","mediumDate","longDate","fullDate","shortTime","mediumTime","longTime","isoDate","isoTime","isoDateTime","isoUtcDateTime","year","month","day","hour","minute","second"],"Time Format according to date.format.js Steven Levithan <stevenlevithan.com>","Time Series",t),this.defBoolean("isGraphTime",!1,"Flag to indicate if the data is a time series so there is no need to plot every time interval. It is boolean in one dimensional plots or a string indicating the axis which is timed x, y or z","Time Series",t),this.defArray("timeValues",[],"Array containing the tick values when the the graph is a time series","Time Series",!1),this.defArray("timeValueIndices",[],"Array containing the indices of the values when the the graph is a time series","Time Series",!1),this.defObject("timeValueProperties",{},"Object with all the time properties needed to plot the data","Time Series",!1),this.defOption("sortDir","ascending",["ascending","descending"],"Default direction for data sorting. Almost private parameters used within the different CanvasXpress UIs","Data sorting",t),this.defBoolean("sortCaseSensitive",!1,"Whether to use case sensitive in ascii sorting. Almost private parameters used within the different CanvasXpress UIs","Data sorting",t),this.defObject("sortData",[],"Array of arrays with sorting functions. Each function takes three parameters. The first parameter must be either smp to identify the parameters are related to the samples, var to identify  the parameters are related to the variables, or cat to identify a sample or variable category. The second parameter can be either smp to indicate to sort the sample indices or var to indicate to sort the variable indices. The third parameter is the value for the key referenced by the first parameter. A special case for this parameter could be samples or variables to indicate to sort by the names of the samples or variables respectively. Here are some examples to sort the samples in the data: [ [cat, smp, Factor1] ]   : Sort the samples by the sample category Factor1 [ [var, smp, Variable1] ] : Sort the samples by the value of the Variable1 [ [cat, smp, samples] ]   : Sort the samples by their name.  Important!!!! This parameter will clean the data and remove any variables not used in the dataset at load time","Data sorting",t),this.defOption("sortOnGrouping",!1,[!1,"ascending","descending"],"Sort the name of the groups after sample grouping.<br>","Data sorting",t),this.defColor("missingData","rgb(245,245,245)","missing data","Missing Data",t),this.defString("missingDataValue","NA","String value use to specify missing data","Missing Data",t),this.defBoolean("nanOmit",!1,"Flag to omit NaN values in log transformation","Missing Data",t),this.defShow("ErrorBars",!0,"error bars in graphs","Error Bars and Confidence Intervals",t),this.defOption("errorBarsType","confidenceInterval95",["standardDeviation","standardErrorMean","confidenceInterval95"],"Type of error bars","Error Bars and Confidence Intervals",t),this.defColor("errorBars","rgb(0,0,0)","error bars in dotplots and barplots","Error Bars and Confidence Intervals",t),this.defFloat("errorBarsThickness",3,"Thickness for the error bars in dotplots","Error Bars and Confidence Intervals",t),this.defInteger("errorBarsWidth",2,"Minimum size of the bar in pixels to determine to show or hide error bar ends in the graphs when available","Error Bars and Confidence Intervals",t),this.defOption("standardDeviationType","unbiased",["biased","unbiased"],"Type of Standard Deviation. biased uses n as denominator and unbiased uses (n - 1) as denominator where n is the number of values","Error Bars and Confidence Intervals",t),this.defShow("RegressionFullRange",!1,"full range in regression plots","Error Bars and Confidence Intervals",t),this.defOption("regressionType","linear",["linear","exponential","logarithmic","power","polynomial"],"Type of linear least-squares fitting methods for simple data analysis","Error Bars and Confidence Intervals",t),this.defInteger("regressionOrder",2,"Specifies the number of degrees to solve for in polynomial regressions","Error Bars and Confidence Intervals",t),this.defShow("ConfidenceIntervals",!0,"confidence intervals in the regression and Kaplan-Meier plots ","Error Bars and Confidence Intervals",t),this.defFloat("confidenceLevel",.95,"Confidence level for regression, ellipse and Kaplan Meier","Error Bars and Confidence Intervals",t),this.defOption("confidenceIntervalType","log",["ordinary","log","loglog"],"Confidence intervals type for Kaplan Meier estimates","Error Bars and Confidence Intervals",t),this.defColor("confidenceInterval","rgb(50,50,50)","confidence intervals","Error Bars and Confidence Intervals",t),this.defBoolean("invertCensored",!1,"Flag to indicate whether zero values are censored or not in Kaplan-Meier plots ","Error Bars and Confidence Intervals",t),this.defColor("fitLine","rgb(255,215,0)","fit line","Error Bars and Confidence Intervals",t),this.defOption("fitLineStyle","solid",["solid","dotted","dashed","dotdash","longdash","twodash"],"Color for the fit line","Error Bars and Confidence Intervals",t),this.defInteger("fitLineWidth",2,"Specifies the width for the fitLine","Error Bars and Confidence Intervals",t),this.defFloat("fitLineTransparency",1,"The transparency for the fit line. A value between 0 and 1","Error Bars and Confidence Intervals",t),this.defInteger("randomSeed",8,"Specifies the random seed number to create pseudo random numbers","Random",t),this.defBoolean("pseudoRandom",!0,"Flag to indicate to use pseudo random rather than random","Random",t),this.defOption("randomMethod","numericalRecipes",["jenkins","numericalRecipes"],"Random method","Random",t),this.defBoolean("randomData",!1,"Flag to indicate random data for debug and demonstration purposes","Random",!1),this.defOption("randomDataDistribution","biased",["range","normal","uniform","symmetrical","biased"],"Distribution for the random data","Random",t),this.defBoolean("randomDataTime",!1,"Flag to create or not time series random data for debug and demonstration purposes","Random",t),this.defInteger("randomDataMin",1,"Minimun value when creating random data","Random",t),this.defInteger("randomDataMax",100,"Maxmun value when creating random data","Random",t),this.defInteger("randomDataMean",0,"Mean value when creating random data","Random",t),this.defInteger("randomDataSigma",1,"Sigma value when creating random data","Random",t),this.defInteger("randomDataVariables",3,"Default number of variables when creating random data","Random",t),this.defInteger("randomDataSamples",36,"Default number of samples when creating random data","Random",t),this.defInteger("randomDataVariableAnnotations",2,"Default number of variable annotations when creating random data","Random",t),this.defInteger("randomDataSampleAnnotations",2,"Default number of sample annotations when creating random data","Random",t),this.defFloat("randomMissingDataPercentage",0,"Default percentage of missing values when creating random data. A value between 0 and 1","Random",t),this.defBoolean("randomNetworkReduce",!0,"Flag to create or not a single random network for debug and demonstration purposes","Random",t),this.defInteger("randomNetworkNodes",40,"Default number of nodes when creating random networks","Random",t),this.defInteger("randomNetworkNodeEdgesMax",5,"Default number of maximum edges when creating random networks","Random",t),this.defBoolean("randomNetworkAll",!0,"Use all types of colors, shapes and edges in random network, otherwise only one color, one shape and straight black lines for the edges","Random",t),this.defOption("randomNetworkLayout","forceLayout",["forceDirected","circular","radial","duo","trio","pentagon","hexagon","octagon","star","small","medium","large","huge","lesmiserables","karate"],"Random network layout","Random",t),this.defFloat("zoom",1,"Zoom factor for the networks. A number greater than zero","Zooming, Panning and Resizing",t),this.defFloat("zoomGlobal",1,"Cumulative zoom factor for the networks","Zooming, Panning and Resizing",!1),this.defFloat("zoomStep",.2,"Percentage step for zooming networks and genome panel","Zooming, Panning and Resizing",t),this.defBoolean("zoomScale",!0,"Flag to scale nodes and edges in networks with zoom and data points in 3D scatter plots","Zooming, Panning and Resizing",t),this.defBoolean("zoomVariablesDisable",!1,"Flag to disable zooming of variables with mouse wheel in Heatmaps","Zooming, Panning and Resizing",t),this.defBoolean("zoomSamplesDisable",!1,"Flag to disable zooming of samples with mouse wheel in Heatmaps","Zooming, Panning and Resizing",t),this.defBoolean("zoomDisable",!1,"Flag to disable zooming in all plots","Zooming, Panning and Resizing",t),this.defFloat("panningX",0,"Number of unit to pan the network in the X dimension","Zooming, Panning and Resizing",t),this.defFloat("panningY",0,"Number of unit to pan the network in the Y dimension","Zooming, Panning and Resizing",t),this.defFloat("panningGlobalX",0,"Cumulative number of unit to pan the network in the X dimension","Zooming, Panning and Resizing",!1),this.defFloat("panningGlobalY",0,"Cumulative number of unit to pan the network in the Y dimension","Zooming, Panning and Resizing",!1),this.defFloat("panningStep",.2,"Percentage step for panning networks","Zooming, Panning and Resizing",t),this.defColor("resizerBackground","rgba(204,204,204,0.7)","div that shows up when resizing the canvas","Zooming, Panning and Resizing",t),this.defAxis("x","X axis","X-Axis",t),this.defAxis("y","Y axis","Y-Axis",t),this.defAxis("z","Z axis","Z-Axis",t),this.defBoolean("rAxisPercentShow",!0,"Flag to show on not the percent in each segment in the R axis","R-Axis",t),this.defOption("rAxisLabelOrientation","perpendicular",["perpendicular","circular"],"Orientation to show the ticks values in circular plots","R-Axis",t),this.defAxis("r","R axis","R-Axis",t),this.defFloat("axisExtension",.1,"Percentage to extend the values of the data to ensure all the data points are plotted inside and not over the edges of the graph","Axis",t),this.defOption("axisAlgorithm","rPretty",["heckbert","wilkinson","wilkinsonExtended","rPretty"],"Algorithm used to position tick labels on axes. See An Extension of Wilkinson’s Algorithm for Positioning Tick Labels on Axes. Justin Talbot, Sharon Lin, Pat Hanrahan","Axis",t),this.defBoolean("axisWilkinsonLoose",!1,"Flag to indicate whether to use loose positioning when using the wilkinson algorithm to position the labels on the axis. There will not be a difference most of the times","Axis",t),this.defBoolean("axisCoordinate",!1,"Flag to coordinate xAxis and xAxis2 in *-Line combination plots","Axis",t),this.defFloat("setMax",null,"Maximum value to set the data","Axis",!1),this.defFloat("setMin",null,"Minimum value to set the data","Axis",!1),this.defText("axisTick","","rgb(0,0,0)",12,1,"left",0,5,"axis","Axis",t),this.defText("axisTitle","","rgb(0,0,0)",12,1,"left",0,5,"axis","Axis",t),this.defOption("guides",!1,[!1,"solid","dotted","dashed","dotdash","longdash","twodash"],"This is a thin line that appears in the middle of the variables and / or samples in one dimensional graphs and multidimensional heatmaps just for aesthetics","Plot area",t),this.defFloat("guidesWidth",1,"The width for the thin line that appears in the middle of the variables and / or samples in one dimensional graphs and multidimensional heatmaps just for aesthetics","Plot area",t),this.defColor("guides","rgb(204,204,204)","thin line that appears in the middle of the variables and / or samples in one dimensional graphs and multidimensional heatmaps just for aesthetics","Plot area",t),this.defBoolean("blockContrast",!1,"A flag to creates a shade between the samples so there are two backgrounds, one for the odd samples and one for the even samples","Plot area",t),this.defBoolean("plotByVariable",!1,"Flag to indicate whether to group the data variable rather than by sample","Plot area",t),this.defBoolean("is3DPlot",!1,"Flag to create or not a 3D plot","Plot area",t),this.defShow("DataValues",!1,"data values in the one bar graphs","Plot area",t),this.defBoolean("binned",!1,"Flag to bin the data points in dotplots and boxplots","Plot area",t),this.defOption("binAlignment","center",["left","center","right"],"Alignment for the data points when binned","Plot area",t),this.defBoolean("jitter",!1,"Flag to jitter the data points in dotplots, boxplots and scatter2D plots","Plot area",t),this.defFloat("jitterFactor",.4,"Factor for jittering. The larger the more jitter","Plot area",t),this.defColor("objectBorder","rgb(0,0,0)","border of all objects in one dimensional graphs. It turns into the non-transparent fill color if set to false","Plot area",t),this.defFloat("objectColorTransparency",1,"The transparency for the color fill of all objects in one dimensional graphs. A value between 0 and 1","Plot area",t),this.defInteger("dotplotOutlineThreshold",5e3,"Maximum number of data points before skipping plotting their outline but only the fill color","Plot area",t),this.defOption("lineDecoration","symbol",[!1,"dot","symbol","pattern"],"Lines decorations in the line graphs","Line Graphs",t),this.defOption("lineErrorType","bar",["bar","area"],"Line error type in the line graphs. The line type must be spline for the area error type. ","Line Graphs",t),this.defBoolean("coordinateLineColor",!1,"Flag to used same color in BarLine plots. If set to true the color of the bars and the lines will be coordinated","Line Graphs",t),this.defOption("lineType","rect",["rect","solid","spline","dotted","dashed","dotdash","longdash","twodash"],"Type of line used to join the points in line graphs","Line Graphs",t),this.defFloat("tension",.3,"Curvature for the splines and hulls","Line Graphs",t),this.defInteger("tensionSegments",16,"Number of segments to smooth a quadratic curve","Line Graphs",t),this.defArray("parallelCoordinates",[],"Array used to store and handle a parallel coordinates plot","Line Graphs",!1),this.defInteger("boxplotOutliersRatio",8,"Ratio for the size of the outliers with respect to boxplot","Boxplot Graphs",t),this.defOption("boxplotWhiskersType","double",["single","double","none"],"Boxplot whiskers type","Boxplot Graphs",t),this.defOption("boxplotType","boxWhiskers",["boxWhiskers","range"],"Boxplot type","Boxplot Graphs",t),this.defBoolean("boxplotNotched",!1,"Flag to notch boxplots","Boxplot Graphs",t),this.defFloat("boxplotTransparency",.5,"Fraction to adjust color transparency for the boxplot id individual data points are shown","Boxplot Graphs",t),this.defColor("boxplot",!1,"boxplot if individual data points are shown","Boxplot Graphs",t),this.defBoolean("boxplotVarWidth",!1,"Flag to adjust the width of boxplots. Similar to R if true then the width is proportional to the sqare root of the number of observations","Boxplot Graphs",t),this.defFloat("boxplotCoef",1.5,"Number that determines how far the plot ‘whiskers’ extend out from the box","Boxplot Graphs",t),this.defOption("boxplotHingeFunction","summary",["summary","fivenum"],"Function to calculate the boxplor hinges. See https://chemicalstatistician.wordpress.com/2013/08/12/exploratory-data-analysis-the-5-number-summary-two-different-methods-in-r-2/","Boxplot Graphs",t),this.defShow("BoxplotOriginalData",!1,"observed data point in boxplots. (Should be called showBoxplotDataPoints)","Boxplot Graphs",t),this.defShow("ViolinBoxplot",!1,"violin plot in boxplots","Boxplot Graphs",t),this.defBoolean("violinTrim",!0,"Flag to trim violin plots","Boxplot Graphs",t),this.defOption("violinScale","width",["area","count","width"],"Type for scaling violin plots","Boxplot Graphs",t),this.defShow("BoxplotIfViolin",!0,"boxplots when violin plot are show. It does not affect anything unless violins are shown","Boxplot Graphs",t),this.defFloat("boxplotWidthRatioIfViolin",.33,"A number between 0.1 and 1 to adjust the width of the boxplot when violins are shown. It does not affect anything unless violins are shown","Boxplot Graphs",t),this.defFloat("violinTransparency",.5,"Fraction to adjust color transparency for the violins","Boxplot Graphs",t),this.defColor("violin",!1,"violins. If specified all the violins will have the assigned color; otherwise it will be automatically assigned","Boxplot Graphs",t),this.defColor("violinBorder","rgb(0,0,0)","violin borders","Boxplot Graphs",t),this.defShow("ViolinQuantiles",!1,"quantile 0.25 and 0.75 in violin plots","Boxplot Graphs",t),this.defFloat("boxplotDataPointTransparency",.5,"Fraction to adjust color transparency for the data points when displaying original data in boxplots","Boxplot Graphs",t),this.defColor("boxplotBorder",!1,"line of the borders in boxplots","Boxplot Graphs",t),this.defColor("boxplotMedian","rgb(0,0,0)","line of the median of data in boxplots","Boxplot Graphs",t),this.defInteger("boxplotMedianWidth",2,"Width for the line of the median of data in boxplots","Boxplot Graphs",t),this.defBoolean("boxplotMean",!1,"Flag to show mean of data in boxplots","Boxplot Graphs",t),this.defColor("boxplotMean","rgb(255,215,0)","data mean in boxplots","Boxplot Graphs",t),this.defColor("boxplotMeanBorder","rgb(255,0,0)","border of the data mean in boxplots","Boxplot Graphs",t),this.defBoolean("boxplotConnect",!1,"Flag to show data in boxplots connected","Boxplot Graphs",t),this.defInteger("boxplotConnectWidth",2,"Width for the line of the connection of boxes in boxplots","Boxplot Graphs",t),this.defOption("areaType","normal",["normal","stacked","percent"],"Flag to produce normal, stacked, center or percent area graphs","Area Graphs",t),this.defOption("dotplotType","normal",["normal","stacked","movement"],"Flag to produce normal, stacked or movement dotplot graphs. Movement plot are only applicable when data is grouped","Dotplot Graphs",t),this.defOption("barType","normal",["normal","lollipop","arrow","swimmer"],"Flag to produce normal or lollipop bar graphs","Bar Graphs",t),this.defBoolean("barPath",!1,"Show the path for the bar graph","Bar Graphs",t),this.defBoolean("barPathTransparency",.1,"Transparency for the bar graph path","Bar Graphs",t),this.defColor("barPath",!1,"bar graph path. If false, it will default to the color of the graph","Bar Graphs",t),this.defInteger("barLollipopFactor",1.5,"Ratio for the lollipop in bar graphs. The higher the value the bigger the lollipop","Bar Graphs",t),this.defBoolean("barLollipopOpen",!1,"Pattern open for th lollipop","Bar Graphs",t),this.defOption("swimHigh",!1,[!1],"Variable to use in Swimmer plot. Defaults to the first variable in the data set. See https://blogs.sas.com/content/graphicallyspeaking/2014/06/22/swimmer-plot/","Bar Graphs",t),this.defOption("swimStart",!1,[!1],"Variable to use in Swimmer Plot. Defaults to the second variable in the data set. See https://blogs.sas.com/content/graphicallyspeaking/2014/06/22/swimmer-plot/","Bar Graphs",t),this.defOption("swimEnd",!1,[!1],"Variable to use in Swimmer Plot. Defaults to the third variable in the data set. See https://blogs.sas.com/content/graphicallyspeaking/2014/06/22/swimmer-plot/","Bar Graphs",t),this.defOption("swimStatus",!1,[!1],"Name of sample annotation to use in Swimmer Plot. Defaults to Status. See https://blogs.sas.com/content/graphicallyspeaking/2014/06/22/swimmer-plot/","Bar Graphs",t),this.defOption("swimHighCap",!1,[!1],"Name of sample annotation to use in Swimmer Plot. Defaults to High Cap. See https://blogs.sas.com/content/graphicallyspeaking/2014/06/22/swimmer-plot/","Bar Graphs",t),this.defOption("ganttStart",!1,[!1],"Variable to use in Gantt plots as start date. Defaults to the first variable in the data set","Gantt Charts",t),this.defOption("ganttEnd",!1,[!1],"Variable to use in Gantt plots as end date. Defaults to the second variable in the data set","Gantt Charts",t),this.defOption("ganttCompletion",!1,[!1],"Variable annotation in the x object to use in Gantt plots as completion percentage. Must be a value between 0 and 1","Gantt Charts",t),this.defOption("ganttDependency",!1,[!1],"Variable annotation in the x object to use in Gantt plots as dependency. Must be a valid sample / group name","Gantt Charts",t),this.defOption("ganttDependencyEnd",!1,[!1],"Variable annotation for the type of ending for the dependency line. Options are arrow, square or round","Gantt Charts",t),this.defColor("ganttDependency",!1,"variable metadata used for the dependency line. Defaults to rgb(0,0,0)","Gantt Charts",t),this.defFloat("ganttDependencyThickness",!1,"Variable annotation for the thickness of the dependency line. Defaults to 1","Gantt Charts",t),this.defFloat("ganttCompletionTransparency",.5,"Fraction to adjust color transparency for completion","Gantt Charts",t),this.defOption("meterType","gauge",["gauge","speedometer","vertical","horizontal","state","digital","number"],"Type of meter. ","Meter Graphs",t),this.defFloat("meterMin",null,"Minimum value in the meter","Meter Graphs",t),this.defFloat("meterMax",null,"Maximum value in the meter","Meter Graphs",t),this.defFloat("meterStart",270,"Start value for the meter in degrees","Meter Graphs",t),this.defFloat("meterEnd",90,"End value for the meter in degrees","Meter Graphs",t),this.defArray("meterSegments",[],"Meter Segments","Meter Graphs",t),this.defArray("meterColors",[],"Meter Colors","Meter Graphs",t),this.defOption("meterVar",!1,[!1],"Name of the variable use to create the meter. The first variable will be used if not specified or if it is non-valid","Meter Graphs",t),this.defInteger("meterIndex",0,"Variable index to use creating a meter when there are multiple variables","Meter Graphs",!1),this.defColor("meterNeedle","rgb(0,0,0)","Meter Needle Color","Meter Graphs",t),this.defColor("meterBackground","rgb(229,229,229)","Meter Background Color","Meter Graphs",t),this.defInteger("meterThickness",50,"Thickness in pixels for the vertical, horizontal and state meters","Meter Graphs",t),this.defArray("fishParents",[],"Fish Parents","Fish Graphs",t),this.defArray("fishTimepoints",[],"Fish Timepoints","Fish Graphs",t),this.defBoolean("fishSeparateIndependentClones",!1,"Separate indepenent clones","Fish Graphs",t),this.defOption("fishShape","polygon",["spline","polygon"],"Fish Shape","Fish Graphs",t),this.defArray("fishAxis",[],"Fish Axis (array with lines across the X Axis)","Fish Graphs",t),this.defArray("fishAxisLabels",[],"Fish Axis Labels (array with names for the lines across the X Axis). Must have the same dimension as the fishAxis","Fish Graphs",t),this.defArray("fishCloneLabels",[],"Fish Clone Labels (array with names for the clones). Must have the same dimension as the fishParents","Fish Graphs",t),this.defInteger("sankeyNodeWidth",20,"Width for the Sankey nodes","Sankey Diagrams",t),this.defInteger("sankeyIterations",32,"Number of iterations for the Sankey diagram","Sankey Diagrams",!1),this.defOption("sankeySource",!1,[!1],"Name of a sample annotation to use as source in the sankey diagrams","Sankey Diagrams",t),this.defOption("sankeyTarget",!1,[!1],"Name of a sample annotation to use as target in the sankey diagrams","Sankey Diagrams",t),this.defColor("sankey","rgba(150,150,150,0.5)","sankey lines (links)","Sankey Diagrams",t),this.defBoolean("sankeyCoordinateColor",!1,"Flag to use same color for the nodes and for the lines (links) in the Sankey diagram","Sankey Diagrams",t),this.defArray("hierarchy",[],"Hierarchy for trees and bubble graphs made up of sample annotations present the data x object","Hierarchy",t),this.defString("hierarchyVar",!1,"Variable name to use in the sankey, sunburst and bubble graphs. This is used when the data set has more than a single variable. Otherwise the first variable will be selected","Hierarchy",t),this.defInteger("hierarchyVarIndex",0,"Variable index to use in the sankey, sunburst and bubble graphs","Hierarchy",!1),this.defInteger("treeNodeSize",5,"Size for the Tree nodes","Trees",!1),this.defColor("treeLink","rgb(150,150,150)","tree lines (links)","Trees",t),this.defColor("treeNodeOutline","rgb(51,122,183)","tree node outline","Trees",t),this.defInteger("treeLinkWidth",1,"Width for the Tree lines","Trees",t),this.defBoolean("treeCircular",!1,"Flag to plot a circular tree layout","Trees",t),this.defBoolean("treeInverted",!1,"Flag to plot the tree inverted","Trees",t),this.defInteger("treeVarIndex",0,"Variable index to use in the tree diagrams","Trees",!1),this.defInteger("treeNodeId",0,"Id for the nodes in the tree","Trees",!1),this.defOption("colorBy",!1,[!1,"variable"],"Name of a variable annotation or a sample name or the string variable to color the variables","Data Point Attributes",t),this.defBoolean("colorByShowLegend",!0,"Flag to show the colorBy legend","Data Point Attributes",t),this.defObject("colorKey",!1,"Object to assign custom colors to sample annotations and variable annotations included in the data object. The key of the object is the name of an annotation in the data.x object, or the name of an annotation in the data.z object. The value for each key could be either: (1) a scalar with a valid color scheme (see this.meta.def.colorSchemes), or (2) an array with valid colors, or (3) an object to specify custom colors for each of the values of the annotation. A default color will be assigned to a data point whose value was not included the object. CanvasXpress will handle string and numeric annotation approprietly. However, if an object is specified like that one in number (3) the annotation will be treated as categorical even if the annotation is numeric","Data Point Attributes",t),this.defOption("shapeBy",!1,[!1,"variable"],"Name of a variable annotation or a sample name or the string variable to shape the variables. When shapeByData is specified shapeBy is used for the title in the legend","Data Point Attributes",t),this.defBoolean("shapeByContinuous",!1,"Flag to use pie shapes with continuous data as opposed to by binning the data and show regular shapes","Data Point Attributes",t),this.defBoolean("shapeByShowLegend",!0,"Flag to show the shapeBy legend","Data Point Attributes",t),this.defObject("shapeKey",!1,"Object to assign custom shapes to sample annotations and variable annotations included in the data object. The key of the object is the name of an annotation in the data.x object or the name of an annotation in the data.z object. A default shape will be assigned to a data point whose value was not included the object","Data Point Attributes",t),this.defString("shapeByData",!1,"String that identify the object containing a two dimensional array with values used to shape data points when drawing a multidimensional Heatmap. It must be located within the data.y object (for example: data.y.data2)","Data Point Attributes",t),this.defOption("shapeByShape",!1,[!1,"sphere","square","triangle","star","rhombus","octagon","oval","plus","minus","mdavid"],"String that identify the shape to use in regular and multidimensional heatmaps. shapeByData will take precedence over this property","Data Point Attributes",t),this.defOption("sizeBy",!1,[!1,"variable"],"Name of a variable annotation or a sample name or the string variable to size the variables. When sizeByData is specified sizeBy is used for the title in the legend","Data Point Attributes",t),this.defBoolean("sizeByContinuous",!1,"Flag to show the size data continuously as opposed to by binning the sizes","Data Point Attributes",t),this.defBoolean("sizeByShowLegend",!0,"Flag to show the sizeBy legend","Data Point Attributes",t),this.defObject("sizeKey",!1,"Object to assign custom sizes to sample annotations and variable annotations included in the data object. The key of the object is the name of an annotation in the data.x object or the name of an annotation in the data.z object. A default size will be assigned to a data point whose value was not included the object","Data Point Attributes",t),this.defString("sizeByData",!1,"String that identify the object containing a two dimensional array with values used to size data points when drawing a multidimensional Heatmap. It must be located within the data.y object (for example: data.y.data3)","Data Point Attributes",t),this.defString("outlineBy",!1,"Name of the annotation for the outline when drawing a multidimensional Heatmap","Data Point Attributes",t),this.defBoolean("outlineByShowLegend",!0,"Flag to show the outlineBy legend","Data Point Attributes",t),this.defString("outlineByData",!1,"String that identify the object containing a two dimensional array with values used to color the outline data points when drawing a multidimensional Heatmap. It must be located within the data.y object (for example: data.y.data4)","Data Point Attributes",t),this.defOption("patternBy",!1,[!1,"variable"],"Name of a variable annotation or a sample name or the string variable to pattern the variables. When patternByData is specified patternBy is used for the title in the legend","Data Point Attributes",t),this.defBoolean("patternByShowLegend",!0,"Flag to show the patternBy legend","Data Point Attributes",t),this.defObject("patternKey",!1,"Object to assign custom patterns to sample annotations and variable annotations included in the data object. The key of the object is the name of an annotation in the data.x object or the name of an annotation in the data.z object. A default pattern will be assigned to a data point whose value was not included the object","Data Point Attributes",t),this.defString("patternByData",!1,"String that identify the object containing a two dimensional array with values used to pattern the data points when drawing a multidimensional Heatmap. It must be located within the data.y object (for example: data.y.data4)","Data Point Attributes",t),this.defOption("connectBy",!1,[!1],"Name of a variable annotation to connect the variables","Data Point Attributes",t),this.defBoolean("connectByNoColor",!1,"Flag to prevent coloring the lines  by the connectBy annotation. Usefull when connectBy is used along with colorBy to avoid confusion of colors","Data Point Attributes",t),this.defColor("connectBy","rgb(204,204,204)","connectBy lines","Data Point Attributes",t),this.defInteger("connectByWidth",2,"Width for the line of the connectBy line","Data Point Attributes",t),this.defBoolean("connectByShowLegend",!0,"Flag to show the connectBy legend","Data Point Attributes",t),this.defObject("connectKey",!1,"Object to assign custom colors to lines when samples are connected by a sample annotations included in the data object. The key of the object is the name of an annotation in the data.x object. A default connect will be assigned to a data point whose value was not included the object","Data Point Attributes",t),this.defObject("connectByData",{},"Internal object with connectBy data","Data Point Attributes",!1),this.defArray("treemapBy",[],"Array of sample annotations to treemap the variables. The array may also include sample to use as last level","Data Point Attributes",t),this.defOption("stackBy",!1,[!1],"Name of a sample annotation to stack the samples of each variable in Bar graphs","Data Point Attributes",t),this.defOption("dodgeBy",!1,[!1],"Name of a sample annotation to dodge the samples of each variable in Bar graphs","Data Point Attributes",t),this.defOption("lineBy",!1,[!1],"Name of a sample annotation to stack the samples of each variable in Line graphs","Data Point Attributes",t),this.defBoolean("lineByShowLegend",!0,"Flag to show the lineBy legend","Data Point Attributes",t),this.defOption("ribbonBy",!1,[!1],"Name of a sample annotation(s) to create a ribbon of each variable in scatter plots. If a single annotation is passed then it will be used as a standard deviation. If two annotations are passed then, it will be used as upper and lower confidence intervals. Works in coordination with the lineBy parameter","Data Point Attributes",t),this.defOption("motionBy",!1,[!1,"variable"],"Utility to create dynamic filtering of data in Scatter plots","Data Point Attributes",t),this.defOption("markerBy",!1,[!1,"variable"],"Utility to create dynamic markers in Map. It must have a latitude and longitude metadata too","Data Point Attributes",t),this.defOption("ellipseBy",!1,[!1,"variable"],"Utility to create error ellipses in Scatter plots","Data Point Attributes",t),this.defOption("ridgeBy",!1,[!1],"Utility to create ridgelines in Scatter2D plots","Data Point Attributes",t),this.defInteger("motionWidth",250,"Size in pixels for the motion widget when used to reproduce user customizations","Motion Charts",t),this.defText("motionCurrent","","rgb(0,0,0,0.3)",60,1,"center",0,5,"motion charts","Motion Charts",t),this.defOption("scatterType",!1,[!1,"line","bar","dot","image","lineImage","lineStep","boxplot","visium","manhattan","bin2d"],"Type of scatter plot","Scatter Plots",t),this.defBoolean("visiumFlip",!1,"Invert the data in visium plots. ","Scatter Plots",t),this.defBoolean("visiumPanning",!1,"No panning on visium plots so dragging will always zoom","Scatter Plots",t),this.defBoolean("visiumFixedAspectRatio",!0,"Fix aspect ratio for visium plots","Scatter Plots",t),this.defBoolean("scatterAxesEqual",!1,"Keep same range in both axes","Scatter Plots",t),this.defInteger("scatterOutlineThreshold",5e4,"Maximum number of data points before skipping plotting their outline but only the fill color","Scatter Plots",t),this.defArray("chromosomeLengths",[],"Manhattan Chromosomes length is a sorted array by chromosome with the length in base pairs for each chromosome. It is required when scatterType is manhattan","Scatter Plots",t),this.defString("manhattanMarkerChromosomeNumber",!1,"Sample name included in the data.y.smps object used to map to the chromosome number","Scatter Plots",t),this.defOption("manhattanMarkerPosition",!1,[!1],"Sample name included in the data.y.smps object used to map to the position in base pairs","Scatter Plots",t),this.defOption("manhattanMarkerLogPValue",!1,[!1],"Sample name included in the data.y.smps object used to map to the negative log 10 p value","Scatter Plots",t),this.defArray("manhattanColors",["rgb(128,128,128)","rgb(135,206,235)"],"Colors for the manhattan plots","Scatter Plots",t),this.defArray("manhattanContrastColor","rgba(0,0,0,0.1)","Manhattan contrast color","Scatter Plots",t),this.defFloat("groupingFactorWindow",!1,"The width for the data when grouping in Scatter2D plots. This is the analogous parameter to cut_width in R. It defaults to a fifth of the data range. The scatterType must be boxplot to take this parameter into effect","Scatter Plots",t),this.defColor("function","rgb(0,0,0)","function plots","Scatter Plots",t),this.defOption("selectionMode","highlight",["highlight","ghost","name","filter"],"Mode use to highlight selected data points in visualizations","Data Selection",t),this.defColor("selection","rgb(255,0,0)","The color used for selected data points when selection mode is to be highlight","Data Selection",t),this.defOption("selectionMetadata",!1,[!1],"Matadata (or factor) to use to display selected data points instead of the variable name. This metadata has to be in the data.z object. This property is only valid when the selectionMode is name and the visualization is a Scatter plot","Data Selection",t),this.defArray("selectedDataPoints",[],"Variable / Sample names of data points (in the data object) to initially select","Data Selection",t),this.defBoolean("isContour",!1,"Flag to show the contour","Contours",t),this.defBoolean("contourFilled",!1,"Flag to color the contour plot","Contours",t),this.defFloat("contourFilledTransparency",1,"Transparency applied to the filled contours","Contours",t),this.defShow("ContourBands",!0,"contour bands","Contours",t),this.defColor("contourBands","rgb(0,0,255)","the bands in contours","Contours",t),this.defInteger("contourLevelWidth",null,"Width of contour levels","Contours",t),this.defInteger("contourLevelNumber",10,"Numbe of contour levels. Overridden by contourLevelWidth","Contours",t),this.defOption("contourStat","density",["density","ndensity","count"],"Contour density type","Contours",t),this.defOption("contourType","normal",["normal","raster","point"],"Contour type","Contours",t),this.defArray("contourLevels",[],"Numeric vector to set the contour levels. It is automatically calculated if not defined using the axisAlgorithm setting and the contourLevelNumber","Contours",t),this.defShow("ContourLevel",!1,"levels in contours","Contours",t),this.defShow("ContourDataPoints",!1,"data points in contours","Contours",t),this.defColor("contourDataPoints","rgb(0,0,0)","data points in contours when the contour is filled","Contours",t),this.defOption("contourColorScheme","Viridis",["Viridis","YlGn","YlGnBu","GnBu","BuGn","PuBuGn","PuBu","BuPu","RdPu","PuRd","OrRd","YlOrRd","YlOrBr","Purples","Blues","Greens","Oranges","Reds","Greys","PuOr","BrBG","PRGn","PiYG","RdBu","RdGy","RdYlBu","Spectral","RdYlGn","Accent","Dark2","Paired","Pastel1","Pastel2","Set1","Set2","Set3","Default","Basic","Light","Favorite","Pastel","Balanced","Rpalette","RlatticeBackground","RlatticeShingle","RlatticeLine","RlatticePolygon","Bootstrap","Economist","EconomistBG","Excel","Excel2","Excel3","GGPlot","Solarized","SolarizedBase","PaulTol","ColorBlind","Tableau","TableauGrey","TableauColorBlind","TableauTrafficLight","TableauPurpleGrey","TableauBlueRed","TableauGreenOrange","TableauCyclic","TableauPairSequential","TableauTripleDiverging","WallStreetJournal","WallStreetJournal2","WallStreetJournal3","WallStreetJournalRedGreen","WallStreetJournalBlackGreen","WallStreetJournalDemRep","Stata","Stata2","Stata3","StataMono","BlackAndWhite","CanvasXpress","CanvasXpressT"],"Color scheme to use in contours","Contours",t),this.defBoolean("isHistogram",!1,"Flag to track conversion of 2D scatter plot into histograms","Histograms",!1),this.defFloat("histogramBarWidth",!1,"Length in pixels for half of the bar width in the 2D sccater plot histogram","Histograms",!1),this.defBoolean("histogramRight",!0,"Histogram right is a boolean.  If true, the histogram cells are right-closed (left open) intervals","Histograms",t),this.defBoolean("histogramLowest",!0,"Histogram lowest is a boolean. If true, an x[i] equal to the breaks value will be included in the first (or last, for right = FALSE) bar","Histograms",t),this.defInteger("histogramBins",30,"Approximate number of bins in a histogram. It may vary considerably to the actual number used in the histogram to ensure a pretty size for the intervals in the histogram. Default is the same as in ggplot which is 30","Histograms",t),this.defFloat("histogramBinWidth",!1,"Width in actual units for the histogram bin","Histograms",t),this.defOption("histogramType","dodged",["dodged","staggered","stacked"],"Type of histogram when multiple series are present","Histograms",t),this.defShow("HistogramDensity",!1,"density kernel in histograms","Histograms",t),this.defShow("HistogramPath",!1,"histograms path","Histograms",t),this.defColor("histogramPath",!1,"histogram path. If not specified the it defaults to the color of the histogram bars","Histograms",t),this.defInteger("histogramPathWidth",2,"Width for the line of the histogram path line","Histograms",t),this.defShow("FilledHistogramDensity",!1,"filled histogram density","Histograms",t),this.defFloat("histogramDensityFillTransparency",.6,"Transparency applied to the filled histogram density","Histograms",t),this.defShow("HistogramDataPoints",!1,"original data point in histograms","Histograms",t),this.defShow("HistogramQuantiles",!1,"quantile 0.25 and 0.75 in density plots","Histograms",t),this.defShow("HistogramMedian",!1,"histogram median","Histograms",t),this.defOption("histogramMedianLineStyle","dashed",["solid","dotted","dashed","dotdash","longdash","twodash"],"Line type for the histogram median","Histograms",t),this.defBoolean("hideHistogram",!1,"Flag to hide the histogram bars","Histograms",t),this.defOption("histogramSizeEstimator","sturges",["sturges","freedmanDiaconis","scott"],"Histogram size estimator","Histograms",t),this.defOption("histogramStat","count",["density","count"],"Histogram density type","Histograms",t),this.defBoolean("histogramAsDotplot",!1,"Flag to use dots as histogram bars","Histograms",t),this.defBoolean("histogramStackRatio",1,"Stack ratio for dotplot histograms. I has to be a value between 0 and 1","Histograms",t),this.defOption("histogramStackDir","down",["down","center","centerwhole"],"Direction to stack the dots in dotplot histograms","Histograms",t),this.defObject("isCreateHistogram",!1,"Object to store histogram data","Histograms",!1),this.defShow("ScatterDensity",!1,"density kernel in histograms","Density Plots",t),this.defInteger("densityPixels",1e3,"Number of pixels to stack on the density plots","Density Plots",t),this.defOption("densityKernel","gaussian",["gaussian","rectangular","triangular","epanechnikov","quartic","biweight","cosine","optcosine"],"Histogram density kernels","Density Plots",t),this.defOption("densityPosition","normal",["normal","stacked","filled"],"Histogram density position","Density Plots",t),this.defOption("bandwidthRule","nrd0",["nrd0","nrd","silverman"],"Bandwidth rule ","Density Plots",t),this.defInteger("bandwidthCut",3,"Bandwidth cut","Density Plots",t),this.defFloat("bandwidthAdjust",1,"Bandwidth adjust for the window","Density Plots",t),this.defFloat("ridgelineScale",1.5,"Scale for ridgeline","Ridgeline Plots",t),this.defOption("loessDegree",2,[0,1,2],"Loess degree. 0 : Constant, 1 : Linear, 2 : Quadratic","Loess",t),this.defInteger("loessSteps",30,"Loess steps. Number of steps to smooth the line","Loess",t),this.defFloat("loessBandwidth",.8,"Loess bandwidth. Thickness for the confidence of the loess curve. A vaulue between 0 and 1","Loess",t),this.defFloat("loessCell",.2,"Loess cell. If interpolation is used this controls the accuracy of the approximation via the maximum number of points in a cell in the kd tree. Cells with more than floor(n*span*cell) points are subdivided","Loess",t),this.defFloat("loessSpan",.75,"Loess span. Factor to adjust the gaussian shape of the loess curve. A vaulue between 0 and 1","Loess",t),this.defInteger("loessIteration",4,"Loess iterations","Loess",!1),this.defShow("LoessFit",!1,"Flag to show the loess fit in Scatter2D plots","Loess",t),this.defBoolean("loessNormalize",!0,"Flag to normalize loess fit in Scatter2D plots","Loess",t),this.defOption("loessFamily","gaussian",["gaussian","symmetric"],'Loess Family. Type of error distribution to be optimized in fitting. The default, "gaussian" is fitting with least squares. Fitting with Tukeys biweight M-Estimator is used if family = "symmetric"',"Loess",t),this.defOption("loessSurface","interpolate",["direct","interpolate"],'Loess Surface. The fitted surface to be computed exactly ("direct") or via interpolation from a kd tree',"Loess",t),this.defOption("loessStatistics","approximate",["approximate","exact"],"LoessStatistics. The statistics to be computed exactly, approximately or not at all? Exact computation can be very slow ","Loess",t),this.defArray("quantiles",["0.25","0.5","0.75"],"Array with quantiles to use in quantile regression plots","Quantile Regression Plots",t),this.defShow("QuantileRegressionFit",!1,"Quantile Regression fit in Scatter2D plots","Quantile Regression Plots",t),this.defArray("binplotBins",[],"Approximate number of bins in a bin plot. It may vary considerably to the actual number used in the bin plot to ensure a pretty size for the intervals in the bin plot. ggplots default is 30","Bin Plots",t),this.defArray("binplotBinWidth",[],"Width in actual units for the histogram bin","Bin Plots",t),this.defBoolean("binplotDrop",!0,"Flag to drop cells with zero counts in binplots","Bin Plots",t),this.defOption("binplotShape","hexagon",["rectangle","hexagon","oval"],"Type for the shape to use in binplots","Bin Plots",t),this.defOption("binplotColorScheme","Blues",["YlGn","YlGnBu","GnBu","BuGn","PuBuGn","PuBu","BuPu","RdPu","PuRd","OrRd","YlOrRd","YlOrBr","Purples","Blues","Greens","Oranges","Reds","Greys","PuOr","BrBG","PRGn","PiYG","RdBu","RdGy","RdYlBu","Spectral","RdYlGn","Accent","Dark2","Paired","Pastel1","Pastel2","Set1","Set2","Set3","Default","Basic","Light","Favorite","Pastel","Balanced","Rpalette","RlatticeBackground","RlatticeShingle","RlatticeLine","RlatticePolygon","Bootstrap","Economist","EconomistBG","Excel","Excel2","Excel3","GGPlot","Solarized","SolarizedBase","PaulTol","ColorBlind","Tableau","TableauGrey","TableauColorBlind","TableauTrafficLight","TableauPurpleGrey","TableauBlueRed","TableauGreenOrange","TableauCyclic","TableauPairSequential","TableauTripleDiverging","WallStreetJournal","WallStreetJournal2","WallStreetJournal3","WallStreetJournalRedGreen","WallStreetJournalBlackGreen","WallStreetJournalDemRep","Stata","Stata2","Stata3","StataMono","BlackAndWhite","CanvasXpress","CanvasXpressT"],"Color scheme to use in binplots","Bin Plots",t),this.defInteger("maxDOENumber",8,"Maximum number of graphs when creating a DOE","DOE",t),this.defArray("includeDOE",[],"Array containing the factors to include when exploring the DOE. If left empty all the factors will be included","DOE",t),this.defBoolean("autoexpandDOE",!0,"Flag to automatically expand verticaly the extent of the meta data-plots when changing the size of the graphs","DOE",t),this.defBoolean("extendedDOE",!0,"Flag to extend DOE to include variables / samples","DOE",t),this.defObject("asDOE",!1,'Object with configurations to create DOE. Example: [ {size: "2X2", graphType: "Bar"} ]',"DOE",t),this.defOption("scatterPlotMatrix",!1,[!0,!1],"Could be a boolean to plot a matrix of 2D sccaterplots or a sample annotation to color and segregate the plots","Scatter Plot Matrix",t),this.defOption("scatterPlotMatrixType","both",["both","upper","lower","correlation","correlationHistogram","corelationDensity","all","first"],"Type for the matrix of 2D sccaterplots. Draw either in both panels, upper only or lower only. Show any combination of correlation, histogram, density and variability (boxplots). Also specify whether to use all versus all or only the first data set","Scatter Plot Matrix",t),this.defShow("ScatterPlotMatrixLabels",!1,"labels in the scatter plot matrix","Scatter Plot Matrix",t),this.defFloat("xRotate",45,"Starting number of degrees to rotate graph arround the X axis","3D Attributes",t),this.defFloat("yRotate",0,"Starting number of degrees to rotate graph arround the Y axis","3D Attributes",t),this.defFloat("zRotate",0,"Starting number of degrees to rotate graph arround the Z axis","3D Attributes",t),this.defFloat("x3DRatio",1,"Value between 0 - 1 for adjusting the 3D of the X Axis","3D Attributes",t),this.defFloat("y3DRatio",1,"Value between 0 - 1 for adjusting the 3D of the Y Axis","3D Attributes",t),this.defFloat("z3DRatio",1,"Value between 0 - 1 for adjusting the 3D of the Z Axis","3D Attributes",t),this.defShow("3DGrid",!0,"X,Y,Z grid in 3D plots","3D Attributes",t),this.defInteger("rotationSensitivity",450,"Factor to adjust the sensitivity of the mouse when rotating the graph","3D Attributes",t),this.defInteger("rotationStep",2,"Number of degrees used when the plot is automatically rotated","3D Attributes",t),this.defFloat("perspectiveFactor",2.2,"Factor to use to make the 3D perspective. The higher the number the more perspective. Perspective of zero is no perspective at all","3D Attributes",t),this.defColor("outline3D","rgba(0,0,0,0)","outline of the 3D Scatters","3D Attributes",t),this.defInteger("varIndicesStart",-1,"Number that indicates starting point for variables in heatmaps when the canvas is zoom in","Heatmap Graphs",!1),this.defInteger("smpIndicesStart",-1,"Number that indicates starting point for samples in heatmaps when the canvas is zoom in","Heatmap Graphs",!1),this.defInteger("grpIndicesStart",-1,"Number that indicates starting point for grouped samples in heatmaps when the canvas is zoom in","Heatmap Graphs",!1),this.defBoolean("isMultidimensionalData",!1,"Flag to indicate if there is more than a single data set","Heatmap Graphs",!1),this.defBoolean("heatmapAutoAdjust",!1,"Flag to adjust the range of the heatmaps when zooming in/out","Heatmap Graphs",t),this.defBoolean("heatmapCellBox",!0,"Flag to print a box around the heatmap cells","Heatmap Graphs",t),this.defColor("heatmapCellBox","rgb(102,102,102)","heatmap boxes around the cells","Heatmap Graphs",t),this.defFloat("heatmapCellBoxWidth",1,"Width for the heatmap boxes around the cells","Heatmap Graphs",t),this.defColor2("heatmapCellBoxColorHighlight","rgb(255,215,0)","highlighted heatmap cells","Heatmap Graphs",t),this.defFloat("heatmapCellBoxHighlightWidth",1,"Width for the highlighting heatmap boxes around the cells","Heatmap Graphs",t),this.defString("heatmapSmpSeparateBy",!1,"Factor (in the x data object) used to separate the samples in the heatmap. The same factor must be included in the sample overlays","Heatmap Graphs",t),this.defString("heatmapVarSeparateBy",!1,"Factor (in the z data object) used to separate the variables in the heatmap. The same factor must be included in the variable overlays","Heatmap Graphs",t),this.defFloat("heatmapSeparatorThickness",3,"Thickness of the separation of samples and variables in the heatmap","Heatmap Graphs",t),this.defOption("varTitleLabelPosition","bottom",["bottom","top"],"Position for variable labels","Heatmap Graphs",t),this.defOption("smpTitleLabelPosition","left",["left","right"],"Position for sample labels","Heatmap Graphs",t),this.defShow("HeatmapIndicator",!0,"heatmap color indicator","Heatmap Graphs",t),this.defInteger("heatmapIndicatorHeight",25,"Length in pixels for the heatmap indicator","Heatmap Graphs",t),this.defInteger("heatmapIndicatorWidth",250,"Length in pixels for the heatmap indicator line width used for increase the size of the indicator","Heatmap Graphs",t),this.defBoolean("adjustAspectRatioHeatmapIndicator",!0,"Flag to adjust aspect ratio of heatmap indicator. It depends on the adjustAspectRatio parameter; that is, the adjustAspectRatio parameter has to set to true for the adjustAspectRatioHeatmapIndicator to take effect","Heatmap Graphs",t),this.defOption("heatmapIndicatorPosition","right",["topLeft","top","topRight","right"],"Position for the heatmap indicator","Heatmap Graphs",t),this.defBoolean("heatmapIndicatorHistogram",!1,"Flag to show histogram in the heatmap indicator","Heatmap Graphs",t),this.defColor("heatmapIndicatorHistogram","rgb(0,255,255)","heatmap indicator histogram","Heatmap Graphs",t),this.defOption("heatmapType","normal",["normal","circle","hexagon"],"Type of Heatmap used to overlay a layer on top of an image. Special for spatial transcriptomics","Heatmap Graphs",t),this.defBoolean("heatmapCollapse",!1,"Flag to collapse cells in heatmaps of type circle or hexagon. If true cells are ploted without outline otherwise the outline is the foreground color","Heatmap Graphs",t),this.defBoolean("isOncoprint",!1,"Boolean flag to draw an oncoprint","Oncoprint Graphs",!1),this.defBoolean("oncoprintCNA",!1,"String to identify the data object to use to draw the copy number alterations; that is the amplifications (which will be colored red) and deletions (which will be colored blue). It MUST be a file with only two categorical levels","Oncoprint Graphs",t),this.defBoolean("oncoprintMUT",!1,"String to identify the data object to use to draw the mutations. For example missense, non-synonymous, truncating, etc. Each level will be colored in a shade of green","Oncoprint Graphs",t),this.defBoolean("oncoprintHeatmapSwitch",!1,"Switch to Oncoprint or Heatmap visualization. Requieres data in the data object","Oncoprint Graphs",t),this.defBoolean("oncoprintNoAlterations",!0,"Switch to show variables and samples without any alterations","Oncoprint Graphs",t),this.defBoolean("oncoprintColSummary",!1,"Flag to show column summary in oncoprints","Oncoprint Graphs",t),this.defBoolean("oncoprintRowSummary",!1,"Flag to show row summary in oncoprints","Oncoprint Graphs",t),this.defShow("HeatmapOncoprint",!1,"heatmap along with the oncoprint","Oncoprint Graphs",t),this.defOption("oncoprintHeatmapPosition","bottom",["right","bottom","left","top"],"Position for the heatmap in the oncoprint","Oncoprint Graphs",t),this.defInteger("treemapBorderWidth",3,"Width for the treemap border","Treemap Graphs",t),this.defColor("treemapBorder","rgb(204,204,204)","treemap header and border","Treemap Graphs",t),this.defOption("correlationAxis","samples",["samples","variables"],"Axis used for the correlation","Correlation Graphs",t),this.defBoolean("correlationAnchorLegend",!1,"Flag to show a region above the correlation plot that anchror a sample/variable to a position","Correlation Graphs",t),this.defInteger("correlationAnchorLegendAlignWidth",40,"Length in pixels of the height of the correlation anchor legend","Correlation Graphs",t),this.defInteger("correlationLabelInterval",1,"Interval for the sample or variable labels in the correlation plot","Correlation Graphs",t),this.defOption("correlationType","diamond",["diamond","circle"],"Shape to use in the correlation graphs","Correlation Graphs",t),this.defDendrogram("Var",!0,!1,"top",!1,"variable dendrogram","Dendrograms",t),this.defDendrogram("Smp",!0,!1,"left",!1,"sample dendrogram","Dendrograms",t),this.defInteger("dendrogramHeight",80,"Size in pixels for the dendrogram","Dendrograms",t),this.defColor("dendrogram","rgb(0,0,0)","dendrograms","Dendrograms",t),this.defOption("distance","euclidian",["euclidian","manhattan","max"],"Distance metric to use when clustering data","Clustering",t),this.defOption("linkage","complete",["single","complete","average"],"Linkage type to use when clustering data","Clustering",t),this.defOption("clusterAxis","samples",["samples","variables"],"Axis to use when clustering data","Clustering",t),this.defInteger("kmeansVarClusters",3,"Number of clusters when clustering variable data with kmeans","Clustering",t),this.defInteger("kmeansSmpClusters",3,"Number of clusters when clustering sample data with kmeans","Clustering",t),this.defInteger("maxIterations",500,"Number of maximum iterations when clustering data with kmeans for one dimensional graphs or maximum number of iterations when calculating force direct layout networks","Clustering",t),this.defOption("imputeMethod","mean",["mean","median"],"Imputation method for missing data when clustering","Clustering",t),this.defBoolean("samplesClustered",!1,"Configuration property to cluster samples","Clustering",t),this.defBoolean("variablesClustered",!1,"Configuration property to cluster variables","Clustering",t),this.defBoolean("samplesKmeaned",!1,"Configuration property to k-mean samples","Clustering",t),this.defBoolean("variablesKmeaned",!1,"Configuration property to k-mean variables","Clustering",t),this.defBoolean("vennLegendColors",!1,"Flag to use the venn colors to use for the legends instead of the letters","Venn Diagrams",t),this.defInteger("vennGroups",4,"Number of groups in the Venn diagram","Venn Diagrams",t),this.defArray("vennCompartments",["A","B","AB","C","AC","BC","ABC","D","AD","BD","CD","ABD","ACD","BCD","ABCD"],"Name for the compartments in the the Venn diagrams","Venn Diagrams",!1),this.defArray("vennColors",[],"Colors for the Venn bubles. If not specified the colors will be chosen from the colors array. Colors in this array need to be at least the same number of groups in the Venn diagram","Venn Diagrams",t),this.defOption("pieType","separated",["separated","solid"],"Position for the pices of the pie","Pie Charts",t),this.defInteger("pieSegmentPrecision",0,"Number of decimals for values in the Pie charts","Pie Charts",t),this.defInteger("pieSegmentSeparation",1,"Length in pixels for the separation of the pieces of the pie charts","Pie Charts",t),this.defOption("pieSegmentLabels","inside",["inside","outside"],"Location for the values in the pie charts","Pie Charts",t),this.defOption("pieLabelType","percentage",["percentage","value"],"Pie label type to show the percentage of the slice or the actual number","Pie Charts",t),this.defFloat("maxPieSectors",20,"Max pie sectors. After that number the sectors will be put in a sector named other","Pie Charts",t),this.defShow("PieValues",!0,"values for the pie","Pie Charts",t),this.defShow("PieSampleLabel",!0,"sample label when plotting multiple pies","Pie Charts",t),this.defFloat("startPieSectors",270,"Starting degrees for pie sectors. 0 is equivalent to 3:00 oclock","Pie Charts",t),this.defFloat("pieInnerRadius",0,"Percentage of the radius in the pies to remove to make a donut. It must be a number between 0 to 1","Pie Charts",t),this.defArray("pieColors",[],"Pie Colors. Defaults to the parameter colors","Pie Charts",t),this.defOption("circularType","normal",["normal","radar","sunburst","chord","bubble"],"Property to set the subtype of circular graph. If set to sunburst or bubble then smpOverlays can be used to build a hierarchy for the graph","Circular Graphs",t),this.defInteger("chordThickness",28,"Relative length in pixels of the chord thickness in the circular graphs. Only applicable to the chord subtype","Circular Graphs",t),this.defOption("chordColor","source",["source","target"],"Color the ribbon according to either the source or the target of the connection","Circular Graphs",t),this.defColor("bubble","rgba(204,204,204,0.33)","Venn bubbles. Only applicable to the bubble subtype","Circular Graphs",t),this.defFloat("circularCenterProportion",.3,"Proportion of the center of the circular graph to use as void; that is the fraction of the radius in the middle of the graph","Circular Graphs",t),this.defInteger("arcSegmentsSeparation",8,"Number of degrees to separate the arc segments in the circular plots. The arc segments can be set with the segregateSampleBy property","Circular Graphs",t),this.defInteger("circularRotate",0,"Number of degrees to rotate the circular graph to adjust the starting point","Circular Graphs",t),this.defInteger("circularArc",360,"Number of degrees to extend the circular graph","Circular Graphs",t),this.defInteger("ringSeparation",5,"Number of pixels to separate the rings in the circular plots","Circular Graphs",t),this.defArray("ringGraphType",[],"Array containing the graph type for each ring in the circular plot","Circular Graphs",t),this.defArray("ringGraphWeight",[],"Array containing the proportion of the dimensions for each data ring in the circular plot. It must be a value between 0.1 and 1. If not specified then all ring will be weighted the same","Circular Graphs",t),this.defArray("arcSegmentsRadius",[],"Array containing the proportion of the radius for each arc segment in the circular plot. If not specified then all radius will be the same. The plot will be scaled based of the largest value in the array","Circular Graphs",t),this.defArray("ringsOrder",[],"Array containing the order of the rings. The array includes the levels of the factor specified as either segregateSamplesBy when show the ideogram or segregateVariablesBy when there is no ideogram. It may also include any of the following terms: dendrogram, ideogram, labels, scale, percent and data. If there are sample overlays, the array may also contain any of the factor names include in the this.data.x object. This array supersede any other configurations for example for the sample overlays. CanvasXpress will honored all other configurations if left empty","Circular Graphs",t),this.defString("rAxis",!1,"Radial axis for circular plots. It must be the name of a variable. Only applicable to 2 Dimensional circular plots","Circular Graphs",t),this.defBoolean("rAxisZero",!1,"Flag to force the rAxis property to start from zero otherwise it starts from the minimum value","Circular Graphs",t),this.defShow("CircularConnections",!0,"connections in circular graphs","Circular Graphs",t),this.defArray("connections",[],"Array to store connections in circular graphs","Circular Graphs",t),this.defFloat("circularLetterSeparationFactor",1.5,"Factor to adjust the spacing between letters in the circular graphs. The greater the number the closer the letters in the labels","Circular Graphs",t),this.defFloat("circularConnectionsTransparency",.5,"Percentage of transparency applied to the connections in the circular graphs","Circular Graphs",t),this.defOption("overlayLevelOrientation","circular",["perpendicular","circular"],"Orientation to show the segregation levels","Circular Graphs",t),this.defOption("smpLabelOrientation","perpendicular",["perpendicular","circular"],"Orientation to show the sample names","Circular Graphs",t),this.defOption("circularLabelsAlign","outside",["inside","outside"],"Position to align the variable and sample names in circular plot","Circular Graphs",t),this.defOption("circularScalesAlign","inside",["inside","outside"],"Position to align the percent and radial axes in circular plot","Circular Graphs",t),this.defOption("circularAnchorsAlign","inside",["inside","outside"],"Position to align the anchors in circular plot","Circular Graphs",t),this.defOption("circularAnchors2Align","outside",["inside","outside"],"Position to align the anchors2 in circular plot","Circular Graphs",t),this.defOption("circularDataPosition","distributed",["absolute","distributed"],"Position to align the data in 2D radial graphs and ideograms","Circular Graphs",t),this.defInteger("circularAnchorLength",15,"Length in pixels of the height of the circular anchor","Circular Graphs",t),this.defColor("circularAnchor","rgb(0,0,255)","circular anchor","Circular Graphs",t),this.defShow("Ideogram",!1,"Human Chromosome Ideogram. Force plot to be two dimensional","Circular Graphs",t),this.defOption("ideogram","hg38",["hg19","hg38"],'Ideogram. Additional ideograms can be loaded by appending to the CanvasXpress.chromosomes object. The format of the ideogram is based on the R data for USCS.hg19.chr<br> CanvasXpress.chromosomes = {<br> &nbsp;&nbsp;hg19 : {<br> &nbsp;&nbsp;&nbsp;&nbsp;order : [ 1, 2, 3, 4, 5, 6, 7, 8, ...],<br> &nbsp;&nbsp;&nbsp;&nbsp;data : {<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1 : [ [ 0, 2300000, "p36.33", "gneg" ], ...],<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2 : [ [ 0, 4300000, "p25.3", "gneg" ],  ...],<br> &nbsp;&nbsp;&nbsp;&nbsp;}<br> &nbsp;&nbsp;}<br> }',"Circular Graphs",t),this.defString("ideogramChromosome","chr","Factor name included in the data.z object used to map to the chromosome number","Circular Graphs",t),this.defString("ideogramChromosomePosition","pos","Factor name included in the data.z object used to map to the chromosome position","Circular Graphs",t),this.defInteger("tagCloudTextWeightFactor",1,"Factor weight for text in tag cloud visualizations","Tag Cloud",t),this.defInteger("tagCloudTextGridSize",8,"Size for the grid in text tag cloud visualizations","Tag Cloud",t),this.defFloat("tagCloudTextEllipticity",.65,"Ellipticity for the for text in tag cloud visualizations","Tag Cloud",t),this.defFloat("tagCloudTextRotateRatio",.1,"Ratio for rotation of text in cloud visualizations","Tag Cloud",t),this.defOption("tagCloudShape",!1,[!1,"circle","cardioid","diamond","square","triangle","triangle2","pentagon","star"],"Shape for the tag cloud","Tag Cloud",t),this.defBoolean("tagCloudMask",!1,"Add a shadow for the selected shape","Tag Cloud",t),this.defArray("tagCloudGridPoints",[],"Array to keep state of the used space in the tag cloud visualization","Tag Cloud",!1),this.defBoolean("calculateLayout",!0,"Flag to force or not to calculate the network layout","Network Graphs",t),this.defBoolean("networkFreeze",!1,"Flag to prevent autoscaling for the network layout. Useful when images are part of the network","Network Graphs",t),this.defInteger("networkMaxIterations",15,"Number of iterations to separate subnetworks","Network Graphs",t),this.defBoolean("networkFreezeOnLoad",!1,"Flag to prevent autoscaling for the network layout after loading. Useful when images are part of the network","Network Graphs",t),this.defBoolean("preScaleNetwork",!1,"Flag to prescale or not the network. This is an aesthetic parameter to make the graph look nicer... Sometimes..","Network Graphs",t),this.defBoolean("ignoreEventlessOrder",!1,"Flag to render all nodes at one time rather that rendering first the eventless nodes and then the non-eventless nodes","Network Graphs",t),this.defArray2("subNetworks",!1,"Array to keep independent networks","Network Graphs",!1),this.defOption("networkLayoutType","forceDirected",["forceDirected","circular","radial"],"Type of network layout","Network Graphs",t),this.defString("networkRoot",!1,"Node Id of the network root","Network Graphs",t),this.defBoolean("isNetworkMetrics",!1,"Flag to calculate all network metrics: betweenness, closeness, eccentricity and degree","Network Graphs",t),this.defShow("NetworkRadialLayout",!1,"radial layout wire","Network Graphs",t),this.defBoolean("is3DNetwork",!1,"Flag to create or not a 3D network","Network Graphs",t),this.defBoolean("networkNodesOnTop",!0,"Order to use when drawing the nodes and edges in the networks. Useful for very populated netwrok graphs. When is set to true all the edges will be in the background","Network Graphs",t),this.defBoolean("moveParentsWithChildren",!1,"Flag to make parents move when a child is moved","Network Graphs",t),this.defArray("highlightNode",[],"Name of nodes in the data.nodes object to highlight","Network Graphs",t),this.defColor("nodeHighlight","rgb(255,0,0)","highlighted nodes","Network Graphs",t),this.defInteger("showNodeNameThreshold",50,"Thereshold used to set the limit to hide or display the name of nodes in a network. If the number of nodes exceed this thereshold then the name will not be shown","Network Graphs",t),this.defInteger("showNodeNameSizeThreshold",20,"Thereshold used to set the limit to hide or display the name of nodes in a network based on the size of the node. If the number of node size exceed this thereshold then the name will be shown","Network Graphs",t),this.defInteger("nodeSize",15,"Approximate pixels for the size of the nodes in the network. Automatically adjusted depending on the numebr of nodes in the network","Network Graphs",!1),this.defInteger("edgeThickness",1,"Default thickness for the edges in the networks","Network Graphs",!1),this.defOption("labelNodePosition","auto",["auto","center","top","right","bottom","left"],"Default position for the node label","Network Graphs",t),this.defText("node","",!1,15,1,"center",0,8,"node","Network Graphs",t),this.defString("networkVendor",!1,"Network vendor","Network Graphs",t),this.defOption("attractiveForceFunction","square",["square","cubic","log","pow","sqrt"],"Type of function to apply when calculating attractive force in forceDirected network layouts. Fruchterman-Reingold uses square while Eades uses log","Network Algorithm Parameters",t),this.defOption("repulsiveForceFunction","square",["square","cubic","log","pow","sqrt"],"Type of function to apply when calculating repulsive force in forceDirected network layouts. Fruchterman-Reingold uses square while Eades uses log","Network Algorithm Parameters",t),this.defBoolean("useBarnesHutSimulation",!1,"Flag to use Barnes–Hut simulation","Network Algorithm Parameters",t),this.defBoolean("networkDisjoint",!0,"Flag to use positioning forces rather than centering forces. Applicable only to force directed layouts that contain multiple subnetworks","Network Algorithm Parameters",t),this.defFloat("networkSpeed",.1,"Network Speed","Network Algorithm Parameters",t),this.defFloat("networkGravity",.75,"Network Gravity","Network Algorithm Parameters",t),this.defInteger("networkSpringLength",35,"Ideal length for links (springs in physical model)","Network Algorithm Parameters",t),this.defFloat("networkSpringCoeff",8e-4,"Hooks law coefficient. 1 - solid spring","Network Algorithm Parameters",t),this.defFloat("networkRepulsion",-1,"Coulombs law coefficient. Its used to repel nodes thus should be negative if you make it positive nodes start attract each other","Network Algorithm Parameters",t),this.defFloat("networkTheta",.8,"Theta coefficient from Barnes Hut simulation. Ranged between (0, 1). The closer its to 1 the more nodes algorithm will have to go through. Setting it to one makes Barnes Hut simulation no different from brute-force forces calculation (each node is considered)","Network Algorithm Parameters",t),this.defFloat("networkDragCoeff",.09,"Drag force coefficient. Used to slow down system, thus should be less than 1. The closer it is to 0 the less tight system will be","Network Algorithm Parameters",t),this.defInteger("networkTimeStep",20,"Default time step (dt) for forces integration","Network Algorithm Parameters",t),this.defArray("barnesHutUpdateQueue",[],"Barnes Hut Queue for performance and avoid Javascript GC","Network Algorithm Parameters",!1),this.defArray("barnesHutNodesCache",[],"Barnes Hut node cache for performance and avoid Javascript GC","Network Algorithm Parameters",!1),this.defInteger("barnesHutNodesCacheCurrent",0,"Barnes Hut idex for node cache for performance and avoid Javascript GC","Network Algorithm Parameters",!1),this.defString("colorNodeBy",!1,"Name of the attribute to color the nodes","Network Node and Edge Attributes",t),this.defString("shapeNodeBy",!1,"Name of the attribute to shape the nods","Network Node and Edge Attributes",t),this.defString("sizeNodeBy",!1,"Name of the attribute to size the nodes","Network Node and Edge Attributes",t),this.defString("patternNodeBy",!1,"Name of the attribute to pattern the nodes","Network Node and Edge Attributes",t),this.defString("colorEdgeBy",!1,"Name of the attribute to color the edges","Network Node and Edge Attributes",t),this.defString("sizeEdgeBy",!1,"Name of the attribute to size the edges","Network Node and Edge Attributes",t),this.defShow("NetworkCommunities",!1,"network communities","Network Communities",t),this.defBoolean("calculateNetworkCommunities",!0,"Flag to calculate the network communities using the jLouvain algorithm. If this flag is false the property community and communityColor for each node will need to be provided, otherwise all nodes will belong to a single community","Network Communities",t),this.defBoolean("coordinateNetworkConvexHullCommunityColor",!1,"Flag to coordinate colors of the nodes with convex hull for the network communities","Network Communities",t),this.defFloat("hullScale",1.25,"Scaling factor for extension of the hulls in the network communities","Network Communities",t),this.defInteger("networkCommunities",null,"Number of network communities","Network Communities",!1),this.defArray("networkConvexHulls",[],"Array for the Network community convex hull property object","Network Communities",!1),this.defInteger("genomeTicks",50,"Number of ticks in the genome browser","Genome Browser",t),this.defText("trackName","","rgb(0,0,0)",10,1,"center",0,8,"track name","Genome Browser",t),this.defColor("trackFill","rgb(255,255,255)","fill of the tracks in the genome browser","Genome Browser",t),this.defColor("trackDir","rgb(0,0,0)","strand direction of the tracks in the genome browser","Genome Browser",t),this.defInteger("subtracksMaxDefault",8,"Maximum number of subtracks to show in a track","Genome Browser",t),this.defInteger("showFeatureNameThereshold",20,"Threshehold used to set te limit when there are too many features in the genome browser","Genome Browser",t),this.defText("featureName","","rgb(0,0,0)",12,1,"center",0,8,"feature name","Genome Browser",t),this.defColor("featureFill","rgb(255,255,255)","fill of the feature in the genome browser","Genome Browser",t),this.defColor("featureDir","rgb(0,0,0)","strand direction of the feature in the genome browser","Genome Browser",t),this.defInteger("maxFeatureStringLen",30,"Maximum length in characters a feature label can have so anything above is truncated","Genome Browser",t),this.defInteger("featureWidthDefault",3,"Default size in pixels of the feature width","Genome Browser",t),this.defInteger("featureHeightDefault",14,"Default size in pixels of the feature height","Genome Browser",t),this.defOption("featureSpliceStyle","rect",["rect","broken"],"Default style for splicing in boxes","Genome Browser",t),this.defInteger("featureTraceHeight",40,"Default size in pixels of the trace height","Genome Browser",t),this.defInteger("featureTraceTrim",1,"Default triming for nucleotide values in the traces (expressed in percent)","Genome Browser",t),this.defBoolean("featureTracesShow",!0,"Flag use to show traces","Genome Browser",t),this.defInteger("featureQualityHeight",14,"Default size in pixels of the quality height","Genome Browser",t),this.defBoolean("featureQualityValues",!1,"Flag use to show values for the quality","Genome Browser",t),this.defBoolean("featureQualityShow",!0,"Flag use to show quality","Genome Browser",t),this.defInteger("featureSignalToNoiseHeight",14,"Default size in pixels of the quality height","Genome Browser",t),this.defBoolean("featureSignalToNoiseValues",!1,"Flag use to show values for the quality","Genome Browser",t),this.defBoolean("featureSignalToNoiseShow",!0,"Flag use to show quality","Genome Browser",t),this.defInteger("featureCoordinateHeight",14,"Default size in pixels of the coordinates height","Genome Browser",t),this.defBoolean("featureCoordinateShow",!0,"Flag use to show coordinates","Genome Browser",t),this.defInteger("featureTranslateHeight",14,"Default size in pixels of the translation height","Genome Browser",t),this.defBoolean("featureTranslateShow",!0,"Flag use to show tranlation","Genome Browser",t),this.defOption("featureTypeDefault","line",["box","bar","heatmap","sequence","triangle","line"],"Default type for the feature in the genome browser","Genome Browser",t),this.defBoolean("featureStaggered",!1,"Flag use to stagger the features in the genome panel","Genome Browser",t),this.defText("sequence","","rgb(0,0,0)",12,1,"center",0,8,"sequence","Genome Browser",t),this.defColor("sequenceFill",!1,"background when showing sequnces in the box or sequence object in the Genome. The default is to use the background of the object. If specied a valid color then all the background of sequences will be uniform","Genome Browser",t),this.defColor("sequenceGAP","rgb(255,0,255)","deletions, insertions and gaps in the genome browser","Genome Browser",t),this.defColor("sequenceA","rgb(0,103,0)","adenines and alanines in the genome browser","Genome Browser",t),this.defColor("sequenceB","rgb(0,0,0)","degenerate C/G/T and asparagines in the genome browser","Genome Browser",t),this.defColor("sequenceC","rgb(0,0,255)","cytosines and cysteins in the genome browser","Genome Browser",t),this.defColor("sequenceD","rgb(0,0,0)","degenerate A/G/T and aspartic acids in the genome browser","Genome Browser",t),this.defColor("sequenceE","rgb(0,0,0)","glutamic acids in the genome browser","Genome Browser",t),this.defColor("sequenceF","rgb(0,0,255)","phenylalanines in the genome browser","Genome Browser",t),this.defColor("sequenceG","rgb(0,0,0)","guanines and glycines in the genome browser","Genome Browser",t),this.defColor("sequenceH","rgb(255,0,0)","degenerate A/C/T and histidines in the genome browser","Genome Browser",t),this.defColor("sequenceI","rgb(0,103,0)","isoleucines in the genome browser","Genome Browser",t),this.defColor("sequenceK","rgb(255,0,0)","degenerate G/T and lysines in the genome browser","Genome Browser",t),this.defColor("sequenceL","rgb(0,103,0)","leucines in the genome browser","Genome Browser",t),this.defColor("sequenceM","rgb(0,103,0)","degenerate A/G and methionines in the genome browser","Genome Browser",t),this.defColor("sequenceN","rgb(0,0,0)","degenerate A/C/G/T and asparagines in the genome browser","Genome Browser",t),this.defColor("sequenceP","rgb(255,165,0)","prolines in the genome browser","Genome Browser",t),this.defColor("sequenceQ","rgb(0,0,0)","glutamines in the genome browser","Genome Browser",t),this.defColor("sequenceR","rgb(255,0,0)","degenerate A/G and arginines in the genome browser","Genome Browser",t),this.defColor("sequenceS","rgb(255,165,0)","degenerate G/C and serines in the genome browser","Genome Browser",t),this.defColor("sequenceT","rgb(255,0,0)","thymidines and threonines in the genome browser","Genome Browser",t),this.defColor("sequenceU","rgb(255,0,0)","uracils in the genome browser","Genome Browser",t),this.defColor("sequenceV","rgb(0,103,0)","degenerate A/C/G and valines in the genome browser","Genome Browser",t),this.defColor("sequenceW","rgb(0,0,255)","degenerate A/T and tryptophans in the genome browser","Genome Browser",t),this.defColor("sequenceX","rgb(0,0,0)","any aminoacid code in the genome browser","Genome Browser",t),this.defColor("sequenceY","rgb(0,0,255)","degenerate C/T and tyrosines in the genome browser","Genome Browser",t),this.defColor("sequenceZ","rgb(0,0,0)","glutamines in the genome browser","Genome Browser",t),this.defColor("sequenceStart","rgb(0,204,0)","start codon in the genome browser","Genome Browser",t),this.defColor("sequenceEnd","rgb(255,0,0)","end codon in the genome browser","Genome Browser",t),this.defColor("wire","rgba(204,204,204,0.1)","ticks in the genome browser","Genome Browser",t),this.defInteger("periodTicksLabels",5,"Number of ticks to skip between values in the genome browser","Genome Browser",t),this.defOption("genomeResolution","low",["low","medium","high"],"Number to adjust the splines curvature","Genome Browser",t),this.defArray("trackConfigurableProperties",["name","hideName","hideFeatureNames","type","height","fill","outline","data","hide","connect","subtracksMax","highlight"],"Track configurable properties<br> @tracks {name:[string];Track name;[]}","Genome Browser",t),this.defArray("featureConfigurableProperties",["id","name","label","hideName","fill","outline","dir","showDir","connect","offset","data","subtype","quality","signalToNoise","coordinate","sequence","trace","gaps","translate","hide","counter"],"Feature configurable properties<br> @features {id:[string];Feature id;[],fill:[color];Color for the feature;[]}","Genome Browser",t),this.defArray("errors",[],"Array containing benign errors produced when rendering canvasXpress","Debug",!1),this.defBoolean("debug",!1,"Flag to turn on alerts","Debug",t),this.defBoolean("verbose",!1,"Flag to turn on/off verbose","Debug",t),this.defBoolean("offline",!1,"Flag to work offline","Debug",t),this.defShow("Version",!0,"version when mouse over top-left corner of the canvas","Debug",t),this.defShow("Code",!1,"code for the canvas","Debug",t),this.defOption("codeType","params",["pretty","compact","tab","params"],"Output type for the JSON code","Debug",t),this.defBoolean("disableEvents",!1,"Flag to disable all events","Events",t),this.defBoolean("disableCode",!1,"Flag to disable showing the code","Events",t),this.defBoolean("disableMenu",!1,"Flag to disable showing the menu on right clicks","Events",t),this.defBoolean("disableToolbar",!1,"Flag to disable showing the toolbar","Events",t),this.defBoolean("disableDataTable",!1,"Flag to disable showing data table","Events",t),this.defBoolean("disableDataFilters",!1,"Flag to disable showing data filters","Events",t),this.defBoolean("disableCustomizer",!1,"Flag to disable the data explorer","Events",t),this.defBoolean("disableCanvas",!1,"Flag to disable all canvas events","Events",t),this.defBoolean("disableKeys",!1,"Flag to disable key binding events. This prevent some default browser shortcuts and it is system specific. Please see the Event section bellow","Events",t),this.defBoolean("disableShowShortcuts",!1,"Flag to disable showing shortcuts","Events",t),this.defBoolean("disablePlusMinusKeys",!0,"Flag to disable plus / minus key binding events","Events",t),this.defBoolean("disableUndoRedoKeys",!0,"Flag to disable undo / redo key binding events","Events",t),this.defBoolean("disableDocument",!1,"Flag to disable mousemove and mouseup in the document","Events",t),this.defBoolean("disableWindow",!1,"Flag to disable resizing the canvas when the window is resized. ","Events",t),this.defBoolean("disableWheel",!1,"Flag to disable wheel. ","Events",t);this.defBoolean("disableBeacon",!1,"Flag to disable beacon. ","Events",t),this.defBoolean("playable",!1,"Flag to make the plot playable if there are after rendering functions","Events",t),this.defBoolean("resizable",!0,"Flag to disable resizing the canvas by dragging the mouse over the edges","Events",t),this.defBoolean("resizableX",!0,"Flag to disable resizing the width of the canvas by dragging the mouse over the edges","Events",t),this.defBoolean("resizableY",!0,"Flag to disable resizing the height of canvas by dragging the mouse over the edges","Events",t),this.defBoolean("movable",!0,"Flag to disable moving the canvas by dragging the mouse from the move image in the toolbar","Events",t),this.defInteger("maxSubMenus",25,"Maximum number of submenus in the context menus","Events",t),this.defShow("PrimaryMenus",!1,"primary menus in toolbar","Events",t),this.defInteger("maxItemMenuCheckbox",10,"Maximum number of items in a menu before it becomes a scroll box","Events",t),this.defBoolean("resizeWidthOnLayout",!0,"Flag to enable resizing the width of the canvas after changing the layout","Events",t),this.defBoolean("resizeHeightOnLayout",!0,"Flag to enable resizing the height of the canvas after changing the layout","Events",t),this.defBoolean("skipClick",!1,"Flag to skip click events after a mouse down event in visualizations where there is a drag capabilities","Events",!1),this.defInteger("infoTimeOut",3e3,"Time in milliseconds to wait between updates for the mouse over info to show up","Events",t),this.defInteger("infoStartTime",(new Date).getTime(),"Time in milliseconds to keep track of time","Events",!1),this.defInteger("infoTimeIn",50,"Time in milliseconds to start showing info after a mouse over","Events",t),this.defBoolean("broadcast",!0,"Flag to enable broadcasting to other canvasXpress objects in the page","Events",t),this.defString("broadcastGroup",!1,"Group Id for canvas to broadcast to. If not specified then it broadcasts to all canvases","Events",t),this.defShow("MousePositionOnDrag",!0,"mouse position when dragging in relation to the zero coordinate (top-right) of the canvas","Events",t),this.defOption("toolbarType","under",["over","under","fixed"],"Toolbar type","Events",t),this.defBoolean("lazyLoad",!1,"Load canvas only if shown in viewport","Events",t),this.defShow("Animation",!0,"animation for the graphs","Animations and Visualization Transitions",t),this.defShow("Transition",!1,"transitions for the graphs","Animations and Visualization Transitions",t),this.defInteger("transitionStep",20,"Steps for transition","Animations and Visualization Transitions",t),this.defInteger("transitionStaggering",10,"Steps for transitionioning data objects","Animations and Visualization Transitions",t),this.defOption("transitionFunction","easeInOutQuad",["linear","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint"],"Easing function for the transition","Animations and Visualization Transitions",t),this.defFloat("weight",1,"Fraction of the canvas to be used (a value between 0 and 1). Used when multiple graphs are displayed in one canvas. Could be an number or an array of numbers","Combination Plots",!1),this.defFloat("scaleX",1,"Scale factor for the X axis","Combination Plots",!1),this.defFloat("scaleY",1,"Scale factor for the Y axis","Combination Plots",!1),this.defFloat("translateX",0,"Amount to translate for the X axis","Combination Plots",!1),this.defFloat("translateY",0,"Amount to translate for the Y axis","Combination Plots",!1),this.defFloat("offsetX",0,"Additional amount to move for the X axis","Combination Plots",!1),this.defFloat("offsetY",0,"Additional amount to move for the Y axis","Combination Plots",!1),this.defFloat("layoutWidth",0,"Width of the current segment of the canvas when there are multiple graphs","Combination Plots",!1),this.defFloat("layoutHeight",0,"Height of the current segment of the canvas when there are multiple graphs","Combination Plots",!1),this.defString("layout","1X1","Topology of the canvas. Number of rows and columns","Combination Plots",!1),this.defString("layoutTopology",!1,"Topology of the canvas. Number of columns and rows separated by X. For example: 2X1, 1X3, etc","Combination Plots",t),this.defBoolean("layoutComb",!1,"Flag that identify that multiple graphs will be displayed in the canvas. This is the case when ata is segregated, splom, multiple pies or DOE visualizations","Combination Plots",!1),this.defBoolean("layoutAdjust",!1,"Flag to force recalculating the ranges in the axes when multiple graphs are displayed in the canvas","Combination Plots",t),this.defBoolean("layoutCollapse",!1,"Flag to make layout graphs without any space in between","Combination Plots",t),this.defOption("layoutType","wrap",["wrap","rows","cols"],"Type of layout to place the position for the labels in the trellis plot. Identify the axis that will be used to place the first segregating factor. rows will use the first segregating factor in the rows and the second in the columns. cols will use the first segregating factor in the columns and the second in the rows. wrap will wrap the segregating factors putting the sample factors in the columns","Combination Plots",t),this.defBoolean("layoutRemoveEmpty",!0,"Flag to remove empty combinations in segregated layouts","Combination Plots",t),this.defBoolean("layoutCanvasCompartments",!1,"Flag to draw lines around each graph in the layout in the canvas. Used only when debugging","Combination Plots",t),this.defArray("layoutBoxLabelColors",[],'Layout box label background colors.<br> @ex {["gold","silver"],"data":"Random:4:8:2:2","segregateSamplesBy":["Factor1"];',"Combination Plots",t),this.defBoolean("layoutBoxShow",!0,"Flag to draw the layout boxes","Combination Plots",t),this.defColor("layoutLabel","rgb(0,0,0)","label text in layout graphs","Combination Plots",t),this.defFloat("layoutLabelBoxThickness",30,"Thickness of the layout label boxes","Combination Plots",t),this.defBoolean("layoutLabelShow",!0,"Flag to draw the layout label","Combination Plots",t),this.defArray("layoutConfig",[],"Array of object to assign visualization configurations to each layout","Combination Plots",t),this.defInteger("layoutCurrent",0,"Integer to identify the current graph being displayed in the canvas","Combination Plots",!1),this.defOption("layoutAxis",3,[1,2,3],"Flag to indicated whether to print axes values when multiple graphs are displayed in the canvas. The possible values are: 1: horizontal, 2: vertical, 3: both","Combination Plots",t),this.defInteger("imageTimeOut",1e3,"Time in milliseconds to wait to load images","Images",t),this.defInteger("imageMaxTries",10,"Maximum times to try to load images. Used to calculate the timeout which will be imageTimeOut / imageTries which will be 100ms by default","Images",t),this.defInteger("imageTries",0,"Image try counter","Images",!1),this.defURL("remoteService",!1,"Url used to obtain data remotely thorugh a web service or directly from a file. If the remote service is a file then it expects a json file with a two dimensional array. Each of the arrays should have a key (which will be used in a drop down menu) and a value to point to a url where to get the data. If the remote service is a web service it expects a canvasXpress object. You may specify additional parameters for the web service but you must specify the type of remote service in remoteServiceType. The default parameters for web services are index (to identify the current record number) and dir (to identify the direction; it could be either next or prev)","Remote Procedures",t),this.defString("remoteServiceType","webService","Type of web service to obtain data remotely","Remote Procedures",t),this.defObject("remoteParams",{},"Object to hold additional parameters used to obtain data remotely. The target property will be always added to the method as well as the direction [next|prev]","Remote Procedures",t),this.defOption("remoteDirection","next",["next","prev"],"Direction parameter used to obtain data remotely","Remote Procedures",t),this.defBoolean("remoteAutoPlay",!1,"Flag to automatically iterate over remote data sets","Remote Procedures",t),this.defInteger("remoteAutoPlayDelay",3e3,"Time in milliseconds to wait between iterations while automatically going over remote data sets","Remote Procedures",t),this.defBoolean("remoteParamOverride",!0,"Flag to override parameters to maintain the state of the graphs when using remote services","Remote Procedures",t),this.defOption("remoteTransitionEffect","slide",["none","slide","fade"],"Effect for the remote transitions","Remote Procedures",t),this.defBoolean("remoteAutoSize",!0,"Flag to adjust remote graph to current canvas size","Remote Procedures",t),this.defString("remoteParentId","","Id for the parent holding the remoteWindow to prevent id collisions","Remote Procedures",!1),this.defInteger("remoteDataIndex",0,"Index of the canvasXpress object requested","Remote Procedures",!1),this.defArray("remoteIds",[],"Array of the remoteIds passed after a service call","Remote Procedures",!1),this.defArray("remoteData",[],"Array for the remote data pased after a service call","Remote Procedures",!1),this.defBoolean("remoteUpdating",!1,"Flag to indicate that updating data is in progress","Remote Procedures",!1),this.defURL("RdatastesURL","https://raw.githubusercontent.com/neuhausi/Rdatasets/master/","URL for R objects","R",!1),this.defBoolean("loadRDatasets",!1,"Flag to load R datasets from Github","R",t),this.defInteger("maxDataCustomizerEntries",1e4,"Maximum number of samples or variables to display in the data customizer","Data Customizer",t),this.defOption("customizerSize","medium",["small","medium","large"],"Size for the customizer. Requires re-opening of customizer","Data Customizer",t),this.defBoolean("customizerEntriesAsList",!0,"Flag to show entries in scrolling widgets as text. The default is to show them as icons-like","Data Customizer",t),this.defBoolean("customizerGraphMaximize",!1,"Flag to maximize the graph when the customizer is called","Data Customizer",t),this.defBoolean("skipConfigurableProperties",!0,"Flag to indicate to exclude configurable parameters in the data table and the data filters in Networks and Genome Browser","Data Table/Filter",t),this.defArray("nodesProperties",[],"Two dimensional array with object properties not at the root level for the nodes in the Network graph to include in the Data table and the data filter","Data Table/Filter",t),this.defArray("edgesProperties",[],"Two dimensional array with object properties not at the root level for the edges in the Network graph to include in the Data table and the data filter","Data Table/Filter",t),this.defArray("featuresProperties",[],"Two dimensional array with object properties not at the root level for the features in the Genome graph to include in the Data table and the data filter","Data Table/Filter",t),this.defBoolean("layoutGraphMaximize",!1,"Flag to maximize the graph when the layout app is called","Data Table/Filter",t),this.defInteger("dataFilterWidth",220,"Size in pixels for the data filters","Data Filters",t),this.defOption("filterType","and",["and","or"],"Type for the filter. Can be and or or","Data Filters",t),this.defOption("filterMode","remove",["remove","hide","color"],"Mode for the filter. Can be remove to remove the data from the plot, hide to hide the data similarily to legend filters (may be useful to adjustor transparencyHidden) or color to color the data point with a set color (may be useful to adjust missingDataColor)","Data Filters",t),this.defBoolean("filterSkipNullKeys",!1,"Flag to indicate to bypass filtering when a key is non existent in the data objects","Data Filters",t),this.defBoolean("filterSkipNullValues",!1,"Flag to indicate to bypass filtering when a value is null","Data Filters",t),this.defFilter("filterVarBy",{cases:[],comp:[],op:[],type:[],value:[]},"Filter variables by their annotation included in the data.z object used in one dimensional plots. Used in the CanvasXpress UIs","Data Filters",t),this.defFilter("filterSmpBy",{cases:[],comp:[],op:[],type:[],value:[]},"Filter samples by their annotation included in the data.x object used in one dimensional plots. Used in the CanvasXpress UIs","Data Filters",t),this.defFilter("filterNodeBy",{cases:[],comp:[],op:[],type:[],value:[]},"Filter nodes by their properties used in network graphs. Used in the CanvasXpress UIs","Data Filters",t),this.defFilter("filterEdgeBy",{cases:[],comp:[],op:[],type:[],value:[]},"Filter edges by their properties used in network graphs. Used in the CanvasXpress UIs","Data Filters",t),this.defFilter("filterFeatureBy",{cases:[],comp:[],op:[],type:[],value:[]},"Filter features by their properties used in genome browser. Used in the CanvasXpress UIs","Data Filters",t),this.defFilter("filterDataBy",{cases:[],comp:[],op:[],type:[],value:[]},"Filter data by their value in the data object used in oncoprints. Used in the CanvasXpress UIs","Data Filters",t),this.defArray("filtersExposed",[],"Exposed filters after rendering the plot. Each element in the array is an object as follows: {name: [var or smp annotation|vars|smps], position: [topRight|topLeft|bottomRight|bottomLeft], css: {property:value}}","Data Filters",t),this.defShow("DataTable",!1,"data table","Data Table",t),this.defBoolean("dataTableTransposed",!0,"Flag to transpose the data in the data table","Data Table",t),this.defInteger("maxRows",10,"Maximum number of rows to display in the data table","Data Table",t),this.defInteger("maxCols",6,"Maximum number of columns to display in the data table","Data Table",t),this.defInteger("colWidth",100,"Mumber of pixels for the width of cells in the data table","Data Table",t),this.defInteger("rowHeight",18,"Mumber of pixels for the height of cells in the data table","Data Table",t),this.defInteger("dataTableFontSize",12,"Data table font size","Data Table",t),this.defString("dataTableFontFamily","unset","Data table font family","Data Table",t),this.defBoolean("refresehDataTableOnDraw",!1,"Flag to indicate to refresh data after drawing the plot","Data Table",t),this.defShow("DataTableOnSelect",!1,"Flag to indicate to show data after selecting data in the plot","Data Table",t),this.defOption("networkShowDataTable","nodes",["nodes","edges"],"Show nodes or edges on data table","Data Table",t),this.defBoolean("colorDataTable",!0,"Flag to color the data table","Data Table",t),this.defColor("backgroundDataTable","rgba(255,255,255,0.95)","data table background","Data Table",t),this.defFloat("colorDataTableTransparency",.5,"Transparency for the background of the data table cells if colored","Data Table",t),this.defOption("dataTableStyle",!1,[!1,"stripped"],"Data table style","Data Table",t),this.defInteger("startCol",0,"Starting column in the data table","Data Table",!1),this.defInteger("startRow",0,"Starting row in the data table","Data Table",!1),this.defInteger("totalCols",null,"Total columns in the data table","Data Table",!1),this.defInteger("totalRows",null,"Total rows in the data table","Data Table",!1),this.defArray("dataTableColumnWidth",[],"Array to store the column width for the data table","Data Table",!1),this.defArray("dataTableRowHeight",[],"Array to store the row height for the data table","Data Table",!1)},this.updateTheme=function(t){for(var e in t)if("conditional"==e){for(var i in t[e])if(CanvasXpress.graphTypes[i].includes(this.graphType))for(var s in t[e][i])this[s]=t[e][i][s]}else("colorScheme"!=e&&"colors"!=e||"colorScheme"==e&&t[e])&&(this[e]=t[e])},this.setTheme=function(t){if(t||(t=!!CanvasXpress.stack[this.target]&&CanvasXpress.stack[this.target].config),t&&t.hasOwnProperty("theme")&&t.theme){var e=t.theme.toLowerCase().replace(" ",""),i="none";switch(e){case"cx":case"canvasxpress":i="cx";break;case"paultol":i="paulTol";break;case"wallstreetjournal":case"wallstreet":i="wallStreetJournal";break;case"blackandwhite":i="blackAndWhite";break;case"lastairbenderfire":i="lastAirBender",this.colorScheme="LastAirBenderFire";break;case"lastairbenderair":i="lastAirBender",this.colorScheme="LastAirBenderAir";break;case"lastairbenderwater":i="lastAirBender",this.colorScheme="LastAirBenderWater";break;case"lastairbenderearth":i="lastAirBender",this.colorScheme="LastAirBenderEarth";break;case"gameofthronestargaryen":i="gameOfThrones",this.colorScheme="GameOfThronesTargaryen";break;case"gameofthronesstark":i="gameOfThrones",this.colorScheme="GameOfThronesStark";break;case"gameofthronesstannis":i="gameOfThrones",this.colorScheme="GameOfThronesStannis";break;case"gameofthroneslannister":i="gameOfThrones",this.colorScheme="GameOfThronesLannister";break;case"gameofthronestyrell":i="gameOfThrones",this.colorScheme="GameOfThronesTyrell";break;case"gameofthronesmartell":i="gameOfThrones",this.colorScheme="GameOfThronesMartell";break;case"gameofthronestully":i="gameOfThrones",this.colorScheme="GameOfThronesTully";break;case"gameofthronesgreyjoy":i="gameOfThrones",this.colorScheme="GameOfThronesGreyjoy";break;case"gameofthronesmanderly":i="gameOfThrones",this.colorScheme="GameOfThronesManderly";break;case"gameofthronesarryn":i="gameOfThrones",this.colorScheme="GameOfThronesArryn";break;default:i=e}CanvasXpress.themes.hasOwnProperty(i)&&this.updateTheme(CanvasXpress.themes[i])}},this.resetInitialFontSize=function(){for(var t=["fontSize","titleFontSize","subtitleFontSize","smpTitleFontSize","smpLabelFontSize","varTitleFontSize","varLabelFontSize","overlayFontSize","legendTextFontSize","legendTitleFontSize","decorationsTextFontSize","axisTickFontSize","axisTitleFontSize","nodeFontSize","trackNameFontSize","featureNameFontSize","sequenceFontSize"],e=0;e<t.length;e++)this[t[e]]=Number(CanvasXpress.doc.P[t[e]].D);this.setInitialFonts()},this.setInitialFonts=function(){this.font=this.fontStyle+" "+this.fontSize+"px "+this.fontName,this.titleFont=this.titleFontStyle+" "+this.titleFontSize+"px "+this.fontName,this.subtitleFont=this.subtitleFontStyle+" "+this.subtitleFontSize+"px "+this.fontName,this.citationFont=this.citationFontStyle+" "+this.citationFontSize+"px "+this.fontName,this.smpTitleFont=this.smpTitleFontStyle+" "+this.smpTitleFontSize+"px "+this.fontName,this.smpLabelFont=this.smpLabelFontStyle+" "+this.smpLabelFontSize+"px "+this.fontName,this.varTitleFont=this.varTitleFontStyle+" "+this.varTitleFontSize+"px "+this.fontName,this.varLabelFont=this.varLabelFontStyle+" "+this.varLabelFontSize+"px "+this.fontName,this.overlayFont=this.overlayFontStyle+" "+this.overlayFontSize+"px "+this.fontName,this.legendTextFont=this.legendTextFontStyle+" "+this.legendTextFontSize+"px "+this.fontName,this.legendTitleFont=this.legendTitleFontStyle+" "+this.legendTitleFontSize+"px "+this.fontName,this.decorationsTextFont=this.decorationsTextFontStyle+" "+this.decorationsTextFontSize+"px "+this.fontName,this.axisTickFont=this.axisTickFontStyle+" "+this.axisTickFontSize+"px "+this.fontName,this.axisTitleFont=this.axisTitleFontStyle+" "+this.axisTitleFontSize+"px "+this.fontName,this.motionCurrentFont=this.motionCurrentFontStyle+" "+this.motionCurrentFontSize+"px "+this.fontName,this.nodeFont=this.nodeFontStyle+" "+this.nodeFontSize+"px "+this.fontName,this.trackNameFont=this.trackNameFontStyle+" "+this.trackNameFontSize+"px "+this.fontName,this.featureNameFont=this.featureNameFontStyle+" "+this.featureNameFontSize+"px "+this.fontName,this.sequenceFont=this.sequenceFontStyle+" "+this.sequenceFontSize+"px "+this.fontName},this.setInitialConfig=function(){if(this.meta.config.user)for(var t in delete this.meta.config.user.skipRender,this.meta.config.user)(!this.isCreateHistogram||"setMaxX"!=t&&"setMinX"!=t)&&(this.isPivot&&"groupingFactors"==t||(CanvasXpress.doc.P[t]&&CanvasXpress.doc.P[t].hasOwnProperty("T")?("integer"!=CanvasXpress.doc.P[t].T&&"float"!=CanvasXpress.doc.P[t].T||(this.meta.config.user[t]=null===this.meta.config.user[t]?null:Number(this.meta.config.user[t])),this[t]=this.meta.config.user[t]):this[t]=this.meta.config.user[t]))},this.resetConfig=function(t){var e={};if(t)for(var i=0;i<t.length;i++)e[t[i]]=this[t[i]];for(var i in this.setConfigDefaults(),e)this[i]=e[i]},this.updateConfig=function(t){if(t)for(var e in this.meta.config.user=t,t)this[e]=t[e]},this.setConfig=function(t){if(t)for(var e in t)this[e]=t[e]},this.getConfig=function(t){var e,i=this,s={},a=CanvasXpress.config.sort(),r={shapes:!0,images:!0,randomSeed:!0,xAxisValues:!0,xAxisValuesRaw:!0,xAxisMinorValues:!0,yAxisValues:!0,yAxisValuesRaw:!0,yAxisMinorValues:!0,zAxisValues:!0,zAxisValuesRaw:!0,zAxisMinorValues:!0,trackConfigurableProperties:!0,featureConfigurableProperties:!0,remoteServiceType:!0};this.isTransformedData&&(s.isTransformedData=this.isTransformedData);for(var n=0;n<a.length;n++){var o=a[n];if(!o.match(/FontSize$/)&&(CanvasXpress.doc.P[o]&&CanvasXpress.doc.P[o].hasOwnProperty("D"))){var h=(e=o,i.theme&&CanvasXpress.themes[i.theme]&&CanvasXpress.themes[i.theme].hasOwnProperty(e)?CanvasXpress.themes[i.theme][e]:CanvasXpress.doc.P[e].D);if(r[o])continue;var l=void 0!==i[o]&&i[o];if("object"==typeof l)if("[]"==h&&(h=[]),"{}"==h&&(h={}),null===l)"null"!=h&&(s[o]=l);else if("sizes"==o)this.isSameObject(l,h.map(Number))||(s[o]=l);else if("colorSpectrum"==o||"colors"==o){for(var c=[],d=0;d<l.length;d++){var p=this.validateColor(l[d],!1,!0);p&&c.push(p.toLowerCase())}this.isSameObject(c,h)||(s[o]=l)}else o.match("filter"),this.isSameObject(l,h)||(s[o]=l);else if(null!=h&&h.toString().match(/false|true|null/)){if("summaryType"==o&&"raw"==l)continue;l.toString()!=h.toString()&&(s[o]=l)}else l!=h&&(s[o]=l)}}if(s.backgroundImage&&s.backgroundImage.match(/javascript:\/\//)&&CanvasXpress.cacheImages[s.backgroundImage.split("//")[1]]&&(s.backgroundImageSrc=btoa(CanvasXpress.cacheImages[s.backgroundImage.split("//")[1]].replace("data:image/png;base64,",""))),t)for(n=0;n<t.length;n++)s[t[n]]=this.configStndBy&&this.configStndBy[t[n]]?this.configStndBy[t[n]]:this[t[n]];return s},this.getUserConfig=function(){return this.meta.config.user},this.getNewCanvasContext=function(t){var e=this.$(t);return e&&"canvas"==e.tagName.toLowerCase()||(e=this.$cX("canvas",{id:t}),window.body.appendChild(e)),this.get2DCanvasContext(e)},this.setCanvasPixelRatio=function(){var t=window.devicePixelRatio||1,e=this.get2DCanvasContext(this.$cX("canvas")),i=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;this.meta.canvas.canvasPixelRatio=t/i},this.setDPI=function(t,e){t.style.width=t.style.width||t.width+"px",t.style.height=t.style.height||t.height+"px";var i=e/96,s=parseFloat(t.style.width),a=parseFloat(t.style.height),r=i/(t.width/s),n=t.cloneNode(!1);this.get2DCanvasContext(n).drawImage(t,0,0);var o=this.get2DCanvasContext(t);t.width=Math.ceil(s*i),t.height=Math.ceil(a*i),o.setTransform(r,0,0,r,0,0),o.drawImage(n,0,0),o.setTransform(i,0,0,i,0,0)},this.setCanvas=function(){var t=this.$(this.target);t&&(this.setCanvasPixelRatio(),this.checkCanvasXpressOrgSite(),this.meta.canvas.ctx=this.get2DCanvasContext(t),this.meta.canvas.ctx.setTransform(this.meta.canvas.canvasPixelRatio,0,0,this.meta.canvas.canvasPixelRatio,0,0))},this.get2DCanvasContext=function(t){return t.getContext("2d")},this.getCanvasContext=function(){var t=this.isSVG?this.meta.canvas.SVG:this.isHighlightCanvas?this.meta.canvas.ctx2:this.meta.canvas.ctx;return this.currentCanvasContext=t.canvas.id,t},this.checkCanvasXpressOrgSite=function(){for(var t=new RegExp("/www.canvasxpress.org/dist/"),e=window.document.getElementsByTagName("head")[0],i=0;i<e.childNodes.length;i++){var s=e.childNodes[i];"text/javascript"==s.type&&t.test(s.src)&&(CanvasXpress.factory.siteSrc=!0)}},this.setCanvasXpressThemes=function(){if(!CanvasXpress.themes){CanvasXpress.themes={};for(var t=Object.keys(CanvasXpress.themeDef),e=CanvasXpress.themeDef.names,i=0;i<e.length;i++){var s=e[i];CanvasXpress.themes[s]||(CanvasXpress.themes[s]={});for(var a=0;a<t.length;a++){var r=t[a];"names"!=r&&(CanvasXpress.themes[s][r]=CanvasXpress.themeDef[r][i])}}CanvasXpress.themes.CanvasXpress=CanvasXpress.themes.cx,CanvasXpress.themes.canvasXpress=CanvasXpress.themes.cx,CanvasXpress.themes.canvasxpress=CanvasXpress.themes.cx,CanvasXpress.themes.paultol=CanvasXpress.themes.paulTol,CanvasXpress.themes.PaulTol=CanvasXpress.themes.paulTol,CanvasXpress.themes.GGPlot=CanvasXpress.themes.ggplot}},this.initializeConfig=function(t){if(CanvasXpress.config=[],this.setConfigDefaults(),this.setCanvasXpressThemes(),t&&t.graphType&&(this.graphType=t.graphType),(!t||t&&!t.graphOrientation)&&this.meta.config.user&&(this.meta.config.user.graphOrientation=this.graphOrientation),this.setTheme(t),t){for(var e in window.cX||(window.cX=CanvasXpress.factory.valid=t.cX),t)CanvasXpress.doc.P[e]&&null==CanvasXpress.doc.P[e].D&&""==t[e]&&delete t[e];for(e=0;e<CanvasXpress.config.length;e++){var i=CanvasXpress.config[e],s=!!CanvasXpress.doc.P[i]&&CanvasXpress.doc.P[i].T;t.hasOwnProperty(i)&&("array"==s?t[i]instanceof Array?this[i]=t[i]:(this[i]=[t[i]],t[i]=[t[i]]):this[i]=t[i])}}for(var a in this.setInitialFonts(),this.url)this.hasOwnProperty(a)&&(this[a]=this.url[a]);this.setCanvas(),CanvasXpress.system.isR=this.isR,CanvasXpress.system.isHTMLWidgets="undefined"!=typeof HTMLWidgets,CanvasXpress.system.isShiny=void 0!==window.Shiny&&!!window.Shiny.outputBindings,CanvasXpress.system.isRViewer=/\bviewer_pane=1\b/.test(window.location),CanvasXpress.system.isRConsole=CanvasXpress.system.isHTMLWidgets&&!CanvasXpress.system.isShiny&&!CanvasXpress.system.isRViewer,CanvasXpress.system.isNode=void 0!==module,CanvasXpress.system.isCxplot=this.isCxplot,window.pcX={},CanvasXpress.system.isShiny&&(this.disableUndoRedoKeys=!0)}},CanvasXpress.prototype.initDate=function(){var t,e,i,s,a=(t=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,e=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,i=/[^-+\dA-Z]/g,s=function(t,e){for(t=String(t),e=e||2;t.length<e;)t="0"+t;return t},function(r,n,o){var h=a;if(1!=arguments.length||"[object String]"!=Object.prototype.toString.call(r)||/\d/.test(r)||(n=r,r=void 0),r=r?new Date(r):new Date,isNaN(r))throw SyntaxError("invalid date");"UTC:"==(n=String(h.masks[n]||n||h.masks.default)).slice(0,4)&&(n=n.slice(4),o=!0);var l=o?"getUTC":"get",c=r[l+"Date"](),d=r[l+"Day"](),p=r[l+"Month"](),g=r[l+"FullYear"](),u=r[l+"Hours"](),m=r[l+"Minutes"](),f=r[l+"Seconds"](),y=r[l+"Milliseconds"](),x=o?0:r.getTimezoneOffset(),v={d:c,dd:s(c),ddd:h.i18n.dayNames[d],dddd:h.i18n.dayNames[d+7],m:p+1,mm:s(p+1),mmm:h.i18n.monthNames[p],mmmm:h.i18n.monthNames[p+12],yy:String(g).slice(2),yyyy:g,h:u%12||12,hh:s(u%12||12),H:u,HH:s(u),M:m,MM:s(m),s:f,ss:s(f),l:s(y,3),L:s(y>99?Math.round(y/10):y),t:u<12?"a":"p",tt:u<12?"am":"pm",T:u<12?"A":"P",TT:u<12?"AM":"PM",Z:o?"UTC":(String(r).match(e)||[""]).pop().replace(i,""),o:(x>0?"-":"+")+s(100*Math.floor(Math.abs(x)/60)+Math.abs(x)%60,4),S:["th","st","nd","rd"][c%10>3?0:(c%100-c%10!=10)*c%10]};return n.replace(t,(function(t){return t in v?v[t]:t.slice(1,t.length-1)}))});a.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",year:"yyyy",month:"mmmm",day:"dddd",hour:"HH",minute:"MM",second:"ss"},a.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},Date.prototype.format=function(t,e){return a(this,t,e)},this.isValidDateFormat=function(t){return!isNaN(new Date(t))},this.dateFormat=a},CanvasXpress.prototype.initText=function(){this.setTextShadow=function(t){this.showTextShadow&&(t?(this.meta.canvas.ctx.shadowOffsetX=this.shadowOffsetX,this.meta.canvas.ctx.shadowOffsetY=this.shadowOffsetY,this.meta.canvas.ctx.shadowBlur=this.shadowBlur,this.meta.canvas.ctx.shadowColor=this.shadowColor):(this.meta.canvas.ctx.shadowOffsetX=0,this.meta.canvas.ctx.shadowOffsetY=0,this.meta.canvas.ctx.shadowBlur=0,this.meta.canvas.ctx.shadowColor=this.background))},this.getArcTextArea=function(t,e,i,s,a,r,n,o,h,l,c,d,p){null==t&&(t="");var g=["poly"],u=this.getFontPt(n);r=(a=a+r/2-(h=this.measureText(t,n,p)*(.5*Math.PI)/s)/2%(2*Math.PI))+h;for(var m=this.traceArc1(e,i,s,a,r,!0),f=0;f<m.length;f++)g.push(m[f][0],m[f][1]);m=this.traceArc1(e,i,s-u,a,r);for(f=0;f<m.length;f++)g.push(m[f][0],m[f][1]);return"Network"==this.graphType?this.preScaleNetwork&&!this.isAnimation?g:this.adjustNetworkObjects(g):g},this.drawArcText=function(t,e,i,s,a,r,n,o,h,l,c,d,p){if(null==t&&(t=""),p||(p=this.getCanvasContext()),null!=t)if(p)if(isNaN(e)||isNaN(i))this.debug&&alert("Not a valid coordinate ("+e+", "+i+") to draw "+t);else{d||isNaN(t)||(t=this.formatNumber(t)),t=t.toString().replace("\0",""),e||(e=0),i||(i=0),n||(n=this.font),o||(o=this.foreground),h||(h=this.align),l||(l=this.baseline),this.saveCanvas(p),p.strokeStyle=this.isArray(o)?o[0]:o,p.fillStyle=this.isArray(o)?o[0]:o,p.font=n,p.textAlign=h,p.textBaseline=l,this.setTextShadow(!0);var g="right"==h?1:-1,u=this.getFontPt(n);if((["left","center"].indexOf(h)>-1&&c||"right"==h&&!c)&&(t=t.split("").reverse().join(""),this.isArray(o)&&(o=o.reverse())),p.translate(e,i),a+=Math.PI*!c,a+=Math.PI/2+r/2,"center"==h)for(var m=0;m<t.length;m++){a+=((f=this.measureText(t[m],n,p))+(m==t.length-1?0:this.circularLetterSeparationFactor))/(s-u)/2*-g}r=a,this.rotateCanvas(a,p);for(m=0;m<t.length;m++){var f;r+=(f=this.measureText(t[m],n,p))/2/(s-u)*g,this.rotateCanvas(f/2/(s-u)*g,p),this.isArray(o)&&(p.strokeStyle=o[m],p.fillStyle=o[m]),p.fillText(t[m],0,(c?1:-1)*(0-s+u/2)),r+=(f/2+this.circularLetterSeparationFactor)/(s-u)*g,this.rotateCanvas((f/2+this.circularLetterSeparationFactor)/(s-u)*g)}this.restoreCanvas(p),this.setTextShadow(!1)}else this.debug&&alert("Dude, there is no canvas")},this.getTextMultipleArea=function(t,e,i,s,a,r,n,o,h,l,c){null==t&&(t="");for(var d=t.split(/\n/),p=this.getFontPt(s),g=[],u=i+(d%2?0:p/2)-d.length*p/2,m=0;m<d.length;m++)g.push(this.getTextArea(d[m],e,u,s,a,r,n,o,h,l,c)),u+=p;var f=g[0][1],y=g[0][2],x=g[0][3],v=g[0][4];for(m=1;m<g.length;m++)f=Math.min(f,g[m][1]),y=Math.min(y,g[m][2]),x=Math.max(x,g[m][3]),v=Math.max(v,g[m][4]);return[g[0][0],f,y,x,v]},this.drawTextMultiple=function(t,e,i,s,a,r,n,o,h,l,c,d){var p=t.split(/\n/),g=s;g||(g=this.font);for(var u=this.getFontPt(g),m=i+(p%2?0:u/2)-p.length*u/2,f=0;f<p.length;f++)this.drawText(p[f],e,m,g,a,r,n,o,h,l,c,d),m+=u,o&&o<90&&(e+=u,m-=u)},this.getTextArea=function(t,e,i,s,a,r,n,o,h,l,c,d){var p=this;if(null==t&&(t=""),c){if(e<this.marginLeft+this.offsetX+this.left||e>this.marginLeft+this.offsetX+this.left+this.x)return;if(i<this.marginTop+this.offsetY+this.top||i>this.marginTop+this.offsetY+this.top+this.y)return}if(this.isMultipleLines(t))return this.getTextMultipleArea(t,e,i,s,a,r,n,o,h,l,c);var g,u,m,f,y=[],x=this.measureText(t,s,d),v=this.getFontPt(s),b=0;if(h)for(;x>h&&b<10;)t=t.substring(0,t.length-1),x=this.measureText(t,s,d),b++;return"left"==r?m=(g=e)+x:"right"==r?(g=e-x,m=e):(g=e-x/2,m=e+x/2),"top"==n?f=(u=i)+v:"bottom"==n?(u=i-v,f=i):(u=i-v/2,f=i+v/2),y=["rect",g,u,m,f],y=o?function(t){t.shift();var s=["poly"];return s=(s=(s=(s=s.concat(p.rotatePoint(t[0],t[1],e,i,o))).concat(p.rotatePoint(t[2],t[1],e,i,o))).concat(p.rotatePoint(t[2],t[3],e,i,o))).concat(p.rotatePoint(t[0],t[3],e,i,o))}(y):y,"Network"==this.graphType?this.preScaleNetwork&&!this.isAnimation?y:this.adjustNetworkObjects(y):y},this.drawText=function(t,e,i,s,a,r,n,o,h,l,c,d){null==t&&(t=""),d||(d=this.getCanvasContext());var p=0;if(null!=t){if(this.isMultipleLines(t))return this.drawTextMultiple(t,e,i,s,a,r,n,o,h,l,c,d);if(d)if(isNaN(e)||isNaN(i))this.debug&&alert("Not a valid coordinate ("+e+", "+i+") to draw "+t);else{if(c){if(e<this.marginLeft+this.offsetX+this.left||e>this.marginLeft+this.offsetX+this.left+this.x)return;if(i<this.marginTop+this.offsetY+this.top||i>this.marginTop+this.offsetY+this.top+this.y)return}e||(e=0),i||(i=0),s||(s=this.font),a||(a=this.foreground),r||(r=this.align),n||(n=this.baseline);var g=this.measureText(t,s,d);if(h)for(;g>h&&p<10;)t=t.substring(0,t.length-1),g=this.measureText(t,s,d),p++;this.saveCanvas(d),d.strokeStyle=a,d.fillStyle=a,d.font=s,this.translateCanvas(e,i,d),d.textAlign=r,d.textBaseline=n,this.setTextShadow(!0),o&&this.rotateCanvas(o,d),t=t.toString().replace("\0","").replace("u0000",""),l?d.strokeText(t,0,0):d.fillText(t,0,0),this.restoreCanvas(d),this.setTextShadow(!1)}else this.debug&&alert("Dude, there is no canvas")}},this.isMultipleLines=function(t){return t.toString().split(/\n/).length-1},this.capitalize=function(t){if(t)return t.charAt(0).toUpperCase()+t.slice(1)},this.decapitalize=function(t){if(t)return t.charAt(0).toLowerCase()+t.slice(1)},this.measureTextMultiple=function(t,e,i){var s=t.split(/\n/),a=0;if(!i&&!(i=this.getCanvasContext()))return 0;e||(e=this.font),i.font=e;for(var r=0;r<s.length;r++)a=Math.max(a,i.measureText(s[r]).width);return a},this.measureText=function(t,e,i){return i||(i=this.getCanvasContext()),t&&i?(t=t.toString(),e||(e=this.font),CanvasXpress.cacheText[e]||(CanvasXpress.cacheText[e]={}),CanvasXpress.cacheText[e][t]||(i.font=e,this.isMultipleLines(t)?CanvasXpress.cacheText[e][t]=this.measureTextMultiple(t,e,i):CanvasXpress.cacheText[e][t]=i.measureText(t).width),CanvasXpress.cacheText[e][t]):0},this.measureTextWidth=function(t,e){var i=this.isMultipleLines(t);return i>0?(this.getFontPt(e)+this.margin)*(i+1):this.getFontPt(e)},this.scaleTextToFont=function(t,e,i,s,a){var r=Math.ceil(e);0==this.fontStyle&&(this.fontStyle="");var n=this.fontStyle+" "+r+"px "+this.fontName;if(t){for(;this.measureText(t,n,a)>i&&r>=this.minTextSize;)r-=2,n=this.fontStyle+" "+r+"px "+this.fontName;if(s){for(;parseInt(r/1.33)>s-2;)r--;n=this.fontStyle+" "+r+"px "+this.fontName}}return n},this.getFontPt=function(t){return t?Math.max(1,parseInt(t.toString().match(/[\-\d]+/)[0])):1},this.scaleTextToSize=function(t){var e=this.scaleTextConstantMult;return t||(t=1),Math.ceil(1/Math.sqrt(t)*e)},this.wrapText=function(t,e){var i=new RegExp("(?![^\\n]{1,"+e+"}$)([^\\n]{1,"+e+"})([\\s|-])","g");return t.toString().replace(i,"$1$2\n").replace(" \n","\n")},this.scaleFont=function(t,e){var i=this.getFontPt(t),s=Math.max(1,parseInt(i*e));return t.replace(i+"px",s+"px")},this.formatNumber=function(t,e){var i=!isNaN(e)&&parseInt(null!=e?e:10)>0?parseFloat(t).toFixed(parseInt(null!=e?e:10)):Number(t),s=parseFloat(i);if(Math.abs(s)<1e-4||Math.abs(s)>99999||s.toString().length>=8){var a=s.toExponential(2).toString().replace("e+0","").replace(".00","").replace(/(\.[0-9])(0)/,"$1");return(a.match(/e\+1$/)||a.match(/e\+2$/)||a.match(/e\-1$/))&&(a=(1*a).toString()),a}return s.toString()},this.getMaxtTextBySampling=function(t,e){for(var i={},s=[],a=[],r=0;r<t.length;r++){var n=null!=t[r]?t[r].toString():"";i.hasOwnProperty(n)||(i[n]=!0,s.push([n,n.length]))}s.sort((function(t,e){return t[1]<e[1]?-1:t[1]>e[1]?1:0})),e||(e=10),s.length<e&&(e=s.length);for(r=0;r<e;r++)a.push(s[r][0]);return this.getMaxText(a)},this.getMaxText=function(t,e,i){var s="",a=0;if(t&&t.length>0){e||(e=this.font);for(var r=0;r<t.length;r++)if(t[r]){var n=this.measureText(t[r].toString(),e,i);n>a&&(s=t[r].toString(),a=n)}}return s},this.shortenText=function(t,e,i){return null==t?"":(t=t.toString())?i&&t.length>e?t.substring(0,Math.max(parseInt(i/e)-2,1))+"..":t.length<=e?t:t.substring(0,e-3)+"...":""},this.convertToNumber=function(t){return isNaN(t)?t:parseFloat(t)},this.stringToHex=function(t){for(var e="",i=0;i<t.length;i++)e+=""+t.charCodeAt(i).toString(16);return e},this.hexToString=function(t){for(var e="",i=0;i<t.length;i+=2)e+=String.fromCharCode(parseInt(t.substr(i,2),16));return e},this.sprintf=function(){for(var t,e,i,s,a,r=function(t,e){for(var i=[];e>0;i[--e]=t);return i.join("")},n=0,o=arguments[n++],h=[];o;){if(e=/^[^\x25]+/.exec(o))h.push(e[0]);else if(e=/^\x25{2}/.exec(o))h.push("%");else{if(!(e=/^\x25(?:(\d+)\$)?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gosuxX])/.exec(o)))throw"Huh ?!";if(null==(t=arguments[e[1]||n++])||null==t)throw"Too few arguments.";if(/[^s]/.test(e[7])&&"number"!=typeof t)throw"Expecting number but found "+typeof t;switch(e[7]){case"b":t=t.toString(2);break;case"c":t=String.fromCharCode(t);break;case"d":t=parseInt(t);break;case"e":t=e[6]?t.toExponential(e[6]):t.toExponential();break;case"f":t=e[6]?parseFloat(t).toFixed(e[6]):parseFloat(t);break;case"g":t=e[6]?String(Number(t).toPrecision(e[6])):parseFloat(t);break;case"o":t=t.toString(8);break;case"s":t=(t=String(t))&&e[6]?t.substring(0,e[6]):t;break;case"u":t=Math.abs(t);break;case"x":t=t.toString(16);break;case"X":t=t.toString(16).toUpperCase()}t=/[def]/.test(e[7])&&e[2]&&t>0?"+"+t:t,s=e[3]?"0"==e[3]?"0":e[3].charAt(1):" ",a=e[5]-String(t).length,i=e[5]?r(s,a):"",h.push(e[4]?t+i:i+t)}o=o.substring(e[0].length)}return h.join("")}},CanvasXpress.prototype.initTime=function(){Date.prototype.getWeek=function(){var t=new Date(this.getFullYear(),0,1);return Math.ceil(((this-t)/864e5+t.getDay()+1)/7)},Date.prototype.getDayYear=function(){var t=new Date(this.getFullYear(),0,1);return Math.ceil((this-t)/864e5)},Date.prototype.addMilliseconds=function(t){let e=new Date(this.valueOf());return e.setDate(e.getMilliseconds()+t),e},Date.prototype.addSeconds=function(t){let e=new Date(this.valueOf());return e.setDate(e.getSeconds()+t),e},Date.prototype.addMinutes=function(t){let e=new Date(this.valueOf());return e.setDate(e.getMinutes()+t),e},Date.prototype.addHours=function(t){let e=new Date(this.valueOf());return e.setDate(e.getHours()+t),e},Date.prototype.addDays=function(t){let e=new Date(this.valueOf());return e.setDate(e.getDate()+t),e},Date.prototype.addMonths=function(t){let e=new Date(this.valueOf());return e.setMonth(e.getMonth()+t),e},Date.prototype.addYears=function(t){let e=new Date(this.valueOf());return e.setYear(e.getFullYear()+t),e},this.getMillisecond=function(t){return t.getMilliseconds()},this.getSecond=function(t){return t.getSeconds()},this.getMinuteSecond=function(t){return t.getMinutes()+"."+t.getSeconds()},this.getMinute=function(t){return t.getMinutes()},this.getHourMinute=function(t){return t.getHours()+"."+t.getMinutes()},this.getHour=function(t){return t.getHours()},this.getYearWeek=function(t){return t.getFullYear()+"."+t.getWeek()},this.getMonthDay=function(t){return t.getMonth()+1+"."+(t.getDay()+1)},this.getYearMonth=function(t){return t.getFullYear()+"."+(t.getMonth()+1)},this.getYear=function(t){return t.getFullYear()},this.times={second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2592e6,year:31556952e3},this.parseDate=function(t){var e=0,i=0,s=0,a=parseInt(t.toString().substring(0,4)),r=parseInt(t.toString().substring(4,6).replace(/^0/,"")),n=parseInt(t.toString().substring(6,8).replace(/^0/,"")),o=!!t.toString().match(/\:/)&&t.toString().substring(10).split(":");return o&&(e=o[0]?parseInt(o[0].replace(/^0/,"")):0,i=o[1]?parseInt(o[1].replace(/^0/,"")):0,s=o[2]?parseInt(o[2].replace(/^0/,"")):0),new Date(a,r-1,n,e,i,s)},this.formatDate=function(t,e){var i,s,a,r,n,o,h,l,c,d,p,g,u,m,f,y,x,v,b,A,w,C;return s=((i=(t=new Date(t)).getFullYear())+"").slice(-2),n=(o=t.getMonth()+1)<10?"0"+o:o,r=(a=["January","February","March","April","May","June","July","August","September","October","November","December"][o-1]).substring(0,3),c=(d=t.getDate())<10?"0"+d:d,l=(h=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][t.getDay()]).substring(0,3),C=d>=10&&d<=20?"th":1==(w=d%10)?"st":2==w?"nd":3==w?"rd":"th",e=e.replace("#YYYY#",i).replace("#YY#",s).replace("#MMMM#",a).replace("#MMM#",r).replace("#MM#",n).replace("#M#",o).replace("#DDDD#",h).replace("#DDD#",l).replace("#DD#",c).replace("#D#",d).replace("#th#",C),0==(m=g=t.getHours())&&(m=24),m>12&&(m-=12),u=m<10?"0"+m:m,p=g<10?"0"+g:g,A=(b=g<12?"am":"pm").toUpperCase(),f=(y=t.getMinutes())<10?"0"+y:y,x=(v=t.getSeconds())<10?"0"+v:v,e.replace("#hhhh#",p).replace("#hhh#",g).replace("#hh#",u).replace("#h#",m).replace("#mm#",f).replace("#m#",y).replace("#ss#",x).replace("#s#",v).replace("#ampm#",b).replace("#AMPM#",A)},this.setTimeAxis=function(){var t=this.validateTimeAxis();if(!t.length)return[];var e,i=Date.parse(t[0]),s=Date.parse(t[t.length-1]),a=s-i;for("year"==this.timeFormat||a>2*this.times.year?e=a/t.length>=this.times.year?"addYears":"addDays":"month"==this.timeFormat||a>this.times.week?e="addDays":a<this.times.second?e="addMilliseconds":a<this.times.minute?e="addSeconds":a<this.times.hour?e="addMinutes":a<this.times.day&&(e="addHourss"),this.timeValues=[this.dateFormat(new Date(i)[e](-1),this.timeFormat)],this.timeValueIndices=[-1];i<=s;){var r=new Date(i),n=this.dateFormat(r,this.timeFormat),o=this.getSampleIndices(this.timeFormat.match(/year|hour|minute|second/)?Number(n):n);this.timeValues.push(n),this.timeValueIndices.push(o),r=r[e](1),i=Date.parse(r)}},this.createRandomTimes=function(t){var e,i=(new Date).getTime(),s=[new Date(i)],a=this.isGroupedData?this.data.w.labs:this.data.y.smps;t&&this.times[t]||(t="day");for(var r=0;r<a.length;r++)e=Date.parse(a[r]),isNaN(e)?i-=this.times[t]:i=e,s.unshift(new Date(i));return s},this.validateTimeAxis=function(){for(var t=this.isGroupedData?this.data.w.labs:this.data.y.smps,e=!1,i=[],s=0;s<t.length;s++){var a=t[s],r=this.timeFormat;switch(this.timeFormat){case"Year":case"year":a+="/01/02",r="isoDate";break;case"Month":case"month":a="2018/"+CanvasXpress.dates[a]+"/02",r="isoDate";break;case"Day":case"day":a="2018/01/"+CanvasXpress.dates[a],r="isoDate"}if(!this.isValidDateFormat(a))return this.isGraphTime=!1,alert("Invalid Date! Graph converted from Time Graph"),[];var n=Date.parse(this.dateFormat(a,r));if(isNaN(n)){if(this.isExample)return i=this.createRandomTimes();e=!0;break}i.push(new Date(n))}return i.sort((function(t,e){return t-e})),!e&&i}},CanvasXpress.prototype.initColor=function(){this.validateColor=function(t,e,i){var s=t;if(s){s=(s=s.toString()).replace(/\s/g,"");var a=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/.exec(s),r=/rgba\((\d{1,3}),(\d{1,3}),(\d{1,3}),([0-9\.]+)\)/.exec(s),n=/^#?([0-9abcdef]{6})/i.exec(s),o=/^([0-9abcdef]{6})/i.exec(s);if(CanvasXpress.colorNames.hasOwnProperty(s))s=this.hexToRgb(CanvasXpress.colorNames[s]);else if(null!=a)s=a[0];else if(null!=r)s=r[0];else if(null!=n)s=this.hexToRgb(n[0]);else if(null!=o)s=this.hexToRgb("#"+o[0]);else{if("[objectCanvasGradient]"==s)return t;s=!1}}return(s=s&&null!=e?this.addColorTransparency(s,e,!0):s||!1)&&i?this.rgbToHex(s):s},this.desaturateColor=function(t,e){e=0==e?0:e||10;var i=this.rgbToHsl(t,!0);i[1]-=Math.min(1,Math.max(0,e/100)),t="hsl("+Math.floor(100*i[0])+","+Math.floor(100*i[1])+"%,"+Math.floor(100*i[2])+"%)",this.hslToRgb(t)},this.saturateColor=function(t,e){e=0==e?0:e||10;var i=this.rgbToHsl(t,!0);i[1]+=Math.min(1,Math.max(0,e/100)),t="hsl("+Math.floor(100*i[0])+","+Math.floor(100*i[1])+"%,"+Math.floor(100*i[2])+"%)",this.hslToRgb(t)},this.greyColor=function(t){return this.desaturateColor(t,100)},this.lightenColor=function(t,e){e=0==e?0:e||10;var i=this.rgbToHsl(t,!0);i[2]+=Math.min(1,Math.max(0,e/100)),t="hsl("+Math.floor(100*i[0])+","+Math.floor(100*i[1])+"%,"+Math.floor(100*i[2])+"%)",this.hslToRgb(t)},this.darkenColor=function(t,e){e=0==e?0:e||10;var i=this.rgbToHsl(t,!0);i[2]-=Math.min(1,Math.max(0,e/100)),t="hsl("+Math.floor(100*i[0])+","+Math.floor(100*i[1])+"%,"+Math.floor(100*i[2])+"%)",this.hslToRgb(t)},this.brightenColor=function(t,e){e=0==e?0:e||10;var i=this.colorAsArray(t);return i[0]=Math.max(0,Math.min(255,i[0]-Math.round(-e/100*255))),i[1]=Math.max(0,Math.min(255,i[1]-Math.round(-e/100*255))),i[2]=Math.max(0,Math.min(255,i[2]-Math.round(-e/100*255))),"rgb("+i[0]+","+i[1]+","+i[2]+")"},this.complementColor=function(t){var e=this.rgbToHsl(t,!0);e[0]=(e[0]+180)%360,t="hsl("+Math.floor(100*e[0])+","+Math.floor(100*e[1])+"%,"+Math.floor(100*e[2])+"%)",this.hslToRgb(t)},this.triadColors=function(t){var e=this.rgbToHsl(t,!0),i=(e[0]+120)%360,s=(e[0]+240)%360;return[t,this.hslToRgb("hsl("+Math.floor(100*i)+","+Math.floor(100*e[1])+"%,"+Math.floor(100*e[2])+"%)"),this.hslToRgb("hsl("+Math.floor(100*s)+","+Math.floor(100*e[1])+"%,"+Math.floor(100*e[2])+"%)")]},this.tetradColors=function(t){var e=this.rgbToHsl(t,!0),i=(e[0]+90)%360,s=(e[0]+180)%360,a=(e[0]+270)%360;return[t,this.hslToRgb("hsl("+Math.floor(100*i)+","+Math.floor(100*e[1])+"%,"+Math.floor(100*e[2])+"%)"),this.hslToRgb("hsl("+Math.floor(100*s)+","+Math.floor(100*e[1])+"%,"+Math.floor(100*e[2])+"%)"),this.hslToRgb("hsl("+Math.floor(100*a)+","+Math.floor(100*e[1])+"%,"+Math.floor(100*e[2])+"%)")]},this.pentadColors=function(t){var e=this.rgbToHsl(t,!0),i=(e[0]+72)%360,s=(e[0]+144)%360,a=(e[0]+216)%360,r=(e[0]+288)%360;return[t,this.hslToRgb("hsl("+Math.floor(100*i)+","+Math.floor(100*e[1])+"%,"+Math.floor(100*e[2])+"%)"),this.hslToRgb("hsl("+Math.floor(100*s)+","+Math.floor(100*e[1])+"%,"+Math.floor(100*e[2])+"%)"),this.hslToRgb("hsl("+Math.floor(100*a)+","+Math.floor(100*e[1])+"%,"+Math.floor(100*e[2])+"%)"),this.hslToRgb("hsl("+Math.floor(100*r)+","+Math.floor(100*e[1])+"%,"+Math.floor(100*e[2])+"%)")]},this.hexadColors=function(t){var e=this.rgbToHsl(t,!0),i=(e[0]+60)%360,s=(e[0]+120)%360,a=(e[0]+180)%360,r=(e[0]+240)%360,n=(e[0]+300)%360;return[t,this.hslToRgb("hsl("+Math.floor(100*i)+","+Math.floor(100*e[1])+"%,"+Math.floor(100*e[2])+"%)"),this.hslToRgb("hsl("+Math.floor(100*s)+","+Math.floor(100*e[1])+"%,"+Math.floor(100*e[2])+"%)"),this.hslToRgb("hsl("+Math.floor(100*a)+","+Math.floor(100*e[1])+"%,"+Math.floor(100*e[2])+"%)"),this.hslToRgb("hsl("+Math.floor(100*r)+","+Math.floor(100*e[1])+"%,"+Math.floor(100*e[2])+"%)"),this.hslToRgb("hsl("+Math.floor(100*n)+","+Math.floor(100*e[1])+"%,"+Math.floor(100*e[2])+"%)")]},this.spliComplementColors=function(t){var e=this.rgbToHsl(t,!0),i=(e[0]+72)%360,s=(e[0]+216)%360;return[t,this.hslToRgb("hsl("+Math.floor(100*i)+","+Math.floor(100*e[1])+"%,"+Math.floor(100*e[2])+"%)"),this.hslToRgb("hsl("+Math.floor(100*s)+","+Math.floor(100*e[1])+"%,"+Math.floor(100*e[2])+"%)")]},this.fadeColors=function(t,e){for(var i=[],s=this.colorAsArray(t),a=Math.min(255,Math.max(0,s[0])),r=Math.min(255,Math.max(0,s[0])),n=Math.min(255,Math.max(0,s[0])),o=this.seq(a,255,a/(e+1)),h=this.seq(r,255,r/(e+1)),l=this.seq(n,255,n/(e+1)),c=0;c<o.length;c++)i.unshift("rgb("+Math.floor(o[c])+","+Math.floor(h[c])+","+Math.floor(l[c])+")");return i},this.darkenLightenColor=function(t,e){t=this.rgbToHex(this.validateColor(t)).substring(1,7);var i=parseInt(t,16),s=(i>>16)+e,a=(i>>8&255)+e,r=(255&i)+e;return t=(r=r>255?255:r<0?0:r)|(a=a>255?255:a<0?0:a)<<8|(s=s>255?255:s<0?0:s)<<16,this.hexToRgb(t.toString(16))},this.rgbToHex=function(t){var e=function(t){return t=parseInt(t,10),isNaN(t)?"00":(t=Math.max(0,Math.min(t,255)),"0123456789ABCDEF".charAt((t-t%16)/16)+"0123456789ABCDEF".charAt(t%16))};return t&&"#"===t.substr(0,1)?t:t&&t.match(/^rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/)||t&&t.match(/^rgba\((\d{1,3}),(\d{1,3}),(\d{1,3}),([0-9\.]+)\)/)?"#"+e(RegExp.$1)+e(RegExp.$2)+e(RegExp.$3):t},this.rgbToHsl=function(t,e){var i,s,a=this.colorAsArray(t),r=a[0]/255,n=a[1]/255,o=a[2]/255,h=Math.max(r,n,o),l=Math.min(r,n,o),c=(h+l)/2;if(h==l)i=0,s=0;else{var d=h-l;switch(s=c>.5?d/(2-h-l):d/(h+l),h){case r:i=(n-o)/d+(n<o?6:0);break;case n:i=(o-r)/d+2;break;case o:i=(r-n)/d+4}i/=6}return e?[i,s,c]:"hsl("+Math.floor(100*i)+","+Math.floor(100*s)+"%,"+Math.floor(100*c)+"%)"},this.complementaryColor=function(t,e){var i=this.validateColor(t.toString());if(i.match(/^rgba?\((\d{1,3}),(\d{1,3}),(\d{1,3})(?:,([0-9\.]+))?/i)){var s=parseInt(255-RegExp.$1),a=parseInt(255-RegExp.$2),r=parseInt(255-RegExp.$3);return i=s==a&&a==r?s>=127?"rgb(255,255,255)":"rgb(0,0,0)":"rgb("+s+","+a+","+r+")",e?this.rgbToHex(i):i}return t},this.hexToRgb=function(t){return t="#"==t.charAt(0)?t.substring(1,7):t,"rgb("+parseInt(t.substring(0,2),16)+","+parseInt(t.substring(2,4),16)+","+parseInt(t.substring(4,6),16)+")"},this.hslToRgb=function(t){var e=t.split(","),i=Number(e[0].replace(/\s/g,"").replace("hsl(","")),s=Number(e[0].replace(/\s/g,"").replace("%)","")),a=Number(e[0].replace(/\s/g,"").replace("%",""));if(0==a)return"rgb("+s+","+s+","+s+")";var r=function(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t},n=s<.5?s*(1+a):s+a-s*a,o=2*s-n;return"rgb("+Math.round(255*r(o,n,i+1/3))+","+Math.round(255*r(o,n,i))+","+Math.round(255*r(o,n,i-1/3))+")"},this.addColorTransparency=function(t,e,i){if(t){if(t instanceof CanvasGradient)return t;var s=t.match(/^rgba?\((\d{1,3},\d{1,3},\d{1,3})(?:,([0-9\.]+))?/i);return s&&i||(s=(t=this.validateColor(t))&&t.match(/^rgba?\((\d{1,3},\d{1,3},\d{1,3})(?:,([0-9\.]+))?/i)),!!s&&"rgba("+s[1]+","+Math.min(e,null!=s[2]?s[2]:1)+")"}return!1},this.removeColorTransparency=function(t,e){if(t){var i=t.match(/^rgba?\((\d{1,3},\d{1,3},\d{1,3})(?:,([0-9\.]+))?/i);return i&&e||(i=(t=this.validateColor(t))&&t.match(/^rgba?\((\d{1,3},\d{1,3},\d{1,3})(?:,([0-9\.]+))?/i)),!!i&&"rgb("+i[1]+")"}return!1},this.isColorTransparency=function(t,e){if(e||(t=this.validateColor(t)),t){var i=t.match(/^rgba?\((\d{1,3},\d{1,3},\d{1,3})(?:,([0-9\.]+))?/i);return i&&null!=i[2]?Number(i[2]):null}},this.isColorTransparent=function(t,e){if(e||(t=this.validateColor(t)),t&&t.match(/^rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/))return!1;if(t){var i=t.match(/^rgba?\((\d{1,3},\d{1,3},\d{1,3})(?:,([0-9\.]+))?/i);return!!i&&(null!=i[2]&&0==i[2])}return!1},this.combineColors=function(t){for(var e=[],i=[],s=[],a=[],r=0;r<t.length;r++)t[r]=this.validateColor(t[r]);for(r=0;r<t.length;r++){var n=t[r];n&&n.match(/^rgba?\((\d{1,3}),(\d{1,3}),(\d{1,3})(?:,([0-9\.]+))?/i)&&(e.push(parseInt(RegExp.$1)),i.push(parseInt(RegExp.$2)),s.push(parseInt(RegExp.$3)),RegExp.$4&&a.push(parseFloat(RegExp.$4)))}if(e.length>0){var o=parseInt(this.mean(e)),h=parseInt(this.mean(i)),l=parseInt(this.mean(s));return a.length>0?"rgba("+o+","+h+","+l+","+parseFloat(this.mean(a))+")":"rgb("+o+","+h+","+l+")"}return!1},this.colorAsArray=function(t){var e=[];if(t=this.validateColor(t)){var i=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/.exec(t),s=/rgba\((\d{1,3}),(\d{1,3}),(\d{1,3}),([0-9\.]+)\)/.exec(t);null!=i?e=[parseInt(i[1]),parseInt(i[2]),parseInt(i[3])]:null!=s&&(e=[parseInt(s[1]),parseInt(s[2]),parseInt(s[3]),Number(s[4])])}return e},this.monoColor=function(t,e){var i=this.colorAsArray(t),s=Math.ceil(.3*i[0]+.59*i[1]+.11*i[2]);return null!=e?"rgba("+s+","+s+","+s+","+e+")":"rgb("+s+","+s+","+s+")"},this.blindColor=function(t,e){var i,s=this.colorAsArray(this.validateColor(t,e)),a=s[0],r=s[1],n=s[2];if(0==a&&0==r&&0==n)return"rgb(0,0,0)";switch(this.blindnessType){case"protanopia":i=[.7465,.2535,1.273463,-.073894];break;case"deuteranopia":i=[1.4,-.04,.968437,.003331];break;case"tritanopia":i=[1.748,0,.062921,.292119];break;case"monochromatic":return"rgb("+(t=Math.ceil(.212656*a+.715158*a+.072186*a))+","+t+","+t+")"}var o=i[0],h=i[1],l=i[2],c=i[3],d=Math.pow(a,2.2),p=Math.pow(r,2.2),g=Math.pow(n,2.2),u=.412424*d+.357579*p+.180464*g,m=.212656*d+.715158*p+.072185*g,f=.019332*d+.119193*p+.950444*g,y=u/(u+m+f),x=m/(u+m+f),v=(x-h)/(y-o),b=x-y*v,A=(c-b)/(v-l),w=v*A+b,C=.312713*m/.329016-(u=A*m/w),T=.358271*m/.329016-(f=(1-(A+w))*m/w),S=3.24071*C+-.498571*T,M=-.969258*C+.0415557*T,D=.0556352*C+1.05707*T,k=3.24071*u+-1.53726*m+-.498571*f,L=-.969258*u+1.87599*m+.0415557*f,I=.0556352*u+-.203996*m+1.05707*f,z=((S<0?0:1)-k)/S,N=((M<0?0:1)-L)/M,B=((D<0?0:1)-I)/D,P=[z>1||z<0?0:z,N>1||N<0?0:N,B>1||N<0?0:B];return k+=(P=Math.max.apply(null,P))*S,L+=P*M,I+=P*D,k=Math.pow(k,1/2.2),L=Math.pow(L,1/2.2),I=Math.pow(I,1/2.2),(a=Math.ceil(k))>255&&(a-=255),(r=Math.ceil(L))>255&&(r-=255),(n=Math.ceil(I))>255&&(n-=255),"rgb("+a+","+r+","+a+")"},this.disableGradientTransparencyShadow=function(){this.gradientTemp||(this.gradientTemp=this.gradient),null==this.transparencyTemp&&(this.transparencyTemp=this.transparency),this.showShadowTemp||(this.showShadowTemp=this.showShadow),this.gradient=!1,this.transparency=null,this.showShadow=!1},this.enableGradientTransparencyShadow=function(){this.gradient=this.gradientTemp,this.transparency=this.transparencyTemp,this.showShadow=this.showShadowTemp},this.resetGradientTransparencyShadow=function(){delete this.gradientTemp,delete this.transparencyTemp,delete this.showShadowTemp},this.getGradient=function(t,e,i,s,a,r){return"radial"==this.gradientType?this.getRadialGradient(t,e,i,a,r,!0):this.getLinearGradient(t,e,i,s,a,r,!0)},this.getLinearGradient=function(t,e,i,s,a,r,n){n||this.saveCanvas();var o=this.getCanvasContext().createLinearGradient(t,e,i,s);a?this.validateColor(a)&&(!this.isArray(a)||a.length<2)&&(a=[a,"rgb(0,0,0)"]):a=this.colorSpectrum,r&&this.isArray(r)||(r="Heatmap"==this.graphType?[]:this.colorSpectrumBreaks);for(var h=1/(a.length-1),l=h,c=0;c<a.length;c++)a[c]=this.validateColor(a[c]);o.addColorStop(r[0]||0,null!=this.transparency?this.addColorTransparency(a[0]):a[0]);for(c=1;c<a.length;c++)o.addColorStop(r[c]||l,null!=this.transparency?this.addColorTransparency(a[0]):a[c]),l+=h;return o},this.getRadialGradient=function(t,e,i,s,a,r){r||this.saveCanvas();var n=i/5.5,o=this.getCanvasContext().createRadialGradient(t-n,e-n,1,t,e,i);s?this.validateColor(s)&&(!this.isArray(s)||s.length<2)&&(s=[s,"rgb(0,0,0)"]):s=this.colorSpectrum,a&&this.isArray(a)||(a="Heatmap"==this.graphType?[]:this.colorSpectrumBreaks);var h=1/(s.length-1),l=h;o.addColorStop(a[0]||0,null!=this.transparency?this.addColorTransparency(s[0]):s[0]);for(var c=1;c<s.length;c++)o.addColorStop(a[c]||l,null!=this.transparency?this.addColorTransparency(s[0]):s[c]),l+=h;return o},this.colorRGBfromString=function(t){var e=t.match(/^\W*([0-9A-F]{3}([0-9A-F]{3})?)\W*$/i);e&&(6===e[1].length?this.colorFromRgb(parseInt(e[1].substr(0,2),16)/255,parseInt(e[1].substr(2,2),16)/255,parseInt(e[1].substr(4,2),16)/255):this.colorFromRgb(parseInt(e[1].charAt(0)+e[1].charAt(0),16)/255,parseInt(e[1].charAt(1)+e[1].charAt(1),16)/255,parseInt(e[1].charAt(2)+e[1].charAt(2),16)/255))},this.colorFromRgb=function(t,e,i){if(this.colorRGB){null!=t&&(this.colorRGB[0]=Math.min(Math.max(0,t),1)),null!=e&&(this.colorRGB[1]=Math.min(Math.max(0,e),1)),null!=i&&(this.colorRGB[2]=Math.min(Math.max(0,i),1));var s=this.rgbFromHsv(this.colorRGB[0],this.colorRGB[1],this.colorRGB[2]);null!=s[0]&&(this.colorHSV[0]=s[0]),0!=s[2]&&(this.colorHSV[1]=s[1]),this.colorHSV[2]=s[2]}},this.rgbFromHsv=function(t,e,i){var s=Math.min(Math.min(t,e),i),a=Math.max(Math.max(t,e),i),r=a-s;if(0==r)return[null,0,a];var n=t==s?3+(i-e)/r:e==s?5+(t-i)/r:1+(e-t)/r;return[6==n?0:n,r/a,a]},this.colorFromHsv=function(t,e,i){null!=t&&(this.colorHSV[0]=Math.min(Math.max(0,t),6)),null!=e&&(this.colorHSV[1]=Math.min(Math.max(0,e),1)),null!=i&&(this.colorHSV[2]=Math.min(Math.max(0,i),1)),this.colorRGB=this.hsvFromRgb(this.colorHSV[0],this.colorHSV[1],this.colorHSV[2])},this.hsvFromRgb=function(t,e,i){if(null==t)return[i,i,i];var s=Math.floor(t),a=i*(1-e),r=i*(1-e*(s%2?t-s:1-(t-s)));switch(s){case 0:return[i,r,a];case 1:return[r,i,a];case 2:return[a,i,r];case 3:return[a,r,i];case 4:return[r,a,i];case 5:case 6:return[i,a,r]}},this.colorRGBToString=function(){if(this.colorRGB)return(256|Math.round(255*this.colorRGB[0])).toString(16).substr(1)+(256|Math.round(255*this.colorRGB[1])).toString(16).substr(1)+(256|Math.round(255*this.colorRGB[2])).toString(16).substr(1)},this.getColorNames=function(){return this.sortObject(CanvasXpress.colorNames)},this.getColorSchemes=function(){return this.sortObject(CanvasXpress.colorSchemes)},this.getHexColor=function(t){if(/^#?[0-9a-fA-F]{6}$/i.test(t))return t.substring(t.length-6,t.length);if(/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/.test(t))return this.rgbToHex(t);var e=t.toLowerCase();if(CanvasXpress.colorNames.hasOwnProperty(e))return CanvasXpress.colorNames[e];throw new Error(t+" is not a valid color.")},this.getColorForValue=function(t,e){t||(t=this.meta.def.colorBrew);for(var i=0;i<t.breaks.length;i++)if(t.breaks[i]>=e)return t.colors[i];return t.colors[t.colors.length-1]},this.setColorForValues=function(t,e){var i=this,s=function(s){var a=function(i,a){var r=t.grads[s],n=r.min,o=r.max,h=r.scol.replace("#","").substring(i,a),l=r.ecol.replace("#","").substring(i,a),c=e<n?n:e>o?o:e,d=o-n,p=parseInt(h,16),g=(parseInt(l,16)-p)/d;isNaN(g)&&(g=0);var u=Math.round(g*(c-n)+p).toString(16);return 1==u.length?"0"+u:u},r=a(0,2),n=a(2,4),o=a(4,6);return i.hexToRgb("#"+r+n+o)};if(t||(t=this.meta.def.colorBrew),1==t.length)return s(0);for(var a=0;a<t.grads.length;a++)if(t.grads[a].min<=e&&t.grads[a].max>e)return s(a);var r=(t.max-t.min)/t.grads.length;a=Math.min(Math.floor((Math.max(e,t.min)-t.min)/r),t.grads.length-1);return isNaN(a)?"rgba(0,0,0,0)":s(a)},this.getColorBrew=function(t,e,i,s,a,r){var n=t||this.colorSpectrum,o="Genome"==this.graphType;null!=e&&null!=i&&e==i&&(i+=.1);var h,l,c=null!=e&&a&&a.length?Math.min(e,a[0]):null!=e?e:null!=this.minData?this.minData:0,d=null!=i&&a&&a.length?Math.max(i,a[a.length-1]):null!=i?i:null!=this.maxData?this.maxData:100,p=o||r||null==this.setMinX?null:this.setMinX,g=o||r||null==this.setMaxX?null:this.setMaxX,u=[];null==s?zero=(c+d)/2:(zero=s,(h=s-c)>(l=d-s)?d=s+h:c=s-l);var m=this[this.axisAlgorithm](Math.min(p||c,g||d),Math.max(p||c,g||d),5,this.axisWilkinsonLoose);d==Math.abs(c)&&0==s&&m.length%2&&(m[Math.floor(m.length/2)]=0);for(var f=(m[m.length-1]-m[0])/(n.length-1),y=this.getNumberDecimals(m[1]-m[0]),x=[],b=0;b<m.length;b++)x[b]=m[b].toFixed(y);var A=this.getMaxText(x),w=this.measureText(A.toString(),this.font),C=m[m.length-1]-m[0],T=[];if(a&&a.length>1&&a.length==n.length){for(b=0;b<a.length;b++)a[b]=Number(a[b]),T.push(this.formatNumber(a[b].toString()));A=this.getMaxText(T),w=this.measureText(A.toString(),this.font);var S=(a=a.sort((function(t,e){return t-e})))[0],M=Math.ceil(100/n.length)+1;for(b=1;b<a.length;b++){var D=a[b],k=this.seq(S,D,!1,M);S=k.pop(),u=u.concat(k)}u.push(S),this.colorSpectrumNumber=u.length}else u=this.seq(m[0],m[m.length-1],!1,this.colorSpectrumNumber);var L={spectrum:n,stops:a,z:s,colors:[],smooth:[],grads:[],rmin:c,rmax:d,min:a&&a.length>1?a[0]:m[0],max:a&&a.length>1?a[a.length-1]:m[m.length-1],range:C,zero:zero,vals:m,valStr:x,incr:f,decs:y,breaks:u,maxLevLen:w,maxLevChr:A.toString().length,maxLevStr:A};for(b=0;b<n.length-1;b++){var I={scol:this.getHexColor(n[b]),ecol:this.getHexColor(n[b+1]),min:a&&a.length>1?a[b]:m[0]+f*b,max:a&&a.length>1?a[b+1]:m[0]+f*(b+1)};L.grads.push(I)}for(b=0;b<this.colorSpectrumNumber;b++)v=this.setColorForValues(L,u[b]),L.colors.push(v);return L},this.setColorBrew=function(t,e){if(this.setColorSpectrum(),!this.meta.def.colorBrew||t)if(this.meta.vals.colors&&(this.meta.vals.colors={}),this.graphType.match(/Stacked/))this.meta.def.colorBrew=this.getColorBrew(this.colorSpectrum,this.minDataStacked,this.maxDataStacked,this.colorSpectrumZeroValue,this.colorSpectrumBreaks);else if(this.heatmapAutoAdjust||!this.meta.def.colorBrew)this.meta.def.colorBrew=this.getColorBrew(this.colorSpectrum,this.minData,this.maxData,this.colorSpectrumZeroValue,this.colorSpectrumBreaks);else{var i=this.meta.def.colorBrew;if(e)if(this.isTransformedData){var s=this.isHistogram?1e-6:this.minData,a=this.maxData;switch(this.isTransformedData){case"log2":s=Math.log(s)/Math.LN2,a=Math.log(a)/Math.LN2;break;case"log10":s=Math.log(s)/Math.LN10,a=Math.log(a)/Math.LN10;break;case"exp2":s=Math.pow(2,s),a=Math.pow(2,a);break;case"exp10":s=Math.pow(10,s),a=Math.pow(10,a)}this.isNumber(s,!0)&&this.isNumber(a,!0)||(s=this.min(this.data.y.trans),a=this.max(this.data.y.trans)),this.meta.def.colorBrew=this.getColorBrew(this.colorSpectrum,s,a,this.colorSpectrumZeroValue,this.colorSpectrumBreaks)}else this.meta.def.colorBrew=this.getColorBrew(this.colorSpectrum,this.minData||i.rmin,this.maxData||i.rmax,this.colorSpectrumZeroValue||i.z,this.colorSpectrumBreaks||i.stops);else this.meta.def.colorBrew=this.getColorBrew(this.colorSpectrum,i.rmin,i.rmax,i.z,i.stops)}},this.getCustomColorScheme=function(t,e,i){t||(t=8),e&&CanvasXpress.colorSchemes.hasOwnProperty(e)||(e=this.colorScheme);var s=this.getKeys(CanvasXpress.colorSchemes[e]);if(s.sort((function(t,e){return t-e})),CanvasXpress.colorSchemes[e]){if(CanvasXpress.colorSchemes[e][t])return CanvasXpress.colorSchemes[e][t];if(256==s[s.length-1]){for(var a=this.frac(t),r=[],n=0;n<t;n++){var o=Math.max(0,Math.min(255,Math.floor(256*a[n])));r.push(CanvasXpress.colorSchemes[e][256][o])}return r}if(t>s[s.length-1]){if(i){for(t--;!CanvasXpress.colorSchemes[e][t];)t--;return this.cloneObject(CanvasXpress.colorSchemes[e][t])}var h=t-s.length;for(t--;!CanvasXpress.colorSchemes[e][t];)t--;for(r=this.cloneObject(CanvasXpress.colorSchemes[e][t]),n=0;n<h;n++)r.push(CanvasXpress.colorSchemes[e][t][n%CanvasXpress.colorSchemes[e][t].length]);return r}for(t++;!CanvasXpress.colorSchemes[e][t];)t++;return CanvasXpress.colorSchemes[e][t]}return this.colors},this.setColorSpectrum=function(){if(this.blindnessType&&!this.meta.def.colorSpectrum){this.meta.def.colorSpectrum=this.cloneObject(this.colorSpectrum);for(var t=[],e=0;e<this.colorSpectrum.length;e++)t.push(this.blindColor(this.colorSpectrum[e]));this.colorSpectrum=t,delete this.meta.def.colorBrew}else if(this.meta.def.colorSpectrum&&this.meta.def.blindnessTypeSpectrum!=this.blindnessType)if(this.blindnessType){for(t=[],e=0;e<this.colorSpectrum.length;e++)t.push(this.blindColor(this.colorSpectrum[e]));this.colorSpectrum=t,delete this.meta.def.colorBrew}else this.colorSpectrum=this.cloneObject(this.meta.def.colorSpectrum);this.meta.def.blindnessTypeSpectrum=this.blindnessType},this.setColorScheme=function(t){var e,i=this,s=!1;if("User"==this.colorScheme)e=this.cloneObject(this.colors);else if("ColorSpectrum"==this.colorScheme){var a=this.colorSpectrumNumber;this.colorSpectrumNumber="Circular"==this.graphType?Math.max(this.data.y.vars.length,this.data.y.smps.length):this.data.y.vars.length,e=this.getColorBrew(this.colorSpectrum,0,this.data.y.vars.length).colors,this.colorSpectrumNumber=a}else if(CanvasXpress.colorSchemes[this.colorScheme]){var r,n=this.getKeys(CanvasXpress.colorSchemes[this.colorScheme]);if(n.sort((function(t,e){return t-e})),n=parseInt(n[n.length-1]),r=t&&"String"==t.type?t.levels.length:this.graphType.match(/Scatter/)?this.layoutValid?function(t){if(i.data[t]){if(i.colorBy)return i.data[t].hasOwnProperty(i.colorBy)&&i.meta.data[t][i.colorBy].colors?i.meta.data[t][i.colorBy].colors.length:i.data.y.smps.length;var e=i.data.y.smps.length;for(var s in i.meta.data[t])i.meta.data[t][s].levels&&(e=Math.max(e,i.meta.data[t][s].levels.length));return e}return i.data.y.smps.length}("z"):this.colorBy&&this.meta.data.hasOwnProperty("z")&&this.meta.data.z.hasOwnProperty(this.colorBy)&&this.meta.data.z[this.colorBy].colors?this.meta.data.z[this.colorBy].levels.length:this.data.y.smps.length:this.graphType.match(/Treemap|TagCloud|Sankey|Tree|Circular/)?this.colorBy&&this.data.x&&this.data.x.hasOwnProperty(this.colorBy)&&this.meta.data.x[this.colorBy].colors?this.meta.data.x[this.colorBy].colors.length:this.data.y.smps.length:this.graphType.match(/Venn/)?this.vennGroups:this.graphType.match(/Pie/)?this.data.y.vars.length:this.graphType.match(/Network|Genome|Correlation/)?n:"ParallelCoordinates"==this.graphType?this.colorBy&&this.data.x&&this.data.x.hasOwnProperty(this.colorBy)&&this.meta.data.x[this.colorBy].colors?this.meta.data.x[this.colorBy].colors.length:this.data.y.smps.length:!this.graphType.match(/BarLine|DotLine/)||!this.coordinateLineColor||this.isGroupedData&&this.colorBy?this.colorBy&&this.data.x&&this.data.x.hasOwnProperty(this.colorBy)?this.meta.data.x[this.colorBy].colors?this.meta.data.x[this.colorBy].colors.length:this.meta.data.x[this.colorBy].levels?this.meta.data.x[this.colorBy].levels.length:this.data.y.vars.length:this.data.y.vars.length:Math.max(this.xAxis.length,this.xAxis2.length),CanvasXpress.colorSchemes[this.colorScheme][r])e=CanvasXpress.colorSchemes[this.colorScheme][r];else{if(r>n)for(r--;!CanvasXpress.colorSchemes[this.colorScheme][r];)r--;else for(r++;!CanvasXpress.colorSchemes[this.colorScheme][r];)r++;e=CanvasXpress.colorSchemes[this.colorScheme][r]}this.meta.def.colors&&(this.meta.def.colors=this.cloneObject(e),s=!0)}else e=CanvasXpress.colorSchemes.Balanced[20];if(this.blindnessType&&!this.meta.def.colors||s){if(this.meta.def.colors=this.cloneObject(e),this.blindnessType){for(var o=[],h=0;h<e.length;h++)o.push(this.blindColor(e[h]));e=o}}else if(this.meta.def.colors&&this.meta.def.blindnessTypeColors!=this.blindnessType&&(e=this.cloneObject(this.meta.def.colors),this.blindnessType)){for(o=[],h=0;h<e.length;h++)o.push(this.blindColor(e[h]));e=o}this.meta.def.blindnessTypeColors=this.blindnessType;for(h=0;h<e.length;h++)e[h]=this.validateColor(e[h]);t||(this.colors=e),this.updateMetaDataColors(e,t)},this.validateUserColors=function(){for(var t=[],e=0;e<this.colors.length;e++)t.push(this.validateColor(this.colors[e]));t.length>0&&(this.colors=t);var i=[];for(e=0;e<this.colorSpectrum.length;e++)i.push(this.validateColor(this.colorSpectrum[e]));i.length>0&&(this.colorSpectrum=i)}},CanvasXpress.prototype.initAttributes=function(){this.setStyle=function(t,e,i,s){s||(s=this.getCanvasContext()),null!=this.transparency&&(t=this.addColorTransparency(t,this.transparency,!0)),s.fillStyle=t,s.strokeStyle=t,s.lineWidth=e||this.outlineWidth,s.lineCap=i||this.capType,this.setShadow(!0,s)},this.setClipBoundaries=function(t){var e,i,s,a;return t&&4==t.length?(e=t[0],i=t[1],s=t[2],a=t[3]):(e=this.marginLeft+this.offsetX+this.left-1,i=this.marginTop+this.offsetY+this.top-1,s=this.x+2,a=this.y+2),[e,i,s,a]},this.setClipArea=function(t,e){var i,s,a,r;"Tree"!=this.graphType&&(e||(e=this.getCanvasContext()),this.saveCanvas(e),t?(i=t[0],s=t[1],a=t[2],r=t[3]):(i=this.marginLeft+this.offsetX+this.left,s=this.marginTop+this.offsetY+this.top,a=this.x+1,r=this.y+1),e.rect(i,s,a,r),e.clip(),this.meta.state.clip=[i,s,a,r])},this.resetClipArea=function(t){"Tree"!=this.graphType&&(this.restoreCanvas(t),this.setClipArea([0,0,0,0],t),this.restoreCanvas(t),this.meta.state.clip=!1)},this.resetStyle=function(t){this.setShadow(!1,t)},this.setShadow=function(t,e){if(this.showShadow){e||(e=this.getCanvasContext());t?(e.shadowOffsetX=this.shadowOffsetX,e.shadowOffsetY=this.shadowOffsetY,e.shadowBlur=this.shadowBlur,e.shadowColor=this.shadowColor):(e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0,e.shadowColor=this.background,e.strokeStyle="rgba(255,255,255,0)",e.fillStyle="rgba(255,255,255,0)")}},this.lineTo=function(t,e,i,s,a){if("Network"==this.graphType)return this.lineRawTo(t,e,i,s,a);var r=~~(t+.5),n=~~(e+.5),o=~~(i+.5),h=~~(s+.5);if(1==Math.abs(r-o)?o=r=(r+o)/2:(r+=.5,o+=.5),1==Math.abs(n-h)?h=n=(n+h)/2:(n+=.5,h+=.5),a||(a=this.getCanvasContext()),r==o&&n==h){var l=this.lineThickness/1.5;a.fillRect(r,n,l,l)}else a.moveTo(r,n),a.lineTo(o,h);a.stroke()},this.lineRawTo=function(t,e,i,s,a){a||(a=this.getCanvasContext()),a.moveTo(t,e),a.lineTo(i,s),a.stroke()},this.lineToOld=function(t,e,i,s,a){t==i?i=t=.5+(t+.5<<1>>1):e==s&&(s=e=.5+(e+.5<<1>>1)),a||(a=this.getCanvasContext()),a.moveTo(t,e),a.lineTo(i,s),a.stroke()},this.bitCode=function(t,e){var i=0;return t[0]<e[0]?i|=1:t[0]>e[2]&&(i|=2),t[1]<e[1]?i|=4:t[1]>e[3]&&(i|=8),i},this.intersect=function(t,e,i,s){return 8&i?[t[0]+(e[0]-t[0])*(s[3]-t[1])/(e[1]-t[1]),s[3]]:4&i?[t[0]+(e[0]-t[0])*(s[1]-t[1])/(e[1]-t[1]),s[1]]:2&i?[s[2],t[1]+(e[1]-t[1])*(s[2]-t[0])/(e[0]-t[0])]:1&i?[s[0],t[1]+(e[1]-t[1])*(s[0]-t[0])/(e[0]-t[0])]:null},this.lineClip=function(t,e,i){var s,a,r,n;e||((e=this.setClipBoundaries())[2]+=e[0],e[3]+=e[1]),i||(i=[]);for(var o=t.length,h=this.bitCode(t[0],e),l=[],c=1;c<o;c++){for(s=t[c-1],a=t[c],r=n=this.bitCode(a,e);;){if(!(h|r)){l.push(s),r!==n?(l.push(a),c<o-1&&(i.push(l),l=[])):c===o-1&&l.push(a);break}if(h&r)break;h?(s=this.intersect(s,a,h,e),h=this.bitCode(s,e)):(a=this.intersect(s,a,r,e),r=this.bitCode(a,e))}h=n}return l.length&&i.push(l),i},this.polygonClip=function(t,e,i){var s,a,r,n,o;if(e||((e=this.setClipBoundaries())[2]+=e[0],e[3]+=e[1]),i){xy=[];for(var h=1;h<t.length;h+=2)xy.push([t[h],t[h+1]])}else xy=t;for(var l=1;l<=8;l*=2){s=[],a=xy[xy.length-1],r=!(this.bitCode(a,e)&l);for(h=0;h<xy.length;h++)n=xy[h],(o=!(this.bitCode(n,e)&l))!==r&&s.push(this.intersect(a,n,l,e)),o&&s.push(n),a=n,r=o;if(xy=s,!xy.length)break}if(i){t=["poly"];for(h=0;h<s.length;h++)t.push(s[h][0]),t.push(s[h][1]);return t}return s},this.lineIntersect=function(t,e,i,s,a,r,n,o){if(t===i&&e===s||a===n&&r===o)return!1;var h=(o-r)*(i-t)-(n-a)*(s-e);if(0===h)return!1;var l=((n-a)*(e-r)-(o-r)*(t-a))/h,c=((i-t)*(e-r)-(s-e)*(t-a))/h;return!(l<0||l>1||c<0||c>1)&&[t+l*(i-t),e+l*(s-e)]},this.clip=function(t,e,i){var s,a,r,n,o,h,l=[];i||(i=this.setClipBoundaries());var c=i[0],d=i[1],p=i[2],g=i[3];switch(t){case"path":l[0]=[],l[1]=[];for(var u=0;u<e[0].length;u++)((a=e[0][u])<c||a>p)&&(a=null),((n=e[1][u])<d||n>g)&&(n=null),l[0].push(a),l[1].push(n);break;case"arrow":case"box":case"rect":case"rectangle":case"rect2":case"rect3":case"roundrect":case"roundrectt":case"roundrectb":case"roundrectr":case"roundrectl":case"roundrecttr":case"roundrecttl":case"roundrectbr":case"roundrectbl":case"roundrect2":case"roundrectd":case"roundrecto":if(s=this.parseInt(e[0]-e[2]/2),r=this.parseInt(e[1]-e[3]/2),a=this.parseInt(s+e[2]),n=this.parseInt(r+e[3]),a>s)if(n>r){if(s>p+this.outlineWidth||r>g+this.outlineWidth||a<c||n<d)return!1;s<c&&(s=c),a>p&&(a=p),r<d&&(r=d),n>g&&(n=g)}else{if(s>p+this.outlineWidth||n>g+this.outlineWidth||a<c||r<d)return!1;s<c&&(s=c),a>p&&(a=p),r>g&&(r=g),n<d&&(n=d)}else if(n>r){if(a>p+this.outlineWidth||r>g+this.outlineWidth||s<c||n<d)return!1;s>p&&(s=p),a<c&&(a=c),r<d&&(r=d),n>g&&(n=g)}else{if(a>p+this.outlineWidth||n>g+this.outlineWidth||s<c||r<d)return!1;s>p&&(s=p),a<c&&(a=c),r>g&&(r=g),n<d&&(n=d)}l=[s,r,a-s,n-r];break;case"poly":break;case"circle":case"sphere":case"square":case"triangle":case"triangle2":case"equilateral":case"equilateral2":case"diamond":case"rhombus":case"pentagon":case"hexagon":case"octagon":case"oval":case"oval2":case"oval3":case"arc":case"arc2":case"ellipse":case"ellipse2":case"ellipse3":case"plus":case"minus":case"mdavid":case"star":case"pie":case"pie0":case"pie1":case"pie2":case"pie3":case"pie4":case"pie5":case"pie6":case"pie7":case"pie8":case"pie9":case"pacman":case"pacman2":if(s=parseInt(e[0]),r=parseInt(e[1]),s>c+p||s<c||r<d||r>d+g)return!1;l=[s,r];break;case"line":if(s=parseFloat(e[0]),r=parseFloat(e[1]),a=parseFloat(e[2]),n=parseFloat(e[3]),s==a){if(s<c||s>p)return!1;if(r>n){if(r<d)return!1;if(r>g&&(r=g),n>g)return!1;n<d&&(n=d)}else{if(r>g)return!1;if(r<d&&(r=d),n<d)return!1;n>g&&(n=g)}}else if(r==n){if(r<d||r>g)return!1;if(s>a){if(s<c)return!1;if(s>p&&(s=p),a>p)return!1;a<c&&(a=c)}else{if(s>p)return!1;if(s<c&&(s=c),a<c)return!1;a>p&&(a=p)}}else if(s>a){if(s<c||a>p)return!1;if(r>n){if(r<d||n>g)return!1;o=r-n,h=s-a,s>p&&(r-=(s-p)*o/h,s=p),r>g&&(s-=(r-g)*h/o,r=g),a<c&&(n+=(c-a)*o/h,a=c),n<d&&(a+=(d-n)*h/o,n=d)}else{if(n<d||r>g)return!1;o=n-r,h=s-a,s>p&&(r+=(s-p)*o/h,s=p),r<d&&(s-=(d-r)*h/o,r=d),a<c&&(n-=(c-a)*o/h,a=c),n>g&&(a+=(n-g)*h/o,n=g)}}else{if(a<c||s>p)return!1;if(r>n){if(r<d||n>g)return!1;o=r-n,h=a-s,s<c&&(r-=(c-s)*o/h,s=c),r>g&&(s+=(r-g)*h/o,r=g),a>p&&(n+=(a-p)*o/h,a=p),n<d&&(a-=(d-n)*h/o,n=d)}else{if(n<d||r>g)return!1;o=n-r,h=a-s,s<c&&(r+=(c-s)*o/h,s=c),r<d&&(s+=(d-r)*h/o,r=d),a>p&&(n-=(a-p)*o/h,a=p),n>g&&(a-=(n-g)*h/o,n=g)}}l=[s,r,a,n];break;default:return!1}return l},this.getLineArea=function(t,e,i,s,a,r,n,o,h,l,c,d,p,g,u,m){var f=Math.max(n||1,this.lineWidthEvent),y=[],x=["poly"];if((t=this.validateBezier(t,e,i,s,a,h,l)).match(/error/)){if(!this.showErrorBars||!this.isNumeric([e,i,s,a,n]))return!1;e=Math.ceil(e),s=Math.ceil(s),i=Math.ceil(i),a=Math.ceil(a);var v=(n=Math.ceil(n))/2;x=n>0?["poly",e,i-f,s-f,a-f,s-f,a-v,s+f,a-v,s+f,a+v,s-f,a+v,s-f,a+f,e,i+f]:["poly",s-f,a+f,s-v,a+f,s-v,a-f,s+v,a-f,s+v,a+f,s+f,a+f,e+f,i,e-f,i]}else if("spline"==t||"cardinalSpline"==t){if(e.length<3)return!(e.length<2)&&this.getLineArea("line",e[0],i[0],e[1],i[1],r,n,o,h,l,c,d,p,g,u);for(var b=0;b<e.length;b++)x.push(e[b],i[b]-f),y.push(i[b]+f,e[b]);x=x.concat(y.reverse())}else if("arch"==t){if(3!=e.length||3!=i.length)return!1;for(b=0;b<e.length;b++)if(!this.isNumeric([e[b],i[b]]))return!1;y=this.traceQuadraticCurve(e[0],i[0],e[1],i[1],e[2],i[2],.25,!0);for(b=0;b<y.length;b++)x.push(y[b][0],y[b][1]);y=this.traceQuadraticCurve(e[0],i[0],e[1],i[1],e[2],i[2],.25);for(b=0;b<y.length;b++)x.push(y[b][0],y[b][1])}else if("arc"==t){x=["poly"],y=this.traceArc1(e,i,s,h,l,!0);for(b=0;b<y.length;b++)x.push(y[b][0],y[b][1]);y=this.traceArc1(e,i,s-f,h,l);for(b=0;b<y.length;b++)x.push(y[b][0],y[b][1])}else if("quadratic"==t){var A=this.perpendicularLinePoints(e,i,s,a,!1,Math.min(1,this.arrowQuadraticFactor*Math.abs(p))*(p>0?-1:1)),w=this.shortenLine(e,i,s,a,h,l,t,p),C=this.parallelLinePoints(w[0],w[1],A[0],A[1],f),T=this.parallelLinePoints(A[0],A[1],w[2],w[3],f);y=this.traceQuadraticCurve(C[0],C[1],C[4],C[5],T[4],T[5],.1,!0);for(b=0;b<y.length;b++)x.push(y[b][0],y[b][1]);var S=[];y=this.traceQuadraticCurve(C[2],C[3],C[6],C[7],T[6],T[7],.1,!0);for(b=0;b<y.length;b++)S.push(y[b][1],y[b][0]);x=x.concat(S.reverse())}else if("roundLine"==t)x=["poly",e-f,i,e-f,a+f,s,a+f,s,a-f,e+f,a-f,e+f,i];else{if(!this.isNumeric([e,i,s,a]))return!1;var M=this.shortenLine(e,i,s,a,h||0,l||0,t);if(e=M[0],i=M[1],s=M[2],a=M[3],c){if(!(M=this.clip("line",[e,i,s,a],d)))return!1;e=M[0],i=M[1],s=M[2],a=M[3]}if(p&&this.isArray(p)&&p.length>0){if(!this.isNumeric2DArray(p))return!1;if(t.match(/bezier/i))if(6==p[0].length){var D=[p[0][0],p[0][1]];for(b=0;b<p.length;b++)D=D.concat(p[b]);D.push(p[p.length-1][0],p[p.length-1][1]);var k=this.cloneObject(D);for(b=0;b<p.length;b++){y=this.traceBezierCurve(k[0],k[1]-f,k[2],k[3]-f,k[4],k[5]-f,k[6],k[7]-f,.1,!0);for(var L=0;L<y.length;L++)x.push(y[L][0],y[L][1]);for(L=0;L<6;L++)k.shift()}k=this.cloneObject(D);for(S=[],b=0;b<p.length;b++){y=this.traceBezierCurve(k[0],k[1]+f,k[2],k[3]+f,k[4],k[5]+f,k[6],k[7]+f,.1,!0);for(L=0;L<y.length;L++)S.push(y[L][1],y[L][0]);for(L=0;L<6;L++)k.shift()}x=x.concat(S.reverse())}else if(4==p.length){C=this.parallelLinePoints(p[0][0],p[0][1],p[1][0],p[1][1],f),T=this.parallelLinePoints(p[2][0],p[2][1],p[3][0],p[3][1],f);y=this.traceBezierCurve(C[0],C[1],C[4],C[5],T[0],T[1],T[4],T[5],.1,!0);for(L=0;L<y.length;L++)x.push(y[L][0],y[L][1]);y=this.traceBezierCurve(C[2],C[3],C[6],C[7],T[2],T[3],T[6],T[7],.1,!0);for(S=[],L=0;L<y.length;L++)S.push(y[L][1],y[L][0]);x=x.concat(S.reverse())}else{x=["poly",(q=this.parallelLinePoints(p[0][0],p[0][1],p[p.length-1][0],p[p.length-1][1],f))[0],q[1],q[2],q[3],q[6],q[7],q[4],q[5]]}else if(p.length>2){x=["poly"];var I=[];for(b=0;b<p.length-1;b++)I.push([p[b][0],p[b][1]]);for(b=p.length-1;b>=1;b--)I.push([p[b][0],p[b][1]]);y=this.enlargePolygon(I,f,1);for(b=0;b<y.length;b++)x.push(y[b][0],y[b][1])}else{x=["poly",(q=this.parallelLinePoints(p[0][0],p[0][1],p[1][0],p[1][1],f))[0],q[1],q[2],q[3],q[6],q[7],q[4],q[5]]}}else if(t.match(/curved/i)){var z=e==s&&i==a&&m,N=this.lineMidPoint(e,i,s,a),B=this.lineLength(e,i,N[0],N[1]),P=(h||0)/B,R=(l||0)/B,O=!(t.match(/curvedcc/i)&&e>s)&&(!t.match(/curvedcc/i)&&s>=e),X=s>=e?Math.asin((N[1]-i)/B):Math.asin(-(N[1]-i)/B),F=X+Math.PI,_=[];if(z){X<0&&(X+=2*Math.PI);var E=1.25*m.size,V=m.size/1.25;switch(m.pos){case"top":_=[e,i-E,V,.75*Math.PI,.25*Math.PI,!1];break;case"topRight":_=[e+E,i-E,V,Math.PI,.5*Math.PI,!1];break;case"right":_=[e+E,i,V,1.25*Math.PI,.75*Math.PI,!1];break;case"bottomRight":_=[e+E,i+E,V,1.5*Math.PI,Math.PI,!1];break;case"bottom":_=[e,i+E,V,1.75*Math.PI,1.25*Math.PI,!1];break;case"bottomLeft":_=[e-E,i+E,V,0,1.5*Math.PI,!1];break;case"left":_=[e-E,i,V,.25*Math.PI,1.75*Math.PI,!1];break;case"topLeft":_=[e-E,i-E,V,.5*Math.PI,0,!1]}}else _=s>=e?[N[0],N[1],Math.max(0,B),X-R,F+P,O]:[N[0],N[1],Math.max(0,B),X+P,F-R,O];x=["poly"],y=this.traceArc(_[0],_[1],_[2]+f,_[3],_[4],_[5]);for(b=0;b<y.length;b++)x.push(y[b][0],y[b][1]);y=this.traceArc(_[0],_[1],_[2]-f,_[3],_[4],!_[5]);for(b=0;b<y.length;b++)x.push(y[b][0],y[b][1])}else if(t.match(/bezier/i)){var H=(e+s)/2,G=(i+a)/2;y=t.match(/beziery/i)?this.traceBezierCurve(e,i-f,e,G-f,s,G-f,s,a-f,.25,!0):this.traceBezierCurve(e,i-f,H,i-f,H,a-f,s,a-f,.25,!0);for(b=0;b<y.length;b++)x.push(y[b][0],y[b][1]);y=t.match(/beziery/i)?this.traceBezierCurve(e,i+f,e,G+f,s,G+f,s,a+f,.25):this.traceBezierCurve(e,i+f,H,i+f,H,a+f,s,a+f,.25);for(b=0;b<y.length;b++)x.push(y[b][0],y[b][1])}else{var q;if(e==s&&i!=a)x=["poly",e-f,i,e+f,i,s+f,a,s-f,a];else if(i==a&&e!=s)x=["poly",e,i-f,s,i-f,s,a+f,e,a+f];else x=["poly",(q=this.parallelLinePoints(e,i,s,a,f))[0],q[1],q[2],q[3],q[6],q[7],q[4],q[5]]}}return"Network"==this.graphType?this.preScaleNetwork&&!this.isAnimation?x:this.adjustNetworkObjects(x):x},this.setDashDot=function(t,e){e||(e=this.getCanvasContext()),t||(t="solid");var i=[];this.tempCap=e.lineCap,t.match(/blank/i)?i=CanvasXpress.R.lty[0]:t.match(/solid/i)?i=CanvasXpress.R.lty[1]:t.match(/dashed/i)?(i=CanvasXpress.R.lty[2],i=[this.dashLength,this.dashLength-2]):t.match(/dotted/i)?(i=CanvasXpress.R.lty[3],i=[this.dotLength,this.dotLength+2]):t.match(/dotdash/i)?i=CanvasXpress.R.lty[4]:t.match(/longdash/i)?i=CanvasXpress.R.lty[5]:t.match(/twodash/i)&&(i=CanvasXpress.R.lty[6]),e.setLineDash(i)},this.resetDashDot=function(t){t||(t=this.getCanvasContext()),t.lineCap=this.tempCap,t.setLineDash([])},this.validateBezier=function(t,e,i,s,a,r,n){if(this.adjustBezier){if(t.match(/bezier/i)&&(e==s||i==a))return"line";Math.abs(s-e)>=Math.abs(a-i)?t.match(/beziery/i)&&(t=(t=t.replace("beziery","bezier")).replace("bezierY","bezier")):t.match(/bezierx/i)?t=(t=t.replace("bezierx","beziery")).replace("bezierX","bezierY"):t.match(/bezier/i)&&(t=t.replace("bezier","bezierY")),null!=r&&null!=n&&(t.match(/beziery/i)?a>i?i+r>a-n&&(t="line"):i-r<a+n&&(t="line"):t.match(/beziery/i)&&(s>e?e+r>s-n&&(t="line"):e-r<s+n&&(t="line")))}return t},this.drawLine=function(t,e,i,s,a,r,n,o,h,l,c,d,p,g,u,m,f,y){y||(y=this.getCanvasContext()),this.setDashDot(t,y),t=this.validateBezier(t,e,i,s,a,h,l);var x=!1,v=function(t){switch(t){case"arrow":x=0;break;case"square":x=1;break;case"round":x=2;break;case"roundDocked":x=!1}};if(t||(t="solid"),t.match(/error/)){if(this.showErrorBars&&this.isNumeric([e,i,s,a,n])){e=Math.ceil(e),s=Math.ceil(s),i=Math.ceil(i),a=Math.ceil(a);var b=(n=Math.ceil(n))/2;this.setStyle(r,!1,o,y),this.isColorTransparent(r,!0)||(y.beginPath(),this.lineTo(e,i,s,a,y),Math.abs(n)>this.errorBarsWidth&&(n>0?this.lineTo(s,a-b,s,a+b,y):this.lineTo(s-b,a,s+b,a,y)))}this.resetStyle(y)}else if(t.match(/spline|cardinalSpline/i)){if(e.length<3)return!(e.length<2)&&this.drawLine(t.match(/dashedSpline/i)?"dashedLine":"line",e[0],i[0],e[1],i[1],r,n,o,h,l,c,d,p,g,u,!1,!1,y);for(var A=[],w=[],C=0,T=0;T<e.length;T++){if(!this.isNumeric([e[T],i[T]]))return;w.push(e[T],i[T]),C+=2}if(this.setStyle(r,n,o,y),!this.isColorTransparent(r,!0))if(t.match(/spline/i)){for(T=0;T<C-4;T+=2)A=A.concat(this.splineControlPoint(w[T],w[T+1],w[T+2],w[T+3],w[T+4],w[T+5]));y.beginPath(),y.moveTo(w[0],w[1]),y.quadraticCurveTo(A[0],A[1],w[2],w[3]);for(T=2;T<C-5;T+=2)y.bezierCurveTo(A[2*T-2],A[2*T-1],A[2*T],A[2*T+1],w[T+2],w[T+3]);y.moveTo(w[C-2],w[C-1]),y.quadraticCurveTo(A[2*C-10],A[2*C-9],w[C-4],w[C-3]),y.stroke()}else{w=this.curvePoints(w),y.beginPath(),y.moveTo(w[0],w[1]);for(T=2;T<w.length-1;T+=2)y.lineTo(w[T],w[T+1]);y.stroke()}this.resetStyle(y)}else if(t.match(/arch/)){if(3!=e.length||3!=i.length)return!1;for(T=0;T<e.length;T++)if(!this.isNumeric([e[T],i[T]]))return!1;this.setStyle(r,n,o,y),this.isColorTransparent(r,!0)||(y.beginPath(),y.moveTo(e[0],i[0]),y.quadraticCurveTo(e[1],i[1],e[2],i[2]),y.stroke()),this.resetStyle(y)}else if("arc"==t)this.setStyle(r,n,o,y),y.beginPath(),y.arc(e,i,Math.max(0,s),h,l,!1),y.stroke(),this.resetStyle(y);else if("quadratic"==t){this.setStyle(r,n,o,y);var S=this.perpendicularLinePoints(e,i,s,a,!1,Math.min(1,this.arrowQuadraticFactor*Math.abs(p))*(p>0?-1:1)),M=this.shortenLine(e,i,s,a,h,l,t,p),D=this.traceQuadraticCurve(M[0],M[1],S[0],S[1],M[2],M[3],.1,!0);y.beginPath(),y.moveTo(M[0],M[1]),y.quadraticCurveTo(S[0],S[1],M[2],M[3]),y.stroke(),this.resetStyle(y),u&&(e=D[9][0],i=D[9][1],s=M[2],a=M[3],v(u),this.drawArrowHead(e,i,s,a,r,n,x,!1,y)),g&&(e=D[1][0],i=D[1][1],s=M[0],a=M[1],v(g),this.drawArrowHead(e,i,s,a,r,n,x,!0,y))}else if("roundLine"==t)this.setStyle(r,n,o,y),y.beginPath(),y.moveTo(e,i),i>a?(y.lineTo(e,a+this.roundedPolygonRadius),e>s?y.quadraticCurveTo(e,a,e+this.roundedPolygonRadius,a):y.quadraticCurveTo(e,a,e-this.roundedPolygonRadius,a)):(y.lineTo(e,a-this.roundedPolygonRadius),e>s?y.quadraticCurveTo(e,a,e-this.roundedPolygonRadius,a):y.quadraticCurveTo(e,a,e+this.roundedPolygonRadius,a)),y.lineTo(s,a),y.stroke(),this.resetStyle(y),u&&(v(u),this.drawArrowHead(e,a,s,a,r,n,x,!1,y)),g&&(v(g),this.drawArrowHead(e,a,s,a,r,n,x,!0,y));else{if(!this.isNumeric([e,i,s,a]))return this.resetDashDot(y),!1;var k=this.shortenLine(e,i,s,a,h||0,l||0,t);if(e=k[0],i=k[1],s=k[2],a=k[3],c){if(!(k=this.clip("line",[e,i,s,a],d)))return!1;e=k[0],i=k[1],s=k[2],a=k[3]}if(p&&this.isArray(p)&&p.length>0){var L=p.length-1;if(!this.isNumeric2DArray(p))return!1;if(this.setStyle(r,n,o,y),t.match(/bezier/i)){if(!this.isColorTransparent(r,!0))if(6==p[0].length){y.beginPath(),y.moveTo(p[0][0],p[0][1]);for(T=0;T<p.length;T++)y.bezierCurveTo(p[T][0],p[T][1],p[T][2],p[T][3],p[T][4],p[T][5]);y.stroke(),u&&(D=this.traceBezierCurve(p[L][0],p[L][1],p[L][0],p[L][1],p[L][2],p[L][3],p[L][4],p[L][5],.1,!0),e=D[9][0],i=D[9][1],s=D[10][0],a=D[10][1],v(u),this.drawArrowHead(e,i,s,a,r,n,x,!1,y)),g&&(D=this.traceBezierCurve(p[0][0],p[0][1],p[0][0],p[0][1],p[0][2],p[0][3],p[0][4],p[0][5],.1,!0),e=D[1][0],i=D[1][1],s=D[0][0],a=D[0][1],v(g),this.drawArrowHead(e,i,s,a,r,n,x,!0,y))}else if(4==p.length){y.beginPath(),y.moveTo(p[0][0],p[0][1]),y.bezierCurveTo(p[1][0],p[1][1],p[2][0],p[2][1],p[3][0],p[3][1]),y.stroke();D=this.traceBezierCurve(p[0][0],p[0][1],p[1][0],p[1][1],p[2][0],p[2][1],p[3][0],p[3][1],.1,!0);u&&(e=D[9][0],i=D[9][1],s=p[3][0],a=p[3][1],v(u),this.drawArrowHead(e,i,s,a,r,n,x,!1,y)),g&&(e=D[1][0],i=D[1][1],s=p[1][0],a=p[1][1],v(g),this.drawArrowHead(e,i,s,a,r,n,x,!0,y))}else y.beginPath(),y.moveTo(p[0][0],p[0][1]),this.lineTo(p[L][0],p[L][1],!1,!1,y),y.stroke(),u&&(e=p[L-1][0],i=p[L-1][1],s=p[L][0],a=p[L][1],v(u),this.drawArrowHead(e,i,s,a,r,n,x,!1,y)),g&&(e=p[0][0],i=p[0][1],s=p[1][0],a=p[1][1],v(g),this.drawArrowHead(e,i,s,a,r,n,x,!0,y))}else if(!this.isColorTransparent(r,!0)){y.beginPath(),this.lineTo(p[0][0],p[0][1],p[1][0],p[1][1],y);for(T=1;T<L;T++)this.lineTo(p[T][0],p[T][1],p[T+1][0],p[T+1][1],y);u&&(e=p[L-1][0],i=p[L-1][1],s=p[L][0],a=p[L][1],v(u),this.drawArrowHead(e,i,s,a,r,n,x,!1,y)),g&&(e=p[0][0],i=p[0][1],s=p[1][0],a=p[1][1],v(g),this.drawArrowHead(e,i,s,a,r,n,x,!0,y))}this.resetStyle(y)}else if(t.match(/curved/i)){var I=e==s&&i==a&&m,z=this.lineMidPoint(e,i,s,a),N=this.lineLength(e,i,z[0],z[1]),B=(h||0)/N,P=(l||0)/N,R=!(t.match(/curvedcc/i)&&e>s)&&(!t.match(/curvedcc/i)&&s>=e),O=s>=e?Math.asin((z[1]-i)/N):Math.asin(-(z[1]-i)/N),X=O+Math.PI,F=[];if(this.setStyle(r,n,o,y),!this.isColorTransparent(r,!0)){if(y.beginPath(),I){O<0&&(O+=2*Math.PI),m.dir?(u=!1,g=m.end):(u=m.end,g=!1);var _=1.25*m.size,E=m.size/1.25;switch(m.pos){case"top":F=[e,i-_,E,.75*Math.PI,.25*Math.PI,!1];break;case"topRight":F=[e+_,i-_,E,Math.PI,.5*Math.PI,!1];break;case"right":F=[e+_,i,E,1.25*Math.PI,.75*Math.PI,!1];break;case"bottomRight":F=[e+_,i+_,E,1.5*Math.PI,Math.PI,!1];break;case"bottom":F=[e,i+_,E,1.75*Math.PI,1.25*Math.PI,!1];break;case"bottomLeft":F=[e-_,i+_,E,0,1.5*Math.PI,!1];break;case"left":F=[e-_,i,E,.25*Math.PI,1.75*Math.PI,!1];break;case"topLeft":F=[e-_,i-_,E,.5*Math.PI,0,!1]}}else F=s>=e?[z[0],z[1],Math.max(0,N),O-P,X+B,R]:[z[0],z[1],Math.max(0,N),O+B,X-P,R];y.arc(F[0],F[1],F[2],F[3],F[4],F[5]);D=this.traceArc(F[0],F[1],F[2],F[3],F[4],F[5]);y.stroke()}this.resetStyle(y),u&&(v(u),e=D[15][0],i=D[15][1],s=D[16][0],a=D[16][1],this.drawArrowHead(e,i,s,a,r,n,x,!1,y)),g&&(e=D[1][0],i=D[1][1],s=D[0][0],a=D[0][1],v(g),this.drawArrowHead(e,i,s,a,r,n,x,!0,y))}else if(t.match(/bezier/i)){var V=(e+s)/2,H=(i+a)/2;this.setStyle(r,n,o,y),this.isColorTransparent(r,!0)||(y.beginPath(),y.moveTo(e,i),"Tree"==this.graphType&&this.treeCircular&&f?(y.bezierCurveTo(f[2],f[3],f[0],f[1],s,a),D=this.traceBezierCurve(e,i,f[0],f[1],f[0],f[1],s,a,.1,!0)):t.match(/beziery/i)?(y.bezierCurveTo(e,H,s,H,s,a),D=this.traceBezierCurve(e,i,e,H,s,H,s,a,.1,!0)):(y.bezierCurveTo(V,i,V,a,s,a),D=this.traceBezierCurve(e,i,V,i,V,a,s,a,.1,!0)),y.stroke()),this.resetStyle(y),u&&(e=D[9][0],i=D[9][1],s=D[10][0],a=D[10][1],v(u),this.drawArrowHead(e,i,s,a,r,n,x,!1,y)),g&&(s=D[0][0],a=D[0][1],e=D[1][0],i=D[1][1],v(g),this.drawArrowHead(e,i,s,a,r,n,x,!0,y))}else if(t.match(/needle/i)){this.setStyle(r,n,o,y);S=this.parallelLinePoints(e,i,s,a,n);this.isColorTransparent(r,!0)||(y.beginPath(),y.moveTo(S[0],S[1]),y.lineTo(s,a),y.lineTo(S[2],S[3]),y.closePath(),y.stroke(),y.fill(),y.arc(e,i,3*n,0,2*Math.PI),y.stroke(),y.fill()),this.resetStyle(y)}else this.setStyle(r,n,o,y),this.isColorTransparent(r,!0)||(y.beginPath(),t.match(/R$/)||this.useRawLines?this.lineRawTo(e,i,s,a,y):this.lineTo(e,i,s,a,y)),this.resetStyle(y),u&&(v(u),this.drawArrowHead(e,i,s,a,r,n,x,!1,y)),g&&(v(g),this.drawArrowHead(e,i,s,a,r,n,x,!0,y))}this.resetDashDot(y)},this.drawArrowHead=function(t,e,i,s,a,r,n,o,h){h||(h=this.getCanvasContext());var l=this.arrowPointSize,c=Math.max(l/2-1,1),d=(Math.max(2*l/3,1),r?r/2:this.outlineWidth/2),p=(r||this.outlineWidth,1==n?[[-d,-l],[-d,l]]:0==n&&[[1.5,-.5],[-l,-c*r],[-l,c*r]]),g=i-t,u=s-e;if(this.setStyle(a,1==n?r+2:r,!1,h),n<2){var m=function(t,e,i,s){for(var a=[],r=0;r<t.length;r++)a.push([t[r][0]*Math.cos(e)-t[r][1]*Math.sin(e),t[r][0]*Math.sin(e)+t[r][1]*Math.cos(e)]);var n=[];for(r=0;r<a.length;r++)n.push([a[r][0]+i,a[r][1]+s]);return n}(p,Math.atan2(u,g),i,s);h.beginPath(),h.moveTo(m[0][0],m[0][1]);for(var f=1;f<m.length;f++)isNaN(m[f][0])||isNaN(m[f][1])||h.lineTo(m[f][0],m[f][1]);0==n?(isNaN(m[0][0])||isNaN(m[0][1])||h.lineTo(m[0][0],m[0][1]),h.closePath(),h.fill()):(h.closePath(),h.stroke())}else 2==n&&(h.beginPath(),h.arc(i,s,Math.max(0,1.3*c),0,2*Math.PI,!0),h.closePath(),h.fill());this.resetStyle(h)},this.createPatterns=function(t){var e=function(t){t.strokeStyle="rgb(29,137,182)";for(var e=[4,6,9,12,16,21,27,14,17,21,26],i=[27,21,16,12,9,6,4,26,21,17,14],s=0;s<e.length;s++)t.moveTo(e[s],i[s]),t.arc(e[s],i[s],2,0,2*Math.PI);t.moveTo(3,32),t.arc(3,32,2,Math.PI,0),t.moveTo(13,32),t.arc(13,32,2,Math.PI,0),t.moveTo(32,3),t.arc(32,3,2,.5*Math.PI,1.5*Math.PI),t.moveTo(32,13),t.arc(32,13,2,.5*Math.PI,1.5*Math.PI),e=[[7,11],[8,12],[11,14],[14,17],[18,20],[22,24],[28,29]],i=[[28,29],[22,24],[18,20],[14,17],[11,14],[8,12],[7,11]];for(s=0;s<e.length;s++)t.moveTo(e[s][0],i[s][0]),t.lineTo(e[s][1],i[s][1]);t.stroke()},i=function(t){t.strokeStyle="rgb(29,137,182)",t.moveTo(3,0),t.arc(3,0,2,Math.PI,0,!0),t.moveTo(3,5),t.arc(3,5,2,Math.PI,0),t.moveTo(6,1),t.lineTo(8,4),t.lineTo(10,1),t.moveTo(13,0),t.arc(13,0,2,Math.PI,0,!0),t.moveTo(13,5),t.arc(13,5,2,Math.PI,0),t.stroke()},s=function(t){t.strokeStyle="rgb(29,137,182)",t.moveTo(0,3),t.arc(0,3,2,1.5*Math.PI,.5*Math.PI),t.moveTo(5,3),t.arc(5,3,2,1.5*Math.PI,.5*Math.PI,!0),t.moveTo(1,6),t.lineTo(4,8),t.lineTo(1,10),t.moveTo(0,13),t.arc(0,13,2,1.5*Math.PI,.5*Math.PI),t.moveTo(5,13),t.arc(5,13,2,1.5*Math.PI,.5*Math.PI,!0),t.stroke()};t||(t=this.getCanvasContext());var a=this.$cX("canvas");a.width=5,a.height=5;var r=this.get2DCanvasContext(a);CanvasXpress.cachePatterns.hasOwnProperty("hatchForward")||(r.clearRect(0,0,5,5),r.beginPath(),r.moveTo(0,0),r.lineTo(5,5),r.stroke(),CanvasXpress.cachePatterns.hatchForward=t.createPattern(a,"repeat")),CanvasXpress.cachePatterns.hasOwnProperty("hatchReverse")||(r.clearRect(0,0,5,5),r.beginPath(),r.moveTo(5,0),r.lineTo(0,5),r.stroke(),CanvasXpress.cachePatterns.hatchReverse=t.createPattern(a,"repeat")),CanvasXpress.cachePatterns.hasOwnProperty("stripeVertical")||(a.width=3,a.height=3,r.clearRect(0,0,3,3),r.beginPath(),r.moveTo(1.5,0),r.lineTo(1.5,3),r.stroke(),CanvasXpress.cachePatterns.stripeVertical=t.createPattern(a,"repeat")),CanvasXpress.cachePatterns.hasOwnProperty("stripeHorizontal")||(r.clearRect(0,0,3,3),r.beginPath(),r.moveTo(0,1.5),r.lineTo(3,1.5),r.stroke(),CanvasXpress.cachePatterns.stripeHorizontal=t.createPattern(a,"repeat")),CanvasXpress.cachePatterns.hasOwnProperty("polkaDot")||(a.width=5,a.height=5,r.clearRect(0,0,5,5),r.beginPath(),r.arc(2.5,2.5,2,0,2*Math.PI),r.fill(),CanvasXpress.cachePatterns.polkaDot=t.createPattern(a,"repeat")),CanvasXpress.cachePatterns.hasOwnProperty("crossHatch")||(r.clearRect(0,0,5,5),r.beginPath(),r.moveTo(0,0),r.lineTo(5,5),r.stroke(),r.beginPath(),r.moveTo(5,0),r.lineTo(0,5),r.stroke(),CanvasXpress.cachePatterns.crossHatch=t.createPattern(a,"repeat")),CanvasXpress.cachePatterns.hasOwnProperty("crossStripe")||(a.width=3,a.height=3,r.clearRect(0,0,3,3),r.beginPath(),r.moveTo(1.5,0),r.lineTo(1.5,3),r.stroke(),r.beginPath(),r.moveTo(0,1.5),r.lineTo(3,1.5),r.stroke(),CanvasXpress.cachePatterns.crossStripe=t.createPattern(a,"repeat")),CanvasXpress.cachePatterns.hasOwnProperty("squares")||(a.width=5,a.height=5,r.clearRect(0,0,5,5),r.beginPath(),r.strokeRect(1,1,4,4),r.stroke(),CanvasXpress.cachePatterns.squares=t.createPattern(a,"repeat")),CanvasXpress.cachePatterns.hasOwnProperty("circles")||(r.clearRect(0,0,5,5),r.beginPath(),r.arc(2.5,2.5,1,0,2*Math.PI),r.stroke(),CanvasXpress.cachePatterns.circles=t.createPattern(a,"repeat")),CanvasXpress.cachePatterns.hasOwnProperty("plus")||(a.width=7,a.height=7,r.clearRect(0,0,7,7),r.beginPath(),r.moveTo(3.5,1),r.lineTo(3.5,6),r.stroke(),r.beginPath(),r.moveTo(1,3.5),r.lineTo(6,3.5),r.stroke(),CanvasXpress.cachePatterns.plus=t.createPattern(a,"repeat")),CanvasXpress.cachePatterns.hasOwnProperty("minus")||(a.width=7,a.height=7,r.clearRect(0,0,7,7),r.beginPath(),r.moveTo(1,3.5),r.lineTo(6,3.5),r.stroke(),CanvasXpress.cachePatterns.minus=t.createPattern(a,"repeat")),CanvasXpress.cachePatterns.hasOwnProperty("bars")||(a.width=7,a.height=7,r.clearRect(0,0,7,7),r.beginPath(),r.moveTo(3.5,1),r.lineTo(3.5,6),r.stroke(),CanvasXpress.cachePatterns.bars=t.createPattern(a,"repeat")),CanvasXpress.cachePatterns.hasOwnProperty("squiglesHorizontal")||(a.width=5,a.height=5,r.clearRect(0,0,5,5),r.beginPath(),r.moveTo(0,5),r.lineTo(2.5,0),r.lineTo(5,5),r.stroke(),CanvasXpress.cachePatterns.squiglesHorizontal=t.createPattern(a,"repeat")),CanvasXpress.cachePatterns.hasOwnProperty("squiglesVertical")||(a.width=5,a.height=5,r.clearRect(0,0,5,5),r.beginPath(),r.moveTo(0,0),r.lineTo(5,2.5),r.lineTo(0,5),r.stroke(),CanvasXpress.cachePatterns.squiglesVertical=t.createPattern(a,"repeat")),CanvasXpress.cachePatterns.hasOwnProperty("brickForward")||(r.clearRect(0,0,5,5),r.beginPath(),r.moveTo(0,0),r.lineTo(3,0),r.lineTo(0,3),r.closePath(),r.stroke(),r.fill(),r.beginPath(),r.moveTo(2,5),r.lineTo(5,2),r.lineTo(5,5),r.closePath(),r.stroke(),r.fill(),CanvasXpress.cachePatterns.brickForward=t.createPattern(a,"repeat")),CanvasXpress.cachePatterns.hasOwnProperty("brickReverse")||(r.clearRect(0,0,5,5),r.beginPath(),r.moveTo(5,0),r.lineTo(2,0),r.lineTo(5,3),r.closePath(),r.stroke(),r.fill(),r.beginPath(),r.moveTo(0,5),r.lineTo(0,2),r.lineTo(3,5),r.closePath(),r.stroke(),r.fill(),CanvasXpress.cachePatterns.brickReverse=t.createPattern(a,"repeat")),CanvasXpress.cachePatterns.hasOwnProperty("art")||(r.clearRect(0,0,5,5),r.beginPath(),r.arc(2.5,2.5,2,0,2*Math.PI),r.moveTo(0,5),r.lineTo(5,0),r.stroke(),CanvasXpress.cachePatterns.art=t.createPattern(a,"repeat")),CanvasXpress.cachePatterns.hasOwnProperty("pcx")||(r.clearRect(0,0,5,5),r.beginPath(),r.moveTo(2,0),r.lineTo(0,0),r.lineTo(0,3),r.lineTo(2,3),r.stroke(),r.beginPath(),r.moveTo(3,3),r.lineTo(5,5),r.stroke(),r.beginPath(),r.moveTo(5,3),r.lineTo(3,5),r.stroke(),CanvasXpress.cachePatterns.pcx=t.createPattern(a,"repeat")),CanvasXpress.cachePatterns.hasOwnProperty("hatchForward3")||(a.width=5,a.height=3,r.clearRect(0,0,5,3),r.beginPath(),r.moveTo(0,0),r.lineTo(5,3),r.stroke(),CanvasXpress.cachePatterns.hatchForward3=t.createPattern(a,"repeat")),CanvasXpress.cachePatterns.hasOwnProperty("hatchReverse3")||(r.clearRect(0,0,5,3),r.beginPath(),r.moveTo(5,0),r.lineTo(0,3),r.stroke(),CanvasXpress.cachePatterns.hatchReverse3=t.createPattern(a,"repeat")),CanvasXpress.cachePatterns.hasOwnProperty("membraneTop")||(a.width=5,a.height=16,r.clearRect(0,0,5,16),s(r),CanvasXpress.cachePatterns.membraneTop=t.createPattern(a,"repeat-x")),CanvasXpress.cachePatterns.hasOwnProperty("membraneBottom")||(a.width=5,a.height=16,r.clearRect(0,0,5,16),r.translate(5,0),r.scale(-1,1),s(r),CanvasXpress.cachePatterns.membraneBottom=t.createPattern(a,"repeat-x")),CanvasXpress.cachePatterns.hasOwnProperty("membraneRight")||(a.width=16,a.height=5,r.clearRect(0,0,16,5),i(r),CanvasXpress.cachePatterns.membraneRight=t.createPattern(a,"repeat-y")),CanvasXpress.cachePatterns.hasOwnProperty("membraneLeft")||(a.width=16,a.height=5,r.clearRect(0,0,16,5),r.translate(0,5),r.scale(1,-1),i(r),CanvasXpress.cachePatterns.membraneLeft=t.createPattern(a,"repeat-y")),CanvasXpress.cachePatterns.hasOwnProperty("membraneTL")||(a.width=32,a.height=32,r.clearRect(0,0,32,32),e(r),CanvasXpress.cachePatterns.membraneTL=t.createPattern(a,"no-repeat")),CanvasXpress.cachePatterns.hasOwnProperty("membraneBL")||(a.width=32,a.height=32,r.clearRect(0,0,32,32),r.translate(0,32),r.scale(1,-1),e(r),CanvasXpress.cachePatterns.membraneBL=t.createPattern(a,"no-repeat")),CanvasXpress.cachePatterns.hasOwnProperty("membraneTR")||(a.width=32,a.height=32,r.clearRect(0,0,32,32),r.translate(32,0),r.scale(-1,1),e(r),CanvasXpress.cachePatterns.membraneTR=t.createPattern(a,"no-repeat")),CanvasXpress.cachePatterns.hasOwnProperty("membraneBR")||(a.width=32,a.height=32,r.clearRect(0,0,32,32),r.translate(32,32),r.scale(-1,-1),e(r),CanvasXpress.cachePatterns.membraneBR=t.createPattern(a,"no-repeat"))},this.sphere=function(t,e,i,s,a,r,n,o,h){for(var l=Math.sin(n),c=Math.cos(n),d=Math.sin(o),p=Math.cos(o),g=Math.sin(h),u=Math.cos(h),m=function(t){var e=t.y;t.y=e*c+t.z*l*-1,t.z=e*l+t.z*c;var i=t.x;t.x=i*p+t.z*d*-1,t.z=i*d+t.z*p;i=t.x;t.x=i*u+t.y*g*-1,t.y=i*g+t.y*u},f=[],y=Math.PI/12,x=2*Math.PI,v=Math.PI/2,b=1;b>=-1;b-=2)for(var A=0;A<v;A+=y)for(var w=Math.cos(A)*s,C=Math.cos(A)*r,T=Math.sin(A)*a*b*-1,S=0;S<x;S+=y){var M={x:Math.cos(S)*w,y:T,z:Math.sin(S)*C};m(M),M.x+=t,M.y+=e,M.z+=i,b>0?f.push([M.x,M.y,M.z]):f.unshift([M.x,M.y,M.z])}return f},this.roundedPolygon=function(t){for(var e=function(t,e,i){i.x=e.x-t.x,i.y=e.y-t.y,i.len=Math.sqrt(i.x*i.x+i.y*i.y),i.nx=i.x/i.len,i.ny=i.y/i.len,i.ang=Math.atan2(i.ny,i.nx)},i=[],s=0;s<t.length;s++)i.push({x:t[s][0],y:t[s][1]});var a=[],r=this.roundedPolygonRadius,n={},o={},h=i.length,l=i[h-1];for(s=0;s<h;s++){var c=i[s%h],d=i[(s+1)%h];e(c,l,n),e(c,d,o);var p,g=n.nx*o.ny-n.ny*o.nx,u=n.nx*o.nx-n.ny*-o.ny,m=Math.asin(g),f=1,y=!1;u<0?m<0?m=Math.PI+m:(m=Math.PI-m,f=-1,y=!0):m>0&&(f=-1,y=!0);var x=m/2,v=Math.abs(Math.cos(x)*r/Math.sin(x));v>Math.min(n.len/2,o.len/2)?(v=Math.min(n.len/2,o.len/2),p=Math.abs(v*Math.sin(x)/Math.cos(x))):p=r;var b=c.x+o.nx*v,A=c.y+o.ny*v;b+=-o.ny*p*f,A+=o.nx*p*f,a.push([b,A,p,n.ang+Math.PI/2*f,o.ang-Math.PI/2*f,y]),l=c,c=d}return a},this.drawShapeSetShapeStyle=function(t,e,i,s,a,r,n,o,h,l){if(l||(l=this.getCanvasContext()),this.saveCanvas(l),this.translateCanvas(t,e,l),o&&this.rotateCanvas(o,l),null!=this.transparency&&(a=this.addColorTransparency(a,this.transparency,!0)),this.gradient)"radial"==this.gradientType?l.fillStyle=this.getGradient(0,0,Math.max(Math.abs(i),Math.abs(s)),!1,a):l.fillStyle=this.getGradient(0,0,i,s,a);else if(n)switch(n){case"closed":case"solid":l.fillStyle=a;break;case"open":break;default:a&&a.match(/0.1\)$/)&&r.match(/0.1\)$/)&&(l.globalAlpha=.1),l.fillStyle=CanvasXpress.cachePatterns[n]?CanvasXpress.cachePatterns[n]:a}else l.fillStyle=a;l.strokeStyle=r||this.foreground,l.lineWidth=h||this.outlineWidth,l.lineJoin=this.joinType,(i&&l.lineWidth>=i||s&&l.lineWidth>=s)&&(l.strokeStyle=a),this.setShadow(!0,l)},this.drawShapeDraw=function(t,e,i){if(i||(i=this.getCanvasContext()),t&&t.length>1){for(var s=t.shift();null==s[0]||null==s[1];)s=t.shift();for(i.beginPath(),i.moveTo(s[0]+.5,s[1]+.5);t.length>0;){for(s=t.shift();null==s[0]||null==s[1];)s=t.shift();i.lineTo(s[0]+.5,s[1]+.5)}e||i.closePath()}},this.drawShapeFillStroke=function(t,e,i,s){s||(s=this.getCanvasContext()),i&&"open"==i?s.stroke():e==t||s.strokeStyle==s.fillStyle?s.fill():(s.fill(),s.stroke())},this.drawShapeRestore=function(t,e,i,s){s||(s=this.getCanvasContext()),s.globalAlpha=1,this.setShadow(!1,s),this.restoreCanvas(s)},this.getShapeArea=function(t,e,i,s,a,r,n,o,h,l,c,d,p,g,u,m){var f,y,x=this,v=["poly"],b=[];switch(d||(d=this.setClipBoundaries()),t){case"arc2":b=this.traceArc1(e,i,a,p,g,!0);for(var A=0;A<b.length;A++)v.push(b[A][0],b[A][1]);b=this.traceArc1(e,i,a-s,p,g);for(A=0;A<b.length;A++)v.push(b[A][0],b[A][1]);break;case"pie":v.push(e,i),b=this.traceArc1(e,i,a,p,g,!0);for(A=0;A<b.length;A++)v.push(b[A][0],b[A][1]);break;case"confidence":for(A=0;A<e.length;A++)v.push(e[A][0],i[A][0]),b.push(i[A][1],e[A][1]);v=this.polygonClip(v.concat(b.reverse()),!1,!0);break;case"violin":case"fish":for(A=0;A<e[0].length;A++)v.push(e[0][A],i[0][A]),b.push(i[1][A],e[1][A]);v=v.concat(b.reverse());break;case"bezier":b=this.traceBezierCurve(e[0],i[0],e[1],i[1],e[2],i[2],e[3],i[3],.25,!0);for(A=0;A<b.length;A++)v.push(b[A][0],b[A][1]);b=this.traceBezierCurve(e[0],i[0]+a,e[1],i[1]+a,e[2],i[2]+a,e[3],i[3]+a,.25);for(A=0;A<b.length;A++)v.push(b[A][0],b[A][1]);break;case"arch":b=this.traceQuadraticCurve(e[0],i[0],e[1],i[1],e[2],i[2],.25,!0);for(A=0;A<b.length;A++)v.push(b[A][0],b[A][1]);b=this.traceArc1(e[4],i[4],a[0],s[2],s[3]);for(A=1;A<b.length;A++)v.push(b[A][0],b[A][1]);if(e[0]==e[3]&&i[0]==i[3]&&e[1]==e[4]&&i[1]==i[4]&&e[2]==e[5]&&i[2]==i[5])break;b=this.traceQuadraticCurve(e[3],i[3],e[4],i[4],e[5],i[5],.25,!0);for(A=0;A<b.length;A++)v.push(b[A][0],b[A][1]);b=this.traceArc1(e[1],i[1],a[1],s[0],s[1]);for(A=0;A<b.length;A++)v.push(b[A][0],b[A][1]);break;case"polygon":case"roundpolygon":case"path":case"spline":case"hull":for(A=0;A<e.length;A++)"spline"==t?v.push(e[A],i[A]-2):(v.push(e[A],i[A]-2),b.unshift(e[A],i[A]+2));break;default:f=s/2,y=a/2}switch(t){case"image":v=["rect",e-f*this.zoom,i-y*this.zoom,e+f*this.zoom,i+y*this.zoom];break;case"path":v=v.concat(b);break;case"mdavid":case"star":case"circle":case"sphere":v=["circle",e,i,s];break;case"drop":case"teardrop":case"marker":v=["circle",e,i-s,f];break;case"diamond":case"rhombus":v=["poly",e,i-y,e+f,i,e,i+y,e-f,i];break;case"arrow":case"box":case"rect":case"rectangle":case"roundrect":case"roundrectt":case"roundrectb":case"roundrectr":case"roundrectl":case"roundrecttr":case"roundrecttl":case"roundrectbr":case"roundrectbl":case"roundrect2":case"roundrectd":case"roundrecto":case"brace":case"square":case"pentagon":case"hexagon":case"octagon":case"oval":case"arc":case"arc3":case"ellipse":case"plus":case"minus":case"pch0":case"pch1":case"pch2":case"pch3":case"pch4":case"pch5":case"pch6":case"pch7":case"pch8":case"pch9":case"pch10":case"pch11":case"pch12":case"pch13":case"pch14":case"pch15":case"pch16":case"pch17":case"pch18":case"pch21":case"pch22":case"pch23":case"pch24":case"pch25":v=["rect",e-f,i-y,e+f,i+y];break;case"pch19":v=["rect",e-(f+=2),i-(y+=2),e+f,i+y];break;case"pch20":f-=2,y-=2,f=Math.max(2,f),y=Math.max(2,y),v=["rect",e-f,i-y,e+f,i+y];break;case"rect2":return this.getShapeArea("rectangle",e,i,s,s/2,r,n,o,h,l,c,d,p,g,u,m);case"rect3":return this.getShapeArea("rectangle",e,i,s,s/3,r,n,o,h,l,c,d,p,g,u,m);case"triangle":case"equilateral":v=["poly",e,i-y,e+f,i+y,e-f,i+y];break;case"triangle2":case"equilateral2":v=["poly",e,i+y,e+f,i-y,e-f,i-y];break;case"oval2":return this.getShapeArea("oval",e,i,s,s/2,r,n,o,h,l,c,d,p,g,u,m);case"oval3":return this.getShapeArea("oval",e,i,s,s/3,r,n,o,h,l,c,d,p,g,u,m);case"ellipse2":return this.getShapeArea("ellipse",e,i,s,s/2,r,n,o,h,l,c,d,p,g,u,m);case"ellipse3":return this.getShapeArea("ellipse",e,i,s,s/3,r,n,o,h,l,c,d,p,g,u,m);case"pie0":return this.getShapeArea("pie",e,i,s,s/2,r,n,o,h,l,c,d,0,Math.PI/5,u,m);case"pie1":return this.getShapeArea("pie",e,i,s,s/2,r,n,o,h,l,c,d,0,Math.PI/3.5,u,m);case"pie2":return this.getShapeArea("pie",e,i,s,s/2,r,n,o,h,l,c,d,0,Math.PI/2,u,m);case"pie3":return this.getShapeArea("pie",e,i,s,s/2,r,n,o,h,l,c,d,0,Math.PI/1.5,u,m);case"pie4":return this.getShapeArea("pie",e,i,s,s/2,r,n,o,h,l,c,d,0,Math.PI,u,m);case"pie5":return this.getShapeArea("pie",e,i,s,s/2,r,n,o,h,l,c,d,0,1.2*Math.PI,u,m);case"pie6":return this.getShapeArea("pie",e,i,s,s/2,r,n,o,h,l,c,d,0,1.4*Math.PI,u,m);case"pie7":return this.getShapeArea("pie",e,i,s,s/2,r,n,o,h,l,c,d,0,1.6*Math.PI,u,m);case"pie8":return this.getShapeArea("pie",e,i,s,s/2,r,n,o,h,l,c,d,0,1.8*Math.PI,u,m);case"pie9":return this.getShapeArea("pie",e,i,s,s/2,r,n,o,h,l,c,d,0,2*Math.PI,u,m);case"pacman":return this.getShapeArea("pie",e,i,s,s/2,r,n,o,h,l,c,d,1*Math.PI/4,7*Math.PI/4,u,m);case"pacman2":return this.getShapeArea("pie",e,i,s,s/2,r,n,o,h,l,c,d,5*Math.PI/4,3*Math.PI/4,u,m)}return v=h?function(s){if("Network"==x.graphType||"arrow"==t)return s;s.shift();for(var a=["poly"],r=Math.cos(h),n=Math.sin(h),o=0;o<s.length;o+=2)a.push(r*(e-s[o])+n*(i-s[o+1])+s[o]),a.push(r*(i-s[o+1])-n*(e-s[o])+s[o+1]);return a}(v):v,"Network"==this.graphType?this.preScaleNetwork&&!this.isAnimation?v:this.adjustNetworkObjects(v):v},this.drawShape=function(t,e,i,s,a,r,n,o,h,l,c,d,p,g,u,m,f){var y,x,v,b,A;if(f||(f=this.getCanvasContext()),o)switch(o){case"closed":case"solid":case"open":case"round":break;default:var w=o;o="closed",this.drawShape(t,e,i,s,a,r,r,o,h,l,c,d,p,g,u,m),o=w}switch(t){case"polygon":case"roundpolygon":case"path":case"spline":case"arch":case"hull":case"confidence":case"violin":case"bezier":case"fish":var C=Number.MAX_VALUE,T=-1*Number.MAX_VALUE,S=Number.MAX_VALUE,M=-1*Number.MAX_VALUE;if(y=[],O=[],e.length!=i.length)return!1;if("spline"==t&&e.length<5)return this.drawShape("polygon",e,i,s,a,r,n,o,h,l,c,d,p,g,u,m);if("arch"==t&&(6!=e.length||6!=i.length||4!=s.length||2!=a.length))return!1;if("bezier"==t){if(!(this.isNumeric(e)&&this.isNumeric(i)&&this.isNumeric(a)))return!1;for(var D=0;D<e.length;D++)C=Math.min(C,e[D]),T=Math.max(T,e[D]),S=Math.min(S,i[D]),M=Math.max(M,i[D]),O.push([e[D],i[D]]);e=(C+T)/2,i=(S+M)/2;for(D=0;D<O.length;D++)O[D][0]-=e,O[D][1]-=i,y.push(O[D][0],O[D][1])}else if("confidence"==t){if(!(e.length>2))return!1;for(D=0;D<e.length;D++)null!=e[D][0]&&null!=e[D][1]&&null!=i[D][0]&&null!=i[D][1]&&this.isNumeric([e[D][0],e[D][1],i[D][0],i[D][1]])&&(C=Math.min(C,Math.min(e[D][0],e[D][1])),T=Math.max(T,Math.max(e[D][0],e[D][1])),S=Math.min(S,Math.min(i[D][0],i[D][1])),M=Math.max(M,Math.max(i[D][0],i[D][1])),O.push([[e[D][0],e[D][1]],[i[D][0],i[D][1]]]));e=(C+T)/2,i=(S+M)/2;for(D=0;D<O.length;D++)O[D][0][0]-=e,O[D][0][1]-=e,O[D][1][0]-=i,O[D][1][1]-=i,y.push([O[D][0][0],O[D][0][1]],[O[D][1][0],O[D][1][1]])}else if("violin"==t||"fish"==t){if(e[0].length!=i[0].length||e[1].length!=i[1].length||e[0].length!=e[1].length)return!1;for(D=0;D<e[0].length;D++)this.isNumeric([e[0][D],e[1][D],i[0][D],i[1][D]])&&(C=Math.min(C,Math.min(e[0][D],e[1][D])),T=Math.max(T,Math.max(e[0][D],e[1][D])),S=Math.min(S,Math.min(i[0][D],i[1][D])),M=Math.max(M,Math.max(i[0][D],i[1][D])),O.push([[e[0][D],e[1][D]],[i[0][D],i[1][D]]]));e=(C+T)/2,i=(S+M)/2;for(D=0;D<O.length;D++)O[D][0][0]-=e,O[D][0][1]-=e,O[D][1][0]-=i,O[D][1][1]-=i,y.push([O[D][0][0],O[D][0][1]],[O[D][1][0],O[D][1][1]])}else{for(D=0;D<e.length;D++)e[D]&&i[D]&&this.isNumeric([e[D],i[D]])&&(C=Math.min(C,e[D]),T=Math.max(T,e[D]),S=Math.min(S,i[D]),M=Math.max(M,i[D]),O.push([e[D],i[D]]));e="arch"==t?e[1]:(C+T)/2,i="arch"==t?i[1]:(S+M)/2;for(D=0;D<O.length;D++)O[D][0]-=e,O[D][1]-=i,y.push(O[D][0],O[D][1])}break;default:if(!this.isNumeric([e,i,s,a]))return!1;if(c){if(!(O=this.clip(t,[e,i,s,a],d)))return!1;4==O.length?(s=Math.max(1,O[2]),a=Math.max(1,O[3]),e=O[0]+s/2,i=O[1]+a/2):2==O.length&&(e=O[0],i=O[1])}else s=Math.max(1,s),a=Math.max(1,a);x=s/2,v=a/2,b=a/s,A=1.5}switch(t){case"image":var k=Array.isArray(u)?this.backgroundImageMD5:this.getFileName(u);if(!u||!CanvasXpress.cacheImages[k]&&!CanvasXpress.images[u])return k&&"canvasXpress"==k?void 0:this.drawShape("rectangle",e,i,s,a,"rgba(0,0,0,0.5)","rgba(0,0,0,0.5)",o,h,l,c,d,p,g,u,m);this.drawShapeSetShapeStyle(e,i,s,a,r,n,o,h,l,f),CanvasXpress.images[u]?this.drawImage(CanvasXpress.images[u],-x*this.zoom,-v*this.zoom,s*this.zoom,a*this.zoom,!1,!1,!1,!1,r,o,f):this.drawImage(CanvasXpress.cacheImages[k],-x*this.zoom,-v*this.zoom,s*this.zoom,a*this.zoom,!1,!1,!1,!1,r,o,f);break;case"circle":case"sphere":this.drawShapeSetShapeStyle(e,i,s,a,r,n,o,h,l,f),this.isColorTransparent(r,!0)&&this.isColorTransparent(n,!0)||(f.beginPath(),f.arc(0,0,Math.max(0,s/2),0,2*Math.PI,!1),f.closePath(),this.drawShapeFillStroke(r,n,o,f));break;case"drop":case"teardrop":case"marker":var L=.5*(z=2*x/3),I="Map"==this.graphType?3*-z:0;this.drawShapeSetShapeStyle(e,i,s,a,r,n,o,h,l,f),f.beginPath(),f.arc(0,I,Math.max(0,x),0,Math.PI,!0),f.bezierCurveTo(-x,I+x,0,I+L,0,I+3*z),f.bezierCurveTo(0,I+L,x,I+x,x,I),f.closePath(),this.drawShapeFillStroke(r,n,o,f),f.beginPath(),f.arc(0,I,Math.max(0,.3*x),0,2*Math.PI,!0),f.closePath(),this.drawShapeFillStroke("white","black",o,f);break;case"arrow":if(O=[[-x,-v],[x,-v],[x,v],[-x,v]],h){h=!1,this.drawShapeSetShapeStyle(e,i,s,a,r,n,o,h,l,f);var z=a/4;f.beginPath(),f.moveTo(x-a,-v),f.lineTo(x-a,-v-z),f.lineTo(x,0),f.lineTo(x-a,v+z),f.lineTo(x-a,v),f.lineTo(-x,v),f.lineTo(-x,-v),f.closePath(),this.drawShapeFillStroke(r,n,o,f)}else{this.drawShapeSetShapeStyle(e,i,s,a,r,n,o,h,l,f);var N=s/4;f.beginPath(),f.moveTo(-x,-v+s),f.lineTo(-x-N,-v+s),f.lineTo(0,-v),f.lineTo(x+N,-v+s),f.lineTo(x,-v+s),f.lineTo(x,v),f.lineTo(-x,v),f.closePath(),this.drawShapeFillStroke(r,n,o,f)}break;case"box":case"rect":O=[[-x,-v],[x,-v],[x,v],[-x,v]],this.drawShapeSetShapeStyle(Math.round(e),Math.round(i),s,a,r,n,o,h,l,f),f.beginPath(),f.moveTo(-x,-v),f.lineTo(x,-v),f.lineTo(x,v),f.lineTo(-x,v),f.closePath(),this.drawShapeFillStroke(r,n,o,f);break;case"rectangle":O=[[-x,-v],[x,-v],[x,v],[-x,v]],this.drawShapeSetShapeStyle(e,i,s,a,r,n,o,h,l,f),o&&"open"==o?f.strokeRect(-x,-v,s,a):n==r||f.strokeStyle==f.fillStyle?f.fillRect(-x,-v,s,a):(f.fillRect(-x,-v,s,a),f.strokeRect(-x,-v,s,a));break;case"rect2":return this.drawShape("rectangle",e,i,s,s/2,r,n,o,h,l,c,d,p,g,u,m);case"rect3":return this.drawShape("rectangle",e,i,s,s/3,r,n,o,h,l,c,d,p,g,u,m);case"roundrectt":var B=s>this.roundedPolygonRadius&&a>this.roundedPolygonRadius?this.roundedPolygonRadius:s>a?a:s;this.drawShapeSetShapeStyle(e,i,s,a,r,n,o,h,l,f),f.beginPath(),f.moveTo(-x,-v+B),f.lineTo(-x,v),f.lineTo(x,v),f.lineTo(x,-v+B),f.quadraticCurveTo(x,-v,x-B,-v),f.lineTo(-x+B,-v),f.quadraticCurveTo(-x,-v,-x,-v+B),f.closePath(),this.drawShapeFillStroke(r,n,o,f);break;case"roundrectb":B=s>this.roundedPolygonRadius&&a>this.roundedPolygonRadius?this.roundedPolygonRadius:s>a?a:s;this.drawShapeSetShapeStyle(e,i,s,a,r,n,o,h,l,f),f.beginPath(),f.moveTo(-x,-v),f.lineTo(-x,v-B),f.quadraticCurveTo(-x,v,-x+B,v),f.lineTo(x-B,v),f.quadraticCurveTo(x,v,x,v-B),f.lineTo(x,-v),f.lineTo(-x,-v),f.closePath(),this.drawShapeFillStroke(r,n,o,f);break;case"roundrectr":B=s>this.roundedPolygonRadius&&a>this.roundedPolygonRadius?this.roundedPolygonRadius:s>a?a:s;this.drawShapeSetShapeStyle(e,i,s,a,r,n,o,h,l,f),f.beginPath(),f.moveTo(-x,-v),f.lineTo(-x,v),f.lineTo(x-B,v),f.quadraticCurveTo(x,v,x,v-B),f.lineTo(x,-v+B),f.quadraticCurveTo(x,-v,x-B,-v),f.lineTo(-x,-v),f.closePath(),this.drawShapeFillStroke(r,n,o,f);break;case"roundrectl":B=s>this.roundedPolygonRadius&&a>this.roundedPolygonRadius?this.roundedPolygonRadius:s>a?a:s;this.drawShapeSetShapeStyle(e,i,s,a,r,n,o,h,l,f),f.beginPath(),f.moveTo(-x,-v+B),f.lineTo(-x,v-B),f.quadraticCurveTo(-x,v,-x+B,v),f.lineTo(x,v),f.lineTo(x,-v),f.lineTo(-x+B,-v),f.quadraticCurveTo(-x,-v,-x,-v+B),f.closePath(),this.drawShapeFillStroke(r,n,o,f);break;case"roundrecttr":B=s>this.roundedPolygonRadius&&a>this.roundedPolygonRadius?this.roundedPolygonRadius:s>a?a:s;this.drawShapeSetShapeStyle(e,i,s,a,r,n,o,h,l,f),f.beginPath(),f.moveTo(-x,-v),f.lineTo(-x,v),f.lineTo(x,v),f.lineTo(x,-v+B),f.quadraticCurveTo(x,-v,x-B,-v),f.lineTo(-x,-v),f.closePath(),this.drawShapeFillStroke(r,n,o,f);break;case"roundrecttl":B=s>this.roundedPolygonRadius&&a>this.roundedPolygonRadius?this.roundedPolygonRadius:s>a?a:s;this.drawShapeSetShapeStyle(e,i,s,a,r,n,o,h,l,f),f.beginPath(),f.moveTo(-x,-v+B),f.lineTo(-x,v),f.lineTo(x,v),f.lineTo(x,-v),f.lineTo(-x+B,-v),f.quadraticCurveTo(-x,-v,-x,-v+B),f.closePath(),this.drawShapeFillStroke(r,n,o,f);break;case"roundrectbr":B=s>this.roundedPolygonRadius&&a>this.roundedPolygonRadius?this.roundedPolygonRadius:s>a?a:s;this.drawShapeSetShapeStyle(e,i,s,a,r,n,o,h,l,f),f.beginPath(),f.moveTo(-x,-v),f.lineTo(-x,v),f.lineTo(x-B,v),f.quadraticCurveTo(x,v,x,v-B),f.lineTo(x,-v),f.lineTo(-x,-v),f.closePath(),this.drawShapeFillStroke(r,n,o,f);break;case"roundrectbl":B=s>this.roundedPolygonRadius&&a>this.roundedPolygonRadius?this.roundedPolygonRadius:s>a?a:s;this.drawShapeSetShapeStyle(e,i,s,a,r,n,o,h,l,f),f.beginPath(),f.moveTo(-x,-v),f.lineTo(-x,v-B),f.quadraticCurveTo(-x,v,-x+B,v),f.lineTo(x,v),f.lineTo(x,-v),f.lineTo(-x,-v),f.closePath(),this.drawShapeFillStroke(r,n,o,f);break;case"roundrecto":B=s<a?x:v;this.drawShapeSetShapeStyle(e,i,s,a,r,n,o,h,l,f),f.beginPath(),s<a?(f.arc(0,-v+B,B,Math.PI,0),f.lineTo(x,v-B),f.arc(0,v-B,B,0,Math.PI),f.lineTo(-x,-v+B)):(f.arc(-x+B,0,B,.5*Math.PI,1.5*Math.PI),f.lineTo(x-B,-v),f.arc(x-B,0,B,1.5*Math.PI,.5*Math.PI),f.lineTo(-x+B,v)),f.closePath(),this.drawShapeFillStroke(r,n,o,f);break;case"roundrect":case"roundrect2":case"roundrectd":B=s>this.roundedPolygonRadius&&a>this.roundedPolygonRadius?this.roundedPolygonRadius:s>a?a/4:s/4;"roundrect2"==t&&(B*=4),this.drawShapeSetShapeStyle(e,i,s,a,r,n,o,h,l,f),f.beginPath(),f.moveTo(-x,-v+B),f.lineTo(-x,v-B),f.quadraticCurveTo(-x,v,-x+B,v),f.lineTo(x-B,v),f.quadraticCurveTo(x,v,x,v-B),f.lineTo(x,-v+B),f.quadraticCurveTo(x,-v,x-B,-v),f.lineTo(-x+B,-v),f.quadraticCurveTo(-x,-v,-x,-v+B),f.closePath(),this.drawShapeFillStroke(r,n,o,f),"roundrectd"==t&&s>this.roundedPolygonRadius&&a>this.roundedPolygonRadius&&(x=(s-=this.roundedPolygonRadius)/2,v=(a-=this.roundedPolygonRadius)/2,f.beginPath(),f.moveTo(-x,-v+B),f.lineTo(-x,v-B),f.quadraticCurveTo(-x,v,-x+B,v),f.lineTo(x-B,v),f.quadraticCurveTo(x,v,x,v-B),f.lineTo(x,-v+B),f.quadraticCurveTo(x,-v,x-B,-v),f.lineTo(-x+B,-v),f.quadraticCurveTo(-x,-v,-x,-v+B),f.closePath(),this.drawShapeFillStroke(r,n,o,f));break;case"brace":B=s>a?a/4:s/4;this.drawShapeSetShapeStyle(e,i,s,a,r,n,o,h,l,f),f.beginPath(),f.moveTo(-x,-v),f.bezierCurveTo(-x,0,0,0,0,v),f.bezierCurveTo(0,0,x,0,x,-v),this.drawShapeFillStroke(r,n,o,f);break;case"square":O=[[-x,-x],[x,-x],[x,x],[-x,x]],this.drawShapeSetShapeStyle(e,i,s,a,r,n,o,h,l,f),this.drawShapeDraw(O),this.drawShapeFillStroke(r,n,o,f);break;case"triangle":if(s==a)return this.drawShape("equilateral",e,i,s,a,r,n,o,h,l,c,d,p,g,u,m);O=[[0,-v],[x,v],[-x,v]],this.drawShapeSetShapeStyle(e,i,s,a,r,n,o,h,l,f),this.drawShapeDraw(O),this.drawShapeFillStroke(r,n,o,f);break;case"triangle2":if(s==a)return this.drawShape("equilateral2",e,i,s,a,r,n,o,h,l,c,d,p,g,u,m);O=[[0,v],[x,-v],[-x,-v]],this.drawShapeSetShapeStyle(e,i,s,a,r,n,o,h,l,f),this.drawShapeDraw(O),this.drawShapeFillStroke(r,n,o,f);break;case"equilateral":var P=(B=s*Math.sqrt(3)/6)/2;Math.sqrt(B*B-P*P);O=[[0,-v],[x,v],[-x,v]],this.drawShapeSetShapeStyle(e,i,s,a,r,n,o,h,l,f),this.drawShapeDraw(O),this.drawShapeFillStroke(r,n,o,f);break;case"equilateral2":P=(B=s*Math.sqrt(3)/6)/2,Math.sqrt(B*B-P*P);O=[[0,v],[x,-v],[-x,-v]],this.drawShapeSetShapeStyle(e,i,s,a,r,n,o,h,l,f),this.drawShapeDraw(O),this.drawShapeFillStroke(r,n,o,f);break;case"diamond":case"rhombus":O=[[0,-v],[x,0],[0,v],[-x,0]],this.drawShapeSetShapeStyle(e,i,s,a,r,n,o,h,l,f),this.drawShapeDraw(O),this.drawShapeFillStroke(r,n,o,f);break;case"hexagon":for(var R=2*Math.PI/6,O=[],X=0;X<6;X++)O.push([x*Math.sin(R*X),v*Math.cos(R*X)]);this.drawShapeSetShapeStyle(e,i,s,a,r,n,o,h,l,f),this.drawShapeDraw(O),this.drawShapeFillStroke(r,n,o,f);break;case"pentagon":var F=s/3;this.drawShapeSetShapeStyle(e,i,s,a,r,n,o,h,l,f),f.beginPath();for(D=0;D<5;D++){var _=D/5*Math.PI*2+-Math.PI/2;f.lineTo(Math.cos(_)*F,Math.sin(_)*F)}f.closePath(),this.drawShapeFillStroke(r,n,o,f);break;case"octagon":var E=s/4,V=a/4;O=[[-E,-v],[E,-v],[x,-V],[x,V],[E,v],[-E,v],[-x,V],[-x,-V]],this.drawShapeSetShapeStyle(e,i,s,a,r,n,o,h,l,f),this.drawShapeDraw(O),this.drawShapeFillStroke(r,n,o,f);break;case"oval":case"ovald":this.drawShapeSetShapeStyle(e,i,s,a,r,n,o,h,l,f),this.saveCanvas(f),this.scaleCanvas(1,b,f),f.beginPath(),f.arc(0,0,Math.max(0,s/2),0,2*Math.PI,!0),f.closePath(),this.restoreCanvas(f),this.drawShapeFillStroke(r,n,o,f),"ovald"==t&&(s-=2*this.margin,b=(a-=2*this.margin)/s,this.saveCanvas(f),this.scaleCanvas(1,b,f),f.beginPath(),f.arc(0,0,Math.max(0,s/2),0,2*Math.PI,!0),f.closePath(),this.restoreCanvas(f),this.drawShapeFillStroke(r,n,o,f));break;case"oval2":return this.drawShape("oval",e,i,s,s/2,r,n,o,h,l,c,d,p,g,u,m);case"oval3":return this.drawShape("oval",e,i,s,s/3,r,n,o,h,l,c,d,p,g,u,m);case"arc":this.drawShapeSetShapeStyle(e,i,s,a,r,n,o,h,l,f),this.saveCanvas(f),this.scaleCanvas(1,b,f),f.beginPath(),f.arc(0,0,Math.max(0,s/2),0,Math.PI,!0),"open"!=o&&f.closePath(),this.restoreCanvas(f),this.drawShapeFillStroke(r,n,o,f);break;case"arc2":var H=a*Math.cos(p),G=a*Math.sin(p),q=a*Math.cos(g),j=a*Math.sin(g),U=this.shortenLine(0,0,H,G,0,s,"line"),Y=this.shortenLine(0,0,q,j,0,s,"line");this.drawShapeSetShapeStyle(e,i,s,a,r,n,o,h,l,f),f.beginPath(),f.moveTo(U[2],U[3]),f.lineTo(H,G),f.arc(0,0,Math.max(0,a),p,g,!1),f.lineTo(Y[2],Y[3]),f.arc(0,0,Math.max(0,a-s),g,p,!0),f.closePath(),this.drawShapeFillStroke(r,n,o,f);break;case"arc3":this.drawShapeSetShapeStyle(e,i,s,a,r,n,o,h,l,f),this.saveCanvas(f),this.scaleCanvas(1,b,f),f.beginPath(),f.arc(0,0,Math.max(0,s/2),0,Math.PI,!0),this.restoreCanvas(f),this.drawShapeFillStroke(r,n,o,f);break;case"arch":this.drawShapeSetShapeStyle(e,i,s,a,r,n,o,h,l,f),f.beginPath(),f.moveTo(O[0][0],O[0][1]),f.quadraticCurveTo(O[1][0],O[1][1],O[2][0],O[2][1]),f.arc(0,0,Math.max(0,a[0]),s[3],s[2],!0),f.quadraticCurveTo(O[4][0],O[4][1],O[5][0],O[5][1]),f.arc(0,0,Math.max(0,a[1]),s[1],s[0],!0),f.closePath(),this.drawShapeFillStroke(r,n,o,f);break;case"path":this.drawShapeSetShapeStyle(e,i,s,a,r,n,o,h,l,f),this.drawShapeDraw(O,"open"==o),this.drawShapeFillStroke(r,n,o,f);break;case"roundpolygon":this.drawShapeSetShapeStyle(e,i,s,a,r,n,o,h,l,f),O=this.roundedPolygon(O),f.beginPath();for(D=0;D<O.length;D++)f.arc(O[D][0],O[D][1],O[D][2],O[D][3],O[D][4]);f.closePath(),this.drawShapeFillStroke(r,n,o,f);break;case"polygon":this.drawShapeSetShapeStyle(e,i,s,a,r,n,o,h,l,f),this.drawShapeDraw(O,"open"==o&&r),this.drawShapeFillStroke(r,n,o,f);break;case"spline":var W=[],$=[],Q=[];$.push(y.shift()),$.push(y.shift()),Q.push(y.pop()),Q.unshift(y.pop());var K=y.length;for(D=0;D<K-4;D+=2)W=W.concat(this.splineControlPoint(y[D],y[D+1],y[D+2],y[D+3],y[D+4],y[D+5]));this.drawShapeSetShapeStyle(e,i,s,a,r,n,o,h,l,f),f.beginPath(),f.moveTo($[0],$[1]),f.lineTo(y[0],y[1]),f.quadraticCurveTo(W[0],W[1],y[2],y[3]);for(D=2;D<K-5;D+=2)f.bezierCurveTo(W[2*D-2],W[2*D-1],W[2*D],W[2*D+1],y[D+2],y[D+3]);f.quadraticCurveTo(W[2*K-10],W[2*K-9],y[K-2],y[K-1]),f.lineTo(Q[0],Q[1]),f.lineTo($[0],$[1]),this.drawShapeFillStroke(r,n,o,f);break;case"hull":K=1;for(var J=[];y.length>1;)J.push([y.shift(),y.shift()]);W=this.hullControlPoints(J);var Z=[[J[0][0],J[0][1],W[W.length-1][0],W[W.length-1][1],W[0][0],W[0][1],J[1][0],J[1][1]]];for(D=1;D<J.length-1;D++)Z.push([J[D][0],J[D][1],W[K][0],W[K][1],W[K+1][0],W[K+1][1],J[D+1][0],J[D+1][1]]),K+=2;Z.push([J[D][0],J[D][1],W[K][0],W[K][1],W[K+1][0],W[K+1][1],J[0][0],J[0][1]]),this.drawShapeSetShapeStyle(e,i,s,a,r,n,o,h,l,f),f.beginPath(),f.moveTo(Z[0][0],Z[0][1]);for(D=0;D<Z.length;D++)f.bezierCurveTo(Z[D][2],Z[D][3],Z[D][4],Z[D][5],Z[D][6],Z[D][7]);this.drawShapeFillStroke(r,n,o,f);break;case"violin":K=y.length;this.drawShapeSetShapeStyle(e,i,s,a,r,n,o,h,l,f),f.beginPath(),f.moveTo(y[0][0],y[1][0]);for(D=2;D<K;D+=2)f.lineTo(y[D][0],y[D+1][0]);f.lineTo(y[K-2][1],y[K-1][1]);for(D=2;D<K;D+=2){var tt=K-1-D;f.lineTo(y[tt-1][1],y[tt][1])}f.lineTo(y[0][0],y[1][0]),this.drawShapeFillStroke(r,n,o,f);break;case"fish":K=y.length;this.drawShapeSetShapeStyle(e,i,s,a,r,n,o,h,l,f),f.beginPath(),f.moveTo(y[0][0],y[1][0]);for(D=2;D<K;D+=2){var et=(y[D-2][0]+y[D][0])/2;f.bezierCurveTo(et,y[D-1][0],et,y[D+1][0],y[D][0],y[D+1][0])}f.lineTo(y[K-2][1],y[K-1][1]);for(D=2;D<K;D+=2){et=(y[(tt=K-1-D)+1][1]+y[tt-1][1])/2;f.bezierCurveTo(et,y[tt+2][1],et,y[tt][1],y[tt-1][1],y[tt][1])}f.lineTo(y[0][0],y[1][0]),this.drawShapeFillStroke(r,n,o,f);break;case"confidence":K=y.length,W=[];var it=[];for(D=0;D<K-4;D+=2){tt=K-1-D;W=W.concat(this.splineControlPoint(y[D][0],y[D+1][0],y[D+2][0],y[D+3][0],y[D+4][0],y[D+5][0])),it=it.concat(this.splineControlPoint(y[tt-1][1],y[tt][1],y[tt-3][1],y[tt-2][1],y[tt-5][1],y[tt-4][1]))}this.drawShapeSetShapeStyle(e,i,s,a,r,n,o,h,l,f),f.beginPath(),f.moveTo(y[0][0],y[1][0]),f.quadraticCurveTo(W[0],W[1],y[2][0],y[3][0]);for(D=2;D<K-5;D+=2)f.bezierCurveTo(W[2*D-2],W[2*D-1],W[2*D],W[2*D+1],y[D+2][0],y[D+3][0]);f.quadraticCurveTo(W[2*K-10],W[2*K-9],y[K-2][0],y[K-1][0]),f.lineTo(y[K-2][1],y[K-1][1]),f.quadraticCurveTo(it[0],it[1],y[K-4][1],y[K-3][1]);for(D=2;D<K-5;D+=2){tt=K-1-D;f.bezierCurveTo(it[2*D-2],it[2*D-1],it[2*D],it[2*D+1],y[tt-3][1],y[tt-2][1])}f.quadraticCurveTo(it[2*K-10],it[2*K-9],y[0][1],y[1][1]),f.lineTo(y[0][0],y[1][0]),this.drawShapeFillStroke(r,n,o,f);break;case"bezier":this.drawShapeSetShapeStyle(e,i,s,a,r,n,o,h,l,f),f.beginPath(),f.moveTo(y[0],y[1]),f.bezierCurveTo(y[2],y[3],y[4],y[5],y[6],y[7]),f.lineTo(y[6],y[7]+a),f.bezierCurveTo(y[4],y[5]+a,y[2],y[3]+a,y[0],y[1]+a),f.lineTo(y[0],y[1]),this.drawShapeFillStroke(r,n,o,f);break;case"ellipse":var st=.5522848*x,at=.5522848*v;this.drawShapeSetShapeStyle(e,i,s,a,r,n,o,h,l,f),f.beginPath(),f.moveTo(0,v),f.bezierCurveTo(0,v-at,x-st,0,x,0),f.bezierCurveTo(x+st,0,s,v-at,s,v),f.bezierCurveTo(s,v+at,x+st,a,x,a),f.bezierCurveTo(x-st,a,0,v+at,0,v),f.closePath(),this.drawShapeFillStroke(r,n,o,f);break;case"ellipse2":return this.drawShape("ellipse",e,i,s,s/2,r,n,o,h,l,c,d,p,g,u,m);case"ellipse3":return this.drawShape("ellipse",e,i,s,s/3,r,n,o,h,l,c,d,p,g,u,m);case"plus":O=[[-A,-v],[A,-v],[A,-A],[x,-A],[x,A],[A,A],[A,v],[-A,v],[-A,A],[-x,A],[-x,-A],[-A,-A],[-A,-v]],this.drawShapeSetShapeStyle(e,i,s,a,r,n,o,h,l,f),this.drawShapeDraw(O),this.drawShapeFillStroke(r,n,o,f);break;case"minus":O=[[-x,-A],[x,-A],[x,A],[-x,A],[-x,-A]],this.drawShapeSetShapeStyle(e,i,s,a,r,n,o,h,l,f),this.drawShapeDraw(O),this.drawShapeFillStroke(r,n,o,f);break;case"mdavid":F=s/3;var rt=Math.PI/6;this.drawShapeSetShapeStyle(e,i,s,a,r,n,o,h,l,f),this.saveCanvas(f),this.scaleCanvas(.8,.8,f),this.rotateCanvas(.45*ot,f),f.beginPath(),f.moveTo(F,0);for(D=0;D<11;D++)this.rotateCanvas(rt,f),D%2==0?f.lineTo(F/.55,0):f.lineTo(F,0);f.closePath(),this.restoreCanvas(f),this.drawShapeFillStroke(r,n,o,f);break;case"star":var nt=s/4,ot=Math.PI/5;this.drawShapeSetShapeStyle(e,i,s,a,r,n,o,h,l,f),this.saveCanvas(f),this.scaleCanvas(.7,.7,f),this.rotateCanvas(.45*ot,f),f.beginPath(),f.moveTo(nt,0);for(D=0;D<9;D++)this.rotateCanvas(ot,f),D%2==0?f.lineTo(nt/.35,0):f.lineTo(nt,0);f.closePath(),this.restoreCanvas(f),this.drawShapeFillStroke(r,n,o,f);break;case"pie":void 0===p&&(p=0),void 0===g&&(g=2*Math.PI),this.drawShapeSetShapeStyle(e,i,s,a,r,n,o,h,l,f),f.beginPath(),f.arc(0,0,Math.max(0,s/2),p,g,!1),f.lineTo(0,0),f.closePath(),this.drawShapeFillStroke(r,n,o,f);break;case"pie0":return this.drawShape("pie",e,i,s,s/2,r,n,o,h,l,c,d,0,Math.PI/5,u,m);case"pie1":return this.drawShape("pie",e,i,s,s/2,r,n,o,h,l,c,d,0,Math.PI/3.5,u,m);case"pie2":return this.drawShape("pie",e,i,s,s/2,r,n,o,h,l,c,d,0,Math.PI/2,u,m);case"pie3":return this.drawShape("pie",e,i,s,s/2,r,n,o,h,l,c,d,0,Math.PI/1.5,u,m);case"pie4":return this.drawShape("pie",e,i,s,s/2,r,n,o,h,l,c,d,0,Math.PI,u,m);case"pie5":return this.drawShape("pie",e,i,s,s/2,r,n,o,h,l,c,d,0,1.2*Math.PI,u,m);case"pie6":return this.drawShape("pie",e,i,s,s/2,r,n,o,h,l,c,d,0,1.4*Math.PI,u,m);case"pie7":return this.drawShape("pie",e,i,s,s/2,r,n,o,h,l,c,d,0,1.6*Math.PI,u,m);case"pie8":return this.drawShape("pie",e,i,s,s/2,r,n,o,h,l,c,d,0,1.8*Math.PI,u,m);case"pie9":return this.drawShape("pie",e,i,s,s/2,r,n,o,h,l,c,d,0,2*Math.PI,u,m);case"pacman":return this.drawShape("pie",e,i,s,s/2,r,n,o,h,l,c,d,1*Math.PI/4,7*Math.PI/4,u,m);case"pacman2":return this.drawShape("pie",e,i,s,s/2,r,n,o,h,l,c,d,5*Math.PI/4,3*Math.PI/4,u,m);case"pch0":this.drawShape("square",e,i,s,s,r,n,"open",!1,l,c,d,p,g,u,m);break;case"pch1":this.drawShape("circle",e,i,s,s,r,n,"open",!1,l,c,d,p,g,u,m);break;case"pch2":this.drawShape("equilateral",e,i,s,s,r,n,"open",!1,l,c,d,p,g,u,m);break;case"pch3":this.drawShapeSetShapeStyle(e,i,s,a,r,n,"open",!1,l,f),f.moveTo(0,-v),this.lineTo(0,-v,0,v,f),f.stroke(),f.moveTo(-x,0),this.lineTo(-x,0,x,0,f),f.stroke(),this.drawShapeFillStroke(r,n,o,f);break;case"pch4":this.drawShapeSetShapeStyle(e,i,s,a,r,n,"open",!1,l,f),f.moveTo(-x,-v),this.lineTo(-x,-v,x,v,f),f.stroke(),f.moveTo(x,-v),this.lineTo(x,-v,-x,v,f),f.stroke(),this.drawShapeFillStroke(r,n,o,f);break;case"pch5":this.drawShape("diamond",e,i,s,s,r,n,"open",!1,l,c,d,p,g,u,m);break;case"pch6":this.drawShape("equilateral2",e,i,s,s,r,n,"open",!1,l,c,d,p,g,u,m);break;case"pch7":this.drawShape("pch0",e,i,s,a,r,n,"open",!1,l,c,d,p,g,u,m),this.drawShape("pch4",e,i,s,a,r,n,"open",!1,l,c,d,p,g,u,m);break;case"pch8":this.drawShape("pch3",e,i,s,a,r,n,"open",!1,l,c,d,p,g,u,m),this.drawShape("pch4",e,i,s,a,r,n,"open",!1,l,c,d,p,g,u,m);break;case"pch9":this.drawShape("pch3",e,i,s,a,r,n,"open",!1,l,c,d,p,g,u,m),this.drawShape("pch5",e,i,s,a,r,n,"open",!1,l,c,d,p,g,u,m);break;case"pch10":this.drawShape("pch1",e,i,s,a,r,n,"open",!1,l,c,d,p,g,u,m),this.drawShape("pch3",e,i,s,a,r,n,"open",!1,l,c,d,p,g,u,m);break;case"pch11":this.drawShape("pch2",e,i,s,a,r,n,"open",!1,l,c,d,p,g,u,m),this.drawShape("pch6",e,i,s,a,r,n,"open",!1,l,c,d,p,g,u,m);break;case"pch12":this.drawShape("pch0",e,i,s,a,r,n,"open",!1,l,c,d,p,g,u,m),this.drawShape("pch3",e,i,s,a,r,n,"open",!1,l,c,d,p,g,u,m);break;case"pch13":this.drawShape("pch1",e,i,s,a,r,n,"open",!1,l,c,d,p,g,u,m),this.drawShape("pch4",e,i,s,a,r,n,"open",!1,l,c,d,p,g,u,m);break;case"pch14":this.drawShape("pch0",e,i,s,a,r,n,"open",!1,l,c,d,p,g,u,m),this.drawShape("pch6",e,i,s,a,r,n,"open",!1,l,c,d,p,g,u,m);break;case"pch15":case"pch22":this.drawShape("square",e,i,s,s,r||this.foreground,n,"closed",!1,l,c,d,p,g,u,m);break;case"pch16":case"pch21":this.drawShape("circle",e,i,s,s,r||this.foreground,n,"closed",!1,l,c,d,p,g,u,m);break;case"pch17":case"pch24":this.drawShape("equilateral",e,i,s,s,r||this.foreground,n,"closed",!1,l,c,d,p,g,u,m);break;case"pch18":case"pch23":this.drawShape("diamond",e,i,s,s,r||this.foreground,n,"closed",!1,l,c,d,p,g,u,m);break;case"pch19":this.drawShape("circle",e,i,s+2,s+2,r||this.foreground,n,"closed",!1,l,c,d,p,g,u,m);break;case"pch20":this.drawShape("circle",e,i,Math.max(2,s-2),Math.max(2,s-2),r||this.foreground,n,"closed",!1,l,c,d,p,g,u,m);break;case"pch25":this.drawShape("equilateral2",e,i,s,s,r||this.foreground,n,"closed",!1,l,c,d,p,g,u,m);break;default:this.drawShapeSetShapeStyle(e,i,s,a,r,n,o,h,l,f)}"box"==t||"rect"==t?this.drawShapeRestore(Math.round(e),Math.round(i),h,f):this.drawShapeRestore(e,i,h,f)},this.flipImage=function(t){for(var e=t.naturalWidth,i=t.naturalHeight,s=this.imageToCanvas(t),a=s.ctx.getImageData(0,0,e,i).data,r=0;r<i;r++)for(var n=i-(r+1),o=0;o<e;o++){var h=parseInt(255*a[n][o][0]),l=parseInt(255*a[n][o][1]),c=parseInt(255*a[n][o][2]),d=a[n][o][3]?parseInt(255*a[n][o][3]):255;s.ctx.fillStyle="rgba("+h+","+l+","+c+","+d+")",s.ctx.fillRect(o,r,1,1)}return s.toDataURL("img/png")},this.imageToCanvas=function(t){var e=this.$cX("canvas",{width:t.naturalWidth,height:t.naturalHeight});return e.ctx=this.get2DCanvasContext(e),e.ctx.drawImage(t,0,0),e},this.colorizeImage=function(t,e){var i=this.imageToCanvas(t),s=!!e&&this.colorAsArray(e),a=i.ctx.getImageData(0,0,t.naturalWidth,t.naturalHeight),r=a.data;for(t=0;t<r.length;t+=4){var n=.34*r[t]+.5*r[t+1]+.16*r[t+2];n>220?(n=255,r[t]=n,r[t+1]=n,r[t+2]=n,r[t+3]=0):(r[t]=e?s[0]:n,r[t+1]=e?s[1]:n,r[t+2]=e?s[2]:n)}return i.ctx.putImageData(a,0,0),i},this.createImage=function(t){var e=t.length,i=t[0].length,s=this.$cX("canvas",{width:i,height:e});s.ctx=this.get2DCanvasContext(s),s.ctx.clearRect(0,0,i,e);for(var a=0;a<e;a++)for(var r=e-(a+1),n=0;n<i;n++){var o=parseInt(255*t[r][n][0]),h=parseInt(255*t[r][n][1]),l=parseInt(255*t[r][n][2]),c=t[r][n][3]?parseInt(255*t[r][n][3]):255;s.ctx.fillStyle="rgba("+o+","+h+","+l+","+c+")","visium"==this.scatterType&&this.visiumFlip?s.ctx.fillRect(n,a,1,1):s.ctx.fillRect(n,r,1,1)}return"visium"==this.scatterType&&(this.backgroundImageRows=e,this.backgroundImageCols=i),s.toDataURL("img/png")},this.drawImage=function(t,e,i,s,a,r,n,o,h,l,c,d){d||(d=this.getCanvasContext());try{if(e=parseInt(Math.round(e||0)),i=parseInt(Math.round(i||0)),s=parseInt(Math.round(s||t.naturalWidth)),a=parseInt(Math.round(a||t.naturalHeight)),"visium"==this.scatterType)if(this.visiumFlip){var p=this.xAxisMin,g=this.xAxisMax,u=t.naturalHeight-this.yAxisMax,m=t.naturalHeight-this.yAxisMin,f=s/(A=g-p),y=a/(w=u-m),x=(s-A)/2,v=(a-w)/2,b=this.yAxisMax;d.scale(f,y),d.drawImage(t,p,b,A,w,e+x,i+v,A,w),d.scale(1/f,1/y)}else{var A,w;p=this.xAxisMin,g=this.xAxisMax,u=this.yAxisMax,m=this.yAxisMin,f=s/(A=g-p),y=a/(w=u-m),x=(s-A)/2,v=(a-w)/2,b=t.naturalHeight-this.yAxisMax;d.scale(f,y),d.drawImage(t,p,b,A,w,e+x,i+v,A,w),d.scale(1/f,1/y)}else if(r&&n&&o&&h)r=parseInt(Math.round(r)),n=parseInt(Math.round(n)),o=parseInt(Math.round(o)),h=parseInt(Math.round(h)),d.drawImage(t,e,i,s,a,r,n,o,h),d.drawImage(this.colorizeImage(t,l),e,i,s,a,r,n,o,h);else if(l&&"b&w"==l)d.drawImage(this.colorizeImage(t),e,i,s,a);else if(l)d.drawImage(t,e,i,s,a),d.drawImage(this.colorizeImage(t,l),e,i,s,a);else if("round"==c){var C=Math.max(s,a)/2;this.saveCanvas(d),d.arc(e+C,i+C,C,0,2*Math.PI),d.clip(),d.drawImage(t,e,i,s,a),this.restoreCanvas(d),this.setClipArea([0,0,0,0],d),this.restoreCanvas(d)}else d.drawImage(t,e,i,s,a)}catch(c){console.log(c);var T=this;setTimeout((function(){T.draw({func:"drawImage",par:[t,e,i,s,a,r,n,o,h,l]})}),100)}},this.trackTransforms=function(t){t||(t=this.getCanvasContext());var e=document.createElementNS("http://www.w3.org/2000/svg","svg"),i=e.createSVGMatrix();t.getTransform=function(){return i};var s=[],a=t.save;t.save=function(){return s.push(i.translate(0,0)),a.call(t)};var r=t.restore;t.restore=function(){return i=s.pop(),r.call(t)};var n=t.scale;t.scale=function(e,s){return i=i.scaleNonUniform(e,s),n.call(t,e,s)};var o=t.rotate;t.rotate=function(e){return i=i.rotate(180*e/Math.PI),o.call(t,e)};var h=t.translate;t.translate=function(e,s){return i=i.translate(e,s),h.call(t,e,s)};var l=t.transform;t.transform=function(s,a,r,n,o,h){var c=e.createSVGMatrix();return c.a=s,c.b=a,c.c=r,c.d=n,c.e=o,c.f=h,i=i.multiply(c),l.call(t,s,a,r,n,o,h)};var c=t.setTransform;t.setTransform=function(e,s,a,r,n,o){return i.a=e,i.b=s,i.c=a,i.d=r,i.e=n,i.f=o,c.call(t,e,s,a,r,n,o)};var d=e.createSVGPoint();t.transformedPoint=function(t,e){return d.x=t,d.y=e,d.matrixTransform(i.inverse())}},this.setGlobalCompositionOperation=function(t,e){!CanvasXpress.system.isIE&&t&&(e||(e=this.getCanvasContext()),e.globalCompositeOperation=t,this.meta.state.globalCompositeOperation=t)},this.rectangleClear=function(t,e,i,s,a){a||(a=this.getCanvasContext()),a.clearRect(t,e,i,s)},this.translateCanvas=function(t,e,i){i||(i=this.getCanvasContext()),i.translate(t,e),this.meta.state.translate[0]+=t,this.meta.state.translate[1]+=e},this.rotateCanvas=function(t,e){e||(e=this.getCanvasContext()),e.rotate(t),this.meta.state.rotate[0]+=t},this.scaleCanvas=function(t,e,i){i||(i=this.getCanvasContext()),i.scale(t,e),this.meta.state.scale[0]*=t,this.meta.state.scale[1]*=e},this.saveCanvas=function(t){t||(t=this.getCanvasContext()),t.save(),this.meta.state.save++,this.meta.state.last={translate:[this.meta.state.translate[0],this.meta.state.translate[1]],scale:[this.meta.state.scale[0],this.meta.state.scale[1]],rotate:[this.meta.state.rotate[0]]}},this.restoreCanvas=function(t){t||(t=this.getCanvasContext()),t.restore(),this.meta.state.translate[0]=this.meta.state.last.translate[0],this.meta.state.translate[1]=this.meta.state.last.translate[1],this.meta.state.scale[0]=this.meta.state.last.scale[0],this.meta.state.scale[1]=this.meta.state.last.scale[1],this.meta.state.rotate[0]=this.meta.state.last.rotate[0],this.meta.state.save--}},CanvasXpress.prototype.initRangeAlgorithms=function(){this.approxNumber=function(t){null==t&&(t=0);var e=t,i=t.toString(),s=i.indexOf("999999"),a=i.indexOf("000000"),r=i.indexOf("."),n=s>=0&&r<s?s:a>=0?a:null;return null!=n?(e=i.substring(0,n),f=Math.pow(10,e.length-(e.indexOf(".")+1)),Number(Math.round(Number(i)*f)/f)):Number(i)},this.heckbert=function(t,e,i){var s=function(t,e){var i=Math.floor(Math.log(t)/Math.LN10),s=t/Math.pow(10,i);return(e?s<1.5?1:s<3?2:s<7?5:10:s<1?1:s<2?2:s<5?5:10)*Math.pow(10,i)};t>e?(t=e,t=e):e-t<1e-8&&(e+=.1);for(var a=[],r=s(e-t,!1),n=s(r/(i-1),!0),o=Math.floor(t/n)*n,h=Math.ceil(e/n)*n,l=o;l<=h;l+=n)a.push(this.approxNumber(l));if(a[0]==a[a.length-1])for(a=[],l=o;l<=h;l+=n)a.push(l);return this.cleanVals(a)},this.wilkinson=function(t,e,i){var s=function(t,e,i,s){for(var a=[10,1,5,2,2.5,3,4,1.5,7,6,8,9],r=e-t,n=i-1,o=1-Math.abs(i-s)/s,h=r/n,l=Math.floor(Math.log(h)/Math.LN10),c=Math.pow(10,l),d=null,p=0;p<a.length;p++){var g=a[p]*c,u=Math.floor(t/g)*g,m=u+n*g;if(u<=t&&m>=e){var f=(e-t)/(m-u);if(f>.8){var y=o+(1-(p-(u<=0&&m>=0?1:0))/a.length)+f;(null==d||y>d.score)&&(d={lmin:u,lmax:m,lstep:g,score:y})}}}return d||(d={lmin:t,lmax:e,lstep:1,score:0}),d};t>e?(t=e,t=e):e-t<1e-8&&(e+=.1);for(var a=[],r=null,n=[],o=Math.max(Math.floor(i/2),2);o<=Math.ceil(6*i);o++)n.push(o);for(o=0;o<n.length;o++){var h=s(t,e,n[o],i);(null!=h&&null==r||h&&r&&h.score>r.score)&&(r=h)}for(o=r.lmin;o<=r.lmax;o+=r.lstep)a.push(this.approxNumber(o));if(a[0]==a[a.length-1])for(a=[],o=r.lmin;o<=r.lmax;o+=r.lstep)a.push(o);return this.cleanVals(a)},this.wilkinsonExtended=function(t,e,i,s){var a=222e-16,r=function(t,e){for(var i=0;i<e.length;i++)if(t==e[i])return i},n=function(t,e,i,s,n,o){var h=e.length;return 1-r(t,e)/(h-1)-i+((s%o<a||o-s%o<a)&&s<=0&&n>=0?1:0)},o=function(t,e,i){var s=e.length;return 1-r(t,e)/(s-1)-i+1},h=function(t,e,i,s){return 1-.5*(Math.pow(e-s,2)+Math.pow(t-i,2))/Math.pow(.1*(e-t),2)},l=function(t,e,i){var s=e-t;if(i>s){var a=(i-s)/2;return 1-.5*(Math.pow(a,2)+Math.pow(a,2))/Math.pow(.1*s,2)}return 1},c=function(t,e,i,s,a,r){var n=(t-1)/(r-a),o=(e-1)/(Math.max(r,s)-Math.min(i,a));return 2-Math.max(n/o,o/n)},d=function(t,e){return t>=e?2-(t-1)/(e-1):1},p=[1,5,2,2.5,4,3],g=[.25,.2,.5,.05],u=p.length,m={score:-2},f=[];if(t>e){var y=t;t=e,e=y}else e-t<1e-8&&(e+=.1);if(e-t<a){for(var x=0;x<=i;x++)f.push(t);return f}for(var v=1;v<Number.POSITIVE_INFINITY;){for(x=0;x<u;x++){var b=p[x],A=o(b,p,v);if(g[0]*A+g[1]+g[2]+g[3]<m.score){v=Number.POSITIVE_INFINITY;break}for(var w=2;w<Number.POSITIVE_INFINITY;){var C=d(w,i);if(g[0]*A+g[1]+g[2]*C+g[3]<m.score)break;for(var T=(e-t)/(w+1)/v/b,S=Math.ceil(Math.log(T)/Math.LN10);S<Number.POSITIVE_INFINITY;){var M=v*b*Math.pow(10,S),D=l(t,e,M*(w-1));if(g[0]*A+g[1]*D+g[2]*C+g[3]<m.score)break;var k=Math.floor(e/M)*v-(w-1)*v,L=Math.ceil(t/M)*v;if(k>L)S++;else{for(var I=k;I<=L;I++){var z=I*(M/v),N=z+M*(w-1),B=M,P=n(b,p,v,z,N,B),R=h(t,e,z,N),O=c(w,i,t,e,z,N),X=g[0]*P+g[1]*R+g[2]*O+g[3];X>m.score&&(!s||z<=t&&N>=e)&&(m={lmin:z,lmax:N,lstep:B,score:X})}S++}}w++}}v++}for(x=m.lmin;x<=m.lmax;x+=m.lstep)f.push(this.approxNumber(x));if(f[0]==f[f.length-1])for(f=[],x=m.lmin;x<=m.lmax;x+=m.lstep)f.push(x);return this.cleanVals(f)},this.rPrettyOLD=function(t,e,i){if(t>e){var s=e;e=t,t=s}else e-t<1e-8&&(e+=.1);var a,r,n=[],o=Math.floor(i)-1,h=Math.floor(o%3),l=1.5,c=2.75,d=e-t;0==d&&0==e?(a=1,r=!0):r=d<(a=Math.max(Math.abs(t),Math.abs(e)))*.4*Math.max(1,o)*1e-7*3,r?(a>10&&(a=9+a/10),a*=.75,h>1&&(a/=h)):(a=d,o>1&&(a/=o)),a<20*1e-7&&(a=20*1e-7);var p=Math.pow(10,Math.floor(Math.log(a)/Math.LN10)),g=p;2*p-a<l*(a-g)&&5*p-a<c*(a-(g=2*p))&&10*p-a<l*(a-(g=5*p))&&(g=10*p);for(var u=Math.floor(t/g+1e-7),m=Math.ceil(e/g-1e-7);u*g>t+1e-7*g;)u--;for(;m*g<e-1e-7*g;)m++;var f=Math.floor(.5+m-u);f<h?(f=h-f,u>=0?(m+=f/2,u=u-f/2+f%2):(u-=f/2,m=m+f/2+f%2),o=h):o=f;for(var y=u*g;y<=m*g;y+=g)n.push(this.approxNumber(y));if(n[0]==n[n.length-1])for(n=[],y=u*g;y<=m*g;y+=g)n.push(y);return this.cleanVals(n)},this.rPretty=function(t,e,i){if(t>e){var s=e;e=t,t=s}var a,r,n,o=Math.floor(i%3),h=1.5,l=2.75,c=CanvasXpress.constants.DBL_EPSILON,d=1e-10,p=e-t;0==p&&0==e?(a=1,r=!0):(n=1.4,r=p<(a=Math.max(Math.abs(t),Math.abs(e)))*(n*=parseInt(Math.max(1,i))*c)*3),r?(a>10&&(a=9+a/10),a*=.75,o>1&&(a/=o)):(a=p,isFinite(p)&&(i>1?a/=i:a=i<2?.5*e:e/i-t/i));var g=2e-20*Number.MIN_VALUE;0==g&&(g=Number.MIN_VALUE),a<g?(alert("Error in rPretty: very small range"),a=g):a>Number.MAX_VALUE/1.25&&(alert("Error in rPretty: very large range"),a=Number.MAX_VALUE/1.25);var u=Math.pow(10,Math.floor(Math.log10(a))),m=u;2*u-a<h*(a-m)&&5*u-a<l*(a-(m=2*u))&&10*u-a<h*(a-(m=5*u))&&(m=10*u);var f=Math.floor(t/m+d),y=Math.ceil(e/m-d);for(0;f*m>t+d*m;)f--;for(;!isFinite(f*m);)f++;for(;y*m<e-d*m;)y++;for(;!isFinite(f*m);)f--;var x=Math.floor(.5+y-f);x<o?(x=o-x,0==t&&0==f&&0!=e?y+=x:0==e&&0==y&&0!=t?f-=x:f>=0?(y+=x/2,f-=x/2+x%2):(f-=x/2,y+=x/2+x%2),i=o):i=x,f*m<t&&(t=f*m),y*m>e&&(e=y*m);var v=this.seq(t,e,!1,i+1);return this.cleanVals(v)}},CanvasXpress.prototype.initPrimitives=function(){this.initText(),this.initTime(),this.initColor(),this.initAttributes(),this.initRangeAlgorithms()},CanvasXpress.prototype.initGeneralUtils=function(){this.modifyObjectArray=function(t,e,i,s,a){if(!this.isTransition()){var r=this[i];if(s){var n={};if(this.isArray(t))for(var o=t.length,h=0;h<o;h++)n[t[h]]=!0;else n[t]=!0;for(var h in n)r.includes(h)&&(r=this.removeFromArray(h,r),delete n[h]);for(var h in n)r.push(h);this[i]=r}else if(e){n={};var l=[];if(this.isArray(t))for(o=t.length,h=0;h<o;h++)n[t[h]]=1;else n[t]=1;for(o=r.length,h=0;h<o;h++)n.hasOwnProperty(r[h])||l.push(r[h]);this[i]=l}else if(this.isArray(t))for(o=t.length,h=0;h<o;h++)r.push(t[h]);else r.push(t);a&&this.draw({func:"modifyObjectArray",par:[t,e,i,s,a]})}},this.getObjectArray=function(t){var e={};if(t&&this.isArray(t))for(var i=t.length,s=0;s<i;s++)e[t[s]]=!0;return e},this.getObjectArrayOrder=function(t){var e={};if(t&&this.isArray(t))for(var i=t.length,s=0;s<i;s++)e[t[s]+""]=s;return e},this.intersectArray=function(t,e){var i=[];this.isArray(t)||(t=this.toArray(t));for(var s=this.getObjectArray(this.toArray(e)),a=0;a<t.length;a++)s.hasOwnProperty(t[a].toString())&&i.push(t[a]);return i},this.removeFromArray=function(t,e){if(this.isArray(e))for(var i=[],s=e.length,a=0;a<s;a++)e[a]!=t&&i.push(e[a]);return i},this.isFunction=function(t){return t&&"function"==typeof t},this.isArray=function(t){return Array.isArray(t)},this.isObject=function(t){return t instanceof Object},this.isUnique=function(t){return this.getUniqueEls(t).length==t.length},this.isBoolean=function(t){var e=t.length;if(this.isR)for(var i=0;i<e;i++){if(this.isObject(t[i]))return!1;if(null!=t[i]&&("string"==typeof t[i]&&"true"!=t[i].toLowerCase()&&"false"!=t[i].toLowerCase()&&""!==t[i]))return!1}else for(i=0;i<e;i++){if(this.isObject(t[i]))return!1;if(!0!==t[i]&&!1!==t[i]&&""!==t[i]&&null!==t[i])return!1}return!0},this.toArray=function(t){return this.isArray(t)?t:[t]},this.getKeys=function(t){return this.isArray(t)?t:this.isObject(t)?Object.keys(t):[]},this.unique=function(t){return this.isArray(t)?this.getUniqueEls(t):this.isObject(t)?Object.keys(t):[t]},this.getUniqueEls=function(t){for(var e=t.length,i=[],s=new Set,a=0;a<e;a++){var r=t[a];s.has(r)||(s.add(r),i.push(r))}return i},this.getUniqueKeys=function(t){return this.isArray(t)?this.getUniqueEls(t):this.isObject(t)?this.getUniqueEls(this.getKeys(t)):[t]},this.shuffleArray=function(t){for(var e=t.length;e>0;e--){var i=Math.floor(this.random()*e),s=t[--e];t[e]=t[i],t[i]=s}return t},this.toNumber=function(t){for(var e=[],i=this.isArray(t),s=(t=this.toArray(t)).length,a=0;a<s;a++)e.push(Number(t[a]));return i?e:e[0]},this.zip=function(t,e){return t.map((function(i,s){return[t[s],e[s]]}))},this.unzip=function(t,e){return t.map((function(t,i){return t[e]}))},this.extend=function(t,e){if(null==t||"object"!=typeof t)return e;if(null==e||"object"!=typeof e)return t;if(Object.assign)return Object.assign({},t,e);for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e},this.cloneObjectR=function(t,e){var i=this;return null==t||"object"!=typeof t?t:this.isArray(t)?t.map((function(t){return i.isArray(t)?t.slice():i.cloneObjectR(t,e)})):e&&this.isObject(t)?Object.assign({},t):this.parseJSON(this.stringifyJSON(t))},this.cloneObject=function(t,e){var i={bubble:!0,gantt:!0,sankey:!0,tree:!0};if(this.isObject(t)&&t.config&&t.config.decorations&&t.config.decorations.marker)for(var s=t.config.decorations.marker,a=0;a<s.length;a++)s[a].text=s[a].text.replace(/\n/g,"__nl__");if("object"!=typeof t)return t;if(!t)return t;if("[object Array]"===Object.prototype.toString.apply(t)){var r=[],n=t.length;for(a=0;a<n;a++)r[a]=this.cloneObject(t[a]);return r}r={};for(a in t)e&&i.hasOwnProperty(a)||(t[a]&&t.hasOwnProperty(a)||!1===t[a]||0===t[a])&&(r[a]=this.cloneObject(t[a],"data"==a));return r},this.isSameObject=function(t,e){return t===e||"object"==typeof t&&"object"==typeof e&&JSON.stringify(t)==JSON.stringify(e)},this.isNumber=function(t,e){return e?!isNaN(parseFloat(t))&&isFinite(t):null==t||!isNaN(parseFloat(t))&&isFinite(t)},this.toNumber=function(t){return this.isNumber(t,!0)?t:Number.NaN},this.isNumeric2DArray=function(t){for(var e=t.length,i=0;i<e;i++)for(var s=t[i].length,a=0;a<s;a++)if(!this.isNumber(t[i][a]))return!1;return!0},this.isNumeric=function(t){for(var e=t.length,i=0;i<e;i++)if(!this.isNumber(t[i]))return!1;return!0},this.isNull=function(t){for(var e=t.length,i=0;i<e;i++)if(null!=t[i])return!1;return!0},this.isEmpty=function(t){for(var e=t.length,i=0;i<e;i++)if(""!==t[i])return!1;return!0},this.isDate=function(t){for(var e=function(t){if("[object Date]"===toString.call(t))return!0;"function"==typeof t.replace&&t.replace(/^\s+|\s+$/gm,"");return/(^\d{1,4}?[\.|\\/|-]\d{1,2}?[\.|\\/|-]\d{1,4})(\s*(?:0?[1-9]:[0-5]|1(?=[012])\d:[0-5])\d\s*[ap]m)?$/.test(t)},i=t.length,s=0;s<i;s++)if(null!=t[s]&&!e(t[s]))return!1;return!0},this.isMonthDay=function(t){for(var e=t.length,i=0;i<e;i++)if(null!=t[i]&&!CanvasXpress.dates.hasOwnProperty(t[i]))return!1;return!0},this.isCountry=function(t){for(var e,i=t.length,s=0;s<i;s++)if(null!=t[s]&&(e=t[s],!CanvasXpress.countries.hasOwnProperty(e)))return!1;return!0},this.isUsa=function(t){for(var e,i=t.length,s=0;s<i;s++)if(null!=t[s]&&(e=t[s],!CanvasXpress.usa.hasOwnProperty(e)))return!1;return!0},this.padNumber=function(t,e){return e||(e=4),(t+="").length>=e?t:new Array(e-t.length+1).join("0")+t},this.isCountourable=function(){if("Heatmap"==this.graphType)return!this.meta.tree&&(!(this.varOverlays.length+this.smpOverlays.length>0)&&!this.isMultidimensionalData)},this.isPivotable=function(){var t=this.data.y.vars.length,e=(this.data.x?this.getKeys(this.data.x):[]).length;return!(!this.data.x&&t+e!=3)},this.pivotMatrix=function(t,e,i,s){for(var a={},r=[],n=[],o=t.length,h=0;h<o;h++)a[t[h][e]]||(a[t[h][e]]={}),a[t[h][e]][t[h][i]]=t[h][s],-1==r.indexOf(t[h][i])&&r.push(t[h][i]);r=this.stringRangeSort(r);var l=[];for(var c in l.push("Vars"),l.push.apply(l,r),n.push(l),a){(l=[]).push(c),o=r.length;for(h=0;h<o;h++)l.push(a[c][r[h]]||"");n.push(l)}return n},this.transposeDataMatrix=function(t){return t[0].map((function(e,i){return t.map((function(t){return t[i]}))}))},this.filterNumbers=function(t,e){for(var i=[],s=t.length,a=0;a<s;a++)this.isNumber(t[a],e)&&i.push(t[a]);return i},this.cleanArray=function(t,e,i){var s=[];if(e){for(var a=this.smpIndices.length,r=0;r<a;r++)s.push(t[this.smpIndices[r]]);s=this.filterNumbers(s,!0)}else if(i){for(a=this.varIndices.length,r=0;r<a;r++)s.push(t[this.varIndices[r]]);s=this.filterNumbers(s,!0)}else s=this.filterNumbers(t,!0);return s},this.cleanArrays=function(t,e,i,s){var a=[],r=[];if(i)for(var n=this.smpIndices.length,o=0;o<n;o++){2==this.filterNumbers([t[this.smpIndices[o]],e[this.smpIndices[o]]],!0).length&&(a.push(t[this.smpIndices[o]]),r.push(e[this.smpIndices[o]]))}else if(s)for(n=this.varIndices.length,o=0;o<n;o++){2==this.filterNumbers([t[this.varIndices[o]],e[this.varIndices[o]]],!0).length&&(a.push(t[this.varIndices[o]]),r.push(e[this.varIndices[o]]))}else for(n=t.length,o=0;o<n;o++){2==this.filterNumbers([t[o],e[o]],!0).length&&(a.push(t[o]),r.push(e[o]))}return[a,r]},this.reverseArray=function(t){return tmp=t.reverse(),tmp},this.parseInt=function(t){return t+.5<<1>>1},this.ungroupGroupedData=function(){return this.isGroupedData&&("Dotplot"==this.graphType||"Boxplot"==this.graphType&&this.showBoxplotOriginalData||"Gantt"==this.graphType)},this.getIpRangeFromAddressAndNetmask=function(t){var e=t.split("/"),i=e[0].split("."),s=["0","0","0","0"],a=(s=/\d+\.\d+\.\d+\.\d+/.test(e[1])?e[1].split(".").map((function(t){return parseInt(t,10)})):(s=("1".repeat(parseInt(e[1],10))+"0".repeat(32-parseInt(e[1],10))).match(/.{1,8}/g)).map((function(t){return parseInt(t,2)}))).map((function(t){return 255^t})),r=i.map((function(t,e){return t&s[e]})),n=i.map((function(t,e){return t|a[e]}));return[r.join("."),n.join(".")]},this.int2Ip=function(t){return(t>>>24)+"."+(t>>16&255)+"."+(t>>8&255)+"."+(255&t)},this.ip2Int=function(t){return t.split(".").reduce((function(t,e){return(t<<8)+parseInt(e,10)}),0)>>>0},this.md5=function(t){var e=function(t,e){var i=t[0],o=t[1],h=t[2],l=t[3];i=s(i,o,h,l,e[0],7,-680876936),l=s(l,i,o,h,e[1],12,-389564586),h=s(h,l,i,o,e[2],17,606105819),o=s(o,h,l,i,e[3],22,-1044525330),i=s(i,o,h,l,e[4],7,-176418897),l=s(l,i,o,h,e[5],12,1200080426),h=s(h,l,i,o,e[6],17,-1473231341),o=s(o,h,l,i,e[7],22,-45705983),i=s(i,o,h,l,e[8],7,1770035416),l=s(l,i,o,h,e[9],12,-1958414417),h=s(h,l,i,o,e[10],17,-42063),o=s(o,h,l,i,e[11],22,-1990404162),i=s(i,o,h,l,e[12],7,1804603682),l=s(l,i,o,h,e[13],12,-40341101),h=s(h,l,i,o,e[14],17,-1502002290),o=s(o,h,l,i,e[15],22,1236535329),i=a(i,o,h,l,e[1],5,-165796510),l=a(l,i,o,h,e[6],9,-1069501632),h=a(h,l,i,o,e[11],14,643717713),o=a(o,h,l,i,e[0],20,-373897302),i=a(i,o,h,l,e[5],5,-701558691),l=a(l,i,o,h,e[10],9,38016083),h=a(h,l,i,o,e[15],14,-660478335),o=a(o,h,l,i,e[4],20,-405537848),i=a(i,o,h,l,e[9],5,568446438),l=a(l,i,o,h,e[14],9,-1019803690),h=a(h,l,i,o,e[3],14,-187363961),o=a(o,h,l,i,e[8],20,1163531501),i=a(i,o,h,l,e[13],5,-1444681467),l=a(l,i,o,h,e[2],9,-51403784),h=a(h,l,i,o,e[7],14,1735328473),o=a(o,h,l,i,e[12],20,-1926607734),i=r(i,o,h,l,e[5],4,-378558),l=r(l,i,o,h,e[8],11,-2022574463),h=r(h,l,i,o,e[11],16,1839030562),o=r(o,h,l,i,e[14],23,-35309556),i=r(i,o,h,l,e[1],4,-1530992060),l=r(l,i,o,h,e[4],11,1272893353),h=r(h,l,i,o,e[7],16,-155497632),o=r(o,h,l,i,e[10],23,-1094730640),i=r(i,o,h,l,e[13],4,681279174),l=r(l,i,o,h,e[0],11,-358537222),h=r(h,l,i,o,e[3],16,-722521979),o=r(o,h,l,i,e[6],23,76029189),i=r(i,o,h,l,e[9],4,-640364487),l=r(l,i,o,h,e[12],11,-421815835),h=r(h,l,i,o,e[15],16,530742520),o=r(o,h,l,i,e[2],23,-995338651),i=n(i,o,h,l,e[0],6,-198630844),l=n(l,i,o,h,e[7],10,1126891415),h=n(h,l,i,o,e[14],15,-1416354905),o=n(o,h,l,i,e[5],21,-57434055),i=n(i,o,h,l,e[12],6,1700485571),l=n(l,i,o,h,e[3],10,-1894986606),h=n(h,l,i,o,e[10],15,-1051523),o=n(o,h,l,i,e[1],21,-2054922799),i=n(i,o,h,l,e[8],6,1873313359),l=n(l,i,o,h,e[15],10,-30611744),h=n(h,l,i,o,e[6],15,-1560198380),o=n(o,h,l,i,e[13],21,1309151649),i=n(i,o,h,l,e[4],6,-145523070),l=n(l,i,o,h,e[11],10,-1120210379),h=n(h,l,i,o,e[2],15,718787259),o=n(o,h,l,i,e[9],21,-343485551),t[0]=c(i,t[0]),t[1]=c(o,t[1]),t[2]=c(h,t[2]),t[3]=c(l,t[3])},i=function(t,e,i,s,a,r){return e=c(c(e,t),c(s,r)),c(e<<a|e>>>32-a,i)},s=function(t,e,s,a,r,n,o){return i(e&s|~e&a,t,e,r,n,o)},a=function(t,e,s,a,r,n,o){return i(e&a|s&~a,t,e,r,n,o)},r=function(t,e,s,a,r,n,o){return i(e^s^a,t,e,r,n,o)},n=function(t,e,s,a,r,n,o){return i(s^(e|~a),t,e,r,n,o)},o=function(t){var e,i=[];for(e=0;e<64;e+=4)i[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return i},h="0123456789abcdef".split(""),l=function(t){for(var e="",i=0;i<4;i++)e+=h[t>>8*i+4&15]+h[t>>8*i&15];return e},c=function(t,e){return t+e&4294967295};return function(t){for(var e=0;e<t.length;e++)t[e]=l(t[e]);return t.join("")}(function(t){txt="";var i,s=t.length,a=[1732584193,-271733879,-1732584194,271733878];for(i=64;i<=t.length;i+=64)e(a,o(t.substring(i-64,i)));t=t.substring(i-64);var r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(i=0;i<t.length;i++)r[i>>2]|=t.charCodeAt(i)<<(i%4<<3);if(r[i>>2]|=128<<(i%4<<3),i>55)for(e(a,r),i=0;i<16;i++)r[i]=0;return r[14]=8*s,e(a,r),a}(this.stringifyJSON(t)))}},CanvasXpress.prototype.initPlotUtils=function(){this.drawLayoutCanvasCompartments=function(){var t=this.canvasBoxColor,e=(this.height,this.width,this.left),i=this.right,s=this.bottom,a=this.top,r=this.marginLeft,n=(this.marginRight,this.marginBottom,this.marginTop);this.layoutLeft,this.layoutRight,this.layoutBottom,this.layoutTop;this.toRender({p:["drawShape","rectangle",r+this.offsetX+this.layoutWidth/2,n+this.offsetY+this.layoutHeight/2,this.layoutWidth,this.layoutHeight,!1,t,"open"],t:"Size"}),this.toRender({p:["drawShape","rectangle",r+this.offsetX+e+this.x/2,n+this.offsetY+a+this.y/2,this.x,this.y,!1,"red","open"],t:"Size"}),this.toRender({p:["drawShape","rectangle",r+this.offsetX+e+this.x+i/2,n+this.offsetY+a+this.y/2,i,this.y,!1,"blue","open"],t:"Size"}),this.toRender({p:["drawShape","rectangle",r+this.offsetX+e/2,n+this.offsetY+a+this.y/2,e,this.y,!1,"blue","open"],t:"Size"}),this.toRender({p:["drawShape","rectangle",r+this.offsetX+e+this.x/2,n+this.offsetY+a/2,this.x,a,!1,"blue","open"],t:"Size"}),this.toRender({p:["drawShape","rectangle",r+this.offsetX+e+this.x/2,n+this.offsetY+a+this.y+s/2,this.x,s,!1,"blue","open"],t:"Size"})},this.drawCanvasBox=function(t){this.canvasBox&&("Network"!=this.graphType||t)&&(this.toRender({p:["disableGradientTransparencyShadow"],t:"Size"}),this.toRender({p:["drawShape","rectangle",this.width/2,this.height/2,this.width-2,this.height-2,!1,this.canvasBoxColor,"open"],t:"Size"}),this.toRender({p:["enableGradientTransparencyShadow"],t:"Size"}))},this.drawPlotWindow=function(){if(this.backgroundType.match("window")){this.toRender({p:["disableGradientTransparencyShadow"],t:"Size"});var t=this.graphType.match(/Sankey/)?6*this.margin:0,e=this.marginLeft+this.offsetX+this.left,i=this.marginTop+this.offsetY+this.top;if(this.layoutValid||this.toRender({p:["drawShape","rectangle",.5*this.width,.5*this.height,this.width,this.height,this.background,this.background],t:"Size"}),"windowSolidGradient"==this.backgroundType){var s=this.getLinearGradient(e,i,"vertical"==this.gradientOrientation?e:i+this.y,"vertical"==this.gradientOrientation?e+this.x:i);this.toRender({p:["drawShape","rectangle",e+this.x/2,i+this.y/2,this.x-t,this.y,s,s],t:"Size"})}else if("windowImage"==this.backgroundType)this.toRender({p:["drawShape","image",e+this.x/2,i+this.y/2,this.x-t,this.y,!1,!1,!1,!1,!1,!1,!1,!1,!1,this.backgroundImage],t:"Size"});else{var a="Treemap"==this.graphType&&this.isDOE?"rgba(0,0,0,0)":this.backgroundWindow;this.toRender({p:["drawShape","rectangle",e+this.x/2,i+this.y/2,this.x-t,this.y,a,a],t:"Size"})}this.toRender({p:["enableGradientTransparencyShadow"],t:"Size"})}},this.validateSegregation=function(){var t="",e=this.segregateVariablesBy,i=this.segregateSamplesBy;if(e.length>0){for(var s=[],a=0;a<e.length;a++)(this.data.z&&this.data.z.hasOwnProperty(e[a])||"variable"==e[a])&&s.push(e[a]);e=s}if(i.length>0){for(s=[],a=0;a<i.length;a++)(this.data.x&&this.data.x.hasOwnProperty(i[a])||"sample"==i[a])&&s.push(i[a]);i=s}if(e.length>0&&i.length>0){if(i.length>1){for(;i.length>1;)i.pop();t+="Only one sample segregation when variable segregation is selected\n",t+="segregateSamplesBy was set to: "+i[0]+"\n"}if(e.length>1){for(;e.length>1;)e.pop();t+="Only one variable segregation when sample segregation is selected\n",t+="segregateVariblesBy was set to: "+e[0]+"\n"}}else if(i.length>0){if(i.length>2){for(;i.length>2;)i.pop();t+="Maximum of two sample segregations\n",t+="segregateSamplesBy was set to: "+i[0]+","+i[1]+"\n"}}else if(e.length>0&&e.length>2){for(;e.length>2;)e.pop();t+="Maximum of two variable segregations\n",t+="segregateVariablesBy was set to: "+e[0]+","+e[1]+"\n"}return""==t||(this.removeMenus(),alert(t),!1)},this.checkSegregation=function(){this.isDOE||this.validateSegregation()&&(this.layoutValid&&this.data.l?(0==this.segregateSamplesBy.length||this.data.l.smps||this.segregateSamples(this.segregateSamplesBy,!0),0==this.segregateVariablesBy.length||this.data.l.vars||this.segregateVariables(this.segregateVariablesBy,!0)):this.segregateSamplesBy.length>0&&this.segregateVariablesBy.length>0?this.segregateSamplesVariables(!0):this.segregateSamplesBy.length>0?this.segregateSamples(this.segregateSamplesBy,!0):this.segregateVariablesBy.length>0&&this.segregateVariables(this.segregateVariablesBy,!0))},this.validateOverlays=function(){if(this.smpOverlays.length>0){for(var t=[],e=0;e<this.smpOverlays.length;e++)("-"==this.smpOverlays[e]||this.data.x&&this.data.x.hasOwnProperty(this.smpOverlays[e]))&&t.push(this.smpOverlays[e]);this.smpOverlays=t}if(this.varOverlays.length>0){for(t=[],e=0;e<this.varOverlays.length;e++)("-"==this.varOverlays[e]||this.data.z&&this.data.z.hasOwnProperty(this.varOverlays[e]))&&t.push(this.varOverlays[e]);this.varOverlays=t}},this.isDotplotGraph=function(){return!!this.graphType.match(/Dotplot/)||!("Boxplot"!=this.graphType||!this.showBoxplotOriginalData&&!this.showViolinBoxplot)},this.isAttributedGraph=function(){return this.colorBy||this.shapeBy||this.sizeBy||this.lineBy||this.patternBy},this.isSegregatable=function(){var t=this;return!(t.isTransitionOn&&(CanvasXpress.transitions[t.target].push([t.isSegregatable]),1)||this.isDOE||CanvasXpress.graphTypes.NonSegregatable.includes(this.graphType))},this.isDOEable=function(){return!(this.graphType.match(/Gantt|Circular|Fish|Meter|Network|Correlation|Genome|Pie|Scatter3D|TagCloud|Venn/)||this.is3DPlot||this.scatterPlotMatrix||this.isContour||this.isOncoprint)},this.validateNetworkDecorations=function(){if(this.decorations.length){for(var t=this.meta.data.nodes,e=[],i=0;i<this.decorations.length;i++)t.hasOwnProperty(this.decorations[i])&&e.push(this.decorations[i]);this.decorations=e}}},CanvasXpress.prototype.initConfigUtils=function(){this.encode=function(t){return btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,(function(t,e){return String.fromCharCode("0x"+e)})))},this.decode=function(t){return decodeURIComponent(Array.prototype.map.call(atob(t),(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join(""))},this.getFileName=function(t){return t?t.substring(t.lastIndexOf("/")+1):"canvasXpress"},this.getTitleSubtitleHeight=function(){var t,e=0;return this.setTitleSubtitleFont(),this.title&&(t=this.title.split(/\n/),e+=(this.margin+this.getFontPt(this.titleFont))*t.length,this.subtitle&&(t=this.subtitle.split(/\n/),e+=(this.margin+this.getFontPt(this.subtitleFont))*t.length),e+=this.margin),e},this.setTitleSubtitleFont=function(){this.setPropertyFontSize(this.width,"titleFont"),this.adjustFont(this.title,"titleFont",this.width),this.setPropertyFontSize(this.width,"subtitleFont"),this.adjustFont(this.subtitle,"subtitleFont",this.width)},this.drawTitle=function(){if(this.setTitleSubtitleFont(),this.title){var t=this.title.split(/\n/),e=this.marginTop+(this.getFontPt(this.titleFont)+this.margin)*t.length;this.subtitle&&(t=this.subtitle.split(/\n/),e+=(this.getFontPt(this.subtitleFont)+this.margin)*t.length),this.titleColorBackground&&this.toRender({p:["drawShape","rectangle",this.width/2,e/2,this.width,e,this.titleColorBackground,this.titleColorBackground],t:"Titles"});var i="left"==this.titleAlign?this.marginLeft+this.left:"right"==this.titleAlign?this.width-(this.marginRight+this.right):this.width/2,s=this.marginTop+this.measureTextWidth(this.title,this.titleFont)/2;this.toRender({p:["drawText",this.title,i,s,this.titleFont,this.titleColor,"left"==this.titleAlign?"left":"right"==this.titleAlign?"right":"center","middle"],t:"Titles"}),this.subtitle&&(i="left"==this.subtitleAlign?this.marginLeft+this.left:"right"==this.subtitleAlign?this.width-(this.marginRight+this.right):this.width/2,this.toRender({p:["drawText",this.subtitle,i,s+this.getFontPt(this.titleFont)/2+this.margin+this.getFontPt(this.subtitleFont)/2,this.subtitleFont,this.subtitleColor,"left"==this.subtitleAlign?"left":"right"==this.subtitleAlign?"right":"center","middle"],t:"Titles"}))}},this.getCitationHeight=function(){var t,e=0;return this.setCitationFont(),this.citation&&(t=this.citation.split(/\n/),e+=(this.margin+this.getFontPt(this.citationFont))*t.length,e+=this.margin),e},this.setCitationFont=function(){var t=20*this.printMagnification;this.setPropertyFontSize(this.width,"citationFont",t);for(var e=this.measureText(this.citation,this.citationFont),i=1;e>this.width||i>9;)t/=2,this.setPropertyFontSize(this.width,"citationFont",t),e=this.measureText(this.citation,this.citationFont),i++},this.drawCitation=function(){if(this.citation){var t=this.width-this.margin,e=this.height-this.margin;this.toRender({p:["drawText",this.citation,t,e,this.citationFont,this.citationColor,"right","bottom"],t:"Citations"})}},this.getFontHeight=function(){return this.setMainFont(),this.getFontPt(this.font)},this.setMainFont=function(){var t;if(this.autoScaleFont){var e=1-this.percentAspectRatioPlotArea,i=this.layoutComb?this.width/this.layoutCols*e*2.5:this.width*e,s=this.layoutComb?this.height/this.layoutRows*e*2.5:this.height*e;t=Math.min(Math.max(parseInt(Math.max(i,s)/30*this.fontScaleFontFactor),this.minTextSize),this.maxTextSize)}else t=Math.min(Math.max(parseInt(this.fontSize*this.fontScaleFontFactor),this.minTextSize),this.maxTextSize);this.font=this.fontStyle+" "+t+"px "+this.fontName},this.setPropertyFontSize=function(t,e,i){if(t&&e){var s={titleFont:9,subtitleFont:7,decorationsTextFont:5,axisTickFont:5,axisTitleFont:5,smpLabelFont:5,smpTitleFont:"Meter"==this.graphType?9:5,varLabelFont:5,varTitleFont:5,legendTextFont:5,legendTitleFont:5,overlayFont:-1,citationFont:-5,motionCurrentFont:55},a=e.replace("Font","ScaleFontFactor");this[e+"Size"]=Math.min(Math.max(parseInt(t/30*this[a])+s[e],this.minTextSize),i||this.maxTextSize),this[e]=this[e+"Style"]+" "+this[e+"Size"]+"px "+this.fontName}},this.adjustFont=function(t,e,i){if(t&&e&&i)for(var s=this.getFontPt(this[e]),a=this.measureText(t,this[e]);a>i&&s>this.minTextSize;)s--,this[e]=this[e+"Style"]+" "+s+"px "+this.fontName,a=this.measureText(t,this[e])},this.setAspectRatioProperties=function(t){if(this.adjustAspectRatio&&"Genome"!=this.graphType){for(var e=this.meta.config.orig,i=["ringSeparation","roundedPolygonRadius","margin","marginLeft","marginTop","marginRight","marginBottom","overlaysThickness","dendrogramHeight","heatmapSeparatorThickness","xAxisHistogramHeight","xAxisRugHeight","yAxisHistogramHeight","yAxisRugHeight","dataPointSize","layoutLabelBoxThickness"],s=["legendTextMargin","legendTitleMargin","axisTickMargin","axisTitleMargin","xAxisTickGuideLength","yAxisTickGuideLength","zAxisTickGuideLength"],a=0;a<s.length;a++)i.push(s[a]);if(this.adjustAspectRatioHeatmapIndicator&&(i.push("heatmapIndicatorHeight"),i.push("heatmapIndicatorWidth")),t)for(a=0;a<i.length;a++)e[i[a]]&&(this[i[a]]=e[i[a]],delete e[i[a]]);else{for(a=0;a<i.length;a++)e[i[a]]||(e[i[a]]=this[i[a]]);for(a=0;a<i.length;a++)this[i[a]]=Number(Math.max(.5,Math.min(this.width,this.height)*this[i[a]]/833).toFixed(1));(this.isDOE||this.layoutValid&&this.graphType.match(/Scatter/)&&this.scatterPlotMatrix&&this.scatterPlotMatrixType.match(/Density|Histogram|all/))&&(this.dataPointSize=Number(Math.max(.5,this.dataPointSize/Math.max(this.layoutRows,this.layoutCols)).toFixed(1))*(this.isDOE?1.5:1))}}},this.resetAspectRatioProperties=function(){this.adjustAspectRatio&&"Genome"!=this.graphType&&("Network"!=this.graphType||this.isLayoutDone?this.setAspectRatioProperties(!0):this.setTimeout(this.resetAspectRatioProperties,50))},this.getGroupColor=function(t,e){var i;if(this.isGroupedData){var s=this.data.w.grps[e];if(s){this.isGroupedData=!1,i=this.getPropertyValue(t,s[0],"colorBy");for(var a=1;a<s.length;a++){if(this.getPropertyValue(t,s[a],"colorBy")!=i)return this.isGroupedData=!0,this.foreground}this.isGroupedData=!0}else i=this.getPropertyValue(t,e,"colorBy")}else i=this.getPropertyValue(t,e,"colorBy");return i},this.getVarColor=function(t,e){if(this.isArray(this.highlightVar)){for(var i=0;i<this.highlightVar.length;i++)if(this.highlightVar[i]==t)return this.varHighlightColor}else if(this.highlightVar==t)return this.varHighlightColor;return e?this.dendrogramColor:this.varLabelFontColor},this.getSmpColor=function(t,e){if(this.isArray(this.highlightSmp)){for(var i=0;i<this.highlightSmp.length;i++)if(this.highlightSmp[i]==t)return this.smpHighlightColor}else if(this.highlightSmp==t)return this.smpHighlightColor;return e?this.dendrogramColor:this.smpLabelColor},this.getNodeColor=function(t,e){if(this.isArray(this.highlightNode)){for(var i=0;i<this.highlightNode.length;i++)if(this.highlightNode[i]==t)return this.nodeHighlightColor}else if(this.highlightNode==t)return this.nodeHighlightColor;var s=this.isSelected(t),a="ghost"==this.selectionMode&&CanvasXpress.selector.selections&&!s;return s&&"highlight"==this.selectionMode?this.selectionColor:a?this.addColorTransparency(e,.1,!0):e||this.nodeColor},this.getEdgeColor=function(t,e,i){if(this.isArray(this.highlightNode)){for(var s=0;s<this.highlightNode.length;s++)if(this.highlightNode[s]==t||this.highlightNode[s]==e)return this.nodeHighlightColor}else if(this.highlightNode==t||this.highlightNode==e)return this.nodeHighlightColor;var a=this.isSelected(t)||this.isSelected(e),r="ghost"==this.selectionMode&&CanvasXpress.selector.selections&&!a;return a&&"highlight"==this.selectionMode?this.selectionColor:r?this.addColorTransparency(i,.1,!0):i||this.nodeColor},this.getDendrogramColor=function(t,e){if(t){if(this.colorVarDendrogramBy&&this.data.z&&this.data.z.hasOwnProperty(this.colorVarDendrogramBy))if((i=this.getVariableIndices(t))>-1)return this.getPropertyValue(i,!1,"colorVarDendrogramBy");return this.getVarColor(t,!0)}var i;return this.colorSmpDendrogramBy&&this.data.x&&this.data.x.hasOwnProperty(this.colorSmpDendrogramBy)&&(i=this.getSampleIndices(e))>-1?this.getPropertyValue(!1,i,"colorSmpDendrogramBy"):this.getSmpColor(e,!0)},this.isStringOverlays=function(t){var e=this.meta.data;if((!t||"v"==t)&&e.z&&this.varOverlays.length>0)for(var i=0;i<this.varOverlays.length;i++){var s=this.varOverlays[i];if("Numeric"!=e.z[s].type)return!0}if((!t||"s"==t)&&e.x&&this.smpOverlays.length>0)for(i=0;i<this.smpOverlays.length;i++){s=this.smpOverlays[i];if("Numeric"!=e.x[s].type)return!0}return!1},this.isUniqueFactor=function(t){var e=this.meta.data;if((!t||"v"==t)&&e.z)for(var i in e.z)if(e.z[i].unique)return!0;if((!t||"s"==t)&&e.x)for(var i in e.x)if(e.x[i].unique)return!0;return!1},this.isNumericFactor=function(t){var e=this.meta.data;if((!t||"v"==t)&&e.z)for(var i in e.z)if("Numeric"==e.z[i].type)return!0;if((!t||"s"==t)&&e.x)for(var i in e.x)if("Numeric"==e.x[i].type)return!0;return!1},this.isStringFactor=function(t){var e=this.meta.data;if((!t||"v"==t)&&e.z)for(var i in e.z)if("Numeric"!=e.z[i].type)return!0;if((!t||"s"==t)&&e.x)for(var i in e.x)if("Numeric"!=e.x[i].type)return!0;return!1},this.getBestSizes=function(t,e){if("Network"==this.graphType){for(var i=e?.5:.05,s=Math.min(parseInt(2/t*10)/10,i),a=[.5],r=0;r<t-1;r++)a.push(a[r]+s);return a}if(t>this.sizes.length)return this.cloneObject(this.sizes);a=[];var n=Math.floor(this.sizes.length/t);for(r=0;r<t;r++)a.push(this.sizes[r*n]);return a},this.isBinConfigurations=function(){for(var t in this.binConfigurations)return!0;return!1},this.initValidity=function(){var t=this.hexToString("686578546f537472696e67"),e=this[t]("6d657461"),i=this[t]("666163746f7279"),s=this[t]("636c69656e74"),a=this[t]("656e636f6465"),r=this[t]("73797374656d"),n=this[t]("76616c6964"),o=this[t]("74696d65"),h=this[t]("7374617274"),l=this[t]("73697465537263"),c=this[t]("757365724964"),d=(l=this[t]("76657273696f6e"),this[t]("68726566")),p=this[t]("69734e6f6465"),g=new RegExp(this[t]("63616e7661737870726573732e6f7267")),u=new RegExp(this[t]("5e66696c653a")),m=new RegExp(this[t]("6c6f63616c686f7374"));CanvasXpress[i][s]=this[a]([this[e][o][h],this[c],CanvasXpress[i][l],this[d]].join("::")),this.setPixelImage(),1==this[c]?window.navigator.onLine?this[d]&&CanvasXpress[i][l]||this[d]&&u.test(this[d])||this[d]&&m.test(this[d])?CanvasXpress[i][n]=0:this[d]&&!g.test(this[d])&&(CanvasXpress[i][n]=1):CanvasXpress[i][n]=0:2==this[c]?this.isR?CanvasXpress[i][n]=0:CanvasXpress[i][n]=3:CanvasXpress[r][p]&&this[c]<5?CanvasXpress[i][n]=4:CanvasXpress[i][n]=0},this.getWorstAspectRatio=function(t,e){if(t&&0!=t.length){for(var i=0,s=0,a=Number.MAX_VALUE,r=0;r<t.length;r++){var n=t[r].area;i+=n,a=a<n?a:n,s=s>n?s:n}var o=e*e,h=i*i;return Math.max(o*s/h,h/(o*a))}return Number.MAX_VALUE},this.adjustTreemapCoords=function(t,e){if(t){var i=this.treemapBorderWidth&&!this.isDOE?1:0,s=this.treemapBorderWidth,a=2*s,r=this.smpLabelFontSize*i;e.left+=s,e.height>r+a?(e.top+=r+s,e.height-=r+a,e.border=2):e.height>a?(e.top+=s,e.height-=a,e.border=1):e.height>s?(e.height-=s,e.border=0):e.border=-1,e.width-=a}},this.setTreemapRowVerticalLayout=function(t,e,i,s){for(var a=0,r=0;r<t.length;r++)a+=t[r].area;var n=a/e,o=0;for(r=0;r<t.length;r++){var h=t[r].area/n;t[r].coords={width:n,height:h,left:i.left,top:i.top+o},this.adjustTreemapCoords(s,t[r].coords),o+=h}var l={width:i.width-n,height:i.height,left:i.left+n,top:i.top};return l.orientation=Math.min(l.width,l.height),l.orientation!=l.height&&(this.treemapOrientation="horizontal"==this.treemapOrientation?"vertical":"horizontal"),l},this.setTreemapRowHorizontalLayout=function(t,e,i,s){for(var a=0,r=0;r<t.length;r++)a+=t[r].area;var n=a/e,o=i.top,h=0;for(r=0;r<t.length;r++){var l=t[r].area/n;t[r].coords={width:l,height:n,left:i.left+h,top:o},this.adjustTreemapCoords(s,t[r].coords),h+=l}var c={width:i.width,height:i.height-n,left:i.left,top:i.top+n};return c.orientation=Math.min(c.width,c.height),c.orientation!=c.width&&(this.treemapOrientation="horizontal"==this.treemapOrientation?"vertical":"horizontal"),c},this.setTreemapRowLayout=function(t,e,i,s){return"horizontal"==this.treemapOrientation?this.setTreemapRowVerticalLayout(t,e,i,s):this.setTreemapRowHorizontalLayout(t,e,i,s)},this.computeTreemapDimensions=function(t,e,i,s,a){if(t.length+e.length==1){var r=1==t.length?t:e;return r[0].coords=s,void this.adjustTreemapCoords(a,r[0].coords)}if(t.length>=2&&0==e.length&&(e=[t.shift()]),0!=t.length){var n=t[0];if(this.getWorstAspectRatio(e,i)>=this.getWorstAspectRatio([n].concat(e),i))this.computeTreemapDimensions(t.slice(1),e.concat([n]),i,s,n.title);else{var o=this.setTreemapRowLayout(e,i,s,a);this.computeTreemapDimensions(t,[],o.orientation,o,n.title)}}else e.length>0&&this.setTreemapRowLayout(e,i,s,a)},this.squarifyTreemap=function(t,e){for(var i=e.width*e.height,s=0,a=[],r=0;r<t.length;r++)a[r]=parseFloat(t[r].area),s+=a[r];for(r=0;r<a.length;r++)t[r].area=i*a[r]/s;var n="horizontal"==this.treemapOrientation?e.height:e.width;t.sort((function(t,e){return e.area-t.area})),this.computeTreemapDimensions(t.slice(1),[t[0]],n,e,t[0].title)},this.processTreemap=function(t,e){if(this.treemapOrientation||(this.treemapOrientation="horizontal"),e.width>=e.height?this.treemapOrientation="horizontal":this.treemapOrientation="vertical",t.length){this.squarifyTreemap(t,e);for(var i=0;i<t.length;i++){var s=t[i].children?t[i].children:t[i];e={width:t[i].coords.width,height:t[i].coords.height,left:t[i].coords.left,top:t[i].coords.top};this.processTreemap(s,e)}}return t},this.getCloudPointsAtRadius=function(t){if(this.tagCloudGridPoints[t])return this.tagCloudGridPoints[t];var e=8*t,i=e,s=[];for(0==t&&s.push([this.tagCloudGridCenter[0],this.tagCloudGridCenter[1],0]);i--;){var a=1;"circle"!==this.tagCloudShapeFunction&&(a=this.tagCloudShapeFunction(i/e*2*Math.PI)),s.push([this.tagCloudGridCenter[0]+t*a*Math.cos(-i/e*2*Math.PI),this.tagCloudGridCenter[1]+t*a*Math.sin(-i/e*2*Math.PI)*this.tagCloudTextEllipticity,i/e*2*Math.PI])}return this.tagCloudGridPoints[t]=s,s},this.getCloudRotateDeg=function(){return 0==this.tagCloudTextRotateRatio||this.random()>this.tagCloudTextRotateRatio?0:-Math.PI/2+this.random()*Math.PI},this.getCloudTextInfo=function(t,e,i){var s=Math.min(500,Math.floor(this.tagCloudTextWeightFactor*e)),a=this.$cX("canvas"),r=a.getContext("2d",{willReadFrequently:!0}),n=s+"px "+this.fontName;r.font=n;var o=this.measureText(t,n),h=s,l=o+2*h,c=3*h,d=Math.ceil(l/this.tagCloudTextGridSize),p=Math.ceil(c/this.tagCloudTextGridSize);l=d*this.tagCloudTextGridSize,c=p*this.tagCloudTextGridSize;var g=.5*-o,u=.5*-h,m=Math.ceil((l*Math.abs(Math.sin(i))+c*Math.abs(Math.cos(i)))/this.tagCloudTextGridSize),f=Math.ceil((l*Math.abs(Math.cos(i))+c*Math.abs(Math.sin(i)))/this.tagCloudTextGridSize),y=f*this.tagCloudTextGridSize,x=m*this.tagCloudTextGridSize;if(y<1||x<1)return{occupied:[],bounds:[0,0,0,0],gw:f,gh:m,fillTextOffsetX:g,fillTextOffsetY:u,fillTextWidth:o,fillTextHeight:h,fontSize:s};a.setAttribute("width",y),a.setAttribute("height",x),r.save(),r.translate(y/2,x/2),r.rotate(-i),r.font=s+"px "+this.fontName,r.fillStyle="#000",r.textBaseline="middle",r.fillText(t,g,u+.5*s),r.restore();for(var v,b,A,w=r.getImageData(0,0,y,x).data,C=[],T=f,S=[m/2,f/2,m/2,f/2];T--;)for(v=m;v--;){A=this.tagCloudTextGridSize;t:for(;A--;)for(b=this.tagCloudTextGridSize;b--;)if(w[4*((v*this.tagCloudTextGridSize+A)*y+(T*this.tagCloudTextGridSize+b))+3]){C.push([T,v]),T<S[3]&&(S[3]=T),T>S[1]&&(S[1]=T),v<S[0]&&(S[0]=v),v>S[2]&&(S[2]=v);break t}}return{occupied:C,bounds:S,gw:f,gh:m,fillTextOffsetX:g,fillTextOffsetY:u,fillTextWidth:o,fillTextHeight:h,fontSize:s}},this.canFitCloudText=function(t,e,i,s,a){for(var r=a.length;r--;){var n=t+a[r][0],o=e+a[r][1];if(n>=this.tagCloudGridWidth||o>=this.tagCloudGridHeight||n<0||o<0||!this.tagCloudGrid[n][o])return!1}return!0},this.fillCloudGridAt=function(t,e){t>=this.tagCloudGridWidth||e>=this.tagCloudGridHeight||t<0||e<0||(this.tagCloudGrid[t][e]=!1)},this.updateCloudGrid=function(t,e,i){for(var s=i.occupied,a=s.length;a--;)this.fillCloudGridAt(t+s[a][0],e+s[a][1])},this.drawCloudTag=function(t,e,i,s){var a=this,r=this.getCloudRotateDeg(),n=this.getCloudTextInfo(t,e,r);if(!n)return!1;var o=n.bounds;if(o[1]-o[3]+1>this.tagCloudGridWidth||o[2]-o[0]+1>this.tagCloudGridHeight)return!1;for(var h=this.tagCloudGridMaxRadius+1,l=this.addColorTransparency(i,0,!0),c=this.get1DLeft(),d=this.get1DTop();h--;){var p=this.getCloudPointsAtRadius(this.tagCloudGridMaxRadius-h);if(p=[].concat(p),this.shuffleArray(p),p.some((function(e){var o=Math.floor(e[0]-n.gw/2),h=Math.floor(e[1]-n.gh/2),p=n.gw,g=n.gh,u=n.fontSize+"px "+a.fontName,m="1px "+a.fontName;if(!a.canFitCloudText(o,h,p,g,n.occupied))return!1;var f=(o+n.gw/2)*a.tagCloudTextGridSize,y=(h+n.gh/2)*a.tagCloudTextGridSize;return a.renderTagCloud.push([["drawText",t,f+c,y+d,u,i,"center","middle",-r],s,!1,null,!1,[a.width/2,a.height/2,m,l,2*-Math.PI]]),a.updateCloudGrid(o,h,n),!0})))return!0}return!1},this.setTagCloud=function(t){this.tagCloudTextGridSize=Math.max(this.tagCloudTextGridSize,4),this.tagCloudGridWidth=Math.floor(this.x/this.tagCloudTextGridSize),this.tagCloudGridHeight=Math.floor(this.y/this.tagCloudTextGridSize),this.tagCloudGridCenter=[this.tagCloudGridWidth/2,this.tagCloudGridHeight/2],this.tagCloudGridMaxRadius=Math.floor(Math.sqrt(this.tagCloudGridWidth*this.tagCloudGridWidth+this.tagCloudGridHeight*this.tagCloudGridHeight)),this.tagCloudGridPoints=[],t?this.tagCloudTextWeightFactor*=t:this.setTagCloudTextWeightFactor(),this.tagCloudGrid=[];for(var e,i=this.tagCloudGridWidth;i--;)for(this.tagCloudGrid[i]=[],e=this.tagCloudGridHeight;e--;)this.tagCloudGrid[i][e]=!0},this.setTagCloudTextWeightFactor=function(){for(var t=0,e=0,i=this.varIndices[0],s=0;s<this.smpIndices.length;s++){var a=this.smpIndices[s],r=this.getDataAtPos(i,a),n=this.data.y.smps[a].length*r*.5*r;e=Math.max(n,e),t+=n}this.tagCloudTries||(this.tagCloudTries=1),e=parseInt(Math.max(this.x,this.y)),this.tagCloudTextWeightFactor=t>e?this.x*this.y/(t*this.tagCloudTries):this.x*this.y/(t*this.tagCloudTries*(e/t)),this.tagCloudTries+=1},this.tryRenderTagCloud=function(t){var e=this.randomSeed;this.renderTagCloud=[],this.setTagCloud(t);for(var i=this.varIndices[0],s=0;s<this.smpIndices.length;s++){var a=this.smpIndices[s],r=this.getDataAtPos(i,a),n=this.colorBy?this.getPropertyValue(i,a,"colorBy"):this.foreground;if(!this.drawCloudTag(this.data.y.smps[a],r,n,[i,a])){this.resizeCanvas(),this.renderTagCloud=[],this.pseudoRandom&&(this.randomSeed=e),this.tryRenderTagCloud(.9);break}}this.pseudoRandom&&(this.randomSeed=e)},this.getVariableColor=function(t){for(var e=0;e<this.data.y.vars.length;e++)if(this.data.y.vars[e]==t)return this.colors[e%this.colors.length];return this.colors[0]},this.getOutlineColor=function(t,e,i){var s;this.graphType.match(/Bar/)&&"lollipop"==this.barType&&!this.isGroupedData||this.useOpenShapes&&!i?s=this.removeColorTransparency(t,!0):s="Dotplot"==this.graphType||"Boxplot"==this.graphType&&this.showBoxplotOriginalData?(n=this.layoutValid?this.data.y.vars.length*this.data.y.smps.length:this.varIndices.length*this.smpIndices.length)>this.dotplotOutlineThreshold?"Boxplot"!=this.graphType||this.showViolinBoxplot?this.objectBorderColor:this.boxplotBorderColor:"Boxplot"!=this.graphType||this.showViolinBoxplot?this.objectBorderColor?this.objectBorderColor:this.removeColorTransparency(t,!0):this.boxplotBorderColor:this.objectBorderColor&&"Map"!=this.graphType?this.objectBorderColor:this.removeColorTransparency(t,!0);if(e){var a=this.isSelected(e),r=this.isVarHighlughted(e[0]),n="ghost"==this.selectionMode&&CanvasXpress.selector.selections&&!a;s=r?this.varHighlightColor:a&&"highlight"==this.selectionMode?this.selectionColor:n?this.addColorTransparency(s,.1,!0):s}return s},this.getFillColor=function(t,e,i){var s=this.useOpenShapes&&!i&&(!this.isDOE||!this.layoutCurrent),a=this.addColorTransparency(t,s?0:this.objectColorTransparency,!0);if(e){var r=this.isSelected(e),n=this.isVarHighlughted(e[0]),o="ghost"==this.selectionMode&&CanvasXpress.selector.selections&&!r;a=n?this.varHighlightColor:r&&"highlight"==this.selectionMode?this.selectionColor:o?this.addColorTransparency(a,.1,!0):a}return a},this.isVarHighlughted=function(t){if(this.highlightVar.length&&null!=t){var e=this.data.y.vars[t];return this.highlightVar.includes(e)}},this.getDefaultMetaDataObject=function(){var t=this.meta.def.colorBrew;return{rmin:t.rmin,rmax:t.rmax,min:t.min,max:t.max,decs:t.decs,vals:t.vals,maxLevLen:t.maxLevLen,maxLevChr:t.maxLevChr,maxLevStr:t.maxLevStr,colorBrew:t}},this.resetCacheColors=function(){delete this.cacheColors},this.setCacheColors=function(){this.cacheColors||(this.cacheColors={}),this.cacheColors[this.colorScheme]||(this.cacheColors[this.colorScheme]={})},this.setPieData=function(t,e,i){this.setCacheColors();for(var s={no:0,idso:[],ids:[],cols:[],data:{},raw:{},oprc:0,tot:this.sum(t)},a=this.getCustomColorScheme(t.length),r=0;r<t.length;r++){var n,o=e?this.varIndices[r]:r,h=t[o]/s.tot,l=e?this.data.y.vars[o]:r;i&&i[r%i.length]?n=i[r%i.length]:this.cacheColors[this.colorScheme].hasOwnProperty(l)?n=this.cacheColors[this.colorScheme][l]:(n=this.pieColors[r]||a[r%a.length],this.cacheColors[this.colorScheme][l]=n),this.isNumber(h,!0)&&(s.data[o]=h,s.raw[o]=t[o],r>=this.maxPieSectors-1?(s.oprc+=h,s.idso.push(o),s.no++):s.ids.push(o),s.cols.push(n))}return s.no&&s.ids.push(-1),s},this.drawPie=function(t,e,i,s,a,r){var n=this;if(function(){for(var e=0;e<t.ids.length;e++)if(t.data[t.ids[e]]&&t.data[t.ids[e]]>-1&&!n.isNumber(t.data[t.ids[e]],!0))return!1;return!0}()){for(var o,h,l=null!=this.startPieSectors?this.startPieSectors*Math.PI/180%360:0,c="inside"==this.pieSegmentLabels?s-s/3:s+s/6,d=0,p=this.layoutComb?this.smpIndices[0]:this.xAxisIndices?this.xAxisIndices[0]:0,g=0;g<t.ids.length;g++){var u=(w=t.ids[g])>-1?t.data[w]:t.oprc,m="Network"==this.graphType||"Pie"!=this.graphType?a[g]:w>-1?[w,p]:t.idso,f="Map"==this.graphType?t.cols[g]:this.getFillColor(t.cols[g],m,this.isDOE),y=this.getOutlineColor(f,"Map"==this.graphType?g:m),x=((o=null!=h?parseFloat(h):parseFloat(Math.PI*(2*d)+l))+(h=parseFloat(o+Math.PI*(2*u))))/2,v="Network"==this.graphType||"Map"==this.graphType?"Decorations":"Pie"!=this.graphType?"Overlays":"Data";y="separated"==this.pieType?this.background:this.getOutlineColor(f);"Network"==this.graphType||"Map"==this.graphType?this.toRender({p:["drawShape","pie",e,i,2*s,s,f,y,"closed",!1,1,!1,!1,o,h],i:"Map"==this.graphType?a[0]:a[g],m:r,t:v,h:this.isHidden("Map"==this.graphType?a[0][0]:a[g])}):"Pie"!=this.graphType?this.toRender({p:["drawShape","pie",e,i,2*s,s,f,y,"closed",!1,1,!1,!1,o,h],i:a[g],t:v}):w>-1?(a=this.isDOE?[w,p,"Facet-"+this.layoutCurrent]:[w,p],this.toRender({p:["drawShape","pie",e,i,2*s,s,f,y,"closed",!1,1,!1,!1,o,h],i:a,t:v,h:this.isHidden(a[0])})):this.toRender({p:["drawShape","pie",e,i,2*s,s,f,y,"closed",!1,1,!1,!1,o,h],i:t.idso,t:v});var b=t.ids.length>1?e-Math.sin(x-Math.PI/2)*c:e,A=t.ids.length>1?i+Math.cos(x-Math.PI/2)*c:i;"Network"!=this.graphType&&"Map"!=this.graphType&&this.showPieValues&&h-o>.05&&("value"==this.pieLabelType?this.toRender({p:["drawText",t.raw[w],b,A,this.axisTickFont,this.axisTickColor,"center","middle"],t:v}):this.toRender({p:["drawText",this.sprintf("%."+this.pieSegmentPrecision+"f",100*u)+"%",b,A,this.axisTickFont,this.axisTickColor,"center","middle"],t:v})),d+=u}if(d=0,h=null,t.ids.length>1&&"Map"!=this.graphType)for(g=0;g<t.ids.length;g++){var w;u=(w=t.ids[g])>-1?t.data[w]:t.oprc,f=this.getFillColor(t.cols[g]);o=null!=h?parseFloat(h):parseFloat(Math.PI*(2*d)+l),h=parseFloat(o+Math.PI*(2*u));y="separated"==this.pieType?this.background:this.getOutlineColor(f);this.toRender({p:["drawShape","pie",e,i,2*s,s,!1,y,"open",!1,this.pieSegmentSeparation,!1,!1,o,h],s:!0,t:v}),d+=u}this.pieInnerRadius>0&&this.pieInnerRadius<1&&"Map"!=this.graphType&&this.toRender({p:["drawShape","circle",e,i,s*this.pieInnerRadius*2,s*this.pieInnerRadius*2,this.background,this.background,"closed"],t:v})}},this.drawBarPlot=function(t,e,i,s,a,r,n,o,h,l,c,d,p,g,u,m,f,y){var x,v,b,A,w=this,C=function(t){return w.isGroupedData?f.smps[w.data.w.smps[w.grpIndices[t]]]:f.smps[w.data.y.smps[w.smpIndices[t]]]},T=this.variableSpaceFactor/2,S=a/2,M=y?"Overlays":"Network"==this.graphType?"Decorations":"Data";if("vertical"==l||"Network"==this.graphType)for(var D=0;D<t.length;D++){x=(t[D]-h)*n-o;var k=f&&f.cap&&f.cap[C(D)]||"arrow"==this.barType?"arrow":this.useRoundRectangles&&x>0?"roundrectt":this.useRoundRectangles?"roundrectb":"rectangle",L=this.getFillColor(f?f.fill[C(D)]:c[D],p[D]),I=a-this.variableSpaceFactor>5?this.getOutlineColor(L,p[D]):L,z=this.isHidden(p[D][0],p[D][1]);if(this.isNumber(x,!0)){if(this.barPath){var N=this.addColorTransparency(this.barPathColor||L,this.barPathTransparency);this.toRender({p:["drawShape","rectangle",i+T+(a-this.variableSpaceFactor)/2,o+this.y/2,a-this.variableSpaceFactor,2*this.y,N,N],t:"Decorations"})}if(_=x<0?this.toRender({p:["drawShape",k,i+T+(a-this.variableSpaceFactor)/2,s+-x/2,a-this.variableSpaceFactor,-x,L,I,d[D],!1,!1,u],i:p[D],m:g,t:M,h:z}):this.toRender({p:["drawShape",k,i+T+(a-this.variableSpaceFactor)/2,s-x/2,a-this.variableSpaceFactor,x,L,I,d[D],!1,!1,u],i:p[D],m:g,t:M,h:z}),b=s-x,A=i+S,e[D]&&this.isNumber(e[D],!0)&&(v=e[D]/2*n,this.toRender({p:["drawLine","error",A,b,A,b-v,this.errorBarsColor,-S,"butt"],g:_,t:M,h:z}),this.toRender({p:["drawLine","error",A,b,A,b+v,this.errorBarsColor,-S,"butt"],g:_,t:M,h:z})),f){var B=C(D);for(var P in f)if("cap"!=P&&"high"!=P&&"color"!=P&&"fill"!=P&&f[P][B])for(var R=0;R<f[P][B].length;R++){var O=(f[P][B][R][0]-h)*n-o,X=(f[P][B][R][1]-h)*n-o,F=i+T+(a-this.variableSpaceFactor)/2;this.toRender({p:["drawShape",this.shapes[0],F,s-O,a/2,a/2,f.color[P],f.color[P]],g:_,t:M,h:z}),this.isNumber(X,!0)?this.toRender({p:["drawShape",this.shapes[1],F,s-X,a/2,a/2,f.color[P],f.color[P]],g:_,t:M,h:z}):X=x-this.margin,this.toRender({p:["drawLine","line",F,s-O,F,s-X,f.color[P],this.margin],g:_,t:M,h:z})}}this.showDataValues&&"lollipop"!=this.barType&&this.toRender({p:["drawText",this.formatNumber(t[D]),A,s-(x+this.margin/4),this.smpLabelFont,L,"center","bottom"],g:_,t:M,h:z})}i+=r}else for(D=0;D<t.length;D++){var _;x=(t[D]-h)*n-o;k=f&&f.cap&&f.cap[C(D)]||"arrow"==this.barType?"arrow":this.useRoundRectangles?m||x<0?"roundrectl":"roundrectr":"rectangle",L=this.getFillColor(f?f.fill[C(D)]:c[D],p[D]),I=a-this.variableSpaceFactor>5?this.getOutlineColor(L,p[D]):L,z=this.isHidden(p[D][0],p[D][1]);if(this.isNumber(x,!0)){if(this.barPath){N=this.addColorTransparency(this.barPathColor||L,this.barPathTransparency);this.toRender({p:["drawShape","rectangle",o+this.x/2,s+T+(a-this.variableSpaceFactor)/2,2*this.x,a-this.variableSpaceFactor,N,N],t:"Decorations"})}if(_=x<0?m?this.toRender({p:["drawShape",k,i+m-o+-x/2,s+T+(a-this.variableSpaceFactor)/2,-x,a-this.variableSpaceFactor,L,I,d[D],"arrow"==k,!1,u],i:p[D],m:g,t:M,h:z}):this.toRender({p:["drawShape",k,i+x+-x/2,s+T+(a-this.variableSpaceFactor)/2,-x,a-this.variableSpaceFactor,L,I,d[D],"arrow"==k,!1,u],i:p[D],m:g,t:M,h:z}):m?this.toRender({p:["drawShape",k,i+m-(x+o)+x/2,s+T+(a-this.variableSpaceFactor)/2,x,a-this.variableSpaceFactor,L,I,d[D],"arrow"==k,!1,u],i:p[D],m:g,t:M,h:z}):this.toRender({p:["drawShape",k,i+x/2,s+T+(a-this.variableSpaceFactor)/2,x,a-this.variableSpaceFactor,L,I,d[D],"arrow"==k,!1,u],i:p[D],m:g,t:M,h:z}),b=m?i+m-(x+o):i+x,A=s+S,e[D]&&this.isNumber(e[D],!0)&&(v=e[D]/2*n,this.toRender({p:["drawLine","error",b,A,b+v,A,this.errorBarsColor,S,"butt"],g:_,t:M,h:z}),this.toRender({p:["drawLine","error",b,A,b-v,A,this.errorBarsColor,S,"butt"],g:_,t:M,h:z})),f){B=C(D);for(var P in f)if("cap"!=P&&"high"!=P&&"color"!=P&&"fill"!=P&&f[P][B])for(R=0;R<f[P][B].length;R++){O=(f[P][B][R][0]-h)*n-o,X=(f[P][B][R][1]-h)*n-o;var E=s+T+(a-this.variableSpaceFactor)/2;this.toRender({p:["drawShape",this.shapes[0],i+O,E,a/2,a/2,f.color[P],f.color[P]],g:_,t:M,h:z}),this.isNumber(X,!0)?this.toRender({p:["drawShape",this.shapes[1],i+X,E,a/2,a/2,f.color[P],f.color[P]],g:_,t:M,h:z}):X=x-this.margin,this.toRender({p:["drawLine","line",i+O,E,i+X,E,f.color[P],this.margin],g:_,t:M,h:z})}}this.showDataValues&&"lollipop"!=this.barType&&this.toRender({p:["drawText",this.formatNumber(t[D]),b+this.margin/4,A,this.smpLabelFont,c[D],"left","middle"],g:_,t:M,h:z})}s+=r}},this.drawLinePlot=function(t,e,i,s,a,r,n,o,h,l,c,d,p,g,u,m,f,y){var x,v,b,A,w,C,T,S,M,D,k=function(){var t=[[],[]];if("vertical"==h){for(var e=0;e<O[0].length;e++)t[0].push(O[0][e]),t[1].push(O[1][e][0]);for(e=O[0].length-1;e>=0;e--)t[0].push(O[0][e]),t[1].push(O[1][e][1])}else{for(e=0;e<O[1].length;e++)t[0].push(O[0][e][0]),t[1].push(O[1][e]);for(e=O[1].length-1;e>=0;e--)t[0].push(O[0][e][1]),t[1].push(O[1][e])}return t},L=null,I=null,z=a/2,N=.5*this.dataPointSize,B="open"==c?l:this.objectBorderColor||l,P=t.length-1,R=[[],[]],O=[[],[]],X=[],F=this.getVariableIndices(f),_=y?"Overlays":"Data";if("vertical"==h){v=i,b=i+r,null==L&&(L=v);for(var E=1;E<t.length;E++){if(x=E-1,this.isObject(n)?(w=s-(t[x]-n[x].min)*n[x].units,C=s-(t[E]-n[E].min)*n[E].units):(w=s-(t[x]-o)*n,C=s-(t[E]-o)*n),null==I&&(I=w),D=!!this.lineBy&&this.isHidden(!1,!1,"Property:"+this.lineBy+":"+p[x][2]+":x"),this.isNumber(w,!0)&&(S=this.lineDecoration&&"pattern"!=this.lineDecoration&&d?this.toRender({p:["drawShape",d,v,w,N,N,l,B,c[x],!1,!1,u],i:p[x],m:g,g:M,b:[L,I],t:_,h:this.lineBy?D:this.isHidden(p[x][0],p[x][1])}):this.toRender({p:["drawShape","sphere",v,w,N,N,this.addColorTransparency(l,0,!0),"rgba(0,0,0,0)",c[x],!1,!1,u],i:p[x],m:g,g:M,b:[L,I],t:_,h:this.lineBy?D:this.isHidden(p[x][0],p[x][1])}),this.showDataValues&&this.toRender({p:["drawText",this.formatNumber(t[x]),v,w-this.margin,this.smpLabelFont,this.smpLabelColor,"center","bottom"],t:_,h:this.lineBy?D:this.isHidden(p[x][0],p[x][1])}),M||(M=S),this.isNumber(e[x],!0)&&(T=e[x]/2*this.isObject(n)?n[x].units:n,"bar"==this.lineErrorType?(this.toRender({p:["drawLine","error",v,w,v,w+T,l,-z,"butt"],i:["Line:"+f+":"+F],g:M,b:[L,I],t:_,h:this.lineBy?D:this.isHidden(F)}),this.toRender({p:["drawLine","error",v,w,v,w-T,l,-z,"butt"],i:["Line:"+f+":"+F],g:M,b:[L,I],t:_,h:this.lineBy?D:this.isHidden(F)})):(O[0].push([v,v]),O[1].push([w+T,w-T]),X.push([v,w]))),"spline"==this.lineType&&(R[0].push(v),R[1].push(w))),"spline"!=this.lineType&&this.isNumber(w,!0)&&this.isNumber(C,!0)||t.length<3?S=this.toRender({p:["drawLine","pattern"==this.lineDecoration||this.patternBy?c[x]||"solid":this.lineType,v,w,b,C,l,this.lineThickness,"butt",!1,!1,u],i:["Line:"+f+":"+F],g:M,b:[L,I],t:_,h:this.lineBy?D:this.isHidden(F)}):"spline"!=this.lineType||this.isNumber(C,!0)||(S=this.toRender({p:["drawLine","spline",R[0],R[1],!1,!1,l,this.lineThickness,!1,!1,!1,u],i:["Line:"+f+":"+F],g:M,b:[L,I],t:_,h:this.lineBy?D:this.isHidden(F)}),R=[[],[]],L=null,I=null),M||(M=S),O[0].length>0&&!this.isNumber(C,!0)){var V=this.addColorTransparency(l,.3,!0);if("spline"==this.lineType)this.toRender({p:["drawShape","confidence",O[0],O[1],!1,!1,V,V,"closed"],i:["Line-Error:"+f+":"+F],b:X,t:_,h:this.lineBy?D:this.isHidden(F)});else{var H=k();this.toRender({p:["drawShape","path",H[0],H[1],!1,!1,V,V,"closed"],i:["Line-Error:"+f+":"+F],b:X,t:_,h:this.lineBy?D:this.isHidden(F)})}O=[[],[]],X=[]}v+=r,b+=r}if(D=!!this.lineBy&&this.isHidden(!1,!1,"Property:"+this.lineBy+":"+p[P][2]+":x"),this.isNumber(C,!0)&&(S=this.lineDecoration&&"pattern"!=this.lineDecoration&&d?this.toRender({p:["drawShape",d,v,C,N,N,l,B,c[P],!1,!1,u],i:p[P],m:g,g:M,b:[L,I],t:_,h:this.lineBy?D:this.isHidden(p[P][0],p[P][1])}):this.toRender({p:["drawShape","sphere",v,C,N,N,this.addColorTransparency(l,0,!0),"rgba(0,0,0,0)",c[P],!1,!1,u],i:p[P],m:g,g:M,b:[L,I],t:_,h:this.lineBy?D:this.isHidden(p[P][0],p[P][1])}),this.showDataValues&&this.toRender({p:["drawText",this.formatNumber(t[P]),v,C-this.margin,this.smpLabelFont,this.smpLabelColor,"center","bottom"],t:_,h:this.lineBy?D:this.isHidden(p[P][0],p[P][1])}),M||(M=S),this.isNumber(e[P],!0)&&(T=e[P]/2*this.isObject(n)?n[P].units:n,"bar"==this.lineErrorType?(this.toRender({p:["drawLine","error",v,C,v,C+T,l,-z,"butt"],i:["Line:"+f+":"+F],g:M,t:_,h:this.lineBy?D:this.isHidden(F)}),this.toRender({p:["drawLine","error",v,C,v,C-T,l,-z,"butt"],i:["Line:"+f+":"+F],g:M,t:_,h:this.lineBy?D:this.isHidden(F)})):E==t.length&&(O[0].push([v,v]),O[1].push([C+T,C-T]),X.push([v,C]))),"spline"==this.lineType&&(R[0].push(v),R[1].push(C))),"spline"==this.lineType&&(S=this.toRender({p:["drawLine","spline",R[0],R[1],!1,!1,l,this.lineThickness,!1,!1,!1,u],i:["Line:"+f+":"+F],b:[L,I],t:_,h:this.lineBy?D:this.isHidden(F)})),M||(M=S),O[0].length>0){V=this.addColorTransparency(l,.3,!0);if("spline"==this.lineType)this.toRender({p:["drawShape","confidence",O[0],O[1],!1,!1,V,V,"closed"],i:["Line-Error:"+f+":"+F],b:X,t:_,h:this.lineBy?D:this.isHidden(F)});else{H=k();this.toRender({p:["drawShape","path",H[0],H[1],!1,!1,V,V,"closed"],i:["Line-Error:"+f+":"+F],b:X,t:_,h:this.lineBy?D:this.isHidden(F)})}}}else{w=s,C=s+r,null==I&&(I=w);for(E=1;E<t.length;E++){if(x=E-1,this.isObject(n)?(v=m?i+m-(t[x]-n[x].min)*n[x].units:i+(t[x]-n[x].min)*n[x].units,b=m?i+m-(t[E]-n[E].min)*n[E].units:i+(t[E]-n[E].min)*n[E].units):(v=m?i+m-(t[x]-o)*n:i+(t[x]-o)*n,b=m?i+m-(t[E]-o)*n:i+(t[E]-o)*n),null==L&&(L=v),D=!!this.lineBy&&this.isHidden(!1,!1,"Property:"+this.lineBy+":"+p[x][2]+":x"),this.isNumber(v,!0)&&(this.lineDecoration&&"pattern"!=this.lineDecoration&&d?this.toRender({p:["drawShape",d,v,w,N,N,l,B,c[x],!1,!1,u],i:p[x],m:g,b:[L,I],t:_,h:this.lineBy?D:this.isHidden(p[x][0],p[x][1])}):this.toRender({p:["drawShape","sphere",v,w,N,N,this.addColorTransparency(l,0,!0),"rgba(0,0,0,0)",c[x],!1,!1,u],i:p[x],m:g,b:[L,I],t:_,h:this.lineBy?D:this.isHidden(p[x][0],p[x][1])}),this.showDataValues&&this.toRender({p:["drawText",this.formatNumber(t[x]),v,w-this.margin,this.smpLabelFont,this.smpLabelColor,"center","bottom"],t:_,h:this.lineBy?D:this.isHidden(p[x][0],p[x][1])}),this.isNumber(e[x],!0)&&(A=e[x]/2*this.isObject(n)?n[x].units:n,"bar"==this.lineErrorType?(S=this.toRender({p:["drawLine","error",v,w,v+A,w,l,z,"butt"],i:["Line:"+f+":"+F],g:M,t:_,h:this.lineBy?D:this.isHidden(F)}),M||(M=S),this.toRender({p:["drawLine","error",v,w,v-A,w,l,z,"butt"],i:["Line:"+f+":"+F],g:M,t:_,h:this.lineBy?D:this.isHidden(F)})):(O[0].push([v+A,v-A]),O[1].push([w,w]),X.push([v,w]))),"spline"==this.lineType&&(R[0].push(v),R[1].push(w))),"spline"!=this.lineType&&this.isNumber(v,!0)&&this.isNumber(b,!0)||t.length<3?S=this.toRender({p:["drawLine","pattern"==this.lineDecoration||this.patternBy?c[x]||"solid":this.lineType,v,w,b,C,l,this.lineThickness,"butt",!1,!1,u],i:["Line:"+f+":"+F],b:[L,I],t:_,h:this.lineBy?D:this.isHidden(F)}):"spline"!=this.lineType||this.isNumber(b,!0)||(S=this.toRender({p:["drawLine","spline",R[0],R[1],!1,!1,l,this.lineThickness,!1,!1,!1,u],i:["Line:"+f+":"+F],b:[L,I],t:_,h:this.lineBy?D:this.isHidden(F)}),R=[[],[]],L=null,I=null),M||(M=S),O[1].length>0&&!this.isNumber(b,!0)){V=this.addColorTransparency(l,.3,!0);if("spline"==this.lineType)this.toRender({p:["drawShape","confidence",O[0],O[1],!1,!1,V,V,"closed"],i:["Line-Error:"+f+":"+F],b:X,t:_,h:this.lineBy?D:this.isHidden(F)});else{H=k();this.toRender({p:["drawShape","path",H[0],H[1],!1,!1,V,V,"closed"],i:["Line-Error:"+f+":"+F],b:X,t:_,h:this.lineBy?D:this.isHidden(F)})}O=[[],[]],X=[]}w+=r,C+=r}if(D=!!this.lineBy&&this.isHidden(!1,!1,"Property:"+this.lineBy+":"+p[P][2]+":x"),this.isNumber(b,!0)&&(this.lineDecoration&&"pattern"!=this.lineDecoration&&d?this.toRender({p:["drawShape",d,b,w,N,N,l,B,c[P],!1,!1,u],i:p[P],m:g,b:[L,I],t:_,h:this.lineBy?D:this.isHidden(p[P][0],p[P][1])}):this.toRender({p:["drawShape","sphere",b,w,N,N,this.addColorTransparency(l,0,!0),"rgba(0,0,0,0)",c[P],!1,!1,u],i:p[P],m:g,b:[L,I],t:_,h:this.lineBy?D:this.isHidden(p[P][0],p[P][1])}),this.showDataValues&&this.toRender({p:["drawText",this.formatNumber(t[P]),b,w-this.margin,this.smpLabelFont,this.smpLabelColor,"center","bottom"],t:_,h:this.lineBy?D:this.isHidden(p[P][0],p[P][1])}),this.isNumber(e[P],!0)&&(A=e[P]/2*this.isObject(n)?n[P].units:n,"bar"==this.lineErrorType?(S=this.toRender({p:["drawLine","error",b,w,b+A,w,l,z,"butt"],i:["Line:"+f+":"+F],g:M,t:_,h:this.lineBy?D:this.isHidden(F)}),M||(M=S),this.toRender({p:["drawLine","error",b,w,b-A,w,l,z,"butt"],i:["Line:"+f+":"+F],g:M,t:_,h:this.lineBy?D:this.isHidden(F)})):(O[0].push([b+A,b-A]),O[1].push([w,w]),X.push([b,w]))),"spline"==this.lineType&&(R[0].push(b),R[1].push(w))),"spline"==this.lineType&&(S=this.toRender({p:["drawLine","spline",R[0],R[1],!1,!1,l,this.lineThickness,!1,!1,!1,u],i:["Line:"+f+":"+F],b:[L,I],t:_,h:this.lineBy?D:this.isHidden(F)})),M||(M=S),O[1].length>0){V=this.addColorTransparency(l,.3,!0);if("spline"==this.lineType)this.toRender({p:["drawShape","confidence",O[0],O[1],!1,!1,V,V,"closed"],i:["Line-Error:"+f+":"+F],b:X,t:_,h:this.lineBy?D:this.isHidden(F)});else{H=k();this.toRender({p:["drawShape","path",H[0],H[1],!1,!1,V,V,"closed"],i:["Line-Error:"+f+":"+F],b:X,t:_,h:this.lineBy?D:this.isHidden(F)})}}}},this.drawStackedPlot=function(t,e,i,s,a,r,n,o,h,l,c,d,p,g,u,m,f){var y=i,x=e,v=this,b=f?"Overlays":"Data",A=function(t,e,i,s,a){return v.processTreemap(t,{width:s,height:a,left:e,top:i})},w=function(e){var i=0;if(v.dodgeBy)for(var s=0;s<t.length;s++)0!=t[s]&&i++;return e/i}(s);if("vertical"==l){i=y-h;for(var C=0;C<t.length;C++)if(t[C]>0){var T=r?100*t[C]/n[0]*o:t[C]*o,S=C==t.length-1&&this.useRoundRectangles?"roundrectt":"rectangle",M=this.getFillColor(c[C],p[C]),D=s>5?this.getOutlineColor(M,p[C]):M;if("Network"==this.graphType)this.toRender({p:["drawShape",S,e+s/2,i-T/2,s,T,c[C],c[C]],i:p[C],m:g,t:"Decorations"});else if(a){var k=A(a[C],e,i-T,s,T);this.drawTreemap(k,0,0)}else if(this.dodgeBy)var L=this.isHidden(!1,!1,"Property:"+this.dodgeBy+":"+p[C][4]+":x"),I=this.toRender({p:["drawShape",S,e+w/2,i-T/2,w,T,M,D,d[C]],i:p[C],m:g,b:m,t:b,h:L});else{L=this.stackBy?this.isHidden(!1,!1,"Property:"+this.stackBy+":"+p[C][4]+":x"):this.isHidden(p[C][0],p[C][1]),I=this.toRender({p:["drawShape",S,e+s/2,i-T/2,s,T,M,D,d[C]],i:p[C],m:g,b:m,t:b,h:L});this.showDataValues&&this.toRender({p:["drawText",this.formatNumber(t[C]),e+s/2,i-T/2,this.smpLabelFont,this.smpLabelColor,"center","middle"],g:I,t:b,h:L})}this.dodgeBy?e+=w:i-=T}i=y-h;for(C=t.length-1;C>=0;C--)if(t[C]<0){T=r?100*t[C]/-n[1]*o:t[C]*o,S=C>0||!this.useRoundRectangles?"rectangle":"roundrectb",M=this.getFillColor(c[C],p[C]),D=s>5?this.getOutlineColor(M,p[C]):M;if("Network"==this.graphType)this.toRender({p:["drawShape",S,e+s/2,i-T/2,s,-T,c[C],c[C]],i:p[C],m:g,t:"Decorations"});else if(a){k=A(a[C],e,i-T,s,-T);this.drawTreemap(k,0,0)}else if(this.dodgeBy)L=this.isHidden(!1,!1,"Property:"+this.dodgeBy+":"+p[C][4]+":x"),I=this.toRender({p:["drawShape",S,e+w/2,i-T/2,w,-T,M,D,d[C]],i:p[C],m:g,b:m,t:b,h:L});else{L=this.stackBy?this.isHidden(!1,!1,"Property:"+this.stackBy+":"+p[C][4]+":x"):this.isHidden(p[C][0],p[C][1]),I=this.toRender({p:["drawShape",S,e+s/2,i-T/2,s,-T,M,D,d[C]],i:p[C],m:g,b:m,t:b,h:L});this.showDataValues&&this.toRender({p:["drawText",this.formatNumber(t[C]),e+s/2,i-T/2,this.smpLabelFont,this.smpLabelColor,"center","middle"],g:I,t:b,h:L})}this.dodgeBy?e+=w:i-=T}}else{e=x+h;for(C=0;C<t.length;C++)if(t[C]>0){T=r?100*t[C]/n[0]*o:t[C]*o,S=C<t.length-1||!this.useRoundRectangles?"rectangle":u?"roundrectl":"roundrectr",M=this.getFillColor(c[C],p[C]),D=s>5?this.getOutlineColor(M,p[C]):M;if(u){if("Network"==this.graphType)this.toRender({p:["drawShape",S,e+u-T/2,i+s/2,T,s,c[C],c[C],d[C]],i:p[C],m:g,t:"Decorations"});else if(a){k=A(a[C],e+u-T,i,T,s);this.drawTreemap(k,0,0)}else if(this.dodgeBy)L=this.isHidden(!1,!1,"Property:"+this.dodgeBy+":"+p[C][4]+":x"),I=this.toRender({p:["drawShape",S,e+u-T/2,i+w/2,T,w,M,D,d[C]],i:p[C],m:g,b:m,t:b,h:L});else{L=this.stackBy?this.isHidden(!1,!1,"Property:"+this.stackBy+":"+p[C][4]+":x"):this.isHidden(p[C][0],p[C][1]),I=this.toRender({p:["drawShape",S,e+u-T/2,i+s/2,T,s,M,D,d[C]],i:p[C],m:g,b:m,t:b,h:L});this.showDataValues&&this.toRender({p:["drawText",this.formatNumber(t[C]),e+u-T/2,i+s/2,this.smpLabelFont,this.smpLabelColor,"center","middle"],g:I,t:b,h:L})}this.dodgeBy?i+=w:e-=T}else{if("Network"==this.graphType)this.toRender({p:["drawShape",S,e+T/2,i+s/2,T,s,c[C],c[C],d[C]],i:p[C],m:g,t:"Decorations"});else if(a){f=A(a[C],e,i,T,s);this.drawTreemap(f,0,0)}else if(this.dodgeBy)L=this.isHidden(!1,!1,"Property:"+this.dodgeBy+":"+p[C][4]+":x"),I=this.toRender({p:["drawShape",S,e+T/2,i+w/2,T,w,M,D,d[C]],i:p[C],m:g,b:m,t:b,h:L});else{L=this.stackBy?this.isHidden(!1,!1,"Property:"+this.stackBy+":"+p[C][4]+":x"):this.isHidden(p[C][0],p[C][1]),I=this.toRender({p:["drawShape",S,e+T/2,i+s/2,T,s,M,D,d[C]],i:p[C],m:g,b:m,t:b,h:L});this.showDataValues&&this.toRender({p:["drawText",this.formatNumber(t[C]),e+T/2,i+s/2,this.smpLabelFont,this.smpLabelColor,"center","middle"],g:I,t:b,h:L})}this.dodgeBy?i+=w:e+=T}}e=x+h;for(C=t.length-1;C>=0;C--)if(t[C]<0){T=r?100*t[C]/-n[1]*o:t[C]*o,S=C>0||!this.useRoundRectangles?"rectangle":u?"roundrectr":"roundrectl",M=this.getFillColor(c[C],p[C]),D=s>5?this.getOutlineColor(M,p[C]):M;if(u){if("Network"==this.graphType)this.toRender({p:["drawShape",S,e+u-T/2,i+s/2,-T,s,c[C],c[C],d[C]],i:p[C],m:g,t:"Decorations"});else if(a){k=A(a[C],e+u-T,i,-T,s);this.drawTreemap(k,0,0)}else if(this.dodgeBy)L=this.isHidden(!1,!1,"Property:"+this.dodgeBy+":"+p[C][4]+":x"),I=this.toRender({p:["drawShape",S,e+u-T/2,i+w/2,-T,w,M,D,d[C]],i:p[C],m:g,b:m,t:b,h:L});else{L=this.stackBy?this.isHidden(!1,!1,"Property:"+this.stackBy+":"+p[C][4]+":x"):this.isHidden(p[C][0],p[C][1]),I=this.toRender({p:["drawShape",S,e+u-T/2,i+s/2,-T,s,M,D,d[C]],i:p[C],m:g,b:m,t:b,h:L});this.showDataValues&&this.toRender({p:["drawText",this.formatNumber(t[C]),e+u-T/2,i+s/2,this.smpLabelFont,this.smpLabelColor,"center","middle"],g:I,t:b,h:L})}this.dodgeBy?i+=w:e-=T}else{if("Network"==this.graphType)this.toRender({p:["drawShape",S,e+T/2,i+s/2,-T,s,c[C],c[C],d[C]],i:p[C],m:g,t:"Decorations"});else if(a){f=A(a[C],e,i,-T,s);this.drawTreemap(f,0,0)}else if(this.dodgeBy)L=this.isHidden(!1,!1,"Property:"+this.dodgeBy+":"+p[C][4]+":x"),I=this.toRender({p:["drawShape",S,e+T/2,i+w/2,-T,w,M,D,d[C]],i:p[C],m:g,b:m,t:b,h:L});else{L=this.stackBy?this.isHidden(!1,!1,"Property:"+this.stackBy+":"+p[C][4]+":x"):this.isHidden(p[C][0],p[C][1]),I=this.toRender({p:["drawShape",S,e+T/2,i+s/2,-T,s,M,D,d[C]],i:p[C],m:g,b:m,t:b,h:L});this.showDataValues&&this.toRender({p:["drawText",this.formatNumber(t[C]),e+T/2,i+s/2,this.smpLabelFont,this.smpLabelColor,"center","middle"],g:I,t:b,h:L})}this.dodgeBy?i+=w:e+=T}}}},this.drawAreaPlot=function(t,e,i,s,a,r,n,o,h,l,c,d,p,g,u,m,f,y,x,v){var b=t.length-1,A=p&&"rect"==this.lineType?"path":"rect"==this.lineType?"polygon":"spline",w=[],C=[],T=[],S=-l*h,M=c*h,D=v?"Overlays":"Data",k=function(e,i){for(var s=i+1;s<t[e].length;s++){if(t[e][s]>0)return 1;if(t[e][s]<0)return-1}return 0};if("vertical"==d){for(var L=0;L<t[0].length;L++)w[L]="stacked"==n&&l<0?i-M:i,C[L]=i-M;for(L=0;L<t.length;L++){for(var I=e,z=p?[]:[e],N=p?[]:[i-S],B=0,P=0;P<t[0].length;P++){if(this.isNumber(t[L][P],!0)){var R="percent"==n?100*(t[L][P]-l)/o[P]*h:(t[L][P]-("stacked"==n&&l<0?0:l))*h;if(z.push(I),!n||"stacked"!=n&&"percent"!=n)N.push(i-R);else if(t[L][P]>0||B>0)N.push(w[P]-R),w[P]-=R,B=1;else if(t[L][P]<0||B<0)N.push(C[P]-R),C[P]-=R,B=-1;else(V=k(L,P))<0?(N.push(C[P]-R),C[P]-=R,B=-1):V>0?(N.push(w[P]-R),w[P]-=R,B=1):N.push(S)}else{if(p||(z.push(I-r),N.push(i-S)),p&&"spline"==this.lineType)this.toRender({p:["drawLine",A,z,N,!1,!1,g[L],this.lineThickness],i:m[L],m:f,b:i-S,t:D,h:this.isHidden(m[L][0])});else if(l>=0&&b>0&&"normal"!=n){var O=T[T.length-1][1];z.shift();var X=[],F=[];for(L=1;L<N.length;L++)X.push([z[L-1],z[L-1]]),F.push([N[L],O[L]]);this.toRender({p:["drawShape","confidence",X,F,this.width,this.height,this.getFillColor(g[b],m[b]),this.getOutlineColor(g[b],m[b]),u[b]],i:m[b],m:f,b:i-S,t:D,h:this.isHidden(m[b][0])})}else this.toRender({p:["drawShape",A,z,N,this.width,this.height,this.getFillColor(g[L],m[L]),this.getOutlineColor(g[L],m[L]),u[L]],i:m[L],m:f,b:i-S,t:D,h:this.isHidden(m[L][0])});if(x)for(var _=this.addColorTransparency(g[L],0,!0),E=0;E<z.length;E++)G=this.toRender({p:["drawShape","sphere",z[E],N[E],r,r,_,"rgba(0,0,0,0)",u[L]],i:[m[L][0],x[E]],s:!0,t:D}),p||this.toRender({p:["drawLine","line",z[E],N[E]+r,z[E],N[0],_,r],i:[m[L][0],x[E]],g:G,s:!0,t:D});z=p?[]:[I+r],N=p?[]:[i-S]}I+=r}p||(z.push(e+s),N.push(i-S)),T.push([z,N,g[L],u[L],m[L]])}}else{for(L=0;L<t[0].length;L++)w[L]=y?e+y:"stacked"==n&&l<0?e+M:e,C[L]=e+M;for(L=0;L<t.length;L++){for(I=i,z=p?[]:y?[e+y]:[e+S],N=p?[]:[i],B=0,P=0;P<t[0].length;P++){if(this.isNumber(t[L][P],!0)){var V;R="percent"==n?100*(t[L][P]-l)/o[P]*h:(t[L][P]-("stacked"==n&&l<0?0:l))*h;if(N.push(I),!n||"stacked"!=n&&"percent"!=n)z.push(y?e+y-R:e+R);else if(y)z.push(w[P]-R),w[P]-=R;else if(t[L][P]>0||B>0)z.push(w[P]+R),w[P]+=R,B=1;else if(t[L][P]<0||B<0)z.push(C[P]+R),C[P]+=R,B=-1;else(V=k(L,P))<0?(z.push(C[P]+R),C[P]+=R,B=-1):V>0?(z.push(w[P]+R),w[P]+=R,B=1):N.push(S)}else{if(p||(z.push(y?e+y:e+S),N.push(I-r)),p&&"spline"==this.lineType)this.toRender({p:["drawLine",A,z,N,!1,!1,g[L],this.lineThickness],i:m[L],m:f,b:e+S,t:D,h:this.isHidden(m[L][0])});else{O=T[T.length-1][0];if(l>=0&&b>0&&"normal"!=n){N.shift();for(X=[],F=[],L=1;L<z.length;L++)X.push([z[L],O[L]]),F.push([N[L-1],N[L-1]]);this.toRender({p:["drawShape","confidence",X,F,this.width,this.height,this.getFillColor(g[b],m[b]),this.getOutlineColor(g[b],m[b]),u[b]],i:m[b],m:f,b:e+S,t:D,h:this.isHidden(m[b][0])})}else this.toRender({p:["drawShape",A,z,N,this.width,this.height,this.getFillColor(g[L],m[L]),this.getOutlineColor(g[L],m[L]),u[L]],i:m[L],m:f,b:e+S,t:D,h:this.isHidden(m[L][0])})}if(x)for(_=this.addColorTransparency(g[L],0,!0),E=0;E<z.length;E++)G=this.toRender({p:["drawShape","sphere",z[E],N[E],r,r,_,"rgba(0,0,0,0)",u[L]],i:[m[L][0],x[E]],s:!0,t:D}),p||this.toRender({p:["drawLine","line",z[E]-r,N[E],z[0],N[E],_,r],i:[m[L][0],x[E]],g:G,s:!0,t:D});z=p?[]:[y?e+y:e+S],N=p?[]:[I+r]}I+=r}p||(z.push(y?e+y:e+S),N.push(i+a)),T.push([z,N,g[L],u[L],m[L]])}}for(;b>=0;){P=T.pop();if(p)if("spline"==this.lineType)this.toRender({p:["drawLine",A,P[0],P[1],!1,!1,P[2],this.lineThickness],i:P[4],m:f,b:"vertical"==d?i-S:e+S,t:D,h:this.isHidden(P[4][0])});else{var H=null;for(L=1;L<P[0].length;L++){var G=this.toRender({p:["drawLine",A,P[0][L-1],P[1][L-1],P[0][L],P[1][L],P[2],this.lineThickness],i:P[4],m:f,g:H,b:"vertical"==d?i-S:e+S,t:D,h:this.isHidden(P[4][0])});null==H&&(H=G)}}else if(l>=0&&b>0&&"normal"!=n){O="vertical"==d?T[T.length-1][1]:T[T.length-1][0];if("vertical"==d){P[0].shift(),P[0].pop();for(X=[],F=[],L=1;L<P[1].length-1;L++)X.push([P[0][L-1],P[0][L-1]]),F.push([P[1][L],O[L]]);P[1].shift(),P[1].pop(),this.toRender({p:["drawShape","confidence",X,F,this.width,this.height,this.getFillColor(P[2]),this.getOutlineColor(P[2]),P[3]],i:P[4],m:f,b:i-S,t:D,h:this.isHidden(P[4][0])})}else{P[1].shift(),P[1].pop();for(X=[],F=[],L=1;L<P[0].length-1;L++)X.push([P[0][L],O[L]]),F.push([P[1][L-1],P[1][L-1]]);P[0].shift(),P[0].pop(),this.toRender({p:["drawShape","confidence",X,F,this.width,this.height,this.getFillColor(P[2]),this.getOutlineColor(P[2]),P[3]],i:P[4],m:f,b:e+S,t:D,h:this.isHidden(P[4][0])})}}else if("normal"==n||"stacked"==n)this.toRender({p:["drawShape",A,P[0],P[1],this.width,this.height,this.getFillColor(P[2]),this.getOutlineColor(P[2]),P[3]],i:P[4],m:f,b:"vertical"==d?i-S:e+S,t:D,h:this.isHidden(P[4][0])});else if("vertical"==d){for(F=[],L=1;L<P[1].length-1;L++)F.push([P[1][L],P[1][0]]);this.toRender({p:["drawShape","confidence",X,F,this.width,this.height,this.getFillColor(P[2]),this.getOutlineColor(P[2]),P[3]],i:P[4],m:f,b:i-S,t:D,h:this.isHidden(P[4][0])})}else{for(X=[],L=1;L<P[0].length-1;L++)X.push([P[0][L],P[0][0]]);this.toRender({p:["drawShape","confidence",X,F,this.width,this.height,this.getFillColor(P[2]),this.getOutlineColor(P[2]),P[3]],i:P[4],m:f,b:e+S,t:D,h:this.isHidden(P[4][0])})}if(x){_=this.addColorTransparency(P[2],0,!0);var q=Math.min(10,r);for(L=1;L<P[0].length-1;L++)this.isGraphTime&&x[L-1]<0||(G=this.toRender({p:["drawShape","sphere",P[0][L],P[1][L],q,q,_,"rgba(0,0,0,0)",P[3]],i:[P[4][0],x[L-1]],s:!0,t:D}),p||("vertical"==d?this.toRender({p:["drawLine","line",P[0][L],P[1][L]+r,P[0][L],P[1][0],_,r],i:[P[4][0],x[L-1]],g:G,s:!0,t:D}):this.toRender({p:["drawLine","line",P[0][L]-r,P[1][L],P[0][0],P[1][L],_,r],i:[P[4][0],x[L-1]],g:G,s:!0,t:D})))}b--}},this.drawBoxPlot=function(t,e,i,s,a,r,n,o,h,l,c,d,p,g){var u=this,m=this.segregateSamplesBy.length&&this.isGroupedData&&this.groupingFactors.includes(this.segregateSamplesBy[0]),f=function(t){var e;if(u.layoutValid&&!u.isDOE){if(u.segregateVariablesBy.length>0)e=t;else if(u.segregateSamplesBy.length>0)for(var i=m?u.data.w.labs[t]?u.data.w.labs[t]:u.data.w.glab[t]:[u.data.l.name[u.layoutCurrent],u.data.w.glab[t]].join("::"),s=0;s<x.g[v].length;s++)if(x.g[v][s].density.name==i){e=s;break}}else e=u.grpIndices[t];return x.g[v][e]},y=function(t){return"vertical"==o?i-(t-n)*r:e+(t-n)*r},x=this.meta.data.d,v=this.getVariableIndices(g),b=this.variableSpaceFactor/2,A=s/2,w=A/2,C=s/this.boxplotOutliersRatio,T={},S={},M=!1,D=this.isGroupedData&&this.showViolinBoxplot&&this.isRawData?(s-this.variableSpaceFactor)*this.boxplotWidthRatioIfViolin:s-this.variableSpaceFactor,k=this.isGroupedData&&this.showViolinBoxplot&&this.isRawData?s*this.boxplotWidthRatioIfViolin:0,L=this.isGroupedData&&this.showViolinBoxplot&&this.isRawData?k/2:A,I=Math.max(1,s/4);if("vertical"==o)for(var z=0;z<t.length;z++)if(this.isGraphTime&&c[z][1]<0)e+=a;else{var N=this.showBoxplotOriginalData?this.isHidden(c[z][0]):this.scatterPlotMatrix&&"boxplot"==this.scatterType?this.isHidden(!1,!1,c[z][1]):this.isHidden(c[z][0],c[z][1],!1,!0);if(this.isGroupedData&&this.showViolinBoxplot&&this.isRawData&&t[z].length>1)(Y=f(this.layoutValid?c[z][1]:z))&&(this.drawViolin(Y,e+s/2,i,s/this.varIndices.length,r,n,o,d[z],p[z],c[z],N,t[z]),this.showBoxplotIfViolin||(M=!0));for(var B=e+A,P=[],R=[],O=this.showBoxplotOriginalData||this.showViolinBoxplot?d[z]:h[z],X=0;X<5;X++)P.push(y(t[z][X])),R.push(P[P.length-1].toString());if(!M){var F=e+b+(s-this.variableSpaceFactor)/2,_=P[3]+(P[2]-P[3])/2,E=D,V=P[2]-P[3],H=!!this.boxplotNotched&&y(t[z][7][0]),G=!!this.boxplotNotched&&y(t[z][7][1]),q=this.showBoxplotOriginalData?this.addColorTransparency(this.getFillColor(h[z],c[z]),this.boxplotTransparency,!0):this.getFillColor(h[z],c[z]),j=0==this.boxplotBorderColor?this.useOpenShapes?this.removeColorTransparency(q):q:this.boxplotBorderColor,U=this.useOpenShapes?j:this.boxplotBorderColor||this.boxplotMedianColor;if(this.boxplotVarWidth&&"Scatter2D"!=this.graphType&&(k+=(D-(E=D*t[z][8]))/2),this.boxplotColor&&(q=this.boxplotColor),this.boxplotNotched&&"range"!=this.boxplotType?(W=this.showViolinBoxplot?[e+(s-b-k)-I,e+b+k,e+b+k,e+(s-b-k),e+(s-b-k),e+b+k+I,e+(s-b-k)-I]:[e+b+k+I,e+b+k,e+b+k,e+(s-b-k),e+(s-b-k),e+(s-b-k)-I,e+b+k+I],$=[P[4],H,P[2],P[2],H,P[4],P[4]],Q=this.toRender({p:["drawShape","polygon",W,$,!1,!1,q,j,l[z]],i:c[z],b:i,t:"Data",h:N}),$=[P[4],G,P[3],P[3],G,P[4],P[4]],this.toRender({p:["drawShape","polygon",W,$,!1,!1,q,j,l[z]],i:c[z],g:Q,b:i,t:"Data",h:N})):Q="range"==this.boxplotType?this.toRender({p:["drawLine","line",F,P[1],F,P[0],this.useOpenShapes?j:q,C,"round"],i:c[z],b:i,t:"Data",h:N}):this.toRender({p:["drawShape",this.useRoundRectangles?"roundrect":"rectangle",F,_,E,V,q,j,l[z]],i:c[z],b:i,t:"Data",h:N}),0!=this.unique(R).length&&(this.boxplotNotched&&"range"!=this.boxplotType?this.toRender({p:["drawLine","median",e+b+k+I,P[4],e+(s-b-k)-I,P[4],U,this.boxplotMedianWidth,"butt"],i:c[z],g:Q,t:"Data",h:N}):"range"==this.boxplotType?this.toRender({p:["drawShape","sphere",F,P[4],2.5*C,2.5*C,this.useOpenShapes?j:q,this.useOpenShapes?j:q],i:c[z],g:Q,t:"Data",h:N}):this.toRender({p:["drawLine","median",e+b+k,P[4],e+(s-b-k),P[4],U,this.boxplotMedianWidth,"butt"],i:c[z],g:Q,t:"Data",h:N}),"range"!=this.boxplotType&&("single"==this.boxplotWhiskersType?(this.toRender({p:["drawLine","line",B,P[2],B,P[0],j,!1,"butt"],i:c[z],g:Q,t:"Data",h:N}),this.toRender({p:["drawLine","line",B,P[3],B,P[1],j,!1,"butt"],i:c[z],g:Q,t:"Data",h:N})):"double"==this.boxplotWhiskersType&&(this.toRender({p:["drawLine","error",B,P[2],B,P[0],j,-L,"butt"],i:c[z],g:Q,t:"Data",h:N}),this.toRender({p:["drawLine","error",B,P[3],B,P[1],j,-L,"butt"],i:c[z],g:Q,t:"Data",h:N})))),this.boxplotMean&&this.toRender({p:["drawShape",this.useRoundRectangles?"roundrect":"rectangle",B,y(t[z][6]),w,w,this.boxplotMeanColor,this.boxplotMeanBorderColor],i:c[z],g:Q,b:i,t:"Data",h:N}),t[z][5]&&!this.showBoxplotOriginalData)for(X=0;X<t[z][5].length;X++)this.toRender({p:["drawShape","sphere",B,y(t[z][5][X]),C,C,q,j,l[z]],i:c[z],g:Q,b:i,t:"Data",h:N})}T.hasOwnProperty(O)||(T[O]=[],S[O]=this.cloneObject(c[z])),T[O].push([e+b+s/2,P[4]]),e+=a}else for(z=0;z<t.length;z++)if(this.isGraphTime&&c[z][1]<0)i+=a;else{var Y;N=this.showBoxplotOriginalData?this.isHidden(c[z][0]):this.isHidden(c[z][0],c[z][1],!1,!0);if(this.isGroupedData&&this.showViolinBoxplot&&this.isRawData&&t[z].length>1)(Y=f(this.layoutValid?c[z][1]:z))&&(this.drawViolin(Y,e,i+s/2,s/this.varIndices.length,r,n,o,d[z],p[z],c[z],N,t[z]),this.showBoxplotIfViolin||(M=!0));for(B=i+A,P=[],R=[],O=this.showBoxplotOriginalData||this.showViolinBoxplot?d[z]:h[z],X=0;X<5;X++)P.push(y(t[z][X])),R.push(P[P.length-1].toString());if(!M){var W,$;F=P[2]+(P[3]-P[2])/2,_=i+b+(s-this.variableSpaceFactor)/2,E=P[3]-P[2],V=D,H=!!this.boxplotNotched&&y(t[z][7][0]),G=!!this.boxplotNotched&&y(t[z][7][1]),q=this.showBoxplotOriginalData?this.addColorTransparency(this.getFillColor(h[z],c[z]),this.boxplotTransparency,!0):this.getFillColor(h[z],c[z]),j=0==this.boxplotBorderColor?this.useOpenShapes?this.removeColorTransparency(q):q:this.boxplotBorderColor,U=this.useOpenShapes?j:this.boxplotBorderColor||this.boxplotMedianColor;if(this.boxplotVarWidth&&"Scatter2D"!=this.graphType&&(k+=(D-(V=D*t[z][8]))/2),this.boxplotColor&&(q=this.boxplotColor),this.boxplotNotched&&"range"!=this.boxplotType?(W=[P[4],H,P[2],P[2],H,P[4],P[4]],$=this.showViolinBoxplot?[i+(s-b-k)-I,i+b+k,i+b+k,i+(s-b-k),i+(s-b-k),i+b+k+I,i+(s-b-k)-I]:[i+b+k+I,i+b+k,i+b+k,i+(s-b-k),i+(s-b-k),i+(s-b-k)-I,i+b+k+I],Q=this.toRender({p:["drawShape","polygon",W,$,!1,!1,q,j,l[z]],i:c[z],b:i,t:"Data",h:N}),W=[P[4],G,P[3],P[3],G,P[4],P[4]],this.toRender({p:["drawShape","polygon",W,$,!1,!1,q,j,l[z]],i:c[z],g:Q,b:i,t:"Data",h:N})):Q="range"==this.boxplotType?this.toRender({p:["drawLine","line",P[0],_,P[1],_,this.useOpenShapes?j:q,C,"round"],i:c[z],b:e,t:"Data",h:N}):this.toRender({p:["drawShape",this.useRoundRectangles?"roundrect":"rectangle",F,_,E,V,q,j,l[z]],i:c[z],b:e,t:"Data",h:N}),0!=this.unique(R).length&&(this.boxplotNotched&&"range"!=this.boxplotType?this.toRender({p:["drawLine","median",P[4],i+b+k+I,P[4],i+(s-b-k)-I,U,this.boxplotMedianWidth,"butt"],i:c[z],g:Q,t:"Data",h:N}):"range"==this.boxplotType?this.toRender({p:["drawShape","sphere",P[4],_,2.5*C,2.5*C,this.useOpenShapes?j:q,this.useOpenShapes?j:q],i:c[z],g:Q,t:"Data",h:N}):this.toRender({p:["drawLine","median",P[4],i+b+k,P[4],i+(s-b-k),U,this.boxplotMedianWidth,"butt"],i:c[z],g:Q,t:"Data",h:N}),"range"!=this.boxplotType&&("single"==this.boxplotWhiskersType?(this.toRender({p:["drawLine","line",P[2],B,P[0],B,j,!1,"butt"],i:c[z],g:Q,t:"Data",h:N}),this.toRender({p:["drawLine","line",P[3],B,P[1],B,j,!1,"butt"],i:c[z],g:Q,t:"Data",h:N})):"double"==this.boxplotWhiskersType&&(this.toRender({p:["drawLine","error",P[2],B,P[0],B,j,L,"butt"],i:c[z],g:Q,t:"Data",h:N}),this.toRender({p:["drawLine","error",P[3],B,P[1],B,j,L,"butt"],i:c[z],g:Q,t:"Data",h:N})))),this.boxplotMean&&this.toRender({p:["drawShape",this.useRoundRectangles?"roundrect":"rectangle",y(t[z][6]),B,w,w,this.boxplotMeanColor,this.boxplotMeanBorderColor],i:c[z],g:Q,b:e,t:"Data",h:N}),t[z][5]&&!this.showBoxplotOriginalData)for(X=0;X<t[z][5].length;X++)this.toRender({p:["drawShape","sphere",y(t[z][5][X]),B,C,C,q,j,l[z]],i:c[z],g:Q,b:e,t:"Data",h:N})}T.hasOwnProperty(O)||(T[O]=[],S[O]=this.cloneObject(c[z])),T[O].push([P[4],i+b+s/2]),i+=a}if(this.boxplotConnect)for(var O in T)if(T[O].length>1){var Q=this.toRender({p:["drawLine","line",T[O][0][0],T[O][0][1],T[O][1][0],T[O][1][1],O,this.boxplotConnectWidth,"butt"],i:["Line:",S[O][0],S[O][1]],t:"Data",h:N});for(z=1;z<T[O].length-1;z++)this.toRender({p:["drawLine","line",T[O][z][0],T[O][z][1],T[O][z+1][0],T[O][z+1][1],O,this.boxplotConnectWidth,"butt"],i:["Line:",S[O][0],S[O][1]],g:Q,t:"Data",h:N})}},this.drawGanttPlot=function(t,e,i,s,a,r,n,o,h,l,c,d){for(var p=function(t){return a+(t-h)*o},g=null,u=0;u<t.length;u++){var m=p(t[u][0]),f=p(t[u][1]),y=m+(f-m)/2,x=r+n/2,v=f-m,b=!!e[u]&&v*e[u],A=this.getFillColor(c[u],d[u]),w=this.addColorTransparency(A,this.ganttCompletionTransparency,!0),C=this.getOutlineColor(A,d[u]),T=this.isHidden(!1,d[u][0]),S=this.toRender({p:["drawShape","roundrect",y,x,v,n,w,w,l[u]],i:d[u],g:g,b:a,t:"Data",h:T});if(g||(g=S),e[u]&&(1==e[u]?this.toRender({p:["drawShape","roundrect",y,x,v,n,A,A,l[u]],i:d[u],g:g,b:a,t:"Data",h:T}):this.toRender({p:["drawShape","roundrectl",y-(v-b)/2,x,b,n,A,A,l[u]],i:d[u],g:g,b:a,t:"Data",h:T})),this.toRender({p:["drawShape","roundrect",y,x,v,n,!1,C,"open"],i:d[u],g:g,b:a,t:"Data",h:T}),s.length)for(var M=0;M<s.length;M++){var D=p(s[M][0]);this.toRender({p:["drawShape","triangle2",D,r,n/3,n/3,A,C],i:[].concat(d[u].concat(s[M][1])),g:g,b:a,t:"Data",h:T})}if(i[u]){var k=p(i[u][0]),L=p(i[u][1]),I=i[u][2]+n/2,z=x==I?L:k+(L-k)/2,N=x==I?I:I+n/2,B=y-v/2,P=x;this.toRender({p:["drawLine",N==P?"line":"roundLine",z,N,B,P,this.getOutlineColor(i[u][4]),i[u][5],"butt",0,0,!1,!1,!1,!1,i[u][3]],i:d[u],g:g,b:a,t:"Data",h:T})}}},this.drawViolin=function(t,e,i,s,a,r,n,o,h,l,c,d){var p,g,u,m,f,y,x=[],v=[],b=[],A=[],w=[[],[]],C=t.density.maxY>0?t.density.maxY:1e-6;switch(this.violinScale){case"area":p=s/C*C/t.scale*.9;break;case"count":p=s/C*t.density.sumY/t.area*.9;break;case"width":p=s/C*.9}var T=this.addColorTransparency(this.violinColor||o,this.showBoxplotOriginalData&&!this.violinColor?0:this.violinTransparency,!0);if(this.violinTrim){g=[];for(var S=t.density.trim[0];S<t.density.trim[1];S++)g.push(t.density.xy[S])}else g=t.density.xy;if("vertical"==n)for(S=0;S<g.length;S++)u=g[S][1]*p,m=(g[S][0]-r)*a,x.push(e-u),v.push(i-m),b.push(e+u),A.push(i-m),w[0].push(e),w[1].push(i-m);else for(S=0;S<g.length;S++)u=(g[S][0]-r)*a,m=g[S][1]*p,x.push(e+u),v.push(i-m),b.push(e+u),A.push(i+m),w[0].push(e+u),w[1].push(i);if(x.length>1&&v.length>1){if(this.toRender({p:["drawShape","violin",[x,b],[v,A],!1,!1,T,this.violinBorderColor,h],i:l,b:w,t:"Data",h:c}),this.showViolinQuantiles)for(u=d,S=2;S<=4;S++)if("vertical"==n){for(var M=0;M<g.length;M++)if(g[M][0]>u[S]){f=g[M][1]*p,y=i-(u[S]-r)*a,this.toRender({p:["drawLine","solid",e-f,y,e+f,y,this.violinBorderColor,1.5],t:"Decorations",h:c});break}}else for(M=0;M<g.length;M++)if(g[M][0]>u[S]){f=e+(u[S]-r)*a,y=g[M][1]*p,this.toRender({p:["drawLine","solid",f,i-y,f,i+y,this.violinBorderColor,1.5],t:"Decorations",h:c});break}}else"vertical"==n?(u=e,m=i-(t.density.median[0]-r)*a):(u=e+(t.density.median[0]-r)*a,m=i),this.toRender({p:["drawShape","circle",u,m,this.margin,this.margin,T,this.violinBorderColor,h],i:l,b:w,t:"Data",h:c})},this.drawDotPlot=function(t,e,i,s,a,r,n,o,h,l,c,d,p,g,u,m,f,y,x,v){var b=this,A=function(t,e){for(var i=e[0],s=0,r="",n={n:{},arr:{}},o=0;o<t.length;o++){var h=null!=t[o]?t[o].toString():"";n.n.hasOwnProperty(h)||(n.n[h]=0,n.arr[h]=[]),n.n[h]++,n.n[h]>s&&(s=n.n[h],r=h)}for(var h in n.n[r]*i>a&&(i=a*("center"==b.binAlignment?1:.5)/n.n[r]),n.n)switch(b.binAlignment){case"bottom":case"right":for(n.arr[h].push(0),n.n[h]--;n.n[h]>0;){var l=n.arr[h][0];n.arr[h].unshift(l-i),n.n[h]--}break;case"top":case"left":case"centerwhole":for(n.arr[h].push(0),n.n[h]--;n.n[h]>0;){l=n.arr[h][n.arr[h].length-1];n.arr[h].push(l+i),n.n[h]--}break;case"center":for(n.n[h]%2?(n.arr[h].push(0),n.n[h]--):(n.arr[h].push(-i/2),n.n[h]--,n.arr[h].push(i/2),n.n[h]--);n.n[h]>0;){l=n.arr[h][0];n.arr[h].unshift(l-i),n.n[h]--,l=n.arr[h][n.arr[h].length-1],n.arr[h].push(l+i),n.n[h]--}}return n.arr},w=[],C=v?"Overlays":"Data";if("vertical"==l)for(var T=0;T<t.length;T++){if(this.showBoxplotOriginalData&&this.isRawData||this.graphType.match(/Dot/)||this.graphType.match(/Bar/)&&"lollipop"==this.barType&&!this.isGroupedData){for(var S="movement"!=this.dotplotType&&(!!this.binned&&A(t[T],h[T])),M=0;M<t[T].length;M++)if(!this.isGraphTime||null!=t[T][M]){var D="movement"!=this.dotplotType&&(!!this.jitter&&this.jitterData(this.rep(0,t[T].length),!1,a*this.jitterFactor*.5*this.widthFactor)),k="movement"==this.dotplotType?0:this.binned&&S[t[T][M]]?S[t[T][M].toString()].shift():this.jitter?D[M]:0,L=!!g&&g[T][M],I=s-(t[T][M]-o)*n,z=this.getFillColor(c[T][M],L),N="Boxplot"==this.graphType?0==this.boxplotBorderColor?this.useOpenShapes?this.removeColorTransparency(z):z:this.boxplotBorderColor:0==this.objectBorderColor&&this.useOpenShapes?this.removeColorTransparency(z):this.getOutlineColor(z,L);if(this.graphType.match(/Bar/)&&"lollipop"==this.barType&&L.push("Lollipop"),this.isNumber(I,!0)){if(w.push([i+k,I,h[T][M]/2,L]),this.graphType.match(/Dot/)&&"movement"==this.dotplotType&&M>0){for(var B=w.length-1,P=w.length-2;!this.isNumber(w[P][1],!0)&&P>=0;)P--;if(this.isNumber(w[P][1],!0)){var R=w[B],O=w[P],X=this.addColorTransparency(z,.2);this.toRender({p:["drawShape","polygon",[R[0]-R[2],O[0]-O[2],O[0]+O[2],R[0]+R[2]],[R[1],O[1],O[1],R[1]],!1,!1,X,X],t:"Decorations",h:this.isHidden(R[3][0],R[3][1])||this.isHidden(O[3][0],O[3][1])})}}if(q=this.graphType.match(/Bar/)&&"lollipop"==this.barType&&!this.isGroupedData&&this.barLollipopOpen?this.toRender({p:["drawShape",p[T][M],i+k,I,h[T][M],h[T][M],this.background,z,d[T][M],!1,2,m],i:L,m:u,b:s,t:C,h:this.isHidden(L[0],L[1])}):this.toRender({p:["drawShape",p[T][M],i+k,I,h[T][M],h[T][M],z,N,d[T][M],!1,!1,m],i:L,m:u,b:s,t:C,h:this.isHidden(L[0],this.isGroupedData||"Dotplot"==this.graphType&&null!=L[2]?L[2]:L[1])}),this.showDataValues&&this.toRender({p:["drawText",this.formatNumber(t[T][M]),i+k,I,this.smpLabelFont,this.barLollipopOpen?z:this.foreground,"center","middle"],g:q,t:C,h:this.isHidden(L[0],L[1])}),!this.isGroupedData&&e[T]&&e[T][M]&&this.isNumber(e[T][M],!0)){var F=e[T][M]/2*n;this.toRender({p:["drawLine","error",i+k,I,i+k,I+F,z,-a,"butt",!1,!1,!0],i:L,g:q,t:C,h:this.isHidden(L[0],L[1])}),this.toRender({p:["drawLine","error",i+k,I,i+k,I-F,z,-a,"butt",!1,!1,!0],i:L,g:q,t:C,h:this.isHidden(L[0],L[1])})}}else w.push([i+k,Number.NaN,h[T][M]/2,L])}if(this.showErrorBars&&this.isGroupedData&&e[T]&&e[T]&&this.isNumber(e[T][0],!0)&&this.isNumber(e[T][1],!0)){I=s-(e[T][0]-o)*n,F=e[T][1]/2*n,L=!!g&&[g[T][0][0],g[T][0][1],"error"];this.toRender({p:["drawShape","diamond",i,I,this.margin*this.errorBarsThickness,this.margin*this.errorBarsThickness,this.errorBarsColor,this.errorBarsColor,"closed",!1,!1,m],h:this.isHidden(!1,g[T][0][0]),t:C}),this.toRender({p:["drawLine","line",i,I-F,i,I+F,this.errorBarsColor,this.errorBarsThickness,"butt",!1,!1,m],h:this.isHidden(!1,g[T][0][0]),t:C})}}i+=r}else for(T=0;T<t.length;T++){if(this.showBoxplotOriginalData&&this.isRawData||this.graphType.match(/Dot/)||this.graphType.match(/Bar/)&&"lollipop"==this.barType&&!this.isGroupedData)for(S="movement"!=this.dotplotType&&(!!this.binned&&A(t[T],h[T])),M=0;M<t[T].length;M++)if(!this.isGraphTime||null!=t[T][M]){D="movement"!=this.dotplotType&&(!!this.jitter&&this.jitterData(this.rep(0,t[T].length),!1,a*this.jitterFactor*.5*this.widthFactor)),k="movement"==this.dotplotType?0:this.binned&&S[t[T][M]]?S[t[T][M].toString()].shift():this.jitter?D[M]:0,L=!!g&&g[T][M],I=f?i+f-(t[T][M]-o)*n:i+(t[T][M]-o)*n,z=this.getFillColor(c[T][M],L),N="Boxplot"==this.graphType?0==this.boxplotBorderColor?this.useOpenShapes?this.removeColorTransparency(z):z:this.boxplotBorderColor:0==this.objectBorderColor&&this.useOpenShapes?this.removeColorTransparency(z):this.getOutlineColor(z,L);if(this.graphType.match(/Bar/)&&"lollipop"==this.barType&&L.push("Lollipop"),this.isNumber(I,!0)){if(w.push([I,s+k,h[T][M]/2,L]),this.graphType.match(/Dot/)&&"movement"==this.dotplotType&&M>0){for(B=w.length-1,P=w.length-2;!this.isNumber(w[P][0],!0)&&P>=0;)P--;if(this.isNumber(w[P][0],!0)){R=w[B],O=w[P],X=this.addColorTransparency(z,.2);this.toRender({p:["drawShape","polygon",[R[0],O[0],O[0],R[0]],[R[1]-R[2],O[1]-O[2],O[1]+O[2],R[1]+R[2]],!1,!1,X,X],t:"Decorations",h:this.isHidden(R[3][0],R[3][1])||this.isHidden(O[3][0],O[3][1])})}}if(q=this.graphType.match(/Bar/)&&"lollipop"==this.barType&&!this.isGroupedData&&this.barLollipopOpen?this.toRender({p:["drawShape",p[T][M],I,s+k,h[T][M],h[T][M],this.background,z,d[T][M],!1,2,m],i:L,m:u,b:i,t:C,h:this.isHidden(L[0],L[1])}):this.toRender({p:["drawShape",p[T][M],I,s+k,h[T][M],h[T][M],z,N,d[T][M],!1,!1,m],i:L,m:u,b:i,t:C,h:this.isHidden(L[0],this.isGroupedData||"Dotplot"==this.graphType&&null!=L[2]?L[2]:L[1])}),this.showDataValues&&this.toRender({p:["drawText",this.formatNumber(t[T][M]),I,s+k,this.smpLabelFont,this.barLollipopOpen?z:this.foreground,"center","middle"],g:q,t:C,h:this.isHidden(L[0],L[1])}),!this.isGroupedData&&e[T]&&e[T][M]&&this.isNumber(e[T][M],!0)){F=e[T][M]/2*n;this.toRender({p:["drawLine","error",I,s+k,I+F,s+k,z,a,"butt",!1,!1,!0],i:L,g:q,t:C,h:this.isHidden(L[0],L[1])}),this.toRender({p:["drawLine","error",I,s+k,I-F,s+k,z,a,"butt",!1,!1,!0],i:L,g:q,t:C,h:this.isHidden(L[0],L[1])})}}else w.push([Number.NaN,s+k,h[T][M]/2,L])}if(this.showErrorBars&&this.isGroupedData&&e[T]&&e[T]&&this.isNumber(e[T][0],!0)&&this.isNumber(e[T][1],!0)){I=i+(e[T][0]-o)*n,F=e[T][1]/2*n,L=!!g&&[g[T][0][0],g[T][0][1],"error"];this.toRender({p:["drawShape","diamond",I,s,this.margin*this.errorBarsThickness,this.margin*this.errorBarsThickness,this.errorBarsColor,this.errorBarsColor,"closed",!1,!1,m],h:this.isHidden(!1,!1,"Var-"+g[T][0][0]),t:C}),this.toRender({p:["drawLine","line",I-F,s,I+F,s,this.errorBarsColor,this.errorBarsThickness,"butt",!1,!1,m],h:this.isHidden(!1,!1,"Var-"+g[T][0][0]),t:C})}s+=r}if(this.connectBy&&this.data.x&&this.data.x.hasOwnProperty(this.connectBy)&&this.isRawData){var _=this.meta.data.x[this.connectBy],E=0,V=this.getKeys(this.connectByData),H=this.getCustomColorScheme(V.length),G={};if(this.isGraphTime)for(T=0;T<this.timeValueIndices.length;T++)this.timeValueIndices[T]>0&&(G[T.toString()]=this.timeValueIndices[T]);for(var T in this.connectByData){var q,j=null;t=this.connectByData[T],z=this.connectByNoColor?this.connectByColor:_&&"Numeric"!=_.type?_.connects[_.order[T]%_.connects.length]:H[E%H.length];if(t.length>1)for(M=1;M<t.length;M++){I=this.isGraphTime?w[G[t[M-1]]]:w[t[M-1]],F=this.isGraphTime?w[G[t[M]]]:w[t[M]];I&&F&&(q=this.toRender({p:["drawLine","line",I[0],I[1],F[0],F[1],z,this.connectByWidth,"butt",I[2],F[2],m],i:["Line:"+this.connectBy+" "+T,I[3][0],I[3][2],F[3][2]],g:j,t:C,h:this.isHidden(!1,I[3][2])}),null==j&&(j=q))}E++}}else if(this.connectBy&&this.data.z&&this.data.z.hasOwnProperty(this.connectBy)&&this.isRawData&&(this.connectByDataVar.push(w),x)){_=this.connectBy==this.colorBy&&this.meta.data.z[this.colorBy];for(var T in this.connectByData){if((t=this.connectByData[T]).length>1)for(d=0;d<this.connectByDataVar[0].length;d++)for(M=1;M<t.length;M++){I=this.connectByDataVar[t[M-1]][d],F=this.connectByDataVar[t[M]][d];var U=T;if(I&&F){var Y=this.data.y.vars[I[3][0]],W=this.data.y.vars[F[3][0]],$=this.data.y.smps[I[3][this.isGroupedData?2:1]],Q=this.data.y.smps[F[3][this.isGroupedData?2:1]];U=$==Q?Y+" - "+W+" ("+$+")":Y+" ("+$+") - "+W+" ("+Q+")"}this.toRender({p:["drawLine","line",I[0],I[1],F[0],F[1],this.connectByColor,this.connectByWidth,"butt",I[2],F[2],m],i:["Line:"+this.connectBy+" "+U],t:C,h:this.isHidden(!1,I[3][2])})}}}},this.drawHeatmap=function(t,e,i,s,a,r,n,o,h,l,c){var d=0,p=e,g=.75,u=this.meta.vals;u.colors||(u.colors={});for(var m=0;m<t.length;m++){var f=t[m],y=this.isContour?"rgba(0,0,0,0)":null!=f&&this.isNumber(f,!0)?u.colors[f.toString()]?u.colors[f.toString()]:this.getColorForValue(l,f):this.missingDataColor,x=r&&c?this.addColorTransparency(y,c,!0):r?y:this.heatmapCellBoxColor;u.colors[null==f?"null":f.toString()]=y,c&&(y=this.addColorTransparency(y,c,!0)),"Network"==this.graphType?this.shapeByShape?this.toRender({p:["drawShape",this.shapeByShape,e+s/2,i+a/2,s/2,a/2,y,x,h[m]],i:n[m],m:o,t:"Decorations",h:this.isHidden(n[m])}):this.toRender({p:["drawShape","rectangle",e+s/2,i+a/2,s,a,y,y,h[m]],i:n[m],m:o,t:"Decorations",h:this.isHidden(n[m])}):this.shapeByShape?this.toRender({p:["drawShape",this.shapeByShape,e+s/2,i+a/2,s/2,a/2,y,x,!!h&&h[m]],i:n[m],m:o,t:"Data",h:this.isHidden(n[m][0],n[m][1])}):m>0&&m<t.length-1?d>=.5&&(this.toRender({p:["drawShape","rect",e+(s+g)/2,i+(a+g)/2,s+g,a+g,y,y,!!h&&h[m]],i:n[m],m:o,b:[p,i+(a+g)/2,0,a+g],h:this.isHidden(n[m][0],n[m][1]),t:"Data"}),d=0):this.toRender({p:["drawShape","rect",e+(s+g)/2,i+(a+g)/2,s+g,a+g,y,y,!!h&&h[m]],i:n[m],m:o,b:[p,i+(a+g)/2,0,a+g],h:this.isHidden(n[m][0],n[m][1]),t:"Data"}),this.showDataValues&&this.toRender({p:["drawText",this.formatNumber(f),e+s-2,i+a-2,this.smpLabelFont,this.foreground,"right","bottom"],t:"Data"}),e+=s,d+=s}},this.drawTreemap=function(t,e,i,s,a){for(var r=this,n="vertical"==this.graphOrientation?this.top+this.y:this.left,o=function(t,o){if(o?r.toRender({p:["drawShape","rectangle",t.coords.left+e+t.coords.width/2,t.coords.top+i+t.coords.height/2,t.coords.width,t.coords.height,!1,r.getOutlineColor(t.color),"open",!1,t.outline,s,a],b:n,t:"Data"}):r.toRender({p:["drawShape","rectangle",t.coords.left+e+t.coords.width/2,t.coords.top+i+t.coords.height/2,t.coords.width,t.coords.height,r.getFillColor(t.color,t.index),r.getOutlineColor(t.color,t.index),"closed",!1,!1,s,a],i:t.index,b:n,t:"Data",h:r.isHidden(t.index[0],t.index[1])}),t.label){var h=r.measureText(t.label,r.overlayFont);h+r.margin<t.coords.width&&r.overlayFontSize+r.margin<t.coords.height?o?r.toRender({p:["drawText",t.label,t.coords.left+e+t.coords.width/2,t.coords.top+i+t.coords.height/2,r.overlayFont,r.addColorTransparency(r.foreground,.5,!0),"center","middle"],t:"Data"}):r.toRender({p:["drawText",t.label,t.coords.left+e+r.margin,t.coords.top+i+r.margin,r.overlayFont,r.foreground,"left","top"],t:"Data"}):h+r.margin<t.coords.height&&r.overlayFontSize+r.margin<t.coords.width&&(o?r.toRender({p:["drawText",t.label,t.coords.left+e+t.coords.width/2,t.coords.top+i+t.coords.height/2,r.overlayFont,r.addColorTransparency(r.foreground,.5,!0),"center","middle",-Math.PI/2],t:"Data"}):r.toRender({p:["drawText",t.label,t.coords.left+e+r.margin,t.coords.top+i+r.margin,r.overlayFont,r.foreground,"right","top",-Math.PI/2],t:"Data"}))}},h=function(t){for(var e=0;e<t.length;e++)t[e].children?(h(t[e].children),o(t[e],!0)):o(t[e])},l=0;l<t.length;l++){var c=t[l],d=this.treemapBorderWidth&&!this.isDOE?1:0,p=this.isDOE?0:this.treemapBorderWidth,g=2*p,u=this.smpLabelFontSize*d,m=this.treemapBorderColor,f=e+c.coords.left-p,y=i+c.coords.top-(u+p),x=c.coords.width+g,v=c.coords.height+u+g;if(c.title)this.toRender({p:["disableGradientTransparencyShadow"],t:"Data"}),c.coords.border>1?(this.toRender({p:["drawShape","rectangle",f+x/2,y+(u+p/2)/2,x,u+p/2,m,m,"close",!1,p,s,a],t:"Data"}),this.toRender({p:["drawShape","rectangle",f+x/2,y+v/2,x,v,!1,m,"open",!1,p,s,a],t:"Data"})):(c.coords.border>0||c.coords.border>-1)&&this.toRender({p:["drawShape","rectangle",f+x/2,y+(u+p)+(v-(u+p))/2,x,v-(u+p),!1,m,"open",!1,p,s,a],t:"Data"}),this.measureText(c.title,this.smpLabelFont)+this.margin<x&&this.smpLabelFontSize<=u&&c.coords.height>u+p/2&&this.toRender({p:["drawText",c.title,f+this.margin,y+this.smpLabelFontSize/2,this.smpLabelFont,this.foreground,"left","middle"],t:"Data"}),this.toRender({p:["enableGradientTransparencyShadow"],t:"Data"});c.children?h(c.children):o(c)}},this.drawSankey=function(t){for(var e=t.links[0].target.x-t.links[0].source.x,i=0;i<t.links.length;i++){var s=t.links[i];this.toRender({p:["drawShape","bezier",s.plotX,s.plotY,e,s.dy,this.getFillColor(s.color),this.getOutlineColor(s.color),!1,s.colors],i:s.tooltip,b:[this.left,this.top+this.y/2,e,s.dy],t:"Data"})}for(i=0;i<t.nodes.length;i++){var a=t.nodes[i];this.toRender({p:["drawShape","rectangle",a.plotX+a.dx/2,a.plotY+a.dy/2,a.dx,a.dy,a.color,this.foreground],i:a.tooltip,b:[this.left,this.top+this.y/2,a.dx,a.dy],t:"Data"}),this.toRender({p:["drawText",a.name,a.plotX+a.dx/2,a.plotY+a.dy/2,this.overlayFont,this.overlayColor,"center","middle",-Math.PI/2],i:[a.tooltip[0]+":T"],t:"Data"})}},this.drawTree=function(t,e){if(this.data.tree&&this.data.tree.plot){var i=this.data.tree.plot,s=this.treeNodeSize,a=s/4,r="vertical"==t,n=this,o=function(t){var e=r?t.x0:t.y0,i=r?t.y0:t.x0,h=n.isHidden(!1,t.id);if(n.toRender({p:["drawShape",t.data.shape,e,i,t.data.size,t.data.size,n.getFillColor(t.data.color,t.id),n.treeNodeOutlineColor,t.data.pattern,!1,n.treeLinkWidth],i:["Tree-Node:"+t.id],b:[l,c],t:"Data",h:h}),t.children){for(var d=0;d<t.children.length;d++)o(t.children[d]);if(n.treeCircular){var p=Math.PI/2-t.angle,g=(s/2+n.margin)*Math.cos(p)*(n.treeInverted?-1:1),u=(s/2+n.margin)*Math.sin(p)*(n.treeInverted?-1:1);t.angle<=Math.PI?n.toRender({p:["drawText",t.data.name,e-g,i-u,n.smpLabelFont,n.smpLabelColor,n.treeInverted?"left":"right","middle",p],i:["Tree-Text:"+t.id],b:[l,c],t:"Data",h:h}):n.toRender({p:["drawText",t.data.name,e-g,i-u,n.smpLabelFont,n.smpLabelColor,n.treeInverted?"right":"left","middle",p-Math.PI],i:["Tree-Text:"+t.id],b:[l,c],t:"Data",h:h})}else r?t.parent?n.toRender({p:["drawText",t.data.name,e,i-(s/2+n.margin),n.smpLabelFont,n.smpLabelColor,"right","middle",Math.PI/2],i:["Tree-Text:"+t.id],b:[l,c],t:"Data",h:h}):n.toRender({p:["drawText",t.data.name,e,i-(s/2+n.margin),n.smpLabelFont,n.smpLabelColor,"center","bottom"],i:["Tree-Text:"+t.id],b:[l,c],t:"Data",h:h}):n.toRender({p:["drawText",t.data.name,e-(s/2+n.margin),i,n.smpLabelFont,n.smpLabelColor,"right","middle"],i:["Tree-Text:"+t.id],b:[l,c],t:"Data",h:h})}else if(n.treeCircular){p=Math.PI/2-t.angle,g=(s/2+n.margin)*Math.cos(p)*(n.treeInverted?-1:1),u=(s/2+n.margin)*Math.sin(p)*(n.treeInverted?-1:1);t.angle<=Math.PI?n.toRender({p:["drawText",t.data.name,e+g,i+u,n.smpLabelFont,n.smpLabelColor,n.treeInverted?"right":"left","middle",p],i:["Tree-Text:"+t.id],b:[l,c],t:"Data",h:h}):n.toRender({p:["drawText",t.data.name,e+g,i+u,n.smpLabelFont,n.smpLabelColor,n.treeInverted?"left":"right","middle",p-Math.PI],i:["Tree-Text:"+t.id],b:[l,c],t:"Data",h:h})}else r?n.toRender({p:["drawText",t.data.name,e,i+s/2+n.margin,n.smpLabelFont,n.smpLabelColor,"left","middle",Math.PI/2],i:["Tree-Text-:"+t.id],b:[l,c],t:"Data",h:h}):n.toRender({p:["drawText",t.data.name,e+s/2+n.margin,i,n.smpLabelFont,n.smpLabelColor,"left","middle"],i:["Tree-Text:"+t.id],b:[l,c],t:"Data",h:h});t._children?(n.toRender({p:["drawLine","line",e-a,i,e+a,i,n.foreground],i:["Tree-Line1:"+t.id],b:[l,c],t:"Data",h:h}),n.toRender({p:["drawLine","line",e,i-a,e,i+a,n.foreground],i:["Tree-Line2:"+t.id],b:[l,c],t:"Data",h:h})):t.children&&n.toRender({p:["drawLine","line",e-a,i,e+a,i,n.foreground],i:["Tree-Line1:"+t.id],b:[l,c],t:"Data",h:h})},h=function(t){if(t.children)for(var e=0;e<t.children.length;e++)h(t.children[e]);if(t.parent){var i=r?t.x0:t.y0,s=r?t.y0:t.x0,a=r?t.parent.x0:t.parent.y0,o=r?t.parent.y0:t.parent.x0,d=t._clicked?[a,o,a,o]:[l,c,l,c],p=n.isHidden(!1,t.id);n.toRender({p:["drawLine","bezier",a,o,i,s,n.treeLinkColor,n.treeLinkWidth,!1,!1,!1,!1,!1,!1,!1,!1,!1,!!n.treeCircular&&[t.mx,t.my,t.mx2,t.my2]],i:[t.parent.id+":"+t.id],b:d,t:"Data",h:p}),t._clicked=!1}},l=r?i.x0:i.y0,c=r?i.y0:i.x0;h(i),e||o(i)}},this.zoomOncoprintVariables=function(t){if(!this.isTransition()){var e=[];this.setOriginalIndices(!1,this.varIndices,this.smpIndices),this.varIndicesStart=0;for(var i=0;i<Math.min(t,this.varIndices.length);i++)e.push(this.varIndices[i]);this.varIndices=e,this.draw({func:"zoomOncoprintVariables",par:[t]})}}},CanvasXpress.prototype.init3dUtils=function(){this.setTrigonometry=function(){if(!this.meta.math){this.meta.math={sin:[0],cos:[1]};for(var t=1;t<=360;t++){var e=Math.PI/(180/t);this.meta.math.sin[t]=Math.sin(e),this.meta.math.cos[t]=Math.cos(e)}}},this.set3DRotation=function(){this.setTrigonometry();for(var t=["xRotate","yRotate","zRotate"],e=0;e<t.length;e++)this[t[e]]>360&&(this[t[e]]-=360),this[t[e]]<0&&(this[t[e]]=360)},this.set3DParams=function(){var t=this.zoom,e=this.x;this.perspective=e*this.perspectiveFactor,this.lenX=e/4*t*this.x3DRatio,this.lenY=e/4*t*this.y3DRatio,this.lenZ=e/4*t*this.z3DRatio,this.padX=e/2,this.padY=this.y/2,this.padZ=this.padY},this.get3DTransfrom=function(t,e,i){var s,a,r,n=[],o=this.meta.math.sin,h=this.meta.math.cos,l=this.perspective,c=this.xRotate,d=this.yRotate,p=this.zRotate;return r=i,e=(a=e)*h[parseInt(d)]-r*o[parseInt(d)],s=t,t=(r=i=a*o[parseInt(d)]+r*h[parseInt(d)])*o[parseInt(c)]+s*h[parseInt(c)],i=r*h[parseInt(c)]-s*o[parseInt(c)],a=e,t=(s=t)*h[parseInt(p)]-a*o[parseInt(p)],e=s*o[parseInt(p)]+a*h[parseInt(p)],this.perspective&&(t*=l/(i+l),e*=l/(i+l),i*=l/(i+l)),n.push(t+this.padX),n.push(e+this.padY),n.push(i+this.padZ),n}},CanvasXpress.prototype.initApiUtils=function(){this.getValidGraphTypes=function(){return this.validGraphTypes},this.setHeatmapScheme=function(){this.initializeAttributes()},this.hasIndicator=function(){return!(!this.graphType.match(/Scatter/)&&"Bar"!=this.graphType)},this.hasLegend=function(){return"Network"!=this.graphType&&"Genome"!=this.graphType&&"Correlation"!=this.graphType&&"Heatmap"!=this.graphType},this.hasLegendProperties=function(){return"Network"!=this.graphType&&"Genome"!=this.graphType&&"Correlation"!=this.graphType&&"Heatmap"!=this.graphType&&"Pie"!=this.graphType},this.hasData=function(){return"Network"!=this.graphType&&"Genome"!=this.graphType&&"Venn"!=this.graphType},this.hasDataSamples=function(){return"Network"!=this.graphType&&"Genome"!=this.graphType&&"Venn"!=this.graphType&&"Pie"!=this.graphType&&!this.graphType.match(/Scatter/)&&("Correlation"!=this.graphType||"samples"==this.correlationAxis)},this.hasDataGroups=function(){return"Network"!=this.graphType&&"Genome"!=this.graphType&&"Venn"!=this.graphType&&"Pie"!=this.graphType&&!this.graphType.match(/Scatter/)&&(("Correlation"!=this.graphType||"samples"==this.correlationAxis)&&!!this.data.x)},this.hasDataVariables=function(){return"Network"!=this.graphType&&"Genome"!=this.graphType&&"Venn"!=this.graphType&&("Correlation"!=this.graphType||"variables"==this.correlationAxis)},this.hasDataProperties=function(){return"Network"!=this.graphType&&"Genome"!=this.graphType&&"Heatmap"!=this.graphType&&"Venn"!=this.graphType&&"Pie"!=this.graphType&&"Correlation"!=this.graphType},this.hasOrientation=function(){return"Network"!=this.graphType&&"Genome"!=this.graphType&&"Venn"!=this.graphType&&"Pie"!=this.graphType&&"Correlation"!=this.graphType&&"Circular"!=this.graphType&&!this.graphType.match(/Scatter/)},this.hasOverlays=function(){return"Network"!=this.graphType&&"Genome"!=this.graphType&&"Venn"!=this.graphType&&"Pie"!=this.graphType&&"Correlation"!=this.graphType&&!this.graphType.match(/Scatter/)},this.hasDendrograms=function(){return!("Heatmap"==this.graphType||!this.smpDendrogramNewick&&!this.varDendrogramNewick)},this.hasDecorations=function(){return!(!this.decorations||!(this.decorations.nlfit||this.decorations.line||this.decorations.reg||this.decorations.nor||this.decorations.area))},this.isSegregable=function(){return"Network"!=this.graphType&&"Genome"!=this.graphType&&"Venn"!=this.graphType&&"Pie"!=this.graphType&&"Correlation"!=this.graphType&&!this.graphType.match(/Scatter/)},this.getLineTypes=function(){for(var t=["line"],e=["","dashed","dotted","bezierY","bezierX","curved"],i=["arrow","arrowHead","arrowTail","arrowHeadSquareTail","arrowTailSquareHead","square","squareHead","squareTail","squareHeadArrowTail","squareTailArrowHead"],s=0;s<i.length;s++)t.push(i[s]+"Line");for(s=1;s<e.length;s++)for(var a=0;a<i.length;a++)t.push(e[s]+this.capitalize(i[a])+"Line");return t},this.isValidShape=function(t){var e=["circle","sphere","box","rect","rectangle","rect2","rect3","roundrect","brace","square","triangle","triangle2","equilateral","equilateral2","star","diamond","rhombus","pentagon","hexagon","octagon"];e=(e=(e=e.concat(["oval","oval2","oval3","arc","arc2","arc3","arch","path","polygon","roundpolygon","spline","hull","violin","confidence","bezier","ellipse","ellipse2","ellipse2","plus","minus"])).concat(["pie","pie0","pie1","pie2","pie3","pie4","pie5","pie6","pie7","pie8","pie9","pacman","pacman2","mdavid","image"])).concat(["pch0","pch1","pch2","pch3","pch4","pch5","pch6","pch7","pch8","pch9","pch10","pch11","pch12","pch13","pch14","pch15","pch16","pch17","pch18","pch19","pch20","pch21","pch22","pch23","pch24","pch25"]);for(var i=0;i<e.length;i++)if(e[i]==t)return!0;return!1},this.getHeatmapSchemes=function(){for(var t=[],e=["blue","red","green","yellow","cyan","purple","white","black"],i=0;i<e.length;i++){t.push(e[i]);for(var s=0;s<e.length;s++)e[i]!=e[s]&&t.push(e[i]+"-"+e[s])}return t},this.isCompatibleGraphType=function(t,e){return!!t.match(/^Bar$|^Line$|Boxplot|Dotplot/)&&!!e.match(/^Bar$|^Line$|Boxplot|Dotplot/)},this.isOneDimensionalGraph=function(){return!this.graphType.match(/Scatter|Network|Venn|Genome|Circular|Correlation/)},this.isOneDimensionalCombinationGraph=function(){return this.graphType.match(/BarLine|StackedLine|StackedPercentLine|AreaLine|DotLine/)},this.isHistogramLayout=function(){return this.isHistogram&&this.segregateVariablesBy.length+this.segregateSamplesBy.length>0},this.modifyHighlights=function(t,e,i){var s=i?"highlightVar":"highlightSmp";this.modifyObjectArray(t,e,s)},this.getHighlights=function(t){return this.getObjectArray(t?this.highlightVar:this.highlightSmp)},this.modifyOverlaysProperties=function(t){if(!this.isTransition()){var e,i=[];if(this.isArray(t))i=this.cloneObject(t);else{for(var s=0;s<arguments.length;s++)i.push(this.cloneObject(arguments[s]));t=this.cloneObject(i)}for(var a=this,r=i.shift(),n=this.cloneObject(i);n.length>1;)a[e=n.shift()]||(a[e]={}),a=a[e];a[e=n.shift()]="showLegend"==e?!a[e]:isNaN(r)?r:Number(r),this.draw({func:"modifyOverlaysProperties",par:[t]})}},this.modifySmpOverlays=function(t,e){this.modifyObjectArray(t,e,"smpOverlays")},this.modifyVarOverlays=function(t,e){this.modifyObjectArray(t,e,"varOverlays")},this.getSmpOverlays=function(){return this.getObjectArray(this.smpOverlays)},this.getVarOverlays=function(){return this.getObjectArray(this.varOverlays)},this.getXData=function(){var t=[];if(this.data.x)for(var e in this.data.x)t.push(e);return t},this.getZData=function(){var t=[];if(this.data.z)for(var e in this.data.z)t.push(e);return t},this.getXZData=function(){return this.graphType.match(/Scatter/)?this.getZData():this.getXData()},this.getSamplesVariablesAsArray=function(){return this.graphType.match(/scatter/i)?this.getSamplesAsArray():this.getVariablesAsArray},this.getSamplesAsArray=function(){for(var t=this.getSamples(),e=[],i=0;i<t.length;i++)e.push(t[i].name);return e},this.getVariablesAsArray=function(){for(var t=this.getVariables(),e=[],i=0;i<t.length;i++)e.push(t[i].name);return e},this.getNodeData=function(t){return this.getNetworkData("nodes",t)},this.getEdgeData=function(t){return this.getNetworkData("edges",t)},this.isBooleanData=function(t){for(var e in t)if("numeric"==t[e].t){var i=this.getKeys(t[e].o);(2==i.length&&t[e].o.hasOwnProperty("true")&&t[e].o.hasOwnProperty("false")||1==i.length&&(t[e].o.hasOwnProperty("true")||t[e].o.hasOwnProperty("false"))||1==i.length&&t[e].o.hasOwnProperty(""))&&(t[e].t="string")}},this.getSampleVariableData=function(t,e,i,s,a){var r={smps:{idx:"smpIndices",spc:"x"},vars:{idx:"varIndices",spc:"z"}},n={};if(n[t]={o:{},t:"string"},e)n[t].o=this.getObjectArray(this.data.y[t]);else for(var o=0;o<this[r[t].idx].length;o++)n[t].o[this.data.y[t][this[r[t].idx][o]]]=!0;if(s||a){var h=s?this.getVariableIndices(i):this.getSampleIndices(i,!0);if(this.isArray(i))for(var l=0;l<i.length;l++){if((h=s?this.getVariableIndices(i[l]):this.getSampleIndices(i[l],!0))>-1)if(n[i[l]]={o:{},t:"numeric"},e){var c=this.meta.data.y.range[i[l]];n[i[l]].o={min:c.min,max:c.max}}else{var d=[];if(s)for(o=0;o<this.smpIndices.length;o++)d.push(this.data.y.data[h][this.smpIndices[o]]);else for(o=0;o<this.varIndices.length;o++)d.push(this.data.y.data[this.varIndices[o]][h]);var p=this.range(d);n[i[l]].o={min:p[0],max:p[1]}}}else if((h=s?this.getVariableIndices(i):this.getSampleIndices(i,!0))>-1)if((n={})[i]={o:{},t:"numeric"},e){c=this.meta.data.y.range[i];n[i].o={min:c.min,max:c.max}}else{d=[];if(s)for(o=0;o<this.smpIndices.length;o++)d.push(this.data.y.data[h][this.smpIndices[o]]);else for(o=0;o<this.varIndices.length;o++)d.push(this.data.y.data[this.varIndices[o]][h]);p=this.range(d);n[i].o={min:p[0],max:p[1]}}}if(this.data[r[t].spc])for(var g in this.data[r[t].spc])if(!i||g==i){c=this.meta.data[r[t].spc][g];if(n[g]={o:{},t:c.type.toLowerCase()},e)"Numeric"==c.type?(n[g].t="numeric",n[g].o={min:c.rmin,max:c.rmax}):(n[g].t="string",n[g].o=this.cloneObject(c.levels));else{for(o=0;o<this[r[t].idx].length;o++){var u=this.getMetadataValue(this[r[t].idx][o],r[t].spc,g,!0);n[g].o.hasOwnProperty(u)||(n[g].o[u]=!0)}if("numeric"==n[g].t){d=[];for(var u in n[g].o)for(o=0;o<n[g].o[u];o++)d.push(u);p=this.range(d);n[g].o={min:p[0],max:p[1]}}}}return n},this.getNetworkData=function(t,e){if("Network"==this.graphType&&!this[t+"Data"]){this[t+"Data"]={};var i=this.meta.data[t];for(var s in i)"String"==i[s].type?this[t+"Data"][s]={o:i[s].order,t:i[s].type.toLowerCase()}:this[t+"Data"][s]={o:{min:i[s].rmin,max:i[s].rmax},t:i[s].type.toLowerCase()};if(this[t+"Properties"].length>0)for(var a=0;a<this.data[t].length;a++){var r=this.data[t][a];this.getAdditionalData(r,this[t+"Data"],this[t+"Properties"])}}return"Network"==this.graphType&&(e?this[t+"Data"]:this.getKeys(this[t+"Data"]))},this.getFilteredNetworkData=function(t,e){var i={};if(i[t]={},"Network"==this.graphType){for(var s=0;s<this.data[t].length;s++){var a=this.data[t][s];if(e||!e&&!a.hide)for(var r in a)"object"!=typeof a[r]&&(i[t].hasOwnProperty(r)?(i[t][r].o[a[r]]=!0,isNaN(a[r])&&(i[t][r].t="string")):(i[t][r]={o:{},t:isNaN(a[r])?"string":"numeric"},i[t][r].o[a[r]]=!0));this[t+"Properties"].length>0&&this.getAdditionalData(a,i,this[t+"Properties"])}for(var r in this.isBooleanData(i[t]),i[t])if("numeric"==i[t][r].t){var n=[];for(var o in i[t][r].o)n.push(o);var h=this.range(n);i[t][r].o={min:h[0],max:h[1]}}}return i[t]},this.getFeatureData=function(t){if(!this.featuresData){for(var e={},i=this.skipConfigurableProperties?this.getObjectArray(this.featureConfigurableProperties):{},s=0;s<this.data.tracks.length;s++){for(var a=this.data.tracks[s].data,r=0;r<a.length;r++){var n=a[r];for(var o in n)i[o]||"object"!=typeof n[o]&&(e.hasOwnProperty(o)?(e[o].o.hasOwnProperty(n[o])&&(e[o].o[n[o]]=!0),isNaN(n[o])&&(e[o].t="string")):(e[o]={o:{},t:isNaN(n[o])?"string":"numeric"},e[o].o[n[o]]=!0))}this.featuresProperties.length>0&&this.getAdditionalData(a,e,this.featuresProperties)}this.featuresData=e}return t?this.featuresData:this.getKeys(this.featuresData)},this.getAdditionalData=function(t,e,i){for(var s=0;s<i.length;s++){var a=t,r=!1;if(i[s].length>0){for(var n=0;n<i[s].length;n++){var o=i[s][n];if(!a[o]){r=!0;break}a=a[o]}if(!r)for(var h in a)"object"!=typeof a[h]&&(e.hasOwnProperty(h)?isNaN(a[h])&&(e[h].t="string"):(e[h]={o:{},t:isNaN(a[h])?"string":"numeric",r:s},e[h].o[a[h]]=!0))}}},this.getOperators=function(){return["","like","not like",">",">=","<","<=","==","null","not null"]},this.zoonIn=function(t){this.handleWheelEvent(t,1)},this.zoonOut=function(t){this.handleWheelEvent(t,-1)},this.clusterSamples=function(t,e){this.isTransition()||(this.clusterAxis="samples",!t&&this.smpDendrogramNewick||(this.smpDendrogramNewick=this.cluster()),e||this.draw({func:"clusterSamples",par:[t,e]}))},this.clusterVariables=function(t,e){this.isTransition()||(this.clusterAxis="variables",!t&&this.varDendrogramNewick||(this.varDendrogramNewick=this.cluster()),e||this.draw({func:"clusterVariables",par:[t,e]}))},this.kmeansSamples=function(t,e){if(!this.isTransition()){if(this.clusterAxis="samples",this.data.x||(this.data.x={}),t||!this.data.x["k-Means-S"]){var i=this.kmeans();this.data.x["k-Means-S"]=[];for(var s=0;s<this.smpIndices.length;s++){var a=this.smpIndices[s];this.data.x["k-Means-S"][a]=i[s]}this.smpOverlays.includes("k-Means-S")||this.smpOverlays.push("k-Means-S"),this.updateMetaData("x","k-Means-S",!1,!0),this.modifySort("cat","smp","k-Means-S",!0)}e||this.draw({func:"kmeansSamples",par:[t,e]})}},this.kmeansVariables=function(t,e){if(!this.isTransition()){if(this.clusterAxis="variables",this.data.z||(this.data.z={}),t||!this.data.z["k-Means-V"]){var i=this.kmeans();this.data.z["k-Means-V"]=[];for(var s=0;s<this.varIndices.length;s++){var a=this.varIndices[s];this.data.z["k-Means-V"][a]=i[s]}this.varOverlays.includes("k-Means-V")||this.varOverlays.push("k-Means-V"),this.updateMetaData("z","k-Means-V",!1,!0),this.modifySort("cat","var","k-Means-V",!0)}e||this.draw({func:"kmeansVariables",par:[t,e]})}},this.setFunctions=function(){var t=this.functions;t.push("clusterSamples"),t.push("clusterVariables"),t.push("transpose"),t.push("transform"),t.push("hideUnhideSmps"),t.push("hideUnhideVars"),t.push("desegregateSamples"),t.push("segregateSamples"),t.push("groupSamples"),t.push("ungroupSamples"),t.push("desegregateVariables"),t.push("segregateVariables"),t.push("kmeansSamples"),t.push("kmeansVariables"),t.push("createContour"),t.push("removeContour"),t.push("showCodeDiv"),t.push("hideCodeDiv"),t.push("showInfoDiv"),t.push("hideInfoDiv"),t.push("updateCodeDiv"),t.push("createHistogram"),t.push("removeHistogram"),t.push("addRegressionLine"),t.push("addNormalDistributionLine"),t.push("recalculateLayout"),t.push("createRandomData"),t.push("drawArea"),t.push("draw"),t.push("reset"),t.push("print")},this.initializeApi=function(){this.setFunctions()}},CanvasXpress.prototype.initDimensionUtils=function(){this.resizeCanvas=function(t,e,i){var s=this.margin,a=this.meta.canvas.canvasPixelRatio;if((t||e||i)&&(e||i?(e&&(this.width=e,this.originalWidth=e),i&&(this.height=i,this.originalHeight=i)):t&&(this.width=this.originalWidth,this.height=this.originalHeight),this.top=s+this.getTitleSubtitleHeight(),this.left=s,this.right=s,this.bottom=s,this.resetRender()),this.isSVG||(this.meta.canvas.ctx.canvas.width=this.width*a,this.meta.canvas.ctx.canvas.height=this.height*a,this.meta.canvas.ctx.canvas.style.width=this.width+"px",this.meta.canvas.ctx.canvas.style.height=this.height+"px",this.meta.canvas.ctx2.canvas.width=this.width*a,this.meta.canvas.ctx2.canvas.height=this.height*a,this.meta.canvas.ctx2.canvas.style.width=this.width+"px",this.meta.canvas.ctx2.canvas.style.height=this.height+"px",this.meta.canvas.ctx.scale(a,a),this.meta.canvas.ctx2.scale(a,a)),this.toRender({p:["disableGradientTransparencyShadow"],t:"Size"}),"image"==this.backgroundType)if("Network"==this.graphType){var r=this.scaleFactorX||1,n=this.scaleFactorY||1,o=this.offsetX*r,h=this.offsetY*n,l=this.maxX?this.maxX*r:this.maxX,c=this.maxY?this.maxY*n:this.maxY,d=!!(this.colorNodeBy||this.decorations.length&&this.showDecorations)&&"b&w";CanvasXpress.system.isRStudio=!(!this.isInIframe()||!this.isR),CanvasXpress.system.isRStudio?this.toRender({p:["drawShape","image",l/2+o,c/2+h,l,c,!1,!1,!1,!1,!1,!1,!1,!1,!1,this.backgroundImage],t:"Size"}):this.drawImage(CanvasXpress.cacheImages[this.getFileName(this.backgroundImage)],0,0,this.maxX,this.maxY,o,h,l,c,d)}else this.toRender({p:["drawShape","image",this.width/2,this.height/2,this.width,this.height,!1,!1,!1,!1,!1,!1,!1,!1,!1,this.backgroundImage],t:"Size"});else if("windowImage"==this.backgroundType)"Network"==this.graphType&&this.toRender({p:["drawShape","image",this.left+this.x/2,this.top+this.y/2,this.x,this.y,!1,!1,!1,!1,!1,!1,!1,!1,!1,this.backgroundImage],t:"Size"});else if("solid"==this.backgroundType||"window"==this.backgroundType||"windowSolidGradient"==this.backgroundType)this.toRender({p:["drawShape","rectangle",0+this.width/2,0+this.height/2,this.width,this.height,this.background,this.background],t:"Size"});else{var p=this.getLinearGradient(0,0,"vertical"==this.gradientOrientation?0:this.height,"vertical"==this.gradientOrientation?this.height:0);this.toRender({p:["drawShape","rectangle",0+this.width/2,0+this.height/2,this.width,this.height,p,p],t:"Size"})}this.toRender({p:["enableGradientTransparencyShadow"],t:"Size"})},this.setWidth=function(t,e){this.setDimensions(t,!1,e)},this.setHeight=function(t,e){this.setDimensions(!1,t,e)},this.getWidth=function(){return this.marginLeft+this.left+this.x+this.right+this.marginRight},this.getHeight=function(){return this.marginTop+this.top+this.y+this.bottom+this.marginBottom},this.setDimensions=function(t,e,i,s,a,r){if(!this.isTransition()&&this.resizable&&!(t<5||e<5||t&&e&&Math.abs(this.width-t)<5&&Math.abs(this.height-e)<5)){t&&this.resizableX||(t=this.width),e&&this.resizableY||(e=this.height);var n=this.meta.canvas.ctx.canvas;if(t=n.originalWidth=parseInt(t),e=n.originalHeight=parseInt(e),this.clickLayoutNoAnimation(i),this.reproducing||this.removeMotionDiv(!0),"Network"==this.graphType&&(this.scaleFactorX=null,this.scaleFactorY=null),this.draw({width:t,height:e,func:"setDimensions",par:[t,e,i,s,a,r]}),this.updateRemoteNavigationWindow(),s){var o=this;setTimeout((function(){o.resizeViewport()}),s)}else this.resizeViewport();if(a)try{a()}catch(t){}}},this.initializeDimensions=function(){var t=this.margin,e=this.meta.canvas.ctx.canvas;e.width?(this.originalWidth=e.width,this.width=e.width):this.width?(this.originalWidth=this.width,e.width=this.width):(this.width=600,this.originalWidth=this.width,e.width=this.width),e.height?(this.originalHeight=e.height,this.height=e.height):this.height?(this.originalHeight=this.height,e.height=this.height):(this.height=600,this.originalHeight=this.height,e.height=this.height),this.top=t+this.getTitleSubtitleHeight(),this.left=t,this.right=t,this.bottom=t,this.x=this.width-(this.leftMargin+this.left+this.rightMargin+this.right),this.y=this.height-(this.topMargin+this.top+this.bottomMargin+this.bottom)}},CanvasXpress.prototype.initUtils=function(){this.initGeneralUtils(),this.initPlotUtils(),this.initConfigUtils(),this.init3dUtils(),this.initApiUtils(),this.initDimensionUtils()},CanvasXpress.prototype.initLegendUtils=function(){this.validateLegendPositions=function(){if(this.legendInside||("right"!=this.decorationsPosition&&"bottom"!=this.decorationsPosition&&"Network"!=this.graphType&&(this.decorationsPosition="bottom"),!this.legendPosition||this.legendPosition.toLowerCase().match("top")||this.legendPosition.toLowerCase().match("bottom")||this.legendPosition.toLowerCase().match("right")||this.legendPosition.toLowerCase().match("left")||("Circular"==this.graphType?"top"!=this.legendPosition&&(this.legendPosition="right"):"Pie"!=this.graphType&&(this.legendPosition="right"))),"Pie"==this.graphType&&this.layoutValid&&(this.legendPosition="right"),this.overlaysLegendPosition||(this.overlaysLegendPosition="topRight"),this.layoutValid&&!this.getLayoutConfig("legendPosition")){var t=this.meta.config.orig;t.insideLegend=this.insideLegend,this.insideLegend=!1,"top"!=this.legendPosition&&"bottom"!=this.legendPosition&&"right"!=this.legendPosition&&"left"!=this.legendPosition&&(t.legendPosition=this.legendPosition,this.legendPosition="right")}},this.setLegendTextFont=function(){if(this.autoScaleFont){var t=1-this.percentAspectRatioPlotArea,e=this.layoutComb&&this.isDOE?this.layoutWidth:this.width,i=this.layoutComb&&this.isDOE?this.layoutHeight:this.height,s=this.min(e*t,i*t);this.setPropertyFontSize(s/("Circular"==this.graphType?1.66:1),"legendTextFont"),this.setPropertyFontSize(s/("Circular"==this.graphType?1.66:1),"legendTitleFont")}else this.legendTextFont=this.legendTextFontStyle+" "+parseInt(this.legendTextFontSize)+"px "+this.fontName,this.legendTitleFont=this.legendTitleFontStyle+" "+parseInt(this.legendTitleFontSize)+"px "+this.fontName},this.drawLegendBackgroundBox=function(t,e,i,s,a,r){var n=this.useRoundRectangles?"roundrect":"rectangle",o=r?this.showDecorationsBorder:this.showLegendBorder,h=r?this.decorationsBackgroundColor:this.legendBackgroundColor,l=o?r?this.decorationsBackgroundBorderColor:this.legendBackgroundBorderColor:"rgba(0,0,0,0)",c=o?r?this.decorationsBackgroundBorderSize:this.legendBackgroundBorderSize:0,d=[0,0,this.width,this.height];this.disableGradientTransparencyShadow(),this.toRender({p:["drawShape",n,t+i/2,e+s/2,i,s,h,l,"solid",!1,c,!0,d],i:[-1],m:a,t:"Legends"}),this.enableGradientTransparencyShadow()},this.drawLegendTitle=function(t,e,i,s,a,r,n){if(this.drawLegendBackgroundBox(t,e,i,s,r,n),a&&this.showLegendTitle){var o=this.getFontPt(this.legendTitleFont)/2,h="center"==this.legendTitleAlign?0:"left"==this.legendTitleAlign?-i/2:i/2;e+=this.legendTitleMargin+o,this.toRender({p:["drawText",a,t+i/2+h,e,this.legendTitleFont,this.legendTitleColor,this.legendTitleAlign,"middle"],t:"Legends"}),e+=o+this.legendTitleMargin-this.legendBackgroundBorderSize,this.disableGradientTransparencyShadow(),this.showLegendBorder&&this.toRender({p:["drawLine","line",t,e,t+i,e,this.legendBackgroundBorderColor,this.legendBackgroundBorderSize],t:"Legends"}),this.enableGradientTransparencyShadow()}},this.drawLegendShape=function(t,e,i,s,a,r,n,o,h,l,c){return this.toRender({p:["drawShape",i,t,e,s,s,a,r,n,!1,o],i:h,g:l,t:"Legends",h:c})},this.drawLegendLine=function(t,e,i,s,a,r,n,o,h){var l=t-s/1.1,c=t+s/1.1;return this.toRender({p:["drawLine",i,l,e,c,e,a,r],i:n,g:o,t:"Legends",h:h})},this.drawLegendText=function(t,e,i,s,a,r,n,o){return this.toRender({p:["drawText",i,t,e,s,a,"left","middle"],i:r,g:n,t:"Legends",h:o})},this.drawKeyShape=function(t,e,i,s,a,r,n,o,h,l,c,d,p){var g=this.legendTextMargin,u=Math.max(s||0,Math.ceil(this.getFontPt(this.legendTextFont)))+g,m=Math.ceil(u/2),f=Math.ceil(.6*u),y=this.drawLegendShape(t,e,"rectangle",u,this.legendKeyBackgroundColor,this.legendKeyBackgroundBorderColor,"closed",this.legendKeyBackgroundBorderSize,this.isArray(c)?c:["legend-key-"+c],d,p);d||(d=y),this.drawLegendShape(t,e,i,f,a,r,n,1,this.isArray(c)?c:["legend-shape-"+c],d,p),this.drawLegendText(t+m+g,e,l,this.legendTextFont,this.legendTextColor,this.isArray(c)?c:["legend-text-"+c],d,p)},this.drawKeySize=function(t,e,i,s,a,r,n,o,h,l,c,d,p){var g=this.legendTextMargin,u=Math.max(s[1],Math.ceil(this.getFontPt(this.legendTextFont)))+g,m=Math.ceil(u/2),f=Math.ceil(s[0]),y=this.drawLegendShape(t,e,"rectangle",u,this.legendKeyBackgroundColor,this.legendKeyBackgroundBorderColor,"closed",this.legendKeyBackgroundBorderSize,this.isArray(c)?c:["legend-key-"+c],d,p);d||(d=y),this.drawLegendShape(t,e,i,f,a,r,n,1,this.isArray(c)?c:["legend-shape-"+c],d,p),this.drawLegendText(t+m+g,e,l,this.legendTextFont,this.legendTextColor,this.isArray(c)?c:["legend-text-"+c],d,p)},this.drawKeyLine=function(t,e,i,s,a,r,n,o,h,l,c,d,p){var g=this.legendTextMargin,u=Math.max(s||0,Math.ceil(this.getFontPt(this.legendTextFont)))+g,m=Math.ceil(u/2),f=Math.ceil(.6*u),y=Math.ceil(.5*f),x=this.drawLegendShape(t,e,"rectangle",u,this.legendKeyBackgroundColor,this.legendKeyBackgroundBorderColor,"closed",this.legendKeyBackgroundBorderSize,this.isArray(c)?c:["legend-key-"+c],d,p);d||(d=x),this.drawLegendLine(t,e,o,y,h,1.5,this.isArray(c)?c:["legend-line-"+c],d,p),this.drawLegendText(t+m+g,e,l,this.legendTextFont,this.legendTextColor,this.isArray(c)?c:["legend-text-"+c],d,p)},this.drawKeyLineSize=function(t,e,i,s,a,r,n,o,h,l,c,d,p){var g=this.legendTextMargin,u=Math.max(s||0,Math.ceil(this.getFontPt(this.legendTextFont)))+g,m=Math.ceil(u/2),f=Math.ceil(.6*u),y=Math.ceil(.5*f),x=this.drawLegendShape(t,e,"rectangle",u,this.legendKeyBackgroundColor,this.legendKeyBackgroundBorderColor,"closed",this.legendKeyBackgroundBorderSize,this.isArray(c)?c:["legend-key-"+c],d,p);d||(d=x),this.drawLegendLine(t,e,o,y,h,i,this.isArray(c)?c:["legend-line-"+c],d,p),this.drawLegendText(t+m+g,e,l,this.legendTextFont,this.legendTextColor,this.isArray(c)?c:["legend-text-"+c],d,p)},this.drawKeyShapeLine=function(t,e,i,s,a,r,n,o,h,l,c,d,p){var g=this.legendTextMargin,u=Math.max(s||0,Math.ceil(this.getFontPt(this.legendTextFont)))+g,m=Math.ceil(u/2),f=Math.ceil(.3*u),y=Math.ceil(.7*m),x=this.drawLegendShape(t,e,"rectangle",u,this.legendKeyBackgroundColor,this.legendKeyBackgroundBorderColor,"closed",this.legendKeyBackgroundBorderSize,this.isArray(c)?c:["legend-key-"+c],d,p);d||(d=x),this.drawLegendShape(t,e,i,f,a,r,n,1,this.isArray(c)?c:["legend-shape-"+c],d,p),this.drawLegendLine(t,e,o,y,h,1.5,this.isArray(c)?c:["legend-line-"+c],d,p),this.drawLegendText(t+m+g,e,l,this.legendTextFont,this.legendTextColor,this.isArray(c)?c:["legend-text-"+c],d,p)},this.drawKeyBoxplot=function(t,e,i,s,a,r,n,o,h,l,c,d,p){var g=this.legendTextMargin,u=Math.max(s||0,Math.ceil(this.getFontPt(this.legendTextFont)))+g,m=Math.ceil(u/2),f=Math.ceil(.75*u),y=Math.ceil(.4*u),x=Math.ceil(.6*f),v=Math.ceil(.5*f),b=n||"solid",A=this.useOpenShapes?r:this.foreground,w=this.drawLegendShape(t,e,"rectangle",u,this.legendKeyBackgroundColor,this.legendKeyBackgroundBorderColor,"closed",this.legendKeyBackgroundBorderSize,this.isArray(c)?c:["legend-key-"+c],d,p);d||(d=w),this.toRender({p:["drawLine",b,t,e-x,t,e+x,A,1],i:this.isArray(c)?c:["legend-vline-"+c],g:d,t:"Legends",h:p}),this.toRender({p:["drawShape","rectangle",t,e,f,y,a,A,n,!1,1],i:this.isArray(c)?c:["legend-shape-"+c],g:d,t:"Legends",h:p}),this.drawLegendLine(t,e,b,1.1*v,A,1,this.isArray(c)?c:["legend-hline-"+c],d,p),this.drawLegendText(t+m+g,e,l,this.legendTextFont,this.legendTextColor,this.isArray(c)?c:["legend-text-"+c],d,p)},this.drawKeyConfidence=function(t,e,i,s,a,r,n,o,h,l,c,d,p){var g=this.legendTextMargin,u=Math.max(s||0,Math.ceil(this.getFontPt(this.legendTextFont)))+g,m=Math.ceil(u/2),f=Math.ceil(.75*u),y=Math.ceil(.35*f),x=this.addColorTransparency(a,.5),v=this.drawLegendShape(t,e,"rectangle",u,this.legendKeyBackgroundColor,this.legendKeyBackgroundBorderColor,"closed",this.legendKeyBackgroundBorderSize,this.isArray(c)?c:["legend-key-"+c],d,p);d||(d=v),this.drawLegendShape(t,e,"rectangle",f,x,x,n,1,this.isArray(c)?c:["legend-shape-"+c],d,p),this.drawLegendLine(t,e,o,y,r,1.5,this.isArray(c)?c:["legend-line-"+c],d,p),this.drawLegendText(t+m+g,e,l,this.legendTextFont,this.legendTextColor,this.isArray(c)?c:["legend-text-"+c],d,p)},this.drawKeyLollipop=function(t,e,i,s,a,r,n,o,h,l,c,d,p){var g=this.legendTextMargin,u=Math.max(s||0,Math.ceil(this.getFontPt(this.legendTextFont)))+g,m=Math.ceil(u/2),f=Math.ceil(.75*u),y=Math.ceil(.3*u),x=Math.ceil(.5*f),v=n||"solid",b=this.drawLegendShape(t,e,"rectangle",u,this.legendKeyBackgroundColor,this.legendKeyBackgroundBorderColor,"closed",this.legendKeyBackgroundBorderSize,this.isArray(c)?c:["legend-key-"+c],d,p);d||(d=b),"vertical"==this.graphOrientation?(this.toRender({p:["drawLine",v,t,e-x,t,e+x,r,1.5],i:this.isArray(c)?c:["legend-line-"+c],g:d,t:"Legends",h:p}),this.toRender({p:["drawShape","circle",t,e-.7*y,y,y,a,r,n,!1,1],i:this.isArray(c)?c:["legend-shape-"+c],g:d,t:"Legends",h:p})):(this.toRender({p:["drawLine",v,t-x,e,t+x,e,r,1.5],i:this.isArray(c)?c:["legend-line-"+c],g:d,t:"Legends",h:p}),this.toRender({p:["drawShape","circle",t+x-.3*y,e,y,y,a,r,n,!1,1],i:this.isArray(c)?c:["legend-shape-"+c],g:d,t:"Legends",h:p})),this.drawLegendText(t+m+g,e,l,this.legendTextFont,this.legendTextColor,this.isArray(c)?c:["legend-text-"+c],d,p)},this.drawKeyLabel=function(t,e,i,s,a,r,n,o,h,l,c,d,p){var g=this.legendTextMargin,u=Math.max(s||0,Math.ceil(this.getFontPt(this.legendTextFont)))+g,m=Math.ceil(u/2),f=this.drawLegendShape(t,e,"rectangle",u,a,r,n,1,this.isArray(c)?c:["legend-shape-"+c],d,p);d||(d=f),this.drawLegendText(t+m+g,e,l,this.legendTextFont,this.legendTextColor,this.isArray(c)?c:["legend-text-"+c],d,p)},this.getDiameterLegend=function(){var t=Math.min(this.width,this.height);return Number(Math.max(.5,14*t/833).toFixed(1))*this.legendTextScaleFontFactor},this.setCustomLegendDimensions=function(t){var e=t.text.length,i=this.getDiameterLegend(),s=t.size;if(s)for(var a=0;a<s.length;a++)s[a]&&(i=Math.max(i,s[a]));var r=this.measureText(t.title&&this.showLegendTitle?t.title:"",this.legendTitleFont)+2*this.legendTitleMargin,n=this.measureText(this.getMaxText(t.text),this.legendTextFont),o=this.getFontPt(this.legendTextFont),h=this.getFontPt(this.legendTitleFont),l=this.legendColumns>e?e:this.legendColumns,c=Math.ceil(e/l),d=Math.max(r,(n+i+2*this.legendTextMargin)*l+2*this.legendTextMargin),p=c*(Math.max(i,o)+this.legendTextMargin)+this.legendTextMargin,g=t.title&&this.showLegendTitle?p+h+2*this.legendTitleMargin:p;this.legend[t.id]||(this.legend[t.id]={}),this.legend[t.id].columns=l,this.legend[t.id].meta=t,this.legend[t.id].width=d,this.legend[t.id].height=g},this.setPropertyLegendDimensions=function(t,e,i){var s=this.decapitalize(t)+"By";if(this[s]&&(this[s+"ShowLegend"]||"Network"==this.graphType)||"sample"==t){var a,r,n;e?(a=this[s],"Numeric"==i.type&&"sizeEdge"!=t&&(t.match(/shape/i)&&!this.shapeByContinuous||t.match(/size/i)&&!this.sizeByContinuous)?(r=" "+e+" - "+e+" ",i&&(i.maxLevStrMod=r,i.isRange=!0)):r=e,n=i&&i.sizes?i.sizes:this.sizes):this.data.x&&this.data.x.hasOwnProperty(this[s])?(a=this[s],r=this.meta.data.x[this[s]].maxLevStrMod||this.meta.data.x[this[s]].maxLevStr,n=this.meta.data.x[this[s]].sizes||this.sizes):this.data.z&&this.data.z.hasOwnProperty(this[s])?(a=this[s],r=this.meta.data.z[this[s]].maxLevStrMod||this.meta.data.z[this[s]].maxLevStr,n=this.meta.data.z[this[s]].sizes||this.sizes):s.match("Node")?(a=this[s],r=this.meta.data.nodes[this[s]].maxLevStr,n=this.meta.data.nodes[this[s]].sizes||this.sizes):s.match("Edge")?(a=this[s],r=this.meta.data.edges[this[s]].maxLevStr,n=this.meta.data.edges[this[s]].sizes||this.sizes):(a=0,r=0,n=this.sizes);var o=this.getDiameterLegend();if("size"==t||"sizeNode"==t)for(var h=0;h<this.legend[t].n;h++)n[h]&&(o=Math.max(o,n[h]));else"sample"==t&&(a=0,r=this.legend.sample.maxStr);r.length>this.maxTextSize&&(r=r.substring(0,this.maxTextSize-3)+"...");var l=this.getFontPt(this.legendTextFont),c=this.getFontPt(this.legendTitleFont),d=this.legendColumns,p=d>this.legend["outline"==t?"color":t].n?this.legend["outline"==t?"color":t].n:d,g=Math.ceil(this.legend["outline"==t?"color":t].n/p),u=this.showLegendTitle?this.measureText(a,this.legendTitleFont)+2*this.legendTitleMargin:0,m=(this.measureText(r,this.legendTextFont)+Math.max(o,l)+2*this.legendTextMargin)*p+2*this.legendTextMargin;this.legend["outline"==t?"color":t].columns=p,this.legend["outline"==t?"color":t].width=Math.max(u,m),this.legend["outline"==t?"color":t].height=g*(Math.max(o,l)+this.legendTextMargin)+this.legendTextMargin+("sample"==t?0:this.showLegendTitle?c+2*this.legendTextMargin:0),"Map"==this.graphType&&"orthographic"==this.mapProjection?(this.legend["outline"==t?"color":t].width=0,this.legend["outline"==t?"color":t].height=0):this.legend["outline"==t?"color":t].height>this.height?(this.legendColumns++,this.legend["outline"==t?"color":t].columns++,this.maxTextSize=Math.max(10,this.maxTextSize-5),this.setPropertyLegendDimensions(t,e,i)):this.legend["outline"==t?"color":t].width>this.width&&this.legend["outline"==t?"color":t].columns>1&&(this.legendColumns--,this.legend["outline"==t?"color":t].columns--,this.maxTextSize=Math.max(10,this.maxTextSize-5),this.setPropertyLegendDimensions(t,e,i))}},this.setPropertyLegendIndicatorDimensions=function(t,e){var i=this.decapitalize(t)+"By",s=0,a=0,r=this.getFontPt(this.legendTextFont),n=this.getFontPt(this.legendTitleFont);if(this[i]||"decoration"==t||"contour"==t||"bin2d"==t)switch(t){case"color":case"colorNode":case"colorEdge":case"outline":case"decoration":case"contour":case"bin2d":var o=this.showLegendTitle?this.measureText(this.colorBy||this.outlineBy||this.colorNodeBy||this.colorEdgeBy||"",this.legendTitleFont)+2*this.legendTitleMargin:0,h=e.maxLevLen+3*this.legendTextMargin;this.legendPosition.match(/top|bottom/)?(this.showLegendTitle&&(a+=n+2*this.legendTitleMargin),a+=this.heatmapIndicatorHeight+3*this.legendTextMargin+r,s=this.heatmapIndicatorWidth+Math.max(o,h)):(a=this.heatmapIndicatorWidth+2*this.legendTextMargin+(this.showLegendTitle?n+2*this.legendTitleMargin:0),s=this.heatmapIndicatorHeight+Math.max(o,h)+2*this.legendTextMargin);break;case"shape":case"shapeNode":case"shapeEdge":case"size":case"sizeNode":case"sizeEdge":return void this.setPropertyLegendDimensions(t,e.maxLevStr,e);case"pattern":case"patternNode":case"patternEdge":s=0,a=0}this.legend["outline"==t?"color":t].width=s,this.legend["outline"==t?"color":t].height=a},this.setDecorationsLegendDimensions=function(){if(this.legend.decoration.width=0,this.legend.decoration.height=0,this.legend.decoration.maxLabel=0,this.legend.decoration.columns=this.legendColumns,this.showDecorations&&this.showDecorationsLegend&&this.decorations){this.legendInside||"right"!=this.decorationsPosition&&"bottom"!=this.decorationsPosition&&"Network"!=this.graphType&&(this.decorationsPosition="bottom");for(var t=this.getFontPt(this.decorationsTextFont),e=this.decorations,i=0,s=["nlfit","reg","nor","area"],a=[96,45,30,0,0,0,0],r=[5,2,1,0,0,0,0],n=0;n<s.length;n++)if(e[s[n]]){for(var o=r[n]?this.measureText(this.sprintf("%"+a[n]+"s","X"),this.decorationsTextFont)+this.decorationsTextMargin*r[n]+this.decorationsTextMargin:0,h=0,l=0;l<e[s[n]].length;l++){var c=this.measureText(e[s[n]][l].label,this.decorationsTextFont);h=Math.max(c,h),this.legend.decoration.maxLabel=Math.max(h,this.legend.decoration.maxLabel)}i=Math.max(i,this.decorationsTextMargin+h+this.decorationsTextMargin+o),this.legend.decoration.height=e[s[n]].length*(t+this.decorationsTextMargin)+t+this.decorationsTextMargin}if("Map"==this.graphType&&e.pie&&e.pie[0]&&e.pie[0].smps&&e.pie[0].smps.length){h=0;var d=this.getFontPt(this.decorationsTextFont);for(n=0;n<e.pie[0].smps.length;n++){c=this.measureText(e.pie[0].smps[n],this.decorationsTextFont);h=Math.max(c,h),this.legend.decoration.maxLabel=Math.max(h,this.legend.decoration.maxLabel)}i=Math.max(i,(h+3*this.decorationsTextMargin+2*d)*Math.min(e.pie[0].smps.length,this.legend.decoration.columns)),this.legend.decoration.height+=Math.ceil(e.pie[0].smps.length/Math.min(e.pie[0].smps.length,this.legend.decoration.columns))*d*1.5+2*this.decorationsTextMargin}this.legend.decoration.width=i}},this.setOncoprintLegendDimension=function(){if(this.legend.oncoprint.width=0,this.legend.oncoprint.height=0,this.legend.oncoprint.colors={},this.isOncoprint){var t=this.cloneObject(this.meta.data[this.oncoprintCNA].levels),e=this.cloneObject(this.meta.data[this.oncoprintCNA].colors),i=[];t.push("No Alteration"),e.push("rgb(220,220,220");for(var s=0;s<t.length;s++)i.push("CNA");var a=t.length;if(this.oncoprintMUT){t=t.concat(this.cloneObject(this.meta.data[this.oncoprintMUT].levels)),e=e.concat(this.cloneObject(this.meta.data[this.oncoprintMUT].colors));for(s=a;s<t.length;s++)i.push("MUT")}var r=[],n=[];for(s=0;s<t.length;s++)t[s]&&(r.push(t[s]),n.push(i[s]),this.legend.oncoprint.colors[t[s]]=e[s],"rgb(220,220,220"==e[s]&&(this.legend.oncoprintMutations=r.length));var o=this.getMaxText(r,this.legendTextFont),h=this.measureText(o,this.legendTextFont),l=Math.ceil(h+5+8*this.margin),c=(e=Math.floor(this.width/l),Math.ceil(r.length/e));this.legend.oncoprint.width=l*e,this.legend.oncoprint.height=(21+this.margin)*c+this.margin,this.legend.oncoprint.rows=c,this.legend.oncoprint.cols=e,this.legend.oncoprint.labels=r,this.legend.oncoprint.objects=n}},this.setSampleLegendDimension=function(){this.legend.sample.width=0,this.legend.sample.height=0,this.legend.sample.columns=this.legendColumns,this.legend.sample.maxStr="",this.legend.sample.maxStrLen=0,this.legend.sample.n=1;var t=this.getFontPt(this.legendTextFont),e=0,i=0,s=[],a={};if(!(this.ridgeBy&&1==this.dataStndBy.y.smps.length||this.colorBy&&this.meta.data.x&&this.meta.data.x.hasOwnProperty(this.colorBy)&&(this.xAxisIndices&&1==this.xAxisIndices.length||this.yAxisIndices&&1==this.yAxisIndices.length))){if(this.isHistogram&&this.isHistogramLayout()){for(var r=0;r<this.data.l.axes.length;r++)for(var n=0;n<this.data.l.axes[r].yAxis.length;n++)this.data.l.axes[r].yAxis[n]&&(this.segregateVariablesBy.length||!this.data.l.axes[r].yAxis[n].match(":")?a[this.data.l.axes[r].yAxis[n].split(":")[0]]=!0:this.data.l.axes.length==this.dataStndBy.y.smps.length?a[this.data.l.axes[r].yAxis[n].split(":")[1]]=!0:a[this.data.l.axes[r].yAxis[n]]=!0);s=this.getKeys(a)}if(this.graphType.match(/Scatter/)){if(i=this.ridgeBy?this.dataStndBy.y.smps.length:Math.max(this.xAxisIndices.length,this.yAxisIndices.length),this.ridgeBy)e=this.measureText(this.shortenText(this.getMaxText(this.dataStndBy.y.smps),this.maxSmpStringLen),this.legendTextFont);else if(this.isHistogram)e=this.measureText(this.shortenText(this.getMaxText(this.data.y.smps),this.maxSmpStringLen),this.legendTextFont),i=this.data.y.smps.length-1,this.isHistogramLayout()?(i=s.length,e=this.measureText(this.shortenText(this.getMaxText(s),this.maxSmpStringLen),this.legendTextFont)):this.histogramAsDotplot&&this.colorBy&&(e=0);else if(this.xAxisIndices.length!=this.yAxisIndices.length||this.xAxisIndices.length>1)if(this.xAxisIndices.length==this.yAxisIndices.length&&this.xAxisIndices.length>1)for(r=0;r<this.xAxisIndices.length;r++){var o=this.shortenText(this.xAxis[r],this.maxSmpStringLen)+" vs "+this.shortenText(this.yAxis[r],this.maxSmpStringLen),h=this.measureText(o,this.legendTextFont);h>e&&(this.legend.sample.maxStr=o),e=Math.max(h,e)}else this.xAxisIndices.length>this.yAxisIndices.length?(this.legend.sample.maxStr=this.shortenText(this.getMaxText(this.xAxis),this.maxSmpStringLen)+" vs "+this.shortenText(this.yAxis[0],this.maxSmpStringLen),e=this.measureText(this.legend.sample.maxStr,this.legendTextFont)):this.yAxisIndices.length>this.xAxisIndices.length&&(this.legend.sample.maxStr=this.shortenText(this.getMaxText(this.yAxis),this.maxSmpStringLen)+" vs "+this.shortenText(this.xAxis[0],this.maxSmpStringLen),e=this.measureText(this.legend.sample.maxStr,this.legendTextFont));e&&(this.legend.sample.n=i,this.legend.sample.maxStrLen=e,this.legend.sample.width=(t+e+2*this.legendTextMargin)*this.legend.sample.columns+2*this.legendTextMargin,this.legend.sample.height=Math.ceil(i/this.legend.sample.columns)*(t+this.legendTextMargin)+this.legendTextMargin)}}},this.setVariableLegendDimension=function(t){if(this.showLegend){this.legend.variable.width=0,this.legend.variable.height=0,this.legend.variable.columns=t||this.legendColumns;var e=this,i=this.legend.variable.columns,s=function(){if(e.isDOE&&e.layoutCurrentDOE&&e.layoutCurrentDOE){if(e.meta.data.x&&e.meta.data.x.hasOwnProperty(e.layoutCurrentDOE))return e.meta.data.x[e.layoutCurrentDOE];if(e.meta.data.z&&e.meta.data.z.hasOwnProperty(e.layoutCurrentDOE))return e.meta.data.z[e.layoutCurrentDOE]}return e.meta.data.y}(),a=this.getFontPt(this.legendTextFont);if("Fish"==this.graphType){var r=this.getFontPt(this.legendTextFont),n=this.varIndices.length,o=this.shortenText(s.maxVarStr,this.maxVarStringLen);this.legend.variable.width=(a+2*this.legendTextMargin+this.measureText(o,this.legendTextFont))*i+2*this.legendTextMargin,this.legend.variable.height=Math.ceil(n/Math.min(n,i))*(r+this.legendTextMargin)+2*this.legendTextMargin}if("Pie"==this.graphType){n=this.varIndices.length>this.maxPieSectors?this.maxPieSectors:this.varIndices.length,o=this.isDOE&&this.layoutCurrentDOE?this.shortenText(s.maxLevStr,this.maxVarStringLen):this.shortenText(s.maxVarStr,this.maxVarStringLen);this.maxPieSectors<this.varIndices.length&&o.length<5&&(o=this.shortenText("Other",this.maxVarStringLen));var h=this.measureText(o,this.legendTextFont)+a+3*this.legendTextMargin,l=this.layoutComb&&this.isDOE?this.layoutWidth:this.width,c=1-this.percentAspectRatioPlotArea;this.legend.variable.width=h>l*c?l*c:this.measureText(o,this.legendTextFont)+a+5*this.legendTextMargin,this.legend.variable.height=(a+this.legendTextMargin)*n+2*this.legendTextMargin}else if(this.layoutValid&&this.segregateVariablesBy.length>0&&!this.graphType.match(/Scatter/)){if("variable"==this.segregateVariablesBy[0]||this.segregateVariablesBy.length>1&&"variable"==this.segregateVariablesBy[1])return;if(this.colorBy&&(!this.colorBy||"variable"!=this.colorBy))return;r=s.maxVarChr>this.maxVarStringLen?s.maxVarStr.substring(0,this.maxVarStringLen):s.maxVarStr,n=this.varIndices.length;this.legend.variable.width=(a+2*this.legendTextMargin+this.measureText(r,this.legendTextFont))*i+2*this.legendTextMargin,this.legend.variable.height=Math.ceil(this.varIndices.length/Math.min(n,i))*(a+this.legendTextMargin)+this.legendTextMargin}else if(this.colorBy&&"variable"==this.colorBy||this.shapeBy&&"variable"==this.shapeBy||this.sizeBy&&"variable"==this.sizeBy||this.patternBy&&"variable"==this.patternBy){r=this.sizeBy&&"variable"==this.sizeBy?Math.max(this.sizes[this.varIndices.length-1],this.getFontPt(this.legendTextFont)):this.getFontPt(this.legendTextFont),n=this.varIndices.length,o=this.shortenText(s.maxVarStr,this.maxVarStringLen);this.legend.variable.width=r+this.measureText(o,this.legendTextFont)+2*this.legendTextMargin*Math.min(n,i)+2*this.legendTextMargin,this.legend.variable.height=Math.ceil(n/Math.min(n,i))*(r+this.legendTextMargin)+2*this.legendTextMargin}else if(this.colorBy||"BarLine"!=this.graphType&&"DotLine"!=this.graphType&&"AreaLine"!=this.graphType&&"StackedLine"!=this.graphType&&"StackedPercentLine"!=this.graphType)if(this.colorBy||"Bar"!=this.graphType&&("Line"!=this.graphType||this.lineBy)&&"Area"!=this.graphType&&"Dotplot"!=this.graphType&&"Stacked"!=this.graphType&&"StackedPercent"!=this.graphType&&"Boxplot"!=this.graphType){if("Circular"==this.graphType&&!this.showIdeogram){r=s.maxVarChr>this.maxVarStringLen?s.maxVarStr.substring(0,this.maxVarStringLen):s.maxVarStr;var d=this.rAxisIndex>=0?this.varIndices.length-1:this.varIndices.length;this.legend.variable.width=(a+2*this.legendTextMargin+this.measureText(r,this.legendTextFont))*i+2*this.legendTextMargin,this.legend.variable.height=Math.ceil(d/Math.min(d,i))*(a+this.legendTextMargin)+this.legendTextMargin}}else{r=s.maxVarChr>this.maxVarStringLen?s.maxVarStr.substring(0,this.maxVarStringLen):s.maxVarStr,n=this.varIndices.length;this.legend.variable.width=(a+2*this.legendTextMargin+this.measureText(r,this.legendTextFont))*i+2*this.legendTextMargin,this.legend.variable.height=Math.ceil(this.varIndices.length/Math.min(n,i))*(a+this.legendTextMargin)+this.legendTextMargin}else{var r=s.maxVarChr>this.maxVarStringLen?s.maxVarStr.substring(0,this.maxVarStringLen):s.maxVarStr,n=this.xAxisVarIndices.length+this.xAxis2VarIndices.length;this.legend.variable.width=(a+2*this.legendTextMargin+this.measureText(r,this.legendTextFont))*i+2*this.legendTextMargin,this.legend.variable.height=Math.ceil(n/Math.min(n,i))*(a+this.legendTextMargin)+this.legendTextMargin}this.legend.variable.height>this.height&&(this.legend.variable.columns++,this.maxVarStringLen=Math.max(10,this.maxVarStringLen-5),this.setVariableLegendDimension(this.legend.variable.columns))}},this.setVennLegendDimension=function(){var t=this.data.venn.legend?this.getMaxText(this.data.venn.legend):"N/A";this.legend.width=this.measureText(t,this.legendTextFont)+6*this.margin,this.legend.height=this.margin+this.margin+(this.getFontPt(this.legendTextFont)+this.margin)*this.vennGroups},this.setOverlaysLegendDimensions=function(){var t=this.getFontPt(this.legendTextFont)+2,e=this.getDiameterLegend(),i=Math.max(t,e),s=["varOverlays","smpOverlays"],a=["varOverlayProperties","smpOverlayProperties"],r=["showVarOverlaysLegend","showSmpOverlaysLegend"];this.legend.overlays.layout=[],this.legend.overlays.width=0,this.legend.overlays.height=0;var n=this.margin,o=this.margin,h=0,l=0,c=0,d=!1;if(this.showOverlays&&(this.showVarOverlaysLegend||this.showSmpOverlaysLegend))for(var p=0;p<s.length;p++)if(this[s[p]].length>0&&this[r[p]])for(var g=0;g<this[s[p]].length;g++){var u=0,m=0,f=this[s[p]][g];if("-"!=f){var y="varOverlays"==s[p]?"z":"x",x=this.meta.data[y][f],v=this.measureText(x.maxLevStr,this.legendTextFont),b=this.measureText(f,this.legendTitleFont);("Circular"==this.graphType||this[a[p]][f]&&"Default"==this[a[p]][f].type&&this[a[p]][f].showLegend)&&(d=!0,"String"==x.type?(u=Math.max(b,v+i+3*this.margin)*this[s[p]+"LegendColumns"],m=(Math.max(t,e)+this.margin)*Math.ceil(x.levels.length/this[s[p]+"LegendColumns"])+t+this.margin):this.overlaysLegendPosition.match(/right/i)?(u=Math.max(this.heatmapIndicatorHeight+2*this.margin+v,b),m=this.heatmapIndicatorWidth+3*this.margin+t):(u=this.heatmapIndicatorWidth+3*this.margin+t,m=Math.max(this.heatmapIndicatorHeight+2*this.margin+v,b)),this.legend.overlays[f]||(this.legend.overlays[f]={}),this.legend.overlays[f].width=u,this.legend.overlays[f].height=m,this.overlaysLegendPosition.match(/right/i)?l+this.margin+m>this.height-(this.top+this.bottom)?(n+=this.margin+u,h=u,l=m,this.legend.overlays.layout[c]&&c++,this.legend.overlays.layout[c]=[[y,f,u,m]]):(u>h&&(n+=u-h,h=u),l+=m,this.legend.overlays.layout[c]||(this.legend.overlays.layout[c]=[]),this.legend.overlays.layout[c].push([y,f,u,m])):h+this.margin+u>this.width-(this.left+this.right)?(o+=this.margin+m,h=u,l=m,this.legend.overlays.layout[c]&&c++,this.legend.overlays.layout[c]=[[y,f,u,m]]):(m>l&&(o+=m-l,l=m),h+=u,this.legend.overlays.layout[c]||(this.legend.overlays.layout[c]=[]),this.legend.overlays.layout[c].push([y,f,u,m])))}}this.overlaysLegendPosition.match(/right/i)?(this.legend.overlays.width=d?n+this.margin:0,this.legend.overlays.height=d?l+this.margin:0):(this.legend.overlays.width=d?h+this.margin:0,this.legend.overlays.height=d?o+this.margin:0)},this.setLegendDimensions=function(){if(this.showDecorations&&this.showDecorationsLegend&&this.decorations&&(this.decorationLayout=[0]),this.showLegend){this.legend.layout=[],this.legend.width=0,this.legend.height=0;for(var t=this.margin,e=this.margin,i=0,s=0,a=0,r="Network"==this.graphType?["colorNode","shapeNode","sizeNode","patternNode","colorEdge","sizeEdge","decoration"]:this.scatterPlotMatrix?["color","shape","size","pattern","variable"]:this.connectByNoColor?["color","shape","size","pattern","variable","sample"]:["color","shape","size","line","pattern","connect","variable","sample","contour","bin2d"],n=0;n<r.length;n++){var o=this.legend[r[n]].width,h=this.legend[r[n]].height;("decoration"!=r[n]||this.showDecorations)&&("size"==r[n]&&"Map"==this.graphType&&this.decorations&&this.decorations.pie||o>0&&(this.legendPosition.match(/right|left/i)?s+this.margin+h>this.height?(t+=this.margin+o,i=o,s=h,this.legend.layout[a]=[r[n]],a++):(o>i&&(t+=o-i,i=o),s+=h,this.legend.layout[a]||(this.legend.layout[a]=[]),this.legend.layout[a].push(r[n])):i+this.margin+o>this.width?(e+=this.margin+h,i=o,s=h,this.legend.layout[n]=[r[n]],a++):(h>s&&(e+=h-s,s=h),i+=o,this.legend.layout[a]||(this.legend.layout[a]=[]),this.legend.layout[a].push(r[n]))))}for(n=0;n<this.customLegend.length;n++){this.customLegend[n].id="custom"+n,this.setCustomLegendDimensions(this.customLegend[n]);o=this.legend["custom"+n].width,h=this.legend["custom"+n].height;this.legendPosition.match(/right|left/i)?s+this.margin+h>this.height?(t+=this.margin+o,i=o,s=h,this.legend.layout[a]=[this.customLegend[n].id],a++):(o>i&&(t+=o-i,i=o),s+=h,this.legend.layout[a]||(this.legend.layout[a]=[]),this.legend.layout[a].push(this.customLegend[n].id)):i+this.margin+o>this.width?(e+=this.margin+h,i=o,s=h,this.legend.layout[n]=[this.customLegend[n].id],a++):(h>s&&(e+=h-s,s=h),i+=o,this.legend.layout[a]||(this.legend.layout[a]=[]),this.legend.layout[a].push(this.customLegend[n].id))}this.legend.width=0==i&&t==this.margin?0:this.legendPosition.match(/right|left/i)?t+this.margin:i+this.margin,this.legend.height=0==s&&e==this.margin?0:this.legendPosition.match(/right|left/i)?s+this.margin:e+this.margin}},this.setLegends=function(t){var e=this,i="Network"==this.graphType?["colorNode","shapeNode","sizeNode","patternNode","colorEdge","sizeEdge"]:this.connectByNoColor?["color","shape","size","pattern","outline"]:["color","shape","size","line","pattern","outline","connect","contour","bin2d"],s=["shapeByData","sizeByData","patternByData","outlineByData"],a=function(t,i,s){var a="outline"==i?"color":i,r=(e.decapitalize(a)+"s").replace("Node","").replace("Edge","").replace("decorations","colors");delete e.legend[a].levels,e.legend[a].meta=t,s&&(e.legend[a].meta.vals=e.colorSpectrumBreaks.length?e.colorSpectrumBreaks:e.rPretty(s[0],s[1],5),e.legend[a].meta.decs=e.getNumberDecimals(s[1]-s[0]),e.legend[a].meta.maxLevStr=e.getMaxText(e.legend["outline"==i?"color":i].meta.vals),e.legend[a].meta.maxLevLen=e.measureText(e.legend[a].meta.maxLevStr,e.font),e.legend[a].meta.maxLevChr=e.legend[a].meta.maxLevStr.toString().length),e.ridgeBy&&"data"==e.colorBy&&(e.legend[a].meta.min=e.legend[a].meta.vals[0],e.legend[a].meta.max=e.legend[a].meta.vals[e.legend[a].meta.vals.length-1]),e.legend[a].max=e.legend[a].meta.maxLevStr,e.legend[a].n=e.legend[a].meta.vals.length,e.legend[a].m||(e.legend[a].m=[]);for(var n=0;n<e.legend[a].meta.vals.length;n++)e.legend[a].m[e.legend[a].meta.vals[n].toString()]="connect"==a?e.colors[n]:"contour"==a||"bin2d"==a?e.getColorForValue(t,e.legend[a].meta.vals[n]):e[r][n%e[r].length];e.setPropertyLegendIndicatorDimensions(i,e.legend[a].meta)},r=function(t,i,s,a,r){var n,o=0,h=0,l={},c={},d=t[e.decapitalize(a).replace("Node","").replace("Edge","")+"s"]||e[e.decapitalize(a).replace("Node","").replace("Edge","")+"s"];e.isGroupedData&&"Dotplot"!=e.graphType&&"Boxplot"!=e.graphType&&!e.showBoxplotOriginalData&&e.groupingFactors.length;if("x"==i){var p;p="Scatter2D"==e.graphType?1==e.xAxisIndices.length?e.yAxisIndices:1==e.yAxisIndices.length?e.xAxisIndices:e.smpIndices:e.isGroupedData?e.grpIndices:e.smpIndices;for(var g=0;g<p.length;g++){var u=p[g];if(e.isGroupedData&&("Dotplot"==e.graphType||"Boxplot"==e.graphType||"swimmer"==e.barType||"Gantt"==e.graphType||e.stackBy||e.lineBy||e.dodgeBy)){e.isGroupedData=!1;for(var m=0;m<e.data.w.grps[u].length;m++){c[f=e.getMetadataValue(e.data.w.grps[u][m],i,e[s])]=!0}e.isGroupedData=!0}else{e.isGroupedData?(e.isGroupedData=!1,f=e.getSmpAnnotations(e[s],e.data.w.grps[g],!0),e.isGroupedData=!0):f=e.getMetadataValue(u,i,e[s]),c[f]=!0}}}else if("z"==i)if("Map"==e.graphType&&e.varIndices.length<t.levels.length||e.isCreateHistogram&&e.histogramAsDotplot)for(g=0;g<t.levels.length;g++){c[f=t.levels[g]]=!0}else for(g=0;g<e.varIndices.length;g++){u=e.varIndices[g];c[f=e.getMetadataValue(u,i,e[s])]=!0}else if("m"==i)for(g=0;g<e.varIndices.length;g++)for(m=0;m<e.smpIndices.length;m++){c[f=r[e.varIndices[g]][e.smpIndices[m]]]=!0}else if("modified"==i){t.order={};for(g=0;g<t.levels.length;g++)c[t.levels[g]]=!0,t.order[t.levels[g]]=g}else if("nodes"==i||"edges"==i){t.order={};for(g=0;g<t.levels.length;g++)c[t.levels[g]]=!0,t.order[t.levels[g]]=g}if(c=e.getKeys(c),"Numeric"==t.type)if(t.orderS)c.sort((function(e,i){return t.orderS[e]-t.orderS[i]}));else{c.sort((function(t,e){return t-e})),t.orderS={};for(g=0;g<c.length;g++)t.orderS[c[g]]=g}else c.sort((function(e,i){return t.order[e]-t.order[i]}));for(g=0;g<c.length;g++){var f=null!=c[g]?c[g]:"NA",y=e.measureText(f,e.legendTextFont);y>o&&(o=y,e.legend[a].max=f),l[f]=("Numeric"==t.type?t.orderS[f]:t.order[f])%d.length,e.legend[a].m[f]=d[l[f]],h++}e.legend[a].levels=c,n=("m"==i||"modified"==i)&&e.legend[a].max,e.legend[a].n=h,e.legend[a].meta=t,e.setPropertyLegendDimensions(a,n,t)};if(this.hiddenLegends||(this.hiddenLegends={}),this.validateLegendPositions(),this.setLegendTextFont(),"Meter"!=this.graphType&&"Correlation"!=this.graphType)if("Venn"!=this.graphType){if("Network"==this.graphType){for(var n=0;n<i.length;n++){var o=i[n],h=(f=this.decapitalize(i[n]))+"By";if(this.legend[o].m={},this.legend[o].n=0,this.legend[o].width=0,this.legend[o].height=0,this[h])"Numeric"==(l=this.meta.data[o.match("Node")?"nodes":"edges"][this[h]]).type?a(l,o):r(l,o.match("Node")?"nodes":"edges",h,o)}if(this.decorations.length&&"heatmap"==this.decorationsType&&this.meta.data.decorations.n&&this.showDecorations){var l=this.meta.data.decorations;o="decoration";this.legend[o].m={},this.legend[o].n=0,this.legend[o].width=0,this.legend[o].height=0,a(l,o)}}else if(this.isMultidimensionalData){for(n=0;n<s.length;n++)if(this.data.y[this[s[n]]]){var c=this.data.y[this[s[n]]];l=this.meta.data[this[s[n]]],o=s[n].replace("ByData",""),h=(f=this.decapitalize(o))+"By";this.legend["outline"==o?"color":o].m=[],this.legend["outline"==o?"color":o].n=0,"Numeric"==l.type?a(l,o,[l.min,l.max]):r(l,"m",h,o,c)}}else if("bin2d"==this.scatterType){for(n=0;n<i.length;n++){o=i[n],h=(f=this.decapitalize(i[n]))+"By";this.legend[o].m={},this.legend[o].n=0,this.legend[o].width=0,this.legend[o].height=0}if(!this.meta.data.b.g){var d=this.xAxisIndices[this.xAxisCurrent],p=this.yAxisIndices[this.yAxisCurrent],g=this.getAxisDataBySample(d,"x"),u=this.getAxisDataBySample(p,"y"),m=this.hist2d(g,u);this.meta.data.b.g=m,this.meta.data.b.c=m.brew}o="bin2d";a(l=this.meta.data.b.c,o)}else if(this.isContour&&this.contourFilled){for(n=0;n<i.length;n++){o=i[n],h=(f=this.decapitalize(i[n]))+"By";this.legend[o].m={},this.legend[o].n=0,this.legend[o].width=0,this.legend[o].height=0}this.meta.data.q.g.length&&this.meta.data.q.g[0]&&this.meta.data.q.g[0].data||this.createContour(this.isContour,!0);o="contour";a(l=this.meta.data.q.g[0].data.colorBrew,o)}else for(n=0;n<i.length;n++){var f;o=i[n],h=(f=this.decapitalize(i[n]))+"By";if(this.legend[o].m={},this.legend[o].n=0,this.legend[o].width=0,this.legend[o].height=0,!t&&("Scatter2D"!=this.graphType||!this.lineBy||!this.ribbonBy||this.colorBy!=this.lineBy||"colorBy"!=h)&&this[h])if(this.data.x&&this.data.x.hasOwnProperty(this[h])){l=this.meta.data.x[this[h]];this[f+"ByType"]="x","Numeric"!=l.type||l[h]?r(l,"x",h,o):a(l,o)}else if(this.data.z&&this.data.z.hasOwnProperty(this[h])){l=this.meta.data.z[this[h]];this[f+"ByType"]="z","Numeric"!=l.type||l[h]?r(l,"z",h,o):a(l,o,!!this.colorSpectrumBreaks.length)}else{if(this.getSampleIndices(this[h])>-1&&this.meta.data.y.range[this[h]])(l=this.meta.data).modified&&l.modified.z&&l.modified.z[this[h]]?((l=l.modified.z).meta||(l.meta={}),l.meta[this[h]]={levels:l[this[h]]},r(l.meta[this[h]],"modified",h,o)):a(l=l.y.range[this[h]],o,[l.min,l.max]);else if("variable"==this[h])e.legend[o].n=this.varIndices.length;else if(this.ridgeBy&&"data"==this[h])a({type:"Numeric"},o,[this.xAxisMin,this.xAxisMax]);else if(this.isCreateHistogram&&this.histogramAsDotplot&&this.dataStndBy&&this.dataStndBy.z&&this.dataStndBy.z.hasOwnProperty(this[h]))"Numeric"!=(l=this.meta.data.z[this[h]]).type||l[h]?r(l,"z",h,o):a(l,o)}}this.setDecorationsLegendDimensions(),this.setSampleLegendDimension(),this.setVariableLegendDimension(),this.setOncoprintLegendDimension(),this.setOverlaysLegendDimensions(),this.setLegendDimensions()}else this.setVennLegendDimension()},this.addLegend=function(t,e){if(t){if(e){var i=this.findXYCoordinates(e);t.x=i.x,t.y=i.y}this.customLegend.push(t)}},this.deleteLegend=function(t){if(t&&t.id){for(var e=[],i=0;i<this.customLegend.length;i++)this.customLegend[i].id!=t.id&&e.push(this.customLegend[i]);this.customLegend=e}},this.drawDecorationData=function(){this.toRender({p:["setClipArea",this.setClipBoundaries()],t:"Decorations"});var t=this.marginLeft+this.offsetX+this.left,e=this.marginTop+this.offsetY+this.top,i=this.decorations;if(this.showDecorations&&i)if(this.graphType.match(/Scatter/)){if(i.nlfit)for(var s,a,r,n=this.varIndices,o=0;o<i.nlfit.length;o++){var h=[],l=[],c=o%this.colors.length,d=Number(this.transformValue(this.yAxisTransform,i.nlfit[o].param[0])),p=Number(this.transformValue(this.yAxisTransform,i.nlfit[o].param[1])),g=Number(i.nlfit[o].param[2]),u=Number(i.nlfit[o].param[3]),m=1==this.xAxisIndices.length?this.xAxisIndices[0]:this.xAxisIndices[o],f=this.getDataForSmpGrpAtIndex(m);"percentile"==this.xAxisTransform&&(r=(s=this.range(f))[0],a=s[1]),n.sort((function(t,e){return f[t]-f[e]})),c=i.nlfit[o].color?i.nlfit[o].color:this.colors[c];for(var y=0;y<n.length;y++){var x=n[y],v=[];if((T=this.getDataAtPos(x,m))>0){if(y>0){var b=n[y-1];if((ht=this.getDataAtPos(b,m))>0)for(var A=(T-ht)/25,w=0;w<25;w++)v.push(ht),ht+=A}else v=[T];for(w=0;w<v.length;w++)S="reg"==i.nlfit[o].type?d+(p-d)/(1+g/Math.pow(v[w],u)):d+(p-d)/(1+Math.pow(v[w]/g,u)),this.xAxisTransform&&(v[w]="percentile"==this.xAxisTransform?this.percentile(r,a,v[w]):this.transformValue(this.xAxisTransform,v[w])),gt=t+(v[w]-this.xAxisMin)*this.xAxisUnit,$=e+this.y-(S-this.yAxisMin)*this.yAxisUnit,h.push(gt),l.push($)}}if(h.length>0){this.toRender({p:["drawShape","path",h,l,!1,!1,c,c,"open",!1,!1,!0],i:["Decor-Non-Lin-"+y+"-"+o],t:"Decorations"}),S="reg"==i.nlfit[o].type?d+(p-d)/(1+g/Math.pow(g,u)):d+(p-d)/(1+Math.pow(g/g,u)),this.xAxisTransform&&(g="percentile"==this.xAxisTransform?this.percentile(r,a,g):this.transformValue(this.xAxisTransform,g)),gt=t+(g-this.xAxisMin)*this.xAxisUnit,$=e+this.y-(S-this.yAxisMin)*this.yAxisUnit;var C=this.toRender({p:["drawLine","dottedLine",t,$,gt,$,c],i:["Decor-Non-Lin-EC-h"+y+"-"+o],t:"Decorations"});this.toRender({p:["drawLine","dottedLine",gt,$,gt,e+this.y,c],i:["Decor-Non-Lin-EC-v"+y+"-"+o],g:C,t:"Decorations"})}}if(i.text)for(o=0;o<i.text.length;o++)if(null!=i.text[o].x||null!=i.text[o].y){c=i.text[o].color?i.text[o].color:this.foreground;var T=null!=i.text[o].x?i.text[o].x:null,S=null!=i.text[o].y?i.text[o].y:null,M=i.text[o].label||!1,D=i.text[o].scope||!1,k=i.text[o].align||"left";if(D){var L=!this.layoutValid;if(this.layoutValid){var I=this.data.l.name[this.layoutCurrent];this.isArray(I)||(I=[I]);for(y=0;y<I.length;y++)if(D.toString()==I[y].toString().replace("\0","")){L=!0;break}}if(!L)continue}null!=T&&null!=S&&M&&(gt=t+(T-this.xAxisMin)*this.xAxisUnit,$=e+this.y-(S-this.yAxisMin)*this.yAxisUnit,"right"==k?this.toRender({p:["drawText",M,gt,$,this.decorationsTextFont,c,"right","middle"],t:"Decorations"}):"center"==k?this.toRender({p:["drawText",M,gt,$,this.decorationsTextFont,c,"center","middle"],t:"Decorations"}):this.toRender({p:["drawText",M,gt,$,this.decorationsTextFont,c,"left","middle"],t:"Decorations"}))}if(i.line)for(o=0;o<i.line.length;o++)if(null!=i.line[o].x||null!=i.line[o].y){c=i.line[o].color?i.line[o].color:this.colors[o%this.colors.length];var z=i.line[o].type?i.line[o].type:"line",N=(T=null!=i.line[o].x?i.line[o].x:null,S=null!=i.line[o].y?i.line[o].y:null,null!=i.line[o].x2?i.line[o].x2:null),B=null!=i.line[o].y2?i.line[o].y2:null,P=i.line[o].width?i.line[o].width:1,R=(M=i.line[o].label||!1,k=i.line[o].align||"left",D=i.line[o].scope||!1,this.isArray(T)&&this.isArray(S)&&null==N&&null==B),O=null;if(this.isCreateHistogram&&(null!=T&&(T-=this.isCreateHistogram.min),null!=N&&(N-=this.isCreateHistogram.min)),D){L=!this.layoutValid;if(this.layoutValid){I=this.data.l.name[this.layoutCurrent];this.isArray(I)||(I=[I]);for(y=0;y<I.length;y++)if(D.toString()==I[y].toString().replace("\0","")){L=!0;break}}if(!L)continue}if(R)for(y=1;y<T.length;y++)gt=t+(T[y-1]-this.xAxisMin)*this.xAxisUnit,xt=t+(T[y]-this.xAxisMin)*this.xAxisUnit,$=e+this.y-(S[y-1]-this.yAxisMin)*this.yAxisUnit,Q=e+this.y-(S[y]-this.yAxisMin)*this.yAxisUnit,yt=M||"",1==y?O=this.toRender({p:["drawLine",z,gt,$,xt,Q,c,P],i:[yt+":Decor-Line-"+o],t:"Decorations"}):this.toRender({p:["drawLine",z,gt,$,xt,Q,c,P],i:[yt+":Decor-Line-"+o],g:O,t:"Decorations"});else null!=T&&null!=S&&null!=N&&null!=B?(gt=t+(T-this.xAxisMin)*this.xAxisUnit,xt=t+(N-this.xAxisMin)*this.xAxisUnit,$=e+this.y-(S-this.yAxisMin)*this.yAxisUnit,Q=e+this.y-(B-this.yAxisMin)*this.yAxisUnit,yt=i.line[o].tooltip||"("+T+","+S+") &rarr; ("+N+","+B+")",this.toRender({p:["drawLine",z,gt,$,xt,Q,c,P],i:[yt+":Decor-Line-"+o],t:"Decorations"})):null!=T?(xt=gt=t+(T-this.xAxisMin)*this.xAxisUnit,Q=($=e)+this.y,yt=i.line[o].tooltip||"x &rarr; "+(this.isCreateHistogram?T+this.isCreateHistogram.min:T),this.toRender({p:["drawLine",z,gt,$,xt,Q,c,P],i:[yt+":Decor-Line-"+o],t:"Decorations"})):null!=S&&(gt=t,$=e+this.y-(S-this.yAxisMin)*this.yAxisUnit,xt=gt+this.x,Q=$,yt=i.line[o].tooltip||"y &rarr; "+S,this.toRender({p:["drawLine",z,gt,$,xt,Q,c,P],i:[yt+":Decor-Line-"+o],t:"Decorations"}));if(M&&!R)if(null!=i.line[o].y2){var X=this.getRadians(gt,$,xt,Q);"right"==k?this.toRender({p:["drawText",M,xt,Q,this.decorationsTextFont,this.decorationsTextColor,"right","bottom",X],t:"Decorations"}):"center"==k?this.toRender({p:["drawText",M,(gt+xt)/2,($+Q)/2,this.decorationsTextFont,this.decorationsTextColor,"center","bottom",X],t:"Decorations"}):this.toRender({p:["drawText",M,gt,$,this.decorationsTextFont,this.decorationsTextColor,"left","bottom",X],t:"Decorations"})}else"right"==k?this.toRender({p:["drawText",M,xt-this.margin,Q-this.margin,this.decorationsTextFont,this.decorationsTextColor,"right","bottom"],t:"Decorations"}):"center"==k?this.toRender({p:["drawText",M,(gt+xt)/2,Q-this.margin,this.decorationsTextFont,this.decorationsTextColor,"center","bottom"],t:"Decorations"}):this.toRender({p:["drawText",M,gt+this.margin,Q-this.margin,this.decorationsTextFont,this.decorationsTextColor,"left","bottom"],t:"Decorations"})}if(i.reg)for(o=0;o<i.reg.length;o++)if(i.reg[o].slope&&i.reg[o].intercept){var F=i.reg[o].fit?i.reg[o].fit:this.colors[o%this.colors.length],_=(c=i.reg[o].color?i.reg[o].color:this.colors[o%this.colors.length],this.addColorTransparency(c,.3,!0)),E=this.getPropertyValue(o,!1,"patternBy"),V=i.reg[o].style?i.reg[o].style:this.fitLineStyle,H=Number(i.reg[o].slope),G=Number(i.reg[o].intercept),q=i.reg[o].id,j=i.reg[o].cor,U="y ~ "+this.formatNumber(H,this.yAxisDecs+1)+"x + "+this.formatNumber(G,this.yAxisDecs+1)+(j?" (r = "+this.formatNumber(j,3)+")":""),Y=!!i.reg[o].ci&&i.reg[o].ci,W=!!Y&&Y.length-1,$=H*(gt=this.showRegressionFullRange||!Y?this.xAxisMin:Y[0][0])+G,Q=H*(xt=this.showRegressionFullRange||!Y?this.xAxisMax:Y[W][0])+G;gt=t+gt*this.xAxisUnit-this.xAxisMin*this.xAxisUnit,$=e+this.y-$*this.yAxisUnit+this.yAxisMin*this.yAxisUnit,xt=t+xt*this.xAxisUnit-this.xAxisMin*this.xAxisUnit,Q=e+this.y-Q*this.yAxisUnit+this.yAxisMin*this.yAxisUnit;var K=this.lineClip([[gt,$],[xt,Q]]);if(K.length&&this.toRender({p:["drawLine",V,K[0][0][0],K[0][0][1],K[0][1][0],K[0][1][1],F,2],i:["Decor-Reg-"+o,q],t:"Decorations",h:this.isHidden(!1,!1,q)}),Y){var J=[],Z=[],tt=[];for(y=0;y<Y.length;y++)gt=t+Y[y][0]*this.xAxisUnit-this.xAxisMin*this.xAxisUnit,$=e+this.y-Y[y][1]*this.yAxisUnit+this.yAxisMin*this.yAxisUnit,Q=e+this.y-Y[y][2]*this.yAxisUnit+this.yAxisMin*this.yAxisUnit,J.push([gt,gt]),Z.push([$,Q]),tt.push([gt,($+Q)/2]);this.showConfidenceIntervals&&this.toRender({p:["drawShape","confidence",J,Z,!1,!1,_,c,E],i:[U+":Confidence",q],b:tt,t:"Decorations",h:this.isHidden(!1,!1,q)})}}if(i.nor)for(o=0;o<i.nor.length;o++)if(i.nor[o].mu&&i.nor[o].sigma){var et=[],it=[],st=[],at=(c=o%this.colors.length,i.nor[o].mu),rt=i.nor[o].sigma,nt=i.nor[o].start?i.nor[o].start:i.nor[o].yAxis?this.yAxisMin:this.xAxisMin,ot=i.nor[o].end?i.nor[o].end:i.nor[o].yAxis?this.yAxisMax:this.xAxisMax;if(nt<at&&at<ot){A=(at-nt)/120;var ht,lt,ct,dt=rt*rt,pt=1/Math.sqrt(2*Math.PI*dt);if(i.nor[o].yAxis){ct=(i.nor[o].max?i.nor[o].max*this.xAxisUnit:this.x-this.x*this.axisExtension)/pt,ht=nt;for(y=0;y<119;y++)lt=pt*Math.pow(Math.E,-Math.pow(ht-at,2)/dt),st.push([ht,lt]),gt=t+lt*ct,$=e+this.y-ht*this.yAxisUnit+this.yAxisMin*this.yAxisUnit,et.push(gt),it.push($),ht+=A;A=(ot-at)/120,ht=at;for(y=0;y<120;y++)lt=pt*Math.pow(Math.E,-Math.pow(ht-at,2)/dt),st.push([ht,lt]),gt=t+lt*ct,$=e+this.y-ht*this.yAxisUnit+this.yAxisMin*this.yAxisUnit,et.push(gt),it.push($),ht+=A;c=i.nor[o].color?i.nor[o].color:this.colors[c],this.toRender({p:["drawShape","path",et,it,!1,!1,c,c,"open",!1,!1,!0],i:["Decor-Nor-"+o],t:"Decorations"})}else{ct=(i.nor[o].max?i.nor[o].max*this.yAxisUnit:this.y-this.y*this.axisExtension)/pt,ht=nt;for(y=0;y<119;y++)lt=pt*Math.pow(Math.E,-Math.pow(ht-at,2)/dt),st.push([ht,lt]),gt=t+ht*this.xAxisUnit-this.xAxisMin*this.xAxisUnit,$=e+this.y-lt*ct,et.push(gt),it.push($),ht+=A;A=(ot-at)/120,ht=at;for(y=0;y<120;y++)lt=pt*Math.pow(Math.E,-Math.pow(ht-at,2)/dt),st.push([ht,lt]),gt=t+ht*this.xAxisUnit-this.xAxisMin*this.xAxisUnit,$=e+this.y-lt*ct,et.push(gt),it.push($),ht+=A;c=i.nor[o].color?i.nor[o].color:this.colors[c],this.toRender({p:["drawShape","path",et,it,!1,!1,c,c,"open",!1,!1,!0],i:["Decor-Nor-"+o],t:"Decorations"})}}}if(i.area)for(o=0;o<i.area.length;o++)if(i.area[o].type&&i.area[o].x&&i.area[o].y&&i.area[o].width&&i.area[o].height&&this.isValidShape(i.area[o].type)){var gt=t+i.area[o].x*this.xAxisUnit-this.xAxisMin*this.xAxisUnit,ut=($=e+this.y-i.area[o].y*this.yAxisUnit+this.yAxisMin*this.yAxisUnit,c=i.area[o].color?i.area[o].color:this.colors[o%this.colors.length],i.area[o].width*this.xAxisUnit),mt=i.area[o].height*this.yAxisUnit;this.oRender({p:["drawShape",i.area[o].type,gt,$,ut,mt,c,i.area[o].outline,i.area[o].pattern,i.area[o].rotate],i:["Decor-Area-"+o],t:"Decorations"})}if(i.point)for(o=0;o<i.point.length;o++)if(i.point[o].x&&i.point[o].y){gt=t+(i.point[o].x-this.xAxisMin)*this.xAxisUnit,$=e+this.y-(i.point[o].y-this.yAxisMin)*this.yAxisUnit;var ft=i.point[o].shape||"circle",yt=(c=i.point[o].color||this.foreground,ut=i.point[o].width||.5*this.dataPointSize,mt=i.point[o].height||.5*this.dataPointSize,this.formatNumber(i.point[o].x,this.xAxisDecs)+", "+this.formatNumber(i.point[o].y,this.yAxisDecs));this.toRender({p:["drawShape",ft,gt,$,ut,mt,c,c],i:[yt+":Decor-Point-"+o],t:"Decorations"})}}else{if(i.line)for(o=0;o<i.line.length;o++){L=!0,z=i.line[o].type||"line";var xt,vt=i.line[o].color,bt=this.transformValue(this.isTransformedData,i.line[o].value||0),At=(M=i.line[o].label||!1,i.line[o].width||1);k=i.line[o].align||"left",D=i.line[o].scope||!1;if("vertical"==this.graphOrientation?(xt=(gt=this.marginLeft+this.offsetX+this.left)+this.x,Q=$=this.marginTop+this.offsetY+this.top+this.y-(bt-this.xAxisMin)*this.xAxisUnit,L=$<=this.marginTop+this.offsetY+this.top+this.y&&$>=this.marginTop+this.offsetY+this.top):(xt=gt=this.marginLeft+this.offsetX+this.left+(bt-this.xAxisMin)*this.xAxisUnit,Q=($=this.marginTop+this.offsetY+this.top)+this.y,L=!!(gt<=this.marginLeft+this.offsetX+this.left+this.x&&this.marginLeft+this.offsetX+this.left)),L&&D&&this.layoutValid){L=!1;for(I=this.toArray(this.data.l.name[this.layoutCurrent]),y=0;y<I.length;y++)D==I[y]&&(L=!0)}if(L){var wt=this.isR?6:3;M&&("vertical"==this.graphOrientation?"right"==k?this.toRender({p:["drawText",M,xt-this.margin,Q-this.margin,this.decorationsTextFont,this.decorationsTextColor,"right","bottom"],t:"Decorations"}):"center"==k?this.toRender({p:["drawText",M,gt+this.x/2,Q-this.margin,this.decorationsTextFont,this.decorationsTextColor,"center","bottom"],t:"Decorations"}):this.toRender({p:["drawText",M,gt+this.margin,Q-this.margin,this.decorationsTextFont,this.decorationsTextColor,"left","bottom"],t:"Decorations"}):"right"==k?this.toRender({p:["drawText",M,xt+2*this.margin,Q-this.margin*wt,this.decorationsTextFont,this.decorationsTextColor,"left","middle"],t:"Decorations"}):"center"==k?this.toRender({p:["drawText",M,xt+2*this.margin,$+this.y/2,this.decorationsTextFont,this.decorationsTextColor,"left","middle"],t:"Decorations"}):this.toRender({p:["drawText",M,xt+2*this.margin,$+this.margin*wt,this.decorationsTextFont,this.decorationsTextColor,"left","middle"],t:"Decorations"}));yt=i.line[o].tooltip||"&rarr; "+bt;this.toRender({p:["drawLine",z,gt,$,xt,Q,vt,At],i:[yt+":Decor-Line"+o],t:"Decorations"})}}else if(i.point)for(o=0;o<i.point.length;o++){L=!0;var Ct=this.getSampleIndices(i.point[o].smp),Tt=(bt=this.transformValue(this.isTransformedData,i.point[o].value||0),vt=i.point[o].color||this.foreground,At=(i.point[o].width||1)*this.dataPointSize,(i.point[o].height||1)*this.dataPointSize),St=i.point[o].shape||"circle";gt=null!=Ct&&Ct>=0?this.smpInfo[Ct]-this.margin:null,$=(bt-this.xAxisMin)*this.xAxisUnit;if(null!=gt&&null!=$&&("vertical"==this.graphOrientation?L=($=this.marginTop+this.offsetY+this.top+this.y-$)<=this.marginTop+this.offsetY+this.top+this.y&&$>=this.marginTop+this.offsetY+this.top:(gt=this.marginLeft+this.offsetX+this.left+$,$=this.smpInfo[Ct],L=!!(gt<=this.marginLeft+this.offsetX+this.left+this.x&&this.marginLeft+this.offsetX+this.left)),L)){yt=i.point[o].smp+"("+bt+")";this.toRender({p:["drawShape",St,gt,$,At,Tt,vt,vt,"closed"],i:[yt+":Decor-Point-"+o],t:"Decorations"})}}i.marker&&this.drawMarkers()}this.toRender({p:["resetClipArea"],t:"Decorations"})},this.drawOncoprintLegend=function(){if(this.isOncoprint){var t=this.width/2-this.legend.oncoprint.width/2,e=this.height-(this.marginBottom+this.legend.oncoprint.height-this.margin),i=0,s=this.legend.oncoprint.width/this.legend.oncoprint.cols;this.toRender({p:["drawShape","rect",this.width/2,e+this.legend.oncoprint.height/2-this.margin,this.legend.oncoprint.width,this.legend.oncoprint.height,this.background,this.background],i:[-1],m:["-legend-oncoprint"],t:"Legends"});for(var a=0;a<this.legend.oncoprint.rows;a++){for(var r=t,n=0;n<this.legend.oncoprint.cols;n++)if(i<this.legend.oncoprint.labels.length){var o=this.legend.oncoprint.labels[i],h=this.legend.oncoprint.objects[i];i<this.legend.oncoprintMutations?(this.toRender({p:["drawShape","rect",r+2.5,e+10.5,5,21,this.legend.oncoprint.colors[o]],i:["Onc-"+o+"-"+h],t:"Legends"}),r+=5+this.margin,this.toRender({p:["drawText",o,r,e+10.5+2,this.legendTextFont,this.legendTextColor,"left","middle"],t:"Legends"}),r+=s):(this.toRender({p:["drawShape","rect",r+2.5,e+10.5,5,21,"rgb(220,220,220"],i:["Onc-"+o+"-"+h],t:"Legends"}),this.toRender({p:["drawShape","rect",r+2.5,e+10.5,5,7,this.legend.oncoprint.colors[o]],i:["Onc-"+o+"-"+h],t:"Legends"}),r+=5+this.margin,this.toRender({p:["drawText",o,r,e+10.5+2,this.legendTextFont,this.legendTextColor,"left","middle"],t:"Legends"}),r+=s),i++}e+=21+this.margin}}},this.drawSampleLegend=function(t,e){var i=this,s=function(t,e){return i.isCreateHistogram?i.isCreateHistogram.colors.length<i.legend.sample.n&&i.isCreateHistogram.factor?i.cacheColors[i.colorScheme].hasOwnProperty(e)?i.cacheColors[i.colorScheme][e]:g&&g.hasOwnProperty(i.isCreateHistogram.factor)&&g[i.isCreateHistogram.factor].colors?g[i.isCreateHistogram.factor].colors[t]:i.colors[t%i.colors.length]:i.isCreateHistogram.colors.length==i.legend.sample.n?"filled"==i.densityPosition&&"Scatter2D"==i.graphType?i.isCreateHistogram.colors[i.legend.sample.n-(1+t)]:i.isCreateHistogram.colors[t]:i.cacheColors[i.colorScheme].hasOwnProperty(e)?i.cacheColors[i.colorScheme][e]:i.colors[t%i.colors.length]:i.colors[t%i.colors.length]},a=function(t){var e;return i.isCreateHistogram?i.xAxisIndices.length||i.yAxisIndices.length?i.data.l&&i.data.l.axes&&i.data.l.axes[f]&&i.data.l.axes[f].yAxis&&i.data.l.axes[f].yAxis[y]&&!i.data.l.axes[f].yAxis[y].match(":")?"Series:0:"+i.data.l.ids[t+1]:i.xAxisIndices.length==i.yAxisIndices.length?"Series:"+i.xAxisIndices[t]+":"+i.yAxisIndices[t]:i.xAxisIndices.length>i.yAxisIndices.length?"Series:"+i.xAxisIndices[t]+":0":"Series:0:"+i.yAxisIndices[t]:(i.isHistogramLayout()?(e=i.getSampleIndices(u[t]))<0&&(e=t+1):e=i.getSampleIndices(i.data.l.axes[0].yAxis[t]),"Series:0:"+e):i.xAxisIndices.length==i.yAxisIndices.length?"Series:"+i.xAxisIndices[t]+":"+i.yAxisIndices[t]:i.xAxisIndices.length>i.yAxisIndices.length?"Series:"+i.xAxisIndices[t]+":0":"Series:0:"+i.yAxisIndices[t]},r=t,n=e,o=0,h=this.getFontPt(this.legendTextFont),l=h/2;e+=this.legendTextMargin+l,this.drawLegendBackgroundBox(r,n,this.legend.sample.width,this.legend.sample.height,"-legend-sample");var c=this.legend.sample.columns||this.legendColumns,d=this.legend.sample.width/c,p=Math.ceil(this.legend.sample.n/c),g=i.meta.data.z,u=[],m={};if(this.ridgeBy)for(var f=0;f<p;f++){for(var y=0;y<c;y++)if(t=r+(this.legendTextMargin+d)*y,o<this.legend.sample.n){var x=this.shortenText(this.dataStndBy.y.smps[o],this.maxSmpStringLen),v=this.colors[o%this.colors.length],b="Series:0:"+o,A=t+l+this.legendTextMargin;this.drawKeyShape(A,e,"circle",h,this.getFillColor(v),this.getOutlineColor(v),"closed","solid",this.background,x,[b],null,this.isHidden(!1,!1,b)),o++}e+=h+this.legendTextMargin}else if(this.isHistogram&&this.isHistogramLayout()){for(f=0;f<this.data.l.axes.length;f++)for(y=0;y<this.data.l.axes[f].yAxis.length;y++)this.data.l.axes[f].yAxis[y]&&(this.segregateVariablesBy.length||!this.data.l.axes[f].yAxis[y].match(":")?m[this.data.l.axes[f].yAxis[y].split(":")[0]]=!0:this.data.l.axes.length==this.dataStndBy.y.smps.length?m[this.data.l.axes[f].yAxis[y].split(":")[1]]=!0:m[this.data.l.axes[f].yAxis[y]]=!0);u=this.getKeys(m)}if(!this.ridgeBy)for(f=0;f<p;f++){for(y=0;y<c&&(t=r+(this.legendTextMargin+d)*y,o<this.legend.sample.n);y++){var w=this.isCreateHistogram?"solid":this.getPropertyValue(f,!1,"patternBy"),C=this.xAxisIndices.length==this.yAxisIndices.length?this.yAxis[o]:this.xAxisIndices.length>this.yAxisIndices.length?this.yAxis[this.yAxisCurrent]:this.yAxis[o],T=this.xAxisIndices.length==this.yAxisIndices.length||this.xAxisIndices.length>this.yAxisIndices.length?this.xAxis[o]:this.xAxis[this.xAxisCurrent];b=a(o),v=s(o,x=this.isHistogramLayout()?u[o]:this.isHistogram?this.shortenText(C,this.maxSmpStringLen):this.shortenText(C,this.maxSmpStringLen)+" vs "+this.shortenText(T,this.maxSmpStringLen)),A=t+l+this.legendTextMargin;if(this.isCreateHistogram){var S=this.histogramAsDotplot?"circle":"rectangle";this.drawKeyShape(A,e,S,h,this.getFillColor(v),this.getOutlineColor(v),w,"solid",this.background,x,[b],null,this.isHidden(!1,!1,b))}else this.colorBy?this.drawKeyShape(A,e,"circle",h,this.background,this.getFillColor(v),"open","solid",this.background,x,[b],null,this.isHidden(!1,!1,b)):this.isKM?(v=this.getFillColor(v),this.drawKeyConfidence(A,e,"rectangle",h,v,v,"closed","solid",v,x,[b],null,this.isHidden(!1,!1,b))):this.drawKeyShape(A,e,"circle",h,this.getFillColor(v),this.getOutlineColor(v),w,"solid",this.background,x,[b],null,this.isHidden(!1,!1,b));o++}e+=h+this.legendTextMargin}},this.drawVariableLegend=function(t,e){var i=this,s=t,a=e,r=this.getFontPt(this.legendTextFont),n=r/2,o=0,h=this.layoutValid&&!this.isDOE&&this.isOneDimensionalGraph()&&this.meta.config.user.graphType!=this.graphType?this.meta.config.user.graphType:this.graphType,l=function(t){return t<i.xAxisVarIndices.length?i.colors[t%i.colors.length]:i.colors[(t-i.xAxisVarIndices.length)%i.colors.length]};if(0!=this.legend.variable.width&&0!=this.legend.variable.height&&("Circular"!=h||"sunburst"!=this.circularType))if("Pie"==h){var c=this.layoutComb?this.isDOE?this.layoutWidth-(t-this.offsetX+1.5*this.legendTextMargin):999999:this.width-(t+1.5*this.legendTextMargin);this.isDOE&&this.legend.variable.width>c&&(this.legend.variable.width=c),this.drawLegendBackgroundBox(s,a,this.legend.variable.width,this.legend.variable.height,"-legend-variable"),t+=n+this.legendTextMargin,e+=r;for(var d=0;d<this.varPie.ids.length;d++){var p=!1,g=this.varPie.ids[d],u=this.varPie.cols[d],m=g>-1?this.shortenText(this.data.y.vars[g],this.maxVarStringLen):"Other";if(c>0){for(;this.measureText(m,this.legendTextFont)+r+3*this.legendTextMargin>c&&m.length>1;)m=m.substring(0,m.length-1),p=!0;p&&(m+="...")}if(this.drawKeyShape(t,e,"circle",r,this.getFillColor(u),this.getOutlineColor(u),"closed","solid",this.background,m,["PieVar-"+g],null,this.isHidden(!1,!1,"Var-"+g)),e+=r+this.legendTextMargin,this.layoutComb){if(e-this.offsetY>this.layoutHeight){this.toRender({p:["drawText","...",t+r,e,this.legendTextFont,this.legendTextColor,"left","bottom"],t:"Legends"});break}}else if(e>this.height){this.toRender({p:["drawText","...",t+r,e,this.legendTextFont,this.legendTextColor,"left","bottom"],t:"Legends"});break}}}else if(this.colorBy&&"variable"==this.colorBy||this.shapeBy&&"variable"==this.shapeBy||this.sizeBy&&"variable"==this.sizeBy||this.patternBy&&"variable"==this.patternBy){this.drawLegendBackgroundBox(s,a,this.legend.variable.width,this.legend.variable.height,"-legend-variable");var f=this.sizeBy&&"variable"==this.sizeBy?Math.max(this.sizes[this.varIndices.length-1],r):r,y=f/2,x=this.legend.variable.columns||this.legendColumns,v=this.legend.variable.width/x,b=Math.ceil(this.varIndices.length/x);e+=3*this.legendTextMargin;for(d=0;d<b;d++){for(var A=0;A<x&&(t=s+(this.legendTextMargin+v*A),o<this.varIndices.length);A++){g=this.varIndices[o],u="Circular"==h||this.colorBy&&"variable"==this.colorBy?o%this.colors.length:0;var w=this.shapeBy&&"variable"==this.shapeBy?o%this.shapes.length:0,C=this.sizeBy&&"variable"==this.sizeBy?this.sizes[o%this.sizes.length]:f,T=this.patternBy&&"variable"==this.patternBy?this.patterns[o%this.patterns.length]:this.getPropertyValue(g,!1,"patternBy"),S=t+y,M=(m=this.shortenText(this.data.y.vars[g],this.maxVarStringLen),this.isHidden(!1,!1,"Var-"+g));this.drawKeyShape(S,e,this.shapes[w],C,this.getFillColor(this.colors[u]),this.getOutlineColor(this.colors[u]),T,"solid",this.background,m,["Var-"+g],null,M),o++}e+=f+this.legendTextMargin}}else if("BarLine"==h||"DotLine"==h||"AreaLine"==h||"StackedLine"==h||"StackedPercentLine"==h){this.drawLegendBackgroundBox(s,a,this.legend.variable.width,this.legend.variable.height,"-legend-variable");var D=this.xAxisVarIndices.concat(this.xAxis2VarIndices);x=this.legend.variable.columns||this.legendColumns,v=this.legend.variable.width/x,b=Math.ceil(D.length/x);e+=this.legendTextMargin+r/2;for(d=0;d<b;d++){for(A=0;A<x&&(t=s+r/2+this.legendTextMargin+v*A,o<D.length);A++){g=o<this.xAxisVarIndices.length?this.xAxisVarIndices[o]:this.xAxis2VarIndices[o-this.xAxisVarIndices.length],u="blackAndWhite"==this.theme?"rgb(0,0,0)":this.coordinateLineColor?l(o):this.getVariableColor(this.data.y.vars[g]),T=this.getPropertyValue(g,!1,"patternBy"),m=this.shortenText(this.data.y.vars[g],this.maxVarStringLen),M=this.isHidden(!1,!1,"Var-"+g);if(o<this.xAxisVarIndices.length){w="DotLine"==h?"circle":this.useRoundRectangles?"roundrect":"rectangle";this.drawKeyShape(t,e,w,r,this.getFillColor(u),this.getOutlineColor(u),T,"solid",this.background,m,["Var-"+g],null,M)}else{var k="pattern"==this.lineDecoration?this.linePatterns[o%this.linePatterns.length]:"line";w="symbol"==this.lineDecoration?this.shapes[(o-this.xAxisVarIndices.length)%this.shapes.length]:"circle",u=this.getFillColor(u);this.lineDecoration&&"pattern"!=this.lineDecoration&&!this.segregateVariablesBy.length&&"DotLine"!=h&&"AreaLine"!=h?this.drawKeyShapeLine(t,e,w,r,u,u,"closed","solid",u,m,["Var-"+g],null,M):this.drawKeyLine(t,e,w,r,u,u,T,k,u,m,["Var-"+g],null,M)}o++}e+=r+this.legendTextMargin}}else if("Bar"==h||"Line"==h||"ParallelCoordinates"==h||"Area"==h||"Dotplot"==h||"Stacked"==h||"StackedPercent"==h||"Boxplot"==h||"Fish"==h){this.drawLegendBackgroundBox(s,a,this.legend.variable.width,this.legend.variable.height,"-legend-variable");x=this.legend.variable.columns||this.legendColumns,v=this.legend.variable.width/Math.min(this.varIndices.length,x),b=Math.ceil(this.varIndices.length/Math.min(this.varIndices.length,x));e+=this.legendTextMargin+r/2;for(d=0;d<b;d++){for(A=0;A<Math.min(this.varIndices.length,x)&&(t=s+r/2+this.legendTextMargin+v*A,o<this.varIndices.length);A++){g=this.varIndices[o],u="blackAndWhite"==this.theme&&"Line"==h?"rgb(0,0,0)":this.getFillColor(this.getVariableColor(this.data.y.vars[g]));var L=this.getOutlineColor(u);T=this.getPropertyValue(g,!1,"patternBy"),m=this.shortenText(this.data.y.vars[g],this.maxVarStringLen),M=this.isHidden(!1,!1,"Var-"+g);if("Boxplot"==h&&(u=this.boxplotColor?this.boxplotColor:u,L=this.boxplotBorderColor?this.boxplotBorderColor:L),"Line"==h||"ParallelCoordinates"==h){w="symbol"==this.lineDecoration?this.shapes[o%this.shapes.length]:"circle",k="pattern"==this.lineDecoration?this.linePatterns[o%this.linePatterns.length]:"line";!this.lineDecoration||"symbol"!=this.lineDecoration&&"dot"!=this.lineDecoration?this.drawKeyLine(t,e,w,r,u,u,T,k,u,m,["Var-"+g],null,M):this.drawKeyShapeLine(t,e,w,r,u,u,T,"solid",u,m,["Var-"+g],null,M)}else if("Dotplot"==h||"Boxplot"==h&&this.showBoxplotOriginalData){w="circle";this.drawKeyShape(t,e,w,r,u,L,T,"solid",this.background,m,["Var-"+g],null,M)}else if("Bar"==h&&"lollipop"==this.barType)this.drawKeyLollipop(t,e,w,r,u,L,T,"solid",this.background,m,["Var-"+g],null,M);else{w=this.useRoundRectangles?"roundrect":"rectangle";"Boxplot"!=h||this.showBoxplotOriginalData&&!this.boxplotColor?this.drawKeyShape(t,e,w,r,u,L,T,"solid",this.background,m,["Var-"+g],null,M):this.drawKeyBoxplot(t,e,w,r,u,L,T,"solid",this.background,m,["Var-"+g],null,M)}o++}e+=r+this.legendTextMargin}}else if("Circular"==h&&!this.showIdeogram){this.drawLegendBackgroundBox(s,a,this.legend.variable.width,this.legend.variable.height,"-legend-variable");var I=[];if(this.rAxisIndex>=0)for(d=0;d<this.varIndices.length;d++)d!=this.rAxisIndex&&I.push(this.varIndices[d]);else I=this.varIndices;x=this.legend.variable.columns||this.legendColumns,v=this.legend.variable.width/x,b=Math.ceil(I.length/x);e+=this.legendTextMargin+r/2;for(d=0;d<b;d++){for(A=0;A<x&&(t=s+r/2+this.legendTextMargin+v*A,o<I.length);A++){g=I[o];if(this.data.y.vars[g]){u=this.colors[o%this.colors.length],T=this.getPropertyValue(g,!1,"patternBy"),m=this.shortenText(this.data.y.vars[g],this.maxVarStringLen);this.drawKeyShape(t,e,this.useRoundRectangles?"roundrect":"rectangle",r,this.getFillColor(u),this.getOutlineColor(u),T,"solid",this.background,m,["Var-"+g],null,M)}o++}e+=r+this.legendTextMargin}}},this.drawVennLegend=function(){if(this.showLegend){var t=this.getFontPt(this.legendTextFont),e=this.vennMarginLeft+this.marginLeft+this.left,i=e+2*t,s=this.vennMarginTop+this.marginTop+this.top+this.y+this.margin+t/2,a=[],r=[];for(var n in this.data.venn.legend)r.push(n);r=r.sort(),4==this.vennGroups?(a.push(this.vennColors.length>0&&this.validateColor(this.vennColors[0])?this.validateColor(this.vennColors[0]):"rgb(255,0,0)"),a.push(this.vennColors.length>1&&this.validateColor(this.vennColors[1])?this.validateColor(this.vennColors[1]):"rgb(0,153,51)"),a.push(this.vennColors.length>2&&this.validateColor(this.vennColors[2])?this.validateColor(this.vennColors[3]):"rgb(153,204,0)"),a.push(this.vennColors.length>3&&this.validateColor(this.vennColors[3])?this.validateColor(this.vennColors[2]):"rgb(0,0,255)")):3==this.vennGroups?(a.push(this.vennColors.length>0&&this.validateColor(this.vennColors[0])?this.validateColor(this.vennColors[0]):"rgb(255,0,0)"),a.push(this.vennColors.length>1&&this.validateColor(this.vennColors[1])?this.validateColor(this.vennColors[1]):"rgb(0,255,0)"),a.push(this.vennColors.length>2&&this.validateColor(this.vennColors[2])?this.validateColor(this.vennColors[2]):"rgb(0,0,255)")):2==this.vennGroups?(a.push(this.vennColors.length>0&&this.validateColor(this.vennColors[0])?this.validateColor(this.vennColors[0]):"rgb(0,0,255)"),a.push(this.vennColors.length>1&&this.validateColor(this.vennColors[1])?this.validateColor(this.vennColors[1]):"rgb(255,0,0)")):a.push(this.vennColors.length>0&&this.validateColor(this.vennColors[0])?this.validateColor(this.vennColors[0]):"rgb(255,0,0)");for(n=0;n<this.vennGroups;n++){this.vennLegendColors||this.toRender({p:["drawText",r[n]+": ",e,s,this.legendTextFont,this.legendTextColor,"left","middle"],t:"Legends"});var o=this.data.venn.legend&&this.data.venn.legend[r[n]]?this.data.venn.legend[r[n]]:"N/A",h=this.measureText(o,this.legendTextFont)>this.x?this.scaleTextToFont(o,t,this.x-this.margin):this.legendTextFont;this.vennLegendColors?this.toRender({p:["drawText",o,e,s,h,a[n],"left","middle"],t:"Legends"}):this.toRender({p:["drawText",o,i,s,h,this.legendTextColor,"left","middle"],t:"Legends"}),s+=this.margin+t}}},this.drawColorIndicator=function(t,e,i,s,a,r){if(r||a||this.colorBy||this.outlineBy||this.colorNodeBy||this.colorEdgeBy||this.colorNodeBy||this.colorEdgeBy||"Genome"==this.graphType||"bin2d"==this.scatterType||this.isContour&&this.contourFilled||"Network"==this.graphType&&this.decorations.length&&"heatmap"==this.decorationsType&&this.showDecorations&&!this.colorNodeBy&&!this.colorEdgeBy){var n=this,o=function(t,e){null==e&&((!i.decs||i.decs>3)&&(i.decs=n.getNumberDecimals(t[1]-t[0])),e=i.decs);for(var s=[],a=0;a<t.length;a++)s[a]=t[a].toFixed(e);return s},h=function(t){return n.heatmapIndicatorWidth<250&&(9==t.length?t=[t[0],t[4],t[8]]:8==t.length||7==t.length?t=[t[0],t[2],t[4],t[6]]:6!=t.length&&5!=t.length||(t=[t[0],t[2],t[4]])),t},l="bin2d"==this.scatterType?"n":s||this.colorBy||this.outlineBy||this.colorNodeBy||this.colorEdgeBy,c=r?"overlaysLegendPosition":a?"heatmapIndicatorPosition":"legendPosition",d=r||(a?0:this.legendTextColorWidth?this.legendTextColorWidth/2:10),p=t,g=e,u=this.getFontPt(this.legendTitleFont),m=this.heatmapIndicatorHeight,f=this.heatmapIndicatorHeight,y="Genome"==this.graphType?i.brew.min:i.min,x="Genome"==this.graphType?i.brew.max:i.max,v="Genome"==this.graphType?i.brew.vals:i.vals,b=i.valStr?i.valStr:i.colorBrew&&i.colorBrew.valStr?i.colorBrew.valStr:o(v),A=this.heatmapIndicatorWidth/(x-y),w="Circular"==this.graphType||this.isContour&&!i.colorBrew||"bin2d"==this.scatterType?i:i.colorBrew?i.colorBrew:this.meta.def.colorBrew,C=this.heatmapIndicatorWidth/this.colorSpectrumNumber,T="overlaysLegendPosition"==c&&"topRight"==this[c],S=this.legendTitleFont,M=!("Heatmap"!=this.graphType||!this.heatmapIndicatorHistogram)&&this.getHeatmapIndicatorHistogram(),D=[];if(M&&this.heatmapIndicatorOverlap&&(t+=this.measureText(M.maxStr,this.legendTextFont),p=t),this[c]&&this[c].toString().match(/top|bottom/)&&!T){if(l&&this.showLegendTitle){var k="center"==this.legendTitleAlign?0:"left"==this.legendTitleAlign?-this.heatmapIndicatorWidth/2:this.heatmapIndicatorWidth/2;e+=this.legendTitleMargin+u/2,this.toRender({p:["drawText",l,t+this.heatmapIndicatorWidth/2+k,e,this.legendTitleFont,this.legendTitleColor,this.legendTitleAlign,"middle"],t:"Legends"}),e+=this.legendTitleMargin+u/2}this.toRender({p:["setClipArea",[t,e,this.heatmapIndicatorWidth,this.heatmapIndicatorHeight]],t:"Legends"});for(var L=0;L<this.colorSpectrumNumber;L++){var I=null!=this.transparency?this.addColorTransparency(w.colors[L],this.transparency,!0):w.colors[L];this.toRender({p:["drawLine","line",t,e,t,e+f,I,10],t:"Legends"}),t+=C}if(this.toRender({p:["resetClipArea",[t,e,this.heatmapIndicatorWidth,this.heatmapIndicatorHeight]],t:"Legends"}),t=p,e+=f+this.legendTextMargin,w&&w.stops&&w.stops.length){var z=0;for(L=0;L<w.stops.length;L++)for(var N=0;N<this.colorSpectrumNumber;N++)if(w.breaks[N]>=w.stops[L]){t=p+N*C,D.push(t);var B=this.measureText(this.formatNumber(w.stops[L].toString()),this.legendTextFont)/2;(t-B>z||0==L||L==w.stops.length-1)&&(this.toRender({p:["drawText",this.formatNumber(w.stops[L]),t,e,S,this.legendTextColor,"center","top"],t:"Legends"}),z=t+B);break}}else{M?(b=o(v=h(v),0),this.drawHeatmapIndicatorHistogram(M,p,g-.5)):"Map"==this.graphType&&(b=o(v=h(v),0));for(L=0;L<v.length;L++)t=p+(v[L]-y)*A,D.push(t),this.toRender({p:["drawText",b[L],t,e,this.legendTextFont,this.legendTextColor,"center","top"],t:"Legends"})}}else{if(l&&this.showLegendTitle){if(e+=this.legendTitleMargin+u/2,"Circular"==this.graphType)this.toRender({p:["drawText",l,t-this.legendTextFontSize/2,e+this.colorSpectrumNumber*C/2,this.legendTitleFont,this.legendTitleColor,"center","bottom",-Math.PI/2],t:"Legends"});else{k="center"==this.legendTitleAlign?0:"left"==this.legendTitleAlign?-(d+2*this.legendTitleMargin):d+2*this.legendTitleMargin;this.toRender({p:["drawText",l,t+d+2*this.legendTitleMargin,e,this.legendTitleFont,this.legendTitleColor,this.legendTitleAlign,"middle"],t:"Legends"})}e+=this.legendTitleMargin+u/2}var P=e;this.toRender({p:["setClipArea",[t,e,this.heatmapIndicatorHeight,this.heatmapIndicatorWidth]],t:"Legends"}),e+=this.colorSpectrumNumber*C;for(L=0;L<this.colorSpectrumNumber;L++){I=null!=this.transparency?this.addColorTransparency(w.colors[L],this.transparency,!0):w.colors[L];this.toRender({p:["drawLine","line",t,e,t+m,e,I,10],t:"Legends"}),e-=C}if(this.toRender({p:["resetClipArea",[t,e,this.heatmapIndicatorHeight,this.heatmapIndicatorWidth]],t:"Legends"}),t+=m+this.legendTextMargin,e=P,w&&w.stops&&w.stops.length){for(z=e+=this.colorSpectrumNumber*C,L=0;L<w.stops.length;L++)for(N=0;N<this.colorSpectrumNumber;N++)if(w.breaks[N]>=w.stops[L]){f=e-N*C,D.push(f),(f+this.legendTextFontSize<z||0==L||L==w.stops.length-1)&&(this.toRender({p:["drawText",this.formatNumber(w.stops[L]),t,f,this.legendTextFont,this.legendTextColor,"left","middle"],t:"Legends"}),z=f);break}}else{e+=this.colorSpectrumNumber*C;for(P=-(2*this.legendTitleMargin+u),L=0;L<v.length;L++){(f=e-(v[L]-y)*A)>g+P&&(D.push(f),this.toRender({p:["drawText",b[L],t,f,this.legendTextFont,this.legendTextColor,"left","middle"],t:"Legends"}))}}}!function(){var t=n[c]&&n[c].toString().match(/top|bottom/)&&!T,e=p,i=t&&"Map"!=n.graphType||!l||!n.showLegendTitle?l&&n.showLegendTitle?g+n.legendTitleFontSize+2*n.legendTitleMargin:g:g+n.legendTitleFontSize+2*n.legendTitleMargin,s=t?n.heatmapIndicatorWidth:n.heatmapIndicatorHeight,a=t?n.heatmapIndicatorHeight:n.heatmapIndicatorWidth;if(n.toRender({p:["drawShape","rectangle",e+s/2,i+a/2,s,a,!1,"rgb(0,0,0)","open"],t:"Legends"}),t)for(var r=0;r<D.length;r++)D[r]>e&&D[r]<e+s&&(n.toRender({p:["drawLine","line",D[r],i,D[r],i+n.margin,"rgb(0,0,0)",1],t:"Legends"}),n.toRender({p:["drawLine","line",D[r],i+a,D[r],i+a-n.margin,"rgb(0,0,0)",1],t:"Legends"}));else for(r=0;r<D.length;r++)D[r]>i&&D[r]<i+a&&(n.toRender({p:["drawLine","line",e,D[r],e+n.margin,D[r],"rgb(0,0,0)",1],t:"Legends"}),n.toRender({p:["drawLine","line",e+s,D[r],e+s-n.margin,D[r],"rgb(0,0,0)",1],t:"Legends"}))}()}},this.getHeatmapIndicatorHistogram=function(){for(var t=[],e=0;e<this.data.y.vars.length;e++)for(var i=0;i<this.data.y.smps.length;i++){null==(l=this.getDataAtPos(e,i,!1,this.xAxisTransform,this.xAxisFloorValue,this.xAxisCeilValue))||""===l||isNaN(l)||t.push(l)}var s=this.range(t),a=s[0],r=s[1],n=this[this.histogramSizeEstimator](t),o=Math.ceil((r-a)/n);n>1e3&&(o*=n/1e3,n=1e3);var h=[];for(e=0;e<n;e++)h[e]=0;for(e=0;e<this.data.y.vars.length;e++)for(i=0;i<this.data.y.smps.length;i++){var l;if(null!=(l=this.getDataAtPos(e,i,!1,this.xAxisTransform,this.xAxisFloorValue,this.xAxisCeilValue))&&""!==l&&!isNaN(l))h[parseInt((l-a)/o)]++}a=0,r=0;for(e=0;e<n;e++)a=Math.min(a,h[e]),r=Math.max(r,h[e]);var c=this[this.axisAlgorithm](a,r,3,this.axisWilkinsonLoose);return{range:s,min:a,max:r,size:o,bins:n,hist:h,vals:c,maxStr:this.getMaxText(c),unitsX:(this.heatmapIndicatorWidth-1)/n,unitsY:this.heatmapIndicatorHeight/c[c.length-1]}},this.drawHeatmapIndicatorHistogram=function(t,e,i){var s,a=e,r=i+this.heatmapIndicatorHeight,n=t.bins,o=t.hist,h=t.vals,l=t.unitsX,c=t.unitsY,d=1.5;this.toRender({p:["drawLine","line",a-this.margin,i,a-this.margin,r,this.foreground],t:"Legends"});for(var p=0;p<h.length;p++)i=h[p]*c,this.toRender({p:["drawLine","line",a-2*this.margin,r-i,a-this.margin,r-i,this.foreground],t:"Legends"}),this.toRender({p:["drawText",this.formatNumber(h[p]),a-3*this.margin,r-i,this.legendTextFont,this.legendTextColor,"right","middle"],t:"Legends"});i=o[0]*c,this.toRender({p:["drawLine","line",a,r,a,r-i,this.heatmapIndicatorHistogramColor,d],t:"Legends"});for(p=0;p<n;p++)i=o[p]*c,this.toRender({p:["drawLine","line",a,r-i,a+l,r-i,this.heatmapIndicatorHistogramColor,d],t:"Legends"}),p<n-1&&(s=o[p+1]*c,this.toRender({p:["drawLine","line",a+l,r-i,a+l,r-s,this.heatmapIndicatorHistogramColor,d],t:"Legends"})),a+=l;this.toRender({p:["drawLine","line",a,r-s,a,r,this.heatmapIndicatorHistogramColor,d],t:"Legends"})},this.isDrawPropertyLegend=function(t){return t?"Network"==this.graphType?this[t+"By"]&&this.meta.data.edges[this[t+"By"]]||this[t+"By"]&&this.meta.data.nodes[this[t+"By"]]:this[t+"By"]&&this.isMultidimensionalData||this.isContour&&"point"==this.contourType||this.histogramAsDotplot&&this.colorBy||this[t+"By"]&&(this.data.x&&this.data.x.hasOwnProperty(this[t+"By"])||this.data.z&&this.data.z.hasOwnProperty(this[t+"By"])||this.getSampleIndices(this[t+"By"])>-1):"Network"==this.graphType?this.colorEdgeBy&&this.meta.data.edges[this.colorEdgeBy]||this.colorNodeBy&&this.meta.data.nodes[this.colorNodeBy]||this.decorations.length&&"heatmap"==this.decorationsType:this.outlineBy&&this.isMultidimensionalData||this.isContour&&this.contourFilled||"bin2d"==this.scatterType||this.histogramAsDotplot&&this.colorBy||this.data.x&&this.data.x.hasOwnProperty(this.lineBy)||this.colorBy&&(this.data.x&&this.data.x.hasOwnProperty(this.colorBy)||this.data.z&&this.data.z.hasOwnProperty(this.colorBy)||this.getSampleIndices(this.colorBy)>-1||"data"==this.colorBy&&this.ridgeBy)},this.drawColorLegend=function(t,e,i,s){"Map"==this.graphType&&(t+=parseInt(this.meta.canvas.ctx2.canvas.style.left),e+=parseInt(this.meta.canvas.ctx2.canvas.style.top));var a="Scatter2D"==this.graphType&&this.lineBy&&this.ribbonBy&&this.colorBy==this.lineBy&&"color"==s;this.isDrawPropertyLegend()&&!a&&("Numeric"==i.type&&!i.colorBy||this.isContour&&this.contourFilled||"bin2d"==this.scatterType?this.drawColorIndicator(t,e,this.isTransformedData&&"Heatmap"!=this.graphType?this.getDefaultMetaDataObject():this.isContour?this.meta.data.q.g[0].data.colorBrew:"bin2d"==this.scatterType?this.meta.data.b.c:i):this.drawPropertyLegend(s,t,e,i))},this.drawShapeLegend=function(t,e,i,s){this.drawPropertyLegend(s,t,e,i)},this.drawSizeLegend=function(t,e,i,s){this.drawPropertyLegend(s,t,e,i)},this.drawPatternLegend=function(t,e,i,s){this.drawPropertyLegend(s,t,e,i)},this.drawConnectLegend=function(t,e,i,s){this.drawPropertyLegend(s,t,e,i)},this.drawPropertyLegend=function(t,e,i,s){var a=this,r=this.decapitalize(t);if(this.isDrawPropertyLegend(r)){var n="size"==t.replace("Node","").replace("contour","size")?0:this.getDiameterLegend();if("size"==t.replace("Node","").replace("contour","size"))for(var o=s.sizes?s.sizes.length:this.sizes.length,h=0;h<(this.isContour?s.vals.length:this.legend.size.n||s.levels.length);h++)n=Math.max(n,s.sizes?s.sizes[h%o]:this.sizes[h%o]);var l=this.getFontPt(this.legendTitleFont),c=this.getFontPt(this.legendTextFont),d=this.legend[t].columns||this.legendColumns,p=d>this.legend[t].n?this.legend[t].n:d,g=Math.ceil(this.legend[t].n/p),u=this.legend[t].width/p,m=i+(this.showLegendTitle?this.legendTitleMargin+l/2:this.legendTextMargin+c/2),f=Math.max(n,c),y=0,x="color"==t.replace("Node","").replace("Edge","")&&this.outlineBy?this.outlineBy:this[r+"By"];this.drawLegendTitle(e,i,this.legend[t].width,this.legend[t].height,x,"-legend-"+r),this.showLegendTitle&&(m+=l+2*this.legendTitleMargin,n>c+this.legendTextMargin&&(m+=this.legendTextMargin));for(var v=this.legend[t].levels||this.sortObject(this.legend[t].m),b=s.origin?s.origin:this.meta.data.modified?"modified":this.isOncoprint||this.isMultidimensionalData?this[r+"ByData"]:"y",A=0;A<g;A++){for(var w=0;w<p;w++){var C=e+this.legendTextMargin+n/2+u*w;if(y<this.legend[t].n&&y>=0){var T,S=v[y];T="Numeric"==s.type&&("shape"==t&&!this.shapeByContinuous||"size"==t&&!this.sizeByContinuous)?0==A&&0==w?"<= "+S:A==g-1&&w==p-1?v[y-1]+" - "+S:Number(v[y-1])+" - "+S:S.length>this.maxTextSize?S.substring(0,this.maxTextSize-3)+"...":S;var M=a.graphType.match(/Boxplot|Bar/)?a.showBoxplotOriginalData||a.boxplotColor||a.showViolinBoxplot?"circle":a.useRoundRectangles?"roundrect":"rectangle":"circle",D=s.colorBy&&s.colorBy.hasOwnProperty(S)?this.validateColor(s.colorBy[S]):this.legend.color.m?this.validateColor(this.legend.color.m[S]):s.colors?this.validateColor(s.colors[y]):this.background;"Boxplot"==this.graphType&&this.showViolinBoxplot&&(D=this.addColorTransparency(D,this.violinTransparency,!0));var k=this.getFillColor(D),L=this.outlineBy||"Scatter2D"==this.graphType&&"visium"==this.scatterType?this.getFillColor(D):this.getOutlineColor(D),I=(D=this.outlineBy?"rgba(0,0,0,0)":this.getFillColor(D),"closed"),z="solid",N=["PropertyKey:"+x+":"+S+":"+b],B="Boxplot"==this.graphType&&"connect"!=t&&(!this.showBoxplotOriginalData||this.boxplotColor)&&!this.showViolinBoxplot,P=this.isHidden(!1,!1,"Property:"+x+":"+S+":"+b);if("color"==t.replace("Node","").replace("Edge",""))this.outlineBy?this.drawKeyShape(C,m,M,n,D,L,I,z,k,T,N,null,P):"Scatter2D"!=this.graphType||"line"!=this.scatterType&&!this.isQQ?this.isKM?this.drawKeyConfidence(C,m,"rectangle",n,D,D,I,z,k,T,N,null,P):this.decorations&&this.decorations.reg?this.drawKeyLine(C,m,M,n,D,L,I,z,k,T,N,null,P):B?this.drawKeyBoxplot(C,m,M,n,D,L,I,z,k,T,N,null,P):this.drawKeyShape(C,m,M,n,D,L,I,z,k,T,N,null,P):this.drawKeyLine(C,m,M,n,D,L,I,z,k,T,N,null,P);else if("shape"==t.replace("Node","").replace("Edge",""))M=s.shapeBy&&s.shapeBy.hasOwnProperty(S)?s.shapeBy[S]:this.legend.shape.m?this.legend.shape.m[S]:s.shapes[y],D=this.background,L=this.foreground,this.drawKeyShape(C,m,M,n,D,L,I,z,k,T,N,null,P);else if("size"==t.replace("Node","").replace("Edge","").replace("contour","size")){var R=s.sizes?s.sizes.length:this.sizes.length,O=s.sizeBy&&s.sizeBy.hasOwnProperty(S)?s.sizeBy[S]:"contour"==t?this.sizes[y%R]:this.legend.size.m?this.legend.size.m[S]:s.sizes[y%R];D=this.background,L=this.foreground,t.match(/Edge/)?(O=parseInt(this.percentile(s.min,s.max,Number(T)))/100*4+.5,this.drawKeyLineSize(C,m,O,n,D,L,I,z,L,T,N,null,P)):this.drawKeySize(C,m,M,[O,n],D,L,I,z,k,T,N,null,P)}else"pattern"==t.replace("Node","").replace("Edge","")?this.graphType.match(/parallelcoordinates|line/i)?(z=s.linePatternBy&&s.linePatternBy.hasOwnProperty(S)?s.linePatternBy[S]:s.linePatterns[y],this.drawKeyLine(C,m,M,n,D,L,I,z,k,T,N,null,P)):(D=this.background,L=this.foreground,I=s.patternBy&&s.patternBy.hasOwnProperty(S)?s.patternBy[S]:this.legend.Patterns?this.legend.Patterns[S]:s.patterns[y],M=this.isOncoprint?"rectangle":M,B?this.drawKeyBoxplot(C,m,M,n,D,L,I,z,k,T,N,null,P):this.drawKeyShape(C,m,M,n,D,L,I,z,k,T,N,null,P)):"connect"==t?(k=s.connectBy&&s.connectBy.hasOwnProperty(S)?s.connectBy[S]:this.legend.connects?this.legend.connects[S]:s.connects[y],this.drawKeyLine(C,m,M,n,D,L,I,z,k,T,N,null,P)):"line"==t&&(this.ribbonBy?(k=s.lineBy&&s.lineBy.hasOwnProperty(S)?s.lineBy[S]:s.colors[y],this.drawKeyConfidence(C,m,M,n,k,k,I,z,k,T,N,null,P)):(k=this.colorBy!=this.lineBy?"rgb(0,0,0)":s.colors[y],z=this.colorBy!=this.lineBy?s.linePatterns[y]:I,this.drawKeyLine(C,m,M,n,D,L,I,z,k,T,N,null,P)))}y++}m+=this.legendTextMargin+f}}},this.drawCustomLegend=function(t,e,i,s,a){var r=a.text.length,n=this.getDiameterLegend(),o=a.size;if(o)for(var h=0;h<o.length;h++)o[h]&&(n=Math.max(n,o[h]));var l=this.getFontPt(this.legendTitleFont),c=this.getFontPt(this.legendTextFont),d=this.legendColumns>r?r:this.legendColumns,p=Math.ceil(r/d),g=i/d,u=e+(a.title?this.legendTitleMargin+l/2:this.legendTextMargin+c/2),m=Math.max(n,c),f=0;this.drawLegendTitle(t,e,i,s,a.title,"-legend-"+a.id),a.title&&(u+=l+2*this.legendTitleMargin);for(var y=0;y<p;y++){for(var x=0;x<d;x++){var v=t+this.legendTextMargin+n/2+g*x;if(f<r){var b=!(!a.text||!a.text[f])&&a.text[f],A=!(!a.shape||!a.shape[f])&&a.shape[f],w=a.shapeColor&&a.shapeColor[f]?a.shapeColor[f]:this.background,C=a.shapeBorderColor&&a.shapeBorderColor[f]?a.shapeBorderColor[f]:this.foreground,T=!(!a.line||!a.line[f])&&a.line[f],S=a.shapePattern&&a.shapePattern[f]?a.shapePattern[f]:"closed",M=a.lineType&&a.lineType[f]?a.lineType[f]:"solid",D=a.lineColor&&a.lineColor[f]?a.lineColor[f]:this.foreground,k=b,L=this.isHidden(!1,!1,"legend-text-"+b);b&&(A&&T?this.drawKeyShapeLine(v,u,A,n,w,C,S,M,D,b,k,null,L):A?this.drawKeyShape(v,u,A,n,w,C,S,M,D,b,k,null,L):T?this.drawKeyLine(v,u,A,n,w,C,S,M,D,b,k,null,L):this.drawKeyLabel(v,u,A,n,w,C,S,M,D,b,k,null,L))}f++}u+=this.legendTextMargin+m}},this.drawGenericLegend=function(t,e,i,s,a,r,n){var o=this.getDiameterLegend(),h=this.getFontPt(this.legendTextFont)+2,l=Math.max(o,h),c=0;this.drawLegendBackgroundBox(t,e,i,s,"-legend"),this.toRender({p:["drawText",r,t+i/2,e+this.margin+h/2,this.legendTitleFont,this.legendTitleColor,"center","middle"],t:"Legends"}),c=e+h+this.margin,this.showLegendBorder&&this.toRender({p:["drawLine","line",t,c,t+i,c,this.legendBackgroundBorderColor],t:"Legends"}),c+=this.margin,n||(n=1);for(var d=i/n,p=Math.ceil(a.levels.length/n),g=0,u=c,m=a.origin?a.origin:this.meta.data.modified?"modified":"y",f=0;f<p;f++){for(var y=0;y<n;y++){var x=t+this.margin+d*y;if(!(g<a.levels.length))break;var v="String"==a.type?a.colors[g]:this.getColorForValue(a.colorBrew,a.levels[g]);this.toRender({p:["drawShape",this.useRoundRectangles?"rounderect":"square",x+l/2,u+l/2,l,l,this.getFillColor(v),this.getOutlineColor(v)],i:["Property:"+r+":"+a.levels[g]+":"+m],t:"Legends",h:this.isHidden(!1,!1,"Property:"+r+":"+a.levels[g]+":"+m)}),this.toRender({p:["drawText",a.levels[g],x+l+this.margin,u+l/2,this.legendTextFont,this.legendTextColor,"left","middle"],i:["Property:"+r+":"+a.levels[g]+":"+m],t:"Legends",h:this.isHidden(!1,!1,"Property:"+r+":"+a.levels[g]+":"+m)}),g++}u+=l}},this.drawDecorationLegend=function(t,e){if(this.graphType.match(/Scatter/)){var i=this.decorations,s=this.getFontPt(this.decorationsTextFont),a=this.measureText(this.sprintf("%15s","X"),this.decorationsTextFont),r=f=t+((i.nlfit||i.nor||i.reg?a:0)?this.legend.decoration.maxLabel+a:this.decorationsTextMargin),n=e;if(this.legend.decoration.curX=t,this.legend.decoration.curY=e,this.drawLegendBackgroundBox(t,e-(s/2+this.decorationsTextMargin),this.legend.decoration.width,this.legend.decoration.height+this.decorationsTextMargin,"-legend-decorations",!0),i.nlfit){this.toRender({p:["drawText","Min",r,n,this.decorationsTextFont,this.decorationsTextColor,"right","middle"],t:"Legends"}),r+=a+this.decorationsTextMargin,this.toRender({p:["drawText","Max",r,n,this.decorationsTextFont,this.decorationsTextColor,"right","middle"],t:"Legends"}),r+=a+this.decorationsTextMargin,this.toRender({p:["drawText","EC50",r,n,this.decorationsTextFont,this.decorationsTextColor,"right","middle"],t:"Legends"}),r+=a+this.decorationsTextMargin,this.toRender({p:["drawText","Slope",r,n,this.decorationsTextFont,this.decorationsTextColor,"right","middle"],t:"Legends"}),r+=a+this.decorationsTextMargin,this.toRender({p:["drawText","p-Val",r,n,this.decorationsTextFont,this.decorationsTextColor,"right","middle"],t:"Legends"}),r+=a+this.decorationsTextMargin,this.toRender({p:["drawText","F-Chg",r,n,this.decorationsTextFont,this.decorationsTextColor,"right","middle"],t:"Legends"}),n+=s+this.decorationsTextMargin;for(var o=0;o<i.nlfit.length;o++){var h=o%this.colors.length;h=i.nlfit[o].color?i.nlfit[o].color:this.colors[h],r=f+this.decorationsTextMargin-a,"ScatterBubble2D"==this.graphType&&"right"==this.decorationsPosition&&this.zAxisShow&&(r+=this.decorationsTextMargin+this.getFontPt(this.axisTitleFont)+this.decorationsTextMargin),this.toRender({p:["drawText",i.nlfit[o].label,r,n,this.decorationsTextFont,h,"right","middle"],t:"Legends"}),r=f;for(var l=0;l<6;l++){var c=i.nlfit[o].param[l];l<2&&(c=this.transformValue(this.yAxisTransform,c)),this.toRender({p:["drawText",this.formatNumber(c,this.yAxisDecs+6),r,n,this.decorationsTextFont,h,"right","middle"],t:"Legends"}),r+=a+this.decorationsTextMargin}n+=s+this.decorationsTextMargin}}if(i.line)for(o=0;o<i.line.length;o++)if(i.line[o].label)for(o=0;o<i.line.length;o++){h=i.line[o].color?i.line[o].color:this.colors[o%this.colors.length];"ScatterBubble2D"==this.graphType&&"right"==this.decorationsPosition&&this.zAxisShow&&(r+=this.decorationsTextMargin+this.getFontPt(this.axisTitleFont)+this.decorationsTextMargin),this.toRender({p:["drawText",i.line[o].label,r,n,this.decorationsTextFont,h,"left","middle"],t:"Legends"}),n+=s+this.decorationsTextMargin}if(i.reg){this.toRender({p:["drawText","Slope",r,n,this.decorationsTextFont,this.decorationsTextColor,"right","middle"],t:"Legends"}),r+=a+this.decorationsTextMargin,this.toRender({p:["drawText","Int",r,n,this.decorationsTextFont,this.decorationsTextColor,"right","middle"],t:"Legends"}),r+=a+this.decorationsTextMargin,this.toRender({p:["drawText","Cor",r,n,this.decorationsTextFont,this.decorationsTextColor,"right","middle"],t:"Legends"}),n+=s+this.decorationsTextMargin;for(o=0;o<i.reg.length;o++){h=i.reg[o].color?i.reg[o].color:this.colors[o%this.colors.length];r=f+this.decorationsTextMargin-a,"ScatterBubble2D"==this.graphType&&"right"==this.decorationsPosition&&this.zAxisShow&&(r+=this.decorationsTextMargin+this.getFontPt(this.axisTitleFont)+this.decorationsTextMargin),this.toRender({p:["drawText",i.reg[o].label,r,n,this.decorationsTextFont,h,"right","middle"],t:"Legends"}),r=f,this.toRender({p:["drawText",this.formatNumber(i.reg[o].slope,2),r,n,this.decorationsTextFont,h,"right","middle"],t:"Legends"}),r+=a+this.decorationsTextMargin,this.toRender({p:["drawText",this.formatNumber(i.reg[o].intercept,this.yAxisDecs+1),r,n,this.decorationsTextFont,h,"right","middle"],t:"Legends"}),r+=a+this.decorationsTextMargin,this.toRender({p:["drawText",i.reg[o].cor?this.formatNumber(i.reg[o].cor,3):"NA",r,n,this.decorationsTextFont,h,"right","middle"],t:"Legends"}),r+=a+this.decorationsTextMargin,n+=s+this.decorationsTextMargin}}if(i.nor){this.toRender({p:["drawText","Mu",r,n,this.decorationsTextFont,this.decorationsTextColor,"right","middle"],t:"Legends"}),r+=a+this.decorationsTextMargin,this.toRender({p:["drawText","Sigma",r,n,this.decorationsTextFont,this.decorationsTextColor,"right","middle"],t:"Legends"}),n+=s+this.decorationsTextMargin;for(o=0;o<i.nor.length;o++){h=o%this.colors.length;h=i.nor[o].color?i.nor[o].color:this.colors[h],r=f+this.decorationsTextMargin-a,"ScatterBubble2D"==this.graphType&&"right"==this.decorationsPosition&&this.zAxisShow&&(r+=this.decorationsTextMargin+this.getFontPt(this.axisTitleFont)+this.decorationsTextMargin),this.toRender({p:["drawText",i.nor[o].label,r,n,this.decorationsTextFont,h,"right","middle"],t:"Legends"}),r=f,this.toRender({p:["drawText",this.formatNumber(i.nor[o].mu,this.xAxisDecs+1),r,n,this.decorationsTextFont,h,"right","middle"],t:"Legends"}),r+=a+this.decorationsTextMargin,this.toRender({p:["drawText",this.formatNumber(i.nor[o].sigma,this.xAxisDecs+2),r,n,this.decorationsTextFont,h,"right","middle"],t:"Legends"}),r+=a+this.decorationsTextMargin,n+=s+this.decorationsTextMargin}}if(i.area)for(o=0;o<i.area.length;o++)if(i.area[o].label){h=i.area[o].color?i.area[o].color:this.colors[o%this.colors.length];"ScatterBubble2D"==this.graphType&&"right"==this.decorationsPosition&&this.zAxisShow&&(r+=this.decorationsTextMargin+this.getFontPt(this.axisTitleFont)+this.decorationsTextMargin),this.toRender(["drawText",i.area[o].label,r,n,this.decorationsTextFont,h,"left","middle"]),n+=s+this.decorationsTextMargin}}else if("Map"==this.graphType&&this.decorations.pie&&this.decorations.pie[0]&&this.decorations.pie[0].smps&&this.decorations.pie[0].smps.length){i=this.decorations.pie[0];var d=(s=this.getFontPt(this.decorationsTextFont))/2,p=this.legend.decoration.columns||this.legendColumns,g=Math.ceil(i.smps.length/p),u=this.legend.decoration.width/p,m=0,f=t,y=e+d;for(o=0;o<g;o++){for(l=0;l<p&&(r=f+(this.decorationsTextMargin+u*l),m<i.smps.length);l++){a=i.colors[m];var x=r+d;this.toRender({p:["drawShape","circle",x,y,s,s,a,this.background],t:"Legends"}),this.toRender({p:["drawText",i.smps[m],x+d+this.decorationsTextMargin,y,this.decorationsTextFont,this.decorationsTextColor,"left","middle"],t:"Legends"}),m++}y+=2*d+this.margin}}},this.resetLegends=function(t){t&&(delete this.legend.decoration.curX,delete this.legend.decoration.curY,delete this.legend.decoration.x,delete this.legend.decoration.y);for(var e="Network"==this.graphType?["colorNode","shapeNode","sizeNode","patternNode","colorEdge","sizeEdge"]:this.scatterPlotMatrix?["color","shape","size","pattern","variable"]:this.connectByNoColor?["color","shape","size","pattern","variable","sample"]:["color","shape","size","line","pattern","connect","variable","sample","bin2d"],i=0;i<e.length;i++)this.legend[e[i]].width=0,this.legend[e[i]].height=0,t&&(delete this.legend[e[i]].curX,delete this.legend[e[i]].curY,delete this.legend[e[i]].x,delete this.legend[e[i]].y)},this.getXYLegendCoords=function(t,e,i){var s,a,r,n=-1,o=-1,h=this,l="Network"==this.graphType?0:this.offsetX,c="Network"==this.graphType?0:this.offsetY;if(this.legend.layout){var d=function(){for(var e=0;e<h.legend.layout.length;e++)if(h.legend.layout[e])for(var i=0;i<h.legend.layout[e].length;i++)if(h.legend.layout[e][i]==t)return[e,i];return[-1,-1]}();if(n=d[0],o=d[1],n>-1&&o>-1){var p=0,g=0;if(this.legendPosition.match(/right|left/i)){for(var u=0;u<n;u++){var m=0;if(this.legend.layout[u])for(var f=0;f<this.legend.layout[u].length;f++)m=Math.max(m,this.legend[this.legend.layout[u][f]].width+this.margin);p+=m}if(this.legend.layout[u])for(f=0;f<this.legend.layout[n].length;f++)g+=this.legend[this.legend.layout[n][f]].height+this.margin}else{for(u=0;u<n;u++){var y=0;if(this.legend.layout[u])for(f=0;f<this.legend.layout[u].length;f++)y=Math.max(y,this.legend[this.legend.layout[u][f]].height+this.margin);g+=y}if(this.legend.layout[u])for(f=0;f<this.legend.layout[n].length;f++)p+=this.legend[this.legend.layout[n][f]].width+this.margin}"Circular"==this.graphType?(s=e,a=i):this.legendPosition.match(/right|left/i)?(i=0==o&&(this.scatterPlotMatrix||this.layoutValid&&!this.getLayoutConfig("legendPosition"))?this.marginTop+this.layoutTop:0==o?this.marginTop+c+this.top:i,s=e+p+("Network"==this.graphType?-10:0),r=this.legendPosition.match(/top/)?this.margin:this.legendPosition.match(/bottom/)?this.y-(g+this.margin):(this.y-g)/2,a=0==o&&(this.scatterPlotMatrix||this.layoutValid&&!this.getLayoutConfig("legendPosition"))?(this.height-g)/2:0==o?this.marginTop+c+this.top+r:i,e=o==this.legend.layout[n].length-1?e+p:e,i=a+this.legend[this.legend.layout[n][o]].height+this.margin):(e=0==o&&(this.scatterPlotMatrix||this.layoutValid&&!this.getLayoutConfig("legendPosition"))?this.marginLeft+this.layoutLeft:0==o?this.marginLeft+l+this.left:e,a=i+g,e=(s=0==o&&(this.scatterPlotMatrix||this.layoutValid&&!this.getLayoutConfig("legendPosition"))?(this.width-p)/2:0==o?this.marginLeft+l+this.left+(this.x-p)/2+this.margin:e+this.margin)+this.legend[this.legend.layout[n][o]].width+this.margin,i=o==this.legend.layout[n].length-1?i+g:i)}}return[s,a,e,i]},this.getVariableLegendPosition=function(){var t,e;if("Pie"==this.graphType&&this.layoutValid)"right"==this.legendPosition?(t=this.width-(this.marginRight+this.legend.variable.width+this.margin),e=this.height/2-this.legend.variable.height/2):(t=this.width/2-this.legend.variable.width/2,e=this.height-(this.marginBottom+this.legend.variable.height+this.margin));else{if("Treemap"==this.graphType||"TagCloud"==this.graphType)return[0,0];if("Circular"==this.graphType)return[t=this.width-(this.marginRight+this.legend.variable.width+this.margin),e=this.height-(this.marginBottom+this.legend.variable.height+this.margin)];if(this.layoutValid&&"Pie"!=this.graphType){var i=this.width-(this.marginLeft+(this.layoutLeft||this.margin)+(this.layoutRight||this.margin)+this.marginRight),s=this.height-(this.marginTop+(this.layoutTop||this.margin)+(this.layoutBottom||this.margin)+this.marginBottom),a=this.legend.variable.height+this.legend.overlays.height+-.5*this.margin,r=this.legend.variable.width+this.legend.overlays.width+-.5*this.margin;t="right"==this.legendPosition?this.width-(this.marginRight+r):"left"==this.legendPosition?this.marginLeft+this.margin:this.marginLeft+(this.layoutLeft||this.margin)+i/2-r/2,e="bottom"==this.legendPosition?this.height-(this.marginBottom+a):"top"==this.legendPosition?this.marginTop+this.margin+this.getTitleSubtitleHeight():this.marginTop+(this.layoutTop||this.margin)+s/2-a/2}else{var n=this.marginLeft+this.offsetX+this.left,o=this.marginTop+this.offsetY+this.top,h=this.legend.variable.height,l=this.legend.variable.width;if(this.legendInside||"Pie"==this.graphType)switch(this.legendPosition){case"bottomRight":t=n+this.x-(l+this.margin),e=o+this.y-(h+this.margin);break;case"bottom":t=n+this.x/2-l/2,e=o+this.y-("Pie"==this.graphType?0:h+this.margin);break;case"bottomLeft":t=n+this.margin,e=o+this.y-(h+this.margin);break;case"left":t=n+this.margin-("Pie"==this.graphType?l+this.margin:0),e=o+this.y/2-h/2;break;case"topLeft":t=n+this.margin,e=o+this.margin;break;case"top":t=n+this.x/2-l/2,e=o+this.margin-("Pie"==this.graphType?h+this.margin:0);break;case"topRight":t=n+this.x-(l+this.margin),e=o+this.margin;break;default:t=n+this.x-("Pie"==this.graphType?0:l+this.margin),e=o+this.y/2-h/2}else{var c=this.overlaysLegendPosition.match(/top|bottom/i)?this.legend.overlays.height:0,d=this.overlaysLegendPosition.match(/right|left/i)?this.legend.overlays.width:0;switch(this.legendPosition){case"bottomRight":t=n+this.x+this.right-(l+d+this.margin),e=o+this.y-h;break;case"bottom":t=n+this.x/2-l/2,e=o+this.y+this.bottom-(h+c+this.margin);break;case"bottomLeft":t=this.marginLeft+this.offsetX+this.margin,e=o+this.y-h;break;case"left":t=this.marginLeft+this.offsetX+this.margin,e=o+this.y/2-h/2;break;case"topLeft":e=o,t=this.marginLeft+this.offsetX+this.margin;break;case"top":t=n+this.x/2-l/2,e=this.marginTop+this.offsetY+this.margin+this.getTitleSubtitleHeight();break;case"topRight":e=o,t=n+this.x+this.right-(l+d+this.margin);break;default:t=n+this.x+this.right-(l+d+this.margin),e=o+this.y/2-h/2}}}}return[t,e]},this.getScatterLegendPosition=function(){var t=0,e=0,i=0,s=0,a=0,r=0,n="Network"==this.graphType?10:this.offsetX,o="Network"==this.graphType?10:this.offsetY,h=this.marginLeft+n+this.left+this.margin,l=this.marginTop+o+this.top+this.margin;if(this.scatterPlotMatrix||this.layoutValid&&!this.getLayoutConfig("legendPosition"))i="left"==this.legendPosition?this.marginLeft+this.margin:this.width+this.margin-(this.marginRight+(this.legend.width||0)),s="top"==this.legendPosition?this.marginTop+this.margin+this.getTitleSubtitleHeight():this.height+this.margin-(this.marginBottom+(this.legend.height||0)),t=i-(this.legend.decoration.width+this.margin),e=s-(this.legend.decoration.height+this.margin);else if("Circular"==this.graphType)"sunburst"==this.circularType&&this.colorBy?(i="top"==this.legendPosition?this.marginLeft+this.left:this.width-(this.legendTextColorWidth+this.right+this.marginRight),s="top"==this.legendPosition?this.marginTop+this.top:this.height-(this.legendTextColorHeight+this.bottom+this.marginBottom)):(i="top"==this.legendPosition?this.marginLeft+this.left:this.width-(this.legend.variable.width+this.right+this.marginRight),s="top"==this.legendPosition?this.marginTop+this.top:this.height-(this.legend.variable.height+this.bottom+this.marginBottom));else if(this.legendInside){if(this.legend.decoration.width>0&&this.legend.decoration.height>0){var c=this.legend.decoration.width+2*this.margin;switch(this.decorationsPosition){case"bottomRight":t=h+this.x-c,e=l+this.y-(this.legend.decoration.height+this.margin);break;case"bottom":t=h+this.x/2-this.legend.decoration.width/2,e=l+this.y-(this.legend.decoration.height+this.margin);break;case"bottomLeft":t=h+this.margin,e=l+this.y-(this.legend.decoration.height+this.margin);break;case"left":t=h+this.margin,e=l+this.y/2-this.legend.decoration.height/2;break;case"topLeft":t=h+this.margin,e=l+2*this.margin;break;case"top":t=h+this.x/2-this.legend.decoration.width/2,e=l+2*this.margin;break;case"topRight":t=h+this.x-c,e=l+2*this.margin;break;default:t=h+this.x-c,e=l+this.y/2-this.legend.decoration.height/2}}if(this.legend.width>0&&this.legend.height>0)switch(this.legendPosition){case"bottomRight":i=h+this.x-this.legend.width,s=l+this.y-this.legend.height;break;case"bottom":i=h+this.x/2-this.legend.width/2,s=l+this.y-this.legend.height;break;case"bottomLeft":i=h,s=l+this.y-this.legend.height;break;case"left":i=h,s=l+this.y/2-this.legend.height/2;break;case"topLeft":i=h,s=l;break;case"top":i=h+this.x/2-this.legend.width/2,s=l;break;case"topRight":i=h+this.x-this.legend.width,s=l;break;default:i=h+this.x-this.legend.width,s=l+this.y/2-this.legend.height/2}}else{switch(this.decorationsPosition){case"bottom":t=h+this.x/2-this.legend.decoration.width/2,e=l+this.y+this.bottom-this.legend.decoration.height;break;default:t=h+this.x+this.right-(this.legend.decoration.width+2*this.margin),e=l+this.y/2-this.legend.decoration.height/2}switch(a=this.legendPosition==this.decorationsPosition?this.legend.decoration.width:0,r=this.legendPosition==this.decorationsPosition?this.legend.decoration.height:0,this.legendPosition){case"bottomRight":i=h+this.x+this.right-(this.legend.width+a),s=l+this.y-this.legend.height/2,("Scatter3D"==this.graphType||this.is3DPlot)&&(i+=this.legend.width),this.isMultidimensionalData&&"right"==this.heatmapIndicatorPosition&&(i-=this.heatmapIndicatorHeight+this.meta.def.colorBrew.maxLevLen+this.margin),"visium"==this.scatterType&&(i-=3*this.margin);break;case"bottom":i=h+this.x/2-this.legend.width/2,s=l+this.y+this.bottom-(this.legend.height+(r?r+this.margin:0)),("Scatter3D"==this.graphType||this.is3DPlot)&&(s+=this.legend.height);break;case"bottomLeft":i=this.marginLeft+n+this.margin,s=l+this.y-this.legend.height/2;break;case"left":i=this.marginLeft+n+this.margin,s=l+this.y/2-this.legend.height/2;break;case"topLeft":i=this.marginLeft+n+this.margin,s=l+this.legend.height/2;break;case"top":i=h+this.x/2-this.legend.width/2,s=this.marginTop+o+this.margin+this.getTitleSubtitleHeight();break;case"topRight":i=h+this.x+this.right-(this.legend.width+a),s=l+this.legend.height/2,("Scatter3D"==this.graphType||this.is3DPlot)&&(i+=this.legend.width),this.isMultidimensionalData&&"right"==this.heatmapIndicatorPosition&&(i-=this.heatmapIndicatorHeight+this.meta.def.colorBrew.maxLevLen+this.margin),"visium"==this.scatterType&&(i-=3*this.margin);break;default:i=h+this.x+this.right-(this.legend.width+a),s=l+this.y/2-this.legend.height/2,("Scatter3D"==this.graphType||this.is3DPlot)&&(i+=this.legend.width),this.isMultidimensionalData&&"right"==this.heatmapIndicatorPosition&&(i-=this.heatmapIndicatorHeight+this.meta.def.colorBrew.maxLevLen+this.margin),"visium"==this.scatterType&&(i-=3*this.margin)}}return[t,e,i,s]},this.drawIndicator=function(t,e,i){this.drawColorIndicator(t,e,!1,i)},this.drawLegend=function(t){if("Meter"!=this.graphType)if("Fish"==this.graphType){var e=this.getVariableLegendPosition();this.drawVariableLegend(e[0],e[1])}else if("Venn"==this.graphType)this.drawVennLegend();else if("Circular"==this.graphType){if("sunburst"==this.circularType)this.drawScatterLegend(t);else if("bubble"==this.circularType);else if(this.showLegend){this.drawOverlaysLegend();e=this.getVariableLegendPosition();this.drawVariableLegend(e[0],e[1])}}else"Network"==this.graphType?this.drawScatterLegend():this.graphType.match(/Scatter/)||this.is3DPlot||(this.isAttributedGraph()||this.connectBy)&&(CanvasXpress.graphTypes.AttGraphs.includes(this.graphType)||"Map"==this.graphType)?(this.drawScatterLegend(t),this.isOncoprint&&this.drawOncoprintLegend(),this.drawOverlaysLegend()):"Pie"==this.graphType&&this.layoutValid&&!this.isDOE?this.layoutCurrent==this.data.l.smps.length-1&&this.draw1DLegend():(this.draw1DLegend(),this.drawOverlaysLegend())},this.draw1DLegend=function(){if(this.showLegend&&("Heatmap"!=this.graphType||"Heatmap"==this.graphType&&this.isAttributedGraph()))if(this.isMultidimensionalData||this.isAttributedGraph()&&CanvasXpress.graphTypes.AttGraphs.includes(this.graphType))this.isOncoprint&&this.drawOncoprintLegend(),this.drawScatterLegend();else{if("Treemap"==this.graphType||"TagCloud"==this.graphType)return;var t=this.getVariableLegendPosition(),e=t[0],i=t[1];this.legend.variableX&&this.legend.variableY&&(e=this.legend.variableX,i=this.legend.variableY),this.legend.variableCurX=e,this.legend.variableCurY=i,this.drawVariableLegend(e,i)}else this.isOncoprint&&this.drawOncoprintLegend()},this.drawOverlaysLegend=function(){var t,e;this.overlaysLegendPosition.match(/right/i)?(t=this.layoutValid?this.marginTop+this.layoutTop:this.marginTop+this.offsetY+this.top,"right"==this.overlaysLegendPosition&&(t+=this.y/2-this.legend.overlays.height/2),e=this.layoutValid?this.width-(this.marginRight+this.layoutRight+this.legend.overlays.width):this.width-(this.marginRight+this.legend.overlays.width),"Heatmap"==this.graphType&&"right"==this.heatmapIndicatorPosition&&(e-=this.getHeatmapIndicatorWidth()-this.margin)):(t=this.layoutValid?this.height-(this.marginBottom+this.layoutBottom+this.legend.overlays.height):this.height-(this.marginBottom+this.legend.overlays.height),e=this.layoutValid?this.marginLeft+this.layoutLeft:this.marginLeft+this.offsetX+this.left,"bottom"==this.overlaysLegendPosition&&(e+=this.x/2-this.legend.overlays.width/2));for(var i=t,s=e,a=0;a<this.legend.overlays.layout.length;a++){for(var r,n,o,h,l=this.legend.overlays.layout[a],c=mw=0,d=mh=0,p=0;p<l.length;p++)r=l[p][0],n=l[p][1],mw=Math.max(c,l[p][2]),mh=Math.max(d,l[p][3]);for(p=0;p<l.length;p++)r=l[p][0],n=l[p][1],o=this.meta.data[r][n],c=this.legend.overlays[n].width,d=this.legend.overlays[n].height,h="z"==r?this.varOverlaysLegendColumns:this.smpOverlaysLegendColumns,"String"==o.type?this.drawGenericLegend(s,i,c,d,o,n,h):this.drawColorIndicator(s,i,o,n,!1,c/2),this.overlaysLegendPosition.match(/right/i)?i+=d+this.margin:s+=c+this.margin;this.overlaysLegendPosition.match(/right/i)?(s+=mw+this.margin,i=t):(s=e,i+=mh+this.margin)}},this.drawScatterLegend=function(t){var e=this.getScatterLegendPosition();if(this.showDecorations&&this.showDecorationsLegend&&this.decorations&&!this.layoutValid&&(null!=this.legend.decoration.x&&null!=this.legend.decoration.y?this.drawDecorationLegend(this.legend.decoration.x,this.legend.decoration.y):this.drawDecorationLegend(e[0],e[1])),this.showLegend){for(var i="Network"==this.graphType?["colorNode","shapeNode","sizeNode","patternNode","colorEdge","sizeEdge","decoration"]:this.scatterPlotMatrix?["color","shape","size","pattern","variable"]:this.connectByNoColor?["color","shape","size","pattern","variable","sample"]:["color","shape","size","line","pattern","connect","variable","sample","contour","bin2d"],s=e[2],a=e[3],r=this.isContour&&"Point"==this.contourType?"Size":"Color",n=0;n<i.length;n++){var o=this.legend[i[n]].width,h=this.legend[i[n]].height,l=this.legend[i[n]].x,c=this.legend[i[n]].y,d=this.isHistogramLayout()&&"sample"==i[n];if(o>0){t&&!d&&(this.setPropertyLegendDimensions(i[n]),o=this.legend[i[n]].width,h=this.legend[i[n]].height);var p=("draw"+this.capitalize(i[n])+"Legend").replace("Node","").replace("Edge","").replace("Decoration","color").replace("Contour",r).replace("Bin2d",r).replace("Line","Color"),g=this.legend[i[n]].meta,u=this.getXYLegendCoords(i[n],s,a);l&&c?(this[p](l,c,g,i[n]),this.legend[i[n]].curX=l,this.legend[i[n]].curY=c):(this[p](u[0],u[1],g,i[n]),this.legend[i[n]].curX=u[0],this.legend[i[n]].curY=u[1]),this.legendPosition.match(/right|left/i)?a=u[3]+this.margin:s=u[2]+this.margin}}for(n=0;n<this.customLegend.length;n++)if("Network"!=this.graphType||this.showDecorations){var m="custom"+n;o=this.legend[m].width,h=this.legend[m].height,l=this.legend[m].x,c=this.legend[m].y,u=this.getXYLegendCoords(m,s,a);l&&c?(this.drawCustomLegend(l,c,o,h,this.customLegend[n]),this.legend[m].curX=l,this.legend[m].curY=c):(this.drawCustomLegend(u[0],u[1],o,h,this.customLegend[n]),this.legend[m].curX=u[0],this.legend[m].curY=u[1]),this.legendPosition.match(/right|left/i)?a=u[3]+this.margin:s=u[2]+this.margin}}}},CanvasXpress.prototype.initMarkerUtils=function(){this.setMarker=function(t,e){var i=this,s=function(t){for(var e=i.meta.render.objects,s=[],a=0;a<e.length;a++){var r=e[a];if("Data"==r.type&&r.idx){var n=r.idx.join(":");n!=t&&n!=t+":false"&&n!=t+":true"&&n!=t+":box"||(i.layoutValid?r.layout==i.layoutCurrent&&s.push(r):s.push(r))}}return!!s.length&&s[0]},a=function(){return t.fontSize?(t.fontStyle||"")+" "+parseInt(t.fontSize)+"px "+i.fontName:i.decorationsTextFont};if(!t.variable)return!1;var r,n,o,h,l=!!(this.graphType.match(/Treemap|Stacked|Dotplot/)||"Boxplot"==this.graphType&&this.showBoxplotOriginalData),c=function(){if(i.layoutValid&&i.data.l&&i.data.l.comp&&i.segregateSamplesBy.length&&i.segregateVariablesBy.length){if(!t.variable)return[];for(var e=i.isArray(t.variable)?t.variable[0]:t.variable,s=0;s<i.data.l.comp[i.layoutCurrent][0].length;s++){var a=i.data.l.comp[i.layoutCurrent][0][s];if(i.data.y.vars[a]==e)return[a]}return[]}return t.variable?i.isArray(t.variable)?i.getVariableIndices(t.variable):i.getVariableIndices([t.variable]):[]}(),d=t.variable2&&this.isArray(t.variable2)?this.getVariableIndices(t.variable2):!!t.variable2&&this.getVariableIndices([t.variable2]),p=function(){var e=[];if(i.layoutValid&&i.data.l&&i.data.l.smps&&i.data.l.smps[i.layoutCurrent]){for(var s=0;s<i.data.l.smps[i.layoutCurrent].length;s++)if(i.data.l.smps[i.layoutCurrent][s]==t.sample){if(("Boxplot"==i.graphType&&i.showBoxplotOriginalData||"Dotplot"==i.graphType)&&i.isGroupedData&&i.data.w)for(var a=!1,r=0;r<i.data.w.grps.length;r++){for(var n=0;n<i.data.w.grps[r].length;n++)i.data.l.ids[i.layoutCurrent][s]==i.data.w.grps[r][n]&&(e.push(r),e.push(i.data.l.ids[i.layoutCurrent][s]),a=!0);if(a)break}else e.push(i.data.l.ids[i.layoutCurrent][s]);break}if(!e.length&&i.isGroupedData&&i.data.w)for(s=0;s<i.data.w.labs.length;s++)i.data.w.labs[s].replace("\0","")==t.sample&&e.push(s);if(t.scope&&i.isArray(t.scope))if(i.isGroupedData&&i.data.w&&e.length)e=t.scope.length>1?i.data.l.name[i.layoutCurrent].includes(t.scope[0])&&i.data.l.name[i.layoutCurrent].includes(t.scope[1])?[e[0]]:null:i.data.l.name[i.layoutCurrent].includes(t.scope[0])?[e[0]]:null;else if(i.data.x){for(s=0;s<e.length;s++){var o=e[s],h=0;for(var c in i.data.x)t.scope.includes(i.data.x[c][o])&&h++;if(h==t.scope.length){e=o;break}}i.isArray(e)&&(e=[e[0]])}else e=[e[0]]}else{if(!(e=t.sample?i.isArray(t.sample)?i.getSampleIndices(t.sample,l):i.getSampleIndices([t.sample],l):[]).length&&i.isGroupedData&&i.data.w)for(s=0;s<i.data.w.grps.length;s++){var d=i.data.w.labs[s].replace("\0","");if(t.sample[0].toString().replace("\0","")==d){e.unshift(s),a=!0;break}}if(("Boxplot"==i.graphType&&i.showBoxplotOriginalData||"Dotplot"==i.graphType)&&i.isGroupedData&&i.data.w)if(e.length)for(a=!1,s=0;s<i.data.w.grps.length;s++){for(r=0;r<i.data.w.grps[s].length;r++)if(e[0]==i.data.w.grps[s][r]){e.unshift(s),a=!0;break}if(a)break}else e=t.sample?i.isArray(t.sample)?i.getSampleIndices(t.sample):i.getSampleIndices([t.sample]):[]}return e}(),g=t.sample2&&this.isArray(t.sample2)?this.getSampleIndices(t.sample2,l):!!t.sample2&&this.getSampleIndices([t.sample2],l),u=s(c.concat(p).join(":")),m=t.position&&"false"!=t.position?t.position:"center";if(u&&u.area){switch(t.type){case"comparison":r=s(d.concat(g).join(":")),o=this.renderObjectCoordinates(u,"top",!1,4),h=this.renderObjectCoordinates(r,"top",!1,4),n=[(o[0]+h[0])/2,Math.min(o[1],h[1])-.5*this.getFontPt(a())],t.tx=t.offsetX?n[0]+t.offsetX:n[0],t.ty=t.offsetY?n[1]+t.offsetY:n[1],t.line=[o[0],Math.min(o[1],h[1]),h[0],Math.min(o[1],h[1])],t.render=u.n,t.render2=r.n,t.id=null==t.id?this.newId("-marker-"):t.id;break;case"line":case"annotation":default:n=[(o=this.renderObjectCoordinates(u,m,!1,t.x&&t.y?0:2,t.x,t.y))[0],o[1]],t.x&&t.y&&(n=o[3]),t.tx=e?t.curX:t.offsetX?n[0]+t.offsetX:n[0],t.ty=e?t.curY:t.offsetY?n[1]+t.offsetY:n[1],t.line=e?[o[2].center[0],o[2].center[1],t.tx,t.ty]:[o[2].center[0],o[2].center[1],n[0],n[1]],t.text=t.text.replace(/__nl__/g,"\n"),t.textLength=this.measureText(t.text,a()),t.textHeight=this.measureTextWidth(t.text,a()),function(t,e){var i=.5*t.textLength,s=.5*t.textHeight,a=t.tx<=e[2].left[0]-i,r=t.tx>=e[2].right[0]+i,n=t.ty<=e[2].top[1]-s,o=t.ty>=e[2].bottom[1]+s,h=1.1;n&&a?(t.line[2]+=i*h,t.line2=[t.line[2],t.line[3]-s,t.line[2],t.line[3]+s]):n&&r||o&&r?(t.line[2]-=i*h,t.line2=[t.line[2],t.line[3]-s,t.line[2],t.line[3]+s]):o&&a?(t.line[2]+=i*h,t.line2=[t.line[2],t.line[3]-s,t.line[2],t.line[3]+s]):n?(t.line[3]+=s,t.line2=[t.line[2]-i,t.line[3],t.line[2]+i,t.line[3]]):r?(t.line[2]-=i*h,t.line2=[t.line[2],t.line[3]-s,t.line[2],t.line[3]+s]):o?(t.line[3]-=s,t.line2=[t.line[2]-i,t.line[3],t.line[2]+i,t.line[3]]):a?(t.line[2]+=i*h,t.line2=[t.line[2],t.line[3]-s,t.line[2],t.line[3]+s]):(delete t.line,delete t.line2)}(t,o),t.render=u.n,t.id=null==t.id?this.newId("-marker-"):t.id}return t}return!1},this.getMarker=function(t){if(t&&this.decorations&&this.decorations.marker)for(var e=0;e<this.decorations.marker.length;e++){var i=this.decorations.marker[e];if(t==i.id)return i}},this.drawMarkers=function(t){var e=this,i=function(t){if(e.layoutValid){var i=0==e.layoutCurrent?0:null!=e.layoutCurrent?e.layoutCurrent:e.layoutValidN||0,s=e.layoutParams[i];return!(null==t.si&&!t.render)&&((!t.hasOwnProperty("layout")||t.layout==i)&&(t.ty>e.offsetY&&t.ty<e.offsetY+(s.height||e.height)&&t.tx>e.offsetX&&t.tx<e.offsetX+(s.width||e.width)))}return t.ty>0&&t.ty<e.height&&t.tx>0&&t.tx<e.width};if(t)this.clearHighlightCanvas(),this.isHighlightCanvas=!0;else if(this.moveMarker)return;if(this.decorations&&this.decorations.marker){var s=this.decorations.marker,a=[];if(this.layoutValid&&this.data.l)for(var r=this.data.l.name[this.layoutCurrent],n=0;n<s.length;n++){if(this.isArray(s[n].scope)||(s[n].scope=[s[n].scope]),s[n].scope)if(this.isArray(r))if(this.isArray(s[n].scope))r.sort().join("").replace("\0","")==s[n].scope.sort().join("").replace("\0","")&&a.push(n);else r.includes(s[n].scope[0])&&a.push(n);else r==s[n].scope[0]&&a.push(n);else a.push(n)}else for(n=0;n<s.length;n++)a.push(n);for(n=0;n<a.length;n++){delete s[a[n]].tx,delete s[a[n]].ty,delete s[a[n]].layout;var o=this.setMarker(s[a[n]],t);if(o&&o.tx&&o.ty&&(i(o)||t)){var h=o.scope||!1;if(h){var l=!this.layoutValid;if(this.layoutValid){var c=this.data.l.name[this.layoutCurrent];this.isArray(c)||(c=[c]);for(var d=0;d<c.length;d++){var p=c[d].toString().replace("\0","");if(this.isArray(h)){for(var g=0;g<h.length;g++)if(h[g].toString()==p){l=!0;break}}else if(h.toString()==p){l=!0;break}}}if(!l)continue}var u=!!o.rotate&&Math.PI*o.rotate/180;o.color=o.color||"rgb(0,0,0)",o.align=o.align||"center",o.baseline=o.baseline||"middle",o.width=o.width||1;var m=this.toRender({p:["drawText",o.text,o.tx,o.ty,o.fontSize?(o.fontStyle||"")+" "+parseInt(o.fontSize)+"px "+e.fontName:e.decorationsTextFont,o.color,o.align,o.baseline,u],i:["Marker:"+o.id],t:"Decorations",d:!!this.moveMarker});t||("annotation"!=o.type&&o.line&&this.toRender({p:["drawLine","line",o.line[0],o.line[1],o.line[2],o.line[3],o.color,o.width],g:m,t:"Decorations",d:!!this.moveMarker}),"comparison"==o.type?(this.toRender({p:["drawLine","line",o.line[0],o.line[1]-this.margin,o.line[0],o.line[1]+this.margin,o.color,o.width],g:m,t:"Decorations",d:!!this.moveMarker}),this.toRender({p:["drawLine","line",o.line[2],o.line[3]-this.margin,o.line[2],o.line[3]+this.margin,o.color,o.width],g:m,t:"Decorations",d:!!this.moveMarker})):"annotation"!=o.type&&o.line2&&this.toRender({p:["drawLine","line",o.line2[0],o.line2[1],o.line2[2],o.line2[3],o.color,o.width],g:m,t:"Decorations",d:!!this.moveMarker})),o.curX=o.tx,o.curY=o.ty}}}t&&(this.isHighlightCanvas=!1)}},CanvasXpress.prototype.initFilterUtils=function(){this.handleSelector=function(t){this.hiddenLegends[t.id]=!this.hiddenLegends[t.id];var e=!this.hiddenLegends[t.id],i=this.showTransition;switch(this.showTransition=!1,t.type){case"var":this.filterVariables(t.type+"s","exact",this.isArray(t.name)?t.name:[t.name],e);break;case"smp":this.filterSamples(t.type+"s","exact",this.isArray(t.name)?t.name:[t.name],e);break;case"series":if(this.isHistogramLayout()){var s=this.segregateVariablesBy.length&&this.segregateVariablesBy[0]==this.isCreateHistogram.factor?this.segregateVariablesBy[0]==this.isCreateHistogram.factor&&t.name[1].split(":")[0]:t.name[1].split(":")[1];if(s){t.name=[t.name[0]];for(var a=0;a<this.data.y.smps.length;a++)for(var r=this.data.y.smps[a].split(":"),n=0;n<r.length;n++)r[n]!=s||t.name.push(this.data.y.smps[a])}}this.filterSamples("smps","exact",this.isArray(t.name)?t.name:[t.name],e);break;case"meta":var o=this.isOncoprint||this.isMultidimensionalData&&!this.meta.data[t.object][t.factor]&&this.meta.data[t.object]?this.meta.data[t.object]:this.meta.data[t.object][t.factor];switch(t.object){case"x":if("Numeric"==o.type){var h=o.order[t.level],l=Number(t.level),c=o.isRange&&0==h?Number(t.level)-o.incr:o.isRange?o.levels[h-1]+1e-8:Number(t.level);this.filterSamplesByCategory(t.factor,"between",[c,l],e)}else this.filterSamplesByCategory(t.factor,"exact",this.isArray(t.level)?t.level:[t.level],e);break;case"z":if("Numeric"==o.type){h=o.order[t.level],l=Number(t.level),c=o.isRange&&0==h?Number(t.level)-o.incr:o.isRange?o.levels[h-1]+1e-8:Number(t.level);this.filterVariablesByCategory(t.factor,"between",[c,l],e)}else this.filterVariablesByCategory(t.factor,"exact",this.isArray(t.level)?t.level:[t.level],e);break;case"y":if(!(o=this.shapeBy==t.factor?this.legendShapeMeta:this.sizeBy==t.factor&&this.legendSizeMeta))return;for(h=0,a=0;a<o.vals.length;a++)if(Number(t.level)==o.vals[a]){h=a;break}l=o.vals[h],c=0==h?Number(t.level)-1e-9:o.vals[h-1]+1e-9;this.filterVariablesByCategory(t.factor,"between",[c,l],e);break;case"modified":this.meta.data.modified.x&&this.meta.data.modified.x.meta&&this.meta.data.modified.x.meta[t.factor]?alert("Ooops! Needs to develop this case!"):this.meta.data.modified.z&&this.meta.data.modified.z.meta&&this.meta.data.modified.z.meta[t.factor]&&this.filterUserData("filterSmpBy",t.factor,"exact",[this.meta.data.modified.z.meta[t.factor].order[t.level]],e);break;default:if(o&&"Numeric"==o.type){h=o.order[t.level],l=Number(t.level),c=o.isRange&&0==h?Number(t.level)-o.incr:o.isRange?o.levels[h-1]+1e-8:Number(t.level);this.filterDataByCategory(t.object,"between",[c,l],e)}else this.filterDataByCategory(t.object,"exact",[t.level],e)}break;case"data":this.filterDataByCategory(t.object,"exact",[t.name],e)}this.showTransition=i},this.filterVariables=function(t,e,i,s,a){this.filterUserData("filterVarBy","vars",e,i,s,a)},this.filterVariablesByCategory=function(t,e,i,s,a){this.filterUserData("filterVarBy",t,e,i,s,a)},this.filterSamples=function(t,e,i,s,a){this.filterUserData("filterSmpBy","smps",e,i,s,a)},this.filterSamplesByCategory=function(t,e,i,s,a){this.filterUserData("filterSmpBy",t,e,i,s,a)},this.filterDataByCategory=function(t,e,i,s,a){this.filterUserData("filterDataBy",t,e,i,s,a)},this.filterUserData=function(t,e,i,s,a,r){if(!this.isTransition()){var n,o={min:">=",max:"<=",between:"between",like:"like",exact:"exact"},h={hidden:{},unhidden:{},vs:s,op:!a};this.showMask();var l=this.cloneObject(this[t]),c=this.ungroupGroupedData();if(!r&&a&&(this.reset(!0,!0,!1,r),this.filterData(c,!r),n={hiddenVars:this.cloneObject(this.hiddenVars),hiddenSmps:this.cloneObject(this.hiddenSmps),hiddenGrps:this.cloneObject(this.hiddenGrps),hiddenMapFeatures:this.cloneObject(this.hiddenMapFeatures)}),this[t]=l,a)for(var d=0;d<this[t].comp.length;d++)this[t].comp[d]==e&&this[t].op[d]==o[i]&&0==this[t].cases[d]&&"Legend"==this[t].type[d]&&this.isSameObject(this[t].value[d],s)&&(this[t].comp.splice(d,1),this[t].op.splice(d,1),this[t].cases.splice(d,1),this[t].type.splice(d,1),this[t].value.splice(d,1));else this[t].comp.push(e),this[t].op.push(o[i]),this[t].cases.push(!1),this[t].type.push("Legend"),this[t].value.push(s);if(this.reset(!0,!0,!1,r),this.filterData(c,!r),this.isGroupedData&&this.smpIndices.length>0){var p=this.cloneObject(this.data.w.grpIdxs);this.groupSamples(this.groupingFactors,!1,p,!0,!0,!1,!c)}this.filterIdToName(n,h),this.draw({func:"filterUserData",par:[t,e,i,s,a,r],prop:{hiddenLegends:this.hiddenLegends}}),this.userEvents.clicklegend.call(this,h,this.lastEvent,this)}},this.filterIdToName=function(t,e){for(var i=["hiddenVars","hiddenSmps","hiddenGrps","hiddenMapFeatures"],s=0;s<i.length;s++){var a=i[s];if(e.hidden[a]=[],e.unhidden[a]=[],e.op){if(this[a])for(s=0;s<this[a].length;s++)if(this[a][s])switch(a){case"hiddenVars":e.hidden[a][this.data.y.vars[s]]=!0;break;case"hiddenSmps":e.hidden[a][this.data.y.smps[s]]=!0;break;case"hiddenGrps":e.hidden[a][this.data.w.smps[s]]=!0;break;case"hiddenMapFeatures":e.hidden[a][e.vs[0]]=!0}}else if(t[a])for(var s=0;s<t[a].length;s++)if(!this[a][s]&&t[a][s])switch(a){case"hiddenVars":e.unhidden[a][this.data.y.vars[s]]=!0;break;case"hiddenSmps":e.unhidden[a][this.data.y.smps[s]]=!0;break;case"hiddenGrps":e.unhidden[a][this.data.w.smps[s]]=!0;break;case"hiddenMapFeatures":e.unhidden[a][vs[0]]=!0}if(this[a]){this[a+"Local"]={};for(s=0;s<this[a].length;s++)this[a+"Local"][this.data.y.vars[s]]=this[a][s]}}},this.filterData=function(t,e){if(!this.isDOE){this.showMask();var i={},s={},a={},r=this,n=function(t,e,i){if(e.hasOwnProperty(t))return e[t];if(t.match(":::")){var s=t.split(":::");if(i[s[1]]){s[1]=parseInt(s[1]);for(var a=0;a<i[s[1]].length;a++){var r=i[s[1]][a];if(!e.hasOwnProperty(r))return!1;e=e[r]}if(e.hasOwnProperty(s[0]))return e[s[0]]}}return!1},o=function(t){var e={s:[],v:[]};if(r.filterSmpBy.comp.length)for(var i=0;i<r.filterSmpBy.comp.length;i++)if(r.filterSmpBy.comp[i]){if(t&&"Legend"!=r.filterSmpBy.type[i])continue;e.s[i]=r.getSampleIndices(r.filterSmpBy.comp[i])}if(r.filterVarBy.comp.length)for(i=0;i<r.filterVarBy.comp.length;i++)if(r.filterVarBy.comp[i]){if(t&&"Legend"!=r.filterVarBy.type[i])continue;e.v[i]=r.getVariableIndices(r.filterVarBy.comp[i])}return e},h=function(e,i){if(!r.isGroupedData||t&&!i){c=r.smpIndices;var s=o(e);for(d=[],p=!1,g=0;g<c.length;g++){u=c[g],m=!1;if((h=r.filterVarBy).comp.length>0)for(f=0;f<h.comp.length;f++)if(h.comp[f]){if(e&&"Legend"!=h.type[f])continue;if((a=s.v[f])>=0){p=!0;y=l(r.data.y.data[a][u],h.op[f],h.value[f],h.cases[f]);if("and"!=r.filterType||e){if(y){m=!0;break}}else{if(!y){m=!1;break}m=!0}}}if((h=r.filterSmpBy).comp.length>0)for(f=0;f<h.comp.length;f++)if(h.comp[f]){if(e&&"Legend"!=h.type[f])continue;var a;if(-1==(a=s.s[f])){p=!0;var n="smps"==h.comp[f]?r.data.y.smps[u]:r.getMetadataValue(u,"x",h.comp[f],!0);y=l(n,h.op[f],h.value[f],h.cases[f]);if("and"!=r.filterType||e){if(y||m){m=!0;break}}else{if(!y){m=!1;break}m=!0}}}m&&d.push(u)}}else for(var h,c=r.grpIndices,d=[],p=!1,g=0;g<c.length;g++){var u=c[g],m=!1;if((h=r.filterSmpBy).comp.length>0)for(var f=0;f<h.comp.length;f++)if(h.comp[f]){if(e&&"Legend"!=h.type[f])continue;if(p=!0,"smps"==h.comp[f]){for(var y=!1,x=0;x<r.data.w.grps[u].length;x++)if(l(r.data.y.smps[r.data.w.grps[u][x]],h.op[f],h.value[f],h.cases[f])){y=!0;break}if("and"!=r.filterType||e){if(y||m){m=!0;break}}else{if(!y){m=!1;break}m=!0}}else{var y=l(r.data.w.factors[h.comp[f]][g],h.op[f],h.value[f],h.cases[f]);if("and"!=r.filterType||e){if(y||m){m=!0;break}}else{if(!y){m=!1;break}m=!0}}}m&&d.push(u)}return!!p&&d},l=function(t,e,i,s){if(!e)return!0;if(r.filterSkipNullValues&&(null==t||""==t))return!0;if(">"==e)return parseFloat(t)-parseFloat(i)>0;if(">="==e)return parseFloat(t)-parseFloat(i)>0||parseFloat(t)-parseFloat(i)==0;if("<"==e)return parseFloat(t)-parseFloat(i)<0;if("<="==e)return parseFloat(t)-parseFloat(i)<0||parseFloat(t)-parseFloat(i)==0;if("between"==e)return(parseFloat(t)-parseFloat(i[0])>0||parseFloat(t)-parseFloat(i[0])==0)&&(parseFloat(t)-parseFloat(i[1])<0||parseFloat(t)-parseFloat(i[1])==0);if("="==e||"=="==e)return parseFloat(t)-parseFloat(i)==0;if("null"==e)return null==t;if("not null"==e)return null!=t;if("exact"==e){for(var a=0;a<i.length;a++)if((t+"").toString()==(i[a]+"").toString())return!0;return!1}if("like"==e||"not like"==e){var n=!1;if(s)for(a=0;a<i.length&&(-1==(t+"").search(i[a]+"")&&i[a].toString()!=t.toString()||(n=!0,"like"!=e));a++);else{var o=(t+"").toLowerCase();for(a=0;a<i.length;a++){var h=(i[a]+"").toLowerCase();if((-1!=o.search(h)||o.toString()==h.toString())&&(n=!0,"like"==e))break}}return"like"==e?n:!n}},c=function(t){a[t]||(a[t]=0),a[t]++};if("Genome"==this.graphType&&this.filterFeatureBy.comp.length>0){for(var d=0;d<this.filterFeatureBy.comp.length;d++)if(this.filterFeatureBy.comp[d])for(var p=0;p<this.data.tracks.length;p++)for(var g=this.data.tracks[p].data,u=0;u<g.length;u++){var m=g[u];if(!this.filterSkipNullKeys||m.hasOwnProperty(this.filterFeatureBy.comp[d])){var f=n(this.filterFeatureBy.comp[d],m,this.featuresProperties);l(f,this.filterFeatureBy.opp[d],this.filterFeatureBy.value[d],this.filterFeatureBy.cases[d])?(i[p+":"+u]=!0,"or"==this.filterType&&s[p+":"+u]&&(m.hide=!1)):(m.hide="and"==this.filterType||!i[p+":"+u],s[p+":"+u]=!0)}}}else if("Network"==this.graphType&&(this.filterNodeBy.comp.length>0||this.filterEdgeBy.comp.length)){for(d=0;d<this.filterNodeBy.comp.length;d++)if(this.filterNodeBy.comp[d])for(p=0;p<this.data.nodes.length;p++)if((!this.filterSkipNullKeys||this.data.nodes[p].hasOwnProperty(this.filterNodeBy.comp[d]))&&!this.data.nodes[p].hide){f=n(this.filterNodeBy.comp[d],this.data.nodes[p],this.nodesProperties);l(f,this.filterNodeBy.op[d],this.filterNodeBy.value[d],this.filterNodeBy.cases[d])?(i[this.data.nodes[p].id]=!0,"or"==this.filterType&&s[this.data.nodes[p].id]&&(this.data.nodes[p].hide=!1)):(this.data.nodes[p].hide="and"==this.filterType||!i[this.data.nodes[p].id],s[this.data.nodes[p].id]=!0)}for(d=0;d<this.filterEdgeBy.comp.length;d++)if(this.filterEdgeBy.comp[d])for(p=0;p<this.data.edges.length;p++){var y=this.data.nodes[this.data.nodeIndices[this.data.edges[p].id1]],x=this.data.nodes[this.data.nodeIndices[this.data.edges[p].id2]],v=y.id+":"+x.id;if(!this.filterSkipNullKeys||this.data.edges[p].hasOwnProperty(this.filterEdgeBy.comp[d])){f=n(this.filterEdgeBy.comp[d],this.data.edges[p],this.edgesProperties);l(f,this.filterEdgeBy.op[d],this.filterEdgeBy.value[d],this.filterEdgeBy.cases[d])?(i[v]=!0,"or"==this.filterType&&s[v]&&(this.data.edges[p].hide=!1)):(this.data.edges[p].hide="and"==this.filterType||!i[v],s[v]=!0),this.data.edges[p].hide||(c(y.id),c(x.id))}}if(this.filterEdgeBy.comp.length>0)for(d=0;d<this.data.nodes.length;d++){var b=this.data.nodes[d];a[b.id]||(b.hide=!0)}}else if(this.isCreateHistogram&&!e){if(this.filterVarBy.length>0){this.dataStndBy,this.data.y.histogram;console.log("Not implemented Yet")}}else if("Scatter2D"==this.graphType&&this.scatterPlotMatrix&&this.scatterPlotMatrixType.match(/correlation|all/)&&!e)this.filterVarBy.length>0&&console.log("Not implemented Yet");else if(this.filterDataBy.comp.length>0){var A=[],w=this.filterDataBy;for(d=0;d<this.varIndices.length;d++){f=this.varIndices[d];var C=!1;for(p=0;p<this.smpIndices.length;p++){var T=this.smpIndices[p];for(u=0;u<w.comp.length;u++){var S=this.data.y[w.comp[u]][f][T],M="No Alteration"==w.value[u]?[""]:w.value[u],D=l(S,w.op[u],M,w.cases[u]);if("and"!=this.filterType||e){if(D){C=!0;break}}else{if(!D){C=!1;break}C=!0}}if(C)break}C&&A.push(f)}if(e)for(d=0;d<A.length;d++)this.hiddenVars[A[d]]=!0}else if(this.filterVarBy.comp.length>0||this.filterSmpBy.comp.length>0){A=function(t){for(var e,i=r.motionBy?r.seq(0,r.data.y.vars.length-1,1):r.graphType.match(/line/i)&&r.graphType.match(/line/i)&&r.xAxis.length&&r.xAxis2.length?r.getVariableIndices(r.xAxis).concat(r.getVariableIndices(r.xAxis2)):r.varIndices,s=o(t),a=[],n=!1,h=0;h<i.length;h++){var c=i[h],d=!1;if((e=r.filterSmpBy).comp.length>0)for(var p=0;p<e.comp.length;p++)if(e.comp[p]){if(t&&"Legend"!=e.type[p])continue;if((u=s.s[p])>=0){n=!0;var g=l(r.data.y.data[c][u],e.op[p],e.value[p],e.cases[p]);if("and"!=r.filterType||t){if(g){d=!0;break}}else{if(!g){d=!1;break}d=!0}}}if((e=r.filterVarBy).comp.length>0)for(p=0;p<e.comp.length;p++)if(e.comp[p]){if(t&&"Legend"!=e.type[p])continue;var u;if(-1==(u=s.v[p])){n=!0;var m="vars"==e.comp[p]?r.data.y.vars[c]:r.getMetadataValue(c,"z",e.comp[p]);g=l(m,e.op[p],e.value[p],e.cases[p]);if("and"!=r.filterType||t){if(g||d){d=!0;break}}else{if(!g){d=!1;break}d=!0}}else{n=!0;m=r.data.y.data[c][u],g=l(m,e.op[p],e.value[p],e.cases[p]);if("and"!=r.filterType||t){if(g||d){d=!0;break}}else{if(!g){d=!1;break}d=!0}}}d&&a.push(c)}return!!n&&a}(e);var k=h(e),L=!(!this.isGroupedData||!this.layoutValid)&&h(e,!0);if(delete this.data.bubble,delete this.data.tree,e&&A)for(d=0;d<A.length;d++)this.hiddenVars[A[d]]=!0;else if("remove"!=this.filterMode&&A){for(d=0;d<this.hiddenVars.length;d++)this.hiddenVars[d]=!0;for(d=0;d<A.length;d++)this.hiddenVars[A[d]]=!1}else A&&(this.varIndices=A);if(this.isGroupedData&&!t)if(e&&k)for(d=0;d<k.length;d++)this.hiddenGrps[k[d]]=!0;else k&&(this.grpIndices=k);else if(e&&k){for(d=0;d<k.length;d++)this.hiddenSmps[k[d]]=!0;this.graphType.match(/Scatter/)&&("X"==this.axesType&&this.xAxisIndices.length>1?this.hiddenSmps[this.yAxisIndices[0]]&&(this.hiddenSmps[this.yAxisIndices[0]]=!1):"Y"==this.axesType&&this.yAxisIndices.length>1&&this.hiddenSmps[this.xAxisIndices[0]]&&(this.hiddenSmps[this.xAxisIndices[0]]=!1))}else if("remove"!=this.filterMode&&k){for(d=0;d<this.hiddenSmps.length;d++)this.hiddenSMps[d]=!0;for(d=0;d<k.length;d++)this.hiddenSmps[k[d]]=!1}else k&&(this.smpIndices=k);if(L&&e){this.hiddenGrpsLayout=[];for(d=0;d<L.length;d++)this.hiddenGrpsLayout[L[d]]=!0}else this.hiddenGrpsLayout=!1}else this.hiddenGrpsLayout=!1;if(this.layoutComb&&this.layoutParams&&!this.graphType.match(/Scatter/)){this.restoreEmptyCompartments();var I=this.getObjectArray(this.varIndices),z=this.getObjectArray(this.smpIndices);for(d=0;d<this.data.l.comp.length;d++){var N=this.layoutParams[d],B=(f=N.startingVarIndices,T=N.startingSmpIndices,N.startingGrpIndices),P=[];if(f){for(p=0;p<f.length;p++)I.hasOwnProperty(f[p])&&P.push(f[p]);N.varIndices=P}if(P=[],this.isGroupedData){if(B){for(p=0;p<B.length;p++)z.hasOwnProperty(B[p])&&P.push(B[p]);N.grpIndices=P}}else if(T){for(p=0;p<T.length;p++)z.hasOwnProperty(T[p])&&P.push(T[p]);N.smpIndices=P}}}}},this.resetFilters=function(t,e){var i=this,s=function(t){null!=e&&i[t].comp.length>0?(i[t].comp.splice(e,1),i[t].op.splice(e,1),i[t].value.splice(e,1),i[t].cases.splice(e,1),i[t].type.splice(e,1)):(i[t].comp=[],i[t].op=[],i[t].value=[],i[t].cases=[],i[t].type=[])},a=t?[t]:["filterSmpBy","filterVarBy","filterNodeBy","filterEdgeBy","filterFeatureBy"];this.hiddenLegends={};for(var r=0;r<a.length;r++)s(a[r]);delete this.data.bubble,delete this.data.tree},this.isHidden=function(t,e,i,s){return"Network"!=this.graphType&&("Boxplot"!=this.graphType||i?"Gantt"==this.graphType?i?this.hiddenLegends[i]:this.hiddenSmps[e]:"Dotplot"==this.graphType?i?this.hiddenLegends[i]:this.hiddenVars[t]||this.hiddenSmps[e]:"Bar"==this.graphType&&this.is3DPlot?i?this.hiddenLegends[i]:this.hiddenVars[t]:i?this.hiddenLegends[i]:this.isGroupedData&&this.hiddenGrps?this.hiddenVars[t]||this.hiddenGrps[e]:this.hiddenVars[t]||this.hiddenSmps[e]:this.showBoxplotOriginalData?null!=e?this.hiddenGrps?this.hiddenVars[t]||(s?this.hiddenGrps[e]:this.hiddenSmps[e]):this.hiddenVars[t]||this.hiddenSmps[e]:this.hiddenVars[t]:this.hiddenGrps?this.hiddenVars[t]||this.hiddenGrps[e]:this.hiddenVars[t]||this.hiddenSmps[e])}},CanvasXpress.prototype.initClusterUtils=function(){this.setDendrograms=function(){!this.smpDendrogramNewick||this.toDoFilter&&this.toDoFilter.hasOwnProperty("sample")||(this.smpDendrogram={},this.parseNewick(this.smpDendrogramNewick,"smpDendrogram")),!this.varDendrogramNewick||this.toDoFilter&&this.toDoFilter.hasOwnProperty("variable")||(this.varDendrogram={},this.parseNewick(this.varDendrogramNewick,"varDendrogram"))},this.parseNewick=function(t,e){var i=this,s=0,a=[],r={},n=0,o=0,h=0,l=0,c=[],d=0,p=0;this[e+"NodeId"]=0;for(var g=t.split(/\s*(;|\(|\)|,|:)\s*/),u=function(t){for(var e=[],s=0;s<t.length;s++)e.push(t[s].mid);return i.mean(e)},m=function(t){if(t.children){t.depth=o++,d=Math.max(d,t.depth);for(var e=0;e<t.children.length;e++)m(t.children[e]),t.children[e].children&&(t.children[e].mid=u(t.children[e].children));o--,l++}else t.depth=o,h++},f=function(t){if(t.children)for(var e=0;e<t.children.length;e++)f(t.children[e]),t.children[e].children&&(t.children[e].len=1+d-t.children[e].depth);else t.len=1+d-t.depth},y=0;y<g.length;y++){if(s)return s<3?void this.parseNewick("("+t+")",e):(alert(e+"is not in a valid Newick format"),this[e]=!1,void("varDendrogram"==e?this.varDendrogramNewick=!1:this.smpDendrogramNewick=!1));var x=g[y];switch(x){case"(":var v={};r.children=[v],a.push(r),r=v;break;case",":if(a.length>0){v={};a[a.length-1].children.push(v),r=v}else s++;break;case")":(r=a.pop()).nodeId=this[e+"NodeId"]++;break;case":":break;default:var b=g[y-1];if(")"==b||"("==b||","==b){if(r.name=x,x&&!r.children){var A="smpDendrogram"==e?this.getSampleIndices(x):this.getVariableIndices(x);-1==A?(A=parseInt(x),r.name="smpDendrogram"==e?this.data.y.smps[A]:this.data.y.vars[A],r.idx=A):r.idx=A,c.push(r.idx),r.ord=n++,r.mid=r.ord}}else":"==b&&(r.height=parseFloat(x),p++)}}m(r),f(r),r.max=d+1,r.leafs=h,r.useHeight=p==l,r.mid=u(r.children),r.axis=e,this[e]=r;var w,C="varDendrogram"==e?"variable":"sample",T="varDendrogram"==e?"showVarDendrogram":"showSmpDendrogram",S="varDendrogram"==e?"vars":"smps",M="varDendrogram"==e?"varIndices":"smpIndices",D="varDendrogram"==e?"varIndicesStart":this.isGroupedData?"grpIndicesStart":"smpIndicesStart";if(this[T])if(this[D]<0)h!=this.data.y[S].length?(w="Dude! The length of the "+C+" nodes in the dendrogram ("+h+") is different to that one in the data ("+this.data.y[S].length+"). This ain't gonna work!",this.logConsole(w),this.verbose&&this.flashInfoSpan(100,100,w,3e3),this[T]=!1):h!=this[M].length?(w="Ooops! Cannot show dendrogram with "+h+" nodes when only "+this[M].length+" "+C+" are visible.",this.logConsole(w),this.verbose&&this.flashInfoSpan(100,100,w,3e3),this[T]=!1):this[M]=c;else{var k=this[D]+this[M].length;this[M]=[];for(y=this[D];y<k;y++)this[M].push(c[y])}else if(this[D]<0)this[M]=c;else{k=this[D]+this[M].length;this[M]=[];for(y=this[D];y<k;y++)this[M].push(c[y])}},this.writeNewick=function(t){var e="";if(t.children){for(var i=[],s=0;s<t.children.length;s++)i.push(this.writeNewick(t.children[s]));i.length>0&&(e="("+i.join(",")+")")}else e=t.idx;return t.height&&(e+=":"+this.sprintf("%.1f",t.height)),e},this.euclidianDistance=function(t,e){t=this.filterNumbers(t,!0),e=this.filterNumbers(e,!0);var i=0;if(t.length==e.length){for(var s=0;s<t.length;s++)i+=Math.pow(t[s]-e[s],2);i=Math.sqrt(i)}return i},this.manhattanDistance=function(t,e){t=this.filterNumbers(t,!0),e=this.filterNumbers(e,!0);var i=0;if(t.length==e.length)for(var s=0;s<t.length;s++)i+=Math.abs(t[s]-e[s]);return i},this.maxDistance=function(t,e){t=this.filterNumbers(t,!0),e=this.filterNumbers(e,!0);var i=0;if(t.length==e.length)for(var s=0;s<t.length;s++)i=Math.max(i,Math.abs(t[s]-e[s]));return i},this.classifyKmeansVector=function(t,e){for(var i=Number.POSITIVE_INFINITY,s=0,a=0;a<e.length;a++){var r=this[this.distance+"Distance"](t,e[a]);r<i&&(i=r,s=a)}return s},this.addVectors=function(t,e){t=this.filterNumbers(t,!0),e=this.filterNumbers(e,!0);var i=[];if(t.length==e.length)for(var s=0;s<t.length;s++)i.push(t[s]+e[s]);return i},this.compareVectors=function(t,e){if(this.isArray(t)&&this.isArray(e)){if(t.length!=e.length)return!1;for(var i=0;i<t.length;i++){if(this.isArray(t[i])&&this.isArray(e[i])&&!this.compareArrays(t[i],e[i]))return!1;if(t[i]!==e[i])return!1}return!0}},this.vectorDotProduct=function(t,e){t=this.filterNumbers(t,!0),e=this.filterNumbers(e,!0);var i=0;if(t.length==e.length)for(var s=0;s<t.length;s++)i+=t[s]*e[s];return i},this.multiplyVectorByValue=function(t,e){t=this.filterNumbers(t,!0);for(var i=0;i<t.length;i++)t[i]*=e;return t},this.getCentroid=function(t,e,i,s){var a=[];if(e.length==s.length)for(var r=t+i,n=0;n<e.length;n++)a.push((t*e[n]+i*s[n])/r);return a},this.createClusterNode=function(t,e,i,s,a,r){var n={id:t,left:e,right:i,dist:s,centroid:a};return null!=r&&(n.mid=r),null==e&&null==i?(n.size=1,n.depth=0):(n.size=e.size+i.size,n.depth=1+Math.max(e.depth,i.depth)),n},this.createRandomCentroids=function(t){var e=this,i=t.slice(0);return i.sort((function(){return Math.round(e.random())-.5})),i.slice(0,"samples"==this.clusterAxis?this.kmeansSmpClusters:this.kmeansVarClusters)},this.createRandomVectors=function(t,e){var i=e.length;if(t>i)return null;for(var s,a,r=[],n=[],o={},h=0,l=0;l<t;){if(h==i)return null;var c=Math.floor(this.random()*i);if(!(c in o)){o[c]=1,h++,s=e[c],a=!0;for(var d=0;d<l;d++)if(this.compareVectors(s,r[d])){a=!1;break}a&&(r[l]=s,n[l]=c,l++)}}return{vectors:r,indices:n}},this.imputeDatum=function(t){var e=[];if("samples"==this.clusterAxis)for(var i=0;i<this.varIndices.length;i++){var s=this.varIndices[i];e.push(this.data.y.data[s][t])}else for(i=0;i<this.smpIndices.length;i++){s=this.smpIndices[i];e.push(this.data.y.data[t][s])}return this[this.imputeMethod](e)},this.getIdsForClustering=function(){var t=[];if("samples"==this.clusterAxis)for(var e=0;e<this.smpIndices.length;e++){var i=this.smpIndices[e],s=this.getSampleIndices(i);t[e]=-1==s?i:this.data.y.smps[i]}else for(e=0;e<this.varIndices.length;e++){i=this.varIndices[e],s=this.getVariableIndices(i);t[e]=-1==s?i:this.data.y.smps[i]}return t},this.getDataForClustering=function(){var t=[],e=[];if("samples"==this.clusterAxis){for(var i=0;i<this.smpIndices.length;i++)t[i]=[];for(i=0;i<this.varIndices.length;i++)for(var s=this.varIndices[i],a=0;a<this.smpIndices.length;a++){var r=this.smpIndices[a],n=this.data.y.data[s][r];isNaN(n)&&(e[a]||(e[a]=this.imputeDatum(r)),n=e[a]),t[a][i]=n}}else{for(i=0;i<this.varIndices.length;i++)t[i]=[];for(i=0;i<this.varIndices.length;i++)for(s=this.varIndices[i],a=0;a<this.smpIndices.length;a++){r=this.smpIndices[a],n=this.data.y.data[s][r];isNaN(n)&&(e[i]||(e[i]=this.imputeDatum(s)),n=e[i]),t[i][a]=n}}return t},this.cluster=function(){var t,e=function(){var t=o[g][0].id,e=o[u][0].id;return t<0&&e>=0||(t<0&&e<0?e>t:t>=0&&e>=0&&t>e)},i=this.getDataForClustering(),s=this.getIdsForClustering(),a=[],r=[],n=[],o=[];this.meta.tree||(this.meta.tree={});var h=this.meta.tree;h[this.clusterAxis]=[];for(var l=0;l<i.length;l++)a[l]=[];a[0][0]=Number.POSITIVE_INFINITY;for(l=0;l<i.length-1;l++)for(var c=l+1;c<i.length;c++)a[c][c]=Number.POSITIVE_INFINITY,a[l][c]=this[this.distance+"Distance"](i[l],i[c]),a[c][l]=a[l][c];for(l=0;l<i.length;l++){r[l]=0;for(c=0;c<i.length;c++)a[l][r[l]]>a[l][c]&&(r[l]=c)}for(l=0;l<i.length;l++)o[l]=[],o[l][0]=this.createClusterNode(s[l],null,null,0,i[l]),n[l]=1;for(var d=-1,p=0;p<i.length-1;p++){var g=0;for(l=0;l<i.length;l++)a[l][r[l]]<a[g][r[g]]&&(g=l);var u=r[g];if(e()){var m=u;u=g,g=m}var f=o[g][0],y=o[u][0],x=this.getCentroid(f.size,f.centroid,y.size,y.centroid),v=this.createClusterNode(d,f,y,a[g][u],x);o[g].splice(0,0,v);for(c=0;c<i.length;c++)"single"==this.linkage?a[g][c]>a[u][c]&&(a[c][g]=a[g][c]=a[u][c]):"complete"==this.linkage?a[g][c]<a[u][c]&&(a[c][g]=a[g][c]=a[u][c]):"average"==this.linkage&&(a[c][g]=a[g][c]=(n[g]*a[g][c]+n[u]*a[u][c])/(n[g]+n[u]));n[g]+=n[u],a[g][g]=Number.POSITIVE_INFINITY;for(l=0;l<i.length;l++)a[l][u]=a[u][l]=Number.POSITIVE_INFINITY;for(c=0;c<i.length;c++)r[c]==u&&(r[c]=g);for(c=0;c<i.length;c++)for(var b=0;b<i.length;b++)a[b][c]<a[b][r[b]]&&(r[b]=c);t=v,h[this.clusterAxis].push([f.id,y.id,t.dist]),d--}return this.writeNewickCluster(t,!0)},this.isLeafNode=function(t){return null==t.left&&null==t.right},this.writeNewickCluster=function(t,e,i){var s="",a="",r=!1;if(this.isLeafNode(t))r=!0,s=isNaN(t.id)?"variables"==this.clusterAxis?this.getVariableIndices(t.id):this.getSampleIndices(t.id):t.id;else{var n=this.writeNewickCluster(t.left,e,!0),o=this.writeNewickCluster(t.right,e,!1);if(t.mid)for(var h=0;h<t.mid.length;h++)e&&t.mid[h].dist?a+=","+t.mid[h].id+":"+t.mid[h].dist:a+=","+t.mid[h].id,a+=t.mid[h].id;s="("+n+a+","+o+")"}return e&&!r&&(s+=":"+this.sprintf("%.1f",t.dist)),s},this.kmeans=function(){for(var t=this.getDataForClustering(),e=this.createRandomCentroids(t),i=new Array(t.length),s="samples"==this.clusterAxis?this.kmeansSmpClusters:this.kmeansVarClusters,a=new Array(s),r=0,n=!0;n;){for(var o=0;o<t.length;o++)i[o]=this.classifyKmeansVector(t[o],e);n=!1;for(var h=0;h<s;h++){var l=[];for(o=0;o<i.length;o++)i[o]==h&&l.push(t[o]);if(l.length){for(var c=e[h],d=new Array(c.length),p=0;p<c.length;p++){var g=0;for(o=0;o<l.length;o++)isNaN(l[o][p])||(g+=l[o][p]);d[p]=g/l.length,d[p]!=c[p]&&(n=!0)}e[h]=d,a[h]=l}}++r>this.maxIterations&&(n=!1)}var u=[];for(o=0;o<s;o++)u[o]={distance:this[this.distance+"Distance"](e[0],e[o]),assign:o};u=u.sort((function(t,e){return t.distance-e.distance}));var m={};for(o=0;o<u.length;o++)m[u[o].assign]=o;for(o=0;o<i.length;o++){var f=m[i[o]]+1;i[o]=f>9?"K"+f:"K-0"+f}return i}},CanvasXpress.prototype.initSortUtils=function(){this.sortNetworkIndices=function(t){if(!this.isTransition()){for(var e=this.data[this.networkShowDataTable],i=t,s=[],a=[],r=0;r<e.length;r++)s.push(r),a.push(e[r][i]?e[r][i]:null);if(this.isNumeric(a)){var n=-1*Number.MAX_VALUE;s.sort((function(t,e){return(a[t]||n)-(a[e]||n)}))}else s.sort((function(t,e){return a[t]>a[e]?1:a[t]<a[e]?-1:0}));var o=[];for(r=0;r<e.length;r++)o.push(e[s[r]]);"ascending"==this.sortDir&&o.reverse(),this.data[this.networkShowDataTable]=o,"nodes"==this.networkShowDataTable&&this.setNodeIndices(),this.draw({func:"sortNetworkIndices",par:[t]})}},this.sortOncoprint=function(){if(this.isOncoprint){if(this.meta.data.z){var t=["Altered-Vars"];for(var e in this.meta.data.z)if(e.match(/delet/i)){t.unshift(e);break}for(var e in this.meta.data.z)if(e.match(/ampli/i)){t.unshift(e);break}this.sortIndices("vars","desc",t)}if(this.meta.data.x){t=["Altered-Smps"];for(var e in this.meta.data.x)if(e.match(/delet/i)){t.unshift(e);break}for(var e in this.meta.data.x)if(e.match(/ampli/i)){t.unshift(e);break}this.sortIndices("smps","desc",t)}}},this.sortIndices=function(t,e,i,s,a,r){for(var n,o=this.sortCaseSensitive,h=function(t,e){return null==t&&(t=""),null==e&&(e=""),o?t.toString().localeCompare(e.toString()):t.toString().toLowerCase().localeCompare(e.toString().toLowerCase())},l="",c=[],d=this.meta.data,p=[],g=0;g<this.varIndices.length;g++)p.push(this.varIndices[g]);p.sort((function(t,e){return t-e}));var u=[];for(g=0;g<this.smpIndices.length;g++)u.push(this.smpIndices[g]);u.sort((function(t,e){return t-e}));var m=[];if(this.grpIndices&&this.grpIndices.length)for(g=0;g<this.grpIndices.length;g++)m.push(this.grpIndices[g]);else this.isGroupedData&&this.data.w&&(m=this.data.w.grpIdxs);if(i&&(i=this.toArray(i)),s&&(s=this.toArray(s)),a&&(a=this.toArray(a)),e||(e=this.sortDir),i&&"vars"==t){for(g=0;g<i.length;g++){var f=i[g];c.push(this.data.z[f]),l+="Numeric"==d.z[f].type?"N":"S"}n="varIndices"}else if(i&&"smps"==t){this.isGroupedData&&(this.isGroupedData=!1,this.sortIndices(t,e,i,s,a,r),this.isGroupedData=!0);for(g=0;g<i.length;g++){f=i[g];c.push(this.isGroupedData?this.data.w.factors[f]:this.data.x[f]),l+="Numeric"==d.x[f].type?"N":"S"}n=this.isGroupedData?"grpIndices":"smpIndices"}else if(r)if("varIndex"==r||"smpIndex"==r||"grpIndex"==r){if(v="grpIndex"==r?m:"smpIndex"==r?u:p,n="grpIndex"==r?"grpIndices":"smpIndex"==r?"smpIndices":"varIndices",v="ascending"==this.sortDir?v.sort((function(t,e){return t-e})):v.sort((function(t,e){return e-t})),this[n]=v,this.layoutValid&&this.layoutParams)for(g=0;g<this.layoutParams.length;g++)this.layoutParams[g][n]="ascending"==this.sortDir?this.layoutParams[g][n].sort((function(t,e){return t-e})):this.layoutParams[g][n].sort((function(t,e){return e-t})),this.layoutParams[g].dragged=!0;l="I"}else{g=s?parseInt(this.getVariableIndices(s[0])):parseInt(this.getSampleIndices(a[0]));c.push(this.data.y[r][g]),l="N"}else if(s){for(g=0;g<s.length;g++)c.push(this.getDataForSmpGrpAtIndex(s[g]-1,p,r)),l+="N";n="varIndices"}else if(a){this.isGroupedData&&(this.isGroupedData=!1,this.sortIndices(t,e,i,s,a,r),this.isGroupedData=!0);var y=this.isGroupedData&&"iqr"==this.summaryType?this.data.w.median:this.isGroupedData?this.data.w[this.summaryType]:r?this.data.y[r]:this.data.y.data;for(g=0;g<a.length;g++){var x=a[g]-1;y[x]||(x=0),c.push(y[x]),l+="N"}n=this.isGroupedData?"grpIndices":"smpIndices"}else this.isGroupedData&&(this.isGroupedData=!1,this.sortIndices(t,e,i,s,a,r),this.isGroupedData=!0),c.push(this.isGroupedData?this.data.w.smps:"vars"==t?this.data.y.vars:this.data.y.smps),n=this.isGroupedData?"grpIndices":"vars"==t?"varIndices":"smpIndices",l="S";var v="grpIndices"==n?m:"smpIndices"==n?u:p,b=-1*Number.MAX_VALUE;switch(l){case"I":break;case"S":if(v.sort((function(t,e){return h(c[0][t],c[0][e])||t-e})),this.layoutValid&&this.layoutParams)for(g=0;g<this.layoutParams.length;g++)this.layoutParams[g][n].sort((function(t,e){return h(c[0][t],c[0][e])||t-e})),this.layoutParams[g].dragged=!0;break;case"N":if(v.sort((function(t,e){return(c[0][t]||b)-(c[0][e]||b)||t-e})),this.layoutValid&&this.layoutParams)for(g=0;g<this.layoutParams.length;g++)this.layoutParams[g][n].sort((function(t,e){return(c[0][t]||b)-(c[0][e]||b)||t-e})),this.layoutParams[g].dragged=!0;break;case"SS":if(v.sort((function(t,e){return h(c[0][t],c[0][e])||h(c[1][t],c[1][e])||t-e})),this.layoutValid&&this.layoutParams)for(g=0;g<this.layoutParams.length;g++)this.layoutParams[g][n].sort((function(t,e){return h(c[0][t],c[0][e])||h(c[1][t],c[1][e])||t-e})),this.layoutParams[g].dragged=!0;break;case"SN":if(v.sort((function(t,e){return h(c[0][t],c[0][e])||(c[1][t]||b)-(c[1][e]||b)||t-e})),this.layoutValid&&this.layoutParams)for(g=0;g<this.layoutParams.length;g++)this.layoutParams[g][n].sort((function(t,e){return h(c[0][t],c[0][e])||(c[1][t]||b)-(c[1][e]||b)||t-e})),this.layoutParams[g].dragged=!0;break;case"NN":if(v.sort((function(t,e){return(c[0][t]||b)-(c[0][e]||b)||(c[1][t]||b)-(c[1][e]||b)||t-e})),this.layoutValid&&this.layoutParams)for(g=0;g<this.layoutParams.length;g++)this.layoutParams[g][n].sort((function(t,e){return(c[0][t]||b)-(c[0][e]||b)||(c[1][t]||b)-(c[1][e]||b)||t-e})),this.layoutParams[g].dragged=!0;break;case"NS":if(v.sort((function(t,e){return(c[0][t]||b)-(c[0][e]||b)||h(c[1][t],c[1][e])||t-e})),this.layoutValid&&this.layoutParams)for(g=0;g<this.layoutParams.length;g++)this.layoutParams[g][n].sort((function(t,e){return(c[0][t]||b)-(c[0][e]||b)||h(c[1][t],c[1][e])||t-e})),this.layoutParams[g].dragged=!0;break;case"SSS":if(v.sort((function(t,e){return h(c[0][t],c[0][e])||h(c[1][t],c[1][e])||h(c[2][t],c[2][e])||t-e})),this.layoutValid&&this.layoutParams)for(g=0;g<this.layoutParams.length;g++)this.layoutParams[g][n].sort((function(t,e){return h(c[0][t],c[0][e])||h(c[1][t],c[1][e])||h(c[2][t],c[2][e])||t-e})),this.layoutParams[g].dragged=!0;break;case"SSN":if(v.sort((function(t,e){return h(c[0][t],c[0][e])||h(c[1][t],c[1][e])||(c[2][t]||b)-(c[2][e]||b)||t-e})),this.layoutValid&&this.layoutParams)for(g=0;g<this.layoutParams.length;g++)this.layoutParams[g][n].sort((function(t,e){h(c[0][t],c[0][e])||h(c[1][t],c[1][e])||(c[2][t],c[2][e])})),this.layoutParams[g].dragged=!0;break;case"SNS":if(v.sort((function(t,e){return h(c[0][t],c[0][e])||(c[1][t]||b)-(c[1][e]||b)||h(c[2][t],c[2][e])||t-e})),this.layoutValid&&this.layoutParams)for(g=0;g<this.layoutParams.length;g++)this.layoutParams[g][n].sort((function(t,e){return h(c[0][t],c[0][e])||(c[1][t]||b)-(c[1][e]||b)||h(c[2][t],c[2][e])||t-e})),this.layoutParams[g].dragged=!0;break;case"NSS":if(v.sort((function(t,e){return(c[0][t]||b)-(c[0][e]||b)||h(c[1][t],c[1][e])||h(c[2][t],c[2][e])||t-e})),this.layoutValid&&this.layoutParams)for(g=0;g<this.layoutParams.length;g++)this.layoutParams[g][n].sort((function(t,e){return(c[0][t]||b)-(c[0][e]||b)||h(c[1][t],c[1][e])||h(c[2][t],c[2][e])||t-e})),this.layoutParams[g].dragged=!0;break;case"NNN":if(v.sort((function(t,e){return(c[0][t]||b)-(c[0][e]||b)||(c[1][t]||b)-(c[1][e]||b)||(c[2][t]||b)-(c[2][e]||b)||t-e})),this.layoutValid&&this.layoutParams)for(g=0;g<this.layoutParams.length;g++)this.layoutParams[g][n].sort((function(t,e){return(c[0][t]||b)-(c[0][e]||b)||(c[1][t]||b)-(c[1][e]||b)||(c[2][t]||b)-(c[2][e]||b)||t-e})),this.layoutParams[g].dragged=!0;break;case"NNS":if(v.sort((function(t,e){return(c[0][t]||b)-(c[0][e]||b)||(c[1][t]||b)-(c[1][e]||b)||h(c[2][t],c[2][e])||t-e})),this.layoutValid&&this.layoutParams)for(g=0;g<this.layoutParams.length;g++)this.layoutParams[g][n].sort((function(t,e){return(c[0][t]||b)-(c[0][e]||b)||(c[1][t]||b)-(c[1][e]||b)||h(c[2][t],c[2][e])||t-e})),this.layoutParams[g].dragged=!0;break;case"NSN":if(v.sort((function(t,e){return(c[0][t]||b)-(c[0][e]||b)||h(c[1][t],c[1][e])||(c[2][t]||b)-(c[2][e]||b)||t-e})),this.layoutValid&&this.layoutParams)for(g=0;g<this.layoutParams.length;g++)this.layoutParams[g][n].sort((function(t,e){return(c[0][t]||b)-(c[0][e]||b)||h(c[1][t],c[1][e])||(c[2][t]||b)-(c[2][e]||b)||t-e})),this.layoutParams[g].dragged=!0;break;case"SNN":if(v.sort((function(t,e){return h(c[0][t],c[0][e])||(c[1][t]||b)-(c[1][e]||b)||(c[2][t]||b)-(c[2][e]||b)||t-e})),this.layoutValid&&this.layoutParams)for(g=0;g<this.layoutParams.length;g++)this.layoutParams[g][n].sort((function(t,e){return h(c[0][t],c[0][e])||(c[1][t]||b)-(c[1][e]||b)||(c[2][t]||b)-(c[2][e]||b)||t-e})),this.layoutParams[g].dragged=!0}if("ascending"!=e&&"asc"!=e&&"I"!=l&&(v.reverse(),this.layoutValid&&this.layoutParams))for(g=0;g<this.layoutParams.length;g++)this.layoutParams[g][n].reverse(),this.layoutParams[g].dragged=!0;this.sorting=[t,e,i,s,a,r],this[n]=v,this.isGroupedData&&"grpIndices"==n&&this.data.w&&this[n].length==this.data.w.grpIdxs.length&&(this.data.w.grpIdxs=this.cloneObject(v))},this.sortArray=function(t,e){var i=[];if(t.length!=e.length)return t;for(var s=0;s<t.length;s++){if(!t[e[s]])return t;i[s]=t[e[s]]}return i},this.isAsciiArray=function(t){return!this.isNumeric(t)},this.sortObject=function(t){var e=Object.keys(t);return this.isAsciiArray(e)?this.sortCaseSensitive?e.sort():e.sort((function(t,e){return t.toLowerCase().localeCompare(e.toLowerCase())})):e.sort((function(t,e){return t-e}))},this.stringRangeSort=function(t){for(var e,i={},s=0;s<t.length;s++)if(t[s].match(/^\d+\-\d+/))e=t[s].split(/\-/),i[s]=Number(e[0]);else if(t[s].match(/^\>\d+/))e=t[s].split(/\>/),i[s]=Number(e[1])+1e-8;else if(t[s].match(/^\<\d+/))e=t[s].split(/\</),i[s]=Number(e[1])-1e-8;else{if(!t[s].match(/^\d+/))return t.sort((function(t,e){return t.toLowerCase().localeCompare(e.toLowerCase())}));e=t[s],i[s]=e}return t.sort((function(t,e){i[t],i[e]})),t},this.resetSorting=function(){delete this.sorting},this.radixSort=function(t){var e,i,s,a,r,n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],o=new Int32Array(t.length),h=[].concat(n),l=[].concat(n),c=[].concat(n),d=[].concat(n),p=0,g=0,u=0,m=0;for(r=0;r<t.length;r++)e=255&t[r],i=t[r]>>8&255,s=t[r]>>16&255,a=t[r]>>24&255^128,h[e]++,l[i]++,c[s]++,d[a]++;for(r=0;r<256;r++)e=p+h[r],i=g+l[r],s=u+c[r],a=m+d[r],h[r]=p,l[r]=g,c[r]=u,d[r]=m,p=e,g=i,u=s,m=a;for(r=0;r<t.length;r++)o[h[e=255&t[r]]]=t[r],h[e]++;for(r=0;r<t.length;r++)t[l[i=o[r]>>8&255]]=o[r],l[i]++;for(r=0;r<t.length;r++)o[c[s=t[r]>>16&255]]=t[r],c[s]++;for(r=0;r<t.length;r++)t[d[a=o[r]>>24&255^128]]=o[r],d[a]++;return t},this.resortData=function(){for(var t={y:{vars:[],smps:[],data:[]}},e=[],i=[],s=(this.data.l,0);s<this.varIndices.length;s++){var a=this.varIndices[s];t.y.vars[s]=this.data.y.vars[a],e.push(s)}for(var r=0;r<this.smpIndices.length;r++){var n=this.smpIndices[r];t.y.smps[r]=this.data.y.smps[n],i.push(r)}for(s=0;s<this.varIndices.length;s++){a=this.varIndices[s];t.y.data[s]=[];for(r=0;r<this.smpIndices.length;r++){n=this.smpIndices[r];t.y.data[s][r]=this.data.y.data[a][n]}}if(this.data.x)for(var s in t.x={},this.data.x){t.x[s]=[];for(r=0;r<this.smpIndices.length;r++){n=this.smpIndices[r];t.x[s][r]=this.data.x[s][n]}}if(this.data.z)for(var s in t.z={},this.data.z){t.z[s]=[];for(r=0;r<this.varIndices.length;r++){n=this.varIndices[r];t.z[s][r]=this.data.z[s][n]}}this.data=t,this.varIndices=e,this.smpIndices=i,this.startingVarIndices=e,this.startingSmpIndices=i,this.isGroupedData&&(this.isGroupedData=!1,this.groupSamples(this.groupingFactors,!1,!1,!1,!0)),this.segregateVariablesBy.length+this.segregateSamplesBy.length>0&&this.segregateVariablesAndOrSamples(this.segregateVariablesBy,this.segregateSamplesBy)}},CanvasXpress.prototype.initNumeric=function(){this.numeric=function(t,e){Array.prototype.indexOf&&Array.prototype.indexOf;var i=function(t){var e;return"object"==typeof t?"object"==typeof(e=t[0])?"object"==typeof e[0]?function(t){for(var e=[];"object"==typeof t;)e.push(t.length),t=t[0];return e}(t):[t.length,e.length]:[t.length]:[]},s=function(t,e,i){void 0===i&&(i=0);var a,r=t[i],n=Array(r);if(i===t.length-1){for(a=r-2;a>=0;a-=2)n[a+1]=e,n[a]=e;return-1===a&&(n[0]=e),n}for(a=r-1;a>=0;a--)n[a]=s(t,e,i+1);return n},a=function(t,e){var s=function(t,e,i){var s;for(s=t.length-1;s>0;--s)i[s]=t[s][e],i[--s]=t[s][e];0===s&&(i[0]=t[0][e])},a=function(t,e){var i,s,a=t.length,r=t[a-1]*e[a-1];for(i=a-2;i>=1;i-=2)s=i-1,r+=t[i]*e[i]+t[s]*e[s];return 0===i&&(r+=t[0]*e[0]),r},r=i;switch(1e3*r(t).length+r(e).length){case 2002:return e.length<10?function(t,e){var i,s,a,r,n,o,h,l,c,d,p;for(r=t.length,n=e.length,o=e[0].length,h=Array(r),i=r-1;i>=0;i--){for(l=Array(o),c=t[i],a=o-1;a>=0;a--){for(d=c[n-1]*e[n-1][a],s=n-2;s>=1;s-=2)p=s-1,d+=c[s]*e[s][a]+c[p]*e[p][a];0===s&&(d+=c[0]*e[0][a]),l[a]=d}h[i]=l}return h}(t,e):function(t,e){var i,r,n,o=s,h=e.length,l=Array(h),c=t.length,d=e[0].length,p=new Array(c),g=a;for(--h,r=--c;-1!==r;--r)p[r]=Array(d);for(r=--d;-1!==r;--r)for(o(e,r,l),n=c;-1!==n;--n)0,i=t[n],p[n][r]=g(i,l);return p}(t,e);case 2001:return function(t,e){var i,s=t.length,r=(e.length,Array(s));for(i=s-1;i>=0;i--)r[i]=a(t[i],e);return r}(t,e);case 1002:return function(t,e){var i,s,a,r,n,o,h;for(a=t.length,r=e[0].length,n=Array(r),s=r-1;s>=0;s--){for(o=t[a-1]*e[a-1][s],i=a-2;i>=1;i-=2)h=i-1,o+=t[i]*e[i][s]+t[h]*e[h][s];0===i&&(o+=t[0]*e[0][s]),n[s]=o}return n}(t,e);case 1001:return a(t,e);case 1e3:return mulVS(t,e);case 1:return mulSV(t,e);case 0:return t*e;default:throw new Error("dot only works on vectors and matrices")}},r=function(t){var e,i,s,a,r=t.length,n=Array(r);for(e=r-1;e>=0;e--){for(a=Array(r),i=e+2,s=r-1;s>=i;s-=2)a[s]=0,a[s-1]=0;for(s>e&&(a[s]=0),a[e]=t[e],s=e-1;s>=1;s-=2)a[s]=0,a[s-1]=0;0===s&&(a[0]=0),n[e]=a}return n},n=function(t){var e,i=Math.min(t.length,t[0].length),s=Array(i);for(e=i-1;e>=1;--e)s[e]=t[e][e],s[--e]=t[e][e];return 0===e&&(s[0]=t[0][0]),s},o=function(t){return r(s([t],1))},h=function(t,e,i,s,a){if(s===i.length-1)return a(t,e);var r,n=i[s],o=Array(n);for(r=n-1;r>=0;--r)o[r]=h("object"==typeof t?t[r]:t,"object"==typeof e?e[r]:e,i,s+1,a);return o},l=function(t,e,i,s){if(i===e.length-1)return s(t);var a,r=e[i],n=Array(r);for(a=r-1;a>=0;a--)n[a]=l(t[a],e,i+1,s);return n},c=function(){var t,e,s=function(t,e){var i,s=e.length,a=Array(s);for(i=s-1;-1!==i;--i)a[i]=t[i]+e[i];return a},a=function(t,e){var i,s=e.length,a=Array(s);for(i=s-1;-1!==i;--i)a[i]=t+e[i];return a},r=function(t,e){var i,s=t.length,a=Array(s);for(i=s-1;-1!==i;--i)a[i]=t[i]+e;return a},n=arguments.length,o=arguments[0],l=s,c=r,d=a;for(t=1;t!==n;++t)e=arguments[t],"object"==typeof o?o=h(o,e,i(o),0,"object"==typeof e?l:c):"object"==typeof e?o=h(o,e,i(e),0,d):o+=e;return o},d=function(){var t,e,s=function(t,e){var i,s=e.length,a=Array(s);for(i=s-1;-1!==i;--i)a[i]=t[i]-e[i];return a},a=function(t,e){var i,s=e.length,a=Array(s);for(i=s-1;-1!==i;--i)a[i]=t-e[i];return a},r=function(t,e){var i,s=t.length,a=Array(s);for(i=s-1;-1!==i;--i)a[i]=t[i]-e;return a},n=arguments.length,o=arguments[0],l=s,c=r,d=a;for(t=1;t!==n;++t)e=arguments[t],"object"==typeof o?o=h(o,e,i(o),0,"object"==typeof e?l:c):"object"==typeof e?o=h(o,e,i(e),0,d):o-=e;return o},p=function(){var t,e,s=function(t,e){var i,s=e.length,a=Array(s);for(i=s-1;-1!==i;--i)a[i]=t[i]*e[i];return a},a=function(t,e){var i,s=e.length,a=Array(s);for(i=s-1;-1!==i;--i)a[i]=t*e[i];return a},r=function(t,e){var i,s=t.length,a=Array(s);for(i=s-1;-1!==i;--i)a[i]=t[i]*e;return a},n=arguments.length,o=arguments[0],l=s,c=r,d=a;for(t=1;t!==n;++t)e=arguments[t],"object"==typeof o?o=h(o,e,i(o),0,"object"==typeof e?l:c):"object"==typeof e?o=h(o,e,i(e),0,d):o*=e;return o},g=function(){var t,e,s=function(t,e){var i,s=e.length,a=Array(s);for(i=s-1;-1!==i;--i)a[i]=t[i]/e[i];return a},a=function(t,e){var i,s=e.length,a=Array(s);for(i=s-1;-1!==i;--i)a[i]=t/e[i];return a},r=function(t,e){var i,s=t.length,a=Array(s);for(i=s-1;-1!==i;--i)a[i]=t[i]/e;return a},n=arguments.length,o=arguments[0],l=s,c=r,d=a;for(t=1;t!==n;++t)e=arguments[t],"object"==typeof o?o=h(o,e,i(o),0,"object"==typeof e?l:c):"object"==typeof e?o=h(o,e,i(e),0,d):o/=e;return o},u=function(){var t,e,s=function(t,e){var i,s=e.length,a=Array(s);for(i=s-1;-1!==i;--i)a[i]=t[i]!==e[i];return a},a=function(t,e){var i,s=e.length,a=Array(s);for(i=s-1;-1!==i;--i)a[i]=t!==e[i];return a},r=function(t,e){var i,s=t.length,a=Array(s);for(i=s-1;-1!==i;--i)a[i]=t[i]!==e;return a},n=arguments.length,o=arguments[0],l=s,c=r,d=a;for(t=1;t!==n;++t)e=arguments[t],o="object"==typeof o?h(o,e,i(o),0,"object"==typeof e?l:c):"object"==typeof e?h(o,e,i(e),0,d):o!==e;return o},m=function(){var t,e,s=function(t,e){var i,s=e.length,a=Array(s),r=Math.atan2;for(i=s-1;-1!==i;--i)a[i]=r(t[i],e[i]);return a},a=function(t,e){var i,s=e.length,a=Array(s),r=Math.atan2;for(i=s-1;-1!==i;--i)a[i]=r(t,e[i]);return a},r=function(t,e){var i,s=t.length,a=Array(s),r=Math.atan2;for(i=s-1;-1!==i;--i)a[i]=r(t[i],e);return a},n=arguments.length,o=arguments[0],l=s,c=r,d=a;for(t=1;t!==n;++t)e=arguments[t],o="object"==typeof o?h(o,e,i(o),0,"object"==typeof e?l:c):"object"==typeof e?h(o,e,i(e),0,d):m(o,e);return o},f=function(t){if("object"!=typeof t)return-t;var e=function(t){var e,i=t.length,s=Array(i);for(e=i-1;-1!==e;--e)s[e]=-t[e];return s},s=i(t);return l(t,s,0,e)},y=function(t){if("object"!=typeof t)return t;var e=function(t){var e,i=t.length,s=Array(i);for(e=i-1;-1!==e;--e)s[e]=t[e];return s},s=i(t);return l(t,s,0,e)},x=function(t){if("object"!=typeof t)return x(t);var e=function(t){var e,i=t.length,s=Array(i),a=Math.abs;for(e=i-1;-1!==e;--e)s[e]=a(t[e]);return s},s=i(t);return l(t,s,0,e)},v=function(t){if("object"!=typeof t)return v(t);var e=function(t){var e,i=t.length,s=Array(i),a=Math.cos;for(e=i-1;-1!==e;--e)s[e]=a(t[e]);return s},s=i(t);return l(t,s,0,e)},b=function(t){if("object"!=typeof t)return b(t);var e=function(t){var e,i=t.length,s=Array(i),a=Math.exp;for(e=i-1;-1!==e;--e)s[e]=a(t[e]);return s},s=i(t);return l(t,s,0,e)},A=function(t){if("object"!=typeof t)return A(t);var e=function(t){var e,i=t.length,s=Array(i),a=Math.log;for(e=i-1;-1!==e;--e)s[e]=a(t[e]);return s},s=i(t);return l(t,s,0,e)},w=function(t){if("object"!=typeof t)return w(t);var e=function(t){var e,i=t.length,s=Array(i),a=Math.sin;for(e=i-1;-1!==e;--e)s[e]=a(t[e]);return s},s=i(t);return l(t,s,0,e)},C=function(t){if("object"!=typeof t)return C(t);var e=function(t){var e,i=t.length,s=Array(i),a=Math.sqrt;for(e=i-1;-1!==e;--e)s[e]=a(t[e]);return s},s=i(t);return l(t,s,0,e)},T=function(t,e,s){var a,r=function(t){var e,i,s=0;for(e=t.length-1;-1!==e;--e)s+=(i=t[e])*i;return s},n=0;if("object"!=typeof t)return n+=(a=t)*a;if(void 0===e&&(e=i(t)),void 0===s&&(s=0),s===e.length-1)return r(t);var o,h=t.length;for(o=h-1;-1!==o;--o)n+=(a=arguments.callee(t[o]))*a;return n},S=function(t){var e,i,s,a,r,n=t.length,o=t[0].length,h=Array(o);for(i=0;i<o;i++)h[i]=Array(n);for(e=n-1;e>=1;e-=2){for(a=t[e],s=t[e-1],i=o-1;i>=1;--i)(r=h[i])[e]=a[i],r[e-1]=s[i],(r=h[--i])[e]=a[i],r[e-1]=s[i];0===i&&((r=h[0])[e]=a[0],r[e-1]=s[0])}if(0===e){for(s=t[0],i=o-1;i>=1;--i)h[i][0]=s[i],h[--i][0]=s[i];0===i&&(h[0][0]=s[0])}return h},M=function(t){return Math.sqrt(T(t))},D=function(t,e,s){var a=i(t);return function t(i,r){var n,o=e[r],h=s[r]-o,l=Array(h);if(r===a.length-1){for(n=h;n>=0;n--)l[n]=i[n+o];return l}for(n=h;n>=0;n--)l[n]=t(i[n+o],r+1);return l}(t,0)},k=function(t,e,s,a){var r=i(t);return function t(i,a,n){var o,h=e[n],l=s[n]-h;if(n===r.length-1)for(o=l;o>=0;o--)i[o+h]=a[o];for(o=l;o>=0;o--)t(i[o+h],a[o],n+1)}(t,a,0),t},L=function(t,e){if("number"==typeof t||"number"==typeof e)return p(t,e);var s=i(t),a=i(e);if(1!==s.length||1!==a.length)throw new Error("numeric: tensor product is only defined for vectors");var r,n,o,h,l=s[0],c=a[0],d=Array(l);for(n=l-1;n>=0;n--){for(r=Array(c),h=t[n],o=c-1;o>=3;--o)r[o]=h*e[o],r[--o]=h*e[o],r[--o]=h*e[o],r[--o]=h*e[o];for(;o>=0;)r[o]=h*e[o],--o;d[n]=r}return d},I=function(t,e){this.x=t,this.y=e};(I.prototype={}).add=function(t){var e=this;return t instanceof I||(t=new I(t)),e.y?t.y?new I(c(e.x,t.x),c(e.y,t.y)):new I(c(e.x,t.x),e.y):t.y?new I(c(e.x,t.x),t.y):new I(c(e.x,t.x))},I.prototype.sub=function(t){var e=this;return t instanceof I||(t=new I(t)),e.y?t.y?new I(d(e.x,t.x),d(e.y,t.y)):new I(d(e.x,t.x),e.y):t.y?new I(d(e.x,t.x),f(t.y)):new I(d(e.x,t.x))},I.prototype.mul=function(t){var e=this;return t instanceof I||(t=new I(t)),e.y?t.y?new I(d(p(e.x,t.x),p(e.y,t.y)),c(p(e.x,t.y),p(e.y,t.x))):new I(p(e.x,t.x),p(e.y,t.x)):t.y?new I(p(e.x,t.x),p(e.x,t.y)):new I(p(e.x,t.x))},I.prototype.reciprocal=function(){if(this.y){var t=c(p(this.x,this.x),p(this.y,this.y));return new I(g(this.x,t),g(f(this.y),t))}return new I(g(1,this.x))},I.prototype.div=function(t){return t instanceof I||(t=new I(t)),t.y?this.mul(t.reciprocal()):this.y?new I(g(this.x,t.x),g(this.y,t.x)):new I(g(this.x,t.x))},I.prototype.dot=function(t){var e=this;return t instanceof I||(t=new I(t)),e.y?t.y?new I(d(a(e.x,t.x),a(e.y,t.y)),c(a(e.x,t.y),a(e.y,t.x))):new I(a(e.x,t.x),a(e.y,t.x)):t.y?new I(a(e.x,t.x),a(e.x,t.y)):new I(a(e.x,t.x))},I.prototype.transpose=function(){var t=S,e=this.x,i=this.y;return i?new I(t(e),t(i)):new I(t(e))},I.prototype.transjugate=function(){var t=S,e=this.x,i=this.y;return i?new I(t(e),function(t){var e,i,s,a,r,n=t.length,o=t[0].length,h=Array(o);for(i=0;i<o;i++)h[i]=Array(n);for(e=n-1;e>=1;e-=2){for(a=t[e],s=t[e-1],i=o-1;i>=1;--i)(r=h[i])[e]=-a[i],r[e-1]=-s[i],(r=h[--i])[e]=-a[i],r[e-1]=-s[i];0===i&&((r=h[0])[e]=-a[0],r[e-1]=-s[0])}if(0===e){for(s=t[0],i=o-1;i>=1;--i)h[i][0]=-s[i],h[--i][0]=-s[i];0===i&&(h[0][0]=-s[0])}return h}(i)):new I(t(e))},I.prototype.exp=function(){var t=this,e=b(t.x);return t.y?new I(p(v(t.y),e),p(w(t.y),e)):new I(e)},I.prototype.conj=function(){var t=this;return t.y?new I(t.x,f(t.y)):new I(t.x)},I.prototype.neg=function(){var t=this;return t.y?new I(f(t.x),f(t.y)):new I(f(t.x))},I.prototype.sin=function(){var t=this;return t.y?t.exp().sub(t.neg().exp()).div(new I(0,2)):new I(w(t.x))},I.prototype.cos=function(){var t=this;return t.y?t.exp().add(t.neg().exp()).div(2):new I(v(t.x))},I.prototype.abs=function(){var t=this;return t.y?new I(C(c(p(t.x,t.x),p(t.y,t.y)))):new I(x(t.x))},I.prototype.log=function(){var t=this;if(t.y){var e=new I(m(t.y,t.x)),i=t.abs();return new I(A(i.x),e.x)}return new I(A(t.x))},I.prototype.norm2=function(){var t=this;if(t.y){var e=T;return Math.sqrt(e(t.x)+e(t.y))}return M(t.x)},I.prototype.get=function(t){var e,i=this.x,s=this.y,a=0,r=t.length;if(s){for(;a<r;)i=i[e=t[a]],s=s[e],a++;return new I(i,s)}for(;a<r;)i=i[e=t[a]],a++;return new I(i)},I.prototype.set=function(t,e){var a,r=this.x,n=this.y,o=0,h=t.length,l=e.x,c=e.y;if(0===h)return c?this.y=c:n&&(this.y=void 0),this.x=r,this;if(c){for(n||(n=s(i(r),0),this.y=n);o<h-1;)r=r[a=t[o]],n=n[a],o++;return r[a=t[o]]=l,n[a]=c,this}if(n){for(;o<h-1;)r=r[a=t[o]],n=n[a],o++;return r[a=t[o]]=l,n[a]=l instanceof Array?s(i(l),0):0,this}for(;o<h-1;)r=r[a=t[o]],o++;return r[a=t[o]]=l,this},I.prototype.getRows=function(t,e){var i,s,a=e-t+1,r=Array(a),n=this.x,o=this.y;for(i=t;i<=e;i++)r[i-t]=n[i];if(o){for(s=Array(a),i=t;i<=e;i++)s[i-t]=o[i];return new I(r,s)}return new I(r)},I.prototype.setRows=function(t,e,a){var r,n=this.x,o=this.y,h=a.x,l=a.y;for(r=t;r<=e;r++)n[r]=h[r-t];if(l)for(o||(o=s(i(n),0),this.y=o),r=t;r<=e;r++)o[r]=l[r-t];else if(o)for(r=t;r<=e;r++)o[r]=s([h[r-t].length],0);return this},I.prototype.getRow=function(t){var e=this.x,i=this.y;return i?new I(e[t],i[t]):new I(e[t])},I.prototype.setRow=function(t,e){var a=this.x,r=this.y,n=e.x,o=e.y;return a[t]=n,o?(r||(r=s(i(a),0),this.y=r),r[t]=o):r&&(r=s([n.length],0)),this},I.prototype.getBlock=function(t,e){var i=this.x,s=this.y,a=D;return s?new I(a(i,t,e),a(s,t,e)):new I(a(i,t,e))},I.prototype.setBlock=function(t,e,a){a instanceof I||(a=new I(a));var r=this.x,n=this.y,o=k,h=a.x,l=a.y;if(l)return n||(this.y=s(i(this),0),n=this.y),o(r,t,e,h),o(n,t,e,l),this;o(r,t,e,h),n&&o(n,t,e,s(i(h),0))},I.rep=function(t,e){e instanceof I||(e=new I(e));var i=e.x,a=e.y,r=s;return a?new I(r(t,i),r(t,a)):new I(r(t,i))},I.diag=function(t){t instanceof I||(t=new I(t));var e=t.x,i=t.y;return i?new I(r(e),r(i)):new I(r(e))},I.eig=function(){if(this.y)throw new Error("eig: not implemented for complex matrices.");return B(this.x)},I.identity=function(t){return new I(o(t))},I.prototype.getDiag=function(){var t=this.x,e=this.y;return e?new I(n(t),n(e)):new I(n(t))};var z=function(t){var e=y(t),i=(t[0]>=0?1:-1)*M(t);e[0]+=i;var s=M(e);if(0===s)throw new Error("eig: internal error");return g(e,s)},N=function(t,e){void 0===e&&(e=1e4),t=y(t);y(t);var n,h,l,g,u,m,f,x,v,b,A,w,C,T,S,M,k,I,B=i(t)[0],P=o(B);if(B<3)return{Q:P,B:[[0,B-1]]};var R=2220446049250313e-31;for(I=0;I<e;I++){for(M=0;M<B-1;M++)if(Math.abs(t[M+1][M])<R*(Math.abs(t[M][M])+Math.abs(t[M+1][M+1]))){var O=N(D(t,[0,0],[M,M]),e),X=N(D(t,[M+1,M+1],[B-1,B-1]),e);for(w=Array(M+1),S=0;S<=M;S++)w[S]=P[S];for(C=a(O.Q,w),S=0;S<=M;S++)P[S]=C[S];for(w=Array(B-M-1),S=M+1;S<B;S++)w[S-M-1]=P[S];for(C=a(X.Q,w),S=M+1;S<B;S++)P[S]=C[S-M-1];return{Q:P,B:O.B.concat(c(X.B,M+1))}}var F,_,E;if(l=t[B-2][B-2],g=t[B-2][B-1],u=t[B-1][B-2],x=l+(m=t[B-1][B-1]),f=l*m-g*u,v=D(t,[0,0],[2,2]),x*x>=4*f)F=.5*(x+Math.sqrt(x*x-4*f)),_=.5*(x-Math.sqrt(x*x-4*f)),v=c(d(a(v,v),p(v,F+_)),r(s([3],F*_)));else v=c(d(a(v,v),p(v,x)),r(s([3],f)));for(n=[v[0][0],v[1][0],v[2][0]],h=z(n),w=[t[0],t[1],t[2]],C=L(h,a(h,w)),S=0;S<3;S++)for(A=t[S],T=C[S],k=0;k<B;k++)A[k]-=2*T[k];for(w=D(t,[0,0],[B-1,2]),C=L(a(w,h),h),S=0;S<B;S++)for(A=t[S],T=C[S],k=0;k<3;k++)A[k]-=2*T[k];for(w=[P[0],P[1],P[2]],C=L(h,a(h,w)),S=0;S<3;S++)for(b=P[S],T=C[S],k=0;k<B;k++)b[k]-=2*T[k];for(M=0;M<B-2;M++){for(k=M;k<=M+1;k++)if(Math.abs(t[k+1][k])<R*(Math.abs(t[k][k])+Math.abs(t[k+1][k+1]))){O=N(D(t,[0,0],[k,k]),e),X=N(D(t,[k+1,k+1],[B-1,B-1]),e);for(w=Array(k+1),S=0;S<=k;S++)w[S]=P[S];for(C=a(O.Q,w),S=0;S<=k;S++)P[S]=C[S];for(w=Array(B-k-1),S=k+1;S<B;S++)w[S-k-1]=P[S];for(C=a(X.Q,w),S=k+1;S<B;S++)P[S]=C[S-k-1];return{Q:P,B:O.B.concat(c(X.B,k+1))}}for(E=Math.min(B-1,M+3),n=Array(E-M),S=M+1;S<=E;S++)n[S-M-1]=t[S][M];for(h=z(n),w=D(t,[M+1,M],[E,B-1]),C=L(h,a(h,w)),S=M+1;S<=E;S++)for(A=t[S],T=C[S-M-1],k=M;k<B;k++)A[k]-=2*T[k-M];for(w=D(t,[0,M+1],[B-1,E]),C=L(a(w,h),h),S=0;S<B;S++)for(A=t[S],T=C[S],k=M+1;k<=E;k++)A[k]-=2*T[k-M-1];for(w=Array(E-M),S=M+1;S<=E;S++)w[S-M-1]=P[S];for(C=L(h,a(h,w)),S=M+1;S<=E;S++)for(b=P[S],T=C[S-M-1],k=0;k<B;k++)b[k]-=2*T[k]}}throw new Error("numeric: eigenvalue iteration does not converge -- increase maxiter?")},B=function(t,e){var s,r,n,h,l,c,d,p,g,m,f,x,v,b,A,w,C=function(t){var e=i(t);if(2!==e.length||e[0]!==e[1])throw new Error("numeric: toUpperHessenberg() only works on square matrices");var s,r,n,h,l,c,d,p,g,u,m=e[0],f=y(t),x=o(m);for(r=0;r<m-2;r++){for(h=Array(m-r-1),s=r+1;s<m;s++)h[s-r-1]=f[s][r];if(M(h)>0){for(l=z(h),c=D(f,[r+1,r],[m-1,m-1]),d=L(l,a(l,c)),s=r+1;s<m;s++)for(p=f[s],g=d[s-r-1],n=r;n<m;n++)p[n]-=2*g[n-r];for(c=D(f,[0,r+1],[m-1,m-1]),d=L(a(c,l),l),s=0;s<m;s++)for(p=f[s],g=d[s],n=r+1;n<m;n++)p[n]-=2*g[n-r-1];for(c=Array(m-r-1),s=r+1;s<m;s++)c[s-r-1]=x[s];for(d=L(l,a(l,c)),s=r+1;s<m;s++)for(u=x[s],g=d[s-r-1],n=0;n<m;n++)u[n]-=2*g[n]}}return{H:f,Q:x}}(t),T=N(C.H,e),k=t.length,B=T.B,P=a(T.Q,a(C.H,S(T.Q))),R=new I(a(T.Q,C.Q)),O=B.length,X=Math.sqrt;for(r=0;r<O;r++)if((s=B[r][0])===B[r][1]);else{if(h=s+1,l=P[s][s],c=P[s][h],d=P[h][s],p=P[h][h],0===c&&0===d)continue;(m=(g=-l-p)*g-4*(l*p-c*d))>=0?((A=(l-(f=g<0?-.5*(g-X(m)):-.5*(g+X(m))))*(l-f)+c*c)>(w=d*d+(p-f)*(p-f))?(v=(l-f)/(A=X(A)),b=c/A):(v=d/(w=X(w)),b=(p-f)/w),n=new I([[b,-v],[v,b]]),R.setRows(s,h,n.dot(R.getRows(s,h)))):(f=-.5*g,x=.5*X(-m),(A=(l-f)*(l-f)+c*c)>(w=d*d+(p-f)*(p-f))?(v=(l-f)/(A=X(A+x*x)),b=c/A,f=0,x/=A):(v=d/(w=X(w+x*x)),b=(p-f)/w,f=x/w,x=0),n=new I([[b,-v],[v,b]],[[f,x],[x,-f]]),R.setRows(s,h,n.dot(R.getRows(s,h))))}var F=R.dot(t).dot(R.transjugate()),_=(k=t.length,I.identity(k));for(h=0;h<k;h++)if(h>0)for(r=h-1;r>=0;r--){var E=F.get([r,r]),V=F.get([h,h]);u(E.x,V.x)||u(E.y,V.y)?(f=F.getRow(r).getBlock([r],[h-1]),x=_.getRow(h).getBlock([r],[h-1]),_.set([h,r],F.get([r,h]).neg().sub(f.dot(x)).div(E.sub(V)))):_.setRow(h,_.getRow(r))}for(h=0;h<k;h++)f=_.getRow(h),_.setRow(h,f.div(f.norm2()));return _=_.transpose(),_=R.transjugate().dot(_),{lambda:F.getDiag(),E:_}};switch(t){case"inv":return function(t){var e,s,a,r,n,h,l,c=i(t),d=Math.abs,p=c[0],g=c[1],u=y(t),m=o(p);for(h=0;h<g;++h){var f=-1,x=-1;for(n=h;n!==p;++n)(l=d(u[n][h]))>x&&(f=n,x=l);for(s=u[f],u[f]=u[h],u[h]=s,r=m[f],m[f]=m[h],m[h]=r,t=s[h],l=h;l!==g;++l)s[l]/=t;for(l=g-1;-1!==l;--l)r[l]/=t;for(n=p-1;-1!==n;--n)if(n!==h){for(e=u[n],a=m[n],t=e[h],l=h+1;l!==g;++l)e[l]-=s[l]*t;for(l=g-1;l>0;--l)a[l]-=r[l]*t,a[--l]-=r[l]*t;0===l&&(a[0]-=r[0]*t)}}return m}(e);case"eig":return B(e)}}},CanvasXpress.prototype.initjLouvain=function(){this.jLouvain=function(){var t,e,i,s={};function a(t){var e={};return t.forEach((function(t,i){e[t]=!0})),Object.keys(e)}function r(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(t[i]);return e}function n(t,e){var i=t._assoc_mat[e]?Object.keys(t._assoc_mat[e]):[],s=0;return i.forEach((function(i,a){var r=t._assoc_mat[e][i]||1;e==i&&(r*=2),s+=r})),s}function o(t,e){return void 0===t._assoc_mat[e]?[]:Object.keys(t._assoc_mat[e])}function h(t,e,i){return t._assoc_mat[e]?t._assoc_mat[e][i]:void 0}function l(t){var e={};return t.forEach((function(t,i){t.weight=t.weight||1,e[t.id1]=e[t.id1]||{},e[t.id1][t.id2]=t.weight,e[t.id2]=e[t.id2]||{},e[t.id2][t.id1]=t.weight})),e}function c(t){if(null==t||"object"!=typeof t)return t;var e=t.constructor();for(var i in t)e[i]=c(t[i]);return e}function d(t,e,i){e.nodes_to_com={},e.total_weight=0,e.internals={},e.degrees={},e.gdegrees={},e.loops={},e.total_weight=function(t){var e=0;return t.edges.forEach((function(t){e+=t.weight})),e}(t),void 0===i?t.nodes.forEach((function(i,s){e.nodes_to_com[i]=s;var a=n(t,i);if(a<0)throw"Bad graph type, use positive weights!";e.degrees[s]=a,e.gdegrees[i]=a,e.loops[i]=h(t,i,i)||0,e.internals[s]=e.loops[i]})):t.nodes.forEach((function(s,a){var r=i[s];e.nodes_to_com[s]=r;var h=n(t,s);e.degrees[r]=(e.degrees[r]||0)+h,e.gdegrees[s]=h;var l=0;o(t,s).forEach((function(e,a){var n=t._assoc_mat[s][e];if(n<=0)throw"Bad graph type, use positive weights";i[e]==r&&(l+=e==s?n:n/2)})),e.internals[r]=(e.internals[r]||0)+l}))}function p(t){var e=t.total_weight,i=0;return a(r(t.nodes_to_com)).forEach((function(s,a){var r=t.internals[s]||0,n=t.degrees[s]||0;e>0&&(i=i+r/e-Math.pow(n/(2*e),2))})),i}function g(t,e,i){var s={};return o(e,t).forEach((function(a,r){if(a!=t){var n=e._assoc_mat[t][a]||1,o=i.nodes_to_com[a];s[o]=(s[o]||0)+n}})),s}function u(t,e,i,s){s.nodes_to_com[t]=+e,s.degrees[e]=(s.degrees[e]||0)+(s.gdegrees[t]||0),s.internals[e]=(s.internals[e]||0)+i+(s.loops[t]||0)}function m(t,e,i,s){s.degrees[e]=(s.degrees[e]||0)-(s.gdegrees[t]||0),s.internals[e]=(s.internals[e]||0)-i-(s.loops[t]||0),s.nodes_to_com[t]=-1}function f(t){var e=0,i=c(t),s={};return Object.keys(t).forEach((function(a){var r=t[a],n=void 0===s[r]?-1:s[r];-1==n&&(s[r]=e,n=e,e+=1),i[a]=n})),i}function y(t,e){for(var i=!0,s=0,a=p(e),r=a;i&&-1!=s&&(a=r,i=!1,s+=1,t.nodes.forEach((function(s,a){var r=e.nodes_to_com[s],n=(e.gdegrees[s]||0)/(2*e.total_weight),o=g(s,t,e);m(s,r,o[r]||0,e);var h=r,l=0;Object.keys(o).forEach((function(t,i){var s=o[t]-(e.degrees[t]||0)*n;s>l&&(l=s,h=t)})),u(s,h,o[h]||0,e),h!=r&&(i=!0)})),!((r=p(e))-a<1e-7)););}function x(t,e){var i,s,n={nodes:[],edges:[],_assoc_mat:{}},o=r(t);return n.nodes=n.nodes.concat(a(o)),e.edges.forEach((function(e,a){s=e.weight||1;var r=t[e.id1],o=t[e.id2];i=h(n,r,o)||0,function(t,e){!function(t,e){t._assoc_mat[e.id1]=t._assoc_mat[e.id1]||{},t._assoc_mat[e.id1][e.id2]=e.weight,t._assoc_mat[e.id2]=t._assoc_mat[e.id2]||{},t._assoc_mat[e.id2][e.id1]=e.weight}(t,e);var i=t.edges.map((function(t){return t.id1+"_"+t.id2})).indexOf(e.id1+"_"+e.id2);-1!=i?t.edges[i].weight=e.weight:t.edges.push(e)}(n,{source:r,target:o,weight:i+s})})),n}var v=function(){var t=function(t,e){if(0==t.edges.length){var i={};return t.nodes.forEach((function(t,e){i[t]=t})),i}var a={};d(s,a,e);var r=p(a),n=[];y(s,a);var o=p(a),h=f(a.nodes_to_com);n.push(h),r=o;var l=x(h,s);for(d(l,a);y(l,a),!((o=p(a))-r<1e-7);)h=f(a.nodes_to_com),n.push(h),r=o,d(l=x(h,l),a);return n}(s,i);return function(t,e){for(var i=c(t[0]),s=1;s<e+1;s++)Object.keys(i).forEach((function(e,a){var r=e,n=i[e];i[r]=t[s][n]}));return i}(t,t.length-1)};return v.nodes=function(e){return arguments.length>0&&(t=e),v},v.edges=function(i){if(void 0===t)throw"Please provide the graph nodes first!";if(arguments.length>0){e=i;var a=l(i);s={nodes:t,edges:e,_assoc_mat:a}}return v},v.partition_init=function(t){return arguments.length>0&&(i=t),v},v}},CanvasXpress.prototype.initMathUtils=function(){this.isNaN=function(t){return!!isNaN(t)||(t==Number.POSITIVE_INFINITY||t==Number.NEGATIVE_INFINITY)},this.isInteger=function(t){return!isNaN(t)&&(0|(e=parseFloat(t)))===e;var e},this.isFinite=function(t){if(this.isArray(t)){for(var e=0;e<t.length;e++)if(!isFinite(t[e]))return!1;return!0}return isFinite(t)},this.getPolar=function(t,e,i,s){return{x:t+i*Math.cos(s*Math.PI/180),y:e+i*Math.sin(s*Math.PI/180)}},this.triCube=function(t){return(t=1-t*t*t)*t*t},this.degreesToArcLength=function(t,e){return t*e},this.radiansToArcLength=function(t,e){return t*Math.PI*e/180},this.arcLengthToDegrees=function(t,e){return 180*e/(t*Math.PI)},this.arcLengthToRadians=function(t,e){return e/t},this.radians=function(t){return t*Math.PI/180},this.degrees=function(t){return 180*t/Math.PI},this.getAngle=function(t,e,i,s,a){var r=180*Math.atan2(s-e,i-t)/Math.PI%360;for(a||(a=0);r<a;)r+=360;for(;r>=a+360;)r-=360;return r},this.getRadians=function(t,e,i,s){var a=Math.atan2(s-e,i-t);return a<0&&(a+=2*Math.PI),a},this.rotatePoint=function(t,e,i,s,a){return[Math.cos(a)*(t-i)-Math.sin(a)*(e-s)+i,Math.sin(a)*(t-i)+Math.cos(a)*(e-s)+s]},this.lineLength=function(t,e,i,s){return Math.sqrt(Math.pow(i-t,2)+Math.pow(s-e,2))},this.lineMidPoint=function(t,e,i,s){return[(t+i)/2,(e+s)/2]},this.getCoordinateAtDistance=function(t,e,i,s,a){var r=i-t,n=s-e,o=a/Math.sqrt(Math.pow(r,2)+Math.pow(n,2));return[t+r*o,e+n*o]},this.parallelLinePoints=function(t,e,i,s,a){var r=i-t,n=s-e,o=this.lineLength(t,e,i,s),h=r/o,l=-(n/o);return[t+a*l,e+a*h,t-a*l,e-a*h,i+a*l,s+a*h,i-a*l,s-a*h]},this.perpendicularLinePoints=function(t,e,i,s,a,r){var n=this.lineLength(t,e,i,s),o=this.lineMidPoint(t,e,i,s);a||(a=n*r);var h=i-o[0],l=-((s-o[1])/n),c=h/n;return[o[0]+a*l,o[1]+a*c]},this.shortenLine=function(t,e,i,s,a,r,n,o){if(this.isNumeric([t,e,i,s,a,r])){if(n.match(/bezier/i))return n.match(/beziery/i)?s>e?[t,e+a,i,s-r]:[t,e-a,i,s+r]:i>t?[t+a,e,i-r,s]:[t-a,e,i+r,s];if(n.match(/quadratic/i)){var h=this.lineLength(t,e,i,s),l=this.perpendicularLinePoints(t,e,i,s,!1,Math.min(1,this.arrowQuadraticFactor*Math.abs(o))*(o>0?-1:1)),c=this.traceQuadraticCurve(t,e,l[0],l[1],i,s,a/h,!0),d=this.traceQuadraticCurve(i,s,l[0],l[1],t,e,r/h,!0);return[c[1][0],c[1][1],d[1][0],d[1][1]]}if(n.match(/curved/i))return[t,e,i,s];var p=Math.atan2(s-e,i-t),g=Math.cos(p),u=Math.sin(p),m=this.lineLength(t,e,i,s);if(m){for(;m<a+r;)a/=1.1,r/=1.1;t+=g*a,e+=u*a,i-=g*r,s-=u*r}return[t,e,i,s]}},this.traceArc=function(t,e,i,s,a,r){if(s>a){var n=s;s=a,a=n}var o=[],h=(2*Math.PI-(a-s))/16;o.push([i*Math.cos(s)+t,i*Math.sin(s)+e]);for(var l=0;l<16;l++)s-=h,o.push([i*Math.cos(s)+t,i*Math.sin(s)+e]);return r?o.reverse():o},this.traceArc1=function(t,e,i,s,a,r){if(s>a){var n=s;s=a,a=n}var o=[],h=(Math.PI,(a-s)/32);if(h<1e-9)o.push([i*Math.cos(s)+t,i*Math.sin(s)+e]);else{for(o.push([i*Math.cos(s)+t,i*Math.sin(s)+e]),s+=h;s<a;)o.push([i*Math.cos(s)+t,i*Math.sin(s)+e]),s+=h;o.push([i*Math.cos(a)+t,i*Math.sin(a)+e])}return r?o:o.reverse()},this.traceQuadraticCurve=function(t,e,i,s,a,r,n,o){var h=[];n=Math.max(.01,n);for(var l=function(t,e,i,s){var a=1-t;return a*a*e+2*a*t*i+t*t*s},c=function(n){return[l(n,t,i,a),l(n,e,s,r)]},d=0;d<=1;d+=n)h.push(c(d));return o?h:h.reverse()},this.traceBezierCurve=function(t,e,i,s,a,r,n,o,h,l){var c=[];h=Math.max(.01,h);for(var d=0;d<=1;d+=h)c.push(this.deCasteljau([[t,e],[i,s],[a,r],[n,o]],d));return l?c:c.reverse()},this.splineControlPoint=function(t,e,i,s,a,r){var n=Math.sqrt(Math.pow(i-t,2)+Math.pow(s-e,2)),o=Math.sqrt(Math.pow(a-i,2)+Math.pow(r-s,2)),h=this.tension*n/(n+o),l=this.tension-h;return[i+h*(t-a),s+h*(e-r),i-l*(t-a),s-l*(e-r)]},this.spline=function(t,e){for(var i=[],s=t[0],a=t[1],r=0;r<s.length;r++)i.push(s[r]),i.push(a[r]);var n=this.curvePoints(i,e);for(s=[],a=[];n.length;)s.push(n.shift()),a.push(n.shift());return[s,a]},this.curvePoints=function(t,e){var i,s,a,r,n,o,h,l,c,d,p,g=[],u=[],m=this.tension,f=this.tensionSegments;e=e||!1,g=t.slice(0),e?(g.unshift(t[t.length-1]),g.unshift(t[t.length-2]),g.unshift(t[t.length-1]),g.unshift(t[t.length-2]),g.push(t[0]),g.push(t[1])):(g.unshift(t[1]),g.unshift(t[0]),g.push(t[t.length-2]),g.push(t[t.length-1]));for(var y=2;y<g.length-4;y+=2)for(var x=0;x<=f;x++)a=(g[y+2]-g[y-2])*m,r=(g[y+4]-g[y])*m,n=(g[y+3]-g[y-1])*m,o=(g[y+5]-g[y+1])*m,p=x/f,h=2*Math.pow(p,3)-3*Math.pow(p,2)+1,l=-2*Math.pow(p,3)+3*Math.pow(p,2),c=Math.pow(p,3)-2*Math.pow(p,2)+p,d=Math.pow(p,3)-Math.pow(p,2),i=h*g[y]+l*g[y+2]+c*a+d*r,s=h*g[y+1]+l*g[y+3]+c*n+d*o,u.push(i),u.push(s);return u},this.hullControlPoints=function(t){var e,i=this,s=[],a=function(t,e,s){var a=function(t,e){var i=e[0]-t[0],s=e[1]-t[1];return Math.sqrt(i*i+s*s)},r=a(t,e),n=a(e,s),o=i.tension*r/(r+n);return[[(t[0]-s[0])*o+e[0],(t[1]-s[1])*o+e[1]],[e[0]-(t[0]-s[0])*o,e[1]-(t[1]-s[1])*o]]};for(e=0;e<t.length-2;e++)s.push.apply(s,a(t[e],t[e+1],t[e+2]));return s.push.apply(s,a(t[e],t[e+1],t[0])),s.push.apply(s,a(t[e+1],t[0],t[1])),s},this.expandPolygon=function(t,e){for(var i,s=function(t){var e=Math.sqrt(t.x*t.x+t.y*t.y);return{x:t.x/e,y:t.y/e}},a=function(t,e){return{x:t.x*e,y:t.y*e}},r=function(t){return{x:t.y,y:-t.x}},n=function(t,e){var i=t[1].x-t[0].x,s=e[0].x-e[1].x,a=e[0].x-t[0].x,r=t[1].y-t[0].y,n=e[0].y-e[1].y,o=(s*(e[0].y-t[0].y)-n*a)/(r*s-i*n);return{x:t[0].x+o*(t[1].x-t[0].x),y:t[0].y+o*(t[1].y-t[0].y)}},o=[],h=function(t,e){return t.x*e.x+t.y*e.y}(r({x:(i=t)[1].x-i[0].x,y:i[1].y-i[0].y}),{x:i[2].x-i[1].x,y:i[2].y-i[1].y})>=0?function(t){return{x:-t.y,y:t.x}}:r,l=0;l<t.length;++l){var c=t[l>0?l-1:t.length-1],d=t[l],p=t[l<t.length-1?l+1:0],g={x:d[0]-c[0],y:d[1]-c[1]},u={x:p[0]-d[0],y:p[1]-d[1]},m=a(s(h(g)),e),f=a(s(h(u)),e),y=n([{x:c[0]+m.x,y:c[1]+m.y},{x:d[0]+m.x,y:d[1]+m.y}],[{x:d[0]+f.x,y:d[1]+f.y},{x:p[0]+f.x,y:p[1]+f.y}]);o.push([y.x,y.y])}return o},this.enlargePolygon=function(t,e,i){for(var s=function(t,e){var i=t.vrs[e],s=t.vrs[(e+1)%t.vrs.length];return function(t,e,i){return(i.x-t.x)*(e.y-t.y)-(e.x-t.x)*(i.y-t.y)}(t.vrs[(e+t.vrs.length-1)%t.vrs.length],s,i)<0},a=function(t){var e=t.v2.x-t.v1.x,i=t.v2.y-t.v1.y,s=Math.sqrt(e*e+i*i);return{x:-i/s,y:e/s}},r=function(t){var e=a(t);return{x:-e.x,y:-e.y}},n=function(t,e,i){return{v1:{x:t.v1.x+e,y:t.v1.y+i},v2:{x:t.v2.x+e,y:t.v2.y+i}}},o=function(t,e){var i=(e.v2.y-e.v1.y)*(t.v2.x-t.v1.x)-(e.v2.x-e.v1.x)*(t.v2.y-t.v1.y);if(0==i)return null;var s=((e.v2.x-e.v1.x)*(t.v1.y-e.v1.y)-(e.v2.y-e.v1.y)*(t.v1.x-e.v1.x))/i,a=((t.v2.x-t.v1.x)*(t.v1.y-e.v1.y)-(t.v2.y-t.v1.y)*(t.v1.x-e.v1.x))/i;return s<0||a<0||s>1||a>1?null:{x:t.v1.x+s*(t.v2.x-t.v1.x),y:t.v1.y+s*(t.v2.y-t.v1.y)}},h=function(t,e,s,a,r,n){var o=2*Math.PI,h=Math.atan2(a.y-e.y,a.x-e.x),l=Math.atan2(r.y-e.y,r.x-e.x);h<0&&(h+=o),l<0&&(l+=o);var c=h>l?h-l:h+o-l,d=(n?-c:o-c)/i;t.push(a);for(var p=1;p<i;++p){c=h+d*p;var g={x:e.x+Math.cos(c)*s,y:e.y+Math.sin(c)*s};t.push(g)}t.push(r)},l=[],c=[],d=0;d<t.length;d++)c.push({x:t[d][0],y:t[d][1]});var p=function(t){for(var e={vrs:t},i=[],n=t.length>0?t[0].x:void 0,o=t.length>0?t[0].y:void 0,h=n,l=o,c=0;c<e.vrs.length;c++){t[c].label=String(c),t[c].isReflex=s(e,c);var d={v1:t[c],v2:t[(c+1)%t.length],pol:e,index:c};d.outwardNormal=r(d),d.inwardNormal=a(d),i.push(d);var p=t[c].x,g=t[c].y;n=Math.min(p,n),o=Math.min(g,o),h=Math.max(p,h),l=Math.max(g,l)}return e.edges=i,e.minX=n,e.minY=o,e.maxX=h,e.maxY=l,e.closed=!0,e}(c);for(d=0;d<p.edges.length;d++){var g=p.edges[d],u=g.outwardNormal.x*e,m=g.outwardNormal.y*e;l.push(n(g,u,m))}c=[];for(d=0;d<l.length;d++){var f=l[d],y=l[(d+l.length-1)%l.length],x=o(y,f);if(x)c.push(x);else h(c,p.edges[d].v1,e,y.v2,f.v1,!1)}var v=[];for(d=0;d<c.length;d++)v.push([c[d].x,c[d].y]);return v},this.cleanVals=function(t){var e=[];if(t.length>1){for(var i=0,s=0;s<t.length;s++){var a=this.getNumberDecimals(t[s]);a<8&&(i=Math.max(i,a))}for(s=0;s<t.length;s++)e.push(Number(this.formatNumber(t[s],i)))}else if(t.length>0)return t;return e},this.getNumberDecimals=function(t){return(t=this.approxNumber(t).toString()).indexOf(".")>=0?Math.min(Number(t.length-(t.indexOf(".")+1)),20):0},this.sample=function(t,e){if(t){var i,s;(!e||e<=0)&&(e=t.length);for(var a=t.slice(0),r=t.length,n=r-e;r-- >n;)i=a[s=Math.floor((r+1)*this.random())],a[s]=a[r],a[r]=i;return a.slice(n)}return[]},this.rep=function(t,e){var i=t.length,s=[];if(!Array.isArray(t))return this.rep([t],e);if(Array.isArray(e)){e.length!=t.length&&alert("If x and k are both arrays in 'rep', then they need to have the same length.");for(a=0;a<i;a++)for(r=0;r<e[a];r++)s.push(t[a])}else for(var a=0;a<e;a++)for(var r=0;r<i;r++)s[r+a*i]=t[r];return s},this.seq=function(t,e,i,s){var a=[];if(null!=t&&null!=e&&(s||i)){var r=e<t;if(e<t){var n=t;t=e,e=n}if(i=s?(e-t)/((s=Math.abs(s))-1):Math.abs(i))for(;e>=t;)a.push(t),t+=i;s?a[s-1]=e:a[a.length-1]<e&&a.push(e)}return r?a.reverse():a},this.frac=function(t){for(var e=1+1/(t-1),i=1/(t-1),s=-1,a=0|Math.max(0,Math.ceil((e-0)/i)),r=new Array(a);++s<a;)r[s]=0+s*i;return r.splice(t),r},this.runif=function(t,e,i){var s=[];if(null!=e&&null!=i)for(var a=0;a<t;a++)s.push(this.randomBetween(e,i));else for(a=0;a<t;a++)s.push(this.random());return s},this.qnorm=function(t){var e,i,s=(t=parseFloat(t))-.5;return Math.abs(s)<=.42?i=s*(((-25.44106049637*(e=s*s)+41.39119773534)*e-18.61500062529)*e+2.50662823884)/((((3.13082909833*e-21.06224101826)*e+23.08336743743)*e-8.4735109309)*e+1):(e=t,s>0&&(e=1-t),e>0?(i=(((2.32121276858*(e=Math.sqrt(-Math.log(e)))+4.85014127135)*e-2.29796479134)*e-2.78718931138)/((1.63706781897*e+3.54388924762)*e+1),s<0&&(i=-i)):i=0),i},this.dnorm=function(t,e,i,s){if(this.isArray(t)){for(var a=[],r=0;r<t.length;r++)a[r]=this.dnorm(t[r],e,i,s);return a}var n=function(t,e){return Number.isNaN(t)||Number.isNaN(e)?t+e:Number.isFinite(t)&&Number.isFinite(e)?t*Math.pow(2,e):Number.POSITIVE_INFINITY};null==e&&(e=0),null==i&&(i=1);var o=Math.abs((t-e)/i);if(o>=2*Number.MAX_VALUE)return s?Number.NEGATIVE_INFINITY:0;if(s)return-(.9189385332046728+.5*o*o+Mat.log(i));if(o<5)return.3989422804014327*Math.exp(-.5*o*o)/i;if(o>Math.sqrt(-1.3862943611198906*(Math.log2(Number.MIN_VALUE)+1-18)))return 0;var h=n(Math.round(n(o,16)),-16),l=o-h;return.3989422804014327/i*(Math.exp(-.5*h*h)*Math.exp((-.5*l-h)*l))},this.diff=function(t){for(var e=[],i=1;i<t.length;i++)e.push(t[i]-t[i-1]);return this.cleanVals(e)},this.rnorm=function(t,e,i){var s=this,a=[];null==e&&(e=0),null==i&&(i=1),i=Math.sqrt(i);for(var r=function(){for(var t,a,r=2;r>1;)r=(t=2*s.random()-1)*t+(a=2*s.random()-1)*a;return e+i*t*Math.sqrt(-2*Math.log(r)/r)},n=0;n<t;n++)a.push(r());return a},this.qt=function(t,e){var i;function s(t){for(var e=1,i=2;i<=t;i+=1)e*=i;return e}if(1==e)i=Math.tan(Math.PI*(t-.5));else if(2==e){var a=4*t*(1-t);i=(2*t-1)*Math.sqrt(2/a)}else if(4==e){a=4*t*(1-t);i=Math.cos(1/3*Math.acos(Math.sqrt(a)))/Math.sqrt(a),i=2*function(t){return t>0?1:t<0?-1:0}(t-.5)*Math.sqrt(i-1)}else i=e%2==0?function(t,e){var i,a=Math.ceil(e/2),r=1-t;if(.5!=r){for(var n=Math.sqrt(2*Math.pow(1-2*r,2)/(1-Math.pow(1-2*r,2))),o=0;o<20;o+=1){for(var h=0,l=0;l<=a-1;l+=1)h+=s(2*l)/Math.pow(2,2*l)/Math.pow(s(l),2)*Math.pow(1+Math.pow(n,2)/(2*a),-l);n=1/Math.sqrt(1/(2*a)*(Math.pow(h/(1-2*r),2)-1))}i=r>.5?-n:n}else i=0;return i}(t,e):function(t,e){var i=t>.5?2*(1-t):2*t,s=!(t>.5),a=1/(e-.5),r=48/(a*a),n=((20700*a/r-98)*a-16)*a+96.36,o=((94.5/(r+n)-3)/r+1)*Math.sqrt(a*Math.PI/2)*e,h=i*o,l=Math.pow(h,2/e);l>.05+a?(h=function t(e,i,s){var a;if(e<.5)a=-t(1-e,0,1);else{var r=Math.sqrt(-2*Math.log(1-e));a=r+(r*(r*(r*(-453642210148e-16*r-.020423121024)-.342242088547)-1)-.322232431088)/(.099348462606+r*(.58858157049+r*(.531103462366+r*(.10353775285+.0038560700634*r))))}return i+a*s}(.5*i,0,1),e<5&&(n+=.3*(e-4.5)*(h+.6)),l=(((((.4*(l=h*h)+6.3)*l+36)*l+94.5)/(n=n+(((.05*o*h-5)*h-7)*h-2)*h+r)-l-3)/r+1)*h,(l*=a*l)>.002?l=Math.exp(l)-1:l+=.5*l*l):l=((1/(((e+6)/(e*l)-.089*o-.822)*(e+2)*3)+.5/(e+4))*l-1)*(e+1)/(e+2)+1/l;var c=Math.sqrt(e*l);return s?-c:c}(t,e);return i},this.percentile2=function(t,e){if(0===t.length)return 0;if("number"!=typeof e)throw new TypeError("p must be a number");if(e<=0)return t[0];if(e>=1)return t[t.length-1];var i=t.length*e,s=Math.floor(i),a=s+1,r=i%1;return a>=t.length?t[s]:t[s]*(1-r)+t[a]*r},this.percentRank=function(t,e){if("number"!=typeof e)throw new TypeError("v must be a number");for(var i=0,s=t.length;i<s;i++)if(e<=t[i]){for(;i<s&&e===t[i];)i++;return 0===i?0:(e!==t[i-1]&&(i+=(e-t[i-1])/(t[i]-t[i-1])),i/s)}return 1},this.percentile=function(t,e,i){var s=e-t;return 0==s?50:100*(i-t)/s},this.percentile3=function(t){if(0===t.length)return t;for(var e=this.min(t),i=this.max(t)-e,s=[],a=0;a<t.length;a++){var r=t[a]-e;s.push(r/i)}return s},this.rank=function(t){for(var e=[],i=0;i<t.length;i++)e.push(i);return e.sort((function(e,i){return t[e]-t[i]})),e},this.rank2=function(t){var e=t.slice().sort((function(t,e){return t-e})),i=t.slice().map((function(t){return e.indexOf(t)+1})),s={};return i.map((function(t){s[t]=s[t]?s[t]++:1})),i.map((function(t){return t/s[t]}))},this.min=function(t,e,i){if(this.isArray(t)){var s=Number.POSITIVE_INFINITY;if(this.isArray(t[0]))for(var a=0;a<t.length;a++)for(var r=0;r<t[a].length;r++)this.isNumber(t[a][r],!0)&&(s=Math.min(s,t[a][r]));else{t=this.cleanArray(t,e,i);for(a=0;a<t.length;a++)this.isNumber(t[a],!0)&&(s=Math.min(s,t[a]))}return s}return this.Min(t,e)},this.max=function(t,e,i){if(this.isArray(t)){var s=Number.NEGATIVE_INFINITY;if(this.isArray(t[0]))for(var a=0;a<t.length;a++)for(var r=0;r<t[a].length;r++)this.isNumber(t[a][r],!0)&&(s=Math.max(s,t[a][r]));else{t=this.cleanArray(t,e,i);for(a=0;a<t.length;a++)this.isNumber(t[a],!0)&&(s=Math.max(s,t[a]))}return s}return this.Max(t,e)},this.sum=function(t,e,i,s,a){t=this.cleanArray(t,e,i);for(var r=0,n=0;n<t.length;n++)s?t[n]>0&&(r+=t[n]):a?t[n]<0&&(r+=t[n]):r+=t[n];return r},this.sumSquared=function(t,e,i,s){t=this.cleanArray(t,e,i);for(var a=0,r=0;r<t.length;r++)s?t[r]>0&&(a+=t[r]*t[r]):a+=t[r]*t[r];return a},this.sumSquaredError=function(t,e,i){t=this.cleanArray(t,e,i);for(var s=this.mean(t),a=0,r=0;r<t.length;r++){var n=t[r]-s;a+=n*n}return a},this.mean=function(t,e,i){t=this.cleanArray(t,e,i);for(var s=0,a=0,r=0;r<t.length;r++)this.isNaN(t[r])||(s+=Number(t[r]),a++);return a>0&&(s/=a),s},this.range=function(t,e,i){t=this.cleanArray(t,e,i);for(var s=Number.MAX_VALUE,a=-1*Number.MAX_VALUE,r=0;r<t.length;r++)s=Math.min(t[r],s),a=Math.max(t[r],a);return s==a&&0==s?[-.5,.5]:s==a?[Number(s)-.5,Number(a)+.5]:[Number(s),Number(a)]},this.range2D=function(t){for(var e=Number.MAX_VALUE,i=-1*Number.MAX_VALUE,s=0;s<t.length;s++)for(var a=0;a<t[s].length;a++)this.isNumber(t[s][a],!0)&&(e=Math.min(t[s][a],e),i=Math.max(t[s][a],i));return e==i&&0==e?[-.5,.5]:e==i?[Number(e)-.5,Number(i)+.5]:[Number(e),Number(i)]},this.median=function(t,e,i){t=this.cleanArray(t,e,i);var s=[],a=[],r=0;s[0]=Number.NaN,s[1]=Number.NaN;for(var n=0;n<t.length;n++)a.push(t[n]),r++;return r>0&&(s[1]=r,a.sort((function(t,e){return t-e})),s[0]=r%2?a[parseInt(r/2)]:(a[parseInt((r-1)/2)]+a[r/2])/2),s},this.Abs=function(t,e,i){t=this.cleanArray(t,e,i);for(var s=[],a=0;a<t.length;a++)s.push(Math.abs(t[a]));return s},this.square=function(t,e,i){t=this.cleanArray(t,e,i);for(var s=[],a=0;a<t.length;a++)s.push(t[a]*t[a]);return s},this.subtractArray=function(t,e){for(var i=[],s=0;s<t.length;s++)i.push(t[s]-e);return i},this.addArray=function(t,e){for(var i=[],s=0;s<t.length;s++)i.push(t[s]+e);return i},this.replaceArray=function(t,e){for(var i=[],s=0;s<t.length;s++)i.push(e);return i},this.nextSeed=function(t){return"numericalRecipes"==this.randomMethod?(9301*t+49297)%233280:t=4294967295&(3042594569^(t=(t=4294967295&((t=(t=4294967295&(3345072700^(t=t+2127912214+(t<<12)&4294967295)^t>>>19))+374761393+(t<<5)&4294967295)+3550635116^t<<9))+4251993797+(t<<3)&4294967295)^t>>>16)},this.random=function(t){return this.pseudoRandom?(this.randomSeed=this.nextSeed(t||this.randomSeed),"numericalRecipes"==this.randomMethod?this.randomSeed/233280:(268435455&this.randomSeed)/268435456):Math.random()},this.randomBetween=function(t,e,i){return this.random(i)*(e-t+1)+t},this.randomInt=function(t){return parseInt(this.random(t))},this.randomIntBetween=function(t,e,i){return Math.floor(this.random(i)*(e-t+1))+t},this.sumarizeErrorData=function(t,e,i){return"standardErrorMean"==this.errorBarsType?this.meanStandardErrorN(t,e,i):"confidenceInterval95"==this.errorBarsType?this.mean95ConfidenceIntervalN(t,e,i):this.meanStandardDeviationN(t,e,i)},this.meanStandardErrorN=function(t,e,i){var s=this.variance(t,e,i,!0);return this.isNaN(s[1])?[Number.NaN,Number.NaN,Number.NaN]:[s[0],Math.sqrt(s[1])/Math.sqrt(s[2]),s[2]]},this.mean95ConfidenceIntervalN=function(t,e,i){var s=this.meanStandardErrorN(t,e,i,!0);return this.isNaN(s[1])?[Number.NaN,Number.NaN,Number.NaN]:[s[0],1.96*s[1],s[2]]},this.meanStandardDeviationN=function(t,e,i){var s=this.variance(t,e,i,!0);return this.isNaN(s[1])?[Number.NaN,Number.NaN,Number.NaN]:[s[0],Math.sqrt(s[1]),s[2]]},this.fivenum=function(t){t.sort((function(t,e){return t-e}));for(var e=t.length,i=Math.floor((e+3)/2)/2,s=[1,i,(e+1)/2,e+1-i,e],a=[],r=0;r<s.length;r++)a.push(.5*(t[Math.floor(s[r])-1]+t[Math.ceil(s[r])-1]));return a},this.boxplot=function(t,e,i){if(t.length>0){t=this.cleanArray(t,e,i);for(var s=[],a=[],r=this.fivenum(t),n="summary"==this.boxplotHingeFunction?this.quantile(t,[.25,.75]):[r[1],r[3]],o=r[0],h=n[0],l=r[2],c=r[2],d=n[1],p=r[4],g=d-h,u=h-this.boxplotCoef*g,m=d+this.boxplotCoef*g,f=(r[3]-r[1])/Math.sqrt(t.length),y=0;y<t.length;y++)t[y]<u||t[y]>m?s.push(t[y]):a.push(t[y]);if(s.length>0){var x=this.range(a);o=x[0],p=x[1]}var v=[c-1.58*f,c+1.58*f];return[c,h,l,d,o,p,s,t.length,v]}return[Number.NaN,Number.NaN,Number.NaN,Number.NaN,Number.NaN,Number.NaN,Number.NaN]},this.quantileBin=function(t,e){return e<t[0]?0:e>=t[0]&&e<t[1]?1:e>=t[1]&&e<t[2]?2:e>=t[2]?3:void 0},this.quantile=function(t,e){var i=(t=(t=this.cleanArray(t)).slice().sort((function(t,e){return t-e}))).length-1;return(e&&e.length?e:[.25,.5,.75]).map((function(e){if(0===e)return t[0];if(1===e)return t[i];var s=1+e*i,a=Math.floor(s),r=s-a,n=t[a-1];return 0===r?n:n+r*(t[a]-n)}))},this.iqr=function(t){var e=this.quantile(t,[.25,.75]);return e[1]-e[0]},this.variance=function(t,e,i,s){var a=(t=this.cleanArray(t,e,i)).length;if(a<1)return s?[Number.NaN,Number.NaN,Number.NaN]:Number.NaN;if(1==a)return s?[t[0],0,1]:0;for(var r=this.mean(t),n=0,o=a;--o>=0;)if(!this.isNaN(t[o])){var h=t[o]-r;n+=h*h}return s?"unbiased"==this.standardDeviationType?[r,n/(a-1),a]:[r,n/a,a]:"unbiased"==this.standardDeviationType?n/(a-1):n/a},this.deviation=function(t,e,i){var s=(t=this.cleanArray(t,e,i)).length;if(s<1)return[Number.NaN];if(1==s)return[0];for(var a=this.mean(t),r=[],n=0;n<s;n++)this.isNaN(t[n])?r[n]=NaN:r[n]=t[n]-a;return r},this.standardDeviation=function(t,e,i){var s=this.variance(t,e,i);return this.isNaN(s)?s:Math.sqrt(s)},this.standardError=function(t,e,i){var s=this.variance(t,e,i,!0);return this.isNaN(s[1])?s[1]:Math.sqrt(s[1])/Math.sqrt(s[2])},this.meanSquaredError=function(t,e,i){return t=this.cleanArray(t,e,i),this.sumSquaredError(this.sumSquaredError(t,e,i))/t.length},this.confidenceInterval95=function(t,e,i){var s=this.standardError(t,e,i);return this.isNaN(s)?s:1.96*s},this.covariance=function(t,e,i,s){var a=this.cleanArrays(t,e,i,s);t=a[0],e=a[1];for(var r=0,n=[],o=0,h=this.mean(t),l=this.mean(e),c=0;c<t.length;c++)n[c]=(t[c]-h)*(e[c]-l),r+=n[c],o++;return o>0?r/("unbiased"==this.standardDeviationType?o-1:o):NaN},this.correlation=function(t,e,i,s,a){return a&&"spearman"==a?this.correlationSpearman(t,e,i,s):this.correlationPearson(t,e,i,s)},this.correlationSpearman=function(t,e,i,s){var a=this.cleanArrays(t,e,i,s);t=a[0],e=a[1];for(var r=t.length,n=0,o=this.rank2(t),h=this.rank2(e),l=0;l<t.length;l++){var c=o[l]-h[l];n+=c*c}return 1-6*n/(r*(r*r-1))},this.correlationPearson=function(t,e,i,s){return this.covariance(t,e,i,s)/this.standardDeviation(t,i,s)/this.standardDeviation(e,i,s)},this.regression=function(t,e,i,s,a,r){var n=[],o=this.cleanArrays(t,e,i,s);t=o[0],e=o[1];for(var h=0;h<t.length;h++)this.isNaN(t[h])||this.isNaN(e[h])||n.push([t[h],e[h]]);var l=this[this.regressionType+"Regression"](n);return[l.params[0],l.params[1],l.r2,l.confidence]},this.slope=function(t,e,i,s){return e!=s?(i-t)/(s-e):0},this.intercept=function(t,e,i){return e-t*i},this.slopeIntercept=function(t,e,i,s){var a=this.slope(t,e,i,s);return[a,this.intercept(t,e,a)]},this.normalize=function(t){var e=this.standardDeviationType;this.standardDeviationType="biased";for(var i=0;i<t.length;i++)for(var s=this.meanStandardDeviationN(t[i]),a=0;a<t[i].length;a++)t[i][a]=(t[i][a]-s[0])/s[1];return this.standardDeviationType=e,t},this.coefficientDetermination=function(t,e){for(var i=0,s=0;s<t.length;s++)i+=t[s][1];var a=i/t.length,r=0;for(s=0;s<t.length;s++){var n=t[s][1]-a;r+=n*n}var o=0;for(s=0;s<t.length;s++){var h=t[s][1]-e[s][1];o+=h*h}return 1-o/r},this.gaussianElimination=function(t,e){for(var i=t,s=t.length-1,a=[e],r=0;r<s;r++){for(var n=r,o=r+1;o<s;o++)Math.abs(i[r][o])>Math.abs(i[r][n])&&(n=o);for(var h=r;h<s+1;h++){var l=i[h][r];i[h][r]=i[h][n],i[h][n]=l}for(o=r+1;o<s;o++)for(h=s;h>=r;h--)i[h][o]-=i[h][r]*i[r][o]/i[r][r]}for(o=s-1;o>=0;o--){var c=0;for(h=o+1;h<s;h++)c+=i[h][o]*a[h];a[o]=(i[s][o]-c)/i[o][o]}return a},this.linearRegression=function(t){for(var e=[0,0,0,0,0],i=0,s=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,r=0;r<t.length;r++)i++,s=Math.max(s,t[r][0]),a=Math.min(a,t[r][0]),e[0]+=t[r][0],e[1]+=t[r][1],e[2]+=t[r][0]*t[r][0],e[3]+=t[r][0]*t[r][1],e[4]+=t[r][1]*t[r][1];var n=i*e[2]-e[0]*e[0],o=i*e[3]-e[0]*e[1],h=0===n?0:o/n,l=e[1]/i-h*e[0]/i,c=[];for(r=0;r<t.length;r++)c[r]=[t[r][0],t[r][0]*h+l];for(var d=[],p=0,g=0,u=e[0]/i,m=Math.max(r-2,1),f=this.seq(a,s,(s-a)/10),y=this.tinv(1-this.confidenceLevel,m,!0),x=0;x<r;x++)p+=Math.pow(t[x][1]-c[x][1],2),g+=Math.pow(t[x][0]-u,2);p=Math.sqrt(p/m);for(x=0;x<f.length;x++){var v=-y*p*Math.sqrt(1/r+Math.pow(f[x]-u,2)/g),b=h*f[x]+l;d.push([f[x],b+v,b-v,v])}return{predict:c,params:[h,l],r2:this.coefficientDetermination(t,c),confidence:d,string:0===l?"y = "+h+"x":"y = "+h+"x + "+l}},this.exponentialRegression=function(t){for(var e=[0,0,0,0,0,0],i=0;i<t.length;i++)e[0]+=t[i][0],e[1]+=t[i][1],e[2]+=t[i][0]*t[i][0]*t[i][1],e[3]+=t[i][1]*Math.log(t[i][1]),e[4]+=t[i][0]*t[i][1]*Math.log(t[i][1]),e[5]+=t[i][0]*t[i][1];var s=e[1]*e[2]-e[5]*e[5],a=Math.exp((e[2]*e[3]-e[5]*e[4])/s),r=(e[1]*e[4]-e[5]*e[3])/s,n=[];for(i=0;i<t.length;i++)n[i]=[t[i][0],a*Math.exp(r*t[i][0])];return{predict:n,params:[a,r],r2:this.coefficientDetermination(t,n),confidence:!1,string:"y = "+a+"e^("+r+"x)"}},this.logarithmicRegression=function(t){for(var e=[0,0,0,0],i=t.length,s=0;s<i;s++)e[0]+=Math.log(t[s][0]),e[1]+=t[s][1]*Math.log(t[s][0]),e[2]+=t[s][1],e[3]+=Math.pow(Math.log(t[s][0]),2);const a=(i*e[1]-e[2]*e[0])/(i*e[3]-e[0]*e[0]),r=(e[2]-a*e[0])/i;var n=[];for(s=0;s<t.length;s++)n[s]=[t[s][0],r+a*Math.log(t[s][0])];return{predict:n,params:[r,a],r2:this.coefficientDetermination(t,n),confidence:!1,string:"y = "+r+" + "+a+"ln(x)"}},this.powerRegression=function(t){for(var e=[0,0,0,0,0],i=t.length,s=0;s<i;s++)e[0]+=Math.log(t[s][0]),e[1]+=Math.log(t[s][1])*Math.log(t[s][0]),e[2]+=Math.log(t[s][1]),e[3]+=Math.pow(Math.log(t[s][0]),2);var a=(i*e[1]-e[0]*e[2])/(i*e[3]-Math.pow(e[0],2)),r=Math.exp((e[2]-a*e[0])/i),n=[];for(s=0;s<t.length;s++)n[s]=[t[s][0],r*Math.pow(t[s][0],a)];return{predict:n,params:[r,a],r2:this.coefficientDetermination(t,n),confidence:!1,string:"y = "+r+"x^"+a}},this.polynomialRegression=function(t){this.regressionOrder=2;for(var e=[],i=[],s=0,a=0,r=t.length,n=this.regressionOrder+1,o=0;o<n;o++){for(var h=0;h<r;h++)s+=Math.pow(t[h][0],o)*t[h][1];e.push(s),s=0;for(var l=[],c=0;c<n;c++){for(h=0;h<r;h++)a+=Math.pow(t[h][0],o+c);l.push(a),a=0}i.push(l)}i.push(e);for(var d=this.gaussianElimination(i,n),p=[],g=0;g<t.length;g++)p[g]=[t[g][0],d[0]+d[1]*Math.pow(t[g][0],d[2])];var u="y = ";for(o=d.length-1;o>=0;o--)u+=o>1?d[o]+"x^"+o+" + ":1===o?d[o]+"x + ":d[o];return{predict:p,params:d.reverse(),r2:this.coefficientDetermination(t,p),confidence:!1,string:u}},this.commonElementsInArrays=function(t,e){for(var i=[],s={},a=0;a<t.length;a++)s[t[a]]=!0;for(a=0;a<e.length;a++)s[e[a]]&&i.push(e[a]);return i},this.errorEllipse=function(t,e,i){return i?this.errorEllipse3D(t,e,i):this.errorEllipse2D(t,e)},this.errorEllipse2D=function(t,e){var i=this.variance(t,!1,!1,!0),s=this.variance(e,!1,!1,!0),a=this.covariance(t,e),r=[[i[1],a],[a,s[1]]],n=this.numeric("eig",r),o=Math.sqrt(2*this.gammaPinv(this.confidenceLevel,1)),h=n.lambda.x[0]>n.lambda.x[1]?0:1,l=n.lambda.x[0]<n.lambda.x[1]?0:1,c=i[1]>s[1]?Math.sqrt(n.lambda.x[h])*o:Math.sqrt(n.lambda.x[l])*o,d=s[1]>i[1]?Math.sqrt(n.lambda.x[h])*o:Math.sqrt(n.lambda.x[l])*o,p=Math.atan2(n.E.x[h][1],n.E.x[h][0]);return p<0&&(p+=Math.PI/2),{rx:c,ry:d,cx:i[0],cy:s[0],rot:p}},this.errorEllipse3D=function(t,e,i){var s=this.variance(t,!1,!1,!0),a=this.variance(e,!1,!1,!0),r=this.variance(i,!1,!1,!0),n=this.covariance(t,e),o=this.covariance(t,i),h=this.covariance(e,i),l=[[s[1],n,o],[n,a[1],h],[o,h,r[1]]];if(function(t){for(var e=0;e<t.length;e++)for(var i=0;i<t[e].length;i++)if(isNaN(t[e][i]))return!1;return!0}(l)){var c=this.numeric("eig",l),d=Math.sqrt(2*this.gammaPinv(this.confidenceLevel,1)),p=this.rank(c.lambda.x),g=p[2],u=p[1],m=p[0],f=Math.sqrt(c.lambda.x[g])*d,y=Math.sqrt(c.lambda.x[u])*d,x=Math.sqrt(c.lambda.x[m])*d,v=Math.atan2(-1*c.E.x[2][g],-1*c.E.x[1][g]),b=Math.atan2(-1*c.E.x[2][g],-1*c.E.x[0][g]),A=Math.atan2(-1*c.E.x[1][g],-1*c.E.x[0][g]);return b<0&&(b+=Math.PI/2),{rx:[f],ry:[y],rz:[x],cx:s[0],cy:a[0],cz:r[0],rot:[v,b,A]}}return!1},this.cdfNormal=function(t,e,i){t=(t-e)/i;var s=1/(1+.2315419*Math.abs(t)),a=.3989423*Math.exp(-t*t/2)*s*(.3193815+s*(s*(1.781478+s*(1.330274*s-1.821256))-.3565638));return t>0&&(a=1-a),a},this.cdf=function(t,e){for(var i=[],s=[],a=[],r=0;r<t.length;r++)this.isNumber(t[r])&&(i.push(t[r]),s.push(e[r]),a.push(r));var n=a.sort((function(t,e){return i[t]-i[e]})),o=this.cloneObject(i);o=o.sort((function(t,e){return t-e}));var h=[],l=i.length;for(r=0;r<l;r++)h.push((r+1)/l);var c=[];for(r=0;r<n.length;r++)c.push(s[n[r]]);return{i:c,x:o,y:h}},this.qqline=function(t,e){e&&e.length&&2==e.length||(e=[.25,.75]);t=this.quantile(t,e);for(var i=[],s=0;s<e.length;s++)i.push(this.qnorm(e[s]));var a=this.diff(t),r=this.diff(i),n=a[0]/r[0];return{slope:n,intercept:t[0]-n*i[0]}},this.qqnorm=function(t,e){for(var i=[],s=[],a=[],r=0;r<t.length;r++)this.isNumber(t[r])&&(i.push(t[r]),s.push(e[r]),a.push(r));var n=this.ppoints(i.length),o=a.sort((function(t,e){return i[t]-i[e]})),h=i.sort((function(t,e){return t-e})),l=[];for(r=0;r<n.length;r++)l.push(this.qnorm(n[r]));var c=[];for(r=0;r<o.length;r++)c.push(s[o[r]]);return{l:this.qqline(h),i:c,x:l,y:h}},this.ppoints=function(t){for(var e=t<=10?3/8:.5,i=[],s=0;s<t;s++)i.push((s+1-e)/(t+1-2*e));return i},this.jitterData=function(t,e,i){if(t.length<2)return t;e||(e=1);var s=this.range(t),a=this.diff(s)[0];if(0==a&&(a=Math.abs(s[0])),0==a&&(a=1),null==i){for(var r=[],n=3-Math.floor(Math.log10(a)),o=0;o<t.length;o++)r.push(Number(t[o].toFixed(n)));r=this.unique(r.sort((function(t,e){return t-e})));var h=this.diff(r);h=h.length?this.min(h):0!=r[0]?r[0]/10:a/10,i=e/5*Math.abs(h)}else 0==i&&(i=e*(a/50));this.randomSeed=8;var l=this.runif(t.length,-i,i);for(o=0;o<l.length;o++)l[o]+=t[o];return l},this.bezierCalculatePoints=function(t,e){var i=t[0][0],s=t[0][1];return[i+(t[1][0]-i)*e,s+(t[1][1]-s)*e]},this.deCasteljau=function(t,e){if(1===e)return t[t.length-1];if(0===e)return t[0];if(1==t.length)return t[0];for(var i=[],s=1,a=t.length;s<a;s++)i.push(this.bezierCalculatePoints([t[s-1],t[s]],e));return this.deCasteljau(i,e)},this.divideBezierCurve=function(t,e,i,s){if(s=s||[],(i=i||[]).push(t[0]),s.push(t[t.length-1]),1===t.length)return[i,s];for(var a=[],r=1,n=t.length;r<n;r++)a.push(this.bezierCalculatePoints([t[r-1],t[r]],e));return this.divideBezierCurve(a,e,i,s)},this.centroid=function(t){var e=[];if(!t||t.length<2)return[0,0];if(t.length<3||t.length%2)return[t[0],t[1]];for(;t.length>1;)e.push([t.shift(),t.shift()]);return e.reduce((function(t,i){return[t[0]+i[0]/e.length,t[1]+i[1]/e.length]}),[0,0])},this.centroidArea=function(t){var e=this.cloneObject(t);return e.shift(),this.centroid(e)},this.prufer=function(t){var e=[],i=Array.apply(null,Array(t.length+2)).map((function(t,e){return e})),s=Array.apply(null,Array(1*i.length)).map((function(){return 1}));t.map((function(t){s[t]++}));for(var a=0;a<t.length;a++)for(var r=0;r<i.length;r++)if(1===s[i[r]]){e.push([t[a],i[r]]),s[t[a]]--,s[i[r]]--;break}var n=i.filter((function(t){return 1===s[t]}));return e.push(n),e},this.probabilityOfZ=function(t){var e,i,s;return i=0==t?0:(e=.5*Math.abs(t))>3?1:e<1?((((((((.000124818987*(s=e*e)-.001075204047)*s+.005198775019)*s-.019198292004)*s+.059054035642)*s-.151968751364)*s+.319152932694)*s-.5319230073)*s+.797884560593)*e*2:(((((((((((((-45255659e-12*(e-=2)+.00015252929)*e-19538132e-12)*e-.000676904986)*e+.001390604284)*e-.00079462082)*e-.002034254874)*e+.006549791214)*e-.010557625006)*e+.011630447319)*e-.009279453341)*e+.005353579108)*e-.002141268741)*e+.000535310849)*e+.999936657524,t>0?.5*(i+1):.5*(1-i)},this.criticalNormalZ=function(t){var e=-6,i=6,s=0;for(t<0&&(t=0),t>1&&(t=1);i-e>1e-6;)this.probabilityOfZ(s)>t?i=s:e=s,s=.5*(i+e);return s},this.kaplanMeier=function(t,e){var i=this;function s(t,e){return t-e}for(var a={times:[],events:[]},r=0;r<t.length;r++)isNaN(t[r])||(a.times.push(t[r]),this.invertCensored?a.events.push(isNaN(e[r])?1:e[r]?0:1):a.events.push(isNaN(e[r])?0:e[r]));t=a.times,e=a.events;var n=this.unique(t).sort(s),o=new Array(n.length),h=new Array(n.length),l=new Array(n.length),c=new Array(n.length),d=new Array(n.length),p=new Array(n.length),g=new Array(n.length),u=0;e=function(t,e){return firstSecond=i.zip(t,e),firstSecond.sort((function(t,e){return t[1]-e[1]})),i.unzip(firstSecond,0)}(e,t),t.sort(s);for(var m=0;m<n.length;m++){d[m]=t.length,p[m]=0,g[m]=0;for(r=0;r<t.length&&t[r]==n[m];r++)p[m]+=e[r],g[m]+=!e[r];var f=r;o[m]=(1-p[m]/d[m])*(0==m?1:o[m-1]),u+=p[m]/(d[m]*(d[m]-p[m])),h[m]=Math.sqrt(u)*o[m],l[m]=Math.sqrt(u),c[m]=Math.sqrt(u)/Math.log(o[m]),e=e.slice(f),t=t.slice(f)}var y=this.kaplanMeierConfidence(o,"log"==this.confidenceIntervalType?l:"loglog"==this.confidenceIntervalType?c:h);return{time:n,nAtRisk:d,nEvents:p,nCensored:g,kaplanMeier:o,greenwoodSE:h,greenwoodSELog:l,greenwoodSELogLog:c,lowerLimit:y[0],upperLimit:y[1]}},this.kaplanMeierConfidence=function(t,e){for(var i=this.criticalNormalZ(this.confidenceLevel),s=t.length,a=new Array(s),r=new Array(s),n=0;n<s;n++){var o=t[n];"log"==this.confidenceIntervalType&&(o=Math.log(o)),"loglog"==this.confidenceIntervalType&&(o=Math.log(-Math.log(o))),a[n]=o-i*e[n],r[n]=o+i*e[n],"log"==this.confidenceIntervalType&&(a[n]=Math.exp(a[n]),r[n]=Math.exp(r[n])),"loglog"==this.confidenceIntervalType&&(a[n]=Math.exp(-Math.exp(a[n])),r[n]=Math.exp(-Math.exp(r[n]))),a[n]=Math.max(0,a[n]),r[n]=Math.min(1,r[n])}return[a,r]},this.getD3Sankey=function(){var t=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},e=function(t,e){var i,s=0,a=t.length,r=-1;if(null==e)for(;++r<a;)(i=+t[r])&&(s+=i);else for(;++r<a;)(i=+e(t[r],r,t))&&(s+=i);return s},i=function(t,e){return e-=t=+t,function(i){return t+e*i}},s="$";function a(){}function r(t,e){var i=new a;if(t instanceof a)t.each((function(t,e){i.set(e,t)}));else if(Array.isArray(t)){var s,r=-1,n=t.length;if(null==e)for(;++r<n;)i.set(r,t[r]);else for(;++r<n;)i.set(e(s=t[r],r,t),s)}else if(t)for(var o in t)i.set(o,t[o]);return i}a.prototype=r.prototype={constructor:a,has:function(t){return s+t in this},get:function(t){return this[s+t]},set:function(t,e){return this[s+t]=e,this},remove:function(t){var e=s+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===s&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===s&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===s&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===s&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===s&&++t;return t},empty:function(){for(var t in this)if(t[0]===s)return!1;return!0},each:function(t){for(var e in this)e[0]===s&&t(this[e],e.slice(1),this)}};var n=function(){var t,e,i,s=[],a=[];function n(i,a,o,h){if(a>=s.length)return null!=e?e(i):null!=t?i.sort(t):i;for(var l,c,d,p=-1,g=i.length,u=s[a++],m=r(),f=o();++p<g;)(d=m.get(l=u(c=i[p])+""))?d.push(c):m.set(l,[c]);return m.each((function(t,e){h(f,e,n(t,a,o,h))})),f}return i={object:function(t){return n(t,0,o,h)},map:function(t){return n(t,0,l,c)},entries:function(t){return function t(i,r){if(++r>s.length)return i;var n,o=a[r-1];return null!=e&&r>=s.length?n=i.entries():(n=[],i.each((function(e,i){n.push({key:i,values:t(e,r)})}))),null!=o?n.sort((function(t,e){return o(t.key,e.key)})):n}(n(t,0,l,c),0)},key:function(t){return s.push(t),i},sortKeys:function(t){return a[s.length-1]=t,i},sortValues:function(e){return t=e,i},rollup:function(t){return e=t,i}}};function o(){return{}}function h(t,e,i){t[e]=i}function l(){return r()}function c(t,e,i){t.set(e,i)}var d={},p=12,g=5,u=[1,1],m=[],f=[];function y(){f.forEach((function(t){var e=t.source.x+t.source.dx,s=t.target.x,a=i(e,s),r=a(.5),n=a(.5),o=t.source.y+t.sy+t.dy/2,h=t.target.y+t.ty+t.dy/2;t.bezier=[[e,r,n,s],[o,o,h,h]]}))}function x(){function t(t,e){return t.source.y-e.source.y}function e(t,e){return t.target.y-e.target.y}m.forEach((function(i){i.sourceLinks.sort(e),i.targetLinks.sort(t)})),m.forEach((function(t){var e=0,i=0;t.sourceLinks.forEach((function(t){t.sy=e,e+=t.dy})),t.targetLinks.forEach((function(t){t.ty=i,i+=t.dy}))}))}function v(t){return t.y+t.dy/2}function b(t){return t.value}return d.nodeWidth=function(t){return arguments.length?(p=+t,d):p},d.nodePadding=function(t){return arguments.length?(g=+t,d):g},d.nodes=function(t){return arguments.length?(m=t,d):m},d.links=function(t){return arguments.length?(f=t,d):f},d.size=function(t){return arguments.length?(u=t,d):u},d.layout=function(i){return m.forEach((function(t){t.sourceLinks=[],t.targetLinks=[]})),f.forEach((function(t){var e=t.source,i=t.target;"number"==typeof e&&(e=t.source=m[t.source]),"number"==typeof i&&(i=t.target=m[t.target]),e.sourceLinks.push(t),i.targetLinks.push(t)})),m.forEach((function(t){t.value=Math.max(e(t.sourceLinks,b),e(t.targetLinks,b))})),function(){var t,e=m,i=0;for(;e.length;)t=[],e.forEach((function(e){e.x=i,e.breadth=i,e.dx=p,e.sourceLinks.forEach((function(e){t.push(e.target)}))})),e=t,++i;(function(t){m.forEach((function(e){e.sourceLinks.length||(e.x=t-1)}))})(i),function(t){m.forEach((function(e){e.x*=t}))}((u[0]-p)/(i-1))}(),function(i){var s=n().key((function(t){return t.x})).sortKeys(t).entries(m).map((function(t){return t.values}));a=function(t,e){var i,s,a=-1,r=t.length;if(null==e){for(;++a<r;)if(null!=(s=t[a])&&s>=s){i=s;break}for(;++a<r;)null!=(s=t[a])&&i>s&&(i=s)}else{for(;++a<r;)if(null!=(s=e(t[a],a,t))&&s>=s){i=s;break}for(;++a<r;)null!=(s=e(t[a],a,t))&&i>s&&(i=s)}return i}(s,(function(t){return(u[1]-(t.length-1)*g)/e(t,b)})),s.forEach((function(t){t.forEach((function(t,e){t.y=e,t.dy=t.value*a}))})),f.forEach((function(t){t.dy=t.value*a})),l();var a;for(var r=1;i>0;--i)h(r*=.99),l(),o(r),l();function o(t){function i(t){return v(t.source)*t.value}s.forEach((function(s,a){s.forEach((function(s){if(s.targetLinks.length){var a=e(s.targetLinks,i)/e(s.targetLinks,b);s.y+=(a-v(s))*t}}))}))}function h(t){function i(t){return v(t.target)*t.value}s.slice().reverse().forEach((function(s){s.forEach((function(s){if(s.sourceLinks.length){var a=e(s.sourceLinks,i)/e(s.sourceLinks,b);s.y+=(a-v(s))*t}}))}))}function l(){s.forEach((function(t){var e,i,s,a=0,r=t.length;for(t.sort(c),s=0;s<r;++s)(i=a-(e=t[s]).y)>0&&(e.y+=i),a=e.y+e.dy+g;if((i=a-g-u[1])>0)for(a=e.y-=i,s=r-2;s>=0;--s)(i=(e=t[s]).y+e.dy+g-a)>0&&(e.y-=i),a=e.y}))}function c(t,e){return t.y-e.y}}(i),x(),y(),d},d.relayout=function(){return x(),y(),d},d.link=function(){var t=.5;function e(e){var s=e.source.x+e.source.dx,a=e.target.x,r=i(s,a),n=r(t),o=r(1-t),h=e.source.y+e.sy+e.dy/2,l=e.target.y+e.ty+e.dy/2;return"M"+s+","+h+"C"+n+","+h+" "+o+","+l+" "+a+","+l}return e.curvature=function(i){return arguments.length?(t=+i,e):t},e},d},this.setSankey=function(){var t=this.getD3Sankey();t.nodeWidth(this.sankeyNodeWidth),t.nodePadding(this.margin),t.size([this.x-8*this.margin,this.y-4*this.margin]),t.nodes(this.data.sankey.nodes),t.links(this.data.sankey.links),t.layout(this.sankeyIterations),this.data.sankey.object=t},this.getD3Tree=function(){var t=this,e=function(t,e,i){var s=i/(e.i-t.i);e.c-=s,e.s+=i,t.c+=s,e.z+=i,e.m+=i},i=function(t,e,i){return t.a.parent===e.parent?t.a:i},s=function(t){var e=t.children;return e?e[0]:t.t},a=function(t){var e=t.children;return e?e[e.length-1]:t.t},r=function(t,e){return t.parent===e.parent?1:2},n=1,o=1,h=null,l=function(t){t.data=t.data.data},c=function(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)},d=function(t,e){var i,s,a,r,n,o=new p(t),h=+t.value&&(o.value=t.value),l=[o];for(null==e&&(e=function(t){return t.children});i=l.pop();)if(h&&(i.value=+i.data.value),(a=e(i.data))&&(n=a.length))for(i.children=new Array(n),r=n-1;r>=0;--r)l.push(s=i.children[r]=new p(a[r])),s.parent=i,s.depth=i.depth+1;return o.eachBefore(c)},p=function(e){this.data=e,this.depth=0,this.height=0,this.parent=null,null==this.nid&&(this.id=t.treeNodeId++)};p.prototype=d.prototype={constructor:p,count:function(){return this.eachAfter(count)},each:function(t){var e,i,s,a,r=this,n=[r];do{for(e=n.reverse(),n=[];r=e.pop();)if(t(r),i=r.children)for(s=0,a=i.length;s<a;++s)n.push(i[s])}while(n.length);return this},eachAfter:function(t){for(var e,i,s,a=this,r=[a],n=[];a=r.pop();)if(n.push(a),e=a.children)for(i=0,s=e.length;i<s;++i)r.push(e[i]);for(;a=n.pop();)t(a);return this},eachBefore:function(t){for(var e,i,s=this,a=[s];s=a.pop();)if(t(s),e=s.children)for(i=e.length-1;i>=0;--i)a.push(e[i]);return this},sum:function(t){return this.eachAfter((function(e){for(var i=+t(e.data)||0,s=e.children,a=s&&s.length;--a>=0;)i+=s[a].value;e.value=i}))},sort:function(t){return this.eachBefore((function(e){e.children&&e.children.sort(t)}))},path:function(t){for(var e=this,i=function(t,e){if(t===e)return t;var i=t.ancestors(),s=e.ancestors(),a=null;for(t=i.pop(),e=s.pop();t===e;)a=t,t=i.pop(),e=s.pop();return a}(e,t),s=[e];e!==i;)e=e.parent,s.push(e);for(var a=s.length;t!==i;)s.splice(a,0,t),t=t.parent;return s},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){var t=[];return this.each((function(e){t.push(e)})),t},leaves:function(){var t=[];return this.eachBefore((function(e){e.children||t.push(e)})),t},links:function(){var t=this,e=[];return t.each((function(i){i!==t&&e.push({source:i.parent,target:i})})),e},copy:function(){return d(this).eachBefore(l)}};var g=function(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e};g.prototype=Object.create(p.prototype);function u(t){var e=function(t){for(var e,i,s,a,r,n=new g(t,0),o=[n];e=o.pop();)if(s=e._.children)for(e.children=new Array(r=s.length),a=r-1;a>=0;--a)o.push(i=e.children[a]=new g(s[a],a)),i.parent=e;return(n.parent=new g(null,0)).children=[n],n}(t);if(e.eachAfter(m),e.parent.m=-e.z,e.eachBefore(f),h)t.eachBefore(y);else{var i=t,s=t,a=t;t.eachBefore((function(t){t.x<i.x&&(i=t),t.x>s.x&&(s=t),t.depth>a.depth&&(a=t)}));var l=i===s?1:r(i,s)/2,c=l-i.x,d=n/(s.x+l+c),p=o/(a.depth||1);t.eachBefore((function(t){t.x=(t.x+c)*d,t.y=t.depth*p}))}return t}function m(t){var n=t.children,o=t.parent.children,h=t.i?o[t.i-1]:null;if(n){!function(t){for(var e,i=0,s=0,a=t.children,r=a.length;--r>=0;)(e=a[r]).z+=i,e.m+=i,i+=e.s+(s+=e.c)}(t);var l=(n[0].z+n[n.length-1].z)/2;h?(t.z=h.z+r(t._,h._),t.m=t.z-l):t.z=l}else h&&(t.z=h.z+r(t._,h._));t.parent.A=function(t,n,o){if(n){for(var h,l=t,c=t,d=n,p=l.parent.children[0],g=l.m,u=c.m,m=d.m,f=p.m;d=a(d),l=s(l),d&&l;)p=s(p),(c=a(c)).a=t,(h=d.z+m-l.z-g+r(d._,l._))>0&&(e(i(d,t,o),t,h),g+=h,u+=h),m+=d.m,g+=l.m,f+=p.m,u+=c.m;d&&!a(c)&&(c.t=d,c.m+=m-u),l&&!s(p)&&(p.t=l,p.m+=g-f,o=t)}return o}(t,h,t.parent.A||o[0])}function f(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function y(t){t.x*=n,t.y=t.depth*o}return u.separation=function(t){return arguments.length?(r=t,u):r},u.size=function(t){return arguments.length?(h=!1,n=+t[0],o=+t[1],u):h?null:[n,o]},u.nodeSize=function(t){return arguments.length?(h=!0,n=+t[0],o=+t[1],u):h?[n,o]:null},u.setTree=function(t,e){return d(t,e)},u.collapse=function(t){u.collapseTree(t),u.update(t)},u.expand=function(t){u.expandTree(t),u.update(t)},u.collapseTree=function(t){t.children&&(t._children=t.children,t._children.forEach(u.collapseTree),t.children=null)},u.expandTree=function(t){t._children&&(t.children=t._children,t.children.forEach(u.expandTree),delete t._children)},u},this.setTree=function(){var t=[],e=this.isDOE?6*this.margin:0;t=this.treeCircular?this.x>this.y?[360,this.y/2]:[360,this.x/2]:["vertical"==this.graphOrientation?this.x-e:this.y,"vertical"==this.graphOrientation?this.y:this.x-e];this.data.tree.object=this.treeCircular?this.getD3Tree().size(t).separation((function(t,e){return(t.parent==e.parent?1:2)/t.depth})):this.getD3Tree().size(t),this.data.tree.root||(this.data.tree.root=this.getD3Tree().setTree(this.data.tree.data,(function(t){return t.children}))),this.data.tree.plot=this.data.tree.object(this.data.tree.root),this.data.tree.plot.size=t},this.getD3CirclePack=function(){var t=this,e=function(t){t.data=t.data.data},i=function(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)},s=function(t,e){var s,r,n,o,h,l=new a(t),c=+t.value&&(l.value=t.value),d=[l];for(null==e&&(e=function(t){return t.children});s=d.pop();)if(c&&(s.value=+s.data.value),(n=e(s.data))&&(h=n.length))for(s.children=new Array(h),o=h-1;o>=0;--o)d.push(r=s.children[o]=new a(n[o])),r.parent=s,r.depth=s.depth+1;return l.eachBefore(i)},a=function(e){this.data=e,this.depth=0,this.height=0,this.parent=null,null==this.nid&&(this.id=t.treeNodeId++)};a.prototype=s.prototype={constructor:a,count:function(){return this.eachAfter(count)},each:function(t){var e,i,s,a,r=this,n=[r];do{for(e=n.reverse(),n=[];r=e.pop();)if(t(r),i=r.children)for(s=0,a=i.length;s<a;++s)n.push(i[s])}while(n.length);return this},eachAfter:function(t){for(var e,i,s,a=this,r=[a],n=[];a=r.pop();)if(n.push(a),e=a.children)for(i=0,s=e.length;i<s;++i)r.push(e[i]);for(;a=n.pop();)t(a);return this},eachBefore:function(t){for(var e,i,s=this,a=[s];s=a.pop();)if(t(s),e=s.children)for(i=e.length-1;i>=0;--i)a.push(e[i]);return this},sum:function(t){return this.eachAfter((function(e){for(var i=+t(e.data)||0,s=e.children,a=s&&s.length;--a>=0;)i+=s[a].value;e.value=i}))},sort:function(t){return this.eachBefore((function(e){e.children&&e.children.sort(t)}))},path:function(t){for(var e=this,i=function(t,e){if(t===e)return t;var i=t.ancestors(),s=e.ancestors(),a=null;for(t=i.pop(),e=s.pop();t===e;)a=t,t=i.pop(),e=s.pop();return a}(e,t),s=[e];e!==i;)e=e.parent,s.push(e);for(var a=s.length;t!==i;)s.splice(a,0,t),t=t.parent;return s},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){var t=[];return this.each((function(e){t.push(e)})),t},leaves:function(){var t=[];return this.eachBefore((function(e){e.children||t.push(e)})),t},links:function(){var t=this,e=[];return t.each((function(i){i!==t&&e.push({source:i.parent,target:i})})),e},copy:function(){return s(this).eachBefore(e)}};var r=null,n=1,o=1,h=function(t){this._=t,this.next=null},l=function(t){return d(function(t){for(var e=(t=t.slice()).length,i=null,s=i;e;){var a=new h(t[e-1]);s=s?s.next=a:i=a,t[void 0]=t[--e]}return{head:i,tail:s}}(t),[])},c=function(t,e){var i=e.x-t.x,s=e.y-t.y,a=t.r-e.r;return a*a+1e-6>i*i+s*s},d=function(t,e){var i,s,a,r=null,n=t.head;switch(e.length){case 1:i=p(e[0]);break;case 2:i=g(e[0],e[1]);break;case 3:i=u(e[0],e[1],e[2])}for(;n;)a=n._,s=n.next,i&&c(i,a)?r=n:(r?(t.tail=r,r.next=null):t.head=t.tail=null,e.push(a),i=d(t,e),e.pop(),t.head?(n.next=t.head,t.head=n):(n.next=null,t.head=t.tail=n),(r=t.tail).next=s),n=s;return t.tail=r,i},p=function(t){return{x:t.x,y:t.y,r:t.r}},g=function(t,e){var i=t.x,s=t.y,a=t.r,r=e.x,n=e.y,o=e.r,h=r-i,l=n-s,c=o-a,d=Math.sqrt(h*h+l*l);return{x:(i+r+h/d*c)/2,y:(s+n+l/d*c)/2,r:(d+a+o)/2}},u=function(t,e,i){var s=t.x,a=t.y,r=t.r,n=e.x,o=e.y,h=e.r,l=i.x,c=i.y,d=i.r,p=2*(s-n),g=2*(a-o),u=2*(h-r),m=s*s+a*a-r*r-n*n-o*o+h*h,f=2*(s-l),y=2*(a-c),x=2*(d-r),v=s*s+a*a-r*r-l*l-c*c+d*d,b=f*g-p*y,A=(g*v-y*m)/b-s,w=(y*u-g*x)/b,C=(f*m-p*v)/b-a,T=(p*x-f*u)/b,S=w*w+T*T-1,M=2*(A*w+C*T+r),D=A*A+C*C-r*r,k=(-M-Math.sqrt(M*M-4*S*D))/(2*S);return{x:A+w*k+s,y:C+T*k+a,r:k}},m=function(t,e,i){var s=t.x,a=t.y,r=e.r+i.r,n=t.r+i.r,o=e.x-s,h=e.y-a,l=o*o+h*h;if(l){var c=.5+((n*=n)-(r*=r))/(2*l),d=Math.sqrt(Math.max(0,2*r*(n+l)-(n-=l)*n-r*r))/(2*l);i.x=s+c*o+d*h,i.y=a+c*h-d*o}else i.x=s+n,i.y=a},f=function(t,e){var i=e.x-t.x,s=e.y-t.y,a=t.r+e.r;return a*a-1e-6>i*i+s*s},y=function(t,e,i){var s=t._,a=t.next._,r=s.r+a.r,n=(s.x*a.r+a.x*s.r)/r-e,o=(s.y*a.r+a.y*s.r)/r-i;return n*n+o*o},x=function(t){this._=t,this.next=null,this.previous=null},v=function(t){if(!(i=t.length))return 0;var e,i,s=t[0];if(s.x=0,s.y=0,!(i>1))return s.r;var a=t[1];if(s.x=-a.r,a.x=s.r,a.y=0,!(i>2))return s.r+a.r;m(a,s,e=t[2]);var r,n,o,h,c,d,p=s.r*s.r,g=a.r*a.r,u=e.r*e.r,v=p+g+u,b=p*s.x+g*a.x+u*e.x,A=p*s.y+g*a.y+u*e.y;s=new x(s),a=new x(a),e=new x(e),s.next=e.previous=a,a.next=s.previous=e,e.next=a.previous=s;t:for(var w=3;w<i;++w){m(s._,a._,e=t[w]),e=new x(e),o=a.next,h=s.previous,c=a._.r,d=s._.r;do{if(c<=d){if(f(o._,e._)){a=o,s.next=a,a.previous=s,--w;continue t}c+=o._.r,o=o.next}else{if(f(h._,e._)){(s=h).next=a,a.previous=s,--w;continue t}d+=h._.r,h=h.previous}}while(o!==h.next);for(e.previous=s,e.next=a,s.next=a.previous=a=e,v+=u=e._.r*e._.r,b+=u*e._.x,A+=u*e._.y,p=y(s,r=b/v,n=A/v);(e=e.next)!==a;)(u=y(e,r,n))<p&&(s=e,p=u);a=s.next}for(s=[a._],e=a;(e=e.next)!==a;)s.push(e._);e=l(s);for(w=0;w<i;++w)(s=t[w]).x-=e.x,s.y-=e.y;return e.r},b=function(t){if("function"!=typeof t)throw new Error;return t},A=function(){return 0},w=function(t){return function(){return t}},C=function(t){return Math.sqrt(t.value)},T=function(t){return null==t?null:b(t)},S=function(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}},M=function(t,e){return function(i){if(s=i.children){var s,a,r,n=s.length,o=t(i)*e||0;if(o)for(a=0;a<n;++a)s[a].r+=o;if(r=v(s),o)for(a=0;a<n;++a)s[a].r-=o;i.r=r+o}}},D=function(t){return function(e){var i=e.parent;e.r*=t,i&&(e.x=i.x+t*e.x,e.y=i.y+t*e.y)}},k=A;function L(t){return t.x=n/2,t.y=o/2,r?t.eachBefore(S(r)).eachAfter(M(k,.5)).eachBefore(D(1)):t.eachBefore(S(C)).eachAfter(M(A,1)).eachAfter(M(k,t.r/Math.min(n,o))).eachBefore(D(Math.min(n,o)/(2*t.r))),t}return L.radius=function(t){return arguments.length?(r=T(t),L):r},L.size=function(t){return arguments.length?(n=+t[0],o=+t[1],L):[n,o]},L.padding=function(t){return arguments.length?(k="function"==typeof t?t:w(+t),L):k},L.setPack=function(t){return s(t).sum((function(t){return t.size})).sort((function(t,e){return e.value-t.value}))},L},this.setCirclePack=function(){Math.max(this.top,this.right);var t=this.width-(this.right+this.left+this.marginLeft+this.marginRight),e=this.height-(this.top+this.bottom+this.marginTop+this.marginBottom),i=t>e?e:t;this.data.bubble.object=this.getD3CirclePack().size([i,i]).padding(2),this.data.bubble.root||(this.data.bubble.root=this.getD3CirclePack().setPack(this.data.bubble.data)),this.data.bubble.plot=this.data.bubble.object(this.data.bubble.root),this.data.bubble.plot.diameter=i},this.getD3Contour=function(){var t=Math.sqrt(50),e=Math.sqrt(10),i=Math.sqrt(2),s=function(s,a,r){var n=(a-s)/Math.max(0,r),o=Math.floor(Math.log(n)/Math.LN10),h=n/Math.pow(10,o);return o>=0?(h>=t?10:h>=e?5:h>=i?2:1)*Math.pow(10,o):-Math.pow(10,-o)/(h>=t?10:h>=e?5:h>=i?2:1)},a=function(s,a,r){var n=Math.abs(a-s)/Math.max(0,r),o=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)),h=n/o;return h>=t?o*=10:h>=e?o*=5:h>=i&&(o*=2),a<s?-o:o},r=function(t){return t[0]},n=function(t){return t[1]},o=function(){return 1},h=function(t,e,i){for(var s=t.width,a=t.height,r=1+(i<<1),n=0;n<a;++n)for(var o=0,h=0;o<s+i;++o)o<s&&(h+=t.data[o+n*s]),o>=i&&(o>=r&&(h-=t.data[o-r+n*s]),e.data[o-i+n*s]=h/Math.min(o+1,s-1+r-o,r))},l=function(t,e,i){for(var s=t.width,a=t.height,r=1+(i<<1),n=0;n<s;++n)for(var o=0,h=0;o<a+i;++o)o<a&&(h+=t.data[n+o*s]),o>=i&&(o>=r&&(h-=t.data[n+(o-r)*s]),e.data[n+(o-i)*s]=h/Math.min(o+1,a-1+r-o,r))},c=Array.prototype.slice,d=function(t,e){return t-e},p=function(t){return function(){return t}},g=function(t,e){for(var i,s=-1,a=e.length;++s<a;)if(i=u(t,e[s]))return i;return 0},u=function(t,e){for(var i=e[0],s=e[1],a=-1,r=0,n=t.length,o=n-1;r<n;o=r++){var h=t[r],l=h[0],c=h[1],d=t[o],p=d[0],g=d[1];if(m(h,d,e))return 0;c>s!=g>s&&i<(p-l)*(s-c)/(g-c)+l&&(a=-a)}return a},m=function(t,e,i){var s;return f(t,e,i)&&y(t[s=+(t[0]===e[0])],i[s],e[s])},f=function(t,e,i){return(e[0]-t[0])*(i[1]-t[1])==(i[0]-t[0])*(e[1]-t[1])},y=function(t,e,i){return t<=e&&e<=i||i<=e&&e<=t},x=function(){},v=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];return function(){var t=1,e=1,i=function(t){return Math.ceil(Math.log(function(t,e){let i=0;if(void 0===e)for(let e in t){let s=t[e];null!=s&&(s=+s)>=s&&++i}else{let s=-1;for(let a in t){let r=t[a];null!=(r=e(r,++s,t))&&(r=+r)>=r&&++i}}return i}(t))/Math.LN2)+1},u=function(t){var e=i(t);if(Array.isArray(e))e=e.slice().sort(d);else{const i=function(t,e){var i,s,a,r=-1,n=t.length;if(1===arguments.length){for(;++r<n;)if(null!=(s=t[r])&&s>=s){i=a=s;break}for(;++r<n;)null!=(s=t[r])&&(i>s&&(i=s),a<s&&(a=s))}else{for(;++r<n;)if(null!=(s=e.call(t,t[r],r))&&s>=s){i=a=s;break}for(;++r<n;)null!=(s=e.call(t,t[r],r))&&(i>s&&(i=s),a<s&&(a=s))}return[i,a]}(t),r=a(i[0],i[1],e);e=function(t,e,i){var a,r,n,o,h=-1;if(i=+i,(t=+t)===(e=+e)&&i>0)return[t];if((a=e<t)&&(r=t,t=e,e=r),0===(o=s(t,e,i))||!isFinite(o))return[];if(o>0){let i=Math.round(t/o),s=Math.round(e/o);for(i*o<t&&++i,s*o>e&&--s,n=new Array(r=s-i+1);++h<r;)n[h]=(i+h)*o}else{o=-o;let i=Math.round(t*o),s=Math.round(e*o);for(i/o<t&&++i,s/o>e&&--s,n=new Array(r=s-i+1);++h<r;)n[h]=(i+h)/o}return a&&n.reverse(),n}(Math.floor(i[0]/r)*r,Math.floor(i[1]/r-1)*r,e)}return e.map((function(e){return b(t,e)}))},m=function(e){return 2*e[0]+e[1]*(t+1)*4},f=function(i,s,a){i.forEach((function(i){var r,n=i[0],o=i[1],h=0|n,l=0|o,c=s[l*t+h];n>0&&n<t&&h===n&&(r=s[l*t+h-1],i[0]=n+(a-r)/(c-r)-.5),o>0&&o<e&&l===o&&(r=s[(l-1)*t+h],i[1]=o+(a-r)/(c-r)-.5)}))},y=f,b=function(t,e){var i=[],s=[];return A(t,e,(function(a){y(a,t,e),function(t){for(var e=0,i=t.length,s=t[i-1][1]*t[0][0]-t[i-1][0]*t[0][1];++e<i;)s+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return s}(a)>0?i.push([a]):s.push(a)})),s.forEach((function(t){for(var e,s=0,a=i.length;s<a;++s)if(-1!==g((e=i[s])[0],t))return void e.push(t)})),{type:"MultiPolygon",value:e,coordinates:i}},A=function(i,s,a){var r,n,o,h,l,c,d=new Array,p=new Array,g=function(t){var e,i,s=[t[0][0]+r,t[0][1]+n],o=[t[1][0]+r,t[1][1]+n],h=m(s),l=m(o);(e=p[h])?(i=d[l])?(delete p[e.end],delete d[i.start],e===i?(e.ring.push(o),a(e.ring)):d[e.start]=p[i.end]={start:e.start,end:i.end,ring:e.ring.concat(i.ring)}):(delete p[e.end],e.ring.push(o),p[e.end=l]=e):(e=d[l])?(i=p[h])?(delete d[e.start],delete p[i.end],e===i?(e.ring.push(o),a(e.ring)):d[i.start]=p[e.end]={start:i.start,end:e.end,ring:i.ring.concat(e.ring)}):(delete d[e.start],e.ring.unshift(s),d[e.start=h]=e):d[h]=p[l]={start:h,end:l,ring:[s,o]}};for(r=n=-1,h=i[0]>=s,v[h<<1].forEach(g);++r<t-1;)o=h,h=i[r+1]>=s,v[o|h<<1].forEach(g);for(v[h<<0].forEach(g);++n<e-1;){for(r=-1,h=i[n*t+t]>=s,l=i[n*t]>=s,v[h<<1|l<<2].forEach(g);++r<t-1;)o=h,h=i[n*t+t+r+1]>=s,c=l,l=i[n*t+r+1]>=s,v[o|h<<1|l<<2|c<<3].forEach(g);v[h|l<<3].forEach(g)}for(r=-1,l=i[n*t]>=s,v[l<<2].forEach(g);++r<t-1;)c=l,l=i[n*t+r+1]>=s,v[l<<2|c<<3].forEach(g);v[l<<3].forEach(g)};return u.contour=b,u.size=function(i){if(!arguments.length)return[t,e];var s=Math.ceil(i[0]),a=Math.ceil(i[1]);if(!(s>0&&a>0))throw new Error("invalid size");return t=s,e=a,u},u.thresholds=function(t){return arguments.length?(i="function"==typeof t?t:Array.isArray(t)?p(c.call(t)):p(t),u):i},u.smooth=function(t){return arguments.length?(y=t?f:x,u):y===f},u.density=function(){var t=r,e=n,i=o,s=960,d=500,g=20,u=2,m=3*g,f=s+2*m>>u,y=d+2*m>>u,x=p(20),v=function(s){var r=new Float32Array(f*y),n=new Float32Array(f*y);s.forEach((function(s,a,n){var o=+t(s,a,n)+m>>u,h=+e(s,a,n)+m>>u,l=+i(s,a,n);o>=0&&o<f&&h>=0&&h<y&&(r[o+h*f]+=l)})),h({width:f,height:y,data:r},{width:f,height:y,data:n},g>>u),l({width:f,height:y,data:n},{width:f,height:y,data:r},g>>u),h({width:f,height:y,data:r},{width:f,height:y,data:n},g>>u),l({width:f,height:y,data:n},{width:f,height:y,data:r},g>>u),h({width:f,height:y,data:r},{width:f,height:y,data:n},g>>u),l({width:f,height:y,data:n},{width:f,height:y,data:r},g>>u);var o=x(r);if(!Array.isArray(o)){var c=function(t,e){var i,s,a=-1,r=t.length;if(1===arguments.length){for(;++a<r;)if(null!=(s=t[a])&&s>=s){i=s;break}for(;++a<r;)null!=(s=t[a])&&s>i&&(i=s)}else{for(;++a<r;)if(null!=(s=e.call(t,t[a],a))&&s>=s){i=s;break}for(;++a<r;)null!=(s=e.call(t,t[a],a))&&s>i&&(i=s)}return i}(r);o=a(0,c,o),(o=function(t,e,i){t=+t,e=+e,i=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+i;for(var s=-1,a=0|Math.max(0,Math.ceil((e-t)/i)),r=new Array(a);++s<a;)r[s]=t+s*i;return r}(0,Math.floor(c/o)*o,o)).shift()}return[o,[f,y],r,b]},b=function(t){return t.value*=Math.pow(2,-2*u),t.coordinates.forEach(A),t},A=function(t){t.forEach(w)},w=function(t){t.forEach(C)},C=function(t){t[0]=t[0]*Math.pow(2,u)-m,t[1]=t[1]*Math.pow(2,u)-m},T=function(){return f=s+2*(m=3*g)>>u,y=d+2*m>>u,v};return v.x=function(e){return arguments.length?(t="function"==typeof e?e:p(+e),v):t},v.y=function(t){return arguments.length?(e="function"==typeof t?t:p(+t),v):e},v.weight=function(t){return arguments.length?(i="function"==typeof t?t:p(+t),v):i},v.size=function(t){if(!arguments.length)return[s,d];var e=+t[0],i=+t[1];if(!(e>=0&&i>=0))throw new Error("invalid size");return s=e,d=i,T()},v.cellSize=function(t){if(!arguments.length)return 1<<u;if(!((t=+t)>=1))throw new Error("invalid cell size");return u=Math.floor(Math.log(t)/Math.LN2),T()},v.thresholds=function(t){return arguments.length?(x="function"==typeof t?t:Array.isArray(t)?p(c.call(t)):p(t),v):x},v.bandwidth=function(t){if(!arguments.length)return Math.sqrt(g*(g+1));if(!((t=+t)>=0))throw new Error("invalid bandwidth");return g=Math.round((Math.sqrt(4*t*t+1)-1)/2),T()},v},u}},this.circularLayout=function(t,e){var i=this;if(t.length>0){var s,a,r;e||(s=this.x/2,a=this.y/2,r=Math.max(this.x,this.y)),this.calculateCircularLayoutFinalNodePosition(t,s,a,r);var n=function(){i.iteration<=15?(i.updateCircularLayoutNodePositions(t),i.renderNetwork(!1),i.drawNetworkProgressBar("Optimizing ...",i.iteration/15),i.requestAnimationFrame(n)):i.finalizeNetworkLayout("circularLayout")};n()}},this.calculateCircularLayoutFinalNodePosition=function(t,e,i,s){if(this.sizeNodeBy){for(var a=0,r=0;r<t.length;r++){(h=t[r]).hide||(a+=this.nodeSize*this.getNodeEdgePropertyValue(h,!1,"sizeNodeBy")*2+this.nodeSize)}var n=2*Math.PI/a,o=0;for(r=0;r<t.length;r++){var h=t[r];a=this.nodeSize*this.getNodeEdgePropertyValue(h,!1,"sizeNodeBy")*2+this.nodeSize;h.hide||(o+=n*a*.5,h.layout.lastPosition.x=e+s+s*Math.sin(o),h.layout.lastPosition.y=i+s+s*Math.cos(o),h.layout.lastPosition.r=this.networkRadialRadius,h.layout.lastPosition.a=180*o/Math.PI,h.radius=this.networkRadialRadius,h.angle=180*o/Math.PI,o+=n*a*.5)}}else for(n=2*Math.PI/t.length,r=0;r<t.length;r++){(h=t[r]).hide||(h.layout.lastPosition.x=e+s+s*Math.sin(r*n),h.layout.lastPosition.y=i+s+s*Math.cos(r*n),h.layout.lastPosition.r=this.networkRadialRadius,h.layout.lastPosition.a=r*n*180/Math.PI,h.radius=this.networkRadialRadius,h.angle=r*n*180/Math.PI)}},this.updateCircularLayoutNodePositions=function(t){for(var e=.5*Math.atan(this.iteration++/15*10-5)/Math.atan(5)+.5,i=0;i<t.length;i++){var s=t[i].layout,a=s.lastPosition,r=a.a*e,n=a.r*e,o=this.getPolar(this.networkXCenter,this.networkYCenter,n,r);s.position.x=o.x,s.position.y=o.y}this.updateLayoutNodePositions(t)},this.radialLayout=function(t,e){var i=this;if(t&&t.length){this.calculateRadialLayoutFinalNodePosition(e),this.resetRadialLayoutNodePositions(t);var s=function(){i.iteration<15?(i.updateRadialLayoutNodePositions(t),i.renderNetwork(!1),i.drawNetworkProgressBar("Optimizing ...",i.iteration/15),i.requestAnimationFrame(s)):i.finalizeNetworkLayout("radialLayout")};s()}},this.orderRadialLayout=function(t){for(var e=this.data.nodeIndices[t],i=0,s=e;s<this.data.nodes.length;s++)this.data.nodes[s].layout.order=i++;for(s=0;s<e;s++)this.data.nodes[s].layout.order=i++},this.updateRadialLayoutNodePositions=function(t){for(var e=.5*Math.atan(this.iteration++/15*10-5)/Math.atan(5)+.5,i=1-e,s=0;s<t.length;s++){var a=t[s].layout,r=a.lastPosition,n=i*a.angle+e*r.a,o=i*a.radius+e*r.r,h=this.getPolar(this.networkXCenter,this.networkYCenter,o,n);t[s].layout.position.x=h.x,t[s].layout.position.y=h.y}this.updateLayoutNodePositions(t)},this.resetRadialLayoutNodePositions=function(t){for(var e=0;e<t.length;e++){var i=t[e].layout,s=i.lastPosition;0==s.r&&(i.angle=s.a),0==s.r&&(s.a=i.angle);var a=s.a-i.angle;a<0&&(a+=360),a>360&&(a-=360),a>180&&(a-=360),s.a=i.angle+a}},this.calculateRadialLayoutFinalNodePosition=function(t,e){var i=this,s=0,a=[],r=this.data.nodes[this.data.nodeIndices[t]],n=r.layout;if("done"!=n.hierarchy&&!r.hide&&!r.hiddenParent){if(n.children.length>1&&!e){this.orderRadialLayout(t),n.children.sort((function(t,e){var s=i.data.nodes[i.data.nodeIndices[t]].layout,a=i.data.nodes[i.data.nodeIndices[e]].layout;return s.order-a.order}));for(var o=0;o<n.children.length;o++){var h=n.children[o],l=this.data.nodes[this.data.nodeIndices[h]].layout;l.level>n.level&&(this.calculateRadialLayoutFinalNodePosition(h),a.push(l.angle))}if(a.length>0){var c=a.length-1;s=1==a.length?a[0]:a[0]>a[c]?(a[0]+a[c])%360/2:(a[0]+a[c])/2}else this.calculateRadialLayoutFinalNodePosition(t,!0)}else s=this.networkCurrentAngle,this.networkCurrentAngle=this.networkCurrentAngle+this.networkAngleStep;var d=this.networkDepth-1-n.level,p=this.getPolar(this.networkXCenter,this.networkYCenter,this.networkRadialRadius,s),g=this.shortenLine(this.networkXCenter,this.networkYCenter,p.x,p.y,0,this.networkLevelSize*d,"line"),u=this.lineLength(this.networkXCenter,this.networkYCenter,g[2],g[3]);0==n.level&&(s=0,u=0),n.lastPosition.x=g[2],n.lastPosition.y=g[3],n.lastPosition.r=u,n.lastPosition.a=s%360,n.hierarchy="done",n.angle=s}},this.forceDirectedLayout=function(t,e){var i=this;if(t&&t.length){var s=function(){i.subNetworks&&i.networkDisjoint?i.calculateForcedDirectedLayoutDisjoint(t)<.001||i.iteration>=i.maxIterations?i.finalizeNetworkLayout("forceDirectedLayout"):(i.iteration++,i.iteration%2&&i.renderNetwork(!1),i.drawNetworkProgressBar("Optimizing ...",i.iteration/i.maxIterations),i.requestAnimationFrame(s)):i.calculateForcedDirectedLayoutMovement(t,e)/t.length>=.01&&i.iteration<i.maxIterations?(i.iteration++,i.iteration%2&&i.renderNetwork(!1),i.drawNetworkProgressBar("Optimizing ...",i.iteration/i.maxIterations),i.requestAnimationFrame(s)):i.finalizeNetworkLayout("forceDirectedLayout")};s()}},this.calculateForcedDirectedLayoutDisjoint=function(t){var e=1,i=1-Math.pow(.001,1/300),s=1e-6*(Math.random()-.5);this.networkAlphaDisjoint||(this.networkAlphaDisjoint=e),e=this.networkAlphaDisjoint,e+=(0-e)*i;for(var a=this.data.edges.length,r=0;r<1;++r)for(var n=0;n<a;++n){var o=this.data.edges[n],h=o.layout.subnetworks,l=this.nodes[o.id1].layout.subnetworks,c=this.nodes[o.id2].layout.subnetworks,d=c.x+c.vx-l.x-l.vx||s,p=c.y+c.vy-l.y-l.vy||s,g=Math.sqrt(d*d+p*p);d*=g=(g-h.dist)/g*e*h.strn,p*=g,c.vx-=d*h.bias,c.vy-=p*h.bias,l.vx+=d*(1-h.bias),l.vy+=p*(1-h.bias)}this.manyBodyD3()(e);var u=this.data.nodes.length;for(n=0;n<u;++n){(y=this.data.nodes[n].layout.subnetworks).vx+=-y.x*y.strX*e,y.vy+=-y.y*y.strY*e}var m=0,f=0;for(n=0;n<u;++n){m+=(y=this.data.nodes[n].layout.subnetworks).x,f+=y.y}for(m=m/u-.5*this.x,f=f/u-.5*this.y,n=0;n<u;++n){(y=this.data.nodes[n].layout.subnetworks).x-=m,y.y-=f}for(n=0;n<u;++n){var y;null==(y=this.data.nodes[n].layout.subnetworks).fx?y.x+=y.vx*=.6:(y.x=y.fx,y.vx=0),null==y.fy?y.y+=y.vy*=.6:(y.y=y.fy,y.vy=0)}return this.networkAlphaDisjoint=e,this.integrateForceDirectedLayoutDisjoint(t),e},this.integrateForceDirectedLayoutDisjoint=function(t){var e=this.data.nodes.length;if(e)for(;e--;){var i=this.data.nodes[e];!i.fixed&&this.iteration%2&&(i.layout.position.x=i.layout.subnetworks.x,i.layout.position.y=i.layout.subnetworks.y)}this.updateLayoutNodePositions(this.data.nodes)},this.calculateForcedDirectedLayoutMovement=function(t,e){return this.useBarnesHutSimulation||e?(this.accumulateForceDirectedLayoutForces(),this.integrateForceDirectedLayout(t)):(this.setForceDirectedLayoutNodeDisplacement(t),this.integrateForceDirectedLayoutDisplacement(t))},this.integrateForceDirectedLayoutDisplacement=function(t){var e=this.averageForceDirectedLayoutMovement(t),i=t.length;if(i)for(;i--;){var s=t[i];!s.fixed&&this.iteration%2&&(s.layout.prevPosition.x=s.layout.position.x,s.layout.prevPosition.y=s.layout.position.y)}return this.updateLayoutNodePositions(t),e*t.length},this.setForceDirectedLayoutNodeDisplacement=function(t){for(var e={},i=[],s=t.length,a=0;a<s;a++){for(var r=t[a],n=0;n<r.layout.edges.length;n++){var o=r.layout.edges[n],h=o.id1+":"+o.id2;e.hasOwnProperty(h)||(i.push(o),e[h]=!0)}r.fixed||this.iteration||(r.layout.displacement={x:r.x,y:r.y,z:r.z},r.layout.force={x:0,y:0,z:0})}this.calculateForceDirectedLayoutRepulsiveDisplacement(t),this.calculateForceDirectedLayoutAttractiveDisplacement(t,i),this.applyForceDirectedLayoutDisplacement(t)},this.calculateForceDirectedLayoutRepulsiveDisplacement=function(t){for(var e=this,i=t.length,s=Math.sqrt(i*i/i+1),a=function(t){switch(e.repulsiveForceFunction){case"FruchtermanReingold":case"square":return s*s/t;case"cubic":return s*s*s/t;case"Eades":case"log":return s/Math.log(t);case"pow":return s*Math.pow(2,t);case"sqrt":return s/Math.sqrt(t)}},r=0;r<i;r++){var n=t[r],o=n.layout.displacement,h=n.layout.force;if(!n.fixed)for(var l=0;l<i;l++)if(r!=l){var c=t[l].layout.displacement,d=o.x-c.x,p=o.y-c.y,g=o.z-c.z,u=Math.sqrt(d*d+p*p+g*g)+.01,m=a(u);h.x+=d/u*m,h.y+=p/u*m,h.z+=g/u*m}}},this.calculateForceDirectedLayoutAttractiveDisplacement=function(t,e){for(var i=this,s=t.length,a=Math.sqrt(s*s/s+1),r=function(t){switch(i.attractiveForceFunction){case"FruchtermanReingold":case"square":return t*t/a;case"cubic":return t*t*t/a;case"Eades":case"log":return t*Math.log(m);case"pow":return t*Math.pow(2,a);case"sqrt":return t/Math.sqrt(a)}},n=(s=e.length,0);n<s;n++){var o=e[n],h=this.nodes[o.id1],l=this.nodes[o.id2],c=h.layout.displacement,d=l.layout.displacement,p=h.layout.force,g=l.layout.force,u=c.x-d.x,f=c.y-d.y,y=c.z-d.z,x=Math.sqrt(u*u+f*f+y*y)+.01,v=r(x);h.fixed||(p.x-=u/x*v,p.y-=f/x*v,p.z-=y/x*v),l.fixed||(g.x+=u/x*v,g.y+=f/x*v,g.z+=y/x*v)}},this.applyForceDirectedLayoutDisplacement=function(t){for(var e=t.length,i=Math.sqrt(e*e)/10,s=Math.sqrt(e*e/e+1),a=0;a<e;a++){var r=t[a].layout.displacement,n=t[a].layout.force,o=Math.sqrt(r.x*r.x+r.y*r.y+r.z*r.z),h=s*this.networkGravity*o*.01;if(n.x-=h*r.x/o,n.y-=h*r.y/o,n.z-=h*r.z/o,n.x*=this.networkSpeed,n.y*=this.networkSpeed,n.z*=this.networkSpeed,!t[a].fixed){var l=n.x,c=n.y,d=n.z;if((o=Math.sqrt(l*l+c*c+d*d))>0){var p=Math.min(i*this.networkSpeed,o);r.x+=l/o*p,r.y+=c/o*p,r.z+=d/o*p}}}for(a=0;a<e;a++){var g=t[a];r=t[a].layout.displacement;g.layout.position={x:r.x,y:r.y,z:r.z}}},this.accumulateForceDirectedLayoutForces=function(){var t=this.data.nodes,e=this.data.edges,i=t.length;if(i)for(var s=this.barnesHutInsertBodies(t);i--;){var a=t[i];a.fixed||(a.layout.force={x:0,y:0,z:0},this.barnesHutUpdateBodyForce(a,s),this.updateForceDirectedLayoutDragForce(a))}for(i=e.length;i--;)this.updateForceDirectedLayoutSpringForce(e[i]);this.updateLayoutNodePositions(t)},this.barnesHutNewNode=function(){this.barnesHutNodesCache[this.barnesHutNodesCacheCurrent]={body:null,quad0:null,quad1:null,quad2:null,quad3:null,quad4:null,quad5:null,quad6:null,quad7:null,mass:0,massX:0,massY:0,left:0,top:0,bottom:0,right:0,back:0,front:0};var t=this.barnesHutNodesCache[this.barnesHutNodesCacheCurrent];return++this.barnesHutNodesCacheCurrent,t},this.barnesHutInsertBodies=function(t,e){for(var i=this,s=function(t){var s,a,r=function(t,e,i){0===e?t.quad0=i:1===e?t.quad1=i:2===e?t.quad2=i:3===e&&(t.quad3=i)},n=function(t,e){var i=Math.abs(t.x-e.x),s=Math.abs(t.y-e.y),a=Math.abs(t.z-e.z);return i<1e-8&&s<1e-8&&a<1e-8},o={stack:[],popIdx:0,isEmpty:function(){return 0===this.popIdx},push:function(t,e){this.stack[this.popIdx]={node:t,body:e},++this.popIdx},pop:function(){if(this.popIdx>0)return this.stack[--this.popIdx]},reset:function(){this.popIdx=0}};for(o.reset(),o.push(e,t);!o.isEmpty();){var h=o.pop(),l=h.node,c=h.body;if(l.body){var d=l.body;if(l.body=null,n(d.layout.position,c.layout.position)){for(var p=3;p>0&&n(d.layout.position,c.layout.position);){var g=i.random(),u=(l.right-l.left)*g,m=(l.bottom-l.top)*g,f=(l.front-l.back)*g;d.layout.position.x=l.left+u,d.layout.position.y=l.top+m,d.layout.position.z=l.back+f,p-=1}if(0===p&&n(d.layout.position,c.layout.position))return}o.push(l,d),o.push(l,c)}else{var y=c.layout.position.x,x=c.layout.position.y,v=c.layout.position.z;l.mass=l.mass+c.layout.mass,l.massX=l.massX+c.layout.mass*y,l.massY=l.massY+c.layout.mass*x,l.massZ=l.massZ+c.layout.mass*v;var b=0,A=l.left,w=(l.right+A)/2,C=l.top,T=(l.bottom+C)/2,S=l.back,M=(l.front-S)/2;if(this.is3DNetwork){if(y>w){b+=1;var D=A;A=w,w+=w-D}if(x>T){b+=2;var k=C;C=T,T+=T-k}if(v>M){b+=4;var L=S;M=(S=M)+(S-L)}}else y>w&&(b+=1,A=w,w=l.right),x>T&&(b+=2,C=T,T=l.bottom);var I=(s=l,0===(a=b)?s.quad0:1===a?s.quad1:2===a?s.quad2:3===a?s.quad3:null);I?o.push(I,c):((I=i.barnesHutNewNode()).left=A,I.top=C,I.right=w,I.bottom=T,I.back=S,I.front=M,I.body=c,r(l,b,I))}}},a=Number.MAX_VALUE,r=Number.MAX_VALUE,n=Number.MAX_VALUE,o=Number.MIN_VALUE,h=Number.MIN_VALUE,l=Number.MIN_VALUE,c=t.length,d=c;d--;){var p=t[d].layout.position.x,g=t[d].layout.position.y,u=t[d].layout.position.y;p<a&&(a=p),p>o&&(o=p),g<r&&(r=g),g>h&&(h=g),u<n&&(n=u),u>l&&(l=u)}var m=o-a,f=h-r,y=l-n,x=Math.max(m,Math.max(f,y));for(this.is3DNetwork?(o=a+x,h=r+x,l=n+x):m>f?h=r+m:o=a+f,this.barnesHutNodesCacheCurrent=0,(e=this.barnesHutNewNode()).left=a,e.right=o,e.top=r,e.bottom=h,e.back=n,e.from=l,(d=c-1)>=0&&(e.body=t[d]);d--;)s(t[d]);return e},this.barnesHutUpdateBodyForce=function(t,e){var i,s,a,r,n,o=this.barnesHutUpdateQueue,h=0,l=0,c=0,d=1,p=0,g=1;for(o[0]=e;d;){var u=o[p],m=u.body;d-=1,p+=1;var f=m!==t;m&&f?(s=m.layout.position.x-t.layout.position.x,a=m.layout.position.y-t.layout.position.y,r=m.layout.position.z-t.layout.position.z,0===(n=Math.sqrt(s*s+a*a+r*r))&&(s=(this.random()-.5)/50,a=(this.random()-.5)/50,r=(this.random()-.5)/50,n=Math.sqrt(s*s+a*a+r*r)),h+=(i=this.networkRepulsion*m.layout.mass*t.layout.mass/(n*n*n))*s,l+=i*a,c+=i*r):f&&(s=u.massX/u.mass-t.layout.position.x,a=u.massY/u.mass-t.layout.position.y,r=u.massZ/u.mass-t.layout.position.z,0===(n=Math.sqrt(s*s+a*a+r*r))&&(s=(this.random()-.5)/50,a=(this.random()-.5)/50,r=(this.random()-.5)/50,n=Math.sqrt(s*s+a*a+r*r)),(u.right-u.left)/n<this.networkTheta?(h+=(i=this.networkRepulsion*u.mass*t.layout.mass/(n*n*n))*s,l+=i*a,c+=i*r):(u.quad0&&(o[g]=u.quad0,d+=1,g+=1),u.quad1&&(o[g]=u.quad1,d+=1,g+=1),u.quad2&&(o[g]=u.quad2,d+=1,g+=1),u.quad3&&(o[g]=u.quad3,d+=1,g+=1),this.is3DNetwork&&(u.quad4&&(o[g]=u.quad4,d+=1,g+=1),u.quad5&&(o[g]=u.quad5,d+=1,g+=1),u.quad6&&(o[g]=u.quad6,d+=1,g+=1),u.quad7&&(o[g]=u.quad7,d+=1,g+=1))))}t.layout.force.x+=h,t.layout.force.y+=l,t.layout.force.z+=c},this.updateLayoutNodePositions=function(t){for(var e=t.length;e--;)t[e].x=t[e].layout.position.x,t[e].y=t[e].layout.position.y,t[e].z=t[e].layout.position.z},this.updateForceDirectedLayoutSpringForce=function(t){var e=this.data.nodes[this.data.nodeIndices[t.id1]],i=this.data.nodes[this.data.nodeIndices[t.id2]],s=t.layout.length<0?this.networkSpringLength:t.layout.length,a=i.layout.position.x-e.layout.position.x,r=i.layout.position.y-e.layout.position.y,n=Math.sqrt(a*a+r*r);0===n&&(a=(this.random()-.5)/50,r=(this.random()-.5)/50,n=Math.sqrt(a*a+r*r));var o=n-s,h=(!t.layout.coeff||t.layout.coeff<0?this.networkSpringCoeff:t.layout.coeff)*o/n*t.layout.weight;e.layout.force.x+=h*a,e.layout.force.y+=h*r,i.layout.force.x-=h*a,i.layout.force.y-=h*r},this.integrateForceDirectedLayout=function(t){var e=0,i=0,s=0,a=0,r=t.length;if(0===r)return 0;for(var n=0;n<r;++n){var o=t[n],h=this.networkTimeStep/o.layout.mass;o.layout.velocity.x+=h*o.layout.force.x,o.layout.velocity.y+=h*o.layout.force.y;var l=o.layout.velocity.x,c=o.layout.velocity.y,d=Math.sqrt(l*l+c*c);d>1&&(o.layout.velocity.x=l/d,o.layout.velocity.y=c/d),e=this.networkTimeStep*o.layout.velocity.x,s=this.networkTimeStep*o.layout.velocity.y,o.layout.position.x+=e,o.layout.position.y+=s,i+=Math.abs(e),a+=Math.abs(s)}return(i*i+a*a)/r},this.updateForceDirectedLayoutDragForce=function(t){t.layout.force.x-=this.networkDragCoeff*t.layout.velocity.x,t.layout.force.y-=this.networkDragCoeff*t.layout.velocity.y},this.averageForceDirectedLayoutMovement=function(t){for(var e=t.length,i=0,s=0;e--;){var a=t[e],r=a.layout.position,n=a.layout.prevPosition;i+=Math.abs(r.x-n.x),s+=Math.abs(r.y-n.y)}return Math.sqrt(i*i+s*s)/t.length},this.networkBetweenness=function(t,e){for(var i=this,s=[],a=[],r={},n={},o={},h={},l={},c=function(h){for(var l=function(t,e){-1===n[e]&&(n[e]=n[t]+1,s.push(e)),n[e]===n[t]+1&&(o[e]+=o[t],r[e].push(t))},c=function(t){return e?function(t){for(var e=i.nodes[t].layout.edges,s=0;s<e.length;s++){var a=e[s].id1;if(t==a&&l(t,a))return!0}}(t):function(t){for(var e=i.nodes[t].layout.edges,s=0;s<e.length;s++){var a=e[s],r=a.id1==t?a.id2:a.id1;if(l(t,r))return!0}}(t)},d=0;d<t.length;d++)r[t[d].id]=[],n[t[d].id]=-1,o[t[d].id]=0;for(n[h]=0,o[h]=1,s.push(h);s.length;){var p=s.shift();a.push(p),c(p)}},d=function(){for(var e=0;e<t.length;e++)h[t[e].id]=0;for(;a.length;){var i=a.pop(),s=(1+h[i])/o[i],n=r[i];for(e=0;e<n.length;++e){var c=n[e];h[c]+=o[c]*s}i!==g.id&&(l[i]+=h[i])}},p=0;p<t.length;p++){(g=t[p].layout).metrics||(g.metrics={betweenness:-1,closeness:-1,degree:-1,eccentricity:-1},g.edges=this.edgesForNode(this.data.edges,t[p].id)),l[t[p].id]=0}for(p=0;p<t.length;p++){c((g=t[p]).id),d()}for(p=0;p<t.length;p++){var g;(g=t[p].layout).metrics.betweenness=e?l[t[p].id]:l[t[p].id]/2}},this.networkCloseness=function(t,e){for(var i,s=this,a=[],r={},n={},o=function(i){for(var n=function(t,e){-1===r[e]&&(r[e]=r[t]+1,a.push(e))},o=function(t){return e?function(t){for(var e=s.nodes[t].layout.edges,i=0;i<e.length;i++){var a=e[i].id1;if(t==a&&n(t,a))return!0}}(t):function(t){for(var e=s.nodes[t].layout.edges,i=0;i<e.length;i++){var a=e[i],r=a.id1==t?a.id2:a.id1;if(n(t,r))return!0}}(t)},h=0;h<t.length;h++)r[t[h].id]=-1;for(r[i]=0,a.push(i);a.length;){o(a.shift())}},h=function(){var t=Object.keys(r).map((function(t){return r[t]})).filter((function(t){return-1!==t})),e=t.length,s=t.reduce((function(t,e){return t+e}));n[i]=s>0?(e-1)/s:0},l=0;l<t.length;l++){(c=t[l].layout).metrics||(c.metrics={betweenness:-1,closeness:-1,degree:-1,eccentricity:-1},c.edges=this.edgesForNode(this.data.edges,t[l].id)),n[t[l].id]=0}for(l=0;l<t.length;l++){var c=t[l];i=t[l].id,o(c.id),h()}for(l=0;l<t.length;l++){(c=t[l].layout).metrics.closeness=n[t[l].id]}},this.networkEccentricity=function(t,e){for(var i,s=this,a=[],r={},n={},o=function(i){for(var n=function(t,e){-1===r[e]&&(r[e]=r[t]+1,a.push(e))},o=function(t){return e?function(t){for(var e=s.nodes[t].layout.edges,i=0;i<e.length;i++){var a=e[i].id1;if(t==a&&n(t,a))return!0}}(t):function(t){for(var e=s.nodes[t].layout.edges,i=0;i<e.length;i++){var a=e[i],r=a.id1==t?a.id2:a.id1;if(n(t,r))return!0}}(t)},h=0;h<t.length;h++)r[t[h].id]=-1;for(r[i]=0,a.push(i);a.length;){o(a.shift())}},h=function(){var t=0;Object.keys(r).forEach((function(e){var i=r[e];t<i&&(t=i)})),n[i]=t},l=0;l<t.length;l++){(c=t[l].layout).metrics||(c.metrics={betweenness:-1,closeness:-1,degree:-1,eccentricity:-1},c.edges=this.edgesForNode(this.data.edges,t[l].id)),n[t[l].id]=0}for(l=0;l<t.length;l++){var c=t[l];i=t[l].id,o(c.id),h()}for(l=0;l<t.length;l++){(c=t[l].layout).metrics.eccentricity=n[t[l].id]}},this.networkDegree=function(t,e){for(var i=0;i<t.length;i++){var s=t[i].layout,a=s.edges||this.edgesForNode(this.data.edges,t[i].id),r=0;switch(e){case"in":for(i=0;i<a.length;i++)r+=a[i].id1==t[i].id?1:0;break;case"out":for(i=0;i<a.length;i++)r+=a[i].id2==t[i].id?1:0;break;default:r=a.length}s.metrics.degree=r}},this.exposeNetworkMetrics=function(){for(var t=0;t<this.data.nodes.length;t++){var e=this.data.nodes[t];e.layout&&(e.betweenness=e.layout.metrics.betweenness,e.closeness=e.layout.metrics.closeness,e.degree=e.layout.metrics.degree,e.eccentricity=e.layout.metrics.eccentricity)}},this.updateForceDirectedLayoutBoundingBox=function(t,e,i,s,a,r){var n=Number.MAX_VALUE,o=Number.MAX_VALUE,h=Number.MIN_VALUE,l=Number.MIN_VALUE;if(0!==(c=t.length)){for(;c--;){(d=t[c]).hide||(d.fixed?(d.layout.position.x=d.layout.prevPosition.x,d.layout.position.y=d.layout.prevPosition.y):(d.layout.prevPosition.x=d.layout.position.x,d.layout.prevPosition.y=d.layout.position.y),d.layout.position.x<n&&(n=d.layout.position.x,d),d.layout.position.x>h&&(h=d.layout.position.x,d),d.layout.position.y<o&&(o=d.layout.position.y,d),d.layout.position.y>l&&(l=d.layout.position.y,d))}var c,d;e.x1=n,e.x2=h,e.y1=o,e.y2=l}},this.quadtreeD3=function(t,e,i){function s(t,e,i,s){if(isNaN(e)||isNaN(i))return t;var a,r,n,o,h,l,c,d,p,g=t._root,u={data:s},m=t._x0,f=t._y0,y=t._x1,x=t._y1;if(!g)return t._root=u,t;for(;g.length;)if((l=e>=(r=(m+y)/2))?m=r:y=r,(c=i>=(n=(f+x)/2))?f=n:x=n,a=g,!(g=g[d=c<<1|l]))return a[d]=u,t;if(o=+t._x.call(null,g.data),h=+t._y.call(null,g.data),e===o&&i===h)return u.next=g,a?a[d]=u:t._root=u,t;do{a=a?a[d]=new Array(4):t._root=new Array(4),(l=e>=(r=(m+y)/2))?m=r:y=r,(c=i>=(n=(f+x)/2))?f=n:x=n}while((d=c<<1|l)==(p=(h>=n)<<1|o>=r));return a[p]=g,a[d]=u,t}function a(t,e,i,s,a){this.node=t,this.x0=e,this.y0=i,this.x1=s,this.y1=a}function r(t,e,i,s,a,r){this._x=t,this._y=e,this._x0=i,this._y0=s,this._x1=a,this._y1=r,this._root=void 0}function n(t){for(var e={data:t.data},i=e;t=t.next;)i=i.next={data:t.data};return e}var o=r.prototype;o.copy=function(){var t,e,i=new r(this._x,this._y,this._x0,this._y0,this._x1,this._y1),s=this._root;if(!s)return i;if(!s.length)return i._root=n(s),i;for(t=[{source:s,target:i._root=new Array(4)}];s=t.pop();)for(var a=0;a<4;++a)(e=s.source[a])&&(e.length?t.push({source:e,target:s.target[a]=new Array(4)}):s.target[a]=n(e));return i},o.add=function(t){var e=+this._x.call(null,t),i=+this._y.call(null,t);return s(this.cover(e,i),e,i,t)},o.addAll=function(t){var e,i,a,r,n=t.length,o=new Array(n),h=new Array(n),l=1/0,c=1/0,d=-1/0,p=-1/0;for(i=0;i<n;++i)isNaN(a=+this._x.call(null,e=t[i]))||isNaN(r=+this._y.call(null,e))||(o[i]=a,h[i]=r,a<l&&(l=a),a>d&&(d=a),r<c&&(c=r),r>p&&(p=r));for(d<l&&(l=this._x0,d=this._x1),p<c&&(c=this._y0,p=this._y1),this.cover(l,c).cover(d,p),i=0;i<n;++i)s(this,o[i],h[i],t[i]);return this},o.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var i=this._x0,s=this._y0,a=this._x1,r=this._y1;if(isNaN(i))a=(i=Math.floor(t))+1,r=(s=Math.floor(e))+1;else{if(!(i>t||t>a||s>e||e>r))return this;var n,o,h=a-i,l=this._root;switch(o=(e<(s+r)/2)<<1|t<(i+a)/2){case 0:do{(n=new Array(4))[o]=l,l=n}while(r=s+(h*=2),t>(a=i+h)||e>r);break;case 1:do{(n=new Array(4))[o]=l,l=n}while(r=s+(h*=2),(i=a-h)>t||e>r);break;case 2:do{(n=new Array(4))[o]=l,l=n}while(s=r-(h*=2),t>(a=i+h)||s>e);break;case 3:do{(n=new Array(4))[o]=l,l=n}while(s=r-(h*=2),(i=a-h)>t||s>e)}this._root&&this._root.length&&(this._root=l)}return this._x0=i,this._y0=s,this._x1=a,this._y1=r,this},o.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},o.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},o.find=function(t,e,i){var s,r,n,o,h,l,c,d=this._x0,p=this._y0,g=this._x1,u=this._y1,m=[],f=this._root;for(f&&m.push(new a(f,d,p,g,u)),null==i?i=1/0:(d=t-i,p=e-i,g=t+i,u=e+i,i*=i);l=m.pop();)if(!(!(f=l.node)||(r=l.x0)>g||(n=l.y0)>u||(o=l.x1)<d||(h=l.y1)<p))if(f.length){var y=(r+o)/2,x=(n+h)/2;m.push(new a(f[3],y,x,o,h),new a(f[2],r,x,y,h),new a(f[1],y,n,o,x),new a(f[0],r,n,y,x)),(c=(e>=x)<<1|t>=y)&&(l=m[m.length-1],m[m.length-1]=m[m.length-1-c],m[m.length-1-c]=l)}else{var v=t-+this._x.call(null,f.data),b=e-+this._y.call(null,f.data),A=v*v+b*b;if(A<i){var w=Math.sqrt(i=A);d=t-w,p=e-w,g=t+w,u=e+w,s=f.data}}return s},o.remove=function(t){if(isNaN(r=+this._x.call(null,t))||isNaN(n=+this._y.call(null,t)))return this;var e,i,s,a,r,n,o,h,l,c,d,p,g=this._root,u=this._x0,m=this._y0,f=this._x1,y=this._y1;if(!g)return this;if(g.length)for(;;){if((l=r>=(o=(u+f)/2))?u=o:f=o,(c=n>=(h=(m+y)/2))?m=h:y=h,e=g,!(g=g[d=c<<1|l]))return this;if(!g.length)break;(e[d+1&3]||e[d+2&3]||e[d+3&3])&&(i=e,p=d)}for(;g.data!==t;)if(s=g,!(g=g.next))return this;return(a=g.next)&&delete g.next,s?(a?s.next=a:delete s.next,this):e?(a?e[d]=a:delete e[d],(g=e[0]||e[1]||e[2]||e[3])&&g===(e[3]||e[2]||e[1]||e[0])&&!g.length&&(i?i[p]=g:this._root=g),this):(this._root=a,this)},o.removeAll=function(t){for(var e=0,i=t.length;e<i;++e)this.remove(t[e]);return this},o.root=function(){return this._root},o.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},o.visit=function(t){var e,i,s,r,n,o,h=[],l=this._root;for(l&&h.push(new a(l,this._x0,this._y0,this._x1,this._y1));e=h.pop();)if(!t(l=e.node,s=e.x0,r=e.y0,n=e.x1,o=e.y1)&&l.length){var c=(s+n)/2,d=(r+o)/2;(i=l[3])&&h.push(new a(i,c,d,n,o)),(i=l[2])&&h.push(new a(i,s,d,c,o)),(i=l[1])&&h.push(new a(i,c,r,n,d)),(i=l[0])&&h.push(new a(i,s,r,c,d))}return this},o.visitAfter=function(t){var e,i=[],s=[];for(this._root&&i.push(new a(this._root,this._x0,this._y0,this._x1,this._y1));e=i.pop();){var r=e.node;if(r.length){var n,o=e.x0,h=e.y0,l=e.x1,c=e.y1,d=(o+l)/2,p=(h+c)/2;(n=r[0])&&i.push(new a(n,o,h,d,p)),(n=r[1])&&i.push(new a(n,d,h,l,p)),(n=r[2])&&i.push(new a(n,o,p,d,c)),(n=r[3])&&i.push(new a(n,d,p,l,c))}s.push(e)}for(;e=s.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},o.x=function(t){return arguments.length?(this._x=t,this):this._x},o.y=function(t){return arguments.length?(this._y=t,this):this._y};var h=new r(null==e?function(t){return t[0]}:e,null==i?function(t){return t[1]}:i,NaN,NaN,NaN,NaN);return null==t?h:h.addAll(t)},this.manyBodyD3=function(){var t=this;function e(t){return function(){return t}}function i(){return 1e-6*(Math.random()-.5)}function s(t){return t.layout.subnetworks.x}function a(t){return t.layout.subnetworks.y}function r(){if(d){var t,e,i=d.length;for(c=new Array(i),t=0;t<i;++t)e=d[t],c[t]=+e.layout.subnetworks.str}}function n(t){var e,i,s,a,r,n=0,o=0;if(t.length){for(s=a=r=0;r<4;++r)(e=t[r])&&(i=Math.abs(e.value))&&(n+=e.value,o+=i,s+=i*e.x,a+=i*e.y);t.x=s/o,t.y=a/o}else{(e=t).x=e.data.layout.subnetworks.x,e.y=e.data.layout.subnetworks.y;do{n+=c[e.data.layout.subnetworks.index]}while(e=e.next)}t.value=n}function o(t,e,s,a){if(!t.value)return!0;var r=t.x-h.layout.subnetworks.x,n=t.y-h.layout.subnetworks.y,o=a-e,d=r*r+n*n;if(o*o/m<d)return d<u&&(0===r&&(d+=(r=i())*r),0===n&&(d+=(n=i())*n),d<g&&(d=Math.sqrt(g*d)),h.layout.subnetworks.vx+=r*t.value*l/d,h.layout.subnetworks.vy+=n*t.value*l/d),!0;if(!(t.length||d>=u)){(t.data.layout.subnetworks!==h.layout.subnetworks||t.next)&&(0===r&&(d+=(r=i())*r),0===n&&(d+=(n=i())*n),d<g&&(d=Math.sqrt(g*d)));do{t.data.layout.subnetworks!==h.layout.subnetworks&&(o=c[t.data.layout.subnetworks.index]*l/d,h.layout.subnetworks.vx+=r*o,h.layout.subnetworks.vy+=n*o)}while(t=t.next)}}var h,l,c,d=t.data.nodes,p=e(-30),g=1,u=1/0,m=.81;r();var f=function(e){var i,r=d.length,c=t.quadtreeD3(d,s,a).visitAfter(n);for(l=e,i=0;i<r;++i)h=d[i],c.visit(o)};return f.initialize=function(t){d=t,r()},f.strength=function(t){return arguments.length?(p="function"==typeof t?t:e(+t),r(),f):p},f.distanceMin=function(t){return arguments.length?(g=t*t,f):Math.sqrt(g)},f.distanceMax=function(t){return arguments.length?(u=t*t,f):Math.sqrt(u)},f.theta=function(t){return arguments.length?(m=t*t,f):Math.sqrt(m)},f},this.collideD3=function(t){var e=this;function i(){return 1e-6*(Math.random()-.5)}function s(t){return t.layout.subnetworks.x+t.layout.subnetworks.vx}function a(t){return t.layout.subnetworks.y+t.layout.subnetworks.vy}var r,n,o=this.data.nodes,h=1,l=1;function c(t){if(t.data)return t.r=r[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function d(){if(o){var e,i,s=o.length;for(r=new Array(s),e=0;e<s;++e)i=o[e],r[e]=+t(i,e,o)}}"function"!=typeof t&&(n=null==t?1:+t,t=function(){return n});var p=function(){for(var t,n,d,p,g,u,m,f=o.length,y=0;y<l;++y)for(n=e.quadtree(o,s,a).visitAfter(c),t=0;t<f;++t)d=o[t],u=r[d.layout.subnetworks.index],m=u*u,p=d.layout.subnetworks.x+d.layout.subnetworks.vx,g=d.layout.subnetworks.y+d.layout.subnetworks.vy,n.visit(x);function x(t,e,s,a,r){var n=t.data,o=t.r,l=u+o;if(!n)return e>p+l||a<p-l||s>g+l||r<g-l;if(n.index>d.layout.subnetworks.index){var c=p-n.x-n.vx,f=g-n.y-n.vy,y=c*c+f*f;y<l*l&&(0===c&&(y+=(c=i())*c),0===f&&(y+=(f=i())*f),y=(l-(y=Math.sqrt(y)))/y*h,d.layout.subnetworks.vx+=(c*=y)*(l=(o*=o)/(m+o)),d.layout.subnetworks.vy+=(f*=y)*l,n.layout.subnetworks.vx-=c*(l=1-l),n.layout.subnetworks.vy-=f*l)}}};return p.initialize=function(t,e){o=t,e,d()},p.iterations=function(t){return arguments.length?(l=+t,p):l},p.strength=function(t){return arguments.length?(h=+t,p):h},p.radius=function(e){return arguments.length?(t="function"==typeof e?e:constant(+e),d(),p):t},p},this.radialD3=function(t,e,i){function s(t){return function(){return t}}var a,r,n=this.data.nodes,o=s(.1);"function"!=typeof t&&(t=s(+t)),null==e&&(e=0),null==i&&(i=0);var h=function(t){for(var s=0,o=n.length;s<o;++s){var h=n[s],l=h.layout.subnetworks.x-e||1e-6,c=h.layout.subnetworks.y-i||1e-6,d=Math.sqrt(l*l+c*c),p=(r[s]-d)*a[s]*t/d;h.layout.subnetworks.vx+=l*p,h.layout.subnetworks.vy+=c*p}};function l(){if(n){var e,i=n.length;for(a=new Array(i),r=new Array(i),e=0;e<i;++e)r[e]=+t(n[e],e,n),a[e]=isNaN(r[e])?0:+o(n[e],e,n)}}return h.initialize=function(t){n=t,l()},h.strength=function(t){return arguments.length?(o="function"==typeof t?t:s(+t),l(),h):o},h.radius=function(e){return arguments.length?(t="function"==typeof e?e:s(+e),l(),h):t},h.x=function(t){return arguments.length?(e=+t,h):e},h.y=function(t){return arguments.length?(i=+t,h):i},h},this.initComplex(),this.initFFT(),this.initContour(),this.initDensity(),this.initHist(),this.initLoess(),this.initQuantreg(),this.initLAPACK()},CanvasXpress.prototype.initComplex=function(){this.complexRe=function(t){return t[0]},this.complexIm=function(t){return t[1]},this.complexMod=function(t){for(var e=t[0].length,i=new Float32Array(e),s=0;s<e;s++)i[s]=0!=t[0][s]&&t[1][s]?Math.sqrt(t[0][s]*t[0][s]+t[1][s]*t[1][s]):0;return i},this.complexArg=function(t){for(var e=t[0].length,i=new Float32Array(e),s=0;s<e;s++)m[s]=Math.atan2(t[1][s],t[0][s]);return i},this.complexConj=function(t){for(var e=t[1].length,i=0;i<e;i++)t[1][i]*=-1},this.complexPlus=function(t,e){for(var i=t[0].length,s=new Float32Array(i),a=new Float32Array(i),r=0;r<i;r++)s[r]=t[0][r]+e[0],a[r]=t[1][r]+e[1];return[s,a]},this.complexMinus=function(t,e){for(var i=t[0].length,s=new Float32Array(i),a=new Float32Array(i),r=0;r<i;r++)s[r]=t[0][r]-e[0],a[r]=t[1][r]-e[1];return[s,a]},this.complexProd=function(t,e){for(var i=t[0].length,s=new Float32Array(i),a=new Float32Array(i),r=0;r<i;r++)s[r]=t[0][r]*e[0][r]-t[1][r]*e[1][r],a[r]=t[0][r]*e[1][r]+t[1][r]*e[0][r];return[s,a]},this.complexDiv=function(t,e){for(var i=t[0].length,s=new Float32Array(i),a=new Float32Array(i),r=this.Mod(e),n=0;n<i;n++)s[n]=t[0][n]*e[0][n]+t[1][n]*e[1][n]/Math.pow(r[n],2),a[n]=t[0][n]*e[1][n]-t[1][n]*e[0][n]/Math.pow(r[n],2);return[s,a]}},CanvasXpress.prototype.initFFT=function(){this.fft=function(t,e,i){var s=function(t,e){var i=t.length;if(i!=e.length)throw"Mismatched lengths";0!=i&&(0==(i&i-1)?n(t,e):o(t,e))},a=function(t,e){s(e,t)},r=function(t,e){for(var i=0,s=0;s<e;s++)i=i<<1|1&t,t>>>=1;return i},n=function(t,e){var i=t.length;if(i!=e.length)throw"Mismatched lengths";if(1!=i){for(var s=-1,a=0;a<32;a++)1<<a==i&&(s=a);if(-1==s)throw"Length is not a power of 2";var n=new Array(i/2),o=new Array(i/2);for(a=0;a<i/2;a++)n[a]=Math.cos(2*Math.PI*a/i),o[a]=Math.sin(2*Math.PI*a/i);for(a=0;a<i;a++){if((p=r(a,s))>a){var h=t[a];t[a]=t[p],t[p]=h,h=e[a],e[a]=e[p],e[p]=h}}for(var l=2;l<=i;l*=2){var c=l/2,d=i/l;for(a=0;a<i;a+=l)for(var p=a,g=0;p<a+c;p++,g+=d){var u=p+c,m=t[u]*n[g]+e[u]*o[g],f=-t[u]*o[g]+e[u]*n[g];t[u]=t[p]-m,e[u]=e[p]-f,t[p]+=m,e[p]+=f}}}},o=function(t,e){var i=t.length;if(i!=e.length)throw"Mismatched lengths";for(var s=1;s<2*i+1;)s*=2;for(var a=new Array(i),r=new Array(i),n=0;n<i;n++){var o=n*n%(2*i);a[n]=Math.cos(Math.PI*o/i),r[n]=Math.sin(Math.PI*o/i)}var c=l(s),d=l(s);for(n=0;n<i;n++)c[n]=t[n]*a[n]+e[n]*r[n],d[n]=-t[n]*r[n]+e[n]*a[n];var p=l(s),g=l(s);p[0]=a[0],g[0]=r[0];for(n=1;n<i;n++)p[n]=p[s-n]=a[n],g[n]=g[s-n]=r[n];var u=new Array(s),m=new Array(s);h(c,d,p,g,u,m);for(n=0;n<i;n++)t[n]=u[n]*a[n]+m[n]*r[n],e[n]=-u[n]*r[n]+m[n]*a[n]},h=function(t,e,i,r,n,o){var h=t.length;if(h!=e.length||h!=i.length||h!=r.length||h!=n.length||h!=o.length)throw"Mismatched lengths";t=t.slice(),e=e.slice(),i=i.slice(),r=r.slice(),s(t,e),s(i,r);for(var l=0;l<h;l++){var c=t[l]*i[l]-e[l]*r[l];e[l]=e[l]*i[l]+t[l]*r[l],t[l]=c}a(t,e);for(l=0;l<h;l++)n[l]=t[l]/h,o[l]=e[l]/h};function l(t){for(var e=[],i=0;i<t;i++)e.push(0);return e}for(var c=t.length,d=new Float64Array(c),p=new Float64Array(c),g=0;g<c;g++)d[g]=t[g],p[g]=e&&e.length?e[g]:0;return i?a(d,p):s(d,p),[d,p]}},CanvasXpress.prototype.initContour=function(){this.contourNewSeg=function(t,e,i,s,a){return{x0:t,y0:e,x1:i,y1:s,next:a}},this.contourSwapSeg=function(t){var e=t.x0,i=t.y0;t.x0=t.x1,t.y0=t.y1,t.x1=e,t.y1=i},this.contourSegUpdate=function(t,e,i,s,a,r){var n=function(t,e){return 0==Math.abs(t-e)};if(null==a)return r=null,null;switch(i){case 1:case 3:if(n(e,a.y0))return s||this.contourSwapSeg(a),r=a,[a.next,r];if(n(e,a.y1))return s&&this.contourSwapSeg(a),r=a,[a.next,r];break;case 2:case 4:if(n(t,a.x0))return s||this.contourSwapSeg(a),r=a,[a.next,r];if(n(t,a.x1))return s&&this.contourSwapSeg(a),r=a,[a.next,r]}var o=this.contourSegUpdate(t,e,i,s,a.next,r);return a.next=o?o[0]:null,a},this.contourLines=function(t,e,i,s,a){if(!t.length)throw new Error("missing x data");if(!e.length)throw new Error("missing y data");if(!i.length)throw new Error("missing z data");if(t.length*e.length!=i.length)throw new Error("dimensions of 'x', 'y' and 'z' do not match");var r=this.range(i),n=r[0],o=r[1];null==s&&(s=n);var h,l,c,d,p,g,u,m,f,y,x,v,b,A=function(t,e,i){return t<i!=e<i&&t!=i&&e!=i?(p=(i-t)/(e-t),1):0},w=[],C=[],T=t.length,S=e.length,M=[];a||(a=.001*(o-n));for(var D=0;D<T;D++)for(var k=0;k<S;k++)M[D+k*T]=null;for(D=0;D<T-1;D++){g=t[D],u=t[D+1];for(k=0;k<S-1;k++){switch(m=e[k],f=e[k+1],(y=i[h=D+k*T])==s&&(y+=a),(x=i[h+1])==s&&(x+=a),(v=i[h+T])==s&&(v+=a),(b=i[h+T+1])==s&&(b+=a),d=0,isFinite(y)&&(d+=1),isFinite(x)&&(d+=2),isFinite(v)&&(d+=4),isFinite(b)&&(d+=8),h=0,d){case 15:A(y,x,s)&&(w[h]=g+p*(u-g),C[h]=m,h++),A(y,v,s)&&(C[h]=m+p*(f-m),w[h]=g,h++),A(x,b,s)&&(C[h]=m+p*(f-m),w[h]=u,h++),A(v,b,s)&&(w[h]=g+p*(u-g),C[h]=f,h++);break;case 14:A(x,b,s)&&(C[h]=m+p*(f-m),w[h]=u,h++),A(v,b,s)&&(w[h]=g+p*(u-g),C[h]=f,h++),A(v,x,s)&&(w[h]=g+p*(u-g),C[h]=f+p*(m-f),h++);break;case 13:A(y,v,s)&&(C[h]=m+p*(f-m),w[h]=g,h++),A(v,b,s)&&(w[h]=g+p*(u-g),C[h]=f,h++),A(y,b,s)&&(w[h]=g+p*(u-g),C[h]=m+p*(f-m),h++);break;case 11:A(x,b,s)&&(C[h]=m+p*(f-m),w[h]=u,h++),A(y,x,s)&&(w[h]=g+p*(u-g),C[h]=m,h++),A(y,b,s)&&(w[h]=g+p*(u-g),C[h]=m+p*(f-m),h++);break;case 7:A(y,v,s)&&(C[h]=m+p*(f-m),w[h]=g,h++),A(y,x,s)&&(w[h]=g+p*(u-g),C[h]=m,h++),A(v,x,s)&&(w[h]=g+p*(u-g),C[h]=f+p*(m-f),h++)}if(seglist=null,h>0)if(2==h)seglist=this.contourNewSeg(w[0],C[0],w[1],C[1],seglist);else if(4==h){for(h=3;h>=1;h--){for(c=h,g=w[h],l=0;l<h;l++)w[l]>g&&(g=w[l],c=l);c!=h&&(g=w[h],m=C[h],w[h]=w[c],C[h]=C[c],w[c]=g,C[c]=m)}seglist=this.contourNewSeg(w[0],C[0],w[1],C[1],seglist),seglist=this.contourNewSeg(w[2],C[2],w[3],C[3],seglist)}else alert("k is "+h+" and it should be 2 or 4");M[D+k*T]=seglist}}return M},this.contour=function(t,e,i,s){var a=this;contourSegDir=function(t,e,i,s,a,r){var n=function(t,e){return 0==Math.abs(t-e)};return n(e,s[c])?0==c?0:(c-=1,3):n(t,i[l])?0==l?0:(l-=1,4):n(e,s[c+1])?c>=r-1?0:(c+=1,1):n(t,i[l+1])?l>=a-1?0:(l+=1,2):0};var r=function(t,e,i,s,r){for(var n,o,h,d,p,g,u,m,f,y,x=t.length,v=e.length,b=[],A=a.contourLines(t,e,i,s,r),w=25e3,C=0;C<x-1;C++)for(var T=0;T<v-1;T++){for(var S=[],M=[];g=A[C+T*x];){for(l=C,c=T,f=y=g,A[C+T*x]=g.next,n=g.x1,o=g.y1;(p=contourSegDir(n,o,t,e,x,v))&&((h=a.contourSegUpdate(n,o,p,!0,A[l+c*x],u))?(A[l+c*x]=h[0],u=h[1]):(A[l+c*x]=null,u=null),u);)y.next=u,n=(y=u).x1,o=y.y1;for(y.next=null,l=C,c=T,n=g.x0,o=g.y0;(p=contourSegDir(n,o,t,e,x,v))&&((h=a.contourSegUpdate(n,o,p,!1,A[l+c*x],u))?(A[l+c*x]=h[0],u=h[1]):(A[l+c*x]=null,u=null),u);)u.next=f,n=(f=u).x0,o=f.y0;for(m=f,d=0;m&&d<w;)d++,m=m.next;for(d==w&&alert("Reached max contour segments"),m=f,S[d=0]=m.x0,M[d++]=m.y0;m.next&&d<w;)m=m.next,S[d]=m.x0,M[d++]=m.y0;S[d]=m.x1,M[d++]=m.y1}S.length&&b.push({x:S,y:M})}return b};if(!t.length)throw new Error("missing x data");if(!e.length)throw new Error("missing y data");if(!i.length)throw new Error("missing z data");if(t.length*e.length!=i.length)throw new Error("dimensions of 'x', 'y' and 'z' do not match");var n=this.range(i),o=n[0],h=n[1];s||(s=this[this.axisAlgorithm](o,h,this.contourLevelNumber));for(var l,c,d=[],p=.001*(h-o),g=0;g<s.length;g++){for(var u=r(t,e,i,s[g],p),m=[],f=0;f<u.length;f++){for(var y=[],x=0;x<u[f].x.length;x++)y.push([u[f].x[x],u[f].y[x]]);m.push(y)}d.push({type:"Multipolygon",value:s[g],coordinates:[m]})}return d},this.contourFindCutPoints=function(t,e,i,s,a,r,n,o,h,l,c,d){var p;if(a>o){if(o>e||a<t)return d;a<e?(h[d]=i,l[d]=s,c[d]=a,++d):a==Number.POSITIVE_INFINITY?(h[d]=r,l[d]=s,c[d]=o,++d):(p=(a-e)/(a-o),h[d]=i+p*(r-i),l[d]=s,c[d]=a+p*(o-a),++d),o==Number.NEGATIVE_INFINITY?(h[d]=i,l[d]=s,c[d]=a,++d):o<=t&&(p=(o-t)/(o-a),h[d]=r-p*(r-i),l[d]=s,c[d]=o-p*(o-a),++d)}else if(a<o){if(o<t||a>e)return d;a>t?(h[d]=i,l[d]=s,c[d]=a,++d):a==Number.NEGATIVE_INFINITY?(h[d]=r,l[d]=s,c[d]=o,++d):(p=(a-t)/(a-o),h[d]=i+p*(r-i),l[d]=s,c[d]=a+p*(o-a),++d),o<e?(h[d]=r,l[d]=n,c[d]=o,++d):o==Number.POSITIVE_INFINITY?(h[d]=i,l[d]=s,c[d]=a,++d):(p=(o-e)/(o-a),h[d]=r-p*(r-i),l[d]=s,c[d]=o-p*(o-a),++d)}else t<=a&&a<=e&&(h[d]=i,l[d]=s,c[d]=a,h[++d]=r,l[d]=n,c[d]=o,++d);return d},this.contourFindPolygonVertices=function(t,e,i,s,a,r,n,o,h,l,c,d,p){var g=0;return g=this.contourFindCutPoints(t,e,i,a,n,s,a,o,c,d,p,g),g=this.contourFindCutPoints(t,e,a,s,o,r,s,l,d,c,p,g),g=this.contourFindCutPoints(t,e,s,r,l,i,r,h,c,d,p,g),g=this.contourFindCutPoints(t,e,r,i,h,a,i,n,d,c,p,g)},this.filledContour=function(t,e,s,a){if(!t.length)throw new Error("missing x data");if(!e.length)throw new Error("missing y data");if(!s.length)throw new Error("missing z data");if(t.length*e.length!=s.length)throw new Error("dimensions of 'x', 'y' and 'z' do not match");var r=this.range(s),n=r[0],o=r[1];a||(a=this[this.axisAlgorithm](n,o,this.contourLevelNumber));var h=t.length,l=e.length,c=a.length,d={};for(i=1;i<h;i++)for(j=1;j<l;j++)for(k=1;k<c;k++){d.hasOwnProperty(a[k-1])||(d[a[k-1]]=[]);var p=[],g=[],u=[];if(this.contourFindPolygonVertices(a[k-1],a[k],t[i-1],t[i],e[j-1],e[j],s[i-1+(j-1)*h],s[i+(j-1)*h],s[i-1+j*h],s[i+j*h],p,g,[])>2){for(var m=0;m<p.length;m++)u.push([p[m],g[m]]);u.push([u[0][0],u[0][1]]),d[a[k-1]].push(u)}}var f=[];for(k=1;k<c;k++)d.hasOwnProperty(a[k-1])&&f.push({type:"Multipolygon",value:a[k-1],coordinates:[d[a[k-1]]]});return!!f.length&&f}},CanvasXpress.prototype.initDensity=function(){this.binDist=function(t,e,i,s,a){for(var r=a-2,n=(s-i)/(a-1),o=[],h=0;h<2*a;h++)o[h]=0;for(h=0;h<t.length;h++)if(isFinite(t[h])){var l=(t[h]-i)/n;if(l>Number.MAX_VALUE||l<Number.MIN_VALUE)continue;var c=Math.floor(l),d=l-c,p=e[h];0<=c&&c<=r?(o[c]+=(1-d)*p,o[c+1]+=d*p):-1==c?o[0]+=d*p:c==r+1&&(o[c]+=(1-d)*p)}return o},this.approx=function(t,e,i){for(var s=function(i){for(var s=0,a=t.length-1;s<a-1;){var r=parseInt((s+a)/2);i<t[r]?a=r:s=r}return e[s]+(e[a]-e[s])*((i-t[s])/(t[a]-t[s]))},a=[],r=0;r<i.length;r++){var n=s(i[r]);a.push(isNaN(n)?0:Math.max(0,n))}return a},this.approxStack=function(t,e){for(var i=[],s=[],a=0;a<t.length;a++)i.push(t[a][0]),s.push(t[a][1]);var r=[];for(a=0;a<e.length;a++)r.push(e[a][0]);var n=this.approx(i,s,r),o=[];for(a=0;a<r.length;a++)o.push([e[a][0],n[a]]);return o},this.calculateDensity=function(t,e){for(var i=[],s=0;s<t.length;s++)isFinite(t[s])&&i.push(t[s]);e&&e.length||(e=this.rep(1/i.length,i.length));var a=Math.max(512,i.length);a>512&&(a=Math.pow(Math.ceil(Math.log2(a)),2));var r=this[this.bandwidthRule+"Rule"](i)*this.bandwidthAdjust,n=this.min(i)-this.bandwidthCut*r,o=this.max(i)+this.bandwidthCut*r,h=n-4*r,l=o+4*r,c=this.binDist(i,e,h,l,a),d=this.seq(0,2*(l-h),!1,2*a),p=1;for(s=a+1;s<2*a;s++)d[s]=-d[a-p++];switch(this.densityKernel){case"gaussian":d=this.dnorm(d,0,r);break;case"rectangular":var g=r*Math.sqrt(3);for(s=0;s<d.length;s++)d[s]=Math.abs(d[s])<g?.5/g:0;break;case"triangular":for(g=r*Math.sqrt(6),s=0;s<d.length;s++)d[s]=Math.abs(d[s]),d[s]=d[s]<g?(1-d[s]/g)/g:0;break;case"epanechnikov":for(g=r*Math.sqrt(5),s=0;s<d.length;s++)d[s]=Math.abs(d[s]),d[s]=d[s]<g?.75*(1-Math.pow(d[s]/g,2))/g:0;break;case"quartic":case"biweight":for(g=r*Math.sqrt(7),s=0;s<d.length;s++)d[s]=Math.abs(d[s]),d[s]=d[s]<g?15/16*Math.pow(1-Math.pow(d[s]/g,2),2)/g:0;break;case"cosine":for(g=r/Math.sqrt(1/3-2/Math.pow(Math.PI,2)),s=0;s<d.length;s++)d[s]=Math.abs(d[s])<g?(1+Math.cos(Math.PI*d[s]/g))/(2*g):0;break;case"optcosine":for(g=r/Math.sqrt(1-8/Math.pow(Math.PI,2)),s=0;s<d.length;s++)d[s]=Math.abs(d[s])<g?Math.PI/4*Math.cos(Math.PI*d[s]/(2*g))/g:0}var u=this.fft(c),m=this.fft(d);this.complexConj(m);var f=this.complexProd(u,m);d=this.fft(f[0],f[1],!0);var y=[];for(s=0;s<a;s++)y[s]=Math.max(0,d[0][s])/(2*a);var x=this.seq(h,l,!1,a),v=this.seq(n,o,!1,a),b=this.approx(x,y,v);return{x:v,y:b,bw:r,summX:this.boxplot(v),summY:this.boxplot(b)}},this.kde2d=function(t,e,i,s,a){if(s||(s=25),Array.isArray(s)||(s=this.rep(s,2)),t.length!=e.length)throw new Error("data vectors must be the same length");if(!t.every((function(t){return isFinite(t)}))||!e.every((function(t){return isFinite(t)})))throw new Error("missing or infinite values in the data are not allowed");if(a||(a=[this.range(t),this.range(e)]),!a[0].every((function(t){return isFinite(t)}))||!a[1].every((function(t){return isFinite(t)})))throw new Error("only finite values are allowed in 'lims'");i||(i=[this.nrdRule(t)/4,this.nrdRule(e)/4]);for(var r=this.seq(a[0][0],a[0][1],!1,s[0]),n=this.seq(a[1][0],a[1][1],!1,s[1]),o=[],h=0;h<r.length;h++){o[h]=[];for(var l=0;l<t.length;l++)o[h][l]=this.dnorm((r[h]-t[l])/i[0])}var c=[];for(h=0;h<e.length;h++){c[h]=[];for(l=0;l<n.length;l++)c[h][l]=this.dnorm((n[l]-e[h])/i[1])}var d=[];for(h=0;h<s[0];h++){d[h]=[];for(l=0;l<s[1];l++)d[h][l]=0}for(var p=0;p<r.length;p++)for(var g=0;g<n.length;g++){d[p][g]=0;for(h=0;h<t.length;h++)d[p][g]+=o[p][h]*c[h][g];d[p][g]/=t.length*i[0]*i[1]}var u=[];for(p=0;p<n.length;p++)for(g=0;g<r.length;g++)u.push(d[g][p]);return{x:r,y:n,z:u}},this.silvermanRule=function(t){var e=Math.sqrt(this.variance(t)),i=4*Math.pow(e,5),s=3*t.length;return Math.pow(i/s,.2)},this.nrd0Rule=function(t){var e=Math.sqrt(this.variance(t)),i=this.iqr(t)/1.34,s=Math.pow(t.length,-.2);return.9*(i>0?Math.min(e,i):e)*s},this.nrdRule=function(t){var e=Math.sqrt(this.variance(t)),i=this.iqr(t)/1.34,s=Math.pow(t.length,-.2);return 4.24*(i>0?Math.min(e,i):e)*s},this.density=function(t,e){var i=function(t){for(var e=[],i=0;i<t.length;i++)!isNaN(parseFloat(t[i]))&&isFinite(t[i])&&e.push(t[i]);return e}(t);if(!i.length)return{range:[0,0],median:0,trim:[0,0],xy:[],bw:0,values:[],quantilesX:[],quantilesY:[],indecesY:[],sumY:0,maxY:0,minY:0,minData:0,maxData:0,globalMaxY:0,histogram:{estimator:.5,breaks:[.5],count:[0],mids:[.5],idxs:[[]],size:1,half:.5,maxY:1,name:e,labels:["Bin 1 (0 - 1)"]},name:e,n:0};for(var s=this.range(i),a=this.median(i),r=this.hist(i,e),n=this.calculateDensity(t),o=s[0],h=s[1],l=n.summX,c=n.summY,d=n.bw,p=[],g=0;g<n.x.length;g++)p.push([n.x[g],n.y[g]]);var u,m,f=[],y=[],x=Number.NEGATIVE_INFINITY,v=Number.POSITIVE_INFINITY,b=0;for(g=0;g<n.x.length;g++)if(n.x[g]>o&&n.x[g]<h)0==f.length&&(u=g,f.push(n.x[g-1]),y.push(n.y[g-1]),b+=n.y[g-1],x=Math.max(x,n.y[g-1]),v=Math.min(v,n.y[g-1])),f.push(n.x[g]),y.push(n.y[g]),b+=n.y[g],x=Math.max(x,n.y[g]),v=Math.min(v,n.y[g]);else if(n.x[g]>=h){m=g,f.push(n.x[g]),y.push(n.y[g]),b+=n.y[g],x=Math.max(x,n.y[g]),v=Math.min(v,n.y[g]);break}var A=this[this.axisAlgorithm](0,x,this.yAxisTicks,this.axisWilkinsonLoose),w=[];for(g=0;g<6;g++)for(var C=0;C<f.length;C++)if(f[C]>=l[g]){w.push(y[C]);break}return{range:s,median:a,trim:[u,Math.max(u,m)],xy:p,bw:d,values:A,quantilesX:l,quantilesY:c,indecesY:w,sumY:b,maxY:x,minY:v,minData:o,maxData:h,globalMaxY:x,histogram:r,name:e,n:i.length}}},CanvasXpress.prototype.initHist=function(){this.freedmanDiaconis=function(t,e,i){if(t&&t.length>1){t=this.cleanArray(t,e,i);var s=this.iqr(t);return 0==s?1:Math.ceil(2*s*Math.pow(t.length,-1/3))}return t&&1==t.length?Number(t[0]):1},this.sturges=function(t,e,i){return t&&t.length>1?(t=this.cleanArray(t,e,i),Math.ceil(Math.log(t.length)/Math.LN2+1)):t&&1==t.length?Number(t[0]):1},this.scott=function(t,e,i){if(t&&t.length>1){t=this.cleanArray(t,e,i);var s=this.range(t),a=Math.sqrt(this.vriance(t));return Math.ceil((s[1]-s[0])/(3.5*a*Math.pow(t.length,-1/3)))}return t&&1==t.length?Number(t[0]):1},this.binData=function(t,e,i,s){for(var a=t.length,r=e.length-1,n=[],o=0;o<r;o++)n[o]=[];for(o=0;o<a;o++)if(isFinite(t[o])){var h=0,l=r;if(e[h]<=t[o]&&(t[o]<e[l]||t[o]==e[l]&&s)){for(;l-h>=2;){var c=Math.floor((l+h)/2);t[o]>e[c]||!i&&t[o]==e[c]?h=c:l=c}n[h].push(o)}}return n},this.hist=function(t,e){for(var i=[],s=0;s<t.length;s++)isFinite(t[s])&&i.push(t[s]);var a=this.range(i),r=[],n=this[this.histogramSizeEstimator](i);1==t.length?r=[t[0]-.5,t[0]+.5]:this.histogramBinWidth?(r=this.rPretty(a[0],a[1],n),r=this.seq(r[0],r[r.length-1],this.histogramBinWidth)):r=this.histogramBins?this.rPretty(a[0],a[1],this.histogramBins):this.rPretty(a[0],a[1],n);var o=this.diff(r),h=this.median(o),l=1e-7*(r.length>5?h[0]:1),c=[];if(c[0]=r[0]-l,this.histogramRight)for(s=1;s<r.length-1;s++)c.push(r[s]+l);else for(s=1;s<r.length-1;s++)c.push(r[s]-l);c[r.length-1]=r[r.length-1]+l;var d=this.binData(i,c,this.histogramRight,this.histogramLowest),p=[],g=[],u=[],m=0;for(s=0;s<r.length-1;s++)p[s]=d[s].length,m=Math.max(m,p[s]),g[s]=.5*(r[s]+r[s+1]),u.push("Bin"+(s+1)+" ("+this.formatNumber(r[s])+" - "+this.formatNumber(r[s+1])+")");return{estimator:n,breaks:r,fbreaks:c,count:p,mids:g,idxs:d,size:o[0],half:o[0]/2,maxY:m,name:e,labels:u}},this.histBin=function(t,e){var i=this.histogramRight,s=this.histogramLowest,a=e.length-1;if(isFinite(t)){var r=0,n=a;if(e[r]<=t&&(t<e[n]||t==e[n]&&s)){for(;n-r>=2;){var o=Math.floor((n+r)/2);t>e[o]||!i&&t==e[o]?r=o:n=o}return r}}return NaN},this.histN=function(t,e,i){if(this.isArray(t)&&this.isArray(t[0])&&t.length>0){for(var s=0,a=0;a<e.length;a++)s=Math.max(s,this.meta.data.d.s[e[a].toString()].maxY);for(a=0;a<e.length;a++)this.meta.data.d.s[e[a].toString()].globalMaxY=s;var r=[];for(a=0;a<t.length;a++)r=r.concat(t[a]);var n=this.density(r,i),o=n.histogram.count.length,h=n.histogram.breaks,l=n.histogram.fbreaks,c=this.isTransformedData?this.data.y.trans:this.data.y.data,d=h[0],p={data:[],vars:[],smps:[],histogram:[],cols:[],values:[],density:[],global:n.histogram};for(a=0;a<o;a++){p.vars.push("Bin"+(a+1)+" ("+this.formatNumber(n.histogram.breaks[a])+" - "+this.formatNumber(n.histogram.breaks[a+1])+")"),p.data[a]=[],p.data[a][0]=h[a+1]-d,p.histogram[a]=[],p.values[a]=[];for(var g=0;g<e.length;g++)p.histogram[a][g]=[],p.values[a][g]=[]}p.smps.push("Bin");for(a=0;a<e.length;a++){var u=0;p.smps.push(this.data.y.smps[e[a]]);var m=[];for(g=0;g<o;g++)m[g]=0;for(g=0;g<this.varIndices.length;g++){var f=c[this.varIndices[g]][e[a]];if(null!=f&&""!==f&&!isNaN(f)){var y=this.histBin(f,l);isNaN(y)||(m[y]++,p.histogram[y][a].push(this.varIndices[g]),p.values[y][a].push(f))}}for(g=0;g<o;g++)p.data[g][a+1]=m[g],u=Math.max(u,m[g]);p.cols.push(u),p.density[a]=this.meta.data.d.s[e[a].toString()]}return p}},this.hist2d=function(t,e,i){var s=[],a=[],r=[];if(i)for(var n=0;n<t.length;n++)isFinite(t[n])&&isFinite(e[n])&&t[n]>=this.xAxisMin&&t[n]<=this.xAxisMax&&e[n]>=this.yAxisMin&&e[n]<=this.yAxisMax&&(s.push(t[n]),a.push(e[n]),r.push(n));else for(n=0;n<t.length;n++)isFinite(t[n])&&isFinite(e[n])&&(s.push(t[n]),a.push(e[n]),r.push(n));var o=r.length,h=0,l={data:{},x:0,y:0},c=this.histogramBins,d=this.histogramBinWidth;this.isArray(this.binplotBins)?this.binplotBins[0]?this.histogramBins=this.binplotBins[0]:this.histogramBins=30:this.histogramBins=this.binplotBins,this.isArray(this.binplotBinWidth)?this.binplotBinWidth[0]?this.histogramBinWidth=this.binplotBinWidth[0]:this.histogramBinWidth=!1:this.histogramBinWidth=this.binplotBinWidth;var p=this.hist(s,"hex-x-data");this.isArray(this.binplotBins)?this.binplotBins[1]?this.histogramBins=this.binplotBins[1]:this.histogramBins=30:this.histogramBins=this.binplotBins,this.isArray(this.binplotBinWidth)?this.binplotBinWidth[1]?this.histogramBinWidth=this.binplotBinWidth[1]:this.histogramBinWidth=!1:this.histogramBinWidth=this.binplotBinWidth;var g=this.hist(a,"hex-y-data");this.histogramBins=c,this.histogramBinWidth=d;var u=p.size,m=g.size;if(l.x=u,l.y=m,"hexagon"==this.binplotShape){var f=2*u*Math.sin(Math.PI/3),y=1.5*m;for(n=0;n<o;++n){var x=s[n],v=a[n],b=Math.round(v/=y),A=Math.round(x=x/f-(1&b)/2),w=v-b;if(3*Math.abs(w)>1){var C=x-A,T=A+(x<A?-1:1)/2,S=b+(v<b?-1:1),M=x-T,D=v-S;C*C+w*w>M*M+D*D&&(A=T+(1&b?1:-1)/2,b=S)}var k=this.formatNumber(A)+":"+this.formatNumber(b);l.data.hasOwnProperty(k)||(l.data[k]={idx:[],x:(A+(1&b)/2)*f,y:b*y}),l.data[k].idx.push(r[n]),h=Math.max(h,l.data[k].idx.length)}}else for(f=u,y=m,n=0;n<o;++n){x=this.histBin(s[n],p.fbreaks),v=this.histBin(a[n],g.fbreaks),b=g.breaks[v+1],A=p.breaks[x+1],k=this.formatNumber(A)+":"+this.formatNumber(b);l.data.hasOwnProperty(k)||(l.data[k]={idx:[],x:A,y:b}),l.data[k].idx.push(r[n]),h=Math.max(h,l.data[k].idx.length)}var L=this.getColorBrew(this.getCustomColorScheme(8,this.binplotColorScheme,!0),0,h);for(var k in l.brew=L,l.data)l.data[k].color=this.getColorForValue(L,l.data[k].idx.length);return l}},CanvasXpress.prototype.initLoess=function(){this.loess=function(t){var e=this.meta;e.vals.loess||(e.vals.loess={});var i=t[0].length,s=t[2]?2:1,a=this.cloneObject([i,s,this.loessStatistics,this.loessSurface,this.loessFamily,this.loessSpan,this.loessNormalize,this.loessDegree,this.loessIterations,this.loessCell,this.loessSteps,this.loessBandwidth,this.transformData]);return a=a.join(":"),e.vals.loess.hasOwnProperty(a)||(e.vals.loess[a]=t[2]?this.loess3D(t):this.loess2D(t)),e.vals.loess[a]},this.loessSE=function(t){for(var e=[0,0,0,0,0],i=0,s=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,r=0;r<t.length;r++)i++,s=Math.max(s,t[r][0]),a=Math.min(a,t[r][0]),e[0]+=t[r][0],e[1]+=t[r][1],e[2]+=t[r][0]*t[r][0],e[3]+=t[r][0]*t[r][1],e[4]+=t[r][1]*t[r][1];var n=i*e[2]-e[0]*e[0],o=i*e[3]-e[0]*e[1],h=0===n?0:o/n,l=e[1]/i-h*e[0]/i,c=[];for(r=0;r<t.length;r++)c[r]=[t[r][0],t[r][0]*h+l];for(var d=[],p=0,g=0,u=e[0]/i,m=Math.max(r-2,1),f=this.qt(1-this.confidenceLevel,m),y=0;y<r;y++)p+=Math.pow(t[y][1]-c[y][1],2),g+=Math.pow(t[y][0]-u,2);p=Math.sqrt(p/m);for(y=0;y<r;y++)d.push(-f*p*Math.sqrt(1/r+Math.pow(t[y][0]-u,2)/g)*1);return d},this.loess3D=function(t){var e=this,i=function(t){var e=Math.abs(t),i=1/(1+e/2),s=i*Math.exp(-e*e-1.26551223+i*(1.00002368+i*(.37409196+i*(.09678418+i*(i*(.27886807+i*(i*(1.48851587+i*(.17087277*i-.82215223))-1.13520398))-.18628806)))));return t>=0?s:2-s},s=function(t,e,s){return t-Math.sqrt(e)*Math.sqrt(2)*function(t){if(t>=2)return-100;if(t<=0)return 100;for(var e=t<1?t:2-t,s=Math.sqrt(-2*Math.log(e/2)),a=-.70711*((2.30753+.27061*s)/(1+s*(.99229+.04481*s))-s),r=0;r<2;r++){var n=i(a)-e;a+=n/(1.1283791670955126*Math.exp(-a*a)-a*n)}return t<1?a:-a}(2*s)},a=function(t,i){for(var s=[],r=0;r<t.length;r++)e.isArray(t[r])&&e.isArray(i[r])?s.push(a(t[r],i[r])):s.push(t[r]*i[r]);return s},r=function(t,e){for(var i=function(e,r,n){if(n>1)for(var o=r;o<t.length;o++)i(a(e,t[o]),o,n-1);else s.push(e)},s=[],r=Array(t[0].length).fill(1),n=0;n<=e;n++)i(r,0,n+1);return s},n=function(t,e,i){return t<e?Math.pow(1-Math.pow(t/e,i),i):0},o=function(t,e){for(var i=t.length,s=t[0].length,a=(e.length,e[0].length),r=new Array(i),n=0;n<i;n++){r[n]=new Array(a);for(var o=0;o<a;o++){r[n][o]=0;for(var h=0;h<s;h++)r[n][o]+=t[n][h]*e[h][o]}}return r},h=function(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i][0]);return e},l=function(t,i,s){var r=a(s,i),n=e.transpose(t.map((function(t){return a(s,t)}))),h=o(t,n),l=o(t,e.transpose([r])),c=o(e.numeric("inv",h),l),d=o(e.transpose(c),t),p=function(t,e){for(var i=new Array(t.length),s=0;s<i.length;s++){i[s]=new Array(t[s].length);for(var a=0;a<i[s].length;a++)i[s][a]=t[s][a]-e[s][a]}return i}([i],d);return{beta:c,yhat:d,residuals:p}},c=function(t){A=[],w=[],C=[],T=a(t,L),e.transpose(D).forEach((function(i,s){var a=l(m,g,T[s]);A.push(h(o([i],a.beta))),w.push(a.residuals),C.push(h(a.beta));var r=e.median(e.Abs(a.residuals[0]));t[s]=a.residuals[0].map((function(t){return n(t,6*r[0],2)}))}))};this.loessDegree=parseInt(this.loessDegree),(this.loessDegree<0||this.loessDegree>2)&&(this.loessDegree=2),this.loessBandWidth=Number(this.loessBandwidth),(this.loessBandwidth<0||this.loessBandwidth>1)&&(this.loessBandwidth=.8),this.loessSpan=Number(this.loessSpan),(this.loessSpan<0||this.loessSpan>1)&&(this.loessSpan=.75);var d=[t[0]],p=[this.loessSteps],g=t[1];t[2]&&(d.push(t[2]),p.push(this.loessSteps));var u=Array(t[0].length).fill(1),m=r(d,this.loessDegree),f=d.map((function(t){var i=Math.ceil(.1*t.length),s=e.cloneObject(t);s=s.sort((function(t,e){return t-e}));for(var a=0;a<i;a++)s.shift(),s.pop();var r=e.standardDeviation(s);return function(t){return t.map((function(t){return t/r}))}})),y=d.map((function(t,e){return f[e](t)})),x=this.transposeDataMatrix(y),v=[],b=[];d.forEach((function(t,e){var i=t.sort((function(t,e){return t-e})),s=i[0],a=(i[i.length-1]-s)/(p[e]-1);b.push([]);for(var r=0;r<p[e];r++)b[e].push(s+r*a);var n=1,o=1;for(r=e-1;r>=0;r--)n*=p[r];for(r=e+1;r<d.length;r++)o*=p[r];v.push([]);for(r=0;r<n;r++)v[e]=v[e].concat(b[e].reduce((function(t,e){return t.concat(Array(o).fill(e))}),[]))}));for(var A,w,C,T,S=this.cloneObject(v),M=v[0].length,D=r(S,this.loessDegree),k=S.map((function(t,e){return f[e](t)})),L=function(t,i,s){return t.map((function(t){for(var r=e.rank(t),o=[],h=0;h<r.length;h++)o.push([t[r[h]],i[r[h]]]);var l=e.sum(i)*s,c=0,d=o.findIndex((function(t){return(c+=t[1])>=l})),p=s>1?o[o.length-1][0]*s:o[d][0];return a(t.map((function(t){return n(t,p,3)})),i)}))}(function(t,e){return t.map((function(t){return e.map((function(e){return function(t,e){return t.length<2?Math.abs(t[0]-e[0]):Math.sqrt(t.reduce((function(t,i,s){return t+Math.pow(i-e[s],2)}),0))}(t,e)}))}))}(this.transpose(k),x),u,this.loessBandwidth),I=Array(M).fill(Array(t[0].length).fill(1)),z=0;z<1;z++)c(I);var N={fitted:h(A),residuals:w,betas:C,weights:T};!function(){for(var t=s(0,1,1-(1-e.loessSpan)/2),i=T.map((function(i,s){var a=e.sum(i),r=o([i],e.transpose([i]))[0];return Math.sqrt(o([e.square(w[s][0])],e.transpose([i]))/(a-r/a))*t})),a=[],r=0;r<A.length;r++)a[r]=[b[0][r],A[r][0]];Object.assign(N,{halfwidth:i,se:e.loessSE(a)})}();var B=[];if(t[2])for(var P=0;P<this.loessSteps;P++){for(var R=[],O=0;O<this.loessSteps;O++)R.push(N.fitted[O*this.loessSteps+P]);B.push(R)}for(P=0;P<this.loessSteps;P++)N.residuals[P]=N.residuals[P][0];return this.meta.vals.loess||(this.meta.vals.loess={}),t[2]?{x:b[0],y:b[1],z:B,b:N.betas,c:N.halfwidth,r:N.residuals,se:N.se}:{x:v[0],y:N.fitted,b:N.betas,c:N.halfwidth,r:N.residuals,se:N.se}},this.loess2D=function(t){var e=this;function s(t,e,i,s,a,r,n){if(!(t<=0))if(null==n?n=1:t+=n-1,null!=r)for(var o=n;o<=t;o++)s[o][r]=e[o][r];else for(o=1;o<=t;o++)s[o]=e[o]}function a(t,e,i,s,a){if(t<1||i<1)return 0;if(1==t)return Math.abs(e[1]);var r=0,n=1,o=[];if(null==a?a=1:t+=a-1,null!=s)for(var h=a;h<=t;h++)o[h]=e[h][s];else o=e;for(h=a;h<=t;h++)if(0!=o[h]){var l=Math.abs(o[h]);r<l?(n=1+n*Math.pow(r/l,2),r=l):n+=Math.pow(l/r,2)}return r*Math.sqrt(n)}function r(t,e,i,s,a,r,n,o){var h=0;if(!(t<=0))if(null==o?o=1:t+=o-1,null!=r&&null!=n)for(var l=o;l<=t;l++)h=e[l][r],e[l][r]=s[l][n],s[l][n]=h;else for(l=1;l<=t;l++)h=e[l],e[l]=s[l],s[l]=h}function n(t,e,i,s,a,r){if(!(t<0||s<0)){var n=[];if(null==r?r=1:t+=r-1,null!=a)for(var o=r;o<=t;o++)i[o]&&(n[o]=i[o][a]);else n=i;for(o=r;o<=t;o++)i[o]&&(n[o]*=e);if(null!=a)for(o=r;o<=t;o++)i[o]&&(i[o][a]=n[o])}}function o(t,e,i,s,a,r,n,o,h){var l=0;if(t<=0)return 0;if(null!=r&&null!=n&&null!=o&&null!=h){var c=[],d=[];t+=o-1;for(var p=o;p<=t;p++)c[p]=e[p][r],d[p]=s[p][h];for(p=o;p<=t;p++)l+=c[p]*d[p]}else{c=[],d=[];if(null==o?o=1:t+=o-1,null!=r&&null!=n)for(p=o;p<=t;p++)c[p]=e[p][r],d[p]=s[p][n];else if(null!=r)for(p=o;p<=t;p++)c[p]=e[p][r],d[p]=s[p];else c=e,d=s;for(p=o;p<=t;p++)l+=c[p]*d[p]}return l}function h(t,e,i,s,a,r,n,o,h){if(!(t<=0)&&0!=e){var l=[],c=[];if(null==h?h=1:t+=h-1,null!=n&&null!=o)for(var d=h;d<=t;d++)l[d]=i[d][n],c[d]=a[d][o];else if(null!=n)for(d=h;d<=t;d++)l[d]=i[d][n],c[d]=a[d];else if(null!=o)for(d=h;d<=t;d++)l[d]=i[d],c[d]=a[d][o];else l=i,c=a;for(d=h;d<=t;d++)c[d]+=e*l[d];if(null!=n&&null!=o)for(d=h;d<=t;d++)a[d][o]=c[d];else if(null!=n)for(d=h;d<=t;d++)a[d]=c[d];else if(null!=o)for(d=h;d<=t;d++)a[d][o]=c[d];else a=c}}function l(t){var e,i,s=t[0],a=t[1],r=t[2]||1,n=t[3]||0,o=a;Math.abs(s)>Math.abs(a)&&(o=s);var h=Math.abs(s)+Math.abs(a);return 0==h?(r=1,n=0,e=0,i=0):(e=h*Math.sqrt(Math.pow(s/h,2)+Math.pow(a/h,2)),r=s/(e=I(1,o)*e),n=a/e,i=1,Math.abs(s)>Math.abs(a)&&(i=n),Math.abs(a)>=Math.abs(s)&&0!=r&&(i=1/r)),[s=e,a=i,r,n]}function c(t,e,i,s,a,r,n,o,h,l){if(!(t<=0)){null==l?l=1:t+=l-1;for(var c=l;c<=t;c++){var d=r*e[c][o]+n*s[c][h];s[c][h]=r*s[c][h]-n*e[c][o],e[c][o]=d}}}function d(t,e,i,a,r,n,l,c,d,p,g,u){var m=u/1e4!=0,f=u%1e4!=0,y=u%1e3/100!=0,x=u%100/10!=0,v=u%10!=0,b=Math.min(a,i-1);if(0==b){if(m&&(l[1]=n[1]),f&&(c[1]=n[1]),v&&(g[1]=n[1]),y){if(0==t[1][1])throw new Error("Error in dqrsl x[1][1] = 0.0");d[1]=n[1]/t[1][1]}throw x&&(p[1]=0),new Error("Error in dqrsl")}if(m&&s(i,n,0,l),f&&s(i,n,0,c),m)for(var A=1;A<=b;A++){if(0!=r[C=b-A+1]){var w=t[C][C];t[C][C]=r[C],h(i-C+1,-o(i-C+1,t,0,l,0,C,null,C)/t[C][C],t,0,l,0,C,null,C),t[C][C]=w}}if(f)for(var C=1;C<=b;C++)if(0!=r[C]){w=t[C][C];t[C][C]=r[C],h(i-C+1,-o(i-C+1,t,0,c,0,C,null,C)/t[C][C],t,0,c,0,C,null,C),t[C][C]=w}y&&s(a,c,0,d);var T=a+1;if(v&&s(a,c,0,g),x&&a<i&&s(i-a,c,0,p,0,T),v&&T<=i)for(var S=T;S<=i;S++)g[S]=0;if(x)for(S=1;S<=a;S++)p[S]=0;if(y)for(A=1;A<=a;A++){if(0==t[C=a-A+1][C])throw new Error("Error in dqrsl");if(d[C]=d[C]/t[C][C],1!=C)h(C-1,-d[C],t,0,d,0,C,null,1)}if(x||v)for(A=1;A<=b;A++){if(0!=r[C=b-A+1]){w=t[C][C];if(t[C][C]=r[C],x)h(i-C+1,-o(i-C+1,t,0,p,0,C,null,C)/t[C][C],t,0,p,0,C,null,C);if(v)h(i-C+1,-o(i-C+1,t,0,g,0,C,null,C)/t[C][C],t,0,g,0,C,null,C);t[C][C]=w}}}function p(t,e){for(var i=[],s=t.length,a=t[1].length,r=0;r<s;r++){i[r]=[];for(var n=null==e?1:e;n<a;n++)i[r][n]=t[n][r]}return i}function g(t,e,i){return"interpolate"==t?"none"==e?surf_stat="interpolate/none":"exact"==e?surf_stat="interpolate/exact":"approximate"==e&&(surf_stat="approximate"==i?"interpolate/2.approx":"interpolate/1.approx"):"direct"==t&&("none"==e?surf_stat="direct/none":"exact"==e?surf_stat="direct/exact":"approximate"==e&&(surf_stat="direct/approximate")),surf_stat}function u(t,e,i,s,a,r,n,o){var h=Math.max(200,e),l=Math.min(e,Math.floor(e*i)),c=s>1?(t+2)*(t+1)*.5:t+1,d=c-n,p=[],g=[],u=50+(3*t+3)*h+e+(c+2)*l,m=50+(Math.pow(2,t)+4)*h+2*e;o&&(u+=(t+1)*l*h,m+=l*h),function(t,e,i,s,a,r,n,o,h,l,c){var d,p,g,u,m;106!=t&&y(100);e[28]=171,e[2]=r,e[3]=n,u=Math.pow(2,r),e[4]=u,0<o||y(120);p=Math.min(n,L(n*o)),e[19]=p,e[20]=1,0==h?d=1:1==h?d=r+1:2==h&&(d=(r+2)*(r+1)/2);e[29]=d,e[21]=1,e[14]=l,g=l,e[17]=g,e[30]=0,e[32]=h,h>=0||y(195);h<=2||y(195);e[33]=r;for(var f=41;f<=49;f++)e[f]=[,h];e[7]=50,e[8]=e[7]+g,e[9]=e[8]+u*g,e[10]=e[9]+g,e[22]=e[10]+g,m=e[22]-1;for(var x=1;x<=n;x++)e[m+x]=x;e[23]=e[22]+n,e[25]=e[23]+l,e[27]=c?e[25]+l*p:e[25];e[27]+n-1<=i||y(102);e[11]=50,e[13]=e[11]+l*r,e[12]=e[13]+(r+1)*l,e[15]=e[12]+g,e[16]=e[15]+n,e[18]=e[16]+p,e[24]=e[18]+e[29]*p,e[34]=e[24]+(r+1)*l,e[26]=c?e[34]+(r+1)*l*p:e[34];e[26]+p-1<=s||y(103);a[1]=o,a[2]=.05,a[3]=0,a[4]=1}(106,g,m,u,p,t,e,i,s,h,o);for(var f=0;f<t;f++)g[f+40]=r[f];return[g,m,p,u,d]}function m(t,e,i,s,a,r,n,o,h){for(var l=r[2],c=r[4]-1,d=r[5],p=r[6],g=r[7],u=r[11]-1,m=r[12],f=r[13],y=r[14],x=0;x<5;x++)t[x]=r[x+2];t[5]=r[22]-1,t[6]=r[15]-1;for(x=0;x<l;x++){var v=y*(x+1);s[x]=h[u+c],s[x+l]=h[u+c+v]}for(x=0;x<d;x++)i[x]=h[m+x],e[x]=r[g+x];for(v=(l+1)*p,x=0;x<v;x++)a[x]=h[f+x]}function f(t,e,i,s,a,r,n,o,h,l,c,d,p,g,f,y,x,v,b,A,w,C,T,k,L,I,z,O,X){var F,_=[],E=[];C=0,X&&function(t,e,i,s){t.unshift(void 0),e.unshift(void 0),i.unshift(void 0),s.unshift(void 0);for(var a=t.length,r=1;r<a;r++)t[r]=[void 0,t[r]]}(e,t,i,s);var V=u(a,r,n,o,0,l,c,L),H=V[0],G=V[1],q=V[2],j=V[3],U=V[4];if(q[2]=d,"interpolate/none"==p)N(e,t,s,0,0,H,G,j,q),B(H,G,j,q,r,e,f),m(y,x,v,b,A,H,0,0,q);else if("direct/none"==p)P(e,t,s,H,G,j,q,r,e,0,0,f);else if("interpolate/1.approx"==p){N(e,t,i,w,1,H,G,j,q),B(H,G,j,q,r,e,f),F=H[29];for(var Y=1;Y<=r;Y++)C+=w[Y];T=(V=M(C,r,a,U,F,T,k))[0],k=V[1],m(y,x,v,b,A,H,0,0,q)}else if("interpolate/2.approx"==p)N(e,t,s,0,0,H,G,j,q),B(H,G,j,q,r,e,f),F=H[29],T=(V=M(C=function(t,e,i,s){var a=D(1,t,e,i,n,r),r=a[0],n=a[1],o=(a=D(2,t,e,i,h,o))[0],h=a[1],l=(t-n)/(h-n);return(1-l)*r+l*o}(U,a,n),r,a,U,F,T,k))[0],k=V[1],m(y,x,v,b,A,H,0,0,q);else if("direct/approximate"==p){P(e,t,i,H,G,j,q,r,e,w,1,f),F=H[29];for(Y=1;Y<=r;Y++)C+=w[Y][1];T=(V=M(C,r,a,U,F,T,k))[0],k=V[1]}else if("interpolate/exact"==p)N(e,t,i,w,1,H,G,j,q),R(H,G,j,q,r,e,_),C=(V=S(r,_,E,C,T,k))[0],T=V[1],k=V[2],B(H,G,j,q,r,e,f),m(y,x,v,b,A,H,0,0,q);else if("direct/exact"==p){P(e,t,i,H,G,j,q,r,e,O,2,f),C=(V=S(r,O,E,C,T,k))[0],T=V[1],k=V[2];for(Y=1;Y<=r;Y++)w[Y]=O[Y][Y]}return p.match(/^direct/)?I&&function(t,e,i,s,a,r,n,o,h,l,c,d,p,g,m,f){var y=u(d,p,n,o,h,l,c,0),x=y[0],v=y[1],b=y[2],A=y[3];"gaussian"==r?P(e,t,s,x,v,A,b,g,i,f,2,m):"symmetric"==r&&(P(e,t,s,x,v,A,b,g,i,f,2,m),P(e,t,a,x,v,A,b,g,i,0,0,m))}(t,e,e,i,s,g,n,o,h,l,c,a,r,r,z,O):I&&function(t,e,i,s,a,r,n,o,h,l,c,d,p,g,m){var f=u(c,d,a,r,n,o,h,1),y=f[0],x=f[1],v=f[2],b=f[3];v[2]=l,N(e,t,s,0,0,y,x,b,v),R(y,x,b,v,p,i,m)}(t,e,e,i,n,o,h,l,c,d,a,r,r,0,O),[C,T,k,H,G,j,q]}function y(t){if(100==t)throw new TypeError("wrong version number in lowesd.  Probably typo in caller.");if(101==t)throw new TypeError("d>dMAX in ehg131.  Need to recompile with increased dimensions.");if(102==t)throw new TypeError("liv too small.   (Discovered by lowesd)");if(103==t)throw new TypeError("lv too small.    (Discovered by lowesd)");if(104==t)throw new TypeError("alpha too small.  fewer data values than degrees of freedom.");if(105==t)throw new TypeError("k>d2MAX in ehg136.  Need to recompile with increased dimensions.");if(106==t)throw new TypeError("lwork too small");if(107==t)throw new TypeError("invalid value for kernel");if(108==t)throw new TypeError("invalid value for ideg");if(109==t)throw new TypeError("lowstt only applies when kernel=1.");if(110==t)throw new TypeError("not enough extra workspace for robustness calculation");if(120==t)throw new TypeError("zero-width neighborhood. make alpha bigger");if(121==t)throw new TypeError("all data on boundary of neighborhood. make alpha bigger");if(122==t)throw new TypeError("extrapolation not allowed with blending");if(123==t)throw new TypeError("ihat=1 (diag L) in l2fit only makes sense ifz=x (eval=data).");if(171==t)throw new TypeError("lowesd must be called first.");if(172==t)throw new TypeError("lowesf must not come between lowesb and lowese, lowesr, or lowesl.");if(173==t)throw new TypeError("lowesb must come before lowese, lowesr, or lowesl.");if(174==t)throw new TypeError("lowesb need not be called twice.");if(180==t)throw new TypeError("nv>nvmax in cpvert.");if(181==t)throw new TypeError("nt>20 in eval.");if(182==t)throw new TypeError("svddc failed in l2fit.");if(183==t)throw new TypeError("didnt find edge in vleaf.");if(184==t)throw new TypeError("zero-width cell found in vleaf.");if(185==t)throw new TypeError("trouble descending to leaf in vleaf.");if(186==t)throw new TypeError("insufficient workspace for lowesf.");if(187==t)throw new TypeError("insufficient stack space");if(188==t)throw new TypeError("lv too small for computing explicit L");if(191==t)throw new TypeError("computed trace L was negative); something iswrong!");if(192==t)throw new TypeError("computed delta was negative); something is wrong!");if(193==t)throw new TypeError("workspace in loread appears to be corrupted");if(194==t)throw new TypeError("trouble in l2fit/l2tr");if(195==t)throw new TypeError("only constant, linear, or quadratic local models allowed");if(196==t)throw new TypeError("degree must be at least 1 for vertex influence matrix");if(999==t)throw new TypeError("not yet implemented")}function x(t,e,i,s){throw new TypeError(t,e,i,s)}function v(t,e,i,s){throw new TypeError(t,e,i,s)}function b(t,e,i,s,a,r,n,o,h,l,c,d,p){var g,u,m,f,x,v;f=e;for(var b=1;b<=h;b++)for(var A=1;A<=l;A++){i[f+=1]||(i[f]=[]);for(var w=1;w<=r;w++)i[f][w]=i[c[0]][w];for(i[f][n]=o,x=1,g=!(v=!1)&&x<=e;!g;){for(m=2,u=!!(v=i[x][1]==i[f][1])&&m<=r;!u;)v=i[x][m]==i[f][m],m+=1;x+=1}x-=1,v?f-=1:(x=f,s[1]>=0&&(s[x]=t)),d[0]=c[0],d[1]=x,p[0]=x,p[1]=c[1]}return(e=f)<=a||y(180),e}function A(t,e,i,s,a,r,n){for(var o=t,h=e;o<h;){var l=a[r[i]],c=o,d=h,p=r[o];for(r[o]=r[i],r[i]=p,l<a[r[h]]&&(p=r[o],r[o]=r[h],r[h]=p);c<d;){for(p=r[c],r[c]=r[d],r[d]=p,c+=1,d-=1;a[r[c]]<l;)c+=1;for(;l<a[r[d]];)d-=1}a[r[o]]==l?(p=r[o],r[o]=r[d],r[d]=p):(d+=1,p=r[h],r[h]=r[d],r[d]=p),d<=i&&(o=d+1),i<=d&&(h=d-1)}}function w(t,e,i,s,g,u,m,f,x,b,w,C,T,S,M,D,k,L,N,B,P,R,O,X,F,_,E,V,H){for(var G,q,j,U,Y,W,$,Q,K,J,Z,tt=[],et=Number.EPSILON,it=1;it<=e;it++)C[it]=0;for(var st=1;st<=_;st++){G=t[st];for(it=1;it<=e;it++)C[it]=C[it]+Math.pow(u[it][st]-G,2)}if(A(1,e,s,0,C,m),0<(U=C[m[s]]*Math.max(1,g))||y(120),2==b)for(var at=1;at<=s;at++)q=C[m[at]]<U?Math.sqrt(x[m[at]]):0,D[at]=q;else{for(it=1;it<=s;it++)D[it]=Math.sqrt(C[m[it]]/U);for(it=1;it<=s;it++)D[it]=Math.sqrt(x[m[it]]*Math.pow(1-Math.pow(D[it],3),3))}0==Math.abs(D[z(s,D,1)])&&(v("at ",t,_,1),v("radius ",U,1,1),y(121)),j=1;for(it=1;it<=s;it++)S[it]||(S[it]=[,[]]),S[it][j]=D[it];if(E>=1)for(st=1;st<=i;st++)if(V[st]>=1){j+=1,$=t[st];for(it=1;it<=s;it++)S[it][j]=D[it]*(u[m[it]][st]-$)}if(E>=2){for(st=1;st<=i;st++)if(V[st]>=1){if(V[st]>=2){j+=1,J=t[st];for(it=1;it<=s;it++)S[it][j]=D[it]*Math.pow(u[m[it]][st]-J,2)}for(var rt=st+1;rt<=i;rt++)if(V[rt]>=1){j+=1,Q=t[st],K=t[rt];for(it=1;it<=s;it++)S[it][j]=D[it]*(u[m[it]][st]-Q)*(u[m[it]][rt]-K)}}w=j}for(it=1;it<=s;it++)T[it]=D[it]*f[m[it]];for(st=1;st<=w;st++){Z=0;for(var nt=1;nt<=s;nt++)Z+=Math.pow(S[nt][st],2);if(0<(Z=Math.sqrt(Z))){for(it=1;it<=s;it++)S[it][st]=S[it][st]/Z;tt[st]=Z}else tt[st]=1}!function(t,e,i,s,l,c,d,p){var g,u,m,f,y,x,v,b,A,w,C,T;if(v=1,b=0,0!=p){for(var S=1;S<=s;S++)g=c[S]>0,A=c[S]<0,c[S]=S,A&&(c[S]=-S),g&&(S!=v&&r(i,t,0,t,0,S,1,v),c[S]=c[v],c[v]=S,v+=1);b=s;for(var M=1;M<=s;M++)c[S=s-M+1]<0&&(c[S]=-c[S],S!=b&&(r(i,t,0,t,0,b,S,1),f=c[b],c[b]=c[S],c[S]=f),b-=1)}if(b>=v)for(S=v;S<=b;S++)l[S]=a(i,t,1,S,1),d[S]=l[S];m=Math.min(i,s);for(var D=1;D<=m;D++){if(D>=v&&D<b){y=0,T=D;for(S=D;S<=b;S++)l[S]>y&&(y=l[S],T=S);T!=D&&(r(i,t,0,t,0,D,T,1),l[T]=l[D],d[T]=d[D],f=c[T],c[T]=c[D],c[D]=f)}if(l[D]=0,D!=i&&0!=(x=a(i-D+1,t,1,D,D))){if(0!=t[D][D]&&(x=I(x,t[D][D])),n(i-D+1,1/x,t,1,D,D),t[D][D]=1+t[D][D],s>=(u=D+1))for(S=u;S<=s;S++)h(i-D+1,C=-o(i-D+1,t,0,t,0,D,S,D)/t[D][D],t,0,t,0,D,S,D),S>=v&&S<=b&&0!=l[S]&&(w=1-Math.pow(Math.abs(t[D][S])/l[S],2),C=w=Math.max(w,0),1!=(w=1+.05*w*Math.pow(l[S]/d[S],2))&&(l[S]=l[S]*Math.sqrt(C)),l[S]=a(i-D,t,1,D+1,S),d[S]=l[S]);l[D]=t[D][D],t[D][D]=-x}}}(S,0,s,w,O,[],X,0),d(S,0,s,w,O,T,X,T,T,X,X,1e3);for(it=1;it<=w;it++)B[it]||(B[it]=[]);for(var ot=1;ot<=w;ot++)for(it=1;it<=w;it++)B[it][ot]=0;for(at=1;at<=w;at++)for(st=at;st<=w;st++)B[at][st]=S[at][st];!function(t,e,i,s,d,p,g,u,m){var f=0,y=!1,x=!1,v=m%100/10,b=e;v>1&&(b=Math.min(e,i)),0!=v&&(y=!0),m%10!=0&&(x=!0);var A=Math.min(e-1,i),w=Math.max(0,Math.min(i-2,e)),C=Math.max(A,w);if(C>=1)for(var T=1;T<=C;T++){var S=T+1;if(T<=A&&(s[T]=a(e-T+1,t,1,T,T),0!=s[T]&&(0!=t[T][T]&&(s[T]=I(s[T],t[T][T])),n(e-T+1,1/s[T],t,1,T,T),t[T][T]++),s[T]=-s[T]),i>=S)for(var M=S;M<=i;M++){if(T<=A&&0!=s[T])h(e-T+1,at=-o(e-T+1,t,0,t,0,T,M,T)/t[T][T],t,0,t,0,T,M,T);d[M]=t[T][M]}if(y&&T<=A)for(var D=T;D<=e;D++)p[D][T]=t[D][T];if(T<=w){if(d[T]=a(i-T,d,1,null,S),0!=d[T]&&(0!=d[S]&&(d[T]=I(d[T],d[S])),n(i-T,1/d[T],d,1,null,S),d[S]++),d[T]=-d[T],S<=e&&0!=d[T]){for(D=S;D<=e;D++)u[D]=0;for(M=S;M<=i;M++)h(e-T,d[M],t,0,u,0,M,null,S);for(M=S;M<=i;M++)h(e-T,-d[M]/d[S],u,0,t,0,null,M,S)}if(x)for(D=S;D<=i;D++)g[D]||(g[D]=[]),g[D][T]=d[D]}}var k=Math.min(i,e+1),L=A+1,z=w+1;if(A<i&&(s[L]=t[L][L]),e<k&&(s[k]=0),z<k&&(d[z]=t[z][k]),d[k]=0,y){if(b>=L){for(D=1;D<=e;D++)p[D]||(p[D]=[]);for(M=L;M<=b;M++){for(D=1;D<=e;D++)p[D][M]=0;p[M][M]=1}}if(A>=1)for(var N=1;N<=A;N++)if(0!=s[T=A-N+1]){if(b>=(S=T+1))for(M=S;M<=b;M++){h(e-T+1,at=-o(e-T+1,p,0,p,0,T,M,T)/p[T][T],p,0,p,0,T,M,T)}n(e-T+1,-1,p,1,T,T),p[T][T]++;var B=T-1;if(B>=1)for(D=1;D<=B;D++)p[D][T]=0}else{for(D=1;D<=e;D++)p[D][T]=0;p[T][T]=1}}if(x)for(N=1;N<=i;N++){S=(T=i-N+1)+1;if(T<=w&&0!=d[T])for(M=S;M<=i;M++){h(i-T,at=-o(i-T,g,0,g,0,T,M,S)/g[S][T],g,0,g,0,T,M,S)}for(D=1;D<=i;D++)g[D]||(g[D]=[]),g[D][T]=0;g[T][T]=1}for(var P,R,O=k,X=0;;){if(0==k)return 0;if(X>=30)throw new TypeError("Reached maximum iterations");for(N=1;N<=k&&0!=(T=k-N);N++)if((P=Math.abs(s[T])+Math.abs(s[T+1]))+Math.abs(d[T])==P){d[T]=0;break}if(T==k-1)R=4;else{for(var F=k+1,_=S=T+1;_<=F&&(f=k-_+S)!=T;_++)if(P=0,f!=k&&(P+=Math.abs(d[f])),f!=T+1&&(P+=Math.abs(d[f-1])),P+Math.abs(s[f])==P){s[f]=0;break}f==T?R=3:f==k?R=1:(R=2,T=f)}T++;var E=k-1;switch(R){case 1:var V=d[k-1];d[k-1]=0;for(var H=T;H<=E;H++){q=(st=l([q=s[G=E-H+T],V,et,it]))[0],V=st[1],et=st[2],it=st[3],s[G]=q,G!=T&&(V=-it*d[G-1],d[G-1]=et*d[G-1]),x&&c(i,g,0,g,0,et,it,G,k,1)}break;case 2:V=d[T-1];d[T-1]=0;for(var G=T;G<=k;G++){var q;q=(st=l([q=s[G],V,et,it]))[0],V=st[1],et=st[2],it=st[3],s[G]=q,V=-it*d[G],d[G]=et*d[G],y&&c(e,p,0,p,0,et,it,G,T-1,1)}break;case 3:var j=Math.max(Math.abs(s[k]),Math.abs(s[k-1]),Math.abs(d[k-1]),Math.abs(s[T]),Math.abs(d[T])),U=s[k]/j,Y=s[k-1]/j,W=d[k-1]/j,$=s[T]/j,Q=d[T]/j,K=((Y+U)*(Y-U)+Math.pow(W,2))/2,J=Math.pow(U*W,2),Z=0;0==K&&0==J||(Z=Math.sqrt(K*K+J),K<0&&(Z=-Z),Z=J/(K+Z));V=($+U)*($-U)+Z;var tt=$*Q;for(E=k-1,G=T;G<=E;G++){var et,it,st;V=(st=l([V,tt,et,it]))[0],tt=st[1],et=st[2],it=st[3],G!=T&&(d[G-1]=V),V=et*s[G]+it*d[G],d[G]=et*d[G]-it*s[G],tt=it*s[G+1],s[G+1]=et*s[G+1],x&&c(i,g,0,g,0,et,it,G,G+1,1),V=(st=l([V,tt,et,it]))[0],tt=st[1],et=st[2],it=st[3],s[G]=V,V=et*d[G]+it*s[G+1],s[G+1]=-it*d[G]+et*s[G+1],tt=it*d[G+1],d[G+1]=et*d[G+1],y&&G<e&&c(e,p,0,p,0,et,it,G,G+1,1)}d[k-1]=V,X++;break;case 4:for(s[T]<0&&(s[T]=-s[T],x&&n(i,-1,g,1,T,1));T!=O&&!(s[T]>s[T+1]);){var at=s[T];s[T]=s[T+1],s[T+1]=at,x&&T<i&&r(i,g,0,g,0,T,T+1,1),y&&T<e&&r(e,p,0,p,0,T,T+1,1),T+=1}X=0,k--}}}(B,w,w,N,[],B,P,X,21),F=N[1]*(100*et),k=Math.min(k,N[w]/N[1]),N[w]<=F&&(1==(L+=1)?(v("Warning. pseudoinverse used at",t,i,1),v("neighborhood radius",Math.sqrt(U),1,1),v("reciprocal condition number ",k,1,1)):2==L&&v("There are other near singularities as well.",U,1,1));for(st=1;st<=w;st++){Y=tt[st];for(it=1;it<=w;it++)P[st][it]=P[st][it]/Y}for(st=1;st<=w;st++)W=F<N[st]?o(w,B,0,T,0,st,null,1)/N[st]:0,R[st]=W;var ht=p(P);for(st=0;st<=M;st++)H[st]||(H[st]=[]),st<=w?H[st].push(o(w,ht,0,R,0,st+1,null,1)):H[st].push(0);return F}function C(t,e,i,s,r,n,h,l,c,g,u,m,f,x,v,C,T,S,M,D,L,I,N,B,P,R,O,_,E,V,H,G,q,j,U,Y,W,$,Q,K,J){c<=8||y(101),function(t,e,i,s,a,r){for(var n,o,h,l,c,d=Number.MAX_VALUE,p=1;p<=t;p++){l=d,o=-d;for(var g=1;g<=e;g++)c=s[g][p],l=Math.min(l,c),o=Math.max(o,c);l-=h=.005*Math.max(o-l,10*Math.max(Math.abs(l),Math.abs(o))+1-30),o+=h,a[1][p]=l,a[i][p]=o}for(g=2;g<=i-1;g++){n=g-1;for(p=1;p<=t;p++)a[g][p]=a[1+n%2*(i-1)][p],n/=2}}(c,l,m,t,N),f=m,g=1;for(var Z=1;Z<=m;Z++)S[Z]=[],S[Z][g]=Z,B[Z]=0;for(var tt=[],et=1;et<=c;et++)tt[et]=N[m][et]-N[1][et];H*=a(c,tt,1);for(var it=1;it<=l;it++)L[it]=it;var st=function(t,e,i,s,a,r,n,o,h,l,c,d,p,g,u,m,f,y,x,v,w){var C,T,S,M,D,k,L,I,N=1,B=t,P=e;p[N]=B,g[N]=P;for(var R=[],O=[],F=[],_=1;_<h.length;_++)F[_]=h[_][1];for(;N<=r;){for(var E=1;E<=w;E++)R[E]=m[u[o][N]][E]-m[u[1][N]][E];T=0;for(var V=1;V<=w;V++)T+=Math.pow(R[V],2);if(T=Math.sqrt(T),(M=!!(P-B+1<=x||T<=v)||(n<r+2||y<a+o/2))||(X(B,P,w,h,l,s,O),D=parseInt(z(w,O,1)),S=parseInt((B+P)/2),A(B,P,S,0,F,l),S+(I=0)>=P||S+I<B||(I<0?(L=B,C=k=S+I):(k=L=S+I+1,C=P),A(L,C,k,0,F,l),h[l[S+I]][D]==h[l[S+I+1]][D]?(I=-I)>=0&&(I+=1):S+=I),M=m[u[1][N]][D]==h[l[S]][D]||m[u[o][N]][D]==h[l[S]][D]),M)c[N]=0;else{c[N]=D,d[N]=h[l[S]][D],r+=1,p[N]=r,p[r]=B,g[r]=S,r+=1,g[N]=r,p[r]=S+1,g[r]=P;var H=[],G=[],q=[];for(_=1;_<=o;_++)H[_-1]=u[_][N],G[_-1]=0,q[_-1]=0;a=b(N,a,m,f,y,i,D,d[N],Math.pow(2,D-1),Math.pow(2,i-D),H,G,q),u[1].push(G[0]),u[2].push(G[1]),u[1].push(q[0]),u[2].push(q[1])}B=p[N+=1],P=g[N]}return[r,a]}(1,l,c,l,f,g,u,m,t,L,T,R,D,M,S,N,B,x,V,H,Y);g=st[0],f=st[1];for(et=0;et<=c;et++)q[et]=[];if(0!=s)for(var at=1;at<=f;at++)for(et=0;et<=c;et++)q[et][at]=0;return[s=function(t,e,i,s,a,r,n,h,l,c,g,u,m,f,x,v,b,A,C,T,S,M,D,L,I,z,N,B,P,R,O,X,_,E,V,H,G,q,j,U){var Y,W,$,Q,K=[],J=[],Z=[],tt=[],et=[],it=[],st=[],at=[],rt=[];x<=r-1||y(104);x<=15||y(105);if(0!=m){for(var nt=1;nt<=s;nt++)M[nt]=0;for(var ot=1;ot<=i;ot++)for(nt=0;nt<=a;nt++)D[nt][ot]=0}for(var ht=1;ht<=s;ht++)c[ht]=ht;for(var lt=0;lt<=a;lt++)U[lt]||(U[lt]=[]);for(lt=1;lt<=i;lt++){for(nt=1;nt<=a;nt++)K[nt]=t[lt][nt];if($=w(K,s,a,r,n,h,c,g,u,f,x,v,A,C,T,S,X,_,at,et,it,st,Z,tt,$,E,V,H,U),0!=m){for(nt=1;nt<=s;nt++)b[nt]=0;for(var ct=1;ct<=r;ct++)b[c[ct]]=ct;for(nt=1;nt<=a;nt++)J[nt]=t[lt][nt];Q=F(J,O[lt],rt,Q,a,i,e,L,I,z,N,B,P,R,t);for(var dt=1;dt<=Q;dt++)for(var pt=B[rt[dt]];pt<=P[rt[dt]];pt++)if(0!=(ct=b[l[pt]])){c[ct]!=l[pt]&&y(194);for(nt=1;nt<=r;nt++)A[nt]=0;A[ct]=S[ct],d(C,0,r,x,Z,A,tt,A,A,tt,tt,1e3);for(var gt=1;gt<=x;gt++)st[gt]=$<at[gt]?o(x,et,0,A,0,gt,null,1)/at[gt]:0;for(gt=1;gt<=a+1;gt++)D[gt-1][lt]=gt<=x?o(x,p(it),0,st,0,gt,null,1):0;for(nt=1;nt<=a;nt++)J[nt]=h[l[pt]][nt];W=k(J,a,L,I,z,N,B,P,R,t,e,D),M[l[pt]]=M[l[pt]]+W;for(nt=0;nt<=a;nt++)D[nt][lt]=0}}if(j){x>=a+1||y(196);for(nt=1;nt<=r;nt++)G[lt]||(G[lt]=[]),G[lt][nt]=c[nt];for(ot=1;ot<=r;ot++)for(nt=0;nt<=a;nt++)q[nt]||(q[nt]=[]),q[nt][lt]||(q[nt][lt]=[]),q[nt][lt][ot]=0;for(gt=1;gt<=x;gt++){for(nt=1;nt<=r;nt++)A[nt]=0;for(nt=1;nt<=x;nt++)A[nt]=et[nt][gt];d(C,0,r,x,Z,A,A,tt,tt,tt,tt,1e4),Y=$<at[gt]?1/at[gt]:0;for(nt=1;nt<=r;nt++)A[nt]=A[nt]*(Y*S[nt]);for(ct=1;ct<=r;ct++){var ut=A[ct];for(nt=0;nt<=a;nt++)q[nt][lt][ct]=nt<x?q[nt][lt][ct]+it[1+nt][gt]*ut:0}}}}if(0!=m)if(s<=0)m=0;else{for(var mt=s,ft=M[mt],yt=mt-1;yt>=1;yt--)ft=M[yt]+ft;m=ft}return m}(N,x,f,l,c,v,C,t,L,I,e,i,s,n,h,O,[],_,E,c,G,r,q,g,m,T,R,D,M,S,B,j,U,Y,W,$,Q,K,J,P),g,f]}function T(t,e,s,a,r,n,o,h,l){var c,d,p,g,u,m,f=[0,.297162,.380266,.5886043,.4263766,.3346498,.6271053,.5241198,.3484836,.6687687,.6338795,.4076457,.7207693,.1611761,.3091323,.4401023,.2939609,.3580278,.5555741,.397239,.4171278,.6293196,.4675173,.469907,.6674802,.2848308,.2254512,.2914126,.5393624,.251723,.389897,.7603231,.2969113,.474013,.9664956,.3629838,.5348889,.207567,.2822574,.2369957,.3911566,.2981154,.3623232,.5508869,.3501989,.4371032,.7002667,.4291632,.493037];return 0==s&&(o=1),1==s&&(o=r+1),2==s&&(o=(r+2)*(r+1)/2),c=Math.sqrt(a/e),p=(Math.sqrt(a/t)-c)/(1-c),0==n&&1<p&&v("Chernobyl! trL<k",t,1,1),p<0&&v("Chernobyl! trL>n",t,1,1),p=Math.min(1,Math.max(0,p)),d=Math.exp(function(t){var e=[],i=[void 0,[],[]],s=[],a=[],r=[],n=[void 0,[],[],[],[],[],[],[],[],[],[]],o=[[],[]];return e[1]=1,s[1]=3,a[1]=2,r[1]=.3705,i[1][1]=1,i[2][1]=2,e[2]=1,s[2]=5,a[2]=4,r[2]=.2017,i[1][2]=1,i[2][2]=3,e[3]=1,s[3]=7,a[3]=6,r[3]=.5591,i[1][3]=3,i[2][3]=2,e[4]=1,s[4]=9,a[4]=8,r[4]=.1204,i[1][4]=1,i[2][4]=4,e[5]=1,s[5]=11,a[5]=10,r[5]=.2815,i[1][5]=4,i[2][5]=3,e[6]=1,s[6]=13,a[6]=12,r[6]=.4536,i[1][6]=3,i[2][6]=5,e[7]=1,s[7]=15,a[7]=14,r[7]=.7132,i[1][7]=5,i[2][7]=2,e[8]=0,i[1][8]=1,i[2][8]=6,e[9]=0,i[1][9]=6,i[2][9]=4,e[10]=0,i[1][10]=4,i[2][10]=7,e[11]=0,i[1][11]=7,i[2][11]=3,e[12]=0,i[1][12]=3,i[2][12]=8,e[13]=0,i[1][13]=8,i[2][13]=5,e[14]=0,i[1][14]=5,i[2][14]=9,e[15]=1,s[15]=17,a[15]=16,r[15]=.8751,i[1][15]=9,i[2][15]=2,e[16]=0,i[1][16]=9,i[2][16]=10,e[17]=0,i[1][17]=10,i[2][17]=2,o[0][1]=-.090572,n[1][1]=-5,o[1][1]=4.4844,o[0][2]=-.010856,n[2][1]=1.005,o[1][2]=-.7736,o[0][3]=-.053718,n[3][1]=.3705,o[1][3]=-.3495,o[0][4]=.026152,n[4][1]=.2017,o[1][4]=-.7286,o[0][5]=-.058387,n[5][1]=.5591,o[1][5]=.1611,o[0][6]=.095807,n[6][1]=.1204,o[1][6]=-.7978,o[0][7]=-.031926,n[7][1]=.2815,o[1][7]=-.4457,o[0][8]=-.06417,n[8][1]=.4536,o[1][8]=.032813,o[0][9]=-.020636,n[9][1]=.7132,o[1][9]=.335,o[0][10]=.040172,n[10][1]=.8751,o[1][10]=-.041032,k([void 0,t],1,17,2,e,r,a,s,i,n,10,o)}(p)),i=1+3*(Math.min(r,4)-1+4*(s-1)),r<=4?(g=f[i],m=f[i+1],u=f[i+2]):(g=f[i]+(r-4)*(f[i]-f[i-3]),m=f[i+1]+(r-4)*(f[i+1]-f[i-2]),u=f[i+2]+(r-4)*(f[i+2]-f[i-1])),h=e-t*Math.exp(g*Math.pow(p,m)*Math.pow(1-p,u)*d),i+=24,r<=4?(g=f[i],m=f[i+1],u=f[i+2]):(g=f[i]+(r-4)*(f[i]-f[i-3]),m=f[i+1]+(r-4)*(f[i+1]-f[i-2]),u=f[i+2]+(r-4)*(f[i+2]-f[i-1])),[o,h,e-t*Math.exp(g*Math.pow(p,m)*Math.pow(1-p,u)*d)]}function S(t,e,i,s,a,r){for(var n=1;n<=t;n++)i[n]||(i[n]=[]),e[n][n]=e[n][n]-1;var h=p(e);for(n=1;n<=t;n++)for(var l=1;l<=n;l++)i[n][l]=o(t,h,0,h,0,n,l,1);for(n=1;n<=t;n++)for(l=n+1;l<=t;l++)i[n][l]=i[l][n];for(n=1;n<=t;n++)e[n][n]=e[n][n]+1;s=0,a=0;for(n=1;n<=t;n++)s+=e[n][n],a+=i[n][n];r=0;var c=p(i);for(n=1;n<=t;n++)r+=o(t,c,0,i,0,n,1,1,n);return[s,a,r]}function M(t,e,i,s,a,r,n){var o=T(t,e,1,s,i,a,h,l),h=o[0],l=o[1],c=o[2],d=T(t,e,2,s,i,a,p,g),p=d[0],g=d[1],u=d[2],m=(s-h)/(p-h);return[(1-m)*l+m*g,(1-m)*c+m*u]}function D(t,e,i,s,a,r){return a=0,1==t&&(a=i+1),2==t&&(a=(i+2)*(i+1)/2),g1=(-.08125*i+.13)*i+1.05,[a,a*(1+Math.max(0,(g1-s)/s))]}function k(t,e,i,s,a,r,n,o,h,l,c,d){var p,g,u,m,f,x,b,A,w,C,T,S,M,D,k,L,I,z,N,B,P,R,O,X,F,_,E,V,H=[],G=1,q=[];q[G]=1;for(var j=1;0!=a[j];)G+=1,V=t[a[j]]<=r[j]?n[j]:o[j],q[G]=V,G<20||y(181),j=q[G];for(var U=0;U<=e;U++)H[U]=[];for(var Y=1;Y<=s;Y++)for(U=0;U<=e;U++)H[U][Y]=d[U]?d[U][h[Y][j]]:0;B=s,O=h[1][j],_=h[s][j];for(var W=e;W>=1;W--){(T=(t[W]-l[O][W])/(l[_][W]-l[O][W]))<-.001?(v("eval ",t,e,1),v("lowerlimit ",l[O][1],e,c)):1.001<T&&(v("eval ",t,e,1),v("upperlimit ",l[_][1],e,c)),-.001<=T&&T<=1.001||y(122),B/=2;for(var $=1;$<=B;$++){M=Math.pow(1-T,2)*(1+2*T),x=T*T*(3-2*T),N=T*(1-T)*(1-T),R=T*T*(T-1),H[0][$]=M*H[0][$]+x*H[0][$+B]+(N*H[W][$]+R*H[W][$+B])*(l[_][W]-l[O][W]);for(var Q=1;Q<=W-1;Q++)H[Q][$]=M*H[Q][$]+x*H[Q][$+B]}}if(u=H[0][1],2==e){E=l[O][1],A=l[_][1];for(U=0;U<=e;U++)p[U]=d[U][h[3][j]];for(U=0;U<=e;U++)P[U]=d[U][h[4][j]];for(z=l[_][2],D=0==(C=G-1)||2==a[q[C]]&&r[q[C]]==z;!D;)C-=1;if(C>=1){for(C=o[q[C]];0!=a[C];)C=t[a[C]]<=r[C]?n[C]:o[C];if(E<l[h[1][C]][1]){E=l[h[1][C]][1];for(U=0;U<=e;U++)p[U]=d[U][h[1][C]]}if(l[h[2][C]][1]<A){A=l[h[2][C]][1];for(U=0;U<=e;U++)P[U]=d[U][h[2][C]]}}x=(T=(t[1]-E)/(A-E))*T*(3-2*T),N=T*(1-T)*(1-T),R=T*T*(T-1),m=(M=(1-T)*(1-T)*(1+2*T))*p[0]+x*P[0]+(N*p[1]+R*P[1])*(A-E),k=M*p[2]+x*P[2],E=l[O][1],A=l[_][1];for(U=0;U<=e;U++)p[U]=d[U][h[1][j]];for(U=0;U<=e;U++)P[U]=d[U][h[2][j]];for(z=l[O][2],g=0==(C=G-1)||2==a[q[C]]&&r[q[C]]==z;!g;)C-=1;if(C>=1){for(C=n[q[C]];0!=a[C];)C=t[a[C]]<=r[C]?n[C]:o[C];if(E<l[h[3][C]][1]){E=l[h[3][C]][1];for(U=0;U<=e;U++)p[U]=d[U][h[3][C]]}if(l[h[4][C]][1]<A){A=l[h[4][C]][1];for(U=0;U<=e;U++)P[U]=d[U][h[4][C]]}}x=(T=(t[1]-E)/(A-E))*T*(3-2*T),N=T*(1-T)*(1-T),R=T*T*(T-1),I=(M=(1-T)*(1-T)*(1+2*T))*p[0]+x*P[0]+(N*p[1]+R*P[1])*(A-E),f=M*p[2]+x*P[2],E=l[O][2],A=l[_][2];for(U=0;U<=e;U++)p[U]=d[U][h[2][j]];for(U=0;U<=e;U++)P[U]=d[U][h[4][j]];for(z=l[_][1],L=0==(C=G-1)||1==a[q[C]]&&r[q[C]]==z;!L;)C-=1;if(C>=1){for(C=o[q[C]];0!=a[C];)C=t[a[C]]<=r[C]?n[C]:o[C];if(E<l[h[1][C]][2]){E=l[h[1][C]][2];for(U=0;U<=e;U++)p[U]=d[U][h[1][C]]}if(l[h[3][C]][2]<A){A=l[h[3][C]][2];for(U=0;U<=e;U++)P[U]=d[U][h[3][C]]}}x=(T=(t[2]-E)/(A-E))*T*(3-2*T),N=T*(1-T)*(1-T),R=T*T*(T-1),b=(M=(1-T)*(1-T)*(1+2*T))*p[0]+x*P[0]+(N*p[2]+R*P[2])*(A-E),X=M*p[1]+x*P[1],E=l[O][2],A=l[_][2];for(U=0;U<=e;U++)p[U]=d[U][h[1][j]];for(U=0;U<=e;U++)P[U]=d[U][h[3][j]];for(z=l[O][1],F=0==(C=G-1)||1==a[q[C]]&&r[q[C]]==z;!F;)C-=1;if(C>=1){for(C=n[q[C]];0!=a[C];)C=t[a[C]]<=r[C]?n[C]:o[C];if(E<l[h[2][C]][2]){E=l[h[2][C]][2];for(U=0;U<=e;U++)p[U]=d[U][h[2][C]]}if(l[h[4][C]][2]<A){A=l[h[4][C]][2];for(U=0;U<=e;U++)P[U]=d[U][h[4][C]]}}x=(T=(t[2]-E)/(A-E))*T*(3-2*T),N=T*(1-T)*(1-T),R=T*T*(T-1),S=(M=(1-T)*(1-T)*(1+2*T))*p[0]+x*P[0]+(N*p[2]+R*P[2])*(A-E),w=M*p[1]+x*P[1],u=(M=(1-(T=(t[2]-l[O][2])/(l[_][2]-l[O][2])))*(1-T)*(1+2*T))*I+(x=T*T*(3-2*T))*m+((N=T*(1-T)*(1-T))*f+(R=T*T*(T-1))*k)*(l[_][2]-l[O][2])+((M=(1-(T=(t[1]-l[O][1])/(l[_][1]-l[O][1])))*(1-T)*(1+2*T))*S+(x=T*T*(3-2*T))*b+((N=T*(1-T)*(1-T))*w+(R=T*T*(T-1))*X)*(l[_][1]-l[O][1]))-u}return u}function L(t){return Math.floor(t)}function I(t,e){var i=Math.abs(t);return e>=0?i:-i}function z(t,e,i){var s,a;if(t<1)return 0;if(1==t)return 1;if(1!=i){a=1,s=Math.abs(e[1]),a+=i;for(var r=2;r<=t;r++){if(Math.abs(e[a])>s)return r;a+=i}}s=Math.abs(e[1]);for(r=2;r<=t;r++)if(Math.abs(e[r])>s)return r;return 1}function N(t,e,i,s,a,r,n,o,h){173==r[28]&&y(174),172!=r[28]&&171!=r[28]&&y(171),r[28]=173;var l=a?1:0,c=r[27]!=r[25];r[r[7]]=[],r[r[8]]=[],r[r[9]]=[],r[r[10]]=[],r[r[22]]=[],r[r[27]]=[],h[r[11]]=[[],[],[]],r[r[23]]=[],h[r[13]]=[],h[r[12]]=[],h[r[15]]=[],h[r[16]]=[],h[r[18]]=[],h[r[26]]=[],h[r[24]]=[],r[r[25]]=[],h[r[34]]=[];var d=C(t,e,i,l,s,r[20],r[29],r[3],r[2],r[5],r[17],r[4],r[6],r[14],r[19],h[1],r[r[7]],r[r[8]],r[r[9]],r[r[10]],r[r[22]],r[r[27]],h[r[11]],r[r[23]],h[r[13]],h[r[12]],h[r[15]],h[r[16]],h[r[18]],L(r[3]*h[2]),h[3],h[r[26]],h[r[24]],h[4],r[30],r[33],r[32],r[41],r[r[25]],h[r[34]],c);return l=d[0],r[5]=d[1],r[6]=d[2],r[14]<r[6]+r[4]/2?x("Warning. k-d tree limited by memory; nvmax=",r[14],1,1):r[17]<r[5]+2&&x("Warning. k-d tree limited by memory. ncmax=",r[17],1,1),l}function B(t,e,i,s,a,r,n){172==t[28]&&y(172),173!=t[28]&&y(173),function(t,e,i,s,a,r,n,o,h,l,c,d,p,g,u,m){for(var f=0;f<d.length;f++)d[f].unshift(void 0);var y=[];for(f=1;f<=g;f++){for(var x=1;x<=e;x++)y[x]=u[f][x];m[f]=k(y,e,r,i,n,p,l,h,o,c,s,d)}}(t[3],t[2],t[4],t[14],t[5],t[17],t[t[7]],t[t[8]],t[t[9]],t[t[10]],s[t[11]],s[t[13]],s[t[12]],a,r,n)}function P(t,e,i,a,r,n,h,l,c,g,u,m){171<=a[28]&&a[28]<=174||y(171),a[28]=172,a[14]>=a[19]||y(186),a[a[22]]=[],h[a[15]]=[],h[a[16]]=[],h[a[18]]=[],h[a[26]]=[];var f=[];!function(t,e,i,a,r,n,h,l,c,g,u,m,f,x,v,b,A,C,T,S,M,D,k,L,I,z){var N,B,P,R=[],O=[],X=[],F=[],_=[],E=[],V=[],H=[],G=[];f<=n-1||y(104),f<=15||y(105);for(var q=1;q<=a;q++)c[q]=q;for(var j=1;j<=i;j++){for(var U=1;U<=r;U++)O[U]=t[j][U];if(C[j]||(C[j]=[]),P=w(O,a,r,n,h,l,c,g,u,m,f,x,v,b,A,S,M,D,V,_,R,E,X,F,P,k,L,I,z),1==T){for(i!=a&&y(123),W=1;j!=c[W];)(W+=1)<n||y(123);for(U=1;U<=n;U++)v[U]=0;v[W]=S[W],d(b,0,n,f,X,v,H,G,[],[],[],1e3),s(n,G,0,v);for(U=1;U<=f;U++)E[U]=0;for(var Y=1;Y<=f;Y++){N=v[Y];for(U=1;U<=f;U++)E[U]+=N*_[Y][U]}for(Y=1;Y<=f;Y++)P<V[Y]?E[Y]/=V[Y]:E[Y]=0;C[j][1]=o(f,p(R),0,E,0,1,null,1)}else if(2==T){for(U=1;U<=a;U++)C[j][U]=0;for(Y=1;Y<=f;Y++){for(U=1;U<=n;U++)v[U]=0;for(U=1;U<=f;U++)v[U]=_[U][Y];d(b,0,n,f,X,v,H,[],[],[],[],1e4),s(n,H,0,v),B=P<V[Y]?1/V[Y]:0;for(U=1;U<=n;U++)v[U]*=B*S[U];for(var W=1;W<=n;W++)C[j][c[W]]+=R[1][Y]*v[W]}}}}(c,0,l,a[3],a[2],a[19],h[1],t,a[a[22]],e,i,a[20],a[29],h[a[15]],h[a[16]],h[a[18]],0,g,u,h[a[26]],h[4],a[30],a[33],a[32],a[41],f);for(var x=0;x<f[0].length;x++)m[x+1]=f[0][x]}function R(t,e,i,s,a,r,n){172==t[28]&&y(172),173!=t[28]&&y(173),t[26]==t[34]&&y(175),function(t,e,i,s,a,r,n,o,h,l,c,d,p,g,u,m,f,y,x){for(var v,b,A=[],w=1;w<=a;w++){for(var C=1;C<=n;C++)for(var T=0;T<=s;T++)f[T][C]=0;for(var S=1;S<=n;S++){for(b=x[S][1],x[S][1]=w,v=r;x[S][v]!=w;)v-=1;if(x[S][1]=b,x[S][v]==w)for(T=0;T<=s;T++)f[T][S]=y[T][S][v]}for(S=1;S<=t;S++){i[S]||(i[S]=[]);for(T=1;T<=s;T++)A[T]=e[S][T];i[S][w]=k(A,s,o,h,l,c,d,p,g,u,m,f)}}}(a,r,n,t[2],t[3],t[19],t[6],t[17],t[4],t[t[7]],s[t[12]],t[t[10]],t[t[9]],t[t[8]],s[t[11]],t[14],s[t[24]],s[t[34]],t[t[25]])}function O(t,e,i,s){for(var a,r,n=1;n<=e;n++)i[n]=Math.abs(t[n]);for(var o=1;o<=e;o++)s[o]=o;if(A(1,e,r=L(e/2)+1,0,i,s),e-r+1<r?(A(1,r-1,r-1,0,i,s),a=3*(i[s[r]]+i[s[r-1]])):a=6*i[s[r]],a<Number.MIN_VALUE)for(n=1;n<=e;n++)i[n]=1;else for(var h=1;h<=e;h++).999*a<i[h]?i[h]=0:.001*a<i[h]?i[h]=Math.pow(1-Math.pow(i[h]/a,2),2):i[h]=1}function X(t,e,i,s,a,r,n){for(var o,h,l,c=Number.MAX_VALUE,d=1;d<=i;d++){h=c,l=-c;for(var p=t;p<=e;p++)o=s[a[p]][d],h=Math.min(h,s[a[p]][d]),l=Math.max(l,o);n[d]=l-h}}function F(t,e,i,s,a,r,n,o,h,l,c,d,p,g,u){var m=[],f=0,x=1;for(s=0;0<x;)0==l[x]?(i[s+=1]=x,x=f>=1?m[f]:0,f=Math.max(0,f-1)):t[l[x]]==c[x]?((f+=1)<=20||y(187),m[f]=p[x],x=d[x]):x=t[l[x]]<=c[x]?d[x]:p[x];return s<=256||y(185),s}var _=function(t,i){for(var s=[],a=0;a<t[0].length;a++)s[a]=a;s.sort((function(e,i){return t[0][e]-t[0][i]}));var r=[],n=[],o=!!t[2]&&[];for(a=0;a<s.length;a++)r[a]=t[0][s[a]],n[a]=t[1][s[a]],t[2]&&(o[a]=t[2][s[a]]);if(!i){i=[];for(a=0;a<n.length;a++)i[a]=1,s[a]=a}var h=e.loessSpan,l=e.loessDegree,c=e.loessNormalize,d=[],p=[];for(a=0;a<8;a++)d[a]=!1,p[a]=!1;var u=e.loessFamily,m=e.loessSurface,y=e.loessStatistics,x=e.loessCell,v="wait.to.decide",b="gaussian"==u?0:e.loessIterations,w="",C=e.showConfidenceIntervals&&t[0].length<2e3,T=o?2:1,S=r.length;"wait.to.decide"==v&&(v="interpolate"==m?S<500?"exact":"approximate":"exact");var M=v,D=0,k=0,I=0,z=h*x,N=[];for(a=0;a<S;a++)N[a]=1;var B=[];for(a=0;a<S*T;a++)B[a]=r[a];var P=[];if(c&&T>1){var R=Math.ceil(.1*S);for(a=0;a<T;a++){for(var X=a*S,F=[],_=0;_<S;_++)F[_]=r[X+_];F=F.sort((function(t,e){return t-e}));var E=0;for(_=R;_<=S-R-1;_++)E+=F[_];var V=E/(S-2*R);E=0;for(_=R;_<=S-R-1;_++)F[_]-=V,E+=F[_]*F[_];P[a]=Math.sqrt(E/(S-2*R-1));for(_=0;_<S;_++){B[Z=X+_]=r[Z]/P[a]}}}else for(a=0;a<T;a++)P[a]=1;_=T-1;var H=0,G=0,q=0,j=[],U=[],Y=[],W=[],$=[],Q=[],K=[],J=[];for(a=0;a<T;a++)H+=p[a],G+=d[a],d[a]?K[_--]=a:K[q++]=a;for(a=0;a<T;a++){J[a]=2-p[K[a]];X=a*S;var Z=K[a]*S;for(_=0;_<S;_++)r[X+_]=B[Z+_]}if(1==l&&H)throw new Error("Specified the square of a factor predictor to be dropped when degree = 1");if(1==T&&H)throw new Error("Specified the square of a predictor to be dropped with only one numeric predictor");if(G==T)throw new Error("Specified parametric for all predictors");var tt,et,it,st,at,rt,nt=[],ot=[],ht=[],lt=[],ct=[],dt=(F=[],[]),pt=[],gt=[];for(_=0;_<=b;_++){var ut=_?"none":y;if(0==_)for(a=0;a<S;a++)N[a]=i[a]*N[a];else for(a=1;a<=S;a++)N[a]=i[a]*N[a];for(tt=(ct=f(n,r,i,N,T,S,h,l,q,J,H,z,w=g(m,ut,M),u,nt,j,U,Y,W,$,Q,tt,et,it,"interpolate/exact"==w,C,gt,pt,0==_))[0],et=ct[1],it=ct[2],0==_&&(I=tt,D=et,k=it),a=1;a<=S;a++)ot[a]=n[a]-nt[a];_<b&&O(ot,S,N,F)}if(b>0)for(function(t,e,i,s,a,r,n){for(var o,h,l,c,d,p,g=1;g<=t;g++)n[g]=Math.abs(e[g]-i[g])*Math.sqrt(s[g]);for(var u=1;u<=t;u++)r[u]=u;o=L(t/2)+1,A(1,t,o,1,n,r,t),t-o+1<o?(A(1,o-1,o-1,1,n,r,t),h=(n[r[o-1]]+n[r[o]])/2):h=n[r[o]];l=Math.pow(6*h,2)/5;for(g=1;g<=t;g++)n[g]=1-Math.pow(e[g]-i[g],2)*s[g]/l;for(g=1;g<=t;g++)n[g]=n[g]*Math.sqrt(a[g]);if(t<=0)p=0;else{d=n[c=t];for(var m=c-1;m>=1;m--)d=n[m]+d;p=d}l=t/p;for(g=1;g<=t;g++)n[g]=i[g]+l*a[g]*(e[g]-i[g])}(S,n,nt,i,N,F,lt),st=(ct=f(lt,r,i,i,T,S,h,l,q,J,H,z,w,u,F,[],[],[],[],[],[],st,at,rt,0,C,gt,pt))[0],at=ct[1],rt=ct[2],a=1;a<=S;a++)ht[a]=lt[a]-F[a];var mt=0;if(0==b)for(a=1;a<=S;a++)mt+=i[a]*ot[a]*ot[a];else for(a=1;a<=S;a++)mt+=i[a]*ht[a]*ht[a];var ft=D+2*I-S,yt=Math.sqrt(mt/D),xt=D*D/k,vt=e.qt(1-.975,xt),bt=[];if(function(t,e,i,s){t.shift(),e.shift(),i.shift(),s.shift();for(var a=t.length,r=0;r<a;r++)t[r]=t[r][1]}(r,n,i,N),nt.shift(),C){pt=function(t){for(var e=[],i=t.length,s=t[1].length,a=1;a<i;a++){e[a-1]=[];for(var r=1;r<s;r++)e[a-1][r-1]=t[a][r]}return e}(pt);for(a=0;a<S;a++)for(_=0;_<S;_++)pt[a][_]/=i[a],pt[a][_]*=pt[a][_];for(a=0;a<S;a++){var At=0;for(_=0;_<S;_++)At+=pt[a][_];dt[a]=yt*Math.sqrt(At),bt[a]=vt*dt[a]}}return{loess:{x:r,y:n,weights:i,robust:N,span:h,degree:l,normalize:c,y_fit:nt,cell:x,family:u,surface:m,statistics:y,trace_hat:v,iterations:b,order:s,residualScale:yt,df:xt,se:dt,confidence:bt},nObs:S,param:ft,resStdErr:yt}}(t);return{x:_.loess.x,y:_.loess.y_fit,se:_.loess.se,confidence:_.loess.confidence,order:_.loess.order,summary:"<b>Family</b>: "+_.loess.family+"<br><b>Parameters</b>: "+e.formatNumber(_.param)+"<br><b>Residual SE</b>: "+e.formatNumber(_.resStdErr)+"<br><b>n</>: "+_.nObs}}},CanvasXpress.prototype.initQuantreg=function(){this.rqfnb=function(t,e,i,s,a,r,n,o,h,l,c,d,p){var g=this.getFortranArrayColumn(l,t,0),u=this.getFortranArrayColumn(l,t,1),m=this.getFortranArrayColumn(c,e,0),f=this.getFortranArrayColumn(l,t,2),y=this.getFortranArrayColumn(l,t,3),x=this.getFortranArrayColumn(l,t,4),v=this.getFortranArrayColumn(l,t,5),b=this.getFortranArrayColumn(c,e,1),A=this.getFortranArrayColumn(l,t,6),w=this.getFortranArrayColumn(l,t,7),C=this.getFortranArrayColumn(l,t,8),T=this.getFortranArrayColumn(c,e,2),S=this.getFortramMatrix(this.getFortranArrayColumn(c,e,3),1,e);return p=this.lpfnb(t,e,i,s,a,r,n,o,h,g,u,m,f,y,x,v,b,A,w,C,T,S,d,p),this.putFortranArrayColumn(l,t,0,g),this.putFortranArrayColumn(l,t,1,u),this.putFortranArrayColumn(c,e,0,m),this.putFortranArrayColumn(l,t,2,f),this.putFortranArrayColumn(l,t,3,y),this.putFortranArrayColumn(l,t,4,x),this.putFortranArrayColumn(l,t,5,v),this.putFortranArrayColumn(c,e,1,b),this.putFortranArrayColumn(l,t,6,A),this.putFortranArrayColumn(l,t,7,w),this.putFortranArrayColumn(l,t,8,C),this.putFortranArrayColumn(c,e,2,T),this.putFortranArrayColumn(c,e,3,this.getFortramMatrix([],1,e,S)),p},this.lpfnb=function(t,e,i,s,a,r,n,o,h,l,c,d,p,u,m,f,y,x,v,b,A,w,C,T){var S=1e20;C[0]=0,C[1]=0,C[2]=t,this.dgemv("n",e,t,1,i,e,s,1,0,d,1);for(var M=0;M<t;M++)r[M]=1;if(0!=(T=this.stepy(t,e,i,r,d,w,T)))return T;this.dcopy(t,s,1,c,1),this.dgemv("t",e,t,-1,i,e,d,1,1,c,1);for(M=0;M<t;M++)Math.abs(c[M])<h?(p[M]=Math.max(c[M],0)+h,u[M]=Math.max(-c[M],0)+h):(p[M]=Math.max(c[M],0),u[M]=Math.max(-c[M],0)),c[M]=n[M]-l[M];for(var D=this.ddot(t,p,1,l,1)+this.ddot(t,u,1,c,1);D>h&&C[0]<500;){C[0]++;for(M=0;M<t;M++)r[M]=1/(p[M]/l[M]+u[M]/c[M]),f[M]=p[M]-u[M],x[M]=r[M]*f[M];if(this.dcopy(e,a,1,y,1),this.dgemv("n",e,t,-1,i,e,l,1,1,y,1),this.dgemv("n",e,t,1,i,e,x,1,1,y,1),this.dcopy(e,y,1,A,1),0!=(T=this.stepy(t,e,i,r,y,w,T)))return T;this.dgemv("t",e,t,1,i,e,y,1,-1,f,1);var k=S,L=S;for(M=0;M<t;M++)m[M]=r[M]*f[M],f[M]=-m[M],x[M]=-p[M]*(m[M]/l[M]+1),v[M]=-u[M]*(f[M]/c[M]+1),m[M]<0&&(k=Math.min(k,-l[M]/m[M])),f[M]<0&&(k=Math.min(k,-c[M]/f[M])),x[M]<0&&(L=Math.min(L,-p[M]/x[M])),v[M]<0&&(L=Math.min(L,-u[M]/v[M]));if(k=Math.min(o*k,1),L=Math.min(o*L,1),Math.min(k,L)<1){C[1]++,mu=this.ddot(t,l,1,p,1)+this.ddot(t,c,1,u,1),g=mu+k*this.ddot(t,m,1,p,1)+L*this.ddot(t,x,1,l,1)+k*L*this.ddot(t,x,1,m,1)+k*this.ddot(t,f,1,u,1)+L*this.ddot(t,v,1,c,1)+k*L*this.ddot(t,f,1,v,1),mu=mu*Math.pow(g/mu,3)/(2*t);for(M=0;M<t;M++)b[M]=r[M]*(mu*(1/c[M]-1/l[M])+m[M]*x[M]/l[M]-f[M]*v[M]/c[M]);this.dswap(e,A,1,y,1),this.dgemv("n",e,t,1,i,e,b,1,1,y,1),this.dpotrs("u",e,1,w,e,y,e,T),this.dgemv("t",e,t,1,i,e,y,1,0,n,1),k=S,L=S;for(M=0;M<t;M++)dxdz=m[M]*x[M],dsdw=f[M]*v[M],m[M]=r[M]*(n[M]-p[M]+u[M])-b[M],f[M]=-m[M],x[M]=-p[M]+(mu-p[M]*m[M]-dxdz)/l[M],v[M]=-u[M]+(mu-u[M]*f[M]-dsdw)/c[M],m[M]<0&&(k=Math.min(k,-l[M]/m[M])),f[M]<0&&(k=Math.min(k,-c[M]/f[M])),x[M]<0&&(L=Math.min(L,-p[M]/x[M])),v[M]<0&&(L=Math.min(L,-u[M]/v[M]));k=Math.min(o*k,1),L=Math.min(o*L,1)}this.daxpy(t,k,m,1,l,1),this.daxpy(t,k,f,1,c,1),this.daxpy(e,L,y,1,d,1),this.daxpy(t,L,x,1,p,1),this.daxpy(t,L,v,1,u,1),D=this.ddot(t,p,1,l,1)+this.ddot(t,u,1,c,1)}return this.daxpy(t,-1,u,1,p,1),this.dswap(t,p,1,l,1),T},this.stepy=function(t,e,i,s,a,r,n){for(var o=0;o<e;o++){r[o]=[];for(var h=0;h<e;h++)r[o][h]=0}for(var l=0;l<t;l++)this.dsyr("u",e,s[l],i[l],1,r,e);return n=this.dposv("u",e,1,r,e,a,e,n)},this.qfnb=function(t,e,i,s,a,r,n,o,h,l,c,d,p,g){for(var u=[],m=0;m<i;m++){if(this.dgemv("n",e,t,1-r[m],s,e,o,1,0,n,1),this.dscal(t,0,l,1),this.daxpy(t,1-r[m],h,1,l,1),0!=(g=this.rqfnb(t,e,s,a,n,o,h,.99995,1e-6,l,c,p,g)))return g;for(var f=0;f<t;f++)h[f]=1,o[f]=1;this.dcopy(e,c,1,d,1),u.push({tau:r[m],intercept:c[0],slope:c[1]})}return u},this.setRqfnb=function(t,e,i){for(var s=[],a=[],r=0;r<t.length;r++)s.push([1,t[r]]),a.push(e[r]);var n=s.length,o=i.length,h=this.rep(1,n),l=this.rep(1,n),c=[];for(r=0;r<9;r++)for(var d=0;d<n;d++)c.push(0);var p=[];for(r=0;r<5;r++)for(d=0;d<2;d++)p.push(0);var g=[];for(r=0;r<o;r++)for(d=0;d<2;d++)g.push(0);return this.qfnb(n,2,o,s,a,i,this.rep(0,2),h,l,c,p,g,this.rep(0,3),0)}},CanvasXpress.prototype.initLAPACK=function(){this.getFortranArrayColumn=function(t,e,i){for(var s=[],a=e*i,r=a+e,n=a;n<r;n++)s.push(t[n]);return s},this.putFortranArrayColumn=function(t,e,i,s){for(var a=e*i,r=a+e,n=(i=0,a);n<r;n++)t[n]=s[i],i++;return t},this.getFortramMatrix=function(t,e,i){for(var s=[],a=0,r=0;r<e;r++){s[r]=[];for(var n=0;n<i;n++)s[r][n]=t[a++]}return s},this.putFortramMatrix=function(t,e,i,s){for(var a=0,r=0;r<e;r++){s[r]=[];for(var n=0;n<i;n++)t[a]=s[r][n],a++}return t},this.dnrm2=function(t,e,i){if(t<1||i<1)return 0;if(1==t)return Math.abs(e[0]);for(var s=0,a=1,r=0;r<1+(t-1)*i;r+=i){var n=r;if(0!==e[n]){var o=Math.abs(e[n]);s<o?(a=1+a*Math.pow(s/o,2),s=o):a+=Math.pow(o/s,2)}}return s*Math.sqrt(a)},this.dtrmm=function(t,e,i,s,a,r,n,o,h,l,c){var d="l"===t,p=d?a:r,g="n"===s,u="u"===e,m=0;if(t.match(/l|r/)?e.match(/u|l/)?i.match(/n|t|c/)?s.match(/u|n/)?a<0?m=5:r<0?m=6:h<Math.max(1,p)?m=9:c<Math.max(1,a)&&(m=11):m=4:m=3:m=2:m=1,0!=m)throw new Error("dtrmm: "+m);if(0==a||0==r)return m;if(0==n){for(var f=0;f<r;f++)for(var y=0;y<a;y++)l[f][y]=0;return m}if(d)if("n"==i){if(u){for(f=0;f<r;f++)for(var x=0;x<a;x++)if(0!=l[f][x]){var v=n*l[f][x];for(y=0;y<x;y++)l[f][y]+=v*o[x][y];g&&(v*=o[x][x]),l[f][x]=v}}else for(f=0;f<r;f++)for(x=a-1;x>=0;x--)if(0!=l[f][x]){v=n*l[f][x];l[f][x]=v,g&&(l[f][x]*=o[x][x]);for(y=x+1;y<a;y++)l[f][y]+=v*o[x][y]}}else if(u)for(f=0;f<r;f++)for(y=a-1;y>=0;y--){v=l[f][y];g&&(v*=o[y][y]);for(x=0;x<y;x++)v+=o[y][x]*l[f][x];l[f][y]=n*v}else for(f=0;f<r;f++)for(y=0;y<a;y++){v=l[f][y];g&&(v*=o[y][y]);for(x=y+1;x<a;x++)v+=o[y][x]*l[f][x];l[f][y]=n*v}else if("n"==i)if(u)for(f=r-1;f>=0;f--){v=n;g&&(v*=o[f][f]);for(y=0;y<a;y++)l[f][y]*=v;for(x=0;x<f;x++)if(0!=o[f][x]){v=n*o[f][x];for(y=0;y<a;y++)l[f][y]+=v*l[x][y]}}else for(f=0;f<r;f++){v=n;g&&(v*=o[f][f]);for(y=0;y<a;y++)l[f][y]*=v;for(x=f+1;x<r;x++)if(0!=o[f][x]){v=n*o[f][x];for(y=0;y<a;y++)l[f][y]+=v*l[x][y]}}else if(u)for(x=0;x<r;x++){for(f=0;f<x;f++)if(0!==o[x][f]){var b=n*o[x][f];for(y=0;y<a;y++)l[f][y]+=b*l[x][y]}v=n;if(g&&(v*=o[x][x]),1!=v)for(y=0;y<a;y++)l[x][y]*=v}else for(x=r-1;x>=0;x--){for(f=x+1;f<r;f++)if(0!=o[x][f]){var A=n*o[x][f];for(y=0;y<a;y++)l[f][y]+=A*l[x][y]}v=n;if(g&&(v*=o[x][x]),1!=v)for(y=0;y<a;y++)l[x][y]*=v}return m},this.dsyr=function(t,e,i,s,a,r,n){var o=0;if("u"!=t&&"l"!=t?o=1:e<0?o=2:0===a?o=5:n<Math.max(1,e)&&(o=7),0!==o)throw new Error("dsyr: "+o);if(0==e||0==i)return o;var h=a<0?e-1:0,l=h;if("u"==t)for(var c=0;c<e;c++){if(0!==s[l])for(var d=i*s[l],p=h,g=0;g<=c;g++)r[c][g]+=s[p]*d,p+=a;l+=a}else for(c=0;c<e;c++){if(0!==s[l])for(d=i*s[l],p=l,g=c;g<e;g++)r[c][g]+=s[p]*d,p+=a;l+=a}return o},this.dsyrk=function(t,e,i,s,a,r,n,o,h,l){var c="u"==t,d="n"===e?i:s,p=0;if("u"!=t&&"l"!=t?p=1:"n"!=e&&"t"!=e&&"c"!=e?p=2:i<0?p=3:s<0?p=4:n<Math.max(1,d)?p=7:l<Math.max(1,i)&&(p=10),p)throw new Error("dsyrk: "+p);if(0==i||(0==a||0==s)&&1==o)return p;if(0==a){if(c)for(var g=0;g<i;g++)for(var u=0;u<=g;u++)h[g][u]=0==o?0:h[g][u]*o;else for(g=0;g<i;g++)for(u=g;u<i;u++)h[g][u]=0==o?0:h[g][u]*o;return p}if("n"==e)if(c)for(g=0;g<i;g++){for(u=0;u<=g;u++)h[g][u]=0==o?0:h[g][u]*o;for(var m=0;m<s;m++)if(0!=r[m][g]){var f=a*r[m][g];for(u=0;u<=g;u++)h[g][u]+=f*r[m][u]}}else for(g=0;g<i;g++){for(u=g;u<i;u++)h[g][u]=0==o?0:h[g][u]*o;for(m=0;m<s;m++)if(0!=r[m][g])for(f=a*r[m][g],u=g;u<i;u++)h[g][u]+=f*r[m][u]}else if(c)for(g=0;g<i;g++)for(u=0;u<=g;u++){for(f=0,m=0;m<s;m++)f+=r[u][m]*r[g][m];h[g][u]=0==o?a*f:a*f+o*h[g][u]}else for(g=0;g<i;g++)for(u=g;u<i;u++){for(f=0,m=0;m<s;m++)f+=r[u][m]*r[g][m];h[g][u]=0==o?a*f:a*f+o*h[g][u]}return p},this.dgemv=function(t,e,i,s,a,r,n,o,h,l,c){var d=0;if(t.match(/n|t|c/)?e<0?d=2:i<0?d=3:r<Math.max(1,e)?d=6:0==o?d=8:0==c&&(d=11):d=1,0!=d)throw new Error("dgemv: "+d);if(0==e||0==i||0==s&&1==h)return d;var p="n"==t?e:i,g=o>0?0:("n"==t?i:e)-1,u=c>0?0:p-1;if(1!=h)if(1==c)if(0==h)for(var m=0;m<p;m++)l[m]=0;else for(m=0;m<p;m++)l[m]*=h;else{var f=u;if(0==h)for(m=0;m<p;m++)l[f]=0,f+=c;else for(m=0;m<p;m++)l[f]*=h,f+=c}if(0==s)return d;if("n"==t){var y=g;if(1==c)for(var x=0;x<i;x++){var v=s*n[y];for(m=0;m<e;m++)l[m]+=v*a[x][m];y+=o}else for(x=0;x<i;x++){for(v=s*n[y],f=u,m=0;m<e;m++)l[f]+=v*a[x][m],f+=c;y+=o}}else{var b=u;if(1==o)for(x=0;x<i;x++){for(v=0,m=0;m<e;m++)v+=a[x][m]*n[m];l[b]+=s*v,b+=c}else for(x=0;x<i;x++){v=0;var A=g;for(m=0;m<e;m++)v+=a[x][m]*n[A],A+=o;l[b]+=s*v,b+=c}}return d},this.dgemm=function(t,e,i,s,a,r,n,o,h,l,c,d,p){var g="n"==t,u="n"==e,m=g?i:a,f=u?a:s,y=0;if(t.match(/n|t|c/)?e.match(/n|t|c/)?i<0?y=3:s<0?y=4:a<0?y=5:o<Math.max(1,m)?y=8:l<Math.max(1,f)?y=10:p<Math.max(1,i)&&(y=13):y=2:y=1,0!=y)throw new Error("dgemm: "+y);if(0==i||0==s||(0==r||0==a)&&1==c)return y;if(0==r){if(0==c)for(var x=0;x<s;x++)for(var v=0;v<i;v++)d[x][v]=0;else for(x=0;x<s;x++)for(v=0;v<i;v++)d[x][v]*=c;return y}if(u)if(g)for(x=0;x<s;x++){for(v=0;v<i;v++)d[x][v]=0==c?0:1!=c?d[x][v]*c:d[x][v];for(var b=0;b<a;b++){var A=r*h[x][b];for(v=0;v<i;v++)d[x][v]+=A*n[b][v]}}else for(x=0;x<s;x++)for(v=0;v<i;v++){for(A=0,b=0;b<a;b++)A+=n[v][b]*h[x][b];d[x][v]=0==c?r*A:r*A+c*d[x][v]}else if(g)for(x=0;x<s;x++){for(v=0;v<i;v++)d[x][v]=0==c?0:1!=c?d[x][v]*c:d[x][v];for(b=0;b<a;b++)for(A=r*h[b][x],v=0;v<i;v++)d[x][v]+=A*n[b][v]}else for(x=0;x<s;x++)for(v=0;v<i;v++){for(A=0,b=0;b<a;b++)A+=n[v][b]*h[b][x];d[x][v]=0==c?r*A:r*A+c*d[x][v]}return y},this.dcopy=function(t,e,i,s,a){if(!(t<=0))if(1==i&&1==a)for(var r=0;r<t;r++)s[r]=e[r];else{var n=i<0?t-1:0,o=a<0?t-1:0;for(r=0;r<t;r++)s[o]=e[n],n+=i,o+=a}},this.dswap=function(t,e,i,s,a){var r=0;if(!(t<=0))if(1==i&&1==a)for(var n=0;n<t;n++)r=e[n],e[n]=s[n],s[n]=r;else{var o=0,h=0;i<0&&(o=t-1),a<0&&(h=t-1);for(n=0;n<t;n++)r=e[o],e[o]=s[h],s[h]=r,o+=i,h+=a}},this.dscal=function(t,e,i,s){if(!(t<0||s<0))if(1==s)for(r=0;r<t;r++)i[r]*=e;else for(var a=t*s,r=0;r<a;r+=s)i[r]*=e},this.dlapy2=function(t,e){if(!isNaN(t)&&!isNaN(e)){var i=Math.abs(t),s=Math.abs(e),a=Math.max(i,s),r=Math.min(i,s);return 0==r?a:a*Math.sqrt(1+Math.pow(r/a,2))}},this.daxpy=function(t,e,i,s,a,r){if(!(t<=0)&&0!=e)if(1==s&&1==r)for(var n=0;n<t;n++)a[n]+=e*i[n];else{var o=0,h=0;s<0&&(o=t-1),r<0&&(h=t-1);for(n=0;n<t;n++)a[h]+=e*i[o],o+=s,h+=r}},this.ddot=function(t,e,i,s,a){var r=0;if(t<=0)return 0;if(1==i&&1==a)for(var n=0;n<t;n++)r+=e[n]*s[n];else{var o=0,h=0;i<0&&(o=t-1),a<0&&(h=t-1);for(n=0;n<t;n++)r+=e[o]*s[h],o+=i,h+=a}return r},this.dtrsm=function(t,e,i,s,a,r,n,o,h,l,c){var d="l"===t,p=d?a:r,g="n"==s,u="u"==e,m=0;if(t.match(/l|r/)?e.match(/u|l/)?i.match(/n|t|c/)?s.match(/u|n/)?a<0?m=5:r<0?m=6:h<Math.max(1,p)?m=9:c<Math.max(1,a)&&(m=11):m=4:m=3:m=2:m=1,0!==m)throw new Error("dtrsm: "+m);if(0==a||0==r)return m;if(0==n){for(var f=0;f<r;f++)for(var y=0;y<a;y++)l[f][y]=0;return m}if(d)if("n"==i)if(u)for(f=0;f<r;f++){if(1!=n)for(y=0;y<a;y++)l[f][y]*=n;for(var x=a-1;x>=0;x--)if(0!=l[f][x]){g&&(l[f][x]/=o[x][x]);for(y=0;y<x;y++)l[f][y]-=l[f][x]*o[x][y]}}else for(f=0;f<r;f++){if(1!=n)for(y=0;y<a;y++)l[f][y]*=n;for(x=0;x<a;x++)if(0!=l[f][x]){g&&(l[f][x]/=o[x][x]);for(y=x+1;y<a;y++)l[f][y]-=l[f][x]*o[x][y]}}else if(u)for(f=0;f<r;f++)for(y=0;y<a;y++){var v=n*l[f][y];for(x=0;x<y;x++)v-=o[y][x]*l[f][x];g&&(v/=o[y][y]),l[f][y]=v}else for(f=0;f<r;f++)for(y=a-1;y>=0;y--){for(v=n*l[f][y],x=y+1;x<a;x++)v-=o[y][x]*l[f][x];g&&(v/=o[y][y]),l[f][y]=v}else if("n"==i)if(u)for(f=0;f<r;f++){if(1!=n)for(y=0;y<a;y++)l[f][y]*=n;for(x=0;x<f;x++)if(0!=o[f][x])for(y=0;y<a;y++)l[f][y]-=o[f][x]*l[x][y];if(g)for(v=1/o[f][f],y=0;y<a;y++)l[f][y]*=v}else for(f=r-1;f>=0;f--){if(1!=n)for(y=0;y<a;y++)l[f][y]*=n;for(x=f+1;x<r;x++)if(0!==o[f][x])for(y=0;y<a;y++)l[f][y]-=o[f][x]*l[x][y];if(g)for(v=1/o[f][f],y=0;y<a;y++)l[f][y]*=v}else if(u)for(x=r-1;x>=0;x--){if(g)for(v=1/o[x][x],y=0;y<a;y++)l[x][y]*=v;for(f=0;f<x;f++)if(0!=o[x][f])for(v=o[x][f],y=0;y<a;y++)l[f][y]-=v*l[x][y];if(1!=n)for(y=0;y<a;y++)l[x][y]*=n}else for(x=0;x<r;x++){if(g)for(v=1/o[x][x],y=0;y<a;y++)l[x][y]*=v;for(f=x+1;f<r;f++)if(0!=o[x][f])for(v=o[x][f],y=0;y<a;y++)l[f][y]-=v*l[x][y];if(1!=n)for(y=0;y<a;y++)l[x][y]*=n}return m},this.dposv=function(t,e,i,s,a,r,n,o){o=0;if(t.match(/u|l/)?e<0?o=-2:i<0?o=-3:a<Math.max(1,e)?o=-5:n<Math.max(1,e)&&(o=-7):o=-1,0!=o)throw new Error("dposv: "+-o);return 0==(o=this.dpotrf(t,e,s,a,o))&&(o=this.dpotrs(t,e,i,s,a,r,n,o)),o},this.dpotrs=function(t,e,i,s,a,r,n){var o=0,h="u"==t;if(h||t.match(/l/)?e<0?o=-2:i<0?o=-3:a<Math.max(1,e)?o=-5:n<Math.max(1,e)&&(o=-7):o=-1,0!=o)throw new Error("dpotrs: "+-o);return 0==e||0==i||(h?(this.dtrsm("l","u","t","n",e,i,1,s,a,[r],n),this.dtrsm("l","u","n","n",e,i,1,s,a,[r],n)):(this.dtrsm("l","l","n","n",e,i,1,s,a,[r],n),this.dtrsm("l","t","n","n",e,i,1,s,a,[r],n))),o},this.dpotrf=function(t,e,i,s,a){a=0;if("u"==t||t.match(/l/)?e<0?a=-2:s<Math.max(1,e)&&(a=-4):a=-11,0!=a)throw new Error("dpotrf: "+-a);return 0==e?a:this.dpotrf2(t,e,i,s,a)},this.dpotrf2=function(t,e,i,s,a){a=0;if("u"==t||t.match(/l/)?e<0?a=-2:s<Math.max(1,e)&&(a=-4):a=-11,0!=a)throw new Error("dpotrf2: "+-a);return 0==e?a:this.chol("u",e,i,a)},this.chol=function(t,e,i,s){for(var a=[],r=0;r<e;r++){a[r]=[];for(var n=0;n<e;n++)a[r][n]=0}for(r=0;r<e;r++)for(var o=0;o<r+1;o++){var h=0;for(n=0;n<o;n++)h+=a[r][n]*a[o][n];a[r][o]=r==o?Math.sqrt(i[r][r]-h):1/a[o][o]*(i[r][o]-h)}if("u"==t)for(r=0;r<e;r++)for(n=0;n<e;n++)i[r][n]=a[r][n];else for(r=0;r<e;r++)for(n=0;n<e;n++)i[r][n]=a[n][r];return s}},CanvasXpress.prototype.initLayout=function(){this.isLayoutComb=function(){return!!(this.scatterPlotMatrix||this.isDOE||"Pie"==this.graphType&&!this.isDOE&&this.xAxis.length>1||"Circular"!=this.graphType&&(this.segregateVariablesBy.length||this.segregateSamplesBy.length))},this.isValidLayout=function(){var t=this.layoutTopology?this.layoutTopology.split(/X/i):this.layout.split(/X/i);if(this.layoutTopology||this.layout?(this.layoutRows=t[0],this.layoutCols=t[1]):(this.layoutRows=1,this.layoutCols=1,this.layoutValid=!1),!this.scatterPlotMatrix&&this.layoutComb&&this.data.l&&(this.data.l.vars||this.data.l.smps)&&this.data.l.weight&&this.data.l.type){if(this.data.l.comp=[],this.data.l.vars&&this.data.l.smps){for(var e={},i=0;i<this.data.y.vars.length;i++)e[this.data.y.vars[i]]||(e[this.data.y.vars[i]]=[]),e[this.data.y.vars[i]].push(i);var s={};for(i=0;i<this.data.y.smps.length;i++)s[this.data.y.smps[i]]||(s[this.data.y.smps[i]]=[]),s[this.data.y.smps[i]].push(i);var a=0,r=this.layoutTypeVariablesFirst;if("wrap"==this.layoutType||"cols"==this.layoutType&&r||"rows"==this.layoutType&&!r)for(i=0;i<this.data.l.smps.length;i++){for(var n=[],o=this.data.l.smps[i].length,h=0;h<o;h++)for(var l=0;l<s[this.data.l.smps[i][h]].length;l++)n.push(s[this.data.l.smps[i][h]][l]);for(h=0;h<this.data.l.vars.length;h++){var c=[];for(o=this.data.l.vars[h].length,l=0;l<o;l++)for(var d=0;d<e[this.data.l.vars[h][l]].length;d++)c.push(e[this.data.l.vars[h][l]][d]);this.data.l.comp[a]=[c,n],a++}}else for(i=0;i<this.data.l.vars.length;i++){for(c=[],o=this.data.l.vars[i].length,h=0;h<o;h++)for(l=0;l<e[this.data.l.vars[i][h]].length;l++)c.push(e[this.data.l.vars[i][h]][l]);for(h=0;h<this.data.l.smps.length;h++){for(n=[],o=this.data.l.smps[h].length,l=0;l<o;l++)for(d=0;d<s[this.data.l.smps[h][l]].length;d++)n.push(s[this.data.l.smps[h][l]][d]);this.data.l.comp[a]=[c,n],a++}}}else if(this.data.l.vars)if(this.isUnique(this.data.y.smps)){var p={},g=this.isHistogram?"smps":"vars";for(i=0;i<this.data.y[g].length;i++)p[this.data.y[g][i]]||(p[this.data.y[g][i]]=[]),p[this.data.y[g][i]].push(i);for(i=0;i<this.data.l.vars.length;i++){this.data.l.comp[i]=[];for(o=this.data.l.vars[i].length,h=0;h<o;h++)if(!this.isDOE&&this.data.l.vars[i][h])for(l=0;l<p[this.data.l.vars[i][h]].length;l++)this.data.l.comp[i].push(p[this.data.l.vars[i][h]][l])}}else for(i=0;i<this.data.l.ids.length;i++){this.data.l.comp[i]=[];for(o=this.data.l.ids[i].length,p={},h=0;h<this.data.l.ids[i].length;h++)p[this.data.y.vars[this.data.l.ids[i][h]]]||(p[this.data.y.vars[this.data.l.ids[i][h]]]=[]),p[this.data.y.vars[this.data.l.ids[i][h]]].push(this.data.l.ids[i][h]);for(h=0;h<o;h++)if(!this.isDOE)for(l=0;l<p[this.data.y.vars[this.data.l.ids[i][h]]].length;l++)this.data.l.comp[i].push(p[this.data.y.vars[this.data.l.ids[i][h]]][l])}else if(this.isUnique(this.data.y.smps)){for(p={},i=0;i<this.data.y.smps.length;i++)p[this.data.y.smps[i]]||(p[this.data.y.smps[i]]=[]),p[this.data.y.smps[i]].push(i);for(i=0;i<this.data.l.smps.length;i++){this.data.l.comp[i]=[];for(o=this.data.l.smps[i].length,h=0;h<o;h++)if(!this.isDOE)for(l=0;l<p[this.data.l.smps[i][h]].length;l++)this.data.l.comp[i].push(p[this.data.l.smps[i][h]][l])}}else for(i=0;i<this.data.l.ids.length;i++){this.data.l.comp[i]=[];for(o=this.data.l.ids[i].length,p={},h=0;h<this.data.l.ids[i].length;h++)p[this.data.y.smps[this.data.l.ids[i][h]]]||(p[this.data.y.smps[this.data.l.ids[i][h]]]=[]),p[this.data.y.smps[this.data.l.ids[i][h]]].push(this.data.l.ids[i][h]);for(h=0;h<o;h++)if(!this.isDOE)for(l=0;l<p[this.data.y.smps[this.data.l.ids[i][h]]].length;l++)this.data.l.comp[i].push(p[this.data.y.smps[this.data.l.ids[i][h]]][l])}this.layoutValid=!0}else if(this.layoutComb&&this.data.l&&this.data.l.smps&&this.data.l.weight&&this.data.l.type){this.data.l.comp=[];var u=[];for(i=0;i<this.data.y.vars.length;i++)u.push(i);for(i=0;i<this.data.l.type.length;i++)this.data.l.comp[i]=u;this.layoutValid=!0}else this.data.l&&this.data.l.comp&&this.data.l.comp.length<=this.layoutRows*this.layoutCols?this.layoutValid=!0:this.layoutValid=!1;this.layoutValid&&(this.meta.config.orig.adjustAspectRatio=this.adjustAspectRatio,this.adjustAspectRatio=!0,this.layoutComb=!0)},this.isLastInRowLayout=function(t,e){var i=e*Number(this.layoutRows)+t+Number(this.layoutRows);return!!this.isDOE||(this.scatterPlotMatrix?Number(e)==Number(this.layoutCols)-1||!this.data.l.smps[i].xAxis:Number(e)==Number(this.layoutCols)-1||!this.data.l.comp[i])},this.isLastInColumnLayout=function(t,e){var i=t*Number(this.layoutCols)+e+Number(this.layoutCols);return!!this.isDOE||(this.scatterPlotMatrix?this.scatterPlotMatrixType&&"both"==this.scatterPlotMatrixType&&!this.layoutAdjust?Number(t)==Number(this.layoutRows)-1:Number(t)==Number(this.layoutRows)-1||!this.data.l.smps[i].xAxis:this.data.l.hasOwnProperty("axes")?Number(t)==Number(this.layoutRows)-1||!this.data.l.axes[i]:Number(t)==Number(this.layoutRows)-1||!this.data.l.comp[i])},this.validateLayoutTopology=function(){var t=this.layoutTopology?this.layoutTopology.split(/X/i):this.layout.split(/X/i);if(this.layoutTopology){if(this.layoutRows==t[0]&&this.layoutCols==t[1])return}else if(this.layout&&this.layoutRows==t[0]&&this.layoutCols==t[1])return;this.isValidLayout();for(var e=1/this.layoutCols,i=1/this.layoutRows,s=0;s<this.data.l.comp.length;s++)this.data.l.weight[s]=[e,i]},this.setLayoutFonts=function(){this.setLegends(),this.graphType.match(/Scatter/)?this.set2DFont():"Pie"==this.graphType?this.setPieFont():this.set1DFont()},this.getLayoutAxisTitleHeight=function(t){return"Treemap"==this.graphType||"TagCloud"==this.graphType||"Pie"==this.graphType||"Heatmap"==this.graphType?0:this.graphType.match(/Scatter/)?t?this.yAxisTitle?this.axisTitleFontSize+2*this.margin:0:this.xAxisTitle?this.axisTitleFontSize+2*this.margin:0:(this.graphOrientation,""!=(t?this.getAxisDescription(!0):this.getAxisDescription())?this.axisTitleFontSize+2*this.margin:0)},this.setLayoutSameSamples=function(){var t=[];if(this.data.l.group&&this.data.l.smps){for(var e=0;e<this.data.l.smps.length;e++){for(var i={},s=0;s<this.data.l.ids[e].length;s++){for(var a=this.data.l.ids[e][s],r=[],n=0;n<this.data.l.group.length;n++){var o=this.data.l.group[n],h=this.getMetadataValue(a,"x",o,!0);null==h&&(h="NA"),r.push(h)}i[(r=r.sort()).join("")]=!0}t.push(Object.keys(i).sort())}for(s=1;s<t.length;s++)if(!this.isSameObject(t[s-1],t[s]))return void(this.layoutSameSamples=!1);this.layoutSameSamples=!0}else this.layoutSameSamples=!1},this.setLayoutLeft=function(){var t=0;return this.isDOE||"Meter"==this.graphType?t=0:(this.graphType.match(/Scatter/)?!this.layoutAdjust||this.scatterPlotMatrixType.match(/correlation|all/)?t+=this.get2DYAxisWidth():t+=this.getLayoutAxisTitleHeight():"Pie"==this.graphType?t=2*this.margin+this.measureText("XX",this.smpLabelFont):"Heatmap"==this.graphType?t=0:(this.layoutAdjust?"vertical"!=this.graphOrientation&&(this.segregateVariablesBy.length?t=this.getSampleLabelLength():this.segregateSamplesBy.length&&!this.layout.match(/X1/)&&(this.setLayoutSameSamples(),this.layoutSameSamples&&(t=this.getSampleLabelLength()))):this.segregateVariablesBy.length>0?t="vertical"!=this.graphOrientation?this.getSampleLabelLength():this.getAxisTitleTickLength():this.segregateSamplesBy.length>0&&"vertical"==this.graphOrientation&&(t=this.getAxisTitleTickLength()),"vertical"==this.graphOrientation?t+=this.getLayoutAxisTitleHeight():t+=this.smpTitle?this.smpTitleFontSize+2*this.margin:0),this.showLegend&&(t+="left"==this.legendPosition?this.legend.width:this.margin)),t},this.setLayoutRight=function(){var t=0,e="rows"==this.layoutType||"cols"==this.layoutType&&this.segregateVariablesBy.length+this.segregateSamplesBy.length>1;if(this.isDOE||"Meter"==this.graphType)t=0;else{if(this.graphType.match(/Scatter/))this.scatterPlotMatrix&&this.showScatterPlotMatrixLabels&&"first"!=this.scatterPlotMatrixType||"rows"==this.layoutType&&this.segregateVariablesBy.length+this.segregateSamplesBy.length>0||"cols"==this.layoutType&&this.segregateVariablesBy.length+this.segregateSamplesBy.length>1?t+=this.layoutLabelBoxThickness:"wrap"==this.layoutType||this.layoutAdjust;else if("Heatmap"==this.graphType){if(!("rows"==this.layoutType||"cols"==this.layoutType&&this.segregateVariablesBy.length+this.segregateSamplesBy.length>1))return 0;t+=this.layoutLabelBoxThickness}else this.layoutAdjust?t=0:"vertical"!=this.graphOrientation||e||(t=this.getAxisTitleTickLength(!0)),"vertical"!=this.graphOrientation||e||(t+=this.getLayoutAxisTitleHeight(!0)),e&&(t+=this.layoutLabelBoxThickness);this.showLegend&&(t+="right"==this.legendPosition&&this.legend.width?this.legend.width+2*this.margin:this.margin)}return t},this.setLayoutTop=function(){var t=0;if(this.isDOE)return this.title=this.meta.config.user.title,this.subtitle=this.meta.config.user.subtitle,t=this.getTitleSubtitleHeight(),this.title="",this.subtitle="",t;t=this.getTitleSubtitleHeight();var e="cols"==this.layoutType||"rows"==this.layoutType&&this.segregateVariablesBy.length+this.segregateSamplesBy.length>1;return"Pie"==this.graphType?t+=this.layoutLabelBoxThickness:this.graphType.match(/Scatter/)?(this.showLegend&&"top"==this.legendPosition&&(t+=this.legend.height),this.scatterPlotMatrix&&this.showScatterPlotMatrixLabels&&"first"!=this.scatterPlotMatrixType||"rows"==this.layoutType&&this.segregateVariablesBy.length+this.segregateSamplesBy.length>1||"cols"==this.layoutType&&this.segregateVariablesBy.length+this.segregateSamplesBy.length>0?t+=this.layoutLabelBoxThickness:"wrap"==this.layoutType||this.layoutAdjust):("Heatmap"!=this.graphType&&(this.showLegend&&"top"==this.legendPosition&&(t+=this.legend.height),this.layoutAdjust||"vertical"==this.graphOrientation||e||(t+=this.getAxisTitleTickLength()),"vertical"==this.graphOrientation||e||(t+=this.getLayoutAxisTitleHeight())),e&&(t+=this.layoutLabelBoxThickness)),t},this.setLayoutBottom=function(){var t=0;return this.isDOE||"Meter"==this.graphType?t=0:this.graphType.match(/Scatter/)?(!this.layoutAdjust||this.scatterPlotMatrixType.match(/correlation|all/)?t=this.get2DXAxisHeight():t+=this.getLayoutAxisTitleHeight(),this.showLegend&&"bottom"==this.legendPosition&&(t+=this.legend.height)):"Pie"==this.graphType?this.showLegend&&this.legendPosition:"Heatmap"==this.graphType?t=this.getHeatmapIndicatorHeight():(this.layoutAdjust||"vertical"!=this.graphOrientation&&(t=this.getAxisTitleTickLength(!0)),"vertical"==this.graphOrientation?(this.segregateVariablesBy.length>0?t=this.getSampleLabelLength():this.segregateSamplesBy.length&&!this.layout.match(/1X/)&&(this.setLayoutSameSamples(),this.layoutSameSamples&&(t=this.getSampleLabelLength())),t+=this.smpTitle?this.smpTitleFontSize+2*this.margin:0):(t+=this.getLayoutAxisTitleHeight("cols"!=this.layoutType),"rows"==this.layoutType&&this.isGroupedData&&(t+=this.axisTitleFontSize)),this.showLegend&&"bottom"==this.legendPosition&&(t+=this.getLegendHeight("bottom"))),t+=this.getCitationHeight()},this.drawLayoutSampleOverlays=function(t){var e=this.smpIndices;this.smpIndices=t,this.smpIndices=e,this.showSampleNames=!0,this.showOverlays=!0,this.draw1DYLayout()},this.setLayoutDimensions=function(){if(this.offsetX=0,this.offsetY=0,this.layoutLeft=this.setLayoutLeft(),this.layoutRight=this.setLayoutRight(),this.layoutTop=this.setLayoutTop(),this.layoutBottom=this.setLayoutBottom(),this.layoutCanvasCompartments){var t=this.width-(this.marginLeft+this.layoutLeft+this.marginRight+this.layoutRight),e=this.height-(this.marginTop+this.layoutTop+this.marginBottom+this.layoutBottom);this.toRender({p:["drawShape","rectangle",this.marginLeft+this.layoutLeft+t/2,this.marginTop+this.layoutTop+e/2,t,e,!1,this.canvasBoxColor,"open"],t:"Size"})}},this.setLayoutLegends=function(){var t=this.isGroupedData;this.isGroupedData=!1,this.setLayoutFonts(),"Pie"==this.graphType||this.isDOE?this.setVariableLegendDimension():this.graphType.match(/Scatter/)||this.isMultidimensionalData||(this.isAttributedGraph()||this.connectBy)&&this.graphType.match(/^Bar$|Boxplot|Dotplot|Treemap|Heatmap/)?(this.validatePropertyValues(!0),this.isHistogram&&this.setSampleLegendDimension()):this.setVariableLegendDimension(),this.isGroupedData=t},this.setLayoutDOETables=function(){this.isDOE&&!this.layoutDOETables&&(this.layoutDOETables={})},this.setLayoutSides=function(){for(var t=["layoutLeft","layoutRight","layoutTop","layoutBottom"],e=0;e<t.length;e++)this[t[e]]||(this[t[e]]=this.margin)},this.drawLabelsTitlesLayout=function(){this.setLayoutSides();var t=this.width-(this.marginLeft+this.layoutLeft+this.layoutRight+this.marginRight),e=this.height-(this.marginTop+this.layoutTop+this.layoutBottom+this.marginBottom);if("Treemap"!=this.graphType)if("Pie"==this.graphType&&this.showPieSampleLabel){var i=0;this.setMainFont();this.getFontPt(this.font);for(var s=this.marginTop,a=this.marginLeft+this.layoutLeft,r=0;r<this.layoutRows;r++){d=e*this.layoutParams[i].weight[1],this.marginLeft+this.layoutLeft-this.margin,s+=d;for(var n=0;n<this.layoutCols&&!(this.xAxis.length<=i);n++)a+=c=t*this.layoutParams[i].weight[0],this.marginTop+this.layoutTop-this.layoutLabelBoxThickness/2,this.showPieSampleLabel&&this.toRender({p:["drawText",this.xAxis[i],a-c/1.1,s-d/5,this.legendTextFont,this.foreground,"center","middle"],t:"LabelsTitle"}),i++;a=this.marginLeft+this.layoutLeft}}else if(this.graphType.match(/Scatter/)){if(this.yAxisTitle){var o=(this.height-(this.marginTop+this.layoutTop+this.marginBottom+this.layoutBottom))/2+(this.marginTop+this.layoutTop),h=this.marginLeft+this.margin+this.axisTitleFontSize/2+((this.showLegend&&"left"==this.legendPosition?this.legend.width:0)-this.margin);this.toRender({p:["drawText",this.yAxisTitle,h,o,this.axisTitleFont,this.axisTitleColor,"center","middle",-Math.PI/2],t:"LabelsTitle"})}if(this.xAxisTitle){var l=0,c=this.width-(this.marginLeft+this.layoutLeft+this.layoutRight+this.marginRight),d=this.marginBottom+this.margin+this.axisTitleFontSize/2+l+(this.showLegend&&"bottom"==this.legendPosition?this.legend.height:0)+this.getCitationHeight();this.toRender({p:["drawText",this.xAxisTitle,this.marginLeft+this.layoutLeft+c/2,this.height-d,this.axisTitleFont,this.axisTitleColor,"center","middle"],t:"LabelsTitle"})}if(this.zAxisTitle){o=(this.height-(this.marginTop+this.layoutTop+this.marginBottom+this.layoutBottom))/2+(this.marginTop+this.layoutTop),h=this.width-(this.axisTitleFontSize/2+((this.showLegend&&"right"==this.legendPosition?this.legend.width:0)+2*this.margin));this.toRender({p:["drawText","Size : "+this.zAxisTitle,h,o,this.axisTitleFont,this.axisTitleColor,"center","middle",Math.PI/2],t:"LabelsTitle"})}}else{if("Heatmap"==this.graphType&&this.draw1DXLayout(),this.smpTitle&&"Heatmap"!=this.graphType)if("vertical"==this.graphOrientation){l="bottom"==this.legendPosition?this.legend.height:0,c=this.width-(this.marginLeft+this.layoutLeft+this.layoutRight+this.marginRight),d=this.marginBottom+this.margin+this.smpTitleFontSize/2+l+ +this.getCitationHeight();this.toRender({p:["drawText",this.smpTitle,this.marginLeft+this.layoutLeft+c/2,this.height-d,this.smpTitleFont,this.smpTitleColor,"center","middle"],t:"LabelsTitle"})}else this.toRender({p:["drawText",this.smpTitle,this.marginLeft+this.margin+this.smpTitleFontSize/2,this.height/2,this.smpTitleFont,this.smpTitleColor,"center","middle",-Math.PI/2],t:"LabelsTitle"});var p=this.getAxisDescription(),g=this.getAxisDescription(!0,"rows"==this.layoutType&&this.isGroupedData);if(""!=p&&"Heatmap"!=this.graphType&&this.xAxisShow&&"rows"!=this.layoutType)if("vertical"==this.graphOrientation){h=this.marginLeft+this.margin+this.axisTitleFontSize/2+(this.showLegend&&"left"==this.legendPosition?this.legend.width:0),o=(this.height-this.layoutTop)/2+this.layoutTop;this.toRender({p:["drawText",p,h,o,this.axisTitleFont,this.axisTitleColor,"center","middle",-Math.PI/2],t:"LabelsTitle"})}else{c=this.width-(this.marginLeft+this.layoutLeft+this.layoutRight+this.marginRight);d="cols"==this.layoutType?this.marginTop+this.layoutTop+this.layoutHeight+this.getTitleSubtitleHeight():this.margin+this.axisTitleFontSize/2+this.getTitleSubtitleHeight()+(this.showLegend&&"top"==this.legendPosition?this.legend.height:0),this.toRender({p:["drawText",p,this.marginLeft+this.layoutLeft+c/2,this.marginTop+d,this.axisTitleFont,this.axisTitleColor,"center","middle"],t:"LabelsTitle"})}if(""!=g&&"Heatmap"!=this.graphType&&this.xAxis2Show||"rows"==this.layoutType&&this.isGroupedData)if("vertical"==this.graphOrientation){l="right"==this.legendPosition?this.legend.width:0;var u=this.marginRight+this.margin+this.axisTitleFontSize/2+l;this.toRender({p:["drawText",g,this.width-u,this.height/2,this.axisTitleFont,this.axisTitleColor,"center","middle",Math.PI/2],t:"LabelsTitle"})}else{l="bottom"==this.legendPosition?this.legend.height:0,c=this.width-(this.marginLeft+this.layoutLeft+this.layoutRight+this.marginRight),d=this.marginBottom+this.margin+this.axisTitleFontSize/2+l;this.toRender({p:["drawText",g,this.marginLeft+this.layoutLeft+c/2,this.height-d,this.axisTitleFont,this.axisTitleColor,"center","middle"],t:"LabelsTitle"})}}},this.drawDOELabelsLayout=function(t){var e=this.foreground,i=this.font,s=this.measureText(t,i),a=this.getFontPt(i)/2,r=this.layoutWidth,n=this.layoutHeight,o=this.marginLeft+this.offsetX,h=this.marginTop+this.offsetY,l=o+r-5,c=h+n-5;this.toRender({p:["drawText",t,o+20,h,i,e,"left","top"],t:"Labels"}),this.toRender({p:["drawLine","line",o+a,h+a,o+15,h+a,e],t:"Labels"}),this.toRender({p:["drawLine","line",o+s+25,h+a,l,h+a,e],t:"Labels"}),this.toRender({p:["drawLine","line",l,h+a,l,c,e],t:"Labels"}),this.toRender({p:["drawLine","line",o+a,c,l,c,e],t:"Labels"}),this.toRender({p:["drawLine","line",o+a,h+a,o+a,c,e],t:"Labels"})},this.setLayoutWeights=function(){var t=this.data.l.weight,e=this.layoutParams,i=this.data.l.comp;if(t)if(this.isDOE||this.scatterPlotMatrix||this.data.l.vars&&this.data.l.smps)for(var s=0;s<t.length;s++)e[s].weight=t[s];else if("Pie"==this.graphType)for(s=0;s<i.length;s++)e[s].weight=t[s];else for(s=0;s<t.length;s++)e[s].weight=t[s];else if(i){t=[];for(s=0;s<i.length;s++)t[s]=i.length,e[s].weight=t[s]}else alert("Wuz going on dude? This aint't gonna work!")},this.setLayoutGraphTypes=function(){var t=this.data.l.type;if(t)for(var e=0;e<t.length;e++)this.layoutParams[e].graphType=t&&t[e]?t[e]:this.graphType},this.setLayoutIndices=function(t){for(var e,i=this.xAxis.length&&this.xAxis2.length?this.getVariableIndices(this.xAxis).concat(this.getVariableIndices(this.xAxis2)):this.varIndices,s=this.getObjectArray(i),a=this.getObjectArray(this.smpIndices),r=0;r<this.data.l.comp.length;r++){if(this.data.l.vars&&this.data.l.smps){e=[];s=this.getObjectArray(this.data.l.comp[r][0]);for(var n=0;n<i.length;n++)s.hasOwnProperty(i[n])&&e.push(i[n]);this.layoutParams[r].varIndices=e,e=[];for(a=this.getObjectArray(this.data.l.comp[r][1]),n=0;n<this.smpIndices.length;n++)a.hasOwnProperty(this.smpIndices[n])&&e.push(this.smpIndices[n]);this.layoutParams[r].smpIndices=e,this.setOriginalIndices(r,this.layoutParams[r].varIndices,this.layoutParams[r].smpIndices)}else if(this.data.l.comp[r])if(e=[],this.data.l.vars){for(s=this.getObjectArray(this.data.l.comp[r]),n=0;n<i.length;n++)s.hasOwnProperty(i[n])&&e.push(i[n]);this.layoutParams[r].varIndices=this.isHistogram?i:e,this.layoutParams[r].smpIndices=this.smpIndices,this.setOriginalIndices(r,this.layoutParams[r].varIndices,this.smpIndices)}else{for(a=this.getObjectArray(this.data.l.comp[r]),n=0;n<this.smpIndices.length;n++)a.hasOwnProperty(this.smpIndices[n])&&e.push(this.smpIndices[n]);this.layoutParams[r].varIndices=i,this.layoutParams[r].smpIndices&&this.layoutParams[r].smpIndices.length==e.length||(this.layoutParams[r].smpIndices=e),this.setOriginalIndices(r,i,this.layoutParams[r].smpIndices)}else this.data.l.vars?(this.layoutParams[r].varIndices=[],this.layoutParams[r].smpIndices=this.smpIndices):(this.layoutParams[r].varIndices=i,this.layoutParams[r].smpIndices=[]);this.layoutParams[r].varIndicesStart=-1,this.layoutParams[r].smpIndicesStart=-1,this.layoutParams[r].grpIndicesStart=-1}for(r=0;r<this.data.l.type.length;r++)for(n=0;n<t.length;n++)this.layoutParams[r].hasOwnProperty(t[n])||(this.layoutParams[r][t[n]]=this[t[n]])},this.resetLayout=function(){delete this.data.l,delete this.layoutParams,this.offsetX=0,this.offsetY=0,this.layoutValidN=!1,this.layoutValidR=!1,this.layoutValidC=!1,this.layoutValidBounds=!1,this.layoutCurrent=!1,this.layoutComb=!1,this.layoutRestore=!1,this.layout="1X1"},this.setDOE=function(){this.oneDPlot(!0),this.Scatter2D(!0),this.Scatter3D(!0),this.Pie(!0)},this.resetLayoutRestore=function(){this.layoutRestore=!1},this.setLayoutRestore=function(){if(!this.layoutRestore){this.layoutRestore={};var t=["title","subtitle","varIndices","smpIndices","grpIndices","varIndicesStart","smpIndicesStart","grpIndicesStart","smpTitle","showVariableNames","showSampleNames","showOverlays","showLegend","legendInside","showDecorationsLegend","xAxisShow","xAxis2Show","xAxisS2Show","yAxisShow","yAxisS2Show","xAxisTitle","xAxis2Title","yAxisTitle","zAxisTitle","legend"];t.push("layoutTop","layoutRight","layoutBottom","layoutLeft","layoutWidth","layoutHeight","layoutValid","layoutComb","offsetX","offsetY");for(var e=0;e<t.length;e++)this.layoutRestore[t[e]]=this[t[e]];this.isGroupedData&&this.data.w&&(this.layoutRestore.isGroupedData=this.isGroupedData)}},this.setLayoutParams=function(){!this.layoutParams&&this.data.l.comp&&(this.layoutParams=[]);for(var t=0;t<this.data.l.type.length;t++)this.layoutParams[t]||(this.layoutParams[t]={})},this.removeEmptyCompartments=function(){if(this.layoutRemoveEmpty&&this.layoutParams&&!this.isDOE){for(var t={},e=[],i=["comp","desc","name","type","vars","smps","weight"],s=0,a=0;a<i.length;a++)this.data.l[i[a]]&&(t[i[a]]=[]);for(a=0;a<this.data.l.weight.length;a++){var r=this.layoutParams[a].varIndices.length,n=this.layoutParams[a].smpIndices.length;if(r&&n){e.push(this.layoutParams[a]);for(var o=0;o<i.length;o++)this.data.l[i[o]]&&t[i[o]].push(this.data.l[i[o]][a]);this.data.l.group&&(t.group=this.data.l.group),s++}}if(s!=this.data.l.weight.length){this.stndByLayoutData={},this.stndByLayoutData.data=this.cloneObject(this.data.l),this.stndByLayoutData.pars=this.cloneObject(this.layoutParams),this.stndByLayoutData.layoutRows=this.layoutRows,this.stndByLayoutData.layoutCols=this.layoutCols,this.stndByLayoutData.layout=this.layout,this.data.l=t,this.layoutParams=e,this.layoutRows=Math.ceil(Math.sqrt(s)),this.layoutCols=this.layoutRows*(this.layoutRows-1)>=s?this.layoutRows-1:this.layoutRows,this.layout=this.layoutRows+"X"+this.layoutCols;for(a=0;a<this.data.l.weight.length;a++)this.data.l.weight[a]=[1/this.layoutCols,1/this.layoutRows]}}},this.restoreEmptyCompartments=function(){this.stndByLayoutData&&(this.data.l=this.stndByLayoutData.data,this.layoutParams=this.stndByLayoutData.pars,this.layoutRows=this.stndByLayoutData.layoutRows,this.layoutCols=this.stndByLayoutData.layoutCols,this.layout=this.stndByLayoutData.layout,delete this.stndByLayoutData)},this.getLayoutAxisSamples=function(t){if(this.data.l.smps){if(this.graphType.match(/Scatter2D/)&&this.segregateSamplesBy&&1==this.segregateSamplesBy.length&&"sample"==this.segregateSamplesBy[0])return"Bin"==(e=this.cloneObject(this[t+"Axis"]))[0]?"x"==t?["Bin"]:(e.shift(),e):this.cloneObject(this.data.y.smps);for(var e={},i="x"==t?0:1,s=0;s<this.data.l.smps.length;s++)this.data.l.smps[s]&&(this.data.l.smps[s][i]||0==this.data.l.smps[s][i])?e[this.data.l.smps[s][i]]=!0:this.data.l.smps[s][t+"Axis"]&&(e[this.data.l.smps[s][t+"Axis"]]=!0);return this.getKeys(e)}return this[t+"Axis"].length>0?this[t+"Axis"]:this.data.y.smps},this.preCalculateAdjustLayout=function(t){if(!this.isDOE&&"Pie"!=this.graphType){delete this.xAxisLayoutMaxTickStr,delete this.xAxisLayoutMaxTickStrLength,delete this.xAxis2LayoutMaxTickStr,delete this.xAxis2LayoutMaxTickStrLength,delete this.yAxisLayoutMaxTickStr,delete this.yAxisLayoutMaxTickStrLength;for(var e=this.marginLeft+this.layoutLeft+this.layoutRight+this.marginRight,i=this.marginTop+this.layoutTop+this.layoutBottom+this.marginBottom,s=0,a=0;a<this.layoutRows;a++)for(var r=0;r<this.layoutCols&&(this.layoutCurrent=s,!(this.layoutParams.length<=s));r++){if(this.layoutParams[s])for(var n=0;n<t.length;n++)this[t[n]]=this.layoutParams[s].hasOwnProperty(t[n])?this.layoutParams[s][t[n]]:this[t[n]];this.setLayoutGraphDimensions(e,i,s),this.graphType.match(/Scatter/)||this.graphType.match(/Boxplot/)&&this.scatterPlotMatrix?this.drawLayoutCompartmentsScatter(e,i,a,r,s):this.drawLayoutCompartmentsOneD(e,i,s),s++}this.restoreLayoutParameters()}},this.setLayoutHidden=function(){this.layoutHidden={};for(var t=["hiddenVars","hiddensSmps","hiddenLegends"],e=0;e<t.length;e++)this.layoutHidden[t[e]]=this.cloneObject(this[t[e]])},this.restoreLayoutHidden=function(){for(var t=["hiddenVars","hiddensSmps","hiddenLegends"],e=0;e<t.length;e++)this[t[e]]=this.layoutHidden[t[e]]},this.drawLayoutCompartments=function(t){var e=["left","right","top","bottom","x","y","offsetX","offsetY","graphType","summaryType","transformData","smpInfo","varInfo","minData","maxData","xAxisMin","xAxisMax","xAxisRange","xAxis2Min","xAxis2Max","xAxis2Range","yAxisMin","yAxisMax","yAxisRange","zAxisMin","zAxisMax","zAxisRange","xAxisAbsMin","xAxisAbsMax","xAxis2AbsMin","xAxis2AbsMax","yAxisAbsMin","yAxisAbsMax","zAxisAbsMin","zAxisAbsMax","xAxisUnit","xAxis2Unit","yAxisUnit","zAxisUnit"],i=["layoutTop","layoutRight","layoutBottom","layoutLeft","layoutWidth","layoutHeight","layoutValid","layoutComb","offsetX","offsetY"],s=["weight","graphType","varIndices","smpIndices","grpIndices","varIndicesStart","smpIndicesStart","grpIndicesStart","setMin","setMax","setMin2","setMax2","setMinX","setMaxX","setMinY","setMaxY","setMinZ","setMaxZ"];if(this.layoutComb||this.isDOE){this.validateLayoutTopology(),this.isDOE&&(e.push("data"),this.setDOE()),this.removeEmptyCompartments(),this.graphType.match(/Scatter/)?(this.dataPointSize=Number(Math.max(.5,this.dataPointSize/Math.max(this.layoutRows,this.layoutCols)).toFixed(1)),this.xAxisTmp=this.cloneObject(this.xAxis),this.yAxisTmp=this.cloneObject(this.yAxis),this.xAxis=this.getLayoutAxisSamples("x"),this.yAxis=this.getLayoutAxisSamples("y"),this.initializeAxis(),this.xAxis=this.xAxisTmp,this.yAxis=this.yAxisTmp,this.xAxisIndices=this.getSampleIndices(this.xAxis),this.yAxisIndices=this.getSampleIndices(this.yAxis),this.meta.data.i={vars:this.cloneObject(this.varIndices),smps:this.cloneObject(this.smpIndices)}):this.data.l&&this.data.l.group?(this.meta.data.i={vars:this.cloneObject(this.varIndices),smps:this.cloneObject(this.smpIndices),grps:this.cloneObject(this.grpIndices)},this.meta.data.g=this.data.w,(this.stackBy||this.dodgeBy)&&this.data.l.group.length&&(this.groupSamples(this.data.l.group,!1,!1,!0,!0,!0),this.initializeAxis())):this.initAxes(),this.setLayoutDOETables(),this.setLayoutLegends(),this.setLayoutRestore(),this.setLayoutParams(),this.setLayoutWeights(),this.setLongestLayoutLabel(),this.setLayoutGraphTypes(),this.setLayoutIndices(s),this.preCalculateAdjustLayout(s),this.setLayoutHidden(),this.setLayoutDimensions(),this.title="",this.subtitle="",this.offsetX=this.layoutLeft,this.offsetY="Pie"==this.graphType?0:this.layoutTop;for(var a=this.marginLeft+this.layoutLeft+this.layoutRight+this.marginRight,r=this.marginTop+this.layoutTop+this.layoutBottom+this.marginBottom,n=0,o=0;o<this.layoutRows;o++){for(var h=0;h<this.layoutCols;h++){if(this.layoutCurrent=n,this.layoutCurrentR=o,this.layoutCurrentC=h,this.isDOE){if(this.dataStndBy.l.smps.length<=n)break;if(this.offsetY+this.layoutHeight>this.height)break}else if("Pie"==this.graphType){if(this.data.l.smps.length<=n)break}else if(this.isCreateHistogram)this.data.l.axes.length;else if(this.layoutParams.length<=n)break;if(this.layoutParams[n])for(var l=0;l<s.length;l++)this[s[l]]=this.layoutParams[n].hasOwnProperty(s[l])?this.layoutParams[n][s[l]]:this[s[l]];this.setLayoutGraphDimensions(a,r,n),this.isDOE?(this.offsetX=this.layoutLeft+(this.width-a)/this.layoutCols*this.dataStndBy.l.coords[n][1],this.offsetY=this.layoutTop+(this.height-r)/this.layoutRows*this.dataStndBy.l.coords[n][0],this.drawLayoutCompartmentsDOE(a,r,n)):this.graphType.match(/Scatter/)||this.graphType.match(/Boxplot/)&&this.scatterPlotMatrix?this.drawLayoutCompartmentsScatter(a,r,o,h,n):"Pie"==this.graphType?this.drawLayoutCompartmentsPie(a,r,n):this.scatterPlotMatrix||this.drawLayoutCompartmentsOneD(a,r,n);var c={};if(this.layoutConfig&&this.layoutConfig[n])for(var d in this.layoutConfig[n])c[d]=this.cloneObject(this[d]),this[d]=this.layoutConfig[n][d];if(!this.isDOE&&this.varIndices.length>0&&this.smpIndices.length>0)if(this.scatterPlotMatrix)if(this.scatterPlotMatrixType.match(/correlation|all/))if(h>o){if(this.scatterPlotMatrixType.match(/all/)&&h==this.layoutCols-1){var p=this.cloneObject(this.data.l.data[n]),g=this.data.l.params[n];if(p&&g){var u={};for(var d in g)u[d]=this[d],this[d]=g[d];if("boxplot"==this.scatterType&&this.isTransformedData)for(l=0;l<p.y.vars.length;l++)p.y.data[l][1]=this.transformValue(this.isTransformedData,p.y.data[l][1]);for(var d in this.initializeData(p,!1,!0),this.initializeAxis(),t.call(this),u)this[d]=u[d];this.switchData(!1,!0)}}}else if(h==o||o==this.layoutRows-1&&this.scatterPlotMatrixType.match(/all/)){var m=o==this.layoutRows-1&&this.scatterPlotMatrixType.match(/all/)?h:o,f=this.data.l.group&&this.meta.data.d.z[this.data.l.group]&&this.meta.data.d.z[this.data.l.group][m]&&this.meta.data.d.z[this.data.l.group][m][this.data.y.smps[this.smpIndices[m]]]?this.meta.data.d.z[this.data.l.group][m][this.data.y.smps[this.smpIndices[m]]]:!!this.meta.data.d.s[m]&&this.meta.data.d.s[m];if(f&&"correlation"!=this.scatterPlotMatrixType){for(var d in this.data.l.data[n]=f.data,f.params)this[d]=f.params[d];this.scatterPlotMatrixType.match(/all/)&&h==o&&(this.hideHistogram=!0,this.showHistogramDensity=!0);for(u=[],d=0;d<i.length;d++)u.push(this[i[d]]);this.scatterPlotMatrixType.match(/Histogram|Density|all/)&&this.initializeData(f.data,!1,!0),this.initializeAxis(),t.call(this),this.removeHistogram(!0),this.restoreMargins();for(d=0;d<i.length;d++)this[i[d]]=u[d];this.scatterPlotMatrixType.match(/all/)&&h==o&&(this.hideHistogram=!1,this.showHistogramDensity=!1)}else"correlation"==this.scatterPlotMatrixType&&0==o?t.call(this):o==this.layoutRows-1&&h==this.layoutCols-1&&this.scatterPlotMatrixType.match(/all/)&&(this.removeHistogram(!0),this.restoreMargins())}else this.restoreLayoutHidden(),t.call(this);else t.call(this);else this.graphType.match(/Scatter/)?this.xAxis.length&&this.yAxis.length&&t.call(this):t.call(this);if(this.layoutConfig&&this.layoutConfig[n])for(var d in this.layoutConfig[n])this[d]=c[d];for(l=0;l<e.length;l++)"data"==e[l]&&this.graphType.match(/Sankey|Tree/)?(this.layoutParams[n][e[l]]={},this.layoutParams[n][e[l]].y=this.cloneObject(this[e[l]].y),this[e[l]].x&&(this.layoutParams[n][e[l]].x=this.cloneObject(this[e[l]].x)),this[e[l]].z&&(this.layoutParams[n][e[l]].z=this.cloneObject(this[e[l]].z))):this.layoutParams[n][e[l]]=this.cloneObject(this[e[l]]);if(this.data.w&&(this.layoutParams[n].w=this.cloneObject(this.data.w)),this.layoutCanvasCompartments&&this.drawLayoutCanvasCompartments(),this.isDOE||"Pie"==this.graphType);else if(this.graphType.match(/Scatter/)||this.graphType.match(/Boxplot/)&&this.scatterPlotMatrix&&this.scatterPlotMatrixType.match(/all/))(this.scatterPlotMatrix||this.segregateVariablesBy.length||this.segregateSamplesBy.length)&&this.drawTrellisLabels(n,o,h,a);else{if(!this.layoutAdjust){var y="vertical"==this.graphOrientation?h:o,x="vertical"==this.graphOrientation?this.layoutCols-1:this.layoutRows-1,v="vertical"==this.graphOrientation&&("rows"==this.layoutType||"cols"==this.layoutType&&this.segregateVariablesBy.length+this.segregateSamplesBy.length>1),b="vertical"!=this.graphOrientation&&("cols"==this.layoutType||"rows"==this.layoutType&&this.segregateVariablesBy.length+this.segregateSamplesBy.length>1);0==y&&this.layoutRestore.xAxisShow&&"Heatmap"!=this.graphType&&!b&&(this.layoutAxis=1,this.xAxisShow=!0,this.draw1DXLayout()),y==x&&this.layoutRestore.xAxis2Show&&"Heatmap"!=this.graphType&&!v&&(this.layoutAxis=2,this.xAxis2Show=!0,this.draw1DXLayout())}if(this.segregateVariablesBy.length){var A=!1;"vertical"==this.graphOrientation?(o==this.layoutRows-1||o==this.layoutRows-2&&n+1+parseInt(this.layoutCols)>this.data.l.weight.length)&&(A=!0):0==h&&(A=!0),A&&(this.showSampleNames=this.layoutRestore.showSampleNames,this.draw1DYLayout())}else"vertical"==this.graphOrientation&&this.segregateSamplesBy.length&&this.layoutSameSamples?(this.showSampleNames=this.layoutRestore.showSampleNames,(o==this.layoutRows-1||o==this.layoutRows-2&&n+1+parseInt(this.layoutCols)>this.data.l.weight.length)&&this.draw1DYLayout()):"vertical"!=this.graphOrientation&&this.segregateSamplesBy.length&&this.layoutSameSamples&&0==h&&(this.showSampleNames=this.layoutRestore.showSampleNames,this.draw1DYLayout());this.drawTrellisLabels(n,o,h)}this.offsetX+=this.layoutWidth,n++}this.offsetX=this.layoutLeft,this.offsetY+=this.layoutHeight}this.layoutCurrent=!1,this.restoreLayoutParameters(),this.isDOE?(this.data=this.dataStndBy,this.graphType=this.data.l.type[0]):(this.drawTitle(),this.drawLabelsTitlesLayout(),this.showLegend&&(this.isDOE||"Pie"!=this.graphType)&&(this.graphType.match(/Scatter/)&&this.setLegends(),this.drawLegend(!0))),this.graphType.match(/Scatter/)&&this.scatterPlotMatrix?(this.varIndices=this.meta.data.i.vars,this.smpIndices=this.meta.data.i.smps):this.meta.data.g?(this.data.w=this.meta.data.g,this.varIndices=this.meta.data.i.vars,this.smpIndices=this.meta.data.i.smps,this.grpIndices=this.meta.data.i.grps,delete this.meta.data.g,delete this.meta.data.i):this.isGroupedData=!1}},this.restoreMargins=function(){for(var t in this.meta.config.user)t.match(/margin|dataPointSize/)&&delete this.meta.config.user[t]},this.restoreLayoutParameters=function(){for(var t in this.layoutRestore)this[t]=this.layoutRestore[t]},this.setLayoutGraphDimensions=function(t,e,i){this.layoutWidth=(this.width-t)*this.layoutParams[i].weight[0],this.layoutHeight=(this.height-e)*this.layoutParams[i].weight[1],this.layoutParams[i].width=this.layoutWidth,this.layoutParams[i].height=this.layoutHeight},this.setLongestLayoutLabel=function(){var t=[];if(this.scatterPlotMatrix);else{if(this.segregateSamplesBy.length>0&&this.segregateVariablesBy.length>0||this.segregateSamplesBy.length>1||this.segregateVariablesBy.length>1)for(var e=0;e<this.data.l.name.length;e++)t.push(this.data.l.name[e][0]),t.push(this.data.l.name[e][1]);else if(this.data.l.name)for(e=0;e<this.data.l.name.length;e++)t.push(this.data.l.name[e]);this.longestLayoutLabel=this.getMaxText(t)}},this.setLayoutLabels=function(t){this.layoutLabels=[],this.isHistogram?this.segregateVariablesBy.length&&this.meta.data.z[this.segregateVariablesBy[0]]?this.layoutLabels.push(this.meta.data.z[this.segregateVariablesBy[0]].levels[t]):this.segregateSamplesBy.length?this.layoutLabels.push(this.legend.samplesN==this.data.l.axes.length?this.dataStndBy.y.smps[t]:this.data.l.axes[t].yAxis[0]):this.layoutLabels.push(this.data.l.name[t+1]):this.segregateSamplesBy.length>0&&this.segregateVariablesBy.length>0?(this.layoutLabels.push(this.data.l.name[t][this.graphType.match(/Scatter/)?1:0]),this.layoutLabels.push(this.data.l.name[t][this.graphType.match(/Scatter/)?0:1])):this.segregateSamplesBy.length>1||this.segregateVariablesBy.length>1?(this.layoutLabels.push(this.data.l.name[t][this.graphType.match(/Scatter/)?0:1]),this.layoutLabels.push(this.data.l.name[t][this.graphType.match(/Scatter/)?1:0])):this.scatterPlotMatrix||this.layoutLabels.push(this.data.l.name[t])},this.drawLayoutCompartmentsDOE=function(t,e,i){if(0==i)this.updateConfig(this.cloneObject(this.meta.config.user)),this.isShowDOEData=!0,this.showLegend=this.layoutRestore.showLegend,this.isKM&&this.addKMPlot(!0),"Map"!=this.graphType&&this.drawDOELabelsLayout("Data"),this.graphType.match(/Scatter/i)?(this.isHistogram=!1,this.xAxis=this.configStndBy.xAxis||[],this.yAxis=this.configStndBy.yAxis||[],this.zAxis=this.configStndBy.zAxis||[],this.xAxisTitle=this.configStndBy.xAxisTitle,this.yAxisTitle=this.configStndBy.yAxisTitle,this.zAxisTitle=this.configStndBy.zAxisTitle,this.initializeData(this.dataStndBy),this.varIndices=this.dataStndBy.l.doe):(this.graphType.match(/Line/)&&(this.xAxis=this.configStndBy.xAxis||[],this.xAxis2=this.configStndBy.xAxis2||[]),this.initializeData(this.dataStndBy),this.smpIndices=this.dataStndBy.l.doe),this.initializeAxis(),this.showLegend=!1,"Map"==this.graphType?(this.configStndBy.colorBy&&(this.colorBy=this.configStndBy.colorBy),this.setMapAttributes(),this.drawMapData()):"Scatter3D"==this.graphType?this.draw3DPlot():this.graphType.match(/Scatter/i)?this.data.l.histogram||this.draw2DPlot():(this.plotByVariable=this.configStndBy.plotByVariable,this.configStndBy.summaryType&&(this.summaryType=this.configStndBy.summaryType),this.configStndBy.groupingFactors.length>0?(this.isGroupedData=!0,this.dataStndBy.y.smps.length!=this.smpIndices.length&&(this.layoutComb=!1,this.groupSamples(this.configStndBy.groupingFactors,!1,!1,!0,!0),this.layoutComb=!0),this.initializeAxis(),this.data.l.histogram||this.draw1DPlot(),this.isGroupedData=!1,this.groupingFactors=[]):this.data.l.histogram||this.draw1DPlot(),this.plotByVariable=!1),this.data.l.histogram&&(this.ridgeBy=this.data.l.histogram.ridgeBy,this.createHistogram(this.data.l.histogram.ridgeBy||this.data.l.histogram.isAnnt,!1,!0),this.dataStndBy.l.data=this.cloneObject(this.data),this.initializeAxis(),this.draw2DPlot(),this.ridgeBy=!1),this.showLegend=!0,this.isShowDOEData=!1;else{this.graphOrientation="vertical",this.legendPosition="right",this.layoutConfig||(this.layoutConfig=[]),this.layoutConfig[i]||(this.layoutConfig[i]={});var s=this.dataStndBy,a=s.l,r=this.layoutConfig[i].graphType||a.type[i];if(this.drawDOELabelsLayout(a.smps[i][0]),this.top=5,this.bottom=5,this.right=5,this.left=5,"Table"==r)this.createPie(a.smps[i][0]),this.graphType=r,this.layoutDOETables.hasOwnProperty(a.smps[i][0])&&this.layoutDOETables[a.smps[i][0]].idxs.length==this.data.y.vars.length||(this.layoutDOETables[a.smps[i][0]]={sort:!1,idxs:[]}),this.drawDOETable();else if("Pie"==r)this.showLegend=!1,this.createPie(a.smps[i][0]),this.graphType=r,this.layoutCurrentDOE=a.smps[i][0],this.showLegendBorder=!1,this.drawPiePlot();else if("Treemap"==r)this.createTreemap(a.smps[i][0]),this.graphType=r,this.draw1DPlot();else if("Scatter2D"==r)this.createHistogram(a.smps[i][0],!1,!1,a.extended[i]),this.graphType=r,this.initializeAxis(),this.showLegend=!1,this.xAxisTitle="",this.yAxisTitle="",this.zAxisTitle="",this.draw2DPlot(),this.isHistogram=!1,this.isCreateHistogram=!1;else{"Scatter"==r&&(r="Scatter2D"),this.graphType=r;var n=s.x||s.z,o=this.layoutConfig[i].xAxis||a.smps[i][0],h=this.layoutConfig[i].yAxis||a.smps[i][0],l=n.hasOwnProperty(o.toString())?n[o]:s.y.data[o],c=n.hasOwnProperty(h.toString())?n[h]:s.y.data[h],d=["colorBy","shapeBy","siseBy"],p={graphType:!0,xAxis:!0,yAxis:!0,sortDir:!0};if("Scatter2D"==r){for(var g={y:{smps:[n.hasOwnProperty(o)?o:s.y.vars[o]],vars:[],data:[]}},u=0;u<a.doe.length;u++){var m=a.doe[u];g.y.vars.push(s.y.smps[m])}o!=h&&g.y.smps.push(n.hasOwnProperty(h)?h:s.y.vars[h]);for(u=0;u<a.doe.length;u++){m=s.l.doe[u];o!=h?g.y.data.push([l[m],c[m]]):g.y.data.push([l[m]])}this.isHistogram=!1,this.isCreateHistogram=!1,this.initializeData(g),this.graphType=r,this.initializeAxis(),this.draw2DPlot()}else{g={y:{vars:a.smps[i],smps:[],data:[[]]}};var f=this.cloneObject(a.doe);this.layoutConfig[i].sortType&&("Numeric"==this.layoutConfig[i].sortType?f="ascending"==this.layoutConfig[i].sortDir?f.sort((function(t,e){return n[a.smps[i][0]][t]-n[a.smps[i][0]][e]})):f.sort((function(t,e){return n[a.smps[i][0]][e]-n[a.smps[i][0]][t]})):"ascending"==this.layoutConfig[i].sortDir?f.sort((function(t,e){return s.y.smps[t]>s.y.smps[e]})):(f.sort((function(t,e){return s.y.smps[t]>s.y.smps[e]})),f.reverse()));for(u=0;u<f.length;u++){m=f[u];g.y.smps.push(s.x?s.y.smps[m]:s.y.vars[m])}for(u=0;u<f.length;u++){m=f[u];this.layoutConfig[i].transformType?g.y.data[0].push(this.transformValue(this.layoutConfig[i].transformType,n[a.smps[i][0]][m])):g.y.data[0].push(n[a.smps[i][0]][m])}var y={},x=!1;for(u=0;u<d.length;u++)if(this.layoutConfig[i][d[u]]){var v;if(x=!0,y[this.layoutConfig[i][d[u]]]=[],n.hasOwnProperty(this.layoutConfig[i][d[u]]))v=n[this.layoutConfig[i][d[u]]];else for(var b=0;b<s.y.vars.length;b++)if(s.y.vars[b]==this.layoutConfig[i][d[u]]){v=s.y.data[b];break}for(b=0;b<f.length;b++){var A=f[b];y[this.layoutConfig[i][d[u]]].push(v[A])}}for(var u in x&&(g.x=y),this.initializeData(g),this.graphType=r,this.layoutConfig[i])p[u]||(this[u]=this.layoutConfig[i][u]);for(var u in this.initializeAxis(),this.draw1DPlot(),this.layoutConfig[i])p[u]||(this[u]=!1)}}}},this.drawLayoutCompartmentsScatter=function(t,e,i,s,a){if(this.segregateVariablesBy.length&&this.segregateSamplesBy.length?(this.xAxis=[this.data.l.smps[Math.floor(a/this.data.l.smps.length)][0]],this.yAxis=[this.data.l.smps[Math.floor(a/this.data.l.smps.length)][1]],this.xAxisIndices=this.getSampleIndices(this.xAxis),this.yAxisIndices=this.getSampleIndices(this.yAxis),this.setLayoutLabels(a)):this.data.l.smps&&this.data.l.smps[a].xAxis&&this.data.l.smps[a].yAxis?(this.xAxis=this.data.l.smps[a].xAxis,this.yAxis=this.data.l.smps[a].yAxis,this.xAxisIndices=this.getSampleIndices(this.xAxis),this.yAxisIndices=this.getSampleIndices(this.yAxis)):!this.scatterPlotMatrix&&this.data.l.smps&&this.data.l.smps[a]?(this.isHistogram?this.data.l.axes[a]?(this.xAxis=this.data.l.axes[a].xAxis,this.yAxis=this.data.l.axes[a].yAxis,this.xAxisIndices=this.getSampleIndices(this.xAxis),this.yAxisIndices=this.getSampleIndices(this.yAxis)):(this.xAxis=[],this.yAxis=[],this.xAxisIndices=[],this.yAxisIndices=[]):(this.xAxis=[this.data.l.smps[a][0]],this.isQQ?this.yAxis=[this.data.l.smps[a][0]]:this.yAxis=[this.data.l.smps[a][1]||this.data.l.smps[a][0]],this.xAxisIndices=this.getSampleIndices(this.xAxis),this.yAxisIndices=this.getSampleIndices(this.yAxis)),this.setLayoutLabels(a)):this.data.l.vars&&this.data.l.vars[a]?this.data.l.axes?this.data.l.axes[a]?(this.xAxis=this.data.l.axes[a].xAxis,this.yAxis=this.data.l.axes[a].yAxis,this.xAxisIndices=this.getSampleIndices(this.xAxis),this.yAxisIndices=this.getSampleIndices(this.yAxis),this.setLayoutLabels(a)):(this.xAxis=[],this.yAxis=[],this.xAxisIndices=[],this.yAxisIndices=[]):this.setLayoutLabels(a):(this.xAxis=!1,this.yAxis=!1,this.xAxisIndices=!1,this.yAxisIndices=!1),this.layoutAdjust&&this.xAxis&&this.yAxis?(this.initializeAxis(),this.layoutAxis=3):(this.layoutAxis=0==s?2:0,this.layoutAxis=i==this.layoutRows&&this.layoutAxis?3:i==this.layoutRows?1:0),this.isQQ?this.setAxes("qq"):this.isCDF&&this.setAxes("cdf"),this.data.l.reg&&this.data.l.reg[a]){this.decorations&&this.decorations.reg&&delete this.decorations.reg;for(var r=0;r<this.data.l.reg[a].length;r++)this.addRegressionDecoration(this.data.l.reg[a][r].reg,this.data.l.reg[a][r].cor,this.data.l.reg[a][r].lab,this.data.l.reg[a][r].col,this.data.l.reg[a][r].fit,this.data.l.reg[a][r].id,this.data.l.reg[a][r].n,this.data.l.reg[a][r].factor)}if(this.showLegend=!1,this.legendInside=!0,this.showDecorationsLegend=!0,this.xAxisTitle="",this.yAxisTitle="",this.scatterPlotMatrix)switch(this.scatterPlotMatrixType){case"correlation":case"correlationDensity":case"correlationHistogram":case"all":this.xAxisTicksMajorShow=i!=s,this.xAxisShow=i==Number(this.layoutRows)-1,this.xAxis2Show=!1,this.yAxisTicksMajorShow=i!=s,this.yAxisShow=0==s,this.yAxis2Show=!1;break;case"both":case"upper":case"lower":case"first":this.layoutAdjust||(this.xAxisShow=this.isLastInColumnLayout(i,s),this.xAxis2Show=!1,this.yAxisShow=0==s,this.yAxis2Show=!1)}else this.layoutType&&(this.layoutAdjust||(this.xAxisShow=this.isLastInColumnLayout(i,s),this.xAxis2Show=!1,this.yAxisShow=0==s,this.yAxis2Show=!1))},this.drawLayoutCompartmentsPie=function(t,e,i){this.smpIndices=[this.getSampleIndices(this.data.l.smps[i])],this.showLegend=!0},this.drawLayoutCompartmentsOneD=function(t,e,i){if(this.showLegend=!1,this.showOverlays=!0,this.isGroupedData=!1,this.xAxisTitle=!1,this.xAxis2Title=!1,this.smpTitle=!1,this.adjustAspectRatioXTries=0,this.adjustAspectRatioYTries=0,this.setLayoutLabels(i),this.varIndices.length>0&&this.smpIndices.length>0){if(this.data.l.group){this.groupSamples(this.data.l.group,!1,!1,!0,!0,!0);var s=this.layoutParams[i].dragged&&this.layoutParams[i].grpIndices.length==this.data.w.grpIdxs.length?this.layoutParams[i].grpIndices:this.data.w.grpIdxs;this.groupSamples(this.data.l.group,!1,s,!0,!0,!0),this.layoutParams[i].grpIndices=this.grpIndices,this.colorBy&&this.groupingFactors.includes(this.colorBy)&&this.layoutRestore.showLegend;for(var a=!1,r=0;r<this.data.l.group.length;r++)if(this.segregateSamplesBy.includes(this.data.l.group[r])){a=!0;break}if(1==this.data.w.smps.length&&"Heatmap"!=this.graphType&&a&&(this.showSampleNames=!1),this.segregateSamplesBy.length&&this.layoutSameSamples&&(this.showSampleNames=!1),this.hiddenGrpsLayout)if(1==this.hiddenGrps.length)this.hiddenGrpsLayout[i]&&(this.hiddenGrps[0]=!0);else for(r=0;r<this.hiddenGrps.length;r++)this.hiddenGrpsLayout[r]&&(this.hiddenGrps[r]=!0)}else 1==this.smpIndices.length&&this.graphType;this.segregateVariablesBy.length>0&&"Heatmap"!=this.graphType&&(this.showSampleNames=!1),this.layoutAdjust||"Meter"==this.graphType?(this.layoutAxis=3,this.varIndices.length>0&&this.smpIndices.length>0&&this.initializeAxis()):("vertical"==this.graphOrientation?this.xAxisShowLayout=!(i%this.layoutCols):(this.xAxisShowLayout=i<this.layoutCols,this.xAxis2ShowLayout=i>=this.layoutCols*(this.layoutRows-1)),this.xAxisShow=!1,this.xAxis2Show=!1)}},this.drawTrellisLabels=function(t,e,i,s){var a,r=this;if(this.scatterPlotMatrix){var n=this.yAxisTickTopColor||this.foreground;switch(this.scatterPlotMatrixType){case"first":if(this.data.y.smps[t+1]){var o=this.layoutLabelBoxThickness,h=this.scaleTextToFont(this.meta.data.y.maxSmpStr+" & "+this.meta.data.y.maxSmpStr,this.maxTextSize,.8*(this.width-s)/this.layoutCols,o);this.layoutBoxLabelColors[0]?this.toRender({p:["drawShape","rectangle",this.marginLeft+this.offsetX+this.left+this.x/2,this.marginTop+this.offsetY+this.top-o/2,this.x,o,this.layoutBoxLabelColors[0],this.foreground],t:"Labels"}):this.toRender({p:["drawShape","rectangle",this.marginLeft+this.offsetX+this.left+this.x/2,this.marginTop+this.offsetY+this.top-o/2,this.x,o,!1,this.foreground,"open"],t:"Labels"}),this.toRender({p:["drawText",this.data.y.smps[0]+" & "+this.data.y.smps[t+1],this.marginLeft+this.offsetX+this.left+this.x/2,this.marginTop+this.offsetY+this.top-o/2,h,this.foreground,"center","middle"],t:"Labels"})}break;case"both":case"upper":case"lower":case"correlation":if(e==i){!function(){var t=r.marginLeft+r.offsetX+r.left,e=t+r.x,i=r.marginTop+r.offsetY+r.top,s=i+r.y;r.toRender({p:["drawLine",r.xAxisTickLeftType,t,i,e,i,r.xAxisTickLeftColor,r.xAxisTickLeftSize,"butt"],t:"Axes2"}),r.toRender({p:["drawLine",r.xAxisTickRightLineType,t,s,e,s,r.xAxisTickRightColor,r.xAxisTickRightSize,"butt"],t:"Axes2"}),r.toRender({p:["drawLine",r.yAxisTickTopLineType,e,i,e,s,r.yAxisTickTopColor,r.yAxisTickTopSize,"butt"],t:"Axes2"}),r.toRender({p:["drawLine",r.yAxisTickBottomLineType,t,i,t,s,r.yAxisTickBottomColor,r.yAxisTickBottomSize,"butt"],t:"Axes2"})}();h=this.scaleTextToFont(this.meta.data.y.maxSmpStr,this.maxTextSize,.7*(this.width-s)/this.layoutCols,this.y);this.toRender({p:["drawText",this.data.y.smps[e],this.marginLeft+this.offsetX+this.left+this.x/2,this.marginTop+this.offsetY+this.top+this.y/2,h,this.foreground,"center","middle"],t:"Labels"})}else if(i>e&&"correlation"==this.scatterPlotMatrixType){var l=this.meta.data.c,c=this.data.y.smps[this.smpIndices[e]]+"::"+this.data.y.smps[this.smpIndices[i]],d=this.colorBy&&l.z[this.colorBy]&&l.z[this.colorBy][c]?l.z[this.colorBy][c]:!!l.s[c]&&l.s[c];h=this.scaleTextToFont(this.meta.data.y.maxSmpStr,this.maxTextSize,.7*(this.width-s)/this.layoutCols,this.y);if(this.drawPlotWindow(),this.toRender({p:["drawShape","rectangle",this.marginLeft+this.offsetX+this.left+this.x/2,this.marginTop+this.offsetY+this.top+this.y/2,this.x,this.y,!1,n,"open"],t:"Labels"}),d)for(var p=this.y/(d.length+1),g=0;g<d.length;g++){var u=this.formatNumber(d[g].cor,3),m=d[g].col,f=(g+1)*p;this.toRender({p:["drawText",u,this.marginLeft+this.offsetX+this.left+this.x/2,this.marginTop+this.offsetY+this.top+f,h,m,"center","middle"],t:"Labels"})}}break;case"correlationHistogram":case"correlationDensity":case"all":if("all"==this.scatterPlotMatrixType&&i==this.layoutCols-1&&e==this.layoutRows-1)break;if(this.showScatterPlotMatrixLabels){o=this.layoutLabelBoxThickness,h=this.scaleTextToFont(this.meta.data.y.maxSmpStr,this.fontSize,Math.min(this.layoutWidth,this.layoutHeight),o);if(0==e){var y=this.data.z&&this.data.z.hasOwnProperty(this.scatterPlotMatrix)?this.scatterPlotMatrix:"Variation";c="all"==this.scatterPlotMatrixType&&i==this.layoutCols-1?y:this.data.y.smps[i];this.toRender({p:["drawShape","rectangle",this.marginLeft+this.offsetX+this.left+this.x/2,this.marginTop+this.offsetY+this.top-o/2,this.x,o,!1,this.foreground,"open"],t:"Labels"}),this.toRender({p:["drawText",c,this.marginLeft+this.offsetX+this.left+this.x/2,this.marginTop+this.offsetY+this.top-o/2,h,this.foreground,"center","middle"],t:"Labels"})}i==this.layoutCols-1&&(this.toRender({p:["drawShape","rectangle",this.marginLeft+this.offsetX+this.left+this.x+o/2,this.marginTop+this.offsetY+this.top+this.y/2,o,this.y,!1,this.foreground,"open"],t:"Labels"}),this.toRender({p:["drawText",this.data.y.smps[e],this.marginLeft+this.offsetX+this.left+this.x+o/2,this.marginTop+this.offsetY+this.top+this.y/2,h,this.foreground,"center","middle",Math.PI/2],t:"Labels"}))}else if(e==i){h=this.scaleTextToFont(this.meta.data.y.maxSmpStr,this.maxTextSize,.7*(this.width-s)/this.layoutCols,this.y),o=this.layoutLabelBoxThickness;this.toRender({p:["drawText",this.data.y.smps[e],this.marginLeft+this.offsetX+this.left+this.x/2,this.marginTop+this.offsetY+this.top+o,h,this.foreground,"center","middle"],t:"Labels"})}if(i>e){if("all"==this.scatterPlotMatrixType&&i==this.layoutCols-1)break;l=this.meta.data.c,c=this.data.y.smps[this.smpIndices[e]]+"::"+this.data.y.smps[this.smpIndices[i]],d=this.colorBy&&l.z[this.colorBy]&&l.z[this.colorBy][c]?l.z[this.colorBy][c]:!!l.s[c]&&l.s[c],h=this.scaleTextToFont(this.meta.data.y.maxSmpStr,this.maxTextSize,.7*(this.width-s)/this.layoutCols,this.y);if(this.drawPlotWindow(),this.toRender({p:["drawShape","rectangle",this.marginLeft+this.offsetX+this.left+this.x/2,this.marginTop+this.offsetY+this.top+this.y/2,this.x,this.y,!1,n,"open"],t:"Labels"}),d)for(p=this.y/(d.length+1),g=0;g<d.length;g++){u=this.formatNumber(d[g].cor,3),m=d[g].col,f=(g+1)*p;this.toRender({p:["drawText",u,this.marginLeft+this.offsetX+this.left+this.x/2,this.marginTop+this.offsetY+this.top+f,h,m,"center","middle"],t:"Labels"})}}}}else if(this.layoutValid&&this.layoutLabelShow){var x=this.layoutCollapse&&!this.layoutAdjust,v=(this.layoutCollapse||this.layoutType,this.layoutLabelBoxThickness),b=(a=r.marginLeft+r.offsetX,(x||"wrap"!=r.layoutType&&"horizontal"==r.graphOrientation&&!r.graphType.match(/Scatter/)?a+(r.layoutCollapse?0:r.margin):r.graphType.match(/Scatter/)&&(r.isQQ||r.isCDF||"wrap"!=r.layoutType)?a+(r.layoutAdjust?r.left:r.margin):a+(r.graphOrientation,r.left)+(r.graphType.match(/Scatter/),0))+.5),A=function(){var t=r.marginTop+r.offsetY;return x||"wrap"!=r.layoutType&&"horizontal"==r.graphOrientation&&!r.graphType.match(/Scatter/)?t:t+(r.top-r.layoutLabels.length*v*("wrap"==r.layoutType?1:0))}()+(this.decorations?.5*-this.margin:.5),w=function(){var t=r.layoutWidth;return x?t:r.graphType.match(/Scatter/)?t-(r.layoutAdjust?r.left:r.margin):"wrap"!=r.layoutType?t-r.margin*("horizontal"==r.graphOrientation?1:2):t-(r.left+r.right)}(),C=function(){var t=r.layoutHeight;return x?t:r.graphType.match(/Scatter/)?t-(r.layoutAdjust?r.bottom+r.margin:2*r.margin):"wrap"!=r.layoutType?t-r.margin*("horizontal"==r.graphOrientation?1:2):r.layoutAdjust?t-("horizontal"==r.graphOrientation?r.top+r.bottom-r.layoutLabels.length*v:r.bottom):t-("horizontal"==r.graphOrientation?r.margin:r.bottom)}()+(this.decorations?.5*this.margin:0),T=w/2,S=this.layoutLabels.length?this.scaleTextToFont(this.longestLayoutLabel,this.layoutBoxShow?this.fontSize:this.maxFontSize,w,C):this.font,M=this.layoutBoxShow?this.foreground:"rgba(0,0,0,0)";if("wrap"==this.layoutType)for(g=0;g<this.layoutLabels.length;g++)this.layoutBoxLabelColors[g]&&this.toRender({p:["drawShape","box",b+w/2,A+v/2+v*g,w,v,this.layoutBoxLabelColors[g],this.layoutBoxShow?this.foreground:this.layoutBoxLabelColors[g]],t:"Labels"});else("cols"==this.layoutType||"rows"==this.layoutType)&&this.layoutLabels.length;if(r.graphType.match(/Scatter/)){if(!this.xAxis.length||!this.yAxis.length)return;"wrap"==this.layoutType&&this.toRender({p:["drawShape","box",b+w/2,A+this.layoutLabels.length*v/2,w,this.layoutLabels.length*v,!1,M,"open",!1,1],t:"Labels"})}else this.toRender({p:["drawShape","box",b+w/2,A+C/2,w,C,!1,M,"open"],t:"Labels"});if("wrap"==this.layoutType)for(g=0;g<this.layoutLabels.length;g++){this.toRender({p:["drawText",this.layoutLabels[g],b+T,A+v/2+v*g,S,this.layoutLabelColor,"center","middle"],t:"Labels"});var D=A+v+v*g;this.toRender({p:["drawLine","line",b,D,b+w,D,M],t:"Labels"})}else"cols"==this.layoutType?(0==e&&(this.toRender({p:["drawText",this.layoutLabels[this.layoutLabels.length>1?1:0],b+T,A-v/2,S,this.layoutLabelColor,"center","middle"],t:"Labels"}),this.toRender({p:["drawShape","box",b+w/2,A-v/2,w,v,!1,M,"open",!1,1],s:!0,t:"Labels"})),this.layoutLabels.length>1&&Number(i)+1==this.layoutCols&&(this.toRender({p:["drawText",this.layoutLabels[0],b+w+v/2,A+C/2,S,this.layoutLabelColor,"center","middle",Math.PI/2]}),this.toRender({p:["drawShape","box",b+w+v/2,A+C/2,v,C,!1,M,"open",!1,1],s:!0,t:"Labels"}))):"rows"==this.layoutType&&(Number(i)+1==this.layoutCols&&(this.toRender({p:["drawText",this.layoutLabels[0],b+w+v/2,A+C/2,S,this.layoutLabelColor,"center","middle",Math.PI/2]}),this.toRender({p:["drawShape","box",b+w+v/2,A+C/2,v,C,!1,M,"open",!1,1],s:!0,t:"Labels"})),this.layoutLabels.length>1&&0==e&&(this.toRender({p:["drawText",this.layoutLabels[1],b+T,A-v/2,S,this.layoutLabelColor,"center","middle"],t:"Labels"}),this.toRender({p:["drawShape","box",b+w/2,A-v/2,w,v,!1,M,"open",!1,1],s:!0,t:"Labels"})))}},this.getLayoutConfig=function(t){return!!(this.layoutValid&&this.layoutConfig&&this.layoutConfig[this.layoutCurrent]&&this.layoutConfig[this.layoutCurrent][t])&&this.layoutConfig[this.layoutCurrent][t]},this.initializeLayout=function(){this.isValidLayout()}},CanvasXpress.prototype.initViewport=function(){this.setViewport=function(t){if(!(p=this.$("container-"+this.target))){for(var e=this.$(this.target),i=e.attributes,s=0;s<i.length;s++)this.meta.dom[i[s].name]=i[s].value;var a=e.parentNode;e.className="CanvasXpress",e.hasAttribute("data-maxWidth")||e.setAttribute("data-maxWidth",e.hasAttribute("width")?Number(e.getAttribute("width")):a.clientWidth),e.hasAttribute("data-maxHeight")||e.setAttribute("data-maxHeight",e.hasAttribute("height")?Number(e.getAttribute("height")):a.clientHeight),a.id||(a.id="CanvasXpress-ParentNode-"+this.target),CanvasXpress.system.isShiny||a.classList.add("CanvasXpress-ParentNode"),a.style.margin||a.style.marginTop||!this.toolbarType.match(/over|fixed/)||(a.style.marginTop="36px"),this.targetParentNode=a.id,this.targetParentNodeResponsive=!1,this.targetParentNodeAspectRatio=[];var r=!!e.hasAttribute("data-responsive")&&JSON.parse(e.getAttribute("data-responsive")),n=!!e.hasAttribute("data-aspectRatio")&&e.getAttribute("data-aspectRatio"),o=!!e.hasAttribute("data-resizable")&&e.getAttribute("data-resizable"),h=!!e.hasAttribute("data-fixedDimensions")&&e.getAttribute("data-fixedDimensions");if(o&&("both"==o?(this.resizable=!0,this.resizableX=!0,this.resizableY=!0):"x"==o||"X"==o?(this.resizable=!0,this.resizableX=!0,this.resizableY=!1):"y"==o||"Y"==o?(this.resizable=!0,this.resizableX=!1,this.resizableY=!0):"none"==o&&(this.resizable=!1,this.resizableX=!1,this.resizableY=!1)),r){this.targetParentNodeResponsive=!0;var l=n?n.split(/:/):[],c=this.getMaxCanvasWidthHeight(e,l);h||(e.width=c[0],e.height=c[1]),this.targetParentNodeAspectRatio=[e.width,e.height]}e.originalWidth=parseInt(e.width)>0?parseInt(e.width)-4:500,e.originalHeight=parseInt(e.height)>0?parseInt(e.height)-4:500,e.width=e.originalWidth,e.height=e.originalHeight,e.style.width=e.width+"px",e.style.height=e.height+"px";var d=this.$cX("canvas",{id:this.target+"-events",className:"CanvasXpress",width:e.width,height:e.height},{position:"absolute",left:0,top:0});this.target2=this.target+"-events";var p=this.$cX("div",{id:"container-"+this.target,className:"CanvasXpressContainer"},{backgroundColor:this.background});t&&(p.style.display="none");var g=this.$cX("div",{id:"northest-container-"+this.target,className:"CanvasXpressContainer"},{width:e.width+"px",clear:"left",backgroundColor:this.background}),u=this.$cX("div",{id:"northest-wrapper-"+this.target,className:"CanvasXpressWrapper"},{width:e.width+"px",backgroundColor:this.background}),m=this.$cX("div",{id:"north-container-"+this.target,className:"CanvasXpressContainer"},{width:e.width+"px",height:"0px",clear:"left",backgroundColor:this.background}),f=this.$cX("div",{id:"north-wrapper-"+this.target,className:"CanvasXpressWrapper"},{width:e.width+"px",height:"0px",backgroundColor:this.background}),y=this.$cX("div",{id:"middle-container-"+this.target,className:"CanvasXpressContainer"},{width:e.width+"px",height:e.height+"px",clear:"left",backgroundColor:this.background}),x=this.$cX("div",{id:"west-container-"+this.target,className:"CanvasXpressContainer"},{width:"0px",height:e.height+"px",cssFloat:"left",backgroundColor:this.background}),v=this.$cX("div",{id:"west-wrapper-"+this.target,className:"CanvasXpressWrapper"},{width:"0px",height:e.height+"px",backgroundColor:this.background,overflowY:"auto",overflowX:"hidden"}),b=this.$cX("div",{id:"center-wrapper-"+this.target,className:"CanvasXpressWrapper"},{backgroundColor:this.background}),A=this.$cX("div",{id:"east-container-"+this.target,className:"CanvasXpressContainer"},{width:"0px",height:e.height+"px",backgroundColor:this.background}),w=this.$cX("div",{id:"east-wrapper-"+this.target,className:"CanvasXpressWrapper"},{width:"0px",height:e.height+"px",backgroundColor:this.background}),C=this.$cX("div",{id:"south-container-"+this.target,className:"CanvasXpressContainer"},{width:e.width+"px",height:"0px",clear:"left",backgroundColor:this.background}),T=this.$cX("div",{id:"south-wrapper-"+this.target,className:"CanvasXpressWrapper",state:"open"},{width:e.width+"px",height:"0px",backgroundColor:this.background}),S=this.$cX("div",{id:"southest-container-"+this.target,className:"CanvasXpressContainer"},{width:e.width+"px",clear:"left",backgroundColor:this.background}),M=this.$cX("div",{id:"southest-wrapper-"+this.target,className:"CanvasXpressWrapper"},{width:e.width+"px",backgroundColor:this.background});g.appendChild(u),S.appendChild(M),m.appendChild(f),x.appendChild(v),A.appendChild(w),C.appendChild(T),y.appendChild(x),y.appendChild(b),y.appendChild(A),p.appendChild(g),p.appendChild(m),p.appendChild(y),p.appendChild(C),p.appendChild(S),p.appendChild(this.createLoadingTimer()),e.parentNode.insertBefore(p,e),b.appendChild(e.parentNode.appendChild(e)),e.parentNode.appendChild(d),this.meta.canvas.ctx2=this.get2DCanvasContext(d),this.meta.canvas.ctx2.setTransform(this.meta.canvas.canvasPixelRatio,0,0,this.meta.canvas.canvasPixelRatio,0,0)}},this.getMaxCanvasWidthHeight=function(t,e){var i,s;t||(t=this.$(this.target)),e||(e=this.targetParentNodeAspectRatio);var a=!(!this.targetParentNode||!this.$(this.targetParentNode))&&this.$(this.targetParentNode),r=Number(t.getAttribute("data-maxWidth")),n=Number(t.getAttribute("data-maxHeight"));if(!a)return[r,n];a.parentNode&&(a=a.parentNode);var o=a.getClientRects(),h=parseInt(getComputedStyle(a).paddingLeft),l=Number(o[0]?o[0].width:this.width),c=Number(o[0]?o[0].height:this.height);return l=l>r?r:l,c=c>n?n:c,2==e.length?(e[0]=Number(e[0]),e[1]=Number(e[1]),e[0]==e[1]?s=i=l-(l>=r?0:h?2*h:0):e[0]>e[1]?(i=parseInt(l),s=parseInt(i*e[1]/e[0])):(s=parseInt(c),i=parseInt(s*e[0]/e[1]))):(i=l,s=c),[i,s]},this.createLoadingTimer=function(){var t=this.target+"canvasXpressLoadingTimer";if(!this.$(t)){for(var e=this.$(this.target),i=this.$cX("div",{id:t},{display:"block",position:"absolute",top:parseInt(e.height/2-40)+"px",left:parseInt(e.width/2-40)+"px"}),s=this.$cX("div",{className:"lds-ring"}),a=0;a<4;a++)s.appendChild(this.$cX("div"));return i.appendChild(s),i}},this.resizeViewportNorth=function(){var t=this.meta.canvas.canvasPixelRatio,e=this.$("west-container-"+this.target),i=this.$("east-container-"+this.target),s=this.$("northest-container-"+this.target),a=this.$("northest-wrapper-"+this.target),r=this.$("north-container-"+this.target),n=this.$("north-wrapper-"+this.target);e&&i&&s&&a&&r&&n&&(s.style.width=parseInt(e.style.width)+this.meta.canvas.ctx.canvas.width/t+parseInt(i.style.width)+"px",a.style.width=parseInt(e.style.width)+this.meta.canvas.ctx.canvas.width/t+parseInt(i.style.width)+"px",r.style.width=parseInt(e.style.width)+this.meta.canvas.ctx.canvas.width/t+parseInt(i.style.width)+"px",n.style.width=parseInt(e.style.width)+this.meta.canvas.ctx.canvas.width/t+parseInt(i.style.width)+"px",r.style.height="0px",n.style.height="0px",r.style.left=e.style.width)},this.resizeViewportWest=function(){var t=this.meta.canvas.canvasPixelRatio,e=this.$("west-container-"+this.target),i=this.$("west-wrapper-"+this.target);e&&i&&(e.style.height=this.meta.canvas.ctx.canvas.height/t+"px",i.style.height=this.meta.canvas.ctx.canvas.height/t+"px")},this.resizeViewportEast=function(){this.$(this.target+"-cX-DataFilter");var t=this.meta.canvas.canvasPixelRatio,e=this.$("east-container-"+this.target),i=this.$("east-wrapper-"+this.target);e&&i&&(e.style.width="0px",i.style.width="0px",e.style.height=this.meta.canvas.ctx.canvas.height/t+"px",i.style.height=this.meta.canvas.ctx.canvas.height/t+"px")},this.resizeViewportSouth=function(t){var e=this.$(this.target+"-cX-DataTable"),i=this.meta.canvas.canvasPixelRatio,s=this.$("west-container-"+this.target),a=this.$("east-container-"+this.target),r=this.$("south-container-"+this.target),n=this.$("south-wrapper-"+this.target);e&&s&&a&&r&&n&&(t?(r.style.height=parseInt(e.style.height)+"px",n.style.height=parseInt(e.style.height)+"px",r.style.width=parseInt(e.style.width)+"px",n.style.width=parseInt(e.style.width)+"px"):(r.style.width=parseInt(s.style.width)+this.meta.canvas.ctx.canvas.width/i+parseInt(a.style.width)+"px",n.style.width=parseInt(s.style.width)+this.meta.canvas.ctx.canvas.width/i+parseInt(a.style.width)+"px",r.style.height="0px",n.style.height="0px"))},this.resizeViewport=function(){var t=this.meta.canvas.canvasPixelRatio,e=this.$("middle-container-"+this.target),i=this.$("east-container-"+this.target),s=this.$("west-container-"+this.target);e&&i&&s&&(this.resizeViewportWest(),this.resizeViewportEast(),this.resizeViewportNorth(),this.resizeViewportSouth(),e.style.width=parseInt(s.style.width)+this.meta.canvas.ctx.canvas.width/t+parseInt(i.style.width)+0+"px",e.style.height=this.meta.canvas.ctx.canvas.height/t+0+"px")},this.resizeViewportMiddle=function(t,e){var i=this.$("middle-container-"+this.target),s=this.$("east-container-"+this.target),a=this.$("west-container-"+this.target);i&&s&&a&&(this.resizeViewportWest(),this.resizeViewportEast(),this.resizeViewportNorth(),this.resizeViewportSouth(),i.style.width=parseInt(a.style.width)+t+parseInt(s.style.width)+0+"px",i.style.height=e+0+"px")},this.resetViewportOverflow=function(t){if(t){var e=this.$(t+"-wrapper-"+this.target);e&&(e.style.overflow="visible")}},this.initializeViewport=function(t){this.setViewport(t)}},CanvasXpress.prototype.initMenus=function(){var t;this.addMenu=function(t,e,i,s,a,r,n,o,h){if(!this.disableMenu&&!this.customizing){var l,c,d=this.$("north-wrapper-"+this.target),p=this.$("west-container-"+this.target);if(this.resetLinkDiv(),d&&p){if(e)c=this.newId("-cX-Menu-"),l=this.$cX("div",{id:c,className:"CanvasXpressMenu draggable",par:i},{left:"0px",top:"0px",zIndex:this.menuIndex++,display:"none"});else{if(this.removeMenus(),s)e=s,a+=p.offsetWidth;else{e=this.setMenu(t);var g=this.getTargetEvent(t),u=this.adjustedCoordinates(t,g);o?(a=8,r=8):(a=u.x,r=u.y)}c=this.newId("-cX-Menu-"),l=this.$cX("div",{id:c,className:"CanvasXpressMenu draggable"},{left:a+"px",top:r+"px",zIndex:this.menuIndex++})}var m=this.$cX("ul",{id:this.newId("-cX-List-"),className:"CanvasXpressList",header:n,colorBackground:h});l.appendChild(m),d.appendChild(l);var f=this.maxSubMenus,y=e.length>f?f:e.length;e.length>f&&"Network"!=this.graphType&&(m.rawMenu=e,m.rawMenuIndex=0,this.addMenuItemScroller(m,"Top"));for(var x=0;x<y;x++)"-"==e[x][0]?this.addMenuItemSep(m):"-text-"==e[x][0]?this.addMenuItemText(e[x],m):"-color-"==e[x][0]?this.addMenuItemColor(e[x],m):"-slider-"==e[x][0]?this.addMenuItemSlider(e[x],m):"-filter-"==e[x][0]?this.addMenuItemFilter(e[x],m):this.addMenuItem(e[x],m);e.length>f&&this.addMenuItemScroller(m,"Bottom")}return c}},this.pageMenuItem=function(t,e){var i,s,a,r,n=t.rawMenuMatch||t.rawMenu;if(n){var o=t.childNodes.length-2;"Top"==e&&t.rawMenuIndex>0?(i=t.childNodes[t.childNodes.length-2],s=n[t.rawMenuIndex-1],a=t.childNodes[2],r=!0,t.rawMenuIndex--):"Bottom"==e&&n.length>t.rawMenuIndex+o&&(i=t.childNodes[2],s=n[t.rawMenuIndex+o],a=t.childNodes[t.childNodes.length-1],r=!0,t.rawMenuIndex++),r&&(this.addRemoveItemListeners("removeEvtListener",i),i.parentNode.removeChild(i),"-"==s[0]?this.addMenuItemSep(t,a):"-text-"==s[0]?this.addMenuItemText(s,t,a):"-color-"==s[0]?this.addMenuItemColor(s,t,a):"-slider-"==s[0]?this.addMenuItemSlider(s,t,a):"-filter-"==s[0]?this.addMenuItemFilter(s,t,a):this.addMenuItem(s,t,a))}},this.filterScrollSearch=function(t){var e=this.$(t);if(e){for(var i=e.value,s=new RegExp(e.value,"i"),a=e.parentNode.parentNode,r=a.rawMenu,n=[],o=0;o<r.length;o++)r[o][0].match(s)&&n.push(r[o]);for(n.length!=r.length?a.rawMenuMatch=n:delete a.rawMenuMatch;a.childNodes.length>0;){var h=a.childNodes[0];this.addRemoveItemListeners("removeEvtListener",h),a.removeChild(h)}var l=this.maxSubMenus,c=n.length>l?l:n.length;a.rawMenuIndex=0;var d=this.addMenuItemScroller(a,"Top",i);for(o=0;o<c;o++)this.addMenuItem(n[o],a);this.addMenuItemScroller(a,"Bottom"),d.focus(),d.value=i}},this.addMenuItemSep=function(t,e){var i=this.$cX("li",{id:this.newId("-cX-List-Item-Sep-"),className:"CanvasXpressListItemSep"}),s=this.$cX("span",{id:this.newId("-cX-List-Item-Text-Sep-"),className:"CanvasXpressListItemTextSep",innerHTML:"&nbsp;"});i.appendChild(s),e?e.parentNode.insertBefore(i,e):t.appendChild(i)},this.addMenuItemScroller=function(t,e){var i=this.$cX("li",{id:this.newId("-cX-List-Item-Scroll-"+e),className:"CanvasXpressListItemScroll"+e}),s=this.$cX("span",{id:this.newId("-cX-List-Item-Text-Scroll-"+e),className:"CanvasXpressListItemTextScroll"+e,innerHTML:"&nbsp;"});if(i.appendChild(s),t.appendChild(i),this.addRemoveItemListeners("addEvtListener",i),"Top"==e){var a=this.$cX("li",{id:this.newId("-cX-List-Item-Scroll-Search"),className:"CanvasXpressListItemScrollSearch"+e}),r=this.$cX("input",{id:this.newId("-cX-List-Item-Scroll-Search-Input"),className:"CanvasXpressListItemScrollSearch",type:"text",placeholder:" Search menu"});return a.appendChild(r),t.appendChild(a),r}},this.getMenuItemValue=function(t){if(t[2][2]){for(var e=this.cloneObject(t[2][2]),i=this;e.length>0;){var s=e.shift();if(!i[s])return"";i=i[s]}return null!=i?i:""}return this[t[2][0]]||""},this.addMenuItem=function(t,e,i){var s,a=this.newId("-cX-List-Item-"),r=this.$cX("li",{id:a,className:"CanvasXpressListItem",click:t[2],params:t[3]||[],upload:!(!t[0]||"Load"!=t[0]),uploadParams:!(!t[0]||"Load Parameters"!=t[0])});if(e.colorBackground){var n,o,h,l=CanvasXpress.colorSchemes[t[0]];if(l&&l[3])n=this.rgbToHex(l[3][0]),o=this.rgbToHex(l[3][1]),h=this.rgbToHex(l[3][2]);else{var c=this.getKeys(l).sort((function(t,e){return t-e})),d=l[c[0]].length;n=this.rgbToHex(l[c[0]][0]),o=this.rgbToHex(l[c[0]][Math.floor(d/2)]),h=this.rgbToHex(l[c[0]][d-1])}r.style.background="linear-gradient(to right, "+n+"70 33%, "+o+"70 33% 67%, "+h+"70 67%)"}var p={cursor:"grab",cursor:"-moz-grab",cursor:"-webkit-grab"},g=!1;t[5]?(s=this.$cX("a",{id:this.newId("-cX-List-Item-A-"),className:"CanvasXpressListItemAArrow",hidefocus:"true",unselectable:"on",href:"#",menu:a,menuId:"false",menuFunc:t[5],menuParm:t[6],draggable:!1},p),g=!0):s=this.$cX("a",{id:this.newId("-cX-List-Item-A-"),className:"CanvasXpressListItemA",hidefocus:"true",unselectable:"on",href:"#",menuFunc:t[2],menuParm:t[3],draggable:!1});var u,m=this.$cXI(t[1]&&CanvasXpress.icons.use.hasOwnProperty(t[1])?t[1]:CanvasXpress.png,{id:this.newId("-cX-List-Icon-"),className:"CanvasXpressListIcon",src:t[1],key:t[1]});if(!t[0]||"Load"!=t[0]&&"Load Parameters"!=t[0])u=this.$cX("span",{id:this.newId("-cX-List-Item-Text-"),className:"CanvasXpressListItemText",innerHTML:t[0]||"",draggable:!1},!!g&&p);else{u=this.$cX("span",{id:this.newId("-cX-List-Item-Text-"),className:"CanvasXpressListItemText",draggable:!1},{marginRight:0});var f=this.$cX("input",{id:this.newId("-cX-List-Item-Text-File-Upload"),className:"CanvasXpressListItemText",type:"file",draggable:!1},{color:"transparent",width:"100px"});u.appendChild(f)}e.colorBackground&&(u.style.fontWeight="bolder");var y=this.$cX("span",{className:"CanvasXpressListItemTextShort",innerHTML:t[4]||"",draggable:!1});s.appendChild(m),s.appendChild(u),s.appendChild(y),r.appendChild(s),i?i.parentNode.insertBefore(r,i):e.appendChild(r),this.addRemoveItemListeners("addEvtListener",r)},this.addMenuItemText=function(t,e,i){var s=this.newId("-cX-List-Item-Text-"),a=this.newId("-cX-List-Item-Text-Input-"),r=this.getMenuItemValue(t),n=this.$cX("li",{id:s,className:"CanvasXpressListItem",click:t[1],params:[t[2],a]}),o=this.$cX("input",{id:a,className:"CanvasXpressList",type:"text",value:r},{paddingLeft:"3px",width:"200px"}),h=this.$cX("a",{id:this.newId("-cX-List-Text-Item-A-"),className:"CanvasXpressListItemA",hidefocus:"true",unselectable:"on",href:"#"}),l=this.$cXI("op_refresh",{id:this.newId("-cX-List-Text-Icon-"),className:"CanvasXpressListIcon",src:"op_refresh",key:"refreshForm"},{marginTop:"4px"});h.appendChild(l),h.appendChild(o),n.appendChild(h),i?i.parentNode.insertBefore(n,i):e.appendChild(n),this.addRemoveItemListeners("addEvtListener",n)},this.addMenuItemColor=function(t,e,i){var s=this.newId("-cX-List-Item-Color-"),a=this.newId("-cX-List-Item-Color-Container-"),r=this.newId("-cX-List-Item-Color-Current-"),n=this.newId("-cX-List-Item-Color-Palete-"),o=this.newId("-cX-List-Item-Color-Palete-Current-"),h=this.newId("-cX-List-Item-Color-Saturation-"),l=this.newId("-cX-List-Item-Color-Saturation-Current-"),c=this[t[2][0]]||"",d=this.$cX("li",{id:s,className:"CanvasXpressListItem",click:t[1],params:[t[2],r],palete:n,paleteCurrent:o,colorCurrent:r,saturation:h,saturationCurrent:l}),p=this.$cX("a",{id:this.newId("-cX-List-Color-Item-A-"),className:"CanvasXpressListItemA",hidefocus:"true",unselectable:"on",href:"#"},{height:"140px",width:"250px"}),g=this.$cXI("op_refresh",{id:this.newId("-cX-List-Color-Icon-"),className:"CanvasXpressListIcon",src:"op_refresh",key:"refreshForm"},{marginTop:"2px"}),u=c?this.rgbToHex(this.validateColor(c.replace(/[\'\"]/g,""))):this.foreground;this.colorRGBfromString(u);var m=Math.round(this.colorHSV[0]/6*180),f=Math.round(100*(1-this.colorHSV[1])),y=Math.round(100*(1-this.colorHSV[2])),x=this.$cX("div",{id:a},{width:"188px",height:"138px",cssFloat:"left"}),v=this.$cX("div",{id:r,parentItem:s,className:"CanvasXpressConfiguratorColor",value:c},{width:"203px",height:"24px",cssFloat:"left",marginBottom:"5px",cursor:"default",lineHeight:"24px"}),b=this.$cX("div",{id:n,parentItem:s,className:"CanvasXpressConfiguratorColorMain"},{position:"relative",left:"0px",top:"0px",width:"181px",height:"101px"}),A=this.$cX("div",{id:o,parentItem:s,className:"CanvasXpressConfiguratorColorExtra"},{position:"relative",left:m-7+"px",top:f-7+"px",width:"195px",height:"115px"});b.appendChild(A);for(var w=this.$cX("div",{id:h,parentItem:s,className:"CanvasXpressConfiguratorColor"},{position:"relative",left:"188px",top:"-102px",width:"15px",height:"100px",border:"1px solid rgb(51,122,183)",clear:"left",cursor:"c_rosshair"}),C=0;C<100;C+=4){var T=this.$cX("div",!1,{height:"4px",position:"relative",left:"0px",cursor:"c_rosshair"});w.appendChild(T)}var S=this.$cX("div",{id:l,parentItem:s,className:"CanvasXpressConfiguratorColorExtra"},{position:"relative",left:"0px",top:y-108+"px",width:"29px",height:"115px"});w.appendChild(S),x.appendChild(v),x.appendChild(b),x.appendChild(w),p.appendChild(g),p.appendChild(x),d.appendChild(p),i?i.parentNode.insertBefore(d,i):e.appendChild(d),this.colorizeCurrentItemColor(d),this.colorizeSaturationItemColor(d),this.addRemoveItemListeners("addEvtListener",d)},this.colorizeCurrentItemColor=function(t){var e=this.$(t.colorCurrent);if(e){var i=this.colorRGBToString(),s=this.hexToRgb("#"+i);e.style.backgroundColor="#"+i,e.innerHTML="&nbsp;&nbsp;"+s,e.style.color=this.complementaryColor(s,!0),e.value=s}},this.colorizeSaturationItemColor=function(t){var e=function(t,e,i,s,a){return"rgb("+t*(1-s/a)*100+"%,"+e*(1-s/a)*100+"%,"+i*(1-s/a)*100+"%)"},i=this.$(t.saturation);if(i&&this.colorHSV){var s=i.childNodes,a=this.hsvFromRgb(this.colorHSV[0],this.colorHSV[1],1);if(a)for(var r=0;r<s.length-1;r++)s[r].style.backgroundColor=e(a[0],a[1],a[2],r,s.length-1)}},this.updateColorItemValue=function(t,e){if(!t){var i=this.getMenuItemComp(e);if(!i)return!1;t=i[0]}if(this.changingColorItemOn)if("palette"==this.changingColorItemOn){var s=this.$(t.palete),a=this.$(t.paleteCurrent);if(s&&a)if(o=this.adjustedCoordinates(e,s)){var r=Math.min(Math.max(0,o.x),181),n=Math.min(Math.max(0,o.y-25),101);a.style.left=r-7+"px",a.style.top=n-7+"px",this.colorFromHsv(6*r/180,1-n/100,null),this.colorizeCurrentItemColor(t),this.colorizeSaturationItemColor(t)}}else{var o,h=this.$(t.saturation),l=this.$(t.saturationCurrent);if(h&&l)if(o=this.adjustedCoordinates(e,h)){n=Math.min(Math.max(0,o.y-25),101);l.style.top=n-108+"px",this.colorFromHsv(null,null,1-n/100),this.colorizeCurrentItemColor(t)}}return!1},this.endColorItemChange=function(t){this.changingColorItemOn=!1},this.addMenuItemSlider=function(t,e,i){for(var s=this.newId("-cX-List-Item-Slider-"),a=this.newId("-cX-List-Item-Slider-Container-"),r=this.newId("-cX-List-Item-Slider-Table-"),n=t[2][0]||"",o=this.formatNumber(this.binConfigurations[n].max,this.binConfigurations[n].dec),h=this.$cX("li",{id:s,className:"CanvasXpressListItem",click:t[1],params:[t[2][0],a],slider:n}),l=this.$cX("a",{id:this.newId("-cX-List-Slider-Item-A-"),className:"CanvasXpressListItemA",hidefocus:"true",unselectable:"on",href:"#"}),c=this.$cX("div",{id:a,className:"CanvasXpressList"}),d=this.$cX("table",{id:r,className:"CanvasXpressListItemTable"},{width:"100%"}),p=this.$cX("tbody"),g=8*o.length,u=0;u<this.binConfigurations[n].n;u++){var m=Number(u>0?this.binConfigurations[n].bins[u-1].value:this.binConfigurations[n].min),f=Number(u<this.binConfigurations[n].n-1?this.binConfigurations[n].bins[u+1].value:this.binConfigurations[n].max),y=this.$cX("input",{id:r+"-Range-"+u,className:"CanvasXpressListItem",type:"range",value:this.binConfigurations[n].bins[u].value,min:m,max:f,step:Number(this.formatNumber((f-m)/20,this.binConfigurations[n].dec)),slider:n,sliderRange:u,sliderNumber:!1},{width:"120px"}),x=this.$cX("input",{id:r+"-Number-"+u,className:"CanvasXpressListItem",type:"number",value:this.binConfigurations[n].bins[u].value,min:m,max:f,step:Number(this.formatNumber((f-m)/20,this.binConfigurations[n].dec)),slider:n,sliderRange:u,sliderNumber:!0},{width:g+18+"px",textAlign:"right"}),v=this.$cX("tr"),b=this.$cX("th",{innerHTML:this.binConfigurations[n].bins[u].name},{paddingRight:"5px"}),A=this.$cX("td",{id:r+"-Min-"+u,innerHTML:this.formatNumber(m,this.binConfigurations[n].dec)},{width:g+"px",textAlign:"right"}),w=this.$cX("td");w.appendChild(y);var C=this.$cX("td",{id:r+"-Max-"+u,innerHTML:this.formatNumber(f,this.binConfigurations[n].dec)},{width:g+"px"}),T=this.$cX("td",!1,{paddingLeft:"5px"});T.appendChild(x),v.appendChild(b),v.appendChild(A),v.appendChild(w),v.appendChild(C),v.appendChild(T),p.appendChild(v)}d.appendChild(p),c.appendChild(d),c.appendChild(this.$cX("br"));var S=this.$cXI("op_refresh",{id:this.newId("-cX-List-Icon-"),className:"CanvasXpressListIcon",src:"op_refresh",key:"refreshForm"},{marginTop:"4px"});l.appendChild(S),l.appendChild(c),h.appendChild(l),i?i.parentNode.insertBefore(h,i):e.appendChild(h),this.addRemoveItemListeners("addEvtListener",h)},this.updateSliderItemValue=function(t){var e=this.changingSliderItemOn.slider,i=this.changingSliderItemOn.sliderRange,s=Number(this.formatNumber(this.changingSliderItemOn.value,this.binConfigurations[e].dec)),a=this.$(this.changingSliderItemOn.id.replace("-Range-","-Number-")),r=this.$(this.changingSliderItemOn.id.replace("-Range-"+i,"-Range-"+(i-1))),n=this.$(this.changingSliderItemOn.id.replace("-Range-"+i,"-Max-"+(i-1))),o=this.$(this.changingSliderItemOn.id.replace("-Range-"+i,"-Range-"+(i+1))),h=this.$(this.changingSliderItemOn.id.replace("-Range-"+i,"-Min-"+(i+1)));return this.binConfigurations[e].bins[i].value=s,a&&(a.value=s),r&&n&&(r.max=s,r.step=(r.max-r.min)/20,n.innerHTML=s),o&&h&&(o.min=s,o.step=(o.max-o.min)/20,h.innerHTML=s),this.applySliderItemValue(e),!1},this.endSliderItemChange=function(t){if(this.changingSliderItemOn.sliderNumber){var e=this.changingSliderItemOn.slider,i=this.changingSliderItemOn.sliderRange,s=Number(this.formatNumber(this.changingSliderItemOn.value,this.binConfigurations[e].dec)),a=this.$(this.changingSliderItemOn.id.replace("-Number-","-Range-")),r=this.$(this.changingSliderItemOn.id.replace("-Number-"+i,"-Range-"+(i-1))),n=this.$(this.changingSliderItemOn.id.replace("-Number-"+i,"-Max-"+(i-1))),o=this.$(this.changingSliderItemOn.id.replace("-Number-"+i,"-Range-"+(i+1))),h=this.$(this.changingSliderItemOn.id.replace("-Number-"+i,"-Min-"+(i+1)));this.binConfigurations[e].bins[i].value=s,a&&(a.value=s),r&&n&&(r.max=s,r.step=(r.max-r.min)/20,n.innerHTML=s),o&&h&&(o.min=s,o.step=(o.max-o.min)/20,h.innerHTML=s),this.applySliderItemValue(e)}this.changingSliderItemOn=!1},this.applySliderItemValue=function(t){var e=this.binConfigurations[t].name,i=this.binConfigurations[t].vi;this.data.x[e]=[];for(var s=0;s<this.data.y.data[i].length;s++){var a=this.data.y.data[i][s];if(isNaN(a)||""===a||null==a)this.data.x[e][s]="";else for(var r=0;r<this.binConfigurations[t].n;r++)if(a<=this.binConfigurations[t].bins[r].value){this.data.x[e][s]=this.binConfigurations[t].bins[r].name;break}}this.isGroupedData&&this.ungroupSamples(!0),this.updateData(this.data),this.groupSamples([e]),this.sortSamplesByCategory([e])},this.addMenuItemFilter=function(t,e,i){var s=this.newId("-cX-List-Item-"),a=this.$cX("li",{id:s,className:"CanvasXpressListItem",type:"filter",selector:t[1].id.split(":")[1]});a.appendChild(t[1]),i?i.parentNode.insertBefore(a,i):e.appendChild(a)},this.addRemoveItemListeners=function(t,e){if(!e)return this.removeMenus();if("CanvasXpressListItemSep"!=e.className){var i=e.parentNode.parentNode,s=!1,a=e.id.match("-cX-List-Item-Color-");if(this.hasClass(i,"draggable")&&!a&&this[t](i,"mousedown",this.registerMousemove,s),e.upload){var r=e.childNodes[0].childNodes[1].childNodes[0];this[t](r,"change",this.loadFile,s)}else if(e.uploadParams){r=e.childNodes[0].childNodes[1].childNodes[0];this[t](r,"change",this.loadParamsFile,s)}else this[t](e,"click",this.clickMenuItem,s);this[t](e,"mouseover",this.mouseoverMenuItem,s),this[t](e,"mouseout",this.mouseoutMenuItem,s),this[t](e,"mousewheel",this.mousewheelMenuItem,s),this[t](e,"contextmenu",this.contextMenuItem,s),e.className.match(/Scroll/)&&(this[t](e,"mousedown",this.mousedownMenuItem,s),this[t](e,"mouseup",this.mouseupMenuItem,s)),e.paleteCurrent&&e.saturation&&this[t](e,"mousedown",this.mousedownMenuItemColor,s),e.slider&&this[t](e,"mousedown",this.mousedownMenuItemSlider,s)}},this.contextMenuItem=(t=this,function(e){t.cancelEvent(e),t.getTargetEvent(e);var i=t.getMenuItemComp(e),s=i[1].childNodes[0],a=i[1].childNodes[1].innerText,r=i[1].menuFunc,n=i[1].menuParm,o=i[1].menuId,h=i[2].offsetLeft,l=i[2].offsetTop+i[1].offsetTop;t.removeMenus();var c=[["Pin "+a+" to Toolbar","fp_pin","pinToToolbar",[s,a,r,n,o,!1,!0]]],d=t.addMenu(e,c),p=t.$(d);return p.style.left=h+"px",p.style.top=l+"px",p.style.display="block",!1}),this.pinToToolbar=function(t,e,i,s,a,r,n){this.removeMenus();var o=this.$(this.target+"-cX-Toolbar-Custom");if(o){var h=this.target+"-cX-Custom-Toolbar-Menu-"+i;this.$(h)||(t.id=h,t.className="CanvasXpressToolbarImage",t.style.width="24px",t.style.height="24px",t.style.cssFloat="left",t.title=e,t.fun=i,t.par=this.stringifyJSON(s),t.mid=a||this.newId("-cX-Default-Toolbar-Menu-"),t.style.setProperty("background-color",this.background,"important"),n?o.insertBefore(t,o.firstChild):o.appendChild(t),this.disableToolbar||(this.addRemoveEvtListener("addEvtListener",t,"click",this.addCustomToolbarMenu,!1),this.addRemoveEvtListener("addEvtListener",t,"contextmenu",this.unpinFromToolbar,!1)),r||CanvasXpress.stack[this.target].afterRender.push(["addImageToToolbar",[t.key,e,i,s,a]]))}},this.unpinFromToolbar=function(t){return function(e){t.cancelEvent(e);var i=t.getTargetEvent(e),s=i.offsetLeft,a=i.offsetTop,r=[["Unpin "+i.title+" from Toolbar","fp_pinremove","removeImageFromToolbar",[i.id]]],n=t.addMenu(e,r),o=t.$(n);return o.style.left=s+"px",o.style.top=a+"px",o.style.display="block",!1}}(this),this.addCustomToolbarMenu=function(t){return function(e){t.cancelEvent(e);var i=t.getTargetEvent(e),s=i.par||i.getAttribute("par"),a=i.fun||i.getAttribute("fun"),r=i.mid||i.getAttribute("mid"),n=t[a].apply(t,s?t.parseJSON(s):[]);if(r){t.removeMenus();var o=t.addMenu(!1,n),h=t.$(o);h.style.left=i.offsetLeft+"px",h.style.top="10px",h.style.display="block"}}}(this),this.addImageToToolbar=function(t,e,i,s,a,r,n,o){var h;h=o?this.$cX(t,{className:"CanvasXpressToolbarImage",src:t,key:t},o):this.$cX(t,{className:"CanvasXpressToolbarImage",src:t,key:t}),this.pinToToolbar(h,e,i,s,a,r,n)},this.removeImageFromToolbar=function(t,e){var i=this.$(t);i&&!this.disableToolbar&&(this.addRemoveEvtListener("removeEvtListener",i,"click",this.addCustomToolbarMenu,!1),this.addRemoveEvtListener("removeEvtListener",i,"contextmenu",this.unpinFromToolbar,!1),i.parentNode.removeChild(i),this.removeMenus(),e||CanvasXpress.stack[this.target].afterRender.push(["removeImageFromToolbar",[t]]))},this.removeAllImagesFromToolbar=function(){var t=this.$(this.target+"-cX-Toolbar-Custom");if(t)for(var e=t.getElementsByTagName("svg");e.length>0;)this.removeImageFromToolbar(e[0].id,!0)},this.clickMenuItem=function(t){return function(e){t.cancelEvent(e);var i=t.getTargetEvent(e),s=t.getMenuItemComp(e);if(s&&!/input|textarea|select/i.test(i.tagName)){if(s[0].className.match(/Scroll/)||s[1].className.match(/Scroll/)){var a=s[0].className.match(/Scroll/)?s[0]:s[1],r=a.parentNode,n=a.className.match(/ScrollTop/)?"Top":"Bottom";t.pageMenuItem(r,n)}else{var o=[];if(s[0].params)for(var h=0;h<s[0].params.length;h++)"event"==s[0].params[h]?o.push(e):"component"==s[0].params[h]?o.push(s):o.push(s[0].params[h]);if(t[s[0].click]){t[s[0].click].apply(t,o);var l=s[1].firstChild,c="SVG"==l.tagName.toUpperCase()&&l.getAttribute("key");c&&(c.match("sl_checkboxoff")?(l.setAttribute("key","sl_checkboxon"),t.$cXIU(l,"sl_checkboxon")):c.match("sl_checkboxon")?(l.setAttribute("key","sl_checkboxoff"),t.$cXIU(l,"sl_checkboxoff")):c.match("sl_eclose")?(l.setAttribute("key","sl_eopen"),t.$cXIU(l,"sl_eopen"),s[1].childNodes[1].innerHTML=s[1].childNodes[1].innerHTML.replace("Hide","Show")):c.match("sl_eopen")?(l.setAttribute("key","sl_eclose"),t.$cXIU(l,"sl_eclose"),s[1].childNodes[1].innerHTML=s[1].childNodes[1].innerHTML.replace("Show","Hide")):"sl_lightbulbon"==c?(l.setAttribute("key","sl_lightbulboff"),t.$cXIU(l,"sl_lightbulboff")):"sl_lightbulboff"==c?(l.setAttribute("key","sl_lightbulbon"),t.$cXIU(l,"sl_lightbulbon")):"sr_azd"==c?(l.setAttribute("key","sr_azi"),t.$cXIU(l,"sr_azi"),s[0].params[1]="sr_azi"):"sr_azi"==c?(l.setAttribute("key","sr_azd"),t.$cXIU(l,"sr_azd"),s[0].params[1]="sr_azd"):c.match("sl_radioon")?(t.resetRadioMenuItem(s[2].firstChild.childNodes),o[1]&&o[1].toString().match(/xAxis|yAxis|zAxis/)?(l.setAttribute("key","sl_radioon"),t.$cXIU(l,"sl_radioon")):(l.setAttribute("key","sl_radiooff"),t.$cXIU(l,"sl_radiooff"))):c.match("sl_radiooff")?(t.resetRadioMenuItem(s[2].firstChild.childNodes),l.setAttribute("key","sl_radioon"),t.$cXIU(l,"sl_radioon")):"variables"!=c&&"samples"!=c||"sortDir"!=o[0]||(s[0].params[1]="sr_azd"==s[0].params[1]?"sr_azi":"sr_azd"))}}return!1}return!1}}(this),this.resetRadioMenuItem=function(t){for(var e=0;e<t.length;e++){var i=t[e].firstChild.firstChild;i&&i.nodeName.match(/svg/i)&&this.$cXIU(i,"sl_radiooff",{src:"sl_radiooff",key:"sl_radiooff"})}},this.adjustMenuItemPosition=function(t,e,i){var s,a,r=this.remoteParentId&&this.$(this.remoteParentId)?this.$(this.remoteParentId):this.$("container-"+this.target),n=window.innerWidth,o=(window.innerHeight,r.offsetLeft),h=(r.offsetTop,r.clientWidth,r.clientHeight,n-o),l=t.clientWidth;t.clientHeight;e?((s=e.offsetLeft+e.offsetWidth-5)+l+5>h&&(s=e.offsetLeft-l+5),a=e.offsetTop+i.offsetTop):(s=t.offsetLeft,a=t.offsetTop),t.style.left=s+"px",t.style.top=a+"px"},this.mouseoverMenuItem=function(t){return function(e){var i=t.getMenuItemComp(e);if(!i)return!1;if(i[0]&&i[0].className&&i[0].className.toString().match(/Scroll/)||i[1]&&i[1].className&&i[1].className.toString().match(/Scroll/))return(i[0]&&i[0].className&&i[0].className.match(/Scroll/)?i[0]:i[1]).className+="Active",!1;var s=i[2].firstChild.childNodes;if(t.hideMenusRecursively(s),i[0].className="CanvasXpressListItemActive",i[1]&&i[1].menu){var a=t[i[1].menuFunc].apply(t,i[1].menuParm),r=t.addMenu(!1,a,i[1].menu,!1,!1,!1,!1,!1,"Scheme"==i[1].innerText),n=t.$(r),o=i[2];n.style.left="0px",n.style.top="0px",n.style.display="block",t.adjustMenuItemPosition(n,o,i[1]),i[1].className="CanvasXpressListItemAArrowActive",i[1].menuId=r}else i[1]&&(i[1].className="CanvasXpressListItemAActive");return!1}}(this),this.mouseoutMenuItem=function(t){return function(e){var i,s,a,r;t.fastScrollMenuOn&&(t.fastScrollMenuOn=!1,clearInterval(t.fastScrollMenu));var n=t.adjustedCoordinates(e);if(n){var o=t.$("north-container-"+t.target);t.$("west-container-"+t.target);n.y+=o.offsetHeight;var h=t.getMenuItemComp(e);if(!h)return!1;if(h[1]&&h[1].menu){var l=t.$(h[1].menuId),c=l.firstChild.firstChild;if(i=l.offsetLeft,a=l.offsetTop,s=i+l.offsetWidth,r=a+l.offsetHeight,n.x>=i&&n.x<=s&&n.y>=a&&n.y<=r)return!1;if(t.hideMenu(h,l),c&&"filter"==c.type)if("string"==c.firstChild.type){var d=t.$(t.target+":"+c.selector+":cX-DataFilterMask");d&&t.addRemoveStringDataFilterListeners("removeEvtListener",d)}else{var p=t.$(t.target+":"+c.selector+":cX-DataFilterMin"),g=t.$(t.target+":"+c.selector+":cX-DataFilterMinLabel"),u=t.$(t.target+":"+c.selector+":cX-DataFilterRange"),m=t.$(t.target+":"+c.selector+":cX-DataFilterMax"),f=t.$(t.target+":"+c.selector+":cX-DataFilterMaxLabel"),y=t.$(t.target+":"+c.selector+":cX-DataFilterScale");p&&g&&u&&m&&f&&y&&t.addRemoveNumericDataFilterListeners("removeEvtListener",p,m,g,f,y)}}else t.hideMenu(h)}return!1}}(this),this.mousedownMenuItemColor=function(t){return function(e){var i=t.getTargetEvent(e),s=t.getMenuItemComp(e);if(!s)return!1;if(i.id&&i.id.match(/-cX-List-Item-Color-Palete-/)){if(t.changingColorItemOn="palette",0==t.colorHSV[2]){t.colorFromHsv(null,null,1),t.colorizeCurrentItemColor(s[0]);var a=t.$(s[0].saturationCurrent);a&&(a.style.top="-108px")}t.updateColorItemValue(s[0],e),t.colorizeSaturationItemColor(s[0])}else i.parentNode.id&&i.parentNode.id.match(/-cX-List-Item-Color-Saturation-/)&&(t.changingColorItemOn="saturation",t.updateColorItemValue(s[0],e));return t.cancelEvent(e),!1}}(this),this.mousedownMenuItemSlider=function(t){return function(e){return t.changingSliderItemOn=t.getTargetEvent(e),!1}}(this),this.mousedownMenuItem=function(t){return function(e){return t.fastScrollMenuOn=!0,t.fastScrollMenu=t.setInterval((function(){t.clickMenuItem(e)}),100),!1}}(this),this.mouseupMenuItem=function(t){return function(e){t.fastScrollMenuOn&&(t.fastScrollMenuOn=!1,clearInterval(t.fastScrollMenu))}}(this),this.mousewheelMenuItem=function(t){return function(e){t.cancelEvent(e);var i=0;if(e.wheelDelta?(i=e.wheelDelta,window.opera&&(i=-i)):e.detail&&(i=-e.detail),i){t.getTargetEvent(e);var s=t.getMenuItemComp(e);if(!s)return!1;var a=s[0].parentNode;i>0?t.pageMenuItem(a,"Top"):t.pageMenuItem(a,"Bottom")}return!1}}(this),this.getMenuItemComp=function(t){for(var e=this.getTargetEvent(t);e&&e.tagName&&!e.tagName.match(/li/i);)e=e.parentNode;return!(!e.parentNode||!e.parentNode.parentNode)&&[e,e.firstChild,e.parentNode.parentNode]},this.hideMenu=function(t,e){if(t)if(t[0]&&t[0].className&&t[0].className.toString().match(/Scroll/)||t[1]&&t[1].className&&t[1].className.toString().match(/Scroll/)){var i=t[0]&&t[0].className&&t[0].className.match(/Scroll/)?t[0]:t[1];i.className=i.className.replace("Active","")}else(t[0]||t[1])&&(t[1]&&t[1].menu?t[1].className="CanvasXpressListItemAArrow":t[1]&&(t[1].className="CanvasXpressListItemA"),t[0]&&(t[0].className="CanvasXpressListItem"));if(e){for(var s=e.firstChild.childNodes,a=0;a<s.length;a++){var r=s[a];r.className.match(/Scroll|ItemSep/)||this.addRemoveItemListeners("removeEvtListener",r)}e.parentNode.removeChild(e)}},this.hideMenusRecursively=function(t){for(var e=0;e<t.length;e++){var i=t[e];if(i&&i.className&&!i.className.toString().match(/Scroll|ItemSep/)){var s=i.firstChild,a=!(!s||!s.menu)&&this.$(s.menuId);a&&this.hideMenusRecursively(a.firstChild.childNodes),this.hideMenu([i,s],a)}}},this.removeMenus=function(t){var e=[];if(this.skipHeaderMouseout&&(this.skipHeaderMouseout.className="CanvasXpressTableCellHead",this.skipHeaderMouseout.firstChild.firstChild.className="CanvasXpressTableCellHead",this.skipHeaderMouseout=!1),t)e.push(this.$(this.target+"-cX-Menu-"+t));else{var i=this.$("north-wrapper-"+this.target);if(i)for(var s=i.getElementsByTagName("div"),a=0;a<s.length;a++)this.hasClass(s[a],"CanvasXpressMenu")&&e.unshift(this.$(s[a].id));this.menuIndex=10002}if(e.length>0){for(a in this.meta.ids)a.match(/cX-Menu-|cX-Menu/)&&delete this.meta.ids[a];for(a=0;a<e.length;a++){for(var r=e[a],n=r.getElementsByTagName("li"),o=0;o<n.length;o++)"CanvasXpressListItemSep"!=n[o].className&&this.addRemoveItemListeners("removeEvtListener",n[o]);r.parentNode.removeChild(r)}}this.isMenu=!1},this.changeAttributeMenu=function(t,e,i,s){var a=[];if(s)for(var r=0;r<e.length;r++)a.push([e[r],s[r],"changeAttribute",[t,i[r]]]);else for(r=0;r<e.length;r++)a.push([e[r],this[t]==i[r]?"sl_radioon":"sl_radiooff","changeAttribute",[t,i[r]]]);return a},this.changeTextColorAttributeMenu=function(t,e){return this.isArray(e)?[[t,"changeTextColorAttribute",e]]:[[t,"changeTextColorAttribute",[e]]]},this.getAxisLayoutTypeMenu=function(){var t=[];return t.push(["Both panels ","both"==this.scatterPlotMatrixType?"sl_radioon":"sl_radiooff","modifyLayoutType",["both"]]),t.push(["Upper panel ","upper"==this.scatterPlotMatrixType?"sl_radioon":"sl_radiooff","modifyLayoutType",["upper"]]),t.push(["Lower panel ","lower"==this.scatterPlotMatrixType?"sl_radioon":"sl_radiooff","modifyLayoutType",["lower"]]),t.push(["Correlation ","densityCorrelation"==this.scatterPlotMatrixType?"sl_radioon":"sl_radiooff","modifyLayoutType",["correlation"]]),t.push(["Correlation - Density ","correlationDensity"==this.scatterPlotMatrixType?"sl_radioon":"sl_radiooff","modifyLayoutType",["correlationDensity"]]),t.push(["Correlation - Histogram ","correlationHistogram"==this.scatterPlotMatrixType?"sl_radioon":"sl_radiooff","modifyLayoutType",["correlationHistogram"]]),t.push(["All ","all"==this.scatterPlotMatrixType?"sl_radioon":"sl_radiooff","modifyLayoutType",["all"]]),t.push(["First ","first"==this.scatterPlotMatrixType?"sl_radioon":"sl_radiooff","modifyLayoutType",["first"]]),t},this.getAxisLayoutMenu=function(){var t=[];return t.push(["Auto-Adjust",this.layoutAdjust?"sl_lightbulbon":"sl_lightbulbOff","toggleAttribute",["layoutAdjust"]]),t.push(["Type","ly_splom",!1,!1,!1,"getAxisLayoutTypeMenu",[]]),t},this.getAxisSampleMenu=function(t){for(var e=[],i=this.getObjectArray(this[t+"Axis"]),s=0;s<this.data.y.smps.length;s++)e.push([this.data.y.smps[s],i[this.data.y.smps[s]]?"sl_checkboxon":"sl_checkboxoff","changeSampleInAxis",[this.data.y.smps[s],t+"Axis"]]);return e},this.getAxisMenu=function(t,e){var i=t.toUpperCase(),s=e?"2":"",a=[],r=!1;return a.push([this[t+"Axis"+s+"Show"]?"Hide Axis":"Show Axis",this[t+"AxisShow"]?"sl_eclose":"sl_eopen","toggleAttribute",[t+"Axis"+s+"Show"]]),a.push(["Set Min","dtp_min",r,r,r,"changeTextColorAttributeMenu",["-text-","setMin"+i+s]]),a.push(["Set Max","dtp_max",r,r,r,"changeTextColorAttributeMenu",["-text-","setMax"+i+s]]),a.push(["Transform","ch_ofx",r,r,r,"getAxisTransformMenu",[t]]),("Scatter3D"==this.graphType||"ScatterBubble2D"==this.graphType||this.is3DPlot)&&a.push(["Exact Range","dtp_exact","toggleAttribute",[t+"AxisExact"]]),a.push(["Format","tx_format",r,r,r,"changeTextColorAttributeMenu",["-text-",t+"Axis"+s+"TickFormat"]]),this.graphType.match(/Scatter/)&&a.push(["Samples","ch_ls",r,r,r,"getAxisSampleMenu",[t]]),a},this.getFirstAxisMenu=function(){return[[this.xAxisShow?"Hide Axis":"Show Axis",this.xAxisShow?"sl_eclose":"sl_eopen","toggleAttribute",["xAxisShow"]]]},this.getSecondAxisMenu=function(){return[[this.xAxis2Show?"Hide Axis":"Show Axis",this.xAxis2Show?"sl_eclose":"sl_eopen","toggleAttribute",["xAxis2Show"]]]},this.getRangeAxisMenu=function(){var t=[],e=!1;return t.push(["Set Min","dtp_min",e,e,e,"changeTextColorAttributeMenu",["-text-","setMinX"]]),t.push(["Set Max","dtp_max",e,e,e,"changeTextColorAttributeMenu",["-text-","setMaxX"]]),t},this.getAxesMenu=function(){var t=[],e=!1;return"Scatter2D"==this.graphType?(t.push(["X-Axis","p_g2axistitlex",e,e,e,"getAxisMenu",["x"]]),t.push(["Y-Axis","p_g2axistitley",e,e,e,"getAxisMenu",["y"]]),t.push(["Color","at_col",e,e,e,"changeTextColorAttributeMenu",["-color-","axisTickColor"]]),t.push(["Font","ch_oaa",e,e,e,"getFontStyleMenu",["axisTick"]]),this.scatterPlotMatrix&&t.push(["Axes Layout","g_splom",e,e,e,"getAxisLayoutMenu",[]])):"Scatter3D"==this.graphType||"ScatterBubble2D"==this.graphType||this.is3DPlot?(t.push(["X-Axis","p_g3axistitlex",e,e,e,"getAxisMenu",["x"]]),t.push(["Y-Axis","p_g3axistitley",e,e,e,"getAxisMenu",["y"]]),t.push(["Z-Axis","p_g3axistitlez",e,e,e,"getAxisMenu",["z"]]),t.push(["Color","at_col",e,e,e,"changeTextColorAttributeMenu",["-color-","axisTickColor"]]),t.push(["Font","ch_oaa",e,e,e,"getFontStyleMenu",["axisTick"]])):this.graphType.match(/BarLine|DotLine|AreaLine|StackedLine|StackedPercentLine/)?(t.push(["First Axis","p_g1axistitle1",e,e,e,"getAxisMenu",["x"]]),t.push(["Second Axis","p_g1axistitle2",e,e,e,"getAxisMenu",["x",!0]]),t.push(["Color","at_col",e,e,e,"changeTextColorAttributeMenu",["-color-","axisTickColor"]]),t.push(["Font","ch_oaa",e,e,e,"getFontStyleMenu",["axisTick"]])):(t.push(["First Axis","p_g1axistitle1",e,e,e,"getFirstAxisMenu",[]]),t.push(["Second Axis","p_g1axistitle2",e,e,e,"getSecondAxisMenu",[]]),t.push(["Range","dtp_range",e,e,e,"getRangeAxisMenu",[]]),t.push(["Format","tx_format",e,e,e,"changeTextColorAttributeMenu",["-text-","xAxisTickFormat"]]),t.push(["Color","at_col",e,e,e,"changeTextColorAttributeMenu",["-color-","axisTickColor"]]),t.push(["Font","ch_oaa",e,e,e,"getFontStyleMenu",["axisTick"]]),this.layoutValid&&t.push(["Auto-Adjust",this.layoutAdjust?"sl_lightbulbon":"sl_lightbulboff","toggleAttribute",["layoutAdjust"]])),t},this.getHeatmapBoxMenu=function(){var t=[],e=!1;return t.push(["Color","at_col",e,e,e,"changeTextColorAttributeMenu",["-color-","heatmapCellBoxColor"]]),t.push(["Width","sp_thickness2",e,e,e,"changeTextColorAttributeMenu",["-text-","heatmapCellBoxWidth"]]),t.push([this.heatmapCellBox?"Hide Box":"Show Box",this.heatmapCellBox?"sl_eclose":"sl_eopen","toggleAttribute",["heatmapCellBox"]]),t},this.getHeatmapHighlightMenu=function(){return[["Color","at_col",!1,!1,!1,"changeTextColorAttributeMenu",["-color-","heatmapCellBoxColorHighlight"]]]},this.getHeatmapVarSmpSeparatorsMenu=function(t,e,i){var s=this.meta.data,a=[];if(s[t]&&e.length>0){for(var r={},n=0;n<e.length;n++){var o=e[n];"Numeric"!=s[t][o].type&&(r[o]=!0)}var h=this.sortObject(r);for(n=0;n<h.length;n++)a.push([h[n],h[n]==this[i]?"sl_radioon":"sl_radiooff","changeAttribute",[i,h[n]]])}return a},this.getHeatmapSeparatorsMenu=function(){var t=[],e=!1;return this.isStringOverlays("v")&&t.push(["Variables","ch_lv",e,e,e,"getHeatmapVarSmpSeparatorsMenu",["z",this.varOverlays,"heatmapVarSeparateBy"]]),this.isStringOverlays("s")&&t.push(["Samples","ch_ls",e,e,e,"getHeatmapVarSmpSeparatorsMenu",["x",this.smpOverlays,"heatmapSmpSeparateBy"]]),t},this.getHeatmapMenu=function(){var t=[],e=!1;return t.push(["Cell Boxes","dps_square",e,e,e,"getHeatmapBoxMenu",[]]),t.push(["Highlight","gc_ghcell",e,e,e,"getHeatmapHighlightMenu",[]]),this.isStringOverlays()&&t.push(["Separators","gc_ghspace",e,e,e,"getHeatmapSeparatorsMenu",[]]),this.isOncoprint&&(t.push(["Oncoprint <-> Heatmap","op_refresh","toggleAttribute",["oncoprintHeatmapSwitch"]]),t.push([this.oncoprintNoAlterations?"Hide No Alterations":"Show No Alterations",this.oncoprintNoAlterations?"sl_eclose":"sl_eopen","toggleAttribute",["oncoprintNoAlterations","modifyOncoprintNoAlterations"]])),t},this.getPlotAreaTicksMajorShowMenu=function(t){return[[this[t]?"Hide Major Ticks":"Show Major Ticks",this[t]?"sl_eclose":"sl_eopen","toggleAttribute",[t]]]},this.getPlotAreaTicksMinorShowMenu=function(t){return[[this[t]?"Hide Minor Ticks":"Show Minor Ticks",this[t]?"sl_eclose":"sl_eopen","toggleAttribute",[t]]]},this.getPlotAreaTickTypeMenu=function(t){var e=[];return e.push(["Solid","gr_stylesolid","changeAttribute",[t,"solid"]]),e.push(["Dotted","gr_styledotted","changeAttribute",[t,"dotted"]]),e.push(["Dashed","gr_styledashed","changeAttribute",[t,"dashed"]]),e},this.getPlotAreaGridMenu=function(t){var e=[],i=!1;return e.push(["Color","at_col",i,i,i,"changeTextColorAttributeMenu",["-color-",t+"AxisTickColor"]]),"Scatter3D"==this.graphType||this.is3DPlot||(e.push(["Major Ticks","gr_major",i,i,i,"getPlotAreaTicksMajorShowMenu",[t+"AxisTicksMajorShow"]]),e.push(["Minor Ticks","gr_minor",i,i,i,"getPlotAreaTicksMinorShowMenu",[t+"AxisTicksMinorShow"]]),e.push(["Number","ch_snumber",i,i,i,"changeTextColorAttributeMenu",["-text-",t+"AxisTicks"]])),e.push(["Style","gr_style",i,i,i,"getPlotAreaTickTypeMenu",[t+"AxisTickLineType"]]),e},this.getPlotAreaScatterGridMenu=function(){var t=[],e=!1;return"Scatter2D"==this.graphType||"ScatterBubble2D"==this.graphType?(t.push(["X-Axis","gr_g2x",e,e,e,"getPlotAreaGridMenu",["x"]]),t.push(["Y-Axis","gr_g2y",e,e,e,"getPlotAreaGridMenu",["y"]])):("Scatter3D"==this.graphType||this.is3DPlot)&&(t.push(["X-Axis","gr_g2x",e,e,e,"getPlotAreaGridMenu",["x"]]),t.push(["Y-Axis","gr_g2y",e,e,e,"getPlotAreaGridMenu",["y"]]),t.push(["Z-Axis","gr_g2z",e,e,e,"getPlotAreaGridMenu",["z"]])),t},this.getPlotAreaAxisAlgorithmMenu=function(){return this.changeAttributeMenu("axisAlgorithm",["Heckbert","R Pretty","Wilkinson","Wilkinson Extended"],["heckbert","rPretty","wilkinson","wilkinsonExtended"])},this.getPlotAreaBarsTypeMenu=function(){return this.changeAttributeMenu("errorBarsType",["Standard Deviation","Standard Error of Mean","95% Confidence Interval"],["standardDeviation","standardErrorMean","confidenceInterval95"])},this.getPlotAreaErrorBarsMenu=function(){var t=[],e=!1;return t.push(["Color","at_col",e,e,e,"changeTextColorAttributeMenu",["-color-","errorBarsColor"]]),t.push(["Thickness","sp_thickness",e,e,e,"changeTextColorAttributeMenu",["-text-","errorBarsThickness"]]),t.push(["Type","ch_lt",e,e,e,"getPlotAreaBarsTypeMenu",[]]),t.push([this.showErrorBars?"Hide Error Bars":"Show Error Bars",this.showErrorBars?"sl_eclose":"sl_eopen","toggleAttribute",["showErrorBars"]]),t},this.getPlotAreaOneVariableSpaceMenu=function(){var t=[];return t.push(["Farther","sp_farther","setFontAttributeSize",["variableSpaceFactor","increase"]]),t.push(["Closer","sp_closer","setFontAttributeSize",["variableSpaceFactor","decrease"]]),t},this.getPlotAreaOneSampleWidthMenu=function(){var t=[];return t.push(["Wider","sp_thicker","setFontAttributeSize",["widthFactor","increase"]]),t.push(["Thinner","sp_thinner","setFontAttributeSize",["widthFactor","decrease"]]),t},this.getBoxplotMedianMenu=function(){var t=[],e=!1;return t.push(["Median Color","at_col",e,e,e,"changeTextColorAttributeMenu",["-color-","boxplotMedianColor"]]),t.push(["Width","sp_thickness",e,e,e,"changeTextColorAttributeMenu",["-text-","boxplotMedianWidth"]]),t},this.getBoxplotMeanMenu=function(){var t=[],e=!1;return t.push(["Mean Color","at_col",e,e,e,"changeTextColorAttributeMenu",["-color-","boxplotMeanColor"]]),t.push(["Mean Border Color","at_col",e,e,e,"changeTextColorAttributeMenu",["-color-","boxplotMeanBorderColor"]]),t.push([this.boxplotMean?"Hide Mean":"Show Mean",this.boxplotMean?"sl_eclose":"sl_eopen","toggleAttribute",["boxplotMean"]]),t},this.getWhiskersMenu=function(){return this.changeAttributeMenu("boxplotWhiskersType",["None","Single","Double"],["none","single","double"],["bx_wishkersn","bx_wishkerss","bx_wishkersd"])},this.getBoxplotTypeMenu=function(){return this.changeAttributeMenu("boxplotType",["Box and Whiskers","Range"],["boxWhiskers","range"])},this.getBinAlignmentMenu=function(){return this.changeAttributeMenu("binAlignment",["Left","Center","Right"],["left","center","right"],["dp_binl","dp_binc","dp_binr"])},this.getDataPointsMenu=function(){var t=[];return t.push(["Jitter","dp_jittered","toggleAttribute",["jitter"]]),t.push(["Binned","dp_binned","toggleAttribute",["binned"]]),t.push(["Bin Aligment","dp_bin",!1,!1,!1,"getBinAlignmentMenu",[]]),"Boxplot"==this.graphType&&t.push([this.showBoxplotOriginalData?"Hide Data":"Show Data",this.showBoxplotOriginalData?"sl_eclose":"sl_eopen","toggleAttribute",["showBoxplotOriginalData"]]),t},this.getBoxplotAttributesMenu=function(){var t=[],e=!1;return t.push(["Notch","bx_notched","toggleAttribute",["boxplotNotched"]]),t.push(["Whiskers","bx_wishkers",e,e,e,"getWhiskersMenu"]),t.push(["Boxplot Mean","bx_mean",e,e,e,"getBoxplotMeanMenu",[]]),t.push(["Boxplot Median","bx_medianw",e,e,e,"getBoxplotMedianMenu",[]]),t},this.getViolinTrimMenu=function(){return this.changeAttributeMenu("violinTrim",["Trim","Not Trim"],[!0,!1])},this.getViolinScaleMenu=function(){return this.changeAttributeMenu("violinScale",["Area","Count","Width"],["area","count","width"])},this.getViolinAttributesMenu=function(){var t=[],e=!1;return t.push(["Trim","bx_violin",e,e,e,"getViolinTrimMenu",[]]),t.push(["Scale","wp_scale",e,e,e,"getViolinScaleMenu",[]]),t.push(["Adjust","ch_la",e,e,e,"changeTextColorAttributeMenu",["-text-",["bandwidthAdjust"]]]),t.push([this.showBoxplotIfViolin?"Hide Boxplot":"Show Boxplot",this.showBoxplotIfViolin?"sl_eclose":"sl_eopen","toggleAttribute",["showBoxplotIfViolin"]]),t.push(["Boxplot ratio","sp_thickness",e,e,e,"changeTextColorAttributeMenu",["-text-","boxplotWidthRatioIfViolin"]]),t.push([this.showViolinBoxplot?"Hide Violin":"Show Violin",this.showViolinBoxplot?"sl_eclose":"sl_eopen","toggleAttribute",["showViolinBoxplot"]]),t},this.getBoxplotMenu=function(){var t=[],e=!1;return t.push(["Type","bx_type",e,e,e,"getBoxplotTypeMenu",[]]),t.push(["Var Width","sp_thickness","toggleAttribute",["boxplotVarWidth"]]),t.push(["Data Points","bx_data",e,e,e,"getDataPointsMenu",[]]),t.push(["Attributes","bx_median",e,e,e,"getBoxplotAttributesMenu",[]]),t.push(["Violin Attributes","bx_violin",e,e,e,"getViolinAttributesMenu",[]]),t.push(["Connect Boxplot","bx_connect","toggleAttribute",["boxplotConnect"]]),t},this.getPlotAreaOneMenu=function(){var t=[],e=!1;return t.push(["Axis Algorithm","ga_axisx",e,e,e,"getPlotAreaAxisAlgorithmMenu",[]]),t.push(["Error Bars","gc_gerrors",e,e,e,"getPlotAreaErrorBarsMenu",[]]),t.push(["Border Color","at_col",e,e,e,"changeTextColorAttributeMenu",["-color-","plotBoxColor"]]),t.push([this.plotBox?"Hide Border":"Show Border",this.plotBox?"sl_eclose":"sl_eopen","toggleAttribute",["plotBox"]]),this.graphType.match(/Bar|Boxplot/)&&this.data.y.vars.length>1&&t.push(["Variable Space","sp_spacing",e,e,e,"getPlotAreaOneVariableSpaceMenu",[]]),t.push(["Sample Width","sp_thickness",e,e,e,"getPlotAreaOneSampleWidthMenu",[]]),t},this.getPlotAreaScatterMenu=function(){var t=[],e=!1;return t.push(["Axis Algorithm","Scatter3D"==this.graphType||this.is3DPlot?"ga_axisxyz":"ga_axisxy",e,e,e,"getPlotAreaAxisAlgorithmMenu",[]]),t.push(["Error Bars","gc_gerrors",e,e,e,"getPlotAreaErrorBarsMenu",[]]),t.push(["Border Color","at_col",e,e,e,"changeTextColorAttributeMenu",["-color-","plotBoxColor"]]),t.push([this.plotBox?"Hide Border":"Show Border",this.plotBox?"sl_eclose":"sl_eopen","toggleAttribute",["plotBox"]]),t},this.getAxesTitleXMenu=function(){return[["Text","ch_oa",!1,!1,!1,"changeTextColorAttributeMenu",["-text-","xAxisTitle"]]]},this.getAxesTitleX2Menu=function(){return[["Text","ch_oa",!1,!1,!1,"changeTextColorAttributeMenu",["-text-","xAxis2Title"]]]},this.getAxesTitleYMenu=function(){return[["Text","ch_oa",!1,!1,!1,"changeTextColorAttributeMenu",["-text-","yAxisTitle"]]]},this.getAxesTitleZMenu=function(){return[["Text","ch_oa",!1,!1,!1,"changeTextColorAttributeMenu",["-text-","zAxisTitle"]]]},this.getAxesTitleMenu=function(){var t=[],e=!1;return this.graphType.match(/scatter/i)||this.is3DPlot?"Scatter3D"==this.graphType||this.is3DPlot?(t.push(["X-Axis","p_g3axistitlex",e,e,e,"getAxesTitleXMenu",[]]),t.push(["Y-Axis","p_g3axistitley",e,e,e,"getAxesTitleYMenu",[]]),t.push(["Z-Axis","p_g3axistitlez",e,e,e,"getAxesTitleZMenu",[]])):(t.push(["X-Axis","p_g2axistitlex",e,e,e,"getAxesTitleXMenu",[]]),t.push(["Y-Axis","p_g2axistitley",e,e,e,"getAxesTitleYMenu",[]])):(t.push(["First Axis","p_g1axistitle1",e,e,e,"getAxesTitleXMenu",[]]),t.push(["Second Axis","p_g1axistitle2",e,e,e,"getAxesTitleX2Menu",[]])),t.push(["Color","at_col",e,e,e,"changeTextColorAttributeMenu",["-color-","axisTitleColor"]]),t.push(["Font","ch_oaa",e,e,e,"getFontStyleMenu",["axisTitle"]]),t},this.getTitleMenu=function(){var t=[],e=!1;return t.push(["Color","at_col",e,e,e,"changeTextColorAttributeMenu",["-color-","titleColor"]]),t.push(["Font","ch_oaa",e,e,e,"getFontStyleMenu",["title"]]),t.push(["Text","ch_oa",e,e,e,"changeTextColorAttributeMenu",["-text-","title"]]),t},this.getSubtitleMenu=function(){var t=[],e=!1;return t.push(["Color","at_col",e,e,e,"changeTextColorAttributeMenu",["-color-","subtitleColor"]]),t.push(["Font","ch_oaa",e,e,e,"getFontStyleMenu",["subtitle"]]),t.push(["Text","ch_oa",e,e,e,"changeTextColorAttributeMenu",["-text-","subtitle"]]),t},this.getTitleSubtitleMenu=function(){var t=[],e=!1;return this.graphType.match(/scatter/i)||this.is3DPlot?(t.push(["Title","p_g2title",e,e,e,"getTitleMenu",[]]),t.push(["Subtitle","p_g2subtitle",e,e,e,"getSubtitleMenu",[]])):(t.push(["Title","Heatmap"==this.graphType?"p_ghtitle":"p_g1title",e,e,e,"getTitleMenu",[]]),t.push(["Subtitle","Heatmap"==this.graphType?"p_ghsubtitle":"p_g1subtitle",e,e,e,"getSubtitleMenu",[]])),t},this.getLegendLocationMenu=function(){var t=[];return t.push(["Inside Plot","dps_toinside","changeAttribute",["legendInside",!0]]),t.push(["Outside Plot","dps_tooutside","changeAttribute",["legendInside",!1]]),t},this.getLegendPositionMenu=function(){var t=[];return this.legendInside?(t.push(["Top","ps_top","changeAttribute",["legendPosition","top"]]),t.push(["Top Right","ps_topright","changeAttribute",["legendPosition","topRight"]]),t.push(["Right","ps_right","changeAttribute",["legendPosition","right"]]),t.push(["Bottom Right","ps_bottomright","changeAttribute",["legendPosition","bottomRight"]]),t.push(["Bottom","ps_bottom","changeAttribute",["legendPosition","bottom"]]),t.push(["Bottom Left","ps_bottomleft","changeAttribute",["legendPosition","bottomLeft"]]),t.push(["Left","ps_left","changeAttribute",["legendPosition","left"]]),t.push(["Top Left","ps_topleft","changeAttribute",["legendPosition","topLeft"]])):(t.push(["Top","ps_top","changeAttribute",["legendPosition","top"]]),t.push(["Bottom","ps_bottom","changeAttribute",["legendPosition","bottom"]]),t.push(["Right","ps_right","changeAttribute",["legendPosition","right"]]),t.push(["Left","ps_left","changeAttribute",["legendPosition","left"]])),t},this.getLegendBorderMenu=function(){var t=[];return t.push(["Color","at_col",!1,!1,!1,"changeTextColorAttributeMenu",["-color-","legendBackgroundBorderColor"]]),t.push([this.showLegendBorder?"Hide Border":"Show Border",this.showLegendBorder?"sl_eclose":"sl_eopen","toggleAttribute",["showLegendBorder"]]),t},this.getLegendMenu=function(){var t=[],e=!1;return t.push(["Border","dps_square",e,e,e,"getLegendBorderMenu",[]]),t.push(["Background","b_bbody",e,e,e,"changeTextColorAttributeMenu",["-color-","legendBackgroundColor"]]),t.push(["Color","at_col",e,e,e,"changeTextColorAttributeMenu",["-color-","legendTextColor"]]),t.push(["Title Font","ch_oaa",e,e,e,"getFontStyleMenu",["legendTitle"]]),t.push(["Text Font","ch_oaa",e,e,e,"getFontStyleMenu",["legendText"]]),"Network"!=this.graphType&&(t.push(["Position",this.legendInside?"ps_toloc3":"ps_toloc2",e,e,e,"getLegendPositionMenu",[]]),t.push(["Location","ps_toloc",e,e,e,"getLegendLocationMenu",[]])),t.push(["Columns","ch_snumber",e,e,e,"changeTextColorAttributeMenu",["-text-","legendColumns"]]),"Network"!=this.graphType&&t.push(["Reset Positions","op_refresh","resetLegendPosition"]),t.push([this.showLegend?"Hide Legend":"Show Legend",this.showLegend?"sl_eclose":"sl_eopen","toggleAttribute",["showLegend"]]),t},this.getIndicatorPositionMenu=function(){var t=[];return t.push(["Right","ps_right","changeAttribute",["heatmapIndicatorPosition","right"]]),t.push(["Top Right","ps_topright","changeAttribute",["heatmapIndicatorPosition","topRight"]]),t.push(["Top","ps_top","changeAttribute",["heatmapIndicatorPosition","top"]]),t.push(["Top Left","ps_topleft","changeAttribute",["heatmapIndicatorPosition","topLeft"]]),t},this.getIndicatorMenu=function(){var t=[],e=!1;return t.push(["Position","ps_toloc2",e,e,e,"getIndicatorPositionMenu",[]]),t.push(["Height","sp_heightness",e,e,e,"changeTextColorAttributeMenu",["-text-","heatmapIndicatorHeight"]]),t.push(["Width","sp_thickness",e,e,e,"changeTextColorAttributeMenu",["-text-","heatmapIndicatorWidth"]]),t.push(["Histogram","i_hist","toggleAttribute",["heatmapIndicatorHistogram"]]),t.push([this.showHeatmapIndicator?"Hide Indicator":"Show Indicator",this.showHeatmapIndicator?"sl_eclose":"sl_eopen","toggleAttribute",["showHeatmapIndicator"]]),t},this.getDecorationsBorderMenu=function(){var t=[];return t.push(["Color","at_col",!1,!1,!1,"changeTextColorAttributeMenu",["-color-","decorationsBackgroundBorderColor"]]),t.push([this.showDecorationsBorder?"Hide Border":"Show Border",this.showDecorationsBorder?"sl_eclose":"sl_eopen","toggleAttribute",["showDecorationsBorder"]]),t},this.getDecorationsPositionMenu=function(){var t=[];return this.legendInside?(t.push(["Top","ps_top","changeAttribute",["decorationsPosition","top"]]),t.push(["Top Right","ps_topright","changeAttribute",["decorationsPosition","topRight"]]),t.push(["Right","ps_right","changeAttribute",["decorationsPosition","right"]]),t.push(["Bottom Right","ps_bottomright","changeAttribute",["decorationsPosition","bottomRight"]]),t.push(["Bottom","ps_bottom","changeAttribute",["decorationsPosition","bottom"]]),t.push(["Bottom Left","ps_bottomleft","changeAttribute",["decorationsPosition","bottomLeft"]]),t.push(["Left","ps_left","changeAttribute",["decorationsPosition","left"]]),t.push(["Top Left","ps_topleft","changeAttribute",["decorationsPosition","topLeft"]])):(t.push(["Bottom","ps_bottom","changeAttribute",["decorationsPosition","bottom"]]),t.push(["Right","ps_right","changeAttribute",["decorationsPosition","right"]])),t},this.getDecorationsDataMenu=function(){return[[this.showDecorations?"Hide Decorations":"Show Decorations",this.showDecorations?"sl_eclose":"sl_eopen","toggleAttribute",["showDecorations"]]]},this.getDecorationsLegendMenu=function(){return[[this.showDecorationsLegend?"Hide Decorations Legend":"Show Decorations Legend",this.showDecorationsLegend?"sl_eclose":"sl_eopen","toggleAttribute",["showDecorationsLegend"]]]},this.getDecorationsConfidenceLevelMenu=function(){for(var t=[],e=[.5,.75,.8,.85,.9,.95,.99],i=0;i<e.length;i++)t.push([e[i],this.confidenceLevel==e[i]?"sl_radioon":"sl_radiooff","changeAttribute",["confidenceLevel",e[i],!1,!!this.isKM&&"updateKaplanMeier"]]);return t},this.getDecorationsConfidenceTypeMenu=function(){for(var t=[],e=["ordinary","log","loglog"],i=0;i<e.length;i++)t.push([e[i],this.confidenceIntervalType==e[i]?"sl_radioon":"sl_radiooff","changeAttribute",["confidenceIntervalType",e[i],!1,!!this.isKM&&"updateKaplanMeier"]]);return t},this.getDecorationsConfidenceIntervalsMenu=function(){var t=!1,e=[];return(this.decorations.reg||this.isKM)&&e.push([this.showConfidenceIntervals?"Hide Confidence Intervals":"Show Confidence Intervals",this.showConfidenceIntervals?"sl_eclose":"sl_eopen","toggleAttribute",["showConfidenceIntervals",!!this.isKM&&"updateKaplanMeier"]]),this.isKM&&(e.push(["Confidence Level","cr_normal",t,t,t,"getDecorationsConfidenceLevelMenu",[]]),e.push(["Confidence Type","ch_ofx",t,t,t,"getDecorationsConfidenceTypeMenu",[]])),e},this.getKaplanMeierMenu=function(){var t=[];return t.push([this.isKM?"Remove Kaplan-Meier Plot":"Create Kaplan-Meier Plot",this.isKM?"sl_eclose":"sl_eopen","modifyKaplanMeier"]),t.push(["Invert Censor Value",this.invertCensored?"sl_lightbulbon":"sl_lightbulboff","toggleAttribute",["invertCensored","updateKaplanMeier"]]),this.isKM&&t.push(["Confidence Intervals","dt_kmconf",!1,!1,!1,"getDecorationsConfidenceIntervalsMenu",[]]),t},this.getDecorationsMenu=function(){var t=this.decorations,e=!1,i=[];return i.push(["Border","dps_square",e,e,e,"getDecorationsBorderMenu",[]]),i.push(["Background","b_bbody",e,e,e,"changeTextColorAttributeMenu",["-color-","decorationsBackgroundColor"]]),i.push(["Color","at_col",e,e,e,"changeTextColorAttributeMenu",["-color-","decorationsTextColor"]]),i.push(["Font","ch_oaa",e,e,e,"getFontStyleMenu",["decoration"]]),i.push(["Position",this.legendInside?"dps_toinside":"ps_toloc3",e,e,e,"getDecorationsPositionMenu",[]]),i.push(["Data and Legend","wp_datawrangling",e,e,e,"getDecorationsDataMenu",[]]),i.push(["Legend","lg_g2",e,e,e,"getDecorationsLegendMenu",[]]),t.reg&&i.push(["Confidence Intervals","dt_corconf",e,e,e,"getDecorationsConfidenceIntervalsMenu",[]]),i},this.getOverlaysMemebersMenu=function(t,e){for(var i=[],s={},a=0;a<this[e+"Overlays"].length;a++)s[this[e+"Overlays"][a]]=!0;var r=this.sortObject(this.data[t]);for(a=0;a<r.length;a++)i.push([r[a],s[r[a]]?"sl_checkboxon":"sl_checkboxoff","var"==e?"modifyVariableOverlays":"modifySampleOverlays",[r[a]]]);return i},this.getOverlaysLegendMenu=function(t,e){for(var i=[],s=this[e+"OverlayProperties"],a=this.sortObject(this.data[t]),r=0;r<a.length;r++)i.push([a[r],s[a[r]]&&s[a[r]].showLegend?"sl_eclose":"sl_eopen","modifyOverlaysProperties",[!1,e+"OverlayProperties",a[r],"showLegend"]]);return i},this.getOverlaysPositionMemberMenu=function(t,e){var i=[];return"var"==t?(i.push(["Bottom","ps_bottom","modifyOverlaysProperties",["bottom",t+"OverlayProperties",e,"position"]]),i.push(["Top","ps_top","modifyOverlaysProperties",["top",t+"OverlayProperties",e,"position"]])):"Heatmap"==this.graphType||"horizontal"==this.graphOrientation?(i.push(["Left","ps_left","modifyOverlaysProperties",["left",t+"OverlayProperties",e,"position"]]),i.push(["Right","ps_right","modifyOverlaysProperties",["right",t+"OverlayProperties",e,"position"]])):(i.push(["Bottom","ps_bottom","modifyOverlaysProperties",["bottom",t+"OverlayProperties",e,"position"]]),i.push(["Top","ps_top","modifyOverlaysProperties",["top",t+"OverlayProperties",e,"position"]])),i},this.getOverlaysPositionMenu=function(t,e){for(var i=[],s=this.sortObject(this.data[t]),a=0;a<s.length;a++)i.push([s[a],"op_config",!1,!1,!1,"getOverlaysPositionMemberMenu",[e,s[a]]]);return i},this.getOverlaysThicknessMenu=function(t,e){for(var i=[],s=this.sortObject(this.data[t]),a=0;a<s.length;a++)i.push([s[a],"op_config",!1,!1,!1,"changeTextColorAttributeMenu",["-text-",[!1,"modifyOverlaysProperties",[e+"OverlayProperties",s[a],"thickness"]]]]);return i},this.getOverlaysColorSchemesMenu=function(t,e){for(var i=[],s=this.meta.data[t],a=this.getColorSchemes(),r=0;r<a.length;r++)i.push([a[r],s[e].spectrum==a[r]?"sl_radioon":"sl_radiooff","modifyColorProperties",[a[r],e,t]]);return i},this.getOverlaysColorMenu=function(t,e){for(var i=[],s=!1,a=this.meta.data[t],r=this.sortObject(this.data[t]),n=0;n<r.length;n++)this.isNumeric(this.data[t][r[n]])?this[e+"OverlayProperties"][r[n]]&&this[e+"OverlayProperties"][r[n]].type&&"Heatmap"==this[e+"OverlayProperties"][r[n]].type?i.push([r[n],"op_config",s,s,s,"getColorSpectrumMenu",[a[r[n]].colorBrew.spectrum,"modifyColorProperties",r[n],t]]):i.push([r[n],"op_config",s,s,s,"changeTextColorAttributeMenu",["-color-",[s,"modifyOverlaysProperties",[e+"OverlayProperties",r[n],"color"]]]]):i.push([r[n],"op_config",s,s,s,"getOverlaysColorSchemesMenu",[t,r[n]]]);return i},this.getOverlaysGraphTypeMenu=function(t,e){for(var i=[],s=["Area","AreaLine","Bar","BarLine","Dotplot","DotLine","Heatmap","Line","Pie","Stacked","StackedLine","StackedPercent","StackedPercentLine","Treemap"],a=["g_area","g_arealine","g_bar","g_barline","g_dotplot","g_dotline","g_heatmap","g_line","g_pie","g_stacked","g_stackedline","g_stackedpercent","g_stackedpercentline","g_treemap"],r=0;r<s.length;r++)i.push([s[r],a[r],"modifyOverlaysProperties",[s[r],t+"OverlayProperties",e,"type"]]);return i},this.getOverlaysGraphDefaultMenu=function(t,e){var i=[];return i.push(["Default","g_heatmap","modifyOverlaysProperties",["Heatmap",t+"OverlayProperties",e,"type"]]),i.push(["Text","ch_lt","modifyOverlaysProperties",["Text",t+"OverlayProperties",e,"type"]]),i.push(["Treemap","g_treemap","modifyOverlaysProperties",["Treemap",t+"OverlayProperties",e,"type"]]),i},this.getOverlaysGraphMenu=function(t,e){for(var i=[],s=!1,a=(this.meta.data[t],this.sortObject(this.data[t])),r=0;r<a.length;r++)this.isNumeric(this.data[t][a[r]])?i.push([a[r],"op_config",s,s,s,"getOverlaysGraphTypeMenu",[e,a[r]]]):i.push([a[r],"op_config",s,s,s,"getOverlaysGraphDefaultMenu",[e,a[r]]]);return i},this.getOverlaysPropertiesMenu=function(t,e){var i=[],s=!1;return"var"==e?i.push(["Position","ar_v",s,s,s,"getOverlaysPositionMenu",[t,e]]):"Heatmap"==this.graphType||"vertical"==this.graphOrientation?i.push(["Position","ar_h",s,s,s,"getOverlaysPositionMenu",[t,e]]):i.push(["Position","ar_v",s,s,s,"getOverlaysPositionMenu",[t,e]]),i.push(["Thickness","sp_thickness",s,s,s,"getOverlaysThicknessMenu",[t,e]]),i.push(["Color","at_col",s,s,s,"getOverlaysColorMenu",[t,e]]),i.push(["Type","ly_doe",s,s,s,"getOverlaysGraphMenu",[t,e]]),i.push(["Legend","Heatmap"==this.graphType?"lg_h":"lg_g1",s,s,s,"getOverlaysLegendMenu",[t,e]]),i},this.getLegendOverlaysPositionMenu=function(){var t=[];return t.push(["Top Right","ps_topright","changeAttribute",["overlaysLegendPosition","topRight"]]),t.push(["Right","ps_right","changeAttribute",["overlaysLegendPosition","right"]]),t.push(["Bottom Left","ps_bottomleft","changeAttribute",["overlaysLegendPosition","bottomLeft"]]),t.push(["Bottom","ps_bottom","changeAttribute",["overlaysLegendPosition","bottom"]]),t},this.getLegendOverlaysMenu=function(t){var e="show"+t+"OverlaysLegend";return[[this[e]?"Hide Legend":"Show Legend",this[e]?"sl_eclose":"sl_eopen","toggleAttribute",[e]]]},this.getOverlaysMenu=function(){var t=[],e=!1;return"Heatmap"==this.graphType&&this.data.z&&(t.push(["Variable Overlays","o_ghvars",e,e,e,"getOverlaysMemebersMenu",["z","var"]]),t.push(["Variable Overlays Properties","o_ghvars",e,e,e,"getOverlaysPropertiesMenu",["z","var"]]),t.push(["Variable Overlays Legend","lg_h",e,e,e,"getLegendOverlaysMenu",["Var"]]),t.push(["-"])),this.data.x&&(t.push(["Sample Overlays","Heatmap"==this.graphType?"o_ghsmps":"o_g1",e,e,e,"getOverlaysMemebersMenu",["x","smp"]]),t.push(["Sample Overlays Properties","Heatmap"==this.graphType?"o_ghsmpsp":"o_g1p",e,e,e,"getOverlaysPropertiesMenu",["x","smp"]]),t.push(["Sample Overlays Legend","Heatmap"==this.graphType?"lg_h":"lg_g1",e,e,e,"getLegendOverlaysMenu",["Smp"]]),t.push(["-"])),t.push(["Overlays Legend Position","ps_toloc3",e,e,e,"getLegendOverlaysPositionMenu",[]]),t.push(["-"]),t.push(["Label Color","at_col",e,e,e,"changeTextColorAttributeMenu",["-color-","overlayColor"]]),t.push(["Label Font","ch_oaa",e,e,e,"getFontStyleMenu",["overlay"]]),t.push(["Default Thickness","sp_thickness",e,e,e,"changeTextColorAttributeMenu",["-text-","overlaysThickness"]]),(this.data.x||this.data.z)&&t.push([this.showOverlays?"Hide Overlays":"Show Overlays",this.showOverlays?"sl_eclose":"sl_eopen","toggleAttribute",["showOverlays"]]),t},this.getBinDataPercentileMenu=function(t){for(var e=[],i=0;i<this.data.y.vars.length;i++)t?e.push([this.data.y.vars[i],"sl_radiooff","binDataByPercentile",[i,!0]]):e.push([this.data.y.vars[i],"sl_radiooff","binDataByPercentile",[i]]);return e},this.getBinDataQuantileMenu=function(t){for(var e=[],i=0;i<this.data.y.vars.length;i++)t?e.push([this.data.y.vars[i],"sl_radiooff","binDataByQuantile",[i,!0]]):e.push([this.data.y.vars[i],"sl_radiooff","binDataByQuantile",[i]]);return e},this.getBinDataCustomBinMenu=function(t){for(var e=[],i=2;i<9;i++)e.push([i+" bins","sl_radiooff","binDataCustom",[t,i]]);return e},this.getBinDataCustomMenu=function(){for(var t=[],e=0;e<this.data.y.vars.length;e++){var i=this.data.y.vars[e].substring(0,1).toLowerCase();t.push([this.data.y.vars[e],"ch_l"+i,!1,!1,!1,"getBinDataCustomBinMenu",[e]])}return t},this.getBinDataMenu=function(){var t=[],e=!1;return t.push(["By Percentile Discrete","ch_spercent",e,e,e,"getBinDataPercentileMenu",[]]),t.push(["By Percentile Continuous","ch_spercent",e,e,e,"getBinDataPercentileMenu",[!0]]),t.push(["By Quantile Discrete","ch_oquantile",e,e,e,"getBinDataQuantileMenu",[]]),t.push(["By Quantile Continuous","ch_oquantile",e,e,e,"getBinDataQuantileMenu",[!0]]),t.push(["Custom","ch_lc",e,e,e,"getBinDataCustomMenu",[]]),t},this.getGroupSamplesMenu=function(){if(this.data.x){for(var t=[],e={},i=this.sortObject(this.data.x),s=0;s<this.groupingFactors.length;s++)e[this.groupingFactors[s]]=!0;for(s=0;s<i.length;s++)t.push([i[s],e[i[s]]?"sl_checkboxon":"sl_checkboxoff","modifySampleGroups",[i[s]]]);return t}return!1},this.getSmpLabelHighlightLevelMenu=function(){for(var t=[],e={},i=this.isGroupedData?this.data.w:this.data.y,s=0;s<this.highlightSmp.length;s++)e[this.highlightSmp[s]]=!0;for(s=0;s<i.smps.length;s++)t.push([i.smps[s],e[i.smps[s]]?"sl_checkboxon":"sl_checkboxoff","modifyObjectArray",[i.smps[s],!1,"highlightSmp",!0,!0]]);return t},this.getSmpLabelHighlightMenu=function(){var t=[],e=!1;return t.push(["Samples","ch_ls",e,e,e,"getSmpLabelHighlightLevelMenu",[]]),t.push(["Color","at_col",e,e,e,"changeTextColorAttributeMenu",["-color-","smpHighlightColor"]]),t},this.getSmpLabelMenu=function(){var t=[],e=!1;return t.push(["Color","at_col",e,e,e,"changeTextColorAttributeMenu",["-color-","smpLabelColor"]]),t.push(["Font","ch_oaa",e,e,e,"getFontStyleMenu",["smpLabel"]]),t.push(["Highlight","Heatmap"==this.graphType?"p_ghsamplelabels":"p_g1samplelabels",e,e,e,"getSmpLabelHighlightMenu",[]]),t.push(["Interval","ch_snumber",e,e,e,"changeTextColorAttributeMenu",["-text-","smpLabelInterval"]]),t.push(["Rotate","rt_c",e,e,e,"changeTextColorAttributeMenu",["-text-","smpLabelRotate"]]),t.push([this.showSampleNames?"Hide Labels":"Show Labels",this.showSampleNames?"sl_eclose":"sl_eopen","toggleAttribute",["showSampleNames"]]),t},this.getVarLabelHighlightLevelMenu=function(){for(var t=[],e={},i=this.data.y.vars,s=0;s<this.highlightVar.length;s++)e[this.highlightVar[s]]=!0;for(s=0;s<i.length;s++)t.push([i[s],e[i[s]]?"sl_checkboxon":"sl_checkboxoff","modifyObjectArray",[i[s],!1,"highlightVar",!0,!0]]);return t},this.getVarLabelHighlightMenu=function(){var t=[],e=!1;return t.push(["Variables","ch_lv",e,e,e,"getVarLabelHighlightLevelMenu",[]]),t.push(["Color","at_col",e,e,e,"changeTextColorAttributeMenu",["-color-","varHighlightColor"]]),t},this.getVarLabelMenu=function(t){var e=[],i=!1;return e.push(["Color","at_col",i,i,i,"changeTextColorAttributeMenu",["-color-","varLabelFontColor"]]),e.push(["Font","ch_oaa",i,i,i,"getFontStyleMenu",["varLabel"]]),e.push(["Highlight","p_ghvariablelabels",i,i,i,"getVarLabelHighlightMenu",[]]),e.push(["Interval","ch_snumber",i,i,i,"changeTextColorAttributeMenu",["-text-","varLabelInterval"]]),e.push(["Rotate","rt_c",i,i,i,"changeTextColorAttributeMenu",["-text-","varLabelRotate"]]),e.push([this.showVariableNames?"Hide Labels":"Show Labels",this.showVariableNames?"sl_eclose":"sl_eopen","toggleAttribute",["showVariableNames"]]),e},this.getGraphPartMenu=function(t){var e=[],i=!1;return e.push(["Color","at_col",i,i,i,"changeTextColorAttributeMenu",["-color-",t+"Color"]]),e.push(["Font","ch_oaa",i,i,i,"getFontStyleMenu",[t]]),e.push(["Text","ch_oa",i,i,i,"changeTextColorAttributeMenu",["-text-",t]]),e},this.getFontStyleMenu=function(t){var e=[],i="ScaleFontFactor";return e.push(["Bigger","sr_aai","setFontAttributeSize",[t+i,"increase"]]),e.push(["Smaller","sr_aad","setFontAttributeSize",[t+i,"decrease"]]),e.push(["Normal","ch_oa","setFontAttributeStyle",[t+"FontStyle","normal"]]),e.push(["Bold","ch_lb","setFontAttributeStyle",[t+"FontStyle","bold"]]),e.push(["Italic","ch_oitalic","setFontAttributeStyle",[t+"FontStyle","italic"]]),e},this.getDataPointAttributesPropertySampleMenu=function(t){for(var e=[],i=this.isGroupedData?this.data.w:this.data.y,s=0;s<i.smps.length;s++)e.push([i.smps[s],this[t]==i.smps[s]?"sl_radioon":"sl_radiooff","changeAttribute",[t,i.smps[s]]]);return e},this.getDataPointAttributesPropertyMenu=function(t){var e=[];if(this.isHistogram&&this.dataStndBy.z)for(var i=this.sortObject(this.dataStndBy.z),s=0;s<i.length;s++)e.push([i[s],i[s]==this[t]?"sl_radioon":"sl_radiooff","changeAttribute",[t,i[s]]]);else if("treemapBy"==t){var a={},r=this.sortObject(this.data.x);for(s=0;s<this.treemapBy.length;s++)a[this.treemapBy[s]]=!0;for(s=0;s<r.length;s++)e.push([r[s],a[r[s]]?"sl_checkboxon":"sl_checkboxoff","modifyTreemapGroups",[r[s]]])}else if(this.isDOE){var n=this.graphType.match(/scatter/i)||"Map"==this.graphType?this.sortObject(this.data.z):this.sortObject(this.data.x);for(s=0;s<n.length;s++)e.push([n[s],n[s]==this[t]?"sl_radioon":"sl_radiooff","changeAttribute",[t,n[s]]])}else{if("Line"!=this.graphType&&"ParallelCoordinates"!=this.graphType){for(n=this.graphType.match(/scatter/i)||"Map"==this.graphType?this.sortObject(this.data.z):this.sortObject(this.data.x),s=0;s<n.length;s++)e.push([n[s],n[s]==this[t]?"sl_radioon":"sl_radiooff","changeAttribute",[t,n[s]]]);e.push(["-"])}else if((this.data.z||this.data.x)&&"patternBy"!=t){for(n=this.data.z?this.sortObject(this.data.z):this.sortObject(this.data.x),s=0;s<n.length;s++)e.push([n[s],n[s]==this[t]?"sl_radioon":"sl_radiooff","changeAttribute",[t,n[s]]]);e.push(["-"])}s="variable";if("connectBy"!=t&&"ellipseBy"!=t&&"ridgeBy"!=t&&e.push(["Variable",s==this[t]?"sl_radioon":"sl_radiooff","changeAttribute",[t,s]]),(!this.graphType.match(/scatter/i)&&"Map"==!this.graphType||"Dotplot"==this.graphType)&&this.data.z){i=this.sortObject(this.data.z);"connectBy"==t&&"Dotplot"!=this.graphType||e.push(["-"]);for(s=0;s<i.length;s++)"connectBy"==t&&"Dotplot"!=this.graphType||e.push([i[s],i[s]==this[t]?"sl_radioon":"sl_radiooff","changeAttribute",[t,i[s]]])}"Line"!=this.graphType&&"ParallelCoordinates"!=this.graphType&&"Map"!=this.graphType||(e.push(["-"]),e.push(["Sample","ch_ls",!1,!1,!1,"getDataPointAttributesPropertySampleMenu",[t]]))}return e},this.getDataPointAttributesMenu=function(){var t=[],e=!1;return this.isKM&&this.data.z?t.push(["Color By","at_col",e,e,e,"getDataPointAttributesPropertyMenu",["colorBy"]]):this.isHistogram&&this.dataStndBy.z?(t.push(["Color By","at_col",e,e,e,"getDataPointAttributesPropertyMenu",["colorBy"]]),this.isValidQQ()||this.isValidCDF()||this.scatterPlotMatrix||t.push(["Ridge By","g_ridgeline",e,e,e,"getDataPointAttributesPropertyMenu",["ridgeBy"]])):("Heatmap"!=this.graphType&&t.push(["Color By","at_col",e,e,e,"getDataPointAttributesPropertyMenu",["colorBy"]]),(this.graphType.match(/scatter/i)||this.is3DPlot||"Dotplot"==this.graphType||"Tree"==this.graphType||"Boxplot"==this.graphType&&this.showBoxplotOriginalData)&&(t.push(["Shape By","at_shp",e,e,e,"getDataPointAttributesPropertyMenu",["shapeBy"]]),t.push(["Size By","at_sze",e,e,e,"getDataPointAttributesPropertyMenu",["sizeBy"]])),t.push(["Pattern By",this.graphType.match(/parallelcoordinates|line/i)?"ln_style":"at_pat",e,e,e,"getDataPointAttributesPropertyMenu",["patternBy"]]),(this.graphType.match(/scatter/i)||this.is3DPlot||"Dotplot"==this.graphType||"Boxplot"==this.graphType&&this.showBoxplotOriginalData)&&t.push(["Connect By","bx_connect",e,e,e,"getDataPointAttributesPropertyMenu",["connectBy"]]),this.graphType.match(/stacked/i)&&this.data.x&&this.isGroupedData&&t.push(["Treemap By","g_treemap",e,e,e,"getDataPointAttributesPropertyMenu",["treemapBy"]]),this.graphType.match(/scatter/i)&&("Scatter2D"!=this.graphType||this.isValidQQ()||this.isValidCDF()||t.push(["Ellipse By","at_ellipse",e,e,e,"getDataPointAttributesPropertyMenu",["ellipseBy"]]),"Scatter2D"!=this.graphType||this.isValidQQ()||this.isValidCDF()||this.scatterPlotMatrix||t.push(["Ridge By","g_ridgeline",e,e,e,"getDataPointAttributesPropertyMenu",["ridgeBy"]]))),t},this.getDendrogramColorMenu=function(t){var e=[];if(t)for(var i=this.sortObject(this.data.z),s=0;s<i.length;s++)e.push([i[s],this.colorVarDendrogramBy==i[s]?"sl_radioon":"sl_radiooff","changeAttribute",["colorVarDendrogramBy",i[s]]]);else{var a=this.sortObject(this.data.x);for(s=0;s<a.length;s++)e.push([a[s],this.colorSmpDendrogramBy==a[s]?"sl_radioon":"sl_radiooff","changeAttribute",["colorSmpDendrogramBy",a[s]]])}return e},this.getDendrogramsMenu=function(){var t=[],e=!1;return"Tree"==this.graphType?(t.push(["Radial Layout",this.treeCircular?"sl_checkboxon":"sl_checkboxoff","toggleAttribute",["treeCircular"]]),t.push(["Inverted Tree",this.treeInverted?"sl_checkboxon":"sl_checkboxoff","toggleAttribute",["treeInverted"]])):("Heatmap"==this.graphType&&(t.push(["Cluster Variable","cl_vertical","clusterVariables",[!0]]),t.push(["K-Means Variable","cl_verticalk","kmeansVariables",[!0]]),this.varDendrogram&&(t.push(["Color Variable Cluster By","at_col",e,e,e,"getDendrogramColorMenu",[!0]]),this.showVarDendrogram?t.push(["Hide Dendrogram","sl_eclose","showHideDendrogram",["showVarDendrogram"]]):t.push(["Show Dendrogram","sl_eopen","showHideDendrogram",["showVarDendrogram"]])),t.push(["-"])),t.push(["Cluster Samples","cl_horizontal","clusterSamples",[!0]]),t.push(["K-Means Samples","cl_horizontalk","kmeansSamples",[!0]]),this.smpDendrogram&&(t.push(["Color Sample Cluster By","at_col",e,e,e,"getDendrogramColorMenu",[]]),this.showSmpDendrogram?t.push(["Hide Dendrogram","sl_eclose","showHideDendrogram",["showSmpDendrogram"]]):t.push(["Show Dendrogram","sl_eopen","showHideDendrogram",["showSmpDendrogram"]]))),t},this.getGraphTypeMenu=function(){var t=[];return t.push(["Area","g_area","changeAttribute",["graphType","Area"]]),t.push(["Area Line","g_arealine","changeAttribute",["graphType","AreaLine"]]),t.push(["Bar","g_bar","changeAttribute",["graphType","Bar"]]),t.push(["Bar Line","g_barline","changeAttribute",["graphType","BarLine"]]),t.push(["Boxplot","g_boxplot","changeAttribute",["graphType","Boxplot"]]),t.push(["Circular","g_circular","changeAttribute",["graphType","Circular"]]),t.push(["Correlation","g_correlation","changeAttribute",["graphType","Correlation"]]),t.push(["Dot Line","g_dotline","changeAttribute",["graphType","DotLine"]]),t.push(["Dotplot","g_dotplot","changeAttribute",["graphType","Dotplot"]]),t.push(["Gantt Chart","g_gantt","changeAttribute",["graphType","g_gantt"]]),t.push(["Heatmap","g_heatmap","changeAttribute",["graphType","Heatmap"]]),t.push(["Line","g_line","changeAttribute",["graphType","Line"]]),t.push(["Map","g_map","changeAttribute",["graphType","Map"]]),t.push(["Pie Chart","g_pie","changeAttribute",["graphType","Pie"]]),this.data.y.smps.length>1&&t.push(["Scatter 2D","g_scatter2d","changeAttribute",["graphType","Scatter2D"]]),this.data.y.smps.length>2&&(t.push(["Scatter Bubble 2D","g_scatterbubble2d","changeAttribute",["graphType","ScatterBubble2D"]]),t.push(["Scatter 3D","g_scatter3d","changeAttribute",["graphType","Scatter3D"]])),t.push(["Stacked","g_stacked","changeAttribute",["graphType","Stacked"]]),t.push(["Stacked Line","g_stackedline","changeAttribute",["graphType","StackedLine"]]),t.push(["Stacked Percent","g_stackedpercent","changeAttribute",["graphType","StackedPercent"]]),t.push(["Stacked Percent Line","g_stackedpercentline","changeAttribute",["graphType","StackedPercentLine"]]),t.push(["Tag Cloud","g_tagcloud","changeAttribute",["graphType","TagCloud"]]),t.push(["Parallel Coordinates","g_parallelcoordinates","changeAttribute",["graphType","ParallelCoordinates"]]),t.push(["Sankey","g_sankey","changeAttribute",["graphType","Sankey"]]),t.push(["Tree","g_tree","changeAttribute",["graphType","Tree"]]),t.push(["Treemap","g_treemap","changeAttribute",["graphType","Treemap"]]),t},this.getGraphOrientationMenu=function(){var t=[];return t.push(["Horizontal","gc_gohorizontal","changeAttribute",["graphOrientation","horizontal"]]),t.push(["Vertical","gc_govertical","changeAttribute",["graphOrientation","vertical"]]),t},this.getMarginsMenu=function(){var t=[],e=!1;return t.push(["g_lobal","mr_all",e,e,e,"changeTextColorAttributeMenu",["-text-","margin"]]),t.push(["-"]),t.push(["Bottom","mr_bottom",e,e,e,"changeTextColorAttributeMenu",["-text-","marginBottom"]]),t.push(["Left","mr_left",e,e,e,"changeTextColorAttributeMenu",["-text-","marginLeft"]]),t.push(["Top","mr_top",e,e,e,"changeTextColorAttributeMenu",["-text-","marginTop"]]),t.push(["Right","mr_right",e,e,e,"changeTextColorAttributeMenu",["-text-","marginRight"]]),t},this.getShadesMenu=function(){var t=[];return t.push(["Objects","at_shd","toggleAttribute",["showShadow"]]),t.push(["Text","tx_shadow","toggleAttribute",["showTextShadow"]]),t.push(["Color","at_col",!1,!1,!1,"changeTextColorAttributeMenu",["-color-","shadowColor"]]),t},this.getCanvasBorderMenu=function(){var t=[];return t.push(["Color","at_col",!1,!1,!1,"changeTextColorAttributeMenu",["-color-","canvasBoxColor"]]),t.push([this.canvasBox?"Hide Border":"Show Border",this.canvasBox?"sl_eclose":"sl_eopen","toggleAttribute",["canvasBox"]]),t},this.getGradientsOrientationMenu=function(){var t=[];return t.push(["Horizontal","b_grhl","changeAttribute",["gradientOrientation","horizontal"]]),t.push(["Vertical","b_grvt","changeAttribute",["gradientOrientation","vertical"]]),t},this.getGradientsTypeMenu=function(){var t=[];return t.push(["Linear","b_grvt","changeAttribute",["gradientType","linear"]]),t.push(["Radial","b_grc","changeAttribute",["gradientType","radial"]]),t},this.getGradientsMenu=function(){var t=[],e=!1;return t.push(["Gradient","b_gsswitch","toggleAttribute",["gradient"]]),t.push(["Orientation","b_gsori",e,e,e,"getGradientsOrientationMenu",[]]),t.push(["Type","b_gstype",e,e,e,"getGradientsTypeMenu",[]]),t.push(["-"]),t},this.getBackgroundTypeMenu=function(){var t=[];return t.push(["Solid","b_bbody","changeAttribute",["backgroundType","solid","solid"]]),t.push(["Gradient","b_bgradient","changeAttribute",["backgroundType","gradient","gradient"]]),t.push(["Solid Window","b_bwindowsolid","changeAttribute",["backgroundType","window","window"]]),t.push(["Solid Window on Gradient","b_bbodygradient","changeAttribute",["backgroundType","windowGradient","windowGradient"]]),t.push(["Gradient Window on Solid","b_bwindowgradient","changeAttribute",["backgroundType","windowSolidGradient","windowSolidGradient"]]),t},this.getBackgroundMenu=function(){var t=[],e=!1;return t.push(["Type","b_btype",e,e,e,"getBackgroundTypeMenu",[]]),t.push(["-"]),t.push(["Background Color","b_bbody",e,e,e,"changeTextColorAttributeMenu",["-color-","background"]]),t.push(["Window Color","b_bwindowsolid",e,e,e,"changeTextColorAttributeMenu",["-color-","backgroundWindow"]]),t.push(["Gradient Start Color","b_grvt",e,e,e,"changeTextColorAttributeMenu",["-color-","backgroundGradient1Color"]]),t.push(["Gradient End Color","b_grvb",e,e,e,"changeTextColorAttributeMenu",["-color-","backgroundGradient2Color"]]),t},this.getFontsSizeStyleMenu=function(){var t=[];return t.push(["Bigger","sr_aai","setFontAttributeSize",["fontScaleFontFactor","increase"]]),t.push(["Smaller","sr_aad","setFontAttributeSize",["fontScaleFontFactor","decrease"]]),t.push(["Normal","ch_oa","setFontAttributeStyle",["fontStyle","normal"]]),t.push(["Bold","ch_lb","setFontAttributeStyle",["fontStyle","bold"]]),t.push(["Italic","ch_oitalic","setFontAttributeStyle",["fontStyle","italic"]]),t},this.getFontsMenu=function(){var t=[];for(var e in t.push(["Size and Style","ch_oaa",!1,!1,!1,"getFontsSizeStyleMenu",[]]),t.push(["-"]),CanvasXpress.fonts)t.push([e,this.fontName==e?"sl_radioon":"sl_radiooff","changeAttribute",["fontName",e,e]]);return t},this.getLayoutVarMenu=function(){for(var t=[],e={},i=0;i<this.segregateVariablesBy.length;i++)e[this.segregateVariablesBy[i]]=!0;if(this.data.z){var s=this.sortObject(this.data.z);for(i=0;i<s.length;i++)t.push([s[i],e[s[i]]?"sl_checkboxon":"sl_checkboxoff","modifyVariableSegregation",[s[i]]]);this.graphType.match(/Scatter/)||t.push(["-"])}return this.graphType.match(/Scatter/)||t.push(["variable",e.variable?"sl_checkboxon":"sl_checkboxoff","modifyVariableSegregation",["variable"]]),t},this.getLayoutSmpMenu=function(){for(var t=[],e={},i=0;i<this.segregateSamplesBy.length;i++)e[this.segregateSamplesBy[i]]=!0;if(this.data.x){var s=this.sortObject(this.data.x);for(i=0;i<s.length;i++)t.push([s[i],e[s[i]]?"sl_checkboxon":"sl_checkboxoff","modifySampleSegregation",[s[i]]]);this.graphType.match(/Scatter/)||t.push(["-"])}return this.graphType.match(/Scatter/)||t.push(["sample",e.sample?"sl_checkboxon":"sl_checkboxoff","modifySampleSegregation",["sample"]]),t},this.getLayoutMenu=function(){var t=[],e=!1;return t.push(["Segregate Samples By","ch_ls",e,e,e,"getLayoutSmpMenu",[]]),t.push(["Segregate Variables By","ch_lv",e,e,e,"getLayoutVarMenu",[]]),t},this.getSegregationMenu=function(){var t={},e=[];if(this.isHistogram&&this.dataStndBy.z){for(var i=this.sortObject(this.dataStndBy.z),s=this.meta.data.z,a=0;a<this.segregateVariablesBy.length;a++)t[this.segregateVariablesBy[a]]=!0;for(a=0;a<i.length;a++)"String"==s[i[a]].type&&e.push([i[a],t[i[a]]?"sl_checkboxon":"sl_checkboxoff","modifyVariableSegregation",[i[a]]]);this.ridgeBy||e.push(["sample",this.segregateSamplesBy.includes("sample")?"sl_checkboxon":"sl_checkboxoff","modifySampleSegregation",["sample"]])}else if(!this.isQQ&&!this.isCDF||this.ridgeBy){if(this.data.z&&!this.scatterPlotMatrix){for(i=this.sortObject(this.data.z),s=this.meta.data.z,a=0;a<this.segregateVariablesBy.length;a++)t[this.segregateVariablesBy[a]]=!0;for(a=0;a<i.length;a++)"String"==s[i[a]].type&&e.push([i[a],t[i[a]]?"sl_checkboxon":"sl_checkboxoff","modifyVariableSegregation",[i[a]]])}if(this.data.x&&!this.scatterPlotMatrix){var r=this.sortObject(this.data.x);for(s=this.meta.data.x,a=0;a<this.segregateSamplesBy.length;a++)t[this.segregateSamplesBy[a]]=!0;for(a=0;a<r.length;a++)s[r[a]]&&"String"==s[r[a]].type&&e.push([r[a],t[r[a]]?"sl_checkboxon":"sl_checkboxoff","modifySampleSegregation",[r[a]]])}this.graphType.match(/Scatter/)?this.ridgeBy||e.push(["sample",this.segregateSamplesBy.includes("sample")?"sl_checkboxon":"sl_checkboxoff","modifySampleSegregation",["sample"]]):(e.push(["variable",this.segregateVariablesBy.includes("variable")?"sl_checkboxon":"sl_checkboxoff","modifyVariableSegregation",["variable"]]),e.push(["sample",this.segregateSamplesBy.includes("sample")?"sl_checkboxon":"sl_checkboxoff","modifySampleSegregation",["sample"]]))}else e.push(["sample",this.segregateSamplesBy.includes("sample")?"sl_checkboxon":"sl_checkboxoff","modifySampleSegregation",["sample"]]);return!this.is3DPlot&&e.length>0&&e},this.getColorSpectrumMenu=function(t,e,i,s,a){for(var r=[],n=this.getObjectArray(t),o=this.getColorNames(),h=0;h<o.length;h++)if(n[o[h]]){for(var l=0,c=0;c<t.length;c++)if(o[h]==t[c]){l=c;break}i&&s?r.push([o[h]+" ("+(l+1)+")","sl_checkboxon",e,[o[h],i,s]]):r.push([o[h]+" ("+(l+1)+")","sl_checkboxon",e,[o[h]]])}else i&&s?r.push([o[h],"sl_checkboxoff",e,[o[h],i,s]]):r.push([o[h],"sl_checkboxoff",e,[o[h]]]);return r},this.getColorSpectrumSchemeMenu=function(t,e){for(var i=[],s=this.getColorSchemes(),a=0;a<s.length;a++)this.isContour&&"Contour"==e?i.push([s[a],this[t]==s[a]?"sl_radioon":"sl_radiooff","changeAttribute",["contourColorScheme",s[a]]]):"bin2d"==this.scatterType&&"Binplot"==e?i.push([s[a],this[t]==s[a]?"sl_radioon":"sl_radiooff","changeAttribute",["binplotColorScheme",s[a]]]):i.push([s[a],this[t]==s[a]?"sl_radioon":"sl_radiooff","changeAttribute",["colorSpectrum",[],!1,e,s[a]]]);return i},this.getColorSchemeMenu=function(t,e){for(var i=[],s=this.getColorSchemes(),a=0;a<s.length;a++)i.push([s[a],this[t]==s[a]?"sl_radioon":"sl_radiooff","changeAttribute",[t,s[a],!1,e]]);return i},this.getColorsSpectrumCompMenu=function(){var t=[],e=!1;return t.push(["Spectrum By Colors","at_col",e,e,e,"getColorSpectrumMenu",[this.colorSpectrum,"modifyColorSpectrum"]]),t.push(["Spectrum By Scheme","at_palette",e,e,e,"getColorSpectrumSchemeMenu",["colorScheme","modifyColorSpectrumByScheme"]]),t.push(["Spectrum Color Number","ch_snumber",e,e,e,"changeTextColorAttributeMenu",["-text-","colorSpectrumTarget"]]),t.push(["Zero-Center","ch_lz",e,e,e,"changeTextColorAttributeMenu",["-text-",[e,"modifyColorSpectrumZeroValue",[null]]]]),t},this.getColorBlindTypeMenu=function(){var t=[];return t.push(["No Blind Type",this.blindnessType?"sl_radiooff":"sl_radioon","changeAttribute",["blindnessType",!1]]),t.push(["Protanopia","protanopia"==this.blindnessType?"sl_radioon":"sl_radiooff","changeAttribute",["blindnessType","protanopia"]]),t.push(["Deuteranopia","deuteranopia"==this.blindnessType?"sl_radioon":"sl_radiooff","changeAttribute",["blindnessType","deuteranopia"]]),t.push(["Tritanopia","tritanopia"==this.blindnessType?"sl_radioon":"sl_radiooff","changeAttribute",["blindnessType","tritanopia"]]),t.push(["Monochromatic","monochromatic"==this.blindnessType?"sl_radioon":"sl_radiooff","changeAttribute",["blindnessType","monochromatic"]]),t},this.getColorsMenu=function(){var t=[],e=!1;return t.push(["Blind Type","sl_eopen",e,e,e,"getColorBlindTypeMenu",[]]),t.push(["Scheme","at_palette",e,e,e,"getColorSchemeMenu",["colorScheme","modifyColorScheme"]]),t.push(["Spectrum","at_sch",e,e,e,"getColorsSpectrumCompMenu",[]]),t},this.getResizeMenu=function(){var t=[],e=!1;return t.push(["Height","dps_height",e,e,e,"changeTextColorAttributeMenu",["-text-",["height","setHeight"]]]),t.push(["Width","dps_width",e,e,e,"changeTextColorAttributeMenu",["-text-",["width","setWidth"]]]),t},this.getThemeMenu=function(){var t=[];return t.push(["CanvasXpress","cx"==this.theme?"sl_radioon":"sl_radiooff","changeTheme",["cx"]]),t.push(["Economist","economist"==this.theme?"sl_radioon":"sl_radiooff","changeTheme",["economist"]]),t.push(["GGPlot","ggplot"==this.theme?"sl_radioon":"sl_radiooff","changeTheme",["ggplot"]]),t.push(["Gray-Inverse","igray"==this.theme?"sl_radioon":"sl_radiooff","changeTheme",["igray"]]),t.push(["Excel","excel"==this.theme?"sl_radioon":"sl_radiooff","changeTheme",["excel"]]),t.push(["Paul Tol","paulTol"==this.theme?"sl_radioon":"sl_radiooff","changeTheme",["paulTol"]]),t.push(["Black And White","blackAndWhite"==this.theme?"sl_radioon":"sl_radiooff","changeTheme",["blackAndWhite"]]),t.push(["Solarized","solarized"==this.theme?"sl_radioon":"sl_radiooff","changeTheme",["solarized"]]),t.push(["Stata","stata"==this.theme?"sl_radioon":"sl_radiooff","changeTheme",["stata"]]),t.push(["Tableau","tableau"==this.theme?"sl_radioon":"sl_radiooff","changeTheme",["tableau"]]),t.push(["Wall Street Journal","wallStreetJournal"==this.theme?"sl_radioon":"sl_radiooff","changeTheme",["wallStreetJournal"]]),t.push(["-"]),t.push(["Last Air Bender Fire","lastAirBenderFire"==this.theme?"sl_radioon":"sl_radiooff","changeTheme",["lastAirBenderFire"]]),t.push(["Last Air Bender Air","lastAirBenderAir"==this.theme?"sl_radioon":"sl_radiooff","changeTheme",["lastAirBenderAir"]]),t.push(["Last Air Bender Water","lastAirBenderWater"==this.theme?"sl_radioon":"sl_radiooff","changeTheme",["lastAirBenderWater"]]),t.push(["Last Air Bender Earth","lastAirBenderEarth"==this.theme?"sl_radioon":"sl_radiooff","changeTheme",["lastAirBenderEarth"]]),t.push(["-"]),t.push(["Game Of Thrones Targaryen","gameOfThronesTargaryen"==this.theme?"sl_radioon":"sl_radiooff","changeTheme",["gameOfThronesTargaryen"]]),t.push(["Game Of Thrones Stark","gameOfThronesStark"==this.theme?"sl_radioon":"sl_radiooff","changeTheme",["gameOfThronesStark"]]),t.push(["Game Of Thrones Stannis","gameOfThronesStannis"==this.theme?"sl_radioon":"sl_radiooff","changeTheme",["gameOfThronesStannis"]]),t.push(["Game Of Thrones Lannister","gameOfThronesLannister"==this.theme?"sl_radioon":"sl_radiooff","changeTheme",["gameOfThronesLannister"]]),t.push(["Game Of Thrones Tyrell","gameOfThronesTyrell"==this.theme?"sl_radioon":"sl_radiooff","changeTheme",["gameOfThronesTyrell"]]),t.push(["Game Of Thrones Martell","gameOfThronesMartell"==this.theme?"sl_radioon":"sl_radiooff","changeTheme",["gameOfThronesMartell"]]),t.push(["Game Of Thrones Tully","gameOfThronesTully"==this.theme?"sl_radioon":"sl_radiooff","changeTheme",["gameOfThronesTully"]]),t.push(["Game Of Thrones Greyjoy","gameOfThronesGreyjoy"==this.theme?"sl_radioon":"sl_radiooff","changeTheme",["gameOfThronesGreyjoy"]]),t.push(["Game Of Thrones Manderly","gameOfThronesManderly"==this.theme?"sl_radioon":"sl_radiooff","changeTheme",["gameOfThronesManderly"]]),t.push(["Game Of Thrones Arryn","gameOfThronesArryn"==this.theme?"sl_radioon":"sl_radiooff","changeTheme",["gameOfThronesArryn"]]),t.push(["-"]),t.push(["None","none"==this.theme?"sl_radioon":"sl_radiooff","changeTheme",["none"]]),t},this.getGeneralMenu=function(){var t=[],e=!1;return t.push(["Background","b_bbody",e,e,e,"getBackgroundMenu",[]]),t.push(["Border","dps_square",e,e,e,"getCanvasBorderMenu",[]]),t.push(["Color","at_col",e,e,e,"getColorsMenu",[]]),t.push(["Font","ch_oaa",e,e,e,"getFontsMenu",[]]),t.push(["Gradients","b_grvt",e,e,e,"getGradientsMenu",[]]),this.graphType.match(/Scatter/)||this.is3DPlot||t.push(["Graph Orientation","gc_goverticalhorizontal",e,e,e,"getGraphOrientationMenu",[]]),t.push(["Graph Type","ly_doe",e,e,e,"getGraphTypeMenu",[]]),this.is3DPlot||!this.data.x&&!this.data.z||t.push(["Layout","ly_segregate",e,e,e,"getLayoutMenu",[]]),t.push(["Margins","mr_all",e,e,e,"getMarginsMenu",[]]),t.push(["Shadows","at_shd",e,e,e,"getShadesMenu",[]]),t.push(["Size","dps_resize",e,e,e,"getResizeMenu",[]]),t.push(["Theme","at_sch",e,e,e,"getThemeMenu",[]]),t.push(["Transparency","at_trn",e,e,e,"changeTextColorAttributeMenu",["-text-","transparency"]]),t},this.getSwitchSmpToAnnotationMenu=function(){for(var t=[],e=0;e<this.data.y.smps.length;e++)t.push([this.data.y.smps[e],"sl_radiooff","switchSmpToAnnotation",[this.data.y.smps[e]]]);return t},this.getSwitchAnnotationToSmpMenu=function(){for(var t=[],e=this.sortObject(this.data.z),i=0;i<e.length;i++)this.meta.data.z[e[i]]&&t.push([e[i],"sl_radiooff","switchAnnotationToSmp",[e[i]]]);return t},this.getSwitchSmpAnnotationToIdMenu=function(){for(var t=[],e=this.sortObject(this.data.x),i=0;i<e.length;i++)this.meta.data.x[e[i]].unique&&t.push([e[i],"sl_radiooff","switchSmpAnnotationToId",[e[i]]]);return t},this.getSwitchVarToAnnotationMenu=function(){for(var t=[],e=0;e<this.data.y.vars.length;e++)t.push([this.data.y.vars[e],"sl_radiooff","switchVarToAnnotation",[this.data.y.vars[e]]]);return t},this.getSwitchAnnotationToVarMenu=function(){for(var t=[],e=this.sortObject(this.data.x),i=0;i<e.length;i++)this.meta.data.x[e[i]]&&t.push([e[i],"sl_radiooff","switchAnnotationToVar",[e[i]]]);return t},this.getSwitchVarAnnotationToIdMenu=function(){for(var t=[],e=this.sortObject(this.data.z),i=0;i<e.length;i++)this.meta.data.z[e[i]].unique&&t.push([e[i],"sl_radiooff","switchVarAnnotationToId",[e[i]]]);return t},this.getSwitchSamplesMenu=function(){var t=[],e=!1;return t.push(["Sample to Annotation","sw_down",e,e,e,"getSwitchSmpToAnnotationMenu",[]]),this.data.z&&t.push(["Annotation to Sample","sw_up",e,e,e,"getSwitchAnnotationToSmpMenu",[]]),this.data.x&&this.isUniqueFactor("s")&&t.push(["Annotation to Id","sw_updown",e,e,e,"getSwitchSmpAnnotationToIdMenu",[]]),t.push(["Create New Sample Id","op_more","switchSmpIdToAnnotation",[]]),t},this.getSwitchVariablesMenu=function(){var t=[],e=!1;return t.push(["Variable to Annotation","sw_down",e,e,e,"getSwitchVarToAnnotationMenu",[]]),this.data.x&&t.push(["Annotation to Variable","sw_up",e,e,e,"getSwitchAnnotationToVarMenu",[]]),this.data.z&&this.isUniqueFactor("v")&&t.push(["Annotation to Id","sw_updown",e,e,e,"getSwitchVarAnnotationToIdMenu",[]]),t.push(["Create New Variable Id","op_more","switchVarIdToAnnotation",[]]),t},this.getSwitchMenu=function(){var t=[],e=!1;return t.push(["Samples","ch_ls",e,e,e,"getSwitchSamplesMenu",[]]),t.push(["Variables","ch_lv",e,e,e,"getSwitchVariablesMenu",[]]),t},this.getConvertNumericToStringMenu=function(t,e){for(var i=[],s=this.sortObject(this.data[t]),a=0;a<s.length;a++)this.meta.data[t][s[a]]&&"Numeric"==this.meta.data[t][s[a]].type&&i.push([s[a],"sl_radiooff","switchNumericToString",[s[a],e]]);return i},this.getConvertStringToNumericMenu=function(t,e){for(var i=[],s=this.sortObject(this.data[t]),a=0;a<s.length;a++)this.meta.data[t][s[a]]&&"Numeric"!=this.meta.data[t][s[a]].type&&i.push([s[a],"sl_radiooff","switchStringToNumeric",[s[a],e]]);return i},this.getConvertVarSmpMenu=function(t,e){var i=[],s=!1;return this.isNumericFactor(e)&&i.push(["Numeric to String","tx_tostring",s,s,s,"getConvertNumericToStringMenu",[t,"s"==e]]),this.isStringFactor(e)&&i.push(["String to Numeric","tx_tonumeric",s,s,s,"getConvertStringToNumericMenu",[t,"s"==e]]),i},this.getConvertMenu=function(){var t=[],e=!1;return this.data.x&&t.push(["Samples","ch_ls",e,e,e,"getConvertVarSmpMenu",["x","s"]]),this.data.z&&t.push(["Variables","ch_lv",e,e,e,"getConvertVarSmpMenu",["z","v"]]),t},this.getTransformPercentMenu=function(){var t=[];return t.push(["By Sample","ch_ls","transform",["percentile","samples"]]),t.push(["By Variable","ch_lv","transform",["percentile","variables"]]),t},this.getTransformZScoreMenu=function(){var t=[];return t.push(["By Sample","ch_ls","transform",["zscore","samples"]]),t.push(["By Variable","ch_lv","transform",["zscore","variables"]]),t},this.getTransformRatioMenu=function(){var t=[],e=!1;return t.push(["To Sample","ch_ls",e,e,e,"getTransformRatioSmpMenu",[]]),this.data.x&&this.isGroupedData&&(t.push(["To Group","ch_lg",e,e,e,"getTransformRatioGrpMenu",[]]),this.ratioGroupReference&&this.data.x.hasOwnProperty(this.ratioGroupReference)&&t.push(["To Level","ch_ll",e,e,e,"getTransformRatioLevMenu",[]])),t},this.getTransformRatioLevMenu=function(){for(var t=[],e=this.sortObject(this.getObjectArray(this.data.x[this.ratioGroupReference])),i=0;i<e.length;i++)null!=e[i]&&t.push([e[i],this.ratioLevelReference==e[i]?"sl_radioon":"sl_radiooff","modifyTransformRatio",["level",e[i]]]);return t},this.getTransformRatioGrpMenu=function(){for(var t=[],e=this.sortObject(this.data.x),i=0;i<e.length;i++)t.push([e[i],this.ratioGroupReference==e[i]?"sl_radioon":"sl_radiooff","modifyTransformRatio",["group",e[i]]]);return t},this.getTransformRatioSmpMenu=function(){for(var t=[],e=0;e<this.data.y.smps.length;e++){var i=this.data.y.smps[e];t.push([i,this.ratioSampleReference==i?"sl_radioon":"sl_radiooff","modifyTransformRatio",["sample",i]])}return t},this.getTransformMenu=function(){var t=[];if(this.isDOE)t.push(["Log Base 2","ch_olog2","changeAttribute",["transformType","log2"]]),t.push(["Log Base 10","ch_olog10","changeAttribute",["transformType","log10"]]),t.push(["Exp Base 2","ch_oe2","changeAttribute",["transformType","exp2"]]),t.push(["Exp Base 10","ch_oe10","changeAttribute",["transformType","exp10"]]),t.push(["Reset","op_refresh","changeAttribute",["transformType","reset"]]);else{var e=!1;t.push(["Log Base 2","ch_olog2","transform",["log2"]]),t.push(["Log Base 10","ch_olog10","transform",["log10"]]),t.push(["Exp Base 2","ch_oe2","transform",["exp2"]]),t.push(["Exp Base 10","ch_oe10","transform",["exp10"]]),t.push(["Ceil data","ch_oceil",e,e,e,"changeTextColorAttributeMenu",["-text-",[e,"modifyTransform",["tceil"]]]]),t.push(["Floor data","ch_ofloor",e,e,e,"changeTextColorAttributeMenu",["-text-",[e,"modifyTransform",["tfloor"]]]]),t.push(["Percentile","ch_spercent",e,e,e,"getTransformPercentMenu",[]]),t.push(["Z-Score","ch_lz",e,e,e,"getTransformZScoreMenu",[]]),t.push(["Ratio","ch_lr",e,e,e,"getTransformRatioMenu",[]]),t.push(["-"]),t.push(["Reset","op_refresh","transform",["reset"]]),t.push(["-"]),t.push(["Overwrite data","sv_disk","transform",["save"]])}return t},this.getAxisTransformMenu=function(t){var e=[];return t=t.toLowerCase(),e.push(["Log Base 2","ch_olog2","changeAttribute",[t+"AxisTransform","log2"]]),e.push(["Log Base 10","ch_olog10","changeAttribute",[t+"AxisTransform","log10"]]),e.push(["Exp Base 2","ch_oe2","changeAttribute",[t+"AxisTransform","exp2"]]),e.push(["Exp Base 10","ch_oe10","changeAttribute",[t+"AxisTransform","exp10"]]),e.push(["Percentile","ch_spercent","changeAttribute",[t+"AxisTransform","exp10"]]),e.push(["-"]),e.push(["Reset","op_refresh","changeAttribute",[t+"AxisTransform",!1]]),e},this.getSortSmpIntensityMenu=function(){var t=[],e={};if(this.sortingSamples)for(var i=0;i<this.sortingSamples.length;i++)e[this.sortingSamples[i]]=!0;for(i=0;i<this.data.y.smps.length;i++)t.push([this.data.y.smps[i],e[this.data.y.smps[i]]?"sl_checkboxon":"sl_checkboxoff","modifySort",["smp","var",this.data.y.smps[i]]]);return t},this.getSortVarIntensityMenu=function(){var t=[],e={};if(this.sortingVariables)for(var i=0;i<this.sortingVariables.length;i++)e[this.sortingVariables[i]]=!0;for(i=0;i<this.data.y.vars.length;i++)t.push([this.data.y.vars[i],e[this.data.y.vars[i]]?"sl_checkboxon":"sl_checkboxoff","modifySort",["var","smp",this.data.y.vars[i]]]);return t},this.getSortSmpCatMenu=function(){var t=[],e={},i=this.sortObject(this.data.x);if(this.sortingSampleCategories)for(var s=0;s<this.sortingSampleCategories.length;s++)e[this.sortingSampleCategories[s]]=!0;for(s=0;s<i.length;s++)t.push([i[s],e[i[s]]?"sl_checkboxon":"sl_checkboxoff","modifySort",["cat","smp",i[s]]]);return t},this.getSortVarCatMenu=function(){var t=[],e={},i=this.sortObject(this.data.z);if(this.sortingVariableCategories)for(var s=0;s<this.sortingVariableCategories.length;s++)e[this.sortingVariableCategories[s]]=!0;for(s=0;s<i.length;s++)t.push([i[s],e[i[s]]?"sl_checkboxon":"sl_checkboxoff","modifySort",["cat","var",i[s]]]);return t},this.getSortSmpMenu=function(){var t=[],e=!1;return t.push(["By Variable Intensity","ch_lv",e,e,e,"getSortVarIntensityMenu",[]]),this.data.x&&t.push(["By Sample Category","ch_lx",e,e,e,"getSortSmpCatMenu",[]]),t.push(["By Name","ch_ls","modifySort",[!1,"smp","samples"]]),t},this.getSortVarMenu=function(){var t=[],e=!1;return t.push(["By Sample Intensity","ch_ls",e,e,e,"getSortSmpIntensityMenu",[]]),this.data.z&&t.push(["By Variable Category","ch_lz",e,e,e,"getSortVarCatMenu",[]]),t.push(["By Name","ch_lv","modifySort",[!1,"var","variables"]]),t},this.getSortChangeMenu=function(){var t=[];return t.push(["Samples","ch_ls","changeAttribute",["sortDir",this.sortDir,!0,"modifySort",[this.isGroupedData?"grpIndex":"smpIndex"]]]),t.push(["Variables","ch_lv","changeAttribute",["sortDir",this.sortDir,!0,"modifySort",["varIndex"]]]),t},this.getSortMenu=function(){var t=[];if(this.isDOE)t.push(["Sort string","sr_az","changeAttribute",["sortType","String"]]),t.push(["Sort numeric","sr_19","changeAttribute",["sortType","Numeric"]]);else{var e=!1;t.push(["Change Sort","sr_azi",e,e,e,"getSortChangeMenu",[]]),t.push(["Case Sensitive",this.sortCaseSensitive?"sl_checkboxon":"sl_checkboxoff","toggleAttribute",["sortCaseSensitive","modifySort",["both"]]]),t.push(["-"]),t.push(["Sort Samples","ch_ls",e,e,e,"getSortSmpMenu",[]]),t.push(["Sort Variables","ch_lv",e,e,e,"getSortVarMenu",[]])}return t},this.getSliderMenu=function(){var t=[];for(var e in this.binConfigurations)t.push([e,!1,!1,!1,!1,[["-slider-","changeBin",[e]]]]);return t},this.getPivotMenu=function(){var t=[];if(this.isPivotable()){var e=this.data.x?this.sortObject(this.data.x):[];if(3==this.data.y.vars.length){var i=this.data.y.vars;t.push([i[0]+" as Variables; "+i[1]+" as Samples","sl_radiooff","pivotYY",[i[0],i[1]]]),t.push([i[0]+" as Variables; "+i[2]+" as Samples","sl_radiooff","pivotYY",[i[0],i[2]]]),t.push([i[1]+" as Variables; "+i[0]+" as Samples","sl_radiooff","pivotYY",[i[1],i[0]]]),t.push([i[1]+" as Variables; "+i[2]+" as Samples","sl_radiooff","pivotYY",[i[1],i[2]]]),t.push([i[2]+" as Variables; "+i[0]+" as Samples","sl_radiooff","pivotYY",[i[2],i[0]]]),t.push([i[2]+" as Variables; "+i[1]+" as Samples","sl_radiooff","pivotYY",[i[2],i[1]]])}else if(2==this.data.y.vars.length){i=this.data.y.vars;t.push([e[0]+" as Variables; "+i[0]+" as Samples","sl_radiooff","pivotXY",[e[0],i[0]]]),t.push([e[0]+" as Variables; "+i[1]+" as Samples","sl_radiooff","pivotXY",[e[0],i[1]]]),t.push([i[0]+" as Variables; "+e[0]+" as Samples","sl_radiooff","pivotXY",[i[0],e[0]]]),t.push([i[1]+" as Variables; "+e[0]+" as Samples","sl_radiooff","pivotXY",[i[1],e[0]]])}else 2==e.length&&(t.push([e[0]+" as Variables; "+e[1]+" as Samples","sl_radiooff","pivotXX",[e[0],e[1]]]),t.push([e[1]+" as Variables; "+e[0]+" as Samples","sl_radiooff","pivotXX",[e[1],e[0]]]));for(var s=0;s<e.length;s++)"String"==this.meta.data.x[e[s]].type&&t.push(["Pivot on "+e[s],"sl_radiooff","pivotX",[e[s]]])}return t},this.getRdatasetsMenu=function(){var t=[];if(this.Rdatasets){var e=this.sortObject(this.Rdatasets);e=e.sort((function(t,e){return t.toLowerCase()>e.toLowerCase()}));for(var i=0;i<e.length;i++)t.push([e[i],"sl_radiooff","getRLibraryDataSets",[e[i]]])}return t},this.getRangeMenu=function(){var t=[],e=!1;return t.push(["Set Min","dtp_min",e,e,e,"changeTextColorAttributeMenu",["-text-","setMinX"]]),t.push(["Set Max","dtp_max",e,e,e,"changeTextColorAttributeMenu",["-text-","setMaxX"]]),t.push(["Exact Range","dtp_exact","toggleAttribute",["xAxisExact"]]),t},this.getSummaryTypeMenu=function(){var t=[],e=["mean","median","min","max","sum","count"];t.push(["Raw",this.summaryType&&"raw"!=this.summaryType?"sl_radiooff":"sl_radioon","modifySummaryType",["raw"]]);for(var i=0;i<e.length;i++)t.push([this.capitalize(e[i]),this.summaryType==e[i]?"sl_radioon":"sl_radiooff","modifySummaryType",[e[i]]]);return t},this.getDataMenu=function(){var t=this.graphType.match(/Area|Gantt/)||"Circular"==this.graphType&&"sunburst"==this.circularType,e=[],i=!1;return!this.isBinConfigurations()||t||this.isDOE||e.push(["Configure Bins","ch_lb",i,i,i,"getSliderMenu",[]]),!this.data.x&&!this.data.z||this.isDOE||e.push(["Convert Annotations","tx_stringnumeric",i,i,i,"getConvertMenu",[]]),"Heatmap"!=this.graphType||this.isDOE||e.push(["Range","dtp_range",i,i,i,"getRangeMenu",[]]),t||this.isDOE||e.push(["Summary Type","ch_ssum",i,i,i,"getSummaryTypeMenu",[]]),this.isDOE||e.push(["Switch Data","sw_updown",i,i,i,"getSwitchMenu",[]]),this.graphType.match(/Scatter/i)||e.push(["Sort","sr_azi",i,i,i,"getSortMenu",[]]),t||e.push(["Transform","ch_ofx",i,i,i,"getTransformMenu",[]]),this.layoutValid||this.showIdeogram||e.push(["Transpose","dtt_transpose","transpose"]),!this.isPivotable()||this.isPivot||t||this.isDOE?!this.isPivot||t||this.isDOE||e.push(["Remove Pivot","dtt_pivotremove","removePivot"]):e.push(["Pivot","dtt_pivot",i,i,i,"getPivotMenu",[]]),this.layoutValid||t||this.isDOE||this.graphType.match(/Circular/)||e.push(["Bin Data","dt_hist",i,i,i,"getBinDataMenu",[]]),e},this.getLoessFamilyMenu=function(){return[["Gaussian","gaussian"==this.loessFamily?"sl_radioon":"sl_radiooff","changeAttribute",["loessFamily","gaussian"]],["Symmetric","symmetric"==this.loessFamily?"sl_radioon":"sl_radiooff","changeAttribute",["loessFamily","symmetric"]]]},this.getLoessStatisticsMenu=function(){return[["Approximate","approximate"==this.loessStatistics?"sl_radioon":"sl_radiooff","changeAttribute",["loessStatistics","approximate"]],["Exact","exact"==this.loessStatistics?"sl_radioon":"sl_radiooff","changeAttribute",["loessStatistics","exact"]]]},this.getLoessSurfaceMenu=function(){return[["Interpolate","interpolate"==this.loessSurface?"sl_radioon":"sl_radiooff","changeAttribute",["loessSurface","interpolate"]],["Direct","direct"==this.loessSurface?"sl_radioon":"sl_radiooff","changeAttribute",["loessSurface","direct"]]]},this.getLoessMenu=function(){var t=[],e=!1;return t.push([this.showConfidenceIntervals?"Hide Confidence":"Show Confidence",this.showConfidenceIntervals?"sl_eclose":"sl_eopen","toggleAttribute",["showConfidenceIntervals"]]),t.push(["Statistics","ch_of",e,e,e,"getLoessStatisticsMenu",[]]),t.push(["Surface","ch_ls",e,e,e,"getLoessSurfaceMenu",[]]),t.push(["Family","cr_normal",e,e,e,"getLoessFamilyMenu",[]]),t.push(["Span","ar_v",e,e,e,"changeTextColorAttributeMenu",["-text-","loessSpan"]]),t.push(["Normalize",this.loessNormalize?"sl_checkboxon":"sl_checkboxoff","toggleAttribute",["loessNormalize"]]),t.push(["Degree","ch_ld",e,e,e,"changeTextColorAttributeMenu",["-text-","loessDegree"]]),t.push(["Iterations","ch_li",e,e,e,"changeTextColorAttributeMenu",["-text-","loessIterations"]]),t.push(["Cell","ch_lc",e,e,e,"changeTextColorAttributeMenu",["-text-","loessCell"]]),t.push([this.showLoessFit?"Hide Loess Fit":"Show Loess Fit",this.showLoessFit?"sl_eclose":"sl_eopen","toggleAttribute",["showLoessFit"]]),t},this.getQuantileRegressionMenu=function(){var t=[];return t.push([this.showQuantileRegressionFit?"Hide Quantile Regression Fit":"Show Quantile Regression Fit",this.showQuantileRegressionFit?"sl_eclose":"sl_eopen","toggleAttribute",["showQuantileRegressionFit"]]),t},this.getHistogramDensityMenu=function(){for(var t=["gaussian","rectangular","triangular","epanechnikov","quartic","biweight","cosine","optcosine"],e=[],i=0;i<t.length;i++)e.push([t[i],t[i]==this.densityKernel?"sl_radioon":"sl_radiooff","changeAttribute",["densityKernel",t[i],!1,"modifyHistogram"]]);return e},this.getHistogramMedianLineStyleMenu=function(){var t=[];return t.push(["Solid","ln_stylesolid","changeAttribute",["histogramMedianLineStyle","solid","modifyHistogram"]]),t.push(["Dotted","ln_styledotted","changeAttribute",["histogramMedianLineStyle","dotted","modifyHistogram"]]),t.push(["Dashed","ln_styledashed","changeAttribute",["histogramMedianLineStyle","dashed","modifyHistogram"]]),t},this.getHistogramTypeMenu=function(){return[["Dodged","dodged"==this.histogramType?"sl_radioon":"sl_radiooff","changeAttribute",["histogramType","dodged",!1,"modifyHistogram"]],["Staggered","staggered"==this.histogramType?"sl_radioon":"sl_radiooff","changeAttribute",["histogramType","staggered",!1,"modifyHistogram"]],["Stacked","stacked"==this.histogramType?"sl_radioon":"sl_radiooff","changeAttribute",["histogramType","stacked",!1,"modifyHistogram"]]]},this.getHistogramStatMenu=function(){return[["Count","count"==this.histogramStat?"sl_radioon":"sl_radiooff","changeAttribute",["histogramStat","count",!1,"modifyHistogram"]],["Density","density"==this.histogramStat?"sl_radioon":"sl_radiooff","changeAttribute",["histogramStat","density",!1,"modifyHistogram"]]]},this.getHistogramDensityPositionMenu=function(){return[["Normal","normal"==this.densityPosition?"sl_radioon":"sl_radiooff","changeAttribute",["densityPosition","normal",!1,"modifyHistogram"]],["Stacked","stacked"==this.densityPosition?"sl_radioon":"sl_radiooff","changeAttribute",["densityPosition","stacked",!1,"modifyHistogram"]],["Filled","filled"==this.densityPosition?"sl_radioon":"sl_radiooff","changeAttribute",["densityPosition","filled",!1,"modifyHistogram"]]]},this.getHistogramMenu=function(){var t=[],e=!1;return t.push(["Bin Number","ch_snumber",e,e,e,"changeTextColorAttributeMenu",["-text-",["histogramBins","modifyHistogram"]]]),t.push(["Bin Width","sp_thickness",e,e,e,"changeTextColorAttributeMenu",["-text-",["histogramBinWidth","modifyHistogram"]]]),t.push(["Density Kernel","dt_denfit",e,e,e,"getHistogramDensityMenu",[]]),t.push(["Density Position","ch_lp",e,e,e,"getHistogramDensityPositionMenu",[]]),t.push(["Remove Histogram","dt_histremove","removeHistogram"]),t.push([this.hideHistogram?"Show Histogram Bars":"Hide Histogram Bars",this.hideHistogram?"sl_eopen":"sl_eclose","toggleAttribute",["hideHistogram","modifyHistogram"]]),t.push([this.showHistogramPath?"Hide Histogram Path":"Show Histogram Path",this.showHistogram?"sl_eclose":"sl_eopen","toggleAttribute",["showHistogramPath","modifyHistogram"]]),t.push([this.histogramRight?"Right":"Left",this.histogramRight?"ps_right":"ps_left","toggleAttribute",["histogramRight","modifyHistogram"]]),t.push([this.histogramLowest?"Include Lowest":"Exclude Lowest",this.histogramLowest?"sl_radioon":"sl_radiooff","toggleAttribute",["histogramLowest","modifyHistogram"]]),t.push(["Histogram Type","dt_histstag",e,e,e,"getHistogramTypeMenu",[]]),t.push(["Histogram Stat","ch_of",e,e,e,"getHistogramStatMenu",[]]),t.push([this.showHistogramDensity?"Hide Density":"Show Density",this.showHistogramDensity?"sl_eclose":"sl_eopen","toggleAttribute",["showHistogramDensity","modifyHistogram"]]),t.push([this.showFilledHistogramDensity?"Hide Filled Density":"Show Filled Density",this.showFilledHistogramDensity?"sl_eclose":"sl_eopen","toggleAttribute",["showFilledHistogramDensity","modifyHistogram"]]),t.push(["Fill Transparency","at_trn",e,e,e,"changeTextColorAttributeMenu",["-text-",["histogramDensityFillTransparency","modifyHistogram"]]]),t.push([this.showHistogramMedian?"Hide Median":"Show Median",this.showHistogramMedian?"sl_eclose":"sl_eopen","toggleAttribute",["showHistogramMedian"]]),t.push(["Median Line Style","ln_style",e,e,e,"getHistogramMedianLineStyleMenu",[]]),t},this.getHistogramCreateMenu=function(){var t=[];if(this.data.z){for(var e=this.sortObject(this.data.z),i=0;i<e.length;i++)t.push([e[i],"sl_radiooff","createHistogram",[e[i]]]);t.push(["Single","sl_radiooff","createHistogram",[]])}else t.push(["Show Histogram","sl_radiooff","createHistogram",[]]);return t},this.getCorrelateMenu=function(){var t=[];if(this.data.z){for(var e=this.sortObject(this.data.z),i=0;i<e.length;i++)t.push([e[i],"sl_radiooff","addRegressionLine",[e[i]]]);t.push(["Single","sl_radiooff","correlateData",[]])}else t.push(["Show Correlation","sl_radiooff","correlateData",[]]);return t},this.getContourTypeMenu=function(){return[["Normal","normal"==this.contourType?"sl_radioon":"sl_radiooff","changeAttribute",["contourType","normal"]],["Raster","raster"==this.contourType?"sl_radioon":"sl_radiooff","changeAttribute",["contourType","raster"]],["Point","point"==this.contourType?"sl_radioon":"sl_radiooff","changeAttribute",["contourType","point"]]]},this.getContourStatMenu=function(){return[["Count","count"==this.contourStat?"sl_radioon":"sl_radiooff","changeAttribute",["contourStat","count"]],["Ndensity","ndensity"==this.contourStat?"sl_radioon":"sl_radiooff","changeAttribute",["contourStat","ndensity"]],["Density","density"==this.contourStat?"sl_radioon":"sl_radiooff","changeAttribute",["contourStat","density"]]]},this.getContourMenu=function(){var t=[],e=!1;return t.push([this.showContourLevel?"Hide Contour Levels":"Show Contour Levels",this.showContourLevel?"sl_eclose":"sl_eopen","toggleAttribute",["showContourLevel"]]),t.push(["Contour Stat","ch_of",e,e,e,"getContourStatMenu",[]]),"Heatmap"!=this.graphType&&(t.push(["Number of Levels","ch_snumber",e,e,e,"changeTextColorAttributeMenu",["-text-","contourLevelNumber"]]),t.push(["Bin Width","dt_denfit",e,e,e,"changeTextColorAttributeMenu",["-text-","contourLevelWidth"]]),t.push(["Contour Filled",this.contourFilled?"sl_eclose":"sl_eopen","toggleAttribute",["contourFilled"]])),t.push(["Fill Transparency","at_trn",e,e,e,"changeTextColorAttributeMenu",["-text-",["contourFilledTransparency"]]]),t.push(["Show Contour Bands",this.showContourBands?"sl_eclose":"sl_eopen","toggleAttribute",["showContourBands"]]),t.push(["Bands Color","at_col",e,e,e,"changeTextColorAttributeMenu",["-color-","contourBandsColor"]]),"Heatmap"!=this.graphType&&(t.push(["Show Data Points",this.showContourDataPoints?"sl_eclose":"sl_eopen","toggleAttribute",["showContourDataPoints"]]),t.push(["Data Points Color","at_col",e,e,e,"changeTextColorAttributeMenu",["-color-","contourDataPointsColor"]]),t.push(["Contour Type","ch_lt",e,e,e,"getContourTypeMenu",[]])),t.push(["Contour Color Scheme","at_palette",e,e,e,"getColorSpectrumSchemeMenu",["contourColorScheme","Contour"]]),t.push(["Remove Contour","dt_contourremove","removeContour"]),t},this.getContourCreateMenu=function(){var t=[];if(this.data.z&&"Heatmap"!=this.graphType){for(var e=this.sortObject(this.data.z),i=0;i<e.length;i++)t.push([e[i],"sl_radiooff","modifyContour",[e[i]]]);t.push(["Single","sl_radiooff","modifyContour",[]])}else t.push(["Show Contour","sl_radiooff","modifyContour",[]]);return t},this.getDOEMenu=function(){for(var t=[],e=this.initialGraphType.match(/Scatter|Map/)?this.getKeys(this.dataStndBy.z):this.getKeys(this.dataStndBy.x),i=this.initialGraphType.match(/Scatter|Map/)?this.data.y.smps:this.data.y.vars,s=this.getObjectArray(this.includeDOE),a=0;a<e.length;a++)t.push([e[a],s[e[a]]?"sl_checkboxon":"sl_checkboxoff","modifyDOE",[e[a]]]);if(this.extendedDOE){var r=Math.min(i.length,this.maxSubMenus);for(a=0;a<r;a++)t.push([i[a],s[i[a]]?"sl_checkboxon":"sl_checkboxoff","modifyDOE",[i[a]]])}return t},this.getDOEConfigurationMenu=function(){var t=[],e=this.layoutCurrent,i=this.layoutConfig[e]&&this.layoutConfig[e].graphType?this.layoutConfig[e].graphType:this.data.l.type[e],s=!1;return e?(t.push(["Graph Type","ly_doe",s,s,s,"getDOEGraphTypeMenu",[]]),t.push(["Graph Size","ar_minmax",s,s,s,"getDOEGraphSizeMenu",[]]),"Scatter"==i&&t.push(["Axes","p_g2axes",s,s,s,"getDOEAxesMenu",[]])):t.push(["Graph Size","ar_minmax",s,s,s,"getDOEGraphSizeMenu",[]]),t},this.getDOEGraphTypeMenu=function(){var t=this.layoutCurrent,e=[];return this.data.l.type[t].match(/Pie|Treemap/)?(e.push(["Pie Chart","g_pie","updateDOEGraphType",["Pie"]]),e.push(["Treemap","g_treemap","updateDOEGraphType",["Treemap"]]),e.push(["Table","tb_table","updateDOEGraphType",["Table"]])):(e.push(["Bar","g_bar","updateDOEGraphType",["Bar"]]),e.push(["Dotplot","g_dotplot","updateDOEGraphType",["Dotplot"]]),e.push(["Line","g_line","updateDOEGraphType",["Line"]]),e.push(["Scatter 2D","g_scatter2d","updateDOEGraphType",["Scatter"]]),e.push(["Histogram","g_histogram","updateDOEGraphType",["Scatter2D"]]),e.push(["Table","tb_table","updateDOEGraphType",["Table"]])),e},this.getDOEGraphSizeMenu=function(){for(var t=[],e=this.layoutCurrent,i=this.layoutConfig[e]&&this.layoutConfig[e].size?this.layoutConfig[e].size:"1X1",s=this.layout.split("X"),a=0;a<s[0];a++)for(var r=0;r<s[1];r++){var n=a+1+"X"+(r+1);t.push([n,i==n?"sl_radioon":"sl_radiooff","updateDOEGraphSize",[n]])}return t},this.getDOETopologyMenu=function(){for(var t=[],e=2;e<5;e++)for(var i=2;i<5;i++){var s=e+"X"+i;t.push([s,this.layoutTopology==s?"sl_radioon":"sl_radiooff","modifyDOE",["layout",s]])}return t},this.getDOEAxesMenu=function(){var t=[],e=!1;return t.push(["X-Axis","p_g2axisx",e,e,e,"getDOEAxisMenu",["x"]]),t.push(["Y-Axis","p_g2axisy",e,e,e,"getDOEAxisMenu",["y"]]),t},this.getDOEAxisMenu=function(t){return[["Series","ch_ls",!1,!1,!1,"getDOEAxisSeriesMenu",[t]]]},this.getDOEAxisSeriesMenu=function(t){for(var e=[],i=this.sortObject(this.data.x),s=this.layoutCurrent,a=this.dataStndBy.x,r=this.layoutConfig[s]&&this.layoutConfig[s].xAxis?this.layoutConfig[s].xAxis:this.data.l.smps[s][0],n=this.layoutConfig[s]&&this.layoutConfig[s].yAxis?this.layoutConfig[s].yAxis:this.data.l.smps[s][0],o="x"==t?a.hasOwnProperty(r)?r:this.data.y.vars[r]:a.hasOwnProperty(n)?n:this.data.y.vars[n],h=0;h<i.length;h++)"Numeric"==this.meta.data.x[i[h]].type&&e.push([i[h],i[h]==o?"sl_radioon":"sl_radiooff","updateDOEAxis",[t,i[h]]]);e.length&&e.push(["-"]);for(h=0;h<this.data.y.vars.length;h++)e.push([this.data.y.vars[h],this.data.y.vars[h]==o?"sl_radioon":"sl_radiooff","updateDOEAxis",[t,h]]);return e},this.getCorrelationCatMenu=function(t,e){for(var i=[],s=this.sortObject(this.data[t]),a=0;a<s.length;a++)this.isNumeric(this.data[t][s[a]])&&i.push([s[a],"sl_radiooff","correlateData",[e,s[a]]]);return i},this.getCorrelationMenu=function(){var t=[],e=!1;return this.data.y.vars.length>=3&&t.push(["Samples","ch_ls","correlateData"]),this.data.y.smps.length>=3&&this.data.x&&this.isNumericFactor("s")&&t.push(["Sample Annotation","ch_ls",e,e,e,"getCorrelationCatMenu",["x",!0]]),this.data.y.smps.length>=3&&t.push(["Variables","ch_lv","correlateData",[!0]]),this.data.y.vars.length>=3&&this.data.z&&this.isNumericFactor("v")&&t.push(["Variable Annotation","ch_lv",e,e,e,"getCorrelationCatMenu",["z",e]]),t},this.getMagnificationMenu=function(){for(var t=[],e=1;e<=10;e++)t.push([96*e+" DPI",this.printMagnification==e?"sl_radioon":"sl_radiooff","changeAttributeNoDraw",["printMagnification",e]]);return t},this.getParametersMenu=function(){var t=[];return t.push(["Load Parameters","cd_upload",!0,[]]),t.push(["Save as JSON","sv_diskjson","save",[!1,"cX-"+this.target+"-param",!0]]),t},this.getReproducibleResearchMenu=function(){var t=[];return t.push(["Reproducible Research code","c_rrcode","clickRepResearch",[]]),t.push(["Show JSON code","cd_json","clickShowCode",[]]),t.push(["Show R code","c_rcode","clickShowRCode",[]]),t.push(["Show Python code","c_python","clickShowPythonCode",[]]),t.push(["Show Jupyter code","c_jupyter","clickShowPythonCode",[!1,!1,!0]]),t.push(["Show Meta data","cd_params","clickShowMetaCode",[]]),this.motionBy||(t.push(["Reproduce","op_redo","reproduce",[!1],CanvasXpress.system.control+" + "+CanvasXpress.system.alt+" + R"]),t.push(["Replay","sv_video","reproduce",[!1,!0],CanvasXpress.system.shift+" + "+CanvasXpress.system.control+" + R"]),t.push(["Print Sequence","sv_pictures","reproduce",[!1,!1,!0],CanvasXpress.system.shift+" + "+CanvasXpress.system.control+" + P"])),t.push(["-"]),t},this.getFileMenu=function(){var t=[],e=!1;return t.push(["Save as PNG","sv_image","print",[],CanvasXpress.system.control+" + P"]),this.graphType.match(/Venn|TagCloud|Map/)||t.push(["Save as SVG","sv_svg","saveSVG",[]]),t.push(["Save as JSON","sv_diskjson","save",[],CanvasXpress.system.control+" + S"]),this.editable&&(t.push(["Edit in JS Fiddle","c_jsfiddle","editJSFiddle",[]]),t.push(["Edit in CodePen","c_codepen","editCodePen",[]])),t.push(["Print Magnification","z_zoom",e,e,e,"getMagnificationMenu",[]]),t.push(["-"]),t.push(["Reproducible Research","c_rr",e,e,e,"getReproducibleResearchMenu",[]]),this.remoteService&&"webService"==this.remoteServiceType&&(t.push(["Save customizations to server","sv_disk","saveRemote",["afterRender"]]),t.push(["Clear parameters from server","sv_diskremove","clearRemote",[]])),t.push(["-"]),t.push(["Load","cd_upload",!0,[]]),this.Rdatasets&&t.push(["R Datasets","c_r",e,e,e,"getRdatasetsMenu",[]]),t.push(["-"]),t.push(["Parameters","wp_configuration",e,e,e,"getParametersMenu",[]]),t.push(["-"]),t.push(["Reset","op_refresh","masterReset",[],"ESC"]),t.push(["Hard Reset","op_redo","replot",[!1,!1,!0],CanvasXpress.system.shift+" ESC"]),t},this.getExploreMenu=function(){var t=this.getObjectArray(CanvasXpress.graphTypes.OneDGraphs),e=[];if(this.disableDataFilters||e.push(["Filters","fp_funnel","clickDataFilters",[]]),this.disableDataTable||e.push(["Table","tb_table","clickDataTable",[]]),this.disableCustomizer||"Network"==this.graphType||"Genome"==this.graphType||e.push(["Configure","wp_installation","clickCustomizer",[]]),!this.isCorrelate&&!this.isDOE)if(!t[this.graphType]||this.is3DPlot||this.graphType.match(/Treemap|Gantt/)||this.isContour||this.segregateSamplesBy.length+this.segregateVariablesBy.length!=0)if("Scatter2D"==this.graphType){var i=this.decorations&&this.decorations.nlfit;!this.data.z&&!this.extendedDOE||this.scatterPlotMatrix||i||this.isValidQQ()||this.isValidCDF()?this.isHistogram&&(this.dataStndBy.z||this.extendedDOE)&&(e.push(["-"]),e.push(["Explore Meta-Data","ly_doe","createDOE"])):(e.push(["-"]),e.push(["Explore Meta-Data","ly_doe","createDOE"]))}else this.graphType.match(/Map|Sankey|Tree/)&&!this.graphType.match(/Treemap|Gantt/)&&(this.data.z||this.extendedDOE)&&(e.push(["-"]),e.push(["Explore Meta-Data","ly_doe","createDOE"]));else(this.data.x||this.extendedDOE)&&(e.push(["-"]),e.push(["Explore Meta-Data","ly_doe","createDOE"]));return e},this.getConfigurationMenu=function(){var t=this.decorations,e=!1,i=[];if("Map"==this.graphType||"Tree"==this.graphType)i.push(["Citation","p_g1citation",e,e,e,"getGraphPartMenu",["citation"]]),i.push(["Legend","lg_legend",e,e,e,"getLegendMenu",[]]),i.push(["Title / Subtitle","Heatmap"==this.graphType?"p_ghtitlesubtitle":"p_g1titlesubtitle",e,e,e,"getTitleSubtitleMenu",[]]);else if({Bar:!0,Line:!0,Area:!0,AreaLine:!0,BarLine:!0,Boxplot:!0,Dotplot:!0,DotLine:!0,Gantt:!0,Heatmap:!0,Treemap:!0,TagCloud:!0,ParallelCoordinates:!0,Sankey:!0,Stacked:!0,StackedLine:!0,StackedPercent:!0,StackedPercentLine:!0}[this.graphType]&&!this.is3DPlot)"Heatmap"!=this.graphType&&(i.push(["Axes","p_g1axes",e,e,e,"getAxesMenu",[]]),i.push(["Axes Titles","p_g1axestitles",e,e,e,"getAxesTitleMenu",[]])),i.push(["Citation","Heatmap"==this.graphType?"p_ghcitation":"p_g1citation",e,e,e,"getGraphPartMenu",["citation"]]),i.push(["General","Heatmap"==this.graphType?"gc_ggh":"gc_gg1",e,e,e,"getGeneralMenu",[]]),"Heatmap"!=this.graphType&&(i.push(["Grid","gr_g1",e,e,e,"getPlotAreaGridMenu",["x"]]),this.graphType.match(/Dot/)?i.push(["Dotplot","g_dotplot",e,e,e,"getDataPointsMenu",[]]):"Boxplot"==this.graphType&&i.push(["Boxplot","g_boxplot",e,e,e,"getBoxplotMenu",[]]),i.push(["Plot Area","gc_gg1",e,e,e,"getPlotAreaOneMenu",[]]),t&&i.push(["Decorations",t.marker?"gd_g1marker":"gd_g1line",e,e,e,"getDecorationsMenu",[]]),i.push(["Legend","lg_g1",e,e,e,"getLegendMenu",[]]),this.data.x&&i.push(["Overlays","o_g1",e,e,e,"getOverlaysMenu",[]])),"Heatmap"==this.graphType&&(i.push(["Indicator","i_h",e,e,e,"getIndicatorMenu",[]]),i.push(["Heatmap","g_heatmap",e,e,e,"getHeatmapMenu",[]]),(this.data.x||this.data.z)&&i.push(["Overlays","o_ghsmps",e,e,e,"getOverlaysMenu",[]])),i.push(["Sample Labels","Heatmap"==this.graphType?"p_ghsamplelabels":"p_g1samplelabels",e,e,e,"getSmpLabelMenu",[]]),i.push(["Samples Title","Heatmap"==this.graphType?"p_ghsampletitle":"p_g1sampletitle",e,e,e,"getGraphPartMenu",["smpTitle"]]),"Heatmap"==this.graphType&&(i.push(["Variable Labels","p_ghvariablelabels",e,e,e,"getVarLabelMenu",[]]),i.push(["Variables Title","p_ghvariabletitle",e,e,e,"getGraphPartMenu",["varTitle"]])),i.push(["Title / Subtitle","Heatmap"==this.graphType?"p_ghtitlesubtitle":"p_g1titlesubtitle",e,e,e,"getTitleSubtitleMenu",[]]);else if(this.graphType.match(/scatter/i)||this.is3DPlot){if("Scatter3D"==this.graphType||this.is3DPlot?(i.push(["Axes","p_g3axes",e,e,e,"getAxesMenu",[]]),i.push(["Axes Titles","p_g3axestitles",e,e,e,"getAxesTitleMenu",[]]),i.push(["Citation","p_g3citation",e,e,e,"getGraphPartMenu",["citation"]]),i.push(["General","gc_gg3",e,e,e,"getGeneralMenu",[]])):(i.push(["Axes","p_g2axes",e,e,e,"getAxesMenu",[]]),i.push(["Axes Titles","p_g2axestitles",e,e,e,"getAxesTitleMenu",[]]),i.push(["Citation","p_g2citation",e,e,e,"getGraphPartMenu",["citation"]]),i.push(["General","gc_gg2",e,e,e,"getGeneralMenu",[]])),i.push(["Grid","gr_g2xy",e,e,e,"getPlotAreaScatterGridMenu",[]]),i.push(["Plot Area","gc_gg2",e,e,e,"getPlotAreaScatterMenu",[]]),t){var s=t.nlfit?"dt_cdf":t.line?"gd_g2line":t.reg?"dt_cor":t.nor?"dt_denfit":t.area?"dt_denfitfilled":t.qq?"dt_qq":t.cdf?"dt_cdf":this.isKM?"dt_km":t.marker?"gd_g2marker":"gd_g2line";i.push(["Decorations",s,e,e,e,"getDecorationsMenu",[]])}i.push(["Legend","lg_g2",e,e,e,"getLegendMenu",[]]),i.push(["Title / Subtitle","p_g2titlesubtitle",e,e,e,"getTitleSubtitleMenu",[]]),this.isSelectDataPoints&&(i.push(["Show hidden data points","sl_eopen","showHideSelectedData",[e,45],"Ctrl + Insert"]),i.push(["Hide data points","sl_eremove","showHideSelectedData",[e,46],"Ctrl + Delete"]))}return i},this.getAlignNetworkMenu=function(){var t=[];return t.push(["Top","a_aligntop","alignDistributeSelectedNodes",[!1,84]]),t.push(["Right","a_alignright","alignDistributeSelectedNodes",[!1,82]]),t.push(["Bottom","a_alignbottom","alignDistributeSelectedNodes",[!1,66]]),t.push(["Left","a_alignleft","alignDistributeSelectedNodes",[!1,76]]),t},this.getDistributeNetworkMenu=function(){var t=[];return t.push(["Vertically","a_distributever","alignDistributeSelectedNodes",[!1,86]]),t.push(["Horozontally","a_distributehor","alignDistributeSelectedNodes",[!1,72]]),t},this.getRotateNetworkMenu=function(){var t=[];return t.push(["Clockwise","rt_c","arrowMove",[34]]),t.push(["Clockwise - Animate","rt_c2","arrowMove",[39,!0]]),t.push(["Anticlockwise","rt_ac","arrowMove",[33]]),t.push(["Anticlockwise - Animate","rt_ac2","arrowMove",[37,!0]]),t},this.getOrderNetworkMenu=function(){var t=[];return t.push(["Send to back","a_moveback","orderNodes",["sendNodeToBack"]]),t.push(["Send backward","a_movebackward","orderNodes",["sendNodeBackward"]]),t.push(["Bring to front","a_movefront","orderNodes",["bringNodeToFront"]]),t.push(["Bring forward","a_moveforward","orderNodes",["bringNodeForward"]]),t},this.getNetworkDecorationsPositionMenu=function(){var t=[];return t.push(["Center","ps_center","changeAttribute",["decorationsPosition","center"]]),t.push(["Top","ps_top","changeAttribute",["decorationsPosition","top"]]),t.push(["Right","ps_right","changeAttribute",["decorationsPosition","right"]]),t.push(["Bottom","ps_bottom","changeAttribute",["decorationsPosition","bottom"]]),t.push(["Left","ps_left","changeAttribute",["decorationsPosition","left"]]),t},this.getNetworkDecorationAttributesMenu=function(){for(var t=[],e=[],i=this.sortObject(this.meta.data.nodes),s={x:!0,y:!0,z:!0,width:!0,height:!0,community:!0,decorationsXi:!0,decorationsYi:!0},a=0;a<i.length;a++)"Numeric"!=this.meta.data.nodes[i[a]].type||s[i[a]]||e.push(i[a]);var r={};for(a=0;a<this.decorations.length;a++)r[this.decorations[a]]=!0;for(a=0;a<e.length;a++)t.push([e[a],r[e[a]]?"sl_checkboxon":"sl_checkboxoff","modifyNetworkDecorations",[e[a]]]);return t},this.getNetworkDecorationsTypeMenu=function(){var t=[];return t.push(["Bar","g_bar","changeAttribute",["decorationsType","bar"]]),t.push(["Heatmap","g_heatmap","changeAttribute",["decorationsType","heatmap"]]),t.push(["Pie Chart","g_pie","changeAttribute",["decorationsType","pie"]]),t.push(["Stacked","g_stacked","changeAttribute",["decorationsType","stacked"]]),t},this.getNetworkDecorationsMenu=function(){var t=[],e=!1;return t.push(["Attributes","ch_la",e,e,e,"getNetworkDecorationAttributesMenu",[]]),t.push(["Height","sp_heightness",e,e,e,"changeTextColorAttributeMenu",["-text-","decorationsHeight"]]),t.push(["Width","sp_thickness",e,e,e,"changeTextColorAttributeMenu",["-text-","decorationsWidth"]]),t.push(["Position","ps_toloc2",e,e,e,"getNetworkDecorationsPositionMenu",[]]),t.push(["Type","ly_doe",e,e,e,"getNetworkDecorationsTypeMenu",[]]),t.push([this.showDecorations?"Hide Decorations":"Show Decorations",this.showDecorations?"sl_eclose":"sl_eopen","toggleAttribute",["showDecorations"]]),t},this.getNetworkNodeEdgeAttributesMenu=function(){var t=[],e=!1;return t.push(["Nodes","n_nodes",e,e,e,"getNetworkNodeAttributesMenu",[]]),t.push(["Edges","n_edges",e,e,e,"getNetworkEdgeAttributesMenu",[]]),t},this.getNetworkNodeAttributesPropertyMenu=function(t){for(var e=[],i=this.sortObject(this.meta.data.nodes),s=0;s<i.length;s++)t.match(/shape|pattern/i)&&"Numeric"==this.meta.data.nodes[i[s]].type||e.push([i[s],this[t]==i[s]?"sl_radioon":"sl_radiooff","changeAttribute",[t,i[s]]]);return e},this.getNetworkNodeAttributesMenu=function(){var t=[],e=!1;return t.push(["Color By","at_col",e,e,e,"getNetworkNodeAttributesPropertyMenu",["colorNodeBy"]]),t.push(["Shape By","at_shp",e,e,e,"getNetworkNodeAttributesPropertyMenu",["shapeNodeBy"]]),t.push(["Size By","at_sze",e,e,e,"getNetworkNodeAttributesPropertyMenu",["sizeNodeBy"]]),t.push(["Pattern By","at_pat",e,e,e,"getNetworkNodeAttributesPropertyMenu",["patternNodeBy"]]),t},this.getNetworkEdgeAttributesPropertyMenu=function(t){for(var e=[],i=this.sortObject(this.meta.data.edges),s=0;s<i.length;s++)t.match(/shape|pattern/)&&"Numeric"==this.meta.data.edges[i[s]].type||e.push([i[s],this[t]==i[s]?"sl_radioon":"sl_radiooff","changeAttribute",[t,i[s]]]);return e},this.getBin2dShapeMenu=function(){var t=[];return t.push(["Rectangule","sh_square","changeAttribute",["binplotShape","rectangle"]]),t.push(["Hexagon","sh_hexagon","changeAttribute",["binplotShape","hexagon"]]),t.push(["Oval","sh_oval","changeAttribute",["binplotShape","oval"]]),t},this.getBin2dMenu=function(){var t=!1,e=[];return e.push(["Bin Number","ch_snumber",t,t,t,"changeTextColorAttributeMenu",["-text-","binplotBins"]]),e.push(["Bin Width","sp_thickness",t,t,t,"changeTextColorAttributeMenu",["-text-","binplotBinWidth"]]),e.push(["Shape","at_shp",t,t,t,"getBin2dShapeMenu",[]]),e.push(["Binplot Color Scheme","at_palette",t,t,t,"getColorSpectrumSchemeMenu",["binplotColorScheme","Binplot"]]),e.push(["bin2d"==this.scatterType?"Remove Bin-2d":"Show Bin-2d","bin2d"==this.scatterType?"sl_eclose":"sl_eopen","changeAttribute",["scatterType","bin2d"!=this.scatterType&&"bin2d"]]),e},this.getNetworkEdgeAttributesMenu=function(){var t=[],e=!1;return t.push(["Color By","at_col",e,e,e,"getNetworkEdgeAttributesPropertyMenu",["colorEdgeBy"]]),t.push(["Size By","sp_thickness2",e,e,e,"getNetworkEdgeAttributesPropertyMenu",["sizeEdgeBy"]]),t},this.setMenu=function(t){var e=this.getObjectArray(CanvasXpress.graphTypes.OneDGraphs),i=this.decorations,s=!(!t||!this.layoutValid)&&this.getActiveLayout(t),a=!1;return this.layoutCurrent=!!s&&s.idx,this.menu=[],"Network"!=this.graphType&&(this.menu.push(["File","cd_folder",a,a,a,"getFileMenu",[]]),this.menu.push(["-"]),this.isDOE||"Genome"==this.graphType||this.isOncoprint||(this.menu.push(["Explore","z_zoom",a,a,a,"getExploreMenu",[]]),this.menu.push(["-"]))),"Network"==this.graphType&&(CanvasXpress.selector.selections?(this.menu.push(["Align","a_alignbottom",a,a,a,"getAlignNetworkMenu",[]]),this.menu.push(["Distribute","a_distributever",a,a,a,"getDistributeNetworkMenu",[]]),this.menu.push(["Order","a_order",a,a,a,"getOrderNetworkMenu",[]]),this.menu.push(["-"]),this.menu.push(["Show conections","g_network","showHideSelectedData",[a,36],"Ctrl + Home"]),this.menu.push(["-"]),this.menu.push(["Hide nodes","sl_eremove","showHideSelectedData",[a,46],"Ctrl + Delete"]),this.menu.push(["-"]),this.menu.push(["Layout Selected Nodes","op_refresh","recalculateLayoutSelectedNodes"])):(this.menu.push(["File","cd_folder",a,a,a,"getFileMenu",[]]),this.menu.push(["-"]),this.menu.push(["Explore","z_zoom",a,a,a,"getExploreMenu",[]]),this.menu.push(["-"]),this.menu.push(["Legend","lg_legend",a,a,a,"getLegendMenu",[]]),this.menu.push(["-"]),this.menu.push(["Data Point Properties","at_colshpsze",a,a,a,"getNetworkNodeEdgeAttributesMenu",[]]),this.menu.push(["-"]),this.menu.push(["Decorations","wp_installation",a,a,a,"getNetworkDecorationsMenu",[]]),this.menu.push(["Color","at_col",a,a,a,"getColorsMenu",[]]),this.networkVendor||(this.menu.push(["-"]),this.menu.push([this.showNetworkCommunities?"Hide Communities":"Show Communities",this.showNetworkCommunities?"sl_eclose":"sl_eopen","toggleAttribute",["showNetworkCommunities"]]),this.showNetworkCommunities&&!this.colorNodeBy&&this.menu.push(["Coordinate Convex Hull Color","at_col","toggleAttribute",["coordinateNetworkConvexHullCommunityColor"]])),this.isNetworkMetricsDone||(this.menu.push(["-"]),this.menu.push(["Calculate Network metrics","n_nodes","calculateNetworkMetrics",[!0]])),this.menu.push(["-"]),this.isHiddenNodes&&(this.menu.push(["Show hidden nodes","sl_eopen","hideUnhideNodes",[],"Ctrl + Insert"]),this.menu.push(["-"])),this.menu.push(["Rotate","rt_ac",a,a,a,"getRotateNetworkMenu",[]]),this.menu.push(["-"]),this.menu.push(["Undo","op_undo","undo",[],"Ctrl + z"]),this.menu.push(["Redo","op_redo","redo",[],"Ctrl + y"]),this.menu.push(["-"]),this.menu.push(["Redraw","op_refresh","recalculateLayout"]))),"Map"==this.graphType?(this.menu.push(["Customize","wp_configuration",a,a,a,"getConfigurationMenu",[]]),this.menu.push(["-"]),this.data.z&&this.menu.push(["Color By","at_col",a,a,a,"getDataPointAttributesPropertyMenu",["colorBy"]])):"Tree"!=this.graphType||this.isDOE?"Circular"!=this.graphType||"normal"!=this.circularType||this.showIdeogram||(this.menu.push(["Cluster","cl_horizontal",a,a,a,"getDendrogramsMenu",[]]),this.menu.push(["-"])):(this.menu.push(["Customize","wp_configuration",a,a,a,"getConfigurationMenu",[]]),this.menu.push(["-"]),this.data.x&&(this.menu.push(["Data Point Properties","at_colshpsze",a,a,a,"getDataPointAttributesMenu",[]]),this.menu.push(["-"])),this.menu.push(["Layout","cl_horizontal",a,a,a,"getDendrogramsMenu",[]])),this.isDOE?(this.menu.push(["Customize","wp_configuration",a,a,a,"getDOEConfigurationMenu",[]]),this.menu.push(["-"]),this.menu.push(["Modify Meta-Data Plots","ly_doe",a,a,a,"getDOEMenu",[]]),this.menu.push(["Meta-Data Plots Topology","ly_segregate",a,a,a,"getDOETopologyMenu",[]]),this.menu.push(["Remove Meta-Data Plots","ly_doeremove","removeDOE"])):!e[this.graphType]||this.is3DPlot||this.graphType.match(/Meter/i)?"Circular"==this.graphType?(this.menu.push(["Data","wp_data",a,a,a,"getDataMenu",[]]),this.menu.push(["-"]),(this.data.x||this.data.z)&&((this.data.x||this.data.z)&&this.menu.push(["Segregate Data","ly_segregate",a,a,a,"getSegregationMenu",[]]),this.menu.push(["-"]))):(this.graphType.match(/scatter/i)||this.is3DPlot)&&(this.menu.push(["Customize","wp_configuration",a,a,a,"getConfigurationMenu",[]]),this.menu.push(["-"]),"Scatter2D"!=this.graphType||"manhattan"==this.scatterType||this.isValidKaplanMeier()||this.isHistogram||(this.menu.push(["Data","wp_data",a,a,a,"getDataMenu",[]]),this.menu.push(["-"])),"Scatter2D"==this.graphType&&"manhattan"!=this.scatterType&&"visium"!=this.scatterType?this.isHistogram?this.menu.push(["Histogram","dt_hist",a,a,a,"getHistogramMenu",[]]):this.isContour?this.menu.push(["Contour","g_contour",a,a,a,"getContourMenu",[]]):this.isCorrelate?this.menu.push(["Remove Correlation","dt_corremove","removeCorrelation"]):this.isQQ?this.menu.push(["Remove QQ Plot","dt_qqremove","removeQQPlot"]):this.isCDF?this.menu.push(["Remove CDF plot","dt_cdfremove","removeCDFPlot"]):"bin2d"==this.scatterType?this.menu.push(["Bin-2d","dt_bin",a,a,a,"getBin2dMenu",[]]):(i&&i.reg?this.menu.push(["Remove Correlation","dt_corremove","removeCorrelation"]):(this.isValidKaplanMeier()||(this.menu.push(["Loess","cr_bezier",a,a,a,"getLoessMenu",[]]),this.menu.push(["Quantile Regression","dt_quantreg",a,a,a,"getQuantileRegressionMenu",[]]),this.data.z?this.menu.push(["Correlate","dt_cor",a,a,a,"getCorrelateMenu",[]]):this.menu.push(["Correlate","dt_cor","correlateData"]),this.menu.push(["Contour","g_contour",a,a,a,"getContourCreateMenu"]),this.menu.push(["Bin-2d","dt_bin",a,a,a,"getBin2dMenu"])),this.scatterPlotMatrix||this.menu.push(["Kaplan Meier","dt_km",a,a,a,"getKaplanMeierMenu",[]]),this.isKM||this.scatterPlotMatrix||(this.menu.push(["QQ Plot","dt_qq","addQQPlot"]),this.menu.push(["CDF Plot","dt_cdf","addCDFPlot"]))),this.scatterPlotMatrix||this.isKM||this.decorations&&this.decorations.kaplanMeier||(this.data.z?this.menu.push(["Create Histogram","dt_hist",a,a,a,"getHistogramCreateMenu",[]]):this.menu.push(["Create Histogram","dt_hist","createHistogram"]))):"ScatterBubble2D"==this.graphType?this.isContour?this.menu.push(["Contour","g_contour",a,a,a,"getContourMenu",[]]):(this.menu.push(["-"]),this.menu.push(["Contour","g_contour",a,a,a,"getContourCreateMenu"])):"Scatter3D"==this.graphType&&this.menu.push(["Loess","cr_bezier",a,a,a,"getLoessMenu",[]]),(this.data.z||this.isHistogram&&this.dataStndBy.z)&&(this.graphType,this.menu.push(["Data Point Properties","at_colshpsze",a,a,a,"getDataPointAttributesMenu",[]])),!(this.isQQ||this.isCDF||this.data.z||this.isHistogram&&this.dataStndBy.z)||this.scatterPlotMatrix||"Scatter3D"==this.graphType||this.is3DPlot||this.isValidKaplanMeier()||CanvasXpress.graphTypes.OneDGraphs.includes(this.initialGraphType)||(this.menu.push(["-"]),this.menu.push(["Segregate Data","ly_segregate",a,a,a,"getSegregationMenu",[]]))):(this.menu.push(["Customize","wp_configuration",a,a,a,"getConfigurationMenu",[]]),this.menu.push(["-"]),this.menu.push(["Data","wp_data",a,a,a,"getDataMenu",[]]),this.menu.push(["-"]),(this.data.x||"ParallelCoordinates"==this.graphType||"Line"==this.graphType&&this.data.x)&&(this.menu.push(["Data Point Properties","at_colshpsze",a,a,a,"getDataPointAttributesMenu",[]]),this.menu.push(["-"])),(this.data.x||this.data.z)&&this.isRawData&&(this.data.x&&this.menu.push(["Group Samples","a_group",a,a,a,"getGroupSamplesMenu",[]]),!this.data.x&&!this.data.z||this.isGraphTime||"lollipop"==this.barType||this.menu.push(["Segregate Data","ly_segregate",a,a,a,"getSegregationMenu",[]]),this.menu.push(["-"])),this.layoutValid||!this.isRawData||this.graphType.match(/Gantt|Stacked|Meter/i)||this.isContour||"swimmer"==this.barType||this.stackBy||this.dodgeBy||this.isGroupedData||(this.menu.push(["Cluster","cl_horizontal",a,a,a,"getDendrogramsMenu",[]]),this.isHistogram?(this.menu.push(["-"]),this.menu.push(["Histogram","dt_hist",a,a,a,"getHistogramMenu",[]])):this.isCorrelate||this.isHistogram||this.graphType.match(/Gantt|Heatmap/)||this.isContour||(this.menu.push(["-"]),this.menu.push(["Correlate","dt_cor",a,a,a,"getCorrelationMenu",[]]),this.isMultidimensionalData||this.menu.push(["Histogram","dt_hist","createHistogram"]))),"Heatmap"==this.graphType&&(this.isContour?this.menu.push(["Contour","g_contour",a,a,a,"getContourMenu",[]]):this.isCountourable()&&(this.menu.push(["-"]),this.menu.push(["Contour","g_contour",a,a,a,"getContourCreateMenu"])))),this.menu},this.resetMenus=function(){this.removeMenus()},this.initializeMenus=function(){if(this.showPrimaryMenus){for(var t=this.setMenu(),e=0;e<t.length;e++){var i=t[e],s=0==e&&{marginLeft:"13px"};i[5]&&this.addImageToToolbar(i[1],i[0],i[5],i[6],!1,!0,!1,s)}var a=this.$(this.target+"-cX-Toolbar-Custom");a&&a.clientWidth>.8*this.width&&this.removeAllImagesFromToolbar()}},this.initializeMenus()},CanvasXpress.prototype.initLinks=function(){var t;this.addLinkDiv=function(){if(t=this.$(this.target+"-cX-Link"))return this.resetLinkDiv(),t;var t=this.$cX("div",{id:this.target+"-cX-Link",className:"CanvasXpressLink"},{zIndex:10002,display:"none"}),e=this.$cX("ul",{id:this.target+"-cX-Link-Content",className:"CanvasXpressList"}),i=this.$("north-wrapper-"+this.target);return i&&(t.appendChild(e),i.appendChild(t)),t},this.showLinkDiv=function(t,e,i){var s=this.$(this.target+"-cX-Link-Content");s||(s=this.addLinkDiv());var a=this.$("west-container-"+this.target),r=!1;if(s){this.resetLinkDiv();var n=this.adjustedCoordinates(t);if(n){for(var o=n.x+a.offsetWidth,h=n.y,l=0;l<e.length;l++){var c=e[l].url,d=e[l].name,p=e[l].title,g=e[l].icon,u=e[l].source,m=e[l].params;if(c)r=!0;else if(u&&this.data.links&&this.data.links[u]&&(c=this.data.links[u].url,r=!0,m))for(var f in m)c=c.replace("$"+f+"$",m[f]);var y=this.$cX("li",{className:"CanvasXpressListItem"}),x=p||(this.data.links&&u&&this.data.links[u]&&this.data.links[u].title?this.data.links[u].title:""),v=this.$cX("a",{className:"CanvasXpressListItemA",href:c,alt:x,title:x,target:"_blank"}),b=this.$cX("img",{className:"CanvasXpressListIcon",src:g||(this.data.links&&u&&this.data.links[u]&&this.data.links[u].icon?this.data.links[u].icon:CanvasXpress.png)}),A=this.$cX("span",{className:"CanvasXpressListItemText",innerHTML:d||(this.data.links&&u&&this.data.links[u]&&this.data.links[u].name?this.data.links[u].name:l)});v.appendChild(b),v.appendChild(A),y.appendChild(v),this.addRemoveLinkListeners("addEvtListener",y),s.appendChild(y)}s.parentNode.style.left=o+"px",s.parentNode.style.top=h+"px",s.parentNode.style.display=r?"block":"none"}}},this.addRemoveLinkListeners=function(t,e){e&&(this.addRemoveEvtListener(t,e,"click",this.clickLink,!1),this.addRemoveEvtListener(t,e,"mouseover",this.mouseoverLink,!1),this.addRemoveEvtListener(t,e,"mouseout",this.mouseoutLink,!1))},this.clickLink=(t=this,function(e){return t.resetLinkDiv(),!1}),this.mouseoverLink=function(t){return function(e){var i=t.getMenuItemComp(e);return i&&(i[0].className="CanvasXpressListItemActive",i[1].className="CanvasXpressListItemAActive"),!1}}(this),this.mouseoutLink=function(t){return function(e){var i=t.getMenuItemComp(e);return i&&(i[0].className="CanvasXpressListItem",i[1].className="CanvasXpressListItemA"),!1}}(this),this.resetLinkDiv=function(){var t=this.$(this.target+"-cX-Link-Content");if(t&&t.childNodes){for(;t.childNodes.length>0;)this.addRemoveLinkListeners("removeEvtListener",t.childNodes[0]),t.removeChild(t.childNodes[0]);t.parentNode.style.display="none"}},this.resetLinks=function(){this.resetLinkDiv()},this.initializeLinks=function(){if(!this.disableEvents)return this.addLinkDiv()}},CanvasXpress.prototype.initTooltip=function(){this.addInfoSpan=function(){var t=this.$(this.target+"-cX-Info");if(t)return this.resetInfoSpan(),t;var e=this.$("center-wrapper-"+this.target);if(e){t=this.$cX("span",{id:this.target+"-cX-Info",className:"CanvasXpressTooltip"},{display:"none"});var i=this.$cX("div",{id:this.target+"-cX-Info-Left",className:"CanvasXpressTooltipArrowLeft"},{display:"none"}),s=this.$cX("div",{id:this.target+"-cX-Info-Right",className:"CanvasXpressTooltipArrowRight"},{display:"none"});e.appendChild(t),e.appendChild(i),e.appendChild(s)}},this.resetInfoSpan=function(t,e){var i=this.$(this.target+"-cX-Info");i||(i=this.initializeTooltip());var s=this.$(this.target+"-cX-Info-Left"),a=this.$(this.target+"-cX-Info-Right");i&&!this.noInfoSpanReset&&(((new Date).getTime()-this.infoStartTime>this.infoTimeIn||e)&&(i.style.left="0px",i.style.top="0px",i.style.display="none",s.style.display="none",a.style.display="none",i.innerHTML=""))},this.flashInfoSpan=function(t,e,i,s,a){var r=this,n=this.$(this.target+"-cX-Info");if(n||(n=this.initializeTooltip()),n){if(n.innerHTML=i,n.style.display="block",n.style.left=(t||0)+"px",n.style.top=(e||0)+"px",a)for(var o in a)n.style[o]=a[o];if(s){(function(){this.update=function(){(new Date).getTime()-r.infoStartTime>s&&(r.resetInfoSpan(),clearInterval(t))};var t=r.setInterval(this.update,s)}).call()}}},this.showInfoSpan=function(t,e,i,s){if(!(this.draggingOn||this.remoteUpdating||this.noInfoSpanReset||this.lassoPoints&&this.lassoPoints.length)||s){var a=(new Date).getTime()-this.infoStartTime,r=this.$(this.target+"-cX-Info");r||(r=this.initializeTooltip());var n=this.$(this.target+"-cX-Info-Left"),o=this.$(this.target+"-cX-Info-Right"),h=window,l=window.document;if(r&&e&&""!=e&&a>this.infoTimeIn){var c=i?this.regularCoordinates(t,i):this.adjustedCoordinates(t,r);if(c){var d,p,g=c.x,u=t?c.y:c.y+25;if(CanvasXpress.system.isIE&&(g+=l.body.scrollLeft,u+=l.body.scrollTop),t&&"touchmove"==t.type?(d=25,p=40):(d=10,p=20),isNaN(e)||(e=e.toString()),e.match(/\w/)){r.innerHTML=e,r.style.left=g+d+"px",r.style.top=u-p+"px",r.style.display="inline";var m=r.clientHeight;n.style.left=g+d+2+"px",n.style.top=u-5+"px",o.style.left=g+"px",o.style.top=u-5+"px";var f=parseInt(r.clientWidth);m=parseInt(r.clientHeight);f<h.innerWidth&&f>this.width-g?(r.style.left=g-(f+p)+"px",r.style.left=g-(parseInt(r.clientWidth)+p)+"px",o.style.display="block",n.style.display="none"):(n.style.display="block",o.style.display="none"),m<h.innerHeight&&m>this.height-u&&(r.style.top=u-(m-1.5*d)+"px",r.style.top=u-(parseInt(r.clientHeight)-1.5*d)+"px"),this.infoStartTime=(new Date).getTime();var y=this;(function(){this.update=function(){(new Date).getTime()-y.infoStartTime>y.infoTimeOut&&(y.resetInfoSpan(),clearInterval(t))};var t=y.setInterval(this.update,100)}).call()}}}}},this.initializeTooltip=function(){if(!this.disableEvents)return this.addInfoSpan()}},CanvasXpress.prototype.initTooltipMouse=function(){this.addMousePositionDiv=function(){var t=this.$(this.target+"-cX-MousePosition");if(t)return t;t=this.$cX("div",{id:this.target+"-cX-MousePosition",className:"CanvasXpressMousePosition"},{left:"0px",top:"0px",display:"none"});var e=this.$cXI("ar_cross",{className:"CanvasXpressMousePosition",src:"ar_cross"}),i=this.$cX("span",{id:this.target+"-cX-MousePositionCoordinates",className:"CanvasXpressMousePosition",innerHTML:"0, 0"});t.appendChild(e),t.appendChild(i);var s=this.$("center-wrapper-"+this.target);return s&&s.appendChild(t),t},this.showMousePosition=function(t,e){if(e);else{if(!t)return;e=this.adjustedCoordinates(t)}var i=e.x+", "+e.y,s=this.$(this.target+"-cX-MousePosition");s||(s=this.initializeTooltipMouse());var a=this.$(this.target+"-cX-MousePositionCoordinates");s&&a&&(s.style.left=e.x+"px",s.style.top=e.y+"px",s.style.display="block",a.innerHTML=i,this.mousePositioning=!0)},this.resetMousePosition=function(){var t=this.$(this.target+"-cX-MousePosition");t||(t=this.initializeTooltipMouse());var e=this.$(this.target+"-cX-MousePositionCoordinates");t&&e&&(t.style.left="0px",t.style.top="0px",t.style.display="none",e.innerHTML="0, 0",this.mousePositioning=!1)},this.initializeTooltipMouse=function(){if(!this.disableEvents)return this.addMousePositionDiv()}},CanvasXpress.prototype.initTooltipDiv=function(){var t;this.addTooltipDiv=function(t,e,i,s,a){this.resetInfoSpan();var r=0,n=this.target+"-cX-TooltipDiv"+r,o=this.$(this.target+"-cX-Info");o&&"none"!=o.style.display&&(e=parseInt(o.style.left),i=parseInt(o.style.top));for(var h=this.$(n);h;)r++,n=this.target+"-cX-TooltipDiv"+r,h=this.$(n);var l=this.$cX("div",{id:n,className:"CanvasXpressTooltip draggable"},{left:e+"px",top:i+"px"}),c=this.$cXI("op_cancel",{id:n+"Close",className:"CanvasXpressTooltip",src:"op_cancel",title:"Close"}),d=this.$cXI("fp_pencil",{id:n+"Marker",className:"CanvasXpressTooltip",src:"fp_pencil",obj:this.stringifyJSON(a),title:"Add Marker"});s||(s={}),s.clear="both",s.paddingTop="5px";var p=1;s.hasOwnProperty("opacity")&&(p=s.opacity,delete s.opacity),l.style.opacity=p;var g=this.$cX("div",{id:n+"HTML",innerHTML:t||""},s);return l.appendChild(c),a&&l.appendChild(d),l.appendChild(g),this.$("center-wrapper-"+this.target).appendChild(l),l},this.addRemoveTooltipDivsListeners=function(t,e){this.addRemoveEvtListener(t,e,"mousedown",this.registerMousemove,!1),this.addRemoveEvtListener(t,e,"touchstart",this.registerMousemove,!1),this.addRemoveEvtListener(t,e.childNodes[0],"click",this.closeTooltipDiv,!1),e.childNodes[1]&&"SVG"==e.childNodes[0].tagName.toUpperCase()&&this.addRemoveEvtListener(t,e.childNodes[1],"click",this.addMarkerTooltipDiv,!1)},this.closeTooltipDiv=(t=this,function(e,i,s){var a=!!e&&(e.target||e.srcElement),r=a?a.parentNode:!!i&&t.$(i);return r&&(t.addRemoveTooltipDivsListeners("removeEvtListener",r),t.transitionMagic(r,s||"holeOut",(function(){r.parentNode.removeChild(r)}))),!1}),this.addMarkerTooltipDiv=function(t){return function(e){var i=e.target||e.srcElement;if(i){var s=i.getAttribute("obj");s&&t.addMarkerConfigurator(e,t.parseJSON(s))}return!1}}(this),this.showTooltipDiv=function(t,e,i,s,a,r,n,o){var h;if(e&&""!=e){if(null!=a&&null!=r)h=this.addTooltipDiv(e,a,r,s,n),this.addRemoveTooltipDivsListeners("addEvtListener",h);else{var l=this.$(this.target+"-cX-Info"),c=i?this.regularCoordinates(t,i):this.adjustedCoordinates(t,l);c&&(a=c.x,r=t?c.y:c.y+25,h=this.addTooltipDiv(e,a,r,s,n),this.addRemoveTooltipDivsListeners("addEvtListener",h))}this.transitionMagic(h,o||"spaceInUp")}return h},this.resetTooltipDivs=function(){for(var t=0,e=this.target+"-cX-TooltipDiv"+t,i=this.$(e);i;)this.addRemoveTooltipDivsListeners("removeEvtListener",i),i.parentNode.removeChild(i),t++,e=this.target+"-cX-TooltipDiv"+t,i=this.$(e)},this.addMarkerConfigurator=function(t,e){var i,s=this,a=function(t,e,i,a){for(var r=0;r<e.length;r++){var n=s.$cX("option",{text:i[r],value:e[r],selected:a==e[r]});try{t.add(n,null)}catch(e){t.add(n)}}},r=this.$("center-wrapper-"+this.target);if(r){var n=this.target+"-cX-Marker";this.$(n)&&this.closeMarkerConfigurator(!1,this.$(n));var o=(t.target||t.srcElement).parentNode,h=this.adjustedCoordinates(t),l=e.y?e.y.vars:e.w?e.w.vars:[],c=e.y?e.y.smps:e.w?e.w.labs:[],d=(i=e.render&&e.render[0]?e.render[0].layout:"",s.layoutValid&&null!=i&&s.data.l&&s.data.l.name&&s.data.l.name[i]&&(i=s.data.l.name[i]),i),p=!!e.c&&(e.c&&"Map"==s.graphType&&s.isObject(e.c)?e.c:!(!e.c||"Map"!=s.graphType)&&s.parseJSON(e.c)),g=!!e.render&&this.renderObjectCoordinates(e.render[0],"Boxplot"==s.graphType?"horizontal"==s.graphOrientation?"top":"right":"horizontal"==s.graphOrientation?"right":"top",!0,2),u=function(t,e){return{text:"",color:"rgb(0,0,0)",fontSize:12,fontStyle:"",align:"center",baseline:"middle",type:"line",x:t[0],y:t[1],position:!1,location:t[2],scope:e||""}}(g,d),m=Object.keys(u).filter((function(t){if("location"!=t)return t})),f=function(t,e,i,a,r,n){var o={id:s.newId("-marker-"),coords:t,variable:e,sample:i,scope:a,update:!1};if(s.decorations&&s.decorations.marker)for(var h=0;h<s.decorations.marker.length;h++){var l=s.decorations.marker[h];if(l.variable=s.toArray(l.variable),l.sample=s.toArray(l.sample),l.scope=l.scope?s.toArray(l.scope):[],s.isSameObject(l.variable,e)&&s.isSameObject(l.sample,i)&&s.isSameObject(l.scope,s.toArray(a))){for(var c=0;c<n.length;c++)r[n[c]]=l[n[c]]||"";o.update=!0}}return o}(p,l,c,d,u,m),y=this.$cX("div",{id:n,className:"CanvasXpressMarker draggable",par:o.id,obj:this.stringifyJSON(f)},{left:h.x+"px",top:h.y+"px",display:"block"});p&&(y.style.height="196px");for(var x=this.$cXI("op_cancel",{id:n+"ConfiguratorMarkerClose",className:"CanvasXpressDataTableToolbarImage",src:"op_cancel",title:"Close"}),v=this.$cX("div",{id:n+"Container",className:"CanvasXpressDataTableContainer"},{left:"12px"}),b=this.$cX("table",{id:n+"MarkerTable",className:"CanvasXpressDataTable"}),A=this.$cX("tbody"),w=0;w<m.length;w++){var C,T=this.$cX("tr"),S=this.$cX("th",{className:"CanvasXpressTableCellHead"},{height:"text"==m[w]?"64px":"24px",width:"80px",backgroundRepeat:"repeat"}),M=this.$cX("div",{className:"CanvasXpressTableCell",innerHTML:this.capitalize(m[w])},{height:"text"==m[w]?"64px":"24px",width:"80px"}),D=this.$cX("td",{className:"CanvasXpressTableCell"},{height:"text"==m[w]?"64px":"24px",width:"160px",border:"1px solid #ccc"}),k=this.$cX("div",{className:"CanvasXpressTableCell"},{height:"text"==m[w]?"64px":"24px",width:"160px"});"text"==m[w]?C=this.$cX("textarea",{id:n+"ConfiguratorMarker-"+m[w],className:"CanvasXpressMarker",name:m[w],value:u[m[w]],rows:3},{width:"100%",border:"none"}):"color"==m[w]?C=this.$cX("input",{id:n+"ConfiguratorMarker-"+m[w],className:"CanvasXpressMarker",type:"color",name:m[w],value:u[m[w]]?this.validateColor(u[m[w]],null,!0):"rgb(0,0,0)"},{width:"100%",border:"none"}):m[w].match(/fontSize/)?C=this.$cX("input",{id:n+"ConfiguratorMarker-"+m[w],className:"CanvasXpressMarker",type:"number",name:m[w],value:u[m[w]]},{width:"100%",border:"none"}):m[w].match(/fontStyle/)?a(C=this.$cX("select",{id:n+"ConfiguratorMarker-"+m[w],className:"CanvasXpressMarker",size:1},{width:"100%",border:"none",height:"22px",backgroundColor:"white"}),["","bold","italic","bold italic"],["Normal","Bold","Italic","Bold Italic"],u[m[w]]):"type"==m[w]?a(C=this.$cX("select",{id:n+"ConfiguratorMarker-"+m[w],className:"CanvasXpressMarker",size:1},{width:"100%",border:"none",height:"22px",backgroundColor:"white"}),["line","annotation"],["Line","Annotation"],u[m[w]]):"align"==m[w]?a(C=this.$cX("select",{id:n+"ConfiguratorMarker-"+m[w],className:"CanvasXpressMarker",size:1},{width:"100%",border:"none",height:"22px",backgroundColor:"white"}),["left","center","right"],["Left","Center","Right"],u[m[w]]):"baseline"==m[w]?a(C=this.$cX("select",{id:n+"ConfiguratorMarker-"+m[w],className:"CanvasXpressMarker",size:1},{width:"100%",border:"none",height:"22px",backgroundColor:"white"}),["top","middle","bottom"],["Top","Middle","Bottom"],u[m[w]]):"x"==m[w]||"y"==m[w]?C=this.$cX("input",{id:n+"ConfiguratorMarker-"+m[w],className:"CanvasXpressMarker",type:"number",name:m[w],value:u[m[w]]?this.sprintf("%.2f",Number(u[m[w]])):0,min:0,max:1,step:.01},{width:"100%",border:"none"}):"position"==m[w]?a(C=this.$cX("select",{id:n+"ConfiguratorMarker-"+m[w],className:"CanvasXpressMarker",size:1,location:g[2],render:e.render[0]},{width:"100%",border:"none",height:"22px",backgroundColor:"white"}),[!1,"top","right","bottom","left","center"],["Use above X, Y","Top","Right","Bottom","Left","Center"],u[m[w]]):C=this.$cX("input",{id:n+"ConfiguratorMarker-"+m[w],className:"CanvasXpressMarker",type:"text",name:m[w],value:u[m[w]]},{width:"100%",border:"none"});var L=this.$cX("input",{id:n+"ConfiguratorMarkerRemove",value:"Remove",type:"button"},{cssFloat:"left",borderRadius:"5px",position:"relative",top:p?"152px":"458px",left:"12px",width:"125px",height:"36px"}),I=this.$cX("input",{id:n+"ConfiguratorMarkerAdd",value:f.update?"Update":"Add",type:"button"},{cssFloat:"left",borderRadius:"5px",position:"relative",top:p?"152px":"458px",left:"24px",width:"125px",height:"36px"});k.appendChild(C),D.appendChild(k),S.appendChild(M),T.appendChild(S),T.appendChild(D),p&&"text"!=m[w]&&"color"!=m[w]||A.appendChild(T)}b.appendChild(A),v.appendChild(b),y.appendChild(x),y.appendChild(v),y.appendChild(L),y.appendChild(I),r.appendChild(y),this.addRemoveMarkerConfiguratorListeners("addEvtListener")}},this.addRemoveMarkerConfiguratorListeners=function(t){var e=this.$(this.target+"-cX-Marker"),i=this.$(this.target+"-cX-MarkerConfiguratorMarkerClose"),s=this.$(this.target+"-cX-MarkerConfiguratorMarkerRemove"),a=this.$(this.target+"-cX-MarkerConfiguratorMarkerAdd"),r=this.$(this.target+"-cX-MarkerConfiguratorMarker-type");e&&i&&s&&a&&(this[t](e,"mousedown",this.registerMousemove,!1),this[t](i,"click",this.closeMarkerConfigurator,!1),this[t](s,"click",this.removeMarker,!1),this[t](a,"click",this.addMarker,!1),r&&this[t](r,"change",this.changeTypeMarker,!1))},this.closeMarkerConfigurator=function(t){return function(e,i){var s=!!e&&(e.target||e.srcElement),a=s?t.$(s.parentNode.par):!!i&&t.$(i.par);return a&&(t.addRemoveTooltipDivsListeners("removeEvtListener",a),a.parentNode.removeChild(a)),i||(i=s.parentNode),t.addRemoveMarkerConfiguratorListeners("removeEvtListener",i),i.parentNode.removeChild(i),!1}}(this),this.removeMarker=function(t){return function(e){var i=e.target||e.srcElement;return t.modifyMarker(t.parseJSON(i.parentNode.obj),!0),t.closeMarkerConfigurator(e),!1}}(this),this.addMarker=function(t){return function(e){var i=e.target||e.srcElement;return t.modifyMarker(t.parseJSON(i.parentNode.obj)),t.closeMarkerConfigurator(e),!1}}(this),this.changeTypeMarker=function(t){var e=t.target||t.srcElement,i=this.value,s=e.parentNode.parentNode.parentNode.nextElementSibling,a=s.nextElementSibling;return s.childNodes[1].childNodes[0].childNodes[0].disabled="line"!=i,a.childNodes[1].childNodes[0].childNodes[0].disabled="line"!=i,!1},this.modifyMarker=function(t,e){for(var i=["text","color","fontSize","fontStyle","align","baseline","type","x","y","position","scope"],s=0;s<i.length;s++){(a=this.$(this.target+"-cX-MarkerConfiguratorMarker-"+i[s]))&&(t[i[s]]=a.value)}var a;(a=this.$(this.target+"-cX-MarkerConfiguratorMarker-position"))&&(t.location=a.location,t.render=a.render,"false"!=a.value&&(t.x=t.location[a.value][0],t.y=t.location[a.value][1])),t.text=t.text.replace(/\n/g,"__nl__"),this.updateMarker(t,e)},this.updateMarker=function(t,e){var i=this;if(!this.isTransition()){if(t&&t.scope&&t.scope.match(",")&&(t.scope=t.scope.split(",")),e){if(!t.update)return!1;for(var s=[],a=0;a<this.decorations.marker.length;a++){(r=this.decorations.marker[a]).variable=this.toArray(r.variable),r.sample=this.toArray(r.sample),r.scope=this.toArray(r.scope),this.isSameObject(r.variable,t.variable)&&this.isSameObject(r.sample,t.sample)&&this.isSameObject(r.scope,this.toArray(t.scope))||s.push(r)}this.decorations.marker=s}else if("false"!=t.position&&"center"!=t.postion&&function(){var e=t.fontSize?t.fontStyle+" "+parseInt(t.fontSize)+"px "+i.fontName:i.decorationsTextFont,s=i.measureText(t.text,e)/i.x*.5,a=i.measureTextWidth(t.text,e)/i.y*.5;switch(t.position){case"top":t.y=Number((t.y-a).toFixed(2));break;case"right":t.x=Number((t.x+s).toFixed(2));break;case"bottom":t.y=Number((t.y+a).toFixed(2));break;case"left":t.x=Number((t.x-s).toFixed(2))}}(),t.update)for(a=0;a<this.decorations.marker.length;a++){var r;if((r=this.decorations.marker[a]).variable=this.toArray(r.variable),r.sample=this.toArray(r.sample),r.scope=this.toArray(r.scope),this.isSameObject(r.variable,t.variable)&&this.isSameObject(r.sample,t.sample)&&this.isSameObject(r.scope,this.toArray(t.scope))){r.text=t.text,r.color=t.color,r.fontSize=Number(t.fontSize),r.fontStyle=t.fontStyle,r.align=t.align,r.baseline=t.baseline,r.x=Math.max(.01,Math.min(.99,Number(t.x))),r.y=Math.max(.01,Math.min(.99,Number(t.y))),r.position=t.position,r.location=t.location,r.type=t.type,r.scope=t.scope,r.render=t.render.n,r.layout=t.render.layout;break}}else this.decorations||(this.decorations={}),this.decorations.marker||(this.decorations.marker=[]),this.decorations.marker.push({variable:t.variable,sample:t.sample,text:t.text,color:t.color,coords:t.coords,fontSize:Number(t.fontSize),fontStyle:t.fontStyle,align:t.align,baseline:t.baseline,x:Math.max(.01,Math.min(.99,Number(t.x))),y:Math.max(.01,Math.min(.99,Number(t.y))),position:t.position,location:t.location,type:t.type,scope:t.scope,render:t.render.n,layout:t.render.layout});this.draw({func:"updateMarker",par:[t,e]})}}},CanvasXpress.prototype.initToolbar=function(){var t;this.addToolbarDiv=function(){var t=this.$(this.target+"-cX-Toolbar");if(t)return t;t=this.$cX("div",{id:this.target+"-cX-Toolbar",className:"CanvasXpressToolbar"},{position:"absolute",overflow:"hidden",width:this.width+"px",height:"fixed"==this.toolbarType?"36px":"0px",top:"fixed"==this.toolbarType?"-37px":"0px",right:0,zIndex:1e4,backgroundColor:"rgba(255,255,255,0.7)"});var e=this.$cX("div",{id:this.target+"-cX-Toolbar-Custom",className:"CanvasXpressToolbar"},{cssFloat:"left"}),i=this.$cXI("wp_threebars",{id:this.target+"-cX-ToolbarMenu",className:"CanvasXpressToolbarImage",src:"wp_threebars",title:"Open menus"},{display:"none"});i.style.setProperty("background-color",this.background,"important");var s=this.$cXI("sv_image",{id:this.target+"-cX-ToolbarSave",className:"CanvasXpressToolbarImage",src:"sv_image",title:"Save as png"});s.style.setProperty("background-color",this.background,"important");var a=this.$cXI("tm_history",{id:this.target+"-cX-ToolbarReproduce",className:"CanvasXpressToolbarImage",src:"tm_history",title:"Reproduce"},{display:this.afterRender.length&&!this.motionBy?"display":"none"});a.style.setProperty("background-color",this.background,"important");var r=this.$cXI("ps_toloc2",{id:this.target+"-cX-ToolbarMove",className:"CanvasXpressToolbarImage",src:"ps_toloc2",title:"Move Canvas (Grab here)",draggable:!1},{display:this.movable?"none":"block",cursor:"move"});r.style.setProperty("background-color",this.background,"important");var n=this.$cXI("tb_table",{id:this.target+"-cX-ToolbarView",className:"CanvasXpressToolbarImage",src:"tb_table",title:"View table"},{display:this.graphType.match(/Genome/)||this.disableDataTable||this.isDOE?"none":"block"});n.style.setProperty("background-color",this.background,"important");var o=this.$cXI("fp_funnel",{id:this.target+"-cX-ToolbarLayout",className:"CanvasXpressToolbarImage",src:"fp_funnel",title:"Explore data"},{display:this.graphType.match(/Genome|Fish/)||this.disableDataFilters||this.disableDataTable||this.isDOE?"none":"block"});o.style.setProperty("background-color",this.background,"important");var h=this.$cXI("m_zlasso",{id:this.target+"-cX-ToolbarLasso",className:"CanvasXpressToolbarImage",src:"m_zlasso",title:"Lasso Selection"},{display:"Scatter2D"==this.graphType&&!this.isDOE||"Network"==this.graphType?"block":"none"});h.style.setProperty("background-color",this.background,"important");var l=this.$cXI("wp_installation",{id:this.target+"-cX-ToolbarDataCustomizer",className:"CanvasXpressToolbarImage",src:"wp_installation",title:"Customize"},{display:this.disableDataCustomizer||this.graphType.match(/Genome|Network|Venn/)||this.isDOE?"none":"block"});l.style.setProperty("background-color",this.background,"important");var c=this.$cXI("ch_oinfo",{id:this.target+"-cX-ToolbarInformation",className:"CanvasXpressToolbarImage",src:"ch_oinfo",title:"Data Details"},{display:this.info?"block":"none"});c.style.setProperty("background-color",this.background,"important");var d=this.$cXI("ar_minmax",{id:this.target+"-cX-ToolbarMaxMin",className:"CanvasXpressToolbarImage",src:"ar_minmax",title:"Minimize / Maximize"},{marginRight:"13px"});d.style.setProperty("background-color",this.background,"important"),t.appendChild(this.beaconImage),t.appendChild(d),t.appendChild(c),t.appendChild(l),t.appendChild(h),t.appendChild(o),t.appendChild(n),t.appendChild(r),t.appendChild(a),t.appendChild(s),t.appendChild(i),t.appendChild(e);var p=this.$("north-wrapper-"+this.target);p&&(p.appendChild(t),this.addRemoveToolbarListeners("addEvtListener"))},this.addRemoveToolbarListeners=function(t){this.addRemoveEvtListener(t,this.$(this.target+"-cX-ToolbarMenu"),"click",this.clickMenu,!1),this.addRemoveEvtListener(t,this.$(this.target+"-cX-ToolbarSave"),"click",this.print,!1),this.addRemoveEvtListener(t,this.$(this.target+"-cX-ToolbarReproduce"),"click",this.reproducePlay,!1),this.addRemoveEvtListener(t,this.$(this.target+"-cX-ToolbarMove"),"mousedown",this.registerMousemove,!1),this.addRemoveEvtListener(t,this.$(this.target+"-cX-ToolbarLayout"),"click",this.clickLayout,!1),this.addRemoveEvtListener(t,this.$(this.target+"-cX-ToolbarLasso"),"click",this.clickLasso,!1),this.addRemoveEvtListener(t,this.$(this.target+"-cX-ToolbarDataCustomizer"),"click",this.clickDataCustomizer,!1),this.addRemoveEvtListener(t,this.$(this.target+"-cX-ToolbarView"),"click",this.clickView,!1),this.addRemoveEvtListener(t,this.$(this.target+"-cX-ToolbarInformation"),"click",this.clickDataDetails,!1),this.addRemoveEvtListener(t,this.$(this.target+"-cX-ToolbarMaxMin"),"click",this.clickGraphMaxMin,!1);var e=this.$(this.target+"-cX-Toolbar-Custom");if("removeEvtListener"==t&&e)for(var i=0;i<e.childNodes.length;i++)this.addRemoveEvtListener(t,e.childNodes[i],"click",this.addCustomToolbarMenu,!1),this.addRemoveEvtListener(t,e.childNodes[i],"contextmenu",this.unpinFromToolbar,!1)},this.backgroundMask=function(t,e){var i=this.$("container-"+this.target),s=i.clientWidth,a=i.clientHeight;if(i)return e?(i.style.position="relative",i.style.zIndex="unset",i.style.padding="unset",i.style.width=t[0]+"px",i.style.height=t[1]+"px",i.style.left="unset",i.style.top="unset",i.style.backgroundColor="unset"):t?(i.style.position="fixed",i.style.zIndex=1e6,i.style.padding="2px",i.style.width=t[0]+"px",i.style.height=t[1]+"px",i.style.left="0px",i.style.top="0px",i.style.backgroundColor="white"):(i.style.position="relative",i.style.zIndex="unset",i.style.padding="unset",i.style.width="unset",i.style.height="unset",i.style.left="unset",i.style.top="unset",i.style.backgroundColor="unset"),[s,a]},this.clickMenu=(t=this,function(e,i){t.isMenu?t.removeMenus():(t.removeMenus(),t.addMenu(e,!1,!1,!1,!1,!1,!1,!0),t.isMenu=!0)}),this.clickLasso=function(t){return function(e,i){t.removeMenus(),t.lassoSelected=!0}}(this),this.clickLayoutNoAnimation=function(t){if(this.appLayout&&!t){var e=this;return this.hideTable(!1,(function(){e.hideDataFilter(),e.appLayout=!1,e.activeAccordion=!1})),!1}},this.clickLayoutShowDataFilter=function(t,e,i,s,a){var r=this;this.showDataFilter(t,(function(){r.moveDataFilter(!1,"dock",(function(){r.transitionMagic(r.$(r.target+"-cX-DataFilter"),i||"holeIn",e)}),s,a)}),s)},this.clickDataFilters=function(t){return function(e,i,s){if(t.removeMenus(),t.maximized)if(t.appLayout)t.clickLayout(e,(function(){t.clickDataFilters(e,i)}));else if(t.appLayoutDataTable)t.clickDataTable(e,(function(){t.clickLayout(e,i)}));else{var a=t.dataFilterWidth+10;if(t.appLayoutDataFilter=!t.appLayoutDataFilter,t.appLayoutDataFilter)t.setDimensions(t.width-a,t.height,!0),t.resizeWidthOnLayoutActive=a,t.resizeDataFilterHeight(),t.clickLayoutShowDataFilter(e,i,s);else{var r=function(){t.hideDataFilter(e,(function(){t.resizeViewportMiddle(t.width+a,t.height),t.setDimensions(t.width+a,t.height,!0,250),t.resizeWidthOnLayoutActive=!1,i&&i(e)}),brc)};t.activeAccordion?t.activateAccordion(!1,t.activeAccordion.previousSibling,r):r()}}else t.showDataFilter(e,(function(){t.transitionMagic(t.$(t.target+"-cX-DataFilter"),s||"holeIn",i)}));return!1}}(this),this.clickLayoutShowDataTable=function(t,e,i,s,a){this.updateDataTable(!1,!1,!0),(!this.dataTableLastState||this.dataTableLastState&&"docked"!=this.dataTableLastState)&&this.moveDataTableDiv("dockMagic");var r=this.getDataFilterState(),n=this.$("middle-container-"+this.target);i||(i=parseInt(n.style.width)+("docked"==r?this.dataFilterWidth+6:0)-(this.appLayoutDataTable?17:-1)),s||(s=this.dataTableLastHeight||parseInt(this.dataTableTarget.style.height)),this.dataTableTarget=this.$(this.target+"-cX-DataTable"),this.updateDataTableResizerDiv(!1,i,s),this.endDataTableResizerDiv(!0),this.transitionMagic(this.$(this.target+"-cX-DataTable"),a||"holeIn",e)},this.clickDataTable=function(t){return function(e,i,s){var a=t.$(t.target+"-cX-DataTable");if(a||(a=t.initializeDataTable()),t.removeMenus(),a)if(t.maximized)if(t.appLayout)t.clickLayout(e,(function(){t.clickDataTable(e,i)}));else if(t.appLayoutDataFilter)t.clickDataFilters(e,(function(){t.clickLayout(e,i)}));else{t.setDataTableDimensions();var r=t.dataTableLastHeight?t.dataTableLastHeight+6:t.dataTableRowsHeight+81;t.appLayoutDataTable=!t.appLayoutDataTable,t.appLayoutDataTable?(t.setDimensions(t.width,t.height-r,!0),t.resizeHeightOnLayoutActive=!0,t.clickLayoutShowDataTable(e,i,!1,!1,s)):t.hideTable(e,(function(){t.setDimensions(t.width,t.height+r,!0,250),t.resizeHeightOnLayoutActive=!1,i&&i(e)}))}else t.updateDataTable(!1,!1,!0),t.transitionMagic(a,s||"holeIn",i);return!1}}(this),this.clickView=function(t){return function(e,i,s){var a=t.$(t.target+"-cX-DataTable");if(a||(a=t.initializeDataTable()),a){if("canvas"==t.view){var r=!!t.isGroupedData&&t.cloneObject(this.groupingFactors);t.removeMenus(),t.skipRender=!0,e||(t.meta.canvas.ctx.canvas.style.opacity=0),t.hideToolbar(),t.disableToolbar=!0,r&&t.ungroupSamples(!0),t.dataTableTarget=a,t.updateDataTable(!1,!1,e),t.viewTable=[a.clientWidth,a.clientHeight,r],t.updateDataTableResizerDiv(!1,t.width,t.height),t.endDataTableResizerDiv(e),(a=t.$(t.target+"-cX-DataTable")).style.top=-(t.height+3)+"px",a.style.left=0,t.view="table",t.$(t.target+"-cX-DataTableToolbar").className="CanvasXpressDataTableToolbar",e&&(t.transitionMagic(t.meta.canvas.ctx.canvas,s||"holeOut",(function(){t.meta.canvas.ctx.canvas.style.opacity=0}),1e3),t.transitionMagic(t.$(t.target+"-cX-DataTable"),i||"swashIn",(function(){t.modifyDataTableToolbarView()}),1e3)),t.stack({func:"clickView",par:[e,i,s]})}else{r=t.viewTable[2];if(t.removeMenus(),t.skipRender=!1,t.disableToolbar=!1,t.showDataTable=!1,r&&t.groupSamples(r,!1,!1,!1,!0),e)t.draw({func:"clickView",par:[e,i,s]}),t.transitionMagic(t.meta.canvas.ctx.canvas,i||"swashIn",(function(){t.meta.canvas.ctx.canvas.style.opacity=1})),t.view="canvas",t.hideTable(e,(function(){a=t.$(t.target+"-cX-DataTable"),t.dataTableTarget=a,t.updateDataTableResizerDiv(!1,t.viewTable[0],t.viewTable[1]),t.$(t.target+"-cX-DataTableToolbar").className="CanvasXpressDataTableToolbar draggable",t.viewTable=!1}),s||"holeOut");else a=t.$(t.target+"-cX-DataTable"),t.dataTableTarget=a,t.updateDataTableResizerDiv(!1,t.viewTable[0],t.viewTable[1]),t.endDataTableResizerDiv(),t.updateDataTable(),t.moveDataTableDiv("hide"),t.hideUnhideDataTable(!0),t.resetDataTable(!0),t.meta.canvas.ctx.canvas.style.opacity=1,t.$(t.target+"-cX-DataTableToolbar").className="CanvasXpressDataTableToolbar draggable",t.draw({func:"clickView",par:[e,i,s]}),t.view="canvas",t.viewTable=!1}t.modifyDataTableToolbarView()}return!1}}(this),this.clickLayout=function(t){return function(e,i,s){var a=window.innerWidth,r=window.innerHeight,n=t.$("south-container-"+t.target),o=t.$("south-wrapper-"+t.target),h=t.$("north-container-"+t.target),l=t.$("north-wrapper-"+t.target),c=t.$("northest-container-"+t.target),d=t.$("middle-container-"+t.target),p=t.$("center-wrapper-"+t.target);if(t.appLayoutDataTable)t.clickDataTable(e,(function(){t.clickDataFilters(e,i)}));else if(t.appLayoutDataFilter)t.clickDataFilters(e,(function(){t.clickDataTable(e,i)}));else if(t.appLayout=!t.appLayout,t.resizeHeightOnLayout&&t.setDataTableDimensions(),t.appLayout){var g=function(){if(t.layoutGraphMaximize){var n=t.width,o=t.dataFilterWidth+10,g=t.dataTableLastHeight?t.dataTableLastHeight+6:t.dataTableRowsHeight+81;t.maximized.layoutWidth=a-o,t.maximized.layoutHeight=r-(g+10),t.maximized.layoutLeft=0,t.maximized.layoutTop=0,t.maximized.layoutMaximized=!0,t.resizeWidthOnLayout&&t.width-o>=1.3*o?t.resizeHeightOnLayout&&t.height-g>=1*g?(t.setDimensions(t.width-o,t.height-g,!0),t.resizeWidthOnLayoutActive=o,t.resizeHeightOnLayoutActive=g):(t.setDimensions(t.width-o,t.height,!0),t.resizeWidthOnLayoutActive=o):t.resizeHeightOnLayout&&t.height-g>=1*g&&(t.setDimensions(t.width,t.height-g,!0),t.resizeHeightOnLayoutActive=g),t.setDimensions(t.width,t.height,!0),t.resizeDataFilterHeight(),t.hideToolbar(1),t.clickLayoutShowDataFilter(e,!1,s),t.clickLayoutShowDataTable(e,(function(){i&&i(e)}),n-3,!1,s)}else{n=a,o=t.dataFilterWidth+10;var u=(g=t.dataTableLastHeight?t.dataTableLastHeight+6:t.dataTableRowsHeight+81)+10,m=Math.floor((a-o-t.width)/2),f=Math.floor((r-g-t.height)/2);d.style.width=a+"px",d.style.height=r-g+"px",p.style.left=m+"px",p.style.top=f+"px",h.style.left=m+"px",l.style.top=f+"px",c.style.left=m+"px",c.style.top=f+"px",t.maximized.layoutWidth=a-o,t.maximized.layoutHeight=r-u,t.maximized.layoutLeft=m,t.maximized.layoutTop=f,t.maximized.layoutMaximized=!1,t.setDimensions(t.width,t.height,!0),t.resizeDataFilterHeight(r-u),t.hideToolbar(1),t.clickLayoutShowDataFilter(e,!1,s,r-u,a-(t.width+o+3)),t.clickLayoutShowDataTable(e,(function(){i&&i(e)}),n-6,g,s)}};if(!e&&s)g();else{t.appLayout=!1,t.clickGraphMaxMin(e,!t.layoutGraphMaximize),g(),t.appLayout=!0}}else{var u=function(s){t.hideToolbar(1),t.hideTable(e,(function(){d.style.width=t.width+"px",d.style.height=t.height+"px",n.style.width=t.width+"px",o.style.width=t.width+"px"})),t.hideDataFilter(e,(function(){var a=function(){t.resizeWidthOnLayoutActive=!1,t.resizeHeightOnLayoutActive=!1,t.updateRemoteNavigationWindow((function(){i&&i(e)}))};s||(t.resizeWidthOnLayoutActive?t.resizeHeightOnLayoutActive?t.setDimensions(t.width+t.resizeWidthOnLayoutActive,t.height+t.resizeHeightOnLayoutActive,!0,!1,a):t.setDimensions(t.width+t.resizeWidthOnLayoutActive,t.height,!0,!1,a):t.resizeHeightOnLayoutActive&&t.setDimensions(t.width,t.height+t.resizeHeightOnLayoutActive,!0,!1,a))}))};t.maximized?(d.style.width=t.width+"px",d.style.height=t.height+"px",n.style.width=t.width+"px",o.style.width=t.width+"px",p.style.left="unset",p.style.top="unset",h.style.left="unset",l.style.top="unset",c.style.left="unset",c.style.top="unset",t.clickGraphMaxMin(e,!t.layoutGraphMaximize),u(!0)):u()}return!1}}(this),this.setCustomizerSize=function(){switch(this.customizerSize){case"small":this.customizerIcons=18,this.customizerItemHeight=44,this.customizerLeftWidth=80,this.customizerRightWidth=320,this.customizerLineHeight=12;break;case"medium":this.customizerIcons=24,this.customizerItemHeight=58,this.customizerLeftWidth=90,this.customizerRightWidth=330,this.customizerLineHeight=16;break;case"large":this.customizerIcons=36,this.customizerItemHeight=82,this.customizerLeftWidth=100,this.customizerRightWidth=350,this.customizerLineHeight=22}},this.setCustomizerGraphSize=function(t,e,i){var s=this.$("north-container-"+this.target),a=this.$("northest-container-"+this.target),r=this.$("middle-container-"+this.target),n=this.$("center-wrapper-"+this.target),o=this.$("west-container-"+this.target),h=this.$("west-wrapper-"+this.target),l=this.customizerLeftWidth+this.customizerRightWidth,c=(t-(this.width+l))/2,d=(e-this.height)/2;if(i)r.style.width="100%",r.style.height="100%",o.style.width=l+"px",o.style.height="100%",h.style.width=l+"px",h.style.height="100%";else{if(!this.maximized)return r.style.width="100%",r.style.height="100%",this.customizerGraphMaximize||(c<0&&(c=this.width>t?0:(t-this.width)/2),n.style.left=c+"px",n.style.top=d+"px",s.style.left=c+l+"px",s.style.top=d+"px",a.style.left=c+l+"px",a.style.top=d+"px"),o.style.width=l+"px",o.style.height="100%",h.style.width=l+"px",h.style.height="100%",[c,d];r.style.width=this.maximized.originalWidth+"px",r.style.height=this.maximized.originalHeight+"px",h.style.height=this.maximized.originalHeight+"px",n.style.left="unset",n.style.top="unset",s.style.left="unset",s.style.top="unset",a.style.left="unset",a.style.top="unset",o.style.width="0px",o.style.height=this.maximized.originalHeight+"px",h.style.width="0px",h.style.height=this.maximized.originalHeight+"px"}},this.clickDataCustomizer=function(t){return function(e){var i=window.innerWidth,s=window.innerHeight;if(t.setCustomizerSize(),e&&(t.appLayout||t.appLayoutDataTable||t.appLayoutDataFilter))t.appLayout?t.clickLayout(e,t.clickDataCustomizer):t.appLayoutDataTable?t.clickDataTable(e,t.clickDataCustomizer):t.appLayoutDataFilter&&t.clickDataFilters(e,t.clickDataCustomizer);else if(t.maximized&&!t.customizing)t.clickGraphMaxMin(e),t.clickDataCustomizer(e);else{var a=t.remoteService&&t.$(t.remoteParentId+"-canvasXpressRemoteWindow")?t.$(t.remoteParentId+"-canvasXpressRemoteWindow"):t.$("container-"+t.target),r=t.$(t.target+"-cX-Toolbar"),n=t.$(t.target+"-cX-ToolbarMaxMin"),o=t.$("northest-container-"+t.target),h=t.$("southest-container-"+t.target),l=t.$("west-container-"+t.target),c=t.$("east-container-"+t.target),d=window.document,p=t.customizerLeftWidth+t.customizerRightWidth,g=!1,u=0;if(t.remoteService&&t.$(t.remoteParentId+"-canvasXpressRemoteWindow")){var m=t.$(t.remoteParentId+"-canvasXpressRemoteWindowBarPrevDiv"),f=t.$(t.remoteParentId+"-canvasXpressRemoteWindowBarDiv"),y=t.$(t.remoteParentId+"-canvasXpressRemoteWindowBarNextDiv");m&&f&&y&&!t.maximized&&(g={rbp:{top:m.style.top},rbb:{top:f.style.top,left:f.style.left},rbn:{top:y.style.top,left:t.width+8+"px"}})}if(a&&(r&&n||this.isDOE)&&o&&h&&l&&c)if(t.moveCanvasXpressContainer(a),t.maximized)t.customizing=!1,"fixed"==t.toolbarType&&(r.style.top="-37px"),t.backgroundMask([t.maximized.maskWidth,t.maximized.maskHeight],!0),t.setCustomizerGraphSize(i,s),n&&(n.title="Maximize"),t.setDimensions(t.maximized.originalWidth,t.maximized.originalHeight,!1,!1,!1,-1),a.style.left=t.maximized.containerLeft,a.style.top=t.maximized.containerTop,d.documentElement.style.overflowX=t.maximized.docOverflowX,d.documentElement.style.overflowY=t.maximized.docOverflowY,m&&f&&y&&t.maximized.remote&&(g=t.maximized.remote,m.style.top=g.rbp.top,f.style.top=g.rbb.top,f.style.left=g.rbb.left,y.style.top=g.rbn.top,y.style.left=g.rbn.left),t.maximized=!1,t.resizeDataFilterHeight();else{t.customizing=!0,"fixed"==t.toolbarType&&(r.style.top="0px");var x=t.backgroundMask([i,s]),v=t.setCustomizerGraphSize(i,s);n&&(n.title="Minimize"),t.maximized={originalWidth:t.width,originalHeight:t.height,containerLeft:a.style.left,containerTop:a.style.top,docOverflowX:d.body.style.overflowX,docOverflowY:d.body.style.overflowY,remote:g,customizerWidth:i-(p+4),customizerHeight:s-4,customizerLeft:v[0],customizerTop:v[1],customizerMaximized:t.customizerGraphMaximize,maskWidth:x[0],maskHeight:x[1]},d.documentElement.style.overflowX="hidden",d.documentElement.style.overflowY="hidden",t.customizerGraphMaximize?t.setDimensions(i-(4+l.clientWidth+c.clientWidth),s-(4+o.clientHeight+h.clientHeight),!1,!1,!1,1):t.width+p>i?(p=0,u=Math.floor((t.width-(l.clientWidth+c.clientWidth))*t.height/t.width),t.setDimensions(Math.min(t.width,i)+p-(4+l.clientWidth+c.clientWidth),u-(4+o.clientHeight+h.clientHeight),!1,!1,!1,1)):t.setDimensions(t.width+p-(4+l.clientWidth+c.clientWidth),t.height-(4+o.clientHeight+h.clientHeight),!1,!1,!1,1),0==p&&this.setCustomizerGraphSize(!1,!1,!0),t.resizeDataFilterHeight(),t.hideToolbar(1),t.removeMenus(),t.addCustomizer()}}return!1}}(this),this.clickDataDetails=function(t){return function(e,i){e||(e=window.event),t.removeMenus();var s=window.document;s.body.scrollLeft,s.body.scrollTop;return t.showTooltipDiv(e,t.info,!1,{width:"auto",height:"auto",maxWidth:"500px",maxHeight:"500px",whiteSpace:"normal",overflow:"auto",textAlign:"left",opacity:0},20,20,!1,i||"holeIn"),!1}}(this),this.clickRepResearch=function(t){return function(e,i,s){e||(e=window.event),t.removeMenus();var a=window.document,r=(a.body.scrollLeft,a.body.scrollTop,"<code> "+('<pre class="CanvasXpressCodeContent">'+t.prettyColoredJSON(CanvasXpress.stack[t.target],null,!0)+"</pre>\n").replace(/\n/g,"</code>\n<code> ")+"</code>");return t.showTooltipDiv(e,r,!1,{width:"auto",height:"auto",width:"600px",height:"500px",whiteSpace:"normal",overflow:"auto",resize:"auto",textAlign:"left",opacity:0},20,20,!1,s||"holeIn"),!1}}(this),this.clickShowCode=function(t){return function(e,i,s){return e||(e=window.event),t.removeMenus(),t.showCodeDiv(e,s),!1}}(this),this.clickShowRCode=function(t){return function(e,i){return e||(e=window.event),t.removeMenus(),t.showRCodeDiv(e,i),!1}}(this),this.clickShowPythonCode=function(t){return function(e,i,s){return e||(e=window.event),t.removeMenus(),t.showPythonCodeDiv(e,i,s),!1}}(this),this.clickShowMetaCode=function(t){return function(e,i){return e||(e=window.event),t.removeMenus(),t.showMetaCodeDiv(e,i),!1}}(this),this.moveCanvasXpressContainer=function(t,e){if(t)if(this.maximized||e){(s=this.$(this.target+"-CanvasXpressAnchor"))&&(s.parentNode.insertBefore(t,s),s.parentNode.removeChild(s))}else{var i=window.document,s=this.$cX("div",{id:this.target+"-CanvasXpressAnchor"},{width:t.clientWidth+"px",height:t.clientHeight+"px",postion:"absolute"});t.parentNode.insertBefore(s,t),i.body.insertBefore(t,i.body.firstElementChild)}},this.clickGraphMaxMin=function(t){return function(e,i){if(t.appLayout||t.customizing||t.appLayoutDataTable||t.appLayoutDataFilter)if(t.appLayout){var s=t.$("east-container-"+t.target),a=t.$("north-container-"+t.target),r=t.$("north-wrapper-"+t.target),n=t.$("northest-container-"+t.target),o=t.$("center-wrapper-"+t.target),h=t.$("middle-container-"+t.target);t.maximized.layoutMaximized?(t.setDimensions(t.maximized.originalWidth,t.maximized.originalHeight,!0),s.style.left=Math.floor(t.maximized.layoutWidth/2)+"px",o.style.left=t.maximized.layoutLeft+"px",o.style.top=t.maximized.layoutTop+"px",a.style.left=t.maximized.layoutLeft+"px",r.style.top=t.maximized.layoutTop+"px",n.style.left=t.maximized.layoutLeft+"px",n.style.top=t.maximized.layoutTop+"px",h.style.width=window.innerWidth+"px",h.style.height=t.maximized.layoutHeight+"px"):(t.setDimensions(t.maximized.layoutWidth,t.maximized.layoutHeight,!0),s.style.left="0px",o.style.left="unset",o.style.top="unset",a.style.left="unset",r.style.top="unset",n.style.left="unset",n.style.top="unset"),t.maximized.layoutMaximized=!t.maximized.layoutMaximized}else if(t.customizing){a=t.$("north-container-"+t.target),n=t.$("northest-container-"+t.target),o=t.$("center-wrapper-"+t.target);var l=t.customizerLeftWidth+t.customizerRightWidth,c=t.$("west-container-"+t.target),d=t.$("west-wrapper-"+t.target);h=t.$("middle-container-"+t.target);t.maximized.customizerMaximized?(t.setDimensions(t.maximized.originalWidth,t.maximized.originalHeight,!0),o.style.left=t.maximized.customizerLeft+"px",o.style.top=t.maximized.customizerTop+"px",a.style.left=t.maximized.customizerLeft+l+"px",a.style.top=t.maximized.customizerTop+"px",n.style.left=t.maximized.customizerLeft+l+"px",n.style.top=t.maximized.customizerTop+"px",c.style.height=t.maximized.customizerHeight+"px",d.style.height=t.maximized.customizerHeight+"px",h.style.width="100%",h.style.height="100%"):(t.setDimensions(t.maximized.customizerWidth,t.maximized.customizerHeight,!0),o.style.left="1px",o.style.top="1px",a.style.left=l+1+"px",a.style.top="1px",n.style.left=l+1+"px",n.style.top="1px",h.style.width="100%",h.style.height="100%"),t.maximized.customizerMaximized=!t.maximized.customizerMaximized}else t.appLayoutDataTable?t.clickDataTable(e,t.clickGraphMaxMin):t.appLayoutDataFilter&&t.clickDataFilters(e,t.clickGraphMaxMin);else{var p=t.remoteService&&t.$(t.remoteParentId+"-canvasXpressRemoteWindow")?t.$(t.remoteParentId+"-canvasXpressRemoteWindow"):t.$("container-"+t.target),g=t.$(t.target+"-cX-Toolbar"),u=t.$(t.target+"-cX-ToolbarMaxMin"),m=(a=t.$("northest-container-"+t.target),t.$("southest-container-"+t.target)),f=window.innerWidth,y=window.innerHeight,x=window.document,v=!1;if(t.remoteService&&t.$(t.remoteParentId+"-canvasXpressRemoteWindow")){var b=t.$(t.remoteParentId+"-canvasXpressRemoteWindowBarPrevDiv"),A=t.$(t.remoteParentId+"-canvasXpressRemoteWindowBarDiv"),w=t.$(t.remoteParentId+"-canvasXpressRemoteWindowBarNextDiv");b&&A&&w&&!t.maximized&&(v={rbp:{top:b.style.top},rbb:{top:A.style.top,left:A.style.left},rbn:{top:w.style.top,left:t.width+8+"px"}})}if(p&&g&&u&&a&&m){if(t.moveCanvasXpressContainer(p),t.maximized)"fixed"==t.toolbarType&&(g.style.top="-37px"),t.backgroundMask([t.maximized.maskWidth,t.maximized.maskHeight],!0),u.title="Maximize",t.setDimensions(t.maximized.originalWidth,t.maximized.originalHeight,!1,!1,!1,-1),p.style.left=t.maximized.containerLeft,p.style.top=t.maximized.containerTop,x.documentElement.style.overflowX=t.maximized.docOverflowX,x.documentElement.style.overflowY=t.maximized.docOverflowY,b&&A&&w&&t.maximized.remote&&(v=t.maximized.remote,b.style.top=v.rbp.top,A.style.top=v.rbb.top,A.style.left=v.rbb.left,w.style.top=v.rbn.top,w.style.left=v.rbn.left),t.maximized=!1,t.resizeDataFilterHeight();else{"fixed"==t.toolbarType&&(g.style.top="0px");var C=t.backgroundMask([f,y]);u.title="Minimize",t.maximized={originalWidth:t.width,originalHeight:t.height,containerLeft:p.style.left,containerTop:p.style.top,docOverflowX:x.body.style.overflowX,docOverflowY:x.body.style.overflowY,remote:v,maskWidth:C[0],maskHeight:C[1]},x.documentElement.style.overflowX="hidden",x.documentElement.style.overflowY="hidden",i||t.setDimensions(f-4,y-(4+a.clientHeight+m.clientHeight),!1,!1,!1,1),t.resizeDataFilterHeight()}t.hideToolbar(1)}}return!1}}(this),this.setToolbarDisplay=function(){this.$(this.target+"-cX-Toolbar-Custom"),this.$(this.target+"-cX-ToolbarMenu");var t=this.$(this.target+"-cX-ToolbarSave"),e=this.$(this.target+"-cX-ToolbarReproduce"),i=this.$(this.target+"-cX-ToolbarMove"),s=this.$(this.target+"-cX-ToolbarView"),a=this.$(this.target+"-cX-ToolbarLayout"),r=(this.$(this.target+"-cX-ToolbarLasso"),this.$(this.target+"-cX-ToolbarDataCustomizer"));this.$(this.target+"-cX-ToolbarInformation"),this.$(this.target+"-cX-ToolbarMaxMin");this.customizing||this.appLayout?(t.style.display="none",e.style.display="none",i.style.display="none",s.style.display="none",a.style.display="none",r.style.display="none"):this.maximized?(i.style.display="none",a.style.display="none",r.style.display="none"):(t.style.display="block",e.style.display="block",i.style.display="block",s.style.display="block",this.isDOE||(a.style.display="block"),r.style.display="block")},this.showToolbar=function(t){if(!this.disableToolbar&&!this.dataTableMaximized){var e=this.$(this.target+"-cX-Toolbar");if(e||(e=this.initializeToolbar()),e){this.setToolbarDisplay();var i=this.$("west-container-"+this.target),s=this.$(this.target+"-cX-ToolbarMove"),a=this.$(this.target+"-cX-ToolbarReproduce");if(e&&0==parseInt(e.style.height)&&i&&s&&a)if(s.style.display=this.movable&&!this.maximized?"block":"none",a.style.display=this.meta.stack.length?"block":"none","fixed"==this.toolbarType)e.style.height="36px",e.style.top="-37px";else if(this.resizeMove(e,0,this.maximized?0:"over"==this.toolbarType?-37:0,this.width,36,250),t){var r=this;setTimeout((function(){r.hideToolbar(t)}),t)}}}},this.hideToolbar=function(t,e){if("fixed"!=this.toolbarType){var i=this.$(this.target+"-cX-Toolbar");i||(i=this.initializeToolbar());var s=this.$("west-container-"+this.target);if(i&&36==parseInt(i.style.height)&&s)this.resizeMove(i,0,0,this.width,0,500,e);else if(t&&i&&parseInt(i.style.height)>0){var a=this;setTimeout((function(){a.hideToolbar(t,e)}),t)}}},this.isToolbar=function(t){var e=this.adjustedCoordinates(t);if(e){var i=e.x,s=e.y;s>0&&s<36&&i>0&&i<this.width?this.showToolbar():s>36&&s<this.height&&i>0&&i<this.width&&"fixed"!=this.toolbarType&&this.hideToolbar()}},this.removeToolbar=function(){var t=this.$("north-wrapper-"+this.target),e=this.$(this.target+"-cX-Toolbar");t&&e&&(this.addRemoveToolbarListeners("removeEvtListener"),t.removeChild(e))},this.initializeToolbar=function(){if(!this.disableEvents&&!this.disableToolbar)return this.addToolbarDiv()}},CanvasXpress.prototype.initCodeInfo=function(){var t;this.addInfoCodeDiv=function(){var t=this.$(this.target+"-cX-Code");if(t)return t;t=this.$cX("div",{id:this.target+"-cX-Code",className:"CanvasXpressCode draggable"},{left:"25px",top:"-"+(this.height-25)+"px",display:"none"});var e=this.$cXI("op_cancel",{id:this.target+"-cX-CodeCloseImage",className:"CanvasXpressCode",src:"op_cancel",title:"Close Code"}),i=this.$cXI("cd_linesindent",{id:this.target+"-cX-CodePrettyImage",className:"CanvasXpressCode",src:"cd_linesindent",title:"Pretty Code"}),s=this.$cXI("cd_lines",{id:this.target+"-cX-CodeCompactImage",className:"CanvasXpressCode",src:"cd_lines",title:"Compact Code"}),a=this.$cXI("cd_params",{id:this.target+"-cX-CodeParamsImage",className:"CanvasXpressCode",src:"cd_params",title:"Params Code"}),r=this.$cXI("cd_select",{id:this.target+"-cX-CodeSelectImage",className:"CanvasXpressCode",src:"cd_select",title:"Select Code"}),n=this.$cX("div",{id:this.target+"-cX-CodeContainer",className:"CanvasXpressCodeContainer"}),o=this.$("north-wrapper-"+this.target),h=this.$("south-wrapper-"+this.target);return o&&o.appendChild(n),h&&(t.appendChild(e),t.appendChild(i),t.appendChild(s),t.appendChild(a),t.appendChild(r),t.appendChild(n),h.appendChild(t),this.addRemoveCodeListeners("addEvtListener")),t},this.addRemoveCodeListeners=function(t){this.addRemoveEvtListener(t,this.$(this.target+"-cX-Code"),"mousedown",this.registerMousemove,!1),this.addRemoveEvtListener(t,this.$(this.target+"-cX-CodeCloseImage"),"click",this.clickCode,!1),this.addRemoveEvtListener(t,this.$(this.target+"-cX-CodePrettyImage"),"click",this.clickChangeCode,!1),this.addRemoveEvtListener(t,this.$(this.target+"-cX-CodeCompactImage"),"click",this.clickChangeCode,!1),this.addRemoveEvtListener(t,this.$(this.target+"-cX-CodeParamsImage"),"click",this.clickChangeCode,!1),this.addRemoveEvtListener(t,this.$(this.target+"-cX-CodeSelectImage"),"click",this.clickSelectCode,!1)},this.clickCode=(t=this,function(e){return t.hideCodeDiv(e),!1}),this.clickChangeCode=function(t){return function(e){switch(t.getTargetEvent(e).id){case t.target+"-cX-CodePrettyImage":t.codeType="pretty";break;case t.target+"-cX-CodeCompactImage":t.codeType="compact";break;case t.target+"-cX-CodeParamsImage":t.codeType="params"}return t.updateCodeDiv(),!1}}(this),this.clickSelectCode=function(t){return function(e){var i,s=t.$(t.target+"-cX-CodeContent");return s&&(document.selection?((i=document.body.createTextRange()).moveToElementText(s),i.select()):window.getSelection()&&((i=document.createRange()).selectNode(s),window.getSelection().removeAllRanges(),window.getSelection().addRange(i))),!1}}(this),this.clearCodeDiv=function(){var t=this.$(this.target+"-cX-Code");t||(t=this.initializeCodeInfo());var e=this.$(this.target+"-cX-CodeContent");t&&e&&(e.parentNode.removeChild(e),t.style.display="none")},this.getDataJSON=function(t,e){var i={x:!0,y:!0,z:!0,venn:!0,nodes:!0,edges:!0,tracks:!0},s=CanvasXpress.stack[this.target].data,a={};for(var r in s)i.hasOwnProperty(r)&&(a[r]=this.cloneObject(s[r],!0));return a.y&&this.cleanDataObject(a),e?a:t?this.prettyJSON(a,null,!0):this.stringifyJSON(a)},this.cleanDataObject=function(t){if(t&&t.data){if(t.data&&t.data.y){for(var e=this.isRawData?["labs","glab","desc","mean","median","stdev","n","qtl1","qtl3","iqr","iqr1","iqr3","out","conf","trans","tstdev","cor","min","max","sum","count","grps","grpIdxs","factors"]:["labs","glab","desc","data"],i=0;i<e.length;i++)delete t.data.y[e[i]];var s=["l","w","sankey","tree","bubble","gantt","contour"];for(i=0;i<s.length;i++)delete t.data[s[i]]}return t}if(t&&"Map"==this.graphType)return t},this.getConfigJSON=function(t){return t?this.prettyJSON(this.getConfig(),null,!0):this.stringifyJSON(this.getConfig())},this.getEventsJSON=function(t){var e=CanvasXpress.stack[this.target].events||!1;return t?this.prettyJSON(e,null,!0):this.stringifyJSON(e)},this.getAfterRenderJSON=function(t){var e=this.cloneObject(CanvasXpress.stack[this.target].afterRender);return e.shift(),t&&e.length>0?this.prettyJSON(e,null,!0):e.length>1&&this.stringifyJSON(e)},this.getCodeJSONJS=function(t){var e=this.getDataJSON(t),i=this.getConfigJSON(t),s=this.getEventsJSON(t);return t?"<code> "+('<span class=json-value>new</span> CanvasXpress(<span class=json-string>"canvas"</span>, '+e+", "+i+", "+s+");").replace(/\n/g,"</code>\n<code> ")+"</code>":"  new CanvasXpress("+this.prettyJSON(CanvasXpress.stack[this.target],!1,!1,4).replace(/}$/,"  }")+");\n"},this.updateCodeDiv=function(t){var e=this.getDataJSON("pretty"==this.codeType),i="<code> "+('<span class=json-value>new</span> CanvasXpress(<span class=json-string>"canvasID"</span>, '+("params"==this.codeType?"{\n  ...\n}":e)+", "+this.getConfigJSON("pretty"==this.codeType||"params"==this.codeType)+", "+this.getEventsJSON(!0)+");").replace(/\n/g,"</code>\n<code> ")+"</code>",s=this.$(this.target+"-cX-Code");s||(s=this.initializeCodeInfo());var a=this.$(this.target+"-cX-CodeContainer");if(s&&a){this.clearCodeDiv();var r="compact"==this.codeType?"span":"pre";a.appendChild(this.$cX(r,{id:this.target+"-cX-CodeContent",className:"CanvasXpressCodeContent",innerHTML:i})),s.style.display="block",t&&(s.style.zIndex=t)}},this.updateInfoDiv=function(t){var e=this.$(this.target+"-cX-Info");e&&t&&(e.innerHTML=t)},this.showDiv=function(t,e,i){var s=this.$(this.target+"-cX-"+t);s||(s=this.initializeCodeInfo()),s&&(this.customizing&&(s.style.zIndex=1e4),s.style.opacity=1,s.style.display="block",this.transitionMagic(s,i||"swashIn"))},this.hideDiv=function(t,e,i){var s=this.$(this.target+"-cX-"+t);s||(s=this.initializeCodeInfo()),s&&this.transitionMagic(s,i||"holeOut",(function(){s.style.display="none"}))},this.showCodeDiv=function(t,e){this.updateCodeDiv(),this.removeMenus(),this.showDiv("Code",t,e)},this.showRCodeDiv=function(t,e){this.removeMenus();var i=this.$(this.target+"-cX-Code");i||(i=this.initializeCodeInfo());var s=this.$(this.target+"-cX-CodeContainer");i&&s&&(this.clearCodeDiv(),s.appendChild(this.$cX("pre",{id:this.target+"-cX-CodeContent",className:"CanvasXpressCodeContent",innerHTML:this.dataToR()})),this.$(this.target+"-cX-CodePrettyImage").style.display="none",this.$(this.target+"-cX-CodeCompactImage").style.display="none",this.$(this.target+"-cX-CodeParamsImage").style.display="none",this.showDiv("Code",t,e),"Map"==this.graphType&&(i.style.zIndex=1e3))},this.showPythonCodeDiv=function(t,e,i){this.removeMenus();var s=this.$(this.target+"-cX-Code");s||(s=this.initializeCodeInfo());var a=this.$(this.target+"-cX-CodeContainer");s&&a&&(this.clearCodeDiv(),a.appendChild(this.$cX("pre",{id:this.target+"-cX-CodeContent",className:"CanvasXpressCodeContent",innerHTML:this.dataToPython(i)})),this.$(this.target+"-cX-CodePrettyImage").style.display="none",this.$(this.target+"-cX-CodeCompactImage").style.display="none",this.$(this.target+"-cX-CodeParamsImage").style.display="none",this.showDiv("Code",t,e),"Map"==this.graphType&&(s.style.zIndex=1e3))},this.showMetaCodeDiv=function(t,e){this.removeMenus();var i=this.$(this.target+"-cX-Code");i||(i=this.initializeCodeInfo());var s=this.$(this.target+"-cX-CodeContainer");if(i&&s){var a={version:this.createVersion||this.version,factory:this.createFactory||CanvasXpress.factory};window.cX&&(a.license=window.cX),this.clearCodeDiv(),s.appendChild(this.$cX("pre",{id:this.target+"-cX-CodeContent",className:"CanvasXpressCodeContent",innerHTML:"<code> "+this.prettyJSON(a,null,!0).replace(/\n/g,"</code>\n<code> ")+"</code>"})),this.$(this.target+"-cX-CodePrettyImage").style.display="none",this.$(this.target+"-cX-CodeCompactImage").style.display="none",this.$(this.target+"-cX-CodeParamsImage").style.display="none",this.showDiv("Code",t,e),"Map"==this.graphType&&(i.style.zIndex=1e3)}},this.hideCodeDiv=function(t,e){(this.$(this.target+"-cX-CodePrettyImage").style.display="block",this.$(this.target+"-cX-CodeCompactImage").style.display="block",this.$(this.target+"-cX-CodeParamsImage").style.display="block","Map"==this.graphType)&&delete this.$(this.target+"-cX-Code").style.zIndex;this.hideDiv("Code",t,e)},this.showInfoDiv=function(t,e){this.removeMenus(),this.showDiv("Info",t,e)},this.hideInfoDiv=function(t,e){this.hideDiv("Info",t,e)},this.initializeCodeInfo=function(){if(!this.disableEvents&&!this.disableCode)return this.addInfoCodeDiv()}},CanvasXpress.prototype.initBin=function(){var t;this.addBinConfigurator=function(t,e){this.removeMenus();var i=this.target+"-"+t+"-cX-Bin",s=this.range(this.data.y.data[t]),a=(s[1]-s[0])/e,r=this.getNumberDecimals(s[0])+1;this.binConfigurations[i]={},this.binConfigurations[i].apply=!1,this.binConfigurations[i].n=e,this.binConfigurations[i].vi=t,this.binConfigurations[i].min=s[0],this.binConfigurations[i].max=s[1],this.binConfigurations[i].dec=r,this.binConfigurations[i].name="Custom-"+this.data.y.vars[t]+"-Bin",this.binConfigurations[i].bins=[];for(var n=0;n<e;n++)this.binConfigurations[i].bins[n]={name:"Bin-"+(n+1),value:Number(s[0]+(n+1)*a)};var o=this.$cX("div",{id:i,className:"CanvasXpressBin draggable"},{left:"30px",top:-(this.height-30)+"px",display:"block"}),h=this.$cXI("op_cancel",{id:i+"CloseImage",className:"CanvasXpressBin",src:"op_cancel",title:"Close Bin Configurator"}),l=this.$cX("div",{id:i+"Container",className:"CanvasXpressBinContainer"}),c=this.$cX("input",{id:i+"Name",className:"CanvasXpressBin",type:"text",value:"Custom-"+this.data.y.vars[t]+"-Bin"},{width:"97%"}),d=this.$cX("div",{id:i+"NameSegmentContainer",className:"CanvasXpressBinNameContainer"}),p=this.$cX("table",{id:i+"NameSegment",className:"CanvasXpressBinTable"},{width:"100%"}),g=this.$cX("tbody"),u=this.$cX("th",{innerHTML:"Bin"},{textAlign:"center"}),m=this.$cX("th",{innerHTML:"Name"},{textAlign:"center"}),f=this.$cX("th",{innerHTML:"Max"},{textAlign:"center"});(v=this.$cX("tr")).appendChild(u),v.appendChild(m),v.appendChild(f),g.appendChild(v);for(n=0;n<e;n++){u=this.$cX("td",{innerHTML:n+1},{width:.1*this.configuratorWidth+"px",textAlign:"center",fontWeight:"bold"}),m=this.$cX("td"),f=this.$cX("td");var y=this.$cX("input",{id:i+"Name"+n,className:"CanvasXpressBin",type:"text",value:"Bin-"+(n+1)},{width:.65*this.configuratorWidth+"px",textAlign:"center",fontWeight:"bold"}),x=this.$cX("input",{id:i+"Value"+n,className:"CanvasXpressBin",type:"text",value:this.formatNumber(s[0]+(n+1)*a,r)},{width:.25*this.configuratorWidth+"px"}),v=this.$cX("tr");f.appendChild(x),m.appendChild(y),v.appendChild(u),v.appendChild(m),v.appendChild(f),g.appendChild(v)}p.appendChild(g),d.appendChild(p);var b=this.$cX("input",{id:i+"Apply",value:"Apply",type:"button"},{cssFloat:"left",borderRadius:"5px",top:"4px",position:"relative",width:"46%",padding:"3px",margin:"5px"}),A=this.$cX("input",{id:i+"Button",value:"Done",type:"button"},{cssFloat:"left",borderRadius:"5px",top:"4px",position:"relative",width:"46%",padding:"3px",margin:"5px"}),w=this.$("south-wrapper-"+this.target);w&&(l.appendChild(this.$cX("span",{className:"CanvasXpressBin",innerHTML:"Edit Name"})),l.appendChild(this.$cX("br")),l.appendChild(c),l.appendChild(this.$cX("br")),l.appendChild(this.$cX("br")),l.appendChild(this.$cX("span",{className:"CanvasXpressBin",innerHTML:"Edit Bin Name and Range"})),l.appendChild(this.$cX("br")),l.appendChild(d),l.appendChild(b),l.appendChild(A),l.appendChild(this.$cX("br")),o.appendChild(h),o.appendChild(l),w.appendChild(o),this.addRemoveBinListeners("addEvtListener",i))},this.addRemoveBinListeners=function(t,e){for(var i=e?[e]:this.getKeys(this.binConfigurations),s=0;s<i.length;s++)this.addRemoveEvtListener(t,this.$(i[s]),"mousedown",this.registerMousemove,!1),this.addRemoveEvtListener(t,this.$(i[s]+"CloseImage"),"click",this.closeBinConfigurator,!1),this.addRemoveEvtListener(t,this.$(i[s]+"Apply"),"click",this.applyBinConfigurator,!1),this.addRemoveEvtListener(t,this.$(i[s]+"Button"),"click",this.doneBinConfigurator,!1),"removeEvtListener"==t&&this.binConfigurations[i[s]]&&!this.binConfigurations[i[s]].apply&&delete this.binConfigurations[i[s]]},this.closeBinConfigurator=(t=this,function(e){var i=t.getTargetEvent(e).id.replace("CloseImage",""),s=t.$(i);return s&&(t.addRemoveBinListeners("removeEvtListener",i),s.parentNode.removeChild(s)),!1}),this.validateBinning=function(t){for(var e=!1,i=this.$(t+"Name0").value,s=this.$(t+"Value0").value,a=1;a<this.binConfigurations[t].n;a++){var r=this.$(t+"Name"+a).value,n=this.$(t+"Value"+a).value;if(""==i||null==i){e="Value for Bin "+a+" CANNOT be null";break}if(""==r||null==r){e="Value for Bin "+(a+1)+" CANNOT be null";break}if(""==s||null==s){e="Value for "+i+" ("+s+") CANNOT be null";break}if(""==n||null==n){e="Value for "+r+" ("+n+") CANNOT be null";break}if(isNaN(s)){e="Value for "+i+" ("+s+") is NOT a number";break}if(isNaN(n)){e="Value for "+r+" ("+n+") is NOT a number";break}if(s>n){e="Value for "+i+" ("+s+")CANNOT be greater that value for "+r+" ("+n+")";break}i=r,s=n}if(e)return alert(e),!1;for(a=0;a<this.binConfigurations[t].n;a++){var o=this.$(t+"Name"+a).value,h=this.$(t+"Value"+a).value;this.binConfigurations[t].bins[a]={name:o,value:h}}var l=this.binConfigurations[t].name,c=this.binConfigurations[t].vi;this.data.x[l]=[];for(a=0;a<this.data.y.data[c].length;a++){h=this.data.y.data[c][a];if(isNaN(h)||""===h||null==h)this.data.x[l][a]="";else for(var d=0;d<this.binConfigurations[t].n;d++)if(h<=this.binConfigurations[t].bins[d].value){this.data.x[l][a]=this.binConfigurations[t].bins[d].name;break}}return this.isGroupedData&&this.ungroupSamples(!0),this.updateData(this.data),this.groupSamples([l]),this.sortSamplesByCategory([l]),this.binConfigurations[t].apply=!0,!0},this.applyBinConfigurator=function(t){return function(e){var i=t.getTargetEvent(e).id.replace("Apply","");t.validateBinning(i)}}(this),this.doneBinConfigurator=function(t){return function(e){var i=t.getTargetEvent(e).id.replace("Button",""),s=t.validateBinning(i),a=t.$(i);return a&&s&&(t.addRemoveBinListeners("removeEvtListener",i),a.parentNode.removeChild(a)),!1}}(this)},CanvasXpress.prototype.initCustomizer=function(){var t;this.addCustomizer=function(){var t=this,e=this.target+"-cX-Customizer";if(!this.$(e)){var i=this.$("west-wrapper-"+this.target);if(i){i.style.width=this.customizerLeftWidth+this.customizerRightWidth+"px";var s=this.$cX("div",{id:e+"-Left-Panel",className:"CanvasXpressCustomizerLeftPanel"},{width:this.customizerLeftWidth-1+"px",height:"100%",position:"sticky",zIndex:2}),a=this.$cX("div",{id:e+"-Left-Panel-Top",className:"CanvasXpressCustomizerContainer"},{height:Math.floor(1.25*this.customizerItemHeight)+"px",margin:"auto",display:"grid"}),r=this.$cX("div",{id:e+"-Left-Panel-Center",className:"CanvasXpressCustomizerContainer"},{height:Math.floor(this.customizerItemHeight*(this.isDOE?2:10))+"px",margin:"auto",display:"grid"}),n=this.$cX("div",{id:e+"-Left-Panel-Bottom",className:"CanvasXpressCustomizerContainer"},{height:Math.floor(1.25*this.customizerItemHeight)+"px",margin:"auto",display:"grid"}),o=this.$cX("div",{id:e+"-Right-Panel",className:"CanvasXpressCustomizerRightPanel"},{width:this.customizerRightWidth-1+"px",height:this.height+"px",left:this.customizerLeftWidth+"px",position:"absolute",zIndex:1});a.appendChild(this.addCustomizerLeftItem("&nbsp;&nbsp;&nbsp;Close","op_cancel","closeCustomizer")),this.isDOE?(r.appendChild(this.addCustomizerLeftItem("&nbsp;&nbsp;&nbsp;&nbsp;File","cd_folder","fileCustomizer")),r.appendChild(this.addCustomizerLeftItem("&nbsp;&nbsp;&nbsp;&nbsp;DOE","ly_doe","doeCustomizer"))):(r.appendChild(this.addCustomizerLeftItem("&nbsp;&nbsp;&nbsp;&nbsp;File","cd_folder","fileCustomizer")),r.appendChild(this.addCustomizerLeftItem("&nbsp;&nbsp;&nbsp;Data","wp_data","dataCustomizer")),r.appendChild(this.addCustomizerLeftItem("&nbsp;Options","wp_configuration","optionsCustomizer")),r.appendChild(this.addCustomizerLeftItem("&nbsp;&nbsp;&nbsp;&nbsp;Plot",this.graphType.match(/Scatter/)?"g_scatter2d":"g_bar","plotCustomizer")),r.appendChild(this.addCustomizerLeftItem("&nbsp;&nbsp;&nbsp;Axes","ga_axisxy","axesCustomizer")),r.appendChild(this.addCustomizerLeftItem("&nbsp;Legends","lg_g1","legendCustomizer")),r.appendChild(this.addCustomizerLeftItem("&nbsp;&nbsp;&nbsp;Meta","at_colshpsze","metaCustomizer")),r.appendChild(this.addCustomizerLeftItem("Wrangling","wp_datawrangling","wranglingCustomizer")),r.appendChild(this.addCustomizerLeftItem("&nbsp;&nbsp;&nbsp;Tools","wp_installation","toolsCustomizer")),r.appendChild(this.addCustomizerLeftItem("&nbsp;Theme","at_sch","themeCustomizer"))),n.appendChild(this.addCustomizerLeftItem("&nbsp;&nbsp;Search","z_zoom","searchCustomizer")),s.appendChild(a),s.appendChild(r),s.appendChild(n),i.appendChild(s),i.appendChild(o),this.transitionMagic(i,this.customizerEffectIn,(function(){t.addRemoveCustomizerListenersLeftPanel("addEvtListener"),t.transitionMagicCustomizer(t.$(t.target+"-cX-Customizer-Right-Panel"),t.fileCustomizer)}),500)}}},this.addCustomizerLeftItem=function(t,e,i){var s=this.newId("-cX-Customizer-Item-"),a=t.replace(/&nbsp;/g,""),r=this.customizerIcons>24?.55:this.customizerIcons>18?.5:.42,n=this.$cX("a",{id:s+"-A",className:"CanvasXpressCustomizerLeft",hidefocus:"true",unselectable:"on",href:"#",draggable:!1,itemFunc:i,itemId:a,draggable:!1},{width:this.customizerLeftWidth-3+"px"}),o=this.$cXI(e&&CanvasXpress.icons.use.hasOwnProperty(e)?e:CanvasXpress.png,{id:s+"-I",className:"CanvasXpressCustomizerLeft",src:e,key:e},{left:Math.floor(.4*(this.customizerLeftWidth-this.customizerIcons))+"px",top:Math.floor(.1*this.customizerItemHeight)+"px"},!1,this.customizerIcons),h=this.$cX("span",{id:s+"-S",className:"CanvasXpressCustomizerLeft",innerHTML:t||"",draggable:!1},{left:Math.floor(this.customizerIcons/4)+"px",top:Math.floor(this.customizerItemHeight*r)+"px"});return this.customizerItem||"Close"==n.itemId||(this.customizerItem=s+"-A",n.className="CanvasXpressCustomizerLeftActive"),n.appendChild(o),n.appendChild(h),n},this.addRemoveCustomizerListenersLeftPanel=function(t){var e=this.$(this.target+"-cX-Customizer-Left-Panel");if(e)for(var i=0;i<e.childNodes.length;i++)for(var s=0;s<e.childNodes[i].childNodes.length;s++){var a=e.childNodes[i].childNodes[s];this.addRemoveEvtListener(t,a,"mouseover",this.mouseoverCustomizerLeftItem,!1),this.addRemoveEvtListener(t,a,"mouseout",this.mouseoutCustomizerLeftItem,!1),this.addRemoveEvtListener(t,a,"click",this.clickCustomizerLeftItem,!1)}},this.mouseoverCustomizerLeftItem=(t=this,function(e){var i=t.getTargetEvent(e);return i&&("A"!=i.tagName.toUpperCase()&&(i=i.parentNode),"A"==i.tagName.toUpperCase()&&(i.className="CanvasXpressCustomizerLeftActive")),!1}),this.mouseoutCustomizerLeftItem=function(t){return function(e){var i=t.getTargetEvent(e);return i&&("A"!=i.tagName.toUpperCase()&&(i=i.parentNode),"A"==i.tagName.toUpperCase()&&i.id!=t.customizerItem&&(i.className="CanvasXpressCustomizerLeft")),!1}}(this),this.clickCustomizerLeftItem=function(t){return function(e){var i=t.getTargetEvent(e);if(i&&("A"!=i.tagName.toUpperCase()&&(i=i.parentNode),"A"==i.tagName.toUpperCase())){var s=t.$(t.customizerItem);s&&(s.className="CanvasXpressCustomizerLeft"),t.addRemoveCustomizerListenersRightPanel("removeEvtListener"),i.className="CanvasXpressCustomizerLeftActive",t.customizerItem=i.id,t.customizerItemActive=i.itemId,t.transitionMagicCustomizer(t.$(t.target+"-cX-Customizer-Right-Panel"),t[i.itemFunc])}return!1}}(this),this.addRemoveCustomizerListenersRightPanel=function(t){var e=this.$(this.target+"-cX-Customizer-Right-Panel");if(e)for(var i=0;i<e.childNodes.length;i++){var s=e.childNodes[i],a=!1,r=!1;if("DIV"==s.tagName.toUpperCase()){if(s.id.match(/SearchCustomizer$/)){var n=this.$(this.target+"-SearchCustomizerSelect"),o=this.$(this.target+"-SearchCustomizerCategory"),h=this.$(this.target+"-SearchCustomizerButton"),l=this.$(this.target+"-SearchCustomizerInputCancel");n&&o&&h&&l&&(this.addRemoveEvtListener(t,n,"change",this.updateCustomizerPropertyValue,!1),this.addRemoveEvtListener(t,o,"click",this.clickCustomizerCategory,!1),this.addRemoveEvtListener(t,h,"click",this.clickCustomizerSearch,!1),this.addRemoveEvtListener(t,l,"click",this.clickCustomizerCancel,!1))}if(s.childNodes.length)if("A"==s.childNodes[0].tagName.toUpperCase())this.addRemoveEvtListener(t,s,"mouseover",this.mouseoverDivCustomizer,!1),this.addRemoveEvtListener(t,s,"mouseout",this.mouseoutDivCustomizer,!1),this.addRemoveEvtListener(t,s.childNodes[0],"click",this.clickCustomizer,!1);else if("DIV"==s.childNodes[0].tagName.toUpperCase())if(this.hasClass(s.childNodes[0],"CanvasXpressCustomizerHeader")){if(s.childNodes[1]&&"DIV"==s.childNodes[1].tagName.toUpperCase()&&""==s.childNodes[1].className)a=!0;else if(s.childNodes[0].childNodes.length&&s.childNodes[0].childNodes[1]&&"SVG"==s.childNodes[0].childNodes[1].tagName.toUpperCase())s.childNodes[0].childNodes[1].getAttribute("params")&&(this.addRemoveEvtListener(t,s.childNodes[0].childNodes[1],"click",this.clickCustomizer,!1),r=!0);if(s.childNodes[1]&&"DIV"==s.childNodes[1].tagName.toUpperCase()&&this.hasClass(s.childNodes[1],"CanvasXpressDataCustomizerPanel")){for(var c=[1,4],d=0;d<c.length;d++){"SVG"==(f=s.childNodes[1].childNodes[c[d]]).tagName.toUpperCase()&&this.addRemoveEvtListener(t,f,"click",this.clickCustomizer,!1)}c=[2,5];for(d=0;d<c.length;d++){var p=s.childNodes[1].childNodes[c[d]].childNodes[0];if("DIV"==p.tagName.toUpperCase()){this.addRemoveEvtListener(t,p.parentNode,"scroll",this.scrollCustomizer,!1),this.addRemoveEvtListener(t,p,"drop",this.dropCustomizer,!1),this.addRemoveEvtListener(t,p,"dragover",this.dragOverCustomizer,!1),this.addRemoveEvtListener(t,p,"dragenter",this.dragEnterCustomizer,!1),this.addRemoveEvtListener(t,p,"dragleave",this.dragLeaveCustomizer,!1);for(var g=0;g<p.childNodes.length;g++){"SPAN"==(y=p.childNodes[g]).tagName.toUpperCase()&&(this.addRemoveEvtListener(t,y,"dragstart",this.dragStartCustomizer,!1),this.addRemoveEvtListener(t,y,"dragend",this.dragEndCustomizer,!1),this.addRemoveEvtListener(t,y,"dblclick",this.dblClickCustomizer,!1),this.addRemoveEvtListener(t,y,"mouseover",this.mouseoverSpanCustomizer,!1),this.addRemoveEvtListener(t,y,"mouseout",this.mouseoutSpanCustomizer,!1))}}}}else if(!s.childNodes[1]&&this.hasClass(s,"CanvasXpressCustomizerContainer")&&s.childNodes[0].childNodes.length&&s.childNodes[0].childNodes[3]&&"DIV"==s.childNodes[0].childNodes[3].tagName.toUpperCase()){var u=s.childNodes[0].childNodes[3];for(d=0;d<u.childNodes.length;d++){var m=u.childNodes[d];this.addRemoveEvtListener(t,m,"click",this.clickCustomizerUpdateText,!1)}}else if(s.childNodes[1]&&"DIV"==s.childNodes[1].tagName.toUpperCase()&&this.hasClass(s.childNodes[1],"CanvasXpressCustomizerContainer")||a){if(s.childNodes[0].childNodes.length&&s.childNodes[0].childNodes[3]&&"DIV"==s.childNodes[0].childNodes[3].tagName.toUpperCase())for(u=s.childNodes[0].childNodes[3],d=0;d<u.childNodes.length;d++){(m=u.childNodes[d]).innerHTML.match(/Grid$/)?this.addRemoveEvtListener(t,m,"click",this.clickCustomizerUpdateGrid,!1):this.addRemoveEvtListener(t,m,"click",this.clickCustomizerUpdateText,!1)}if((l=s.childNodes[1]).childNodes.length&&l.childNodes[2]&&"INPUT"==l.childNodes[2].tagName.toUpperCase()&&"COLOR"==l.childNodes[2].type.toUpperCase())this.addRemoveEvtListener(t,l.childNodes[2],"change",this.changeCustomizer,!1);else if(l.childNodes.length&&l.childNodes[3]&&"INPUT"==l.childNodes[3].tagName.toUpperCase()&&"COLOR"==l.childNodes[3].type.toUpperCase())this.addRemoveEvtListener(t,l.childNodes[3],"change",this.changeCustomizer,!1);else for(d=0;d<l.childNodes.length;d++){var f;if("SPAN"!=(m=l.childNodes[d]).tagName.toUpperCase())if(m.childNodes.length&&m.childNodes[0]&&"INPUT"==m.childNodes[0].tagName.toUpperCase()&&"COLOR"==m.childNodes[0].type.toUpperCase())this.addRemoveEvtListener(t,m.childNodes[0],"change",this.changeCustomizer,!1),"INPUT"==m.childNodes[1].tagName.toUpperCase()&&"COLOR"==m.childNodes[1].type.toUpperCase()&&this.addRemoveEvtListener(t,m.childNodes[1],"change",this.changeCustomizer,!1);else if("SVG"==m.tagName.toUpperCase()&&(m.id.match(/THEME$/)?this.addRemoveEvtListener(t,m,"click",this.clickThemeCustomizerProperty,!1):this.addRemoveEvtListener(t,m,"click",this.clickCustomizer,!1)),"SVG"==m.tagName.toUpperCase()&&m.nextElementSibling&&"SVG"!=m.nextElementSibling.tagName.toUpperCase()&&m.nextElementSibling&&"DIV"!=m.nextElementSibling.tagName.toUpperCase())(f=m.getAttribute("params"))&&this.addRemoveEvtListener(t,m,"click",this.clickCustomizer,!1);else if(m.childNodes.length&&m.childNodes[0]&&"SVG"==m.childNodes[0].tagName.toUpperCase()&&m.childNodes[1]&&"INPUT"==m.childNodes[1].tagName.toUpperCase()&&m.childNodes[2]&&"SVG"==m.childNodes[2].tagName.toUpperCase())this.addRemoveEvtListener(t,m.childNodes[0],"click",this.clickCustomizer,!1),this.addRemoveEvtListener(t,m.childNodes[2],"click",this.clickCustomizer,!1);else if(m.childNodes.length&&m.childNodes[0]&&"SVG"==m.childNodes[0].tagName.toUpperCase())a&&m.childNodes[1]&&"SVG"==m.childNodes[1].tagName.toUpperCase()?this.addRemoveEvtListener(t,m.childNodes[1],"click",this.clickCustomizer,!1):this.addRemoveEvtListener(t,m,"click",this.clickCustomizer,!1),"true"==m.childNodes[0].getAttribute("drop")&&(this.addRemoveEvtListener(t,m,"drop",this.dropCustomizer,!1),this.addRemoveEvtListener(t,m,"dragover",this.dragOverCustomizer,!1),this.addRemoveEvtListener(t,m,"dragenter",this.dragEnterCustomizer,!1),this.addRemoveEvtListener(t,m,"dragleave",this.dragLeaveCustomizer,!1));else if("DIV"==m.tagName.toUpperCase())if(m.childNodes.length&&"DIV"==m.childNodes[0].tagName.toUpperCase())for(g=0;g<m.childNodes[0].childNodes.length;g++){"SPAN"==(y=m.childNodes[0].childNodes[g]).tagName.toUpperCase()&&(this.addRemoveEvtListener(t,y,"dragstart",this.dragStartCustomizer,!1),this.addRemoveEvtListener(t,y,"dragend",this.dragEndCustomizer,!1),this.addRemoveEvtListener(t,y,"dblclick",this.dblClickCustomizer,!1),this.addRemoveEvtListener(t,y,"mouseover",this.mouseoverSpanCustomizer,!1),this.addRemoveEvtListener(t,y,"mouseout",this.mouseoutSpanCustomizer,!1))}else m.childNodes.length&&"TEXTAREA"==m.childNodes[0].tagName.toUpperCase()&&this.addRemoveEvtListener(t,m.lastChild,"click",this.clickCustomizerText,!1)}}else{if(r){if((l=s.childNodes[1]).childNodes.length&&"DIV"==l.childNodes[0].tagName.toUpperCase()){this.addRemoveEvtListener(t,l,"scroll",this.scrollCustomizer,!1);for(d=0;d<l.childNodes[0].childNodes.length;d++){var y;"SPAN"==(y=l.childNodes[0].childNodes[d]).tagName.toUpperCase()&&(this.addRemoveEvtListener(t,y,"dragstart",this.dragStartCustomizer,!1),this.addRemoveEvtListener(t,y,"dragend",this.dragEndCustomizer,!1),this.addRemoveEvtListener(t,y,"dblclick",this.dblClickCustomizer,!1),this.addRemoveEvtListener(t,y,"mouseover",this.mouseoverSpanCustomizer,!1),this.addRemoveEvtListener(t,y,"mouseout",this.mouseoutSpanCustomizer,!1))}}}else if(s.childNodes.length>1&&"A"==s.childNodes[1].tagName.toUpperCase())for(d=1;d<s.childNodes.length;d++){var m=s.childNodes[d];this.addRemoveEvtListener(t,m,"mouseover",this.mouseoverACustomizer,!1),this.addRemoveEvtListener(t,m,"mouseout",this.mouseoutACustomizer,!1),this.addRemoveEvtListener(t,m,"click",this.clickCustomizer,!1),m.childNodes&&m.childNodes[2]&&"INPUT"==m.childNodes[2].tagName.toUpperCase()&&"file"==m.childNodes[2].type&&this.addRemoveEvtListener(t,m.childNodes[2],"change",this.loadFileCustomizer,!1)}else if(s.childNodes[1]&&"DIV"==s.childNodes[1].tagName.toUpperCase()&&this.hasClass(s.childNodes[1],"CanvasXpressCustomizerRightContainer"))(m=s.childNodes[1]).childNodes.length&&m.childNodes[0]&&"SVG"==m.childNodes[0].tagName.toUpperCase()&&m.childNodes[1]&&"INPUT"==m.childNodes[1].tagName.toUpperCase()&&m.childNodes[2]&&"SVG"==m.childNodes[2].tagName.toUpperCase()&&(this.addRemoveEvtListener(t,m.childNodes[0],"click",this.clickCustomizer,!1),this.addRemoveEvtListener(t,m.childNodes[2],"click",this.clickCustomizer,!1));else if("DIV"==s.childNodes[0].tagName.toUpperCase()&&s.id.match(/Panel$/))for(m=s.childNodes[0],d=0;d<m.childNodes.length;d++)this.addRemoveEvtListener(t,m.childNodes[d],"click",this.clickCustomizerPanel,!1)}}else if(this.addRemoveEvtListener(t,s,"mouseover",this.mouseoverDivCustomizer,!1),this.addRemoveEvtListener(t,s,"mouseout",this.mouseoutDivCustomizer,!1),s.childNodes[0].childNodes.length&&s.childNodes[0].childNodes[2]&&"SELECT"==s.childNodes[0].childNodes[2].tagName.toUpperCase()){n=s.childNodes[0].childNodes[2];this.addRemoveEvtListener(t,n,"change",this.changeCustomizer,!1)}else s.childNodes[0].childNodes.length&&s.childNodes[0].childNodes[2]&&"INPUT"==s.childNodes[0].childNodes[2].tagName.toUpperCase()&&s.childNodes[0].childNodes[3]&&"SVG"==s.childNodes[0].childNodes[3].tagName.toUpperCase()?this.addRemoveEvtListener(t,s.childNodes[0].childNodes[3],"click",this.clickCustomizer,!1):s.childNodes[0].childNodes.length&&s.childNodes[0].childNodes[2]&&"INPUT"==s.childNodes[0].childNodes[2].tagName.toUpperCase()&&"COLOR"==s.childNodes[0].childNodes[2].type.toUpperCase()?this.addRemoveEvtListener(t,s.childNodes[0].childNodes[2],"change",this.changeCustomizer,!1):s.childNodes[0].childNodes.length&&s.childNodes[0].childNodes[3]&&"INPUT"==s.childNodes[0].childNodes[3].tagName.toUpperCase()&&"COLOR"==s.childNodes[0].childNodes[3].type.toUpperCase()&&this.addRemoveEvtListener(t,s.childNodes[0].childNodes[3],"change",this.changeCustomizer,!1)}}},this.addRemoveCustomizerListeners=function(t){this.addRemoveCustomizerListenersLeftPanel(t),this.addRemoveCustomizerListenersRightPanel(t)},this.getCustomizerDivDiv=function(t,e,i){return this.$cX("div",{id:t+"-"+e+"-D",className:"CanvasXpressCustomizerRightContainer",hidefocus:"true",unselectable:"on",href:"#",draggable:!1},{width:i+"px",height:this.customizerItemHeight+8+"px",cssFloat:"left"})},this.getCustomizerDivIcon=function(t,e,i,s,a,r,n,o){return this.$cXI(i,{id:t+"-"+e+"-I",className:"CanvasXpressCustomizerRight",src:i,key:i,params:this.stringifyJSON(s),drop:o,title:a},{left:Math.floor(r/2-n/2)+"px",top:Math.floor(.15*this.customizerItemHeight)+"px"},!1,n)},this.getCustomizerDivSpan=function(t,e,i,s,a){return this.$cX("span",{id:t+"-"+e+"-S",className:"CanvasXpressCustomizerRight",innerHTML:i||"",draggable:!1},{left:Math.floor(a/2-(s||0))+"px",top:Math.floor(.3*this.customizerItemHeight)+"px",display:"grid",lineHeight:this.customizerLineHeight+"px"})},this.getCustomizerDiv=function(t,e,i,s,a,r,n,o,h,l){var c=Math.floor(this.customizerRightWidth/o)-10,d=this.getCustomizerDivDiv(t,e,c),p=this.getCustomizerDivIcon(t,e,i,a,r,c,h,l),g=this.getCustomizerDivSpan(t,e,s,n,c);return d.appendChild(p),d.appendChild(g),d},this.getCustomizerDivRaw=function(){var t=this.newId("-cX-Customizer-Container-");return this.$cX("div",{id:t,className:"CanvasXpressCustomizerContainer"},{width:this.customizerRightWidth-2+"px",position:"relative",height:"fit-content",border:0,cssFloat:"left"})},this.addCustomizerHeader=function(t,e,i,s,a,r){t||(t=this.newId("-cX-Customizer-Container-")),e||(e=""),a||(a=0),r||(r=220);var n=e.replace(/\s/g,""),o=i&&CanvasXpress.icons.use.hasOwnProperty(i)?i:CanvasXpress.png,h=.3*this.customizerItemHeight,l=this.customizerIcons>24?"28px":this.customizerIcons>18?"16px":"9px",c=this.$cX("div",{id:t+"-"+n+"-HC",className:"CanvasXpressCustomizerHeader",hidefocus:"true",unselectable:"on",href:"#",draggable:!1},{height:this.customizerItemHeight+"px"}),d=this.$cX("span",{id:t+"-"+n+"-HS",className:"CanvasXpressCustomizerHeader",innerHTML:e||"",draggable:!1},{left:"12px",top:l}),p=this.$cXI(o,{id:t+"-"+n+"-HI",className:"CanvasXpressCustomizerHeader",src:o,key:o,title:"click on items below to run command"},{left:"22px",top:h+"px"},!1,this.customizerIcons),g=this.$cX("span",{id:t+"_"+n+"-HT",className:"CanvasXpressCustomizerHeaderHelp",innerHTML:s,draggable:!1},{left:"32px",top:this.customizerItemHeight/2-(a+6)+"px",width:r+"px"});return c.appendChild(d),c.appendChild(p),c.appendChild(g),c},this.addCustomizerArrayHeader=function(t,e,i,s,a,r,n,o,h,l,c){t||(t=this.newId("-cX-Customizer-Container-")),e||(e=[""]),i||(i=[CanvasXpress.png]),r||(r=""),o||(o=0),h||(h=220),n||(n=t);var d=e[0].replace(/\s/g,""),p=i[0]&&CanvasXpress.icons.use.hasOwnProperty(i[0])?i[0]:CanvasXpress.png,g=this.customizerIcons>24?15:this.customizerIcons>18?8:3,u=this.$cX("div",{id:t+"-"+d+"-HC",className:"CanvasXpressCustomizerHeader",hidefocus:"true",unselectable:"on",href:"#",draggable:!1},{height:1.1*this.customizerItemHeight+"px",display:"block"}),m=this.$cX("span",{id:t+"-"+d+"-HS",className:"CanvasXpressCustomizerHeader",innerHTML:(l||"")+(e[0]||"")+(c||""),beforeContent:l||"",afterContent:c||"",draggable:!1},{left:"12px",top:g+"px"}),f=this.$cXI(p,{id:t+"-"+d+"-HI",className:"CanvasXpressCustomizerHeader",src:p,key:p,title:"click on items below to run command"},{left:"22px",top:g+2+"px"},!1,this.customizerIcons),y=this.$cX("span",{id:t+"_"+d+"-HT",className:"CanvasXpressCustomizerHeaderHelp",innerHTML:r,draggable:!1},{left:"32px",top:g-o+"px",width:h+"px"}),x=this.$cX("div",{id:t+"-"+d+"-HN",hidefocus:"true",unselectable:"on",href:"#",draggable:!1,paramsTitle:e,paramsIcons:i,paramsParams:s,paramsNames:a},{position:"relative",top:(this.customizerIcons<24?-2:this.customizerIcons<36?5:20)+"px"});if(e.length>1)for(var v=0;v<e.length;v++){d=e[v].replace(/\s/g,"");var b=this.$cX("a",{id:t+"-"+d+"-HNA",className:"CanvasXpressCustomizerHeader",hidefocus:"true",unselectable:"on",href:"#",draggable:!1,itemTarget:n,innerHTML:e[v]},{marginRight:"10px",marginLeft:"15px",textDecoration:0==v?"underline":"none"});0==v&&(b.style.color="rgb(51,122,183)"),x.appendChild(b)}return u.appendChild(m),u.appendChild(f),u.appendChild(y),u.appendChild(x),u},this.addCustomizerPanelHeader=function(t,e,i){for(var s=this.$cX("div",{id:t+"-HP",className:"CanvasXpressCustomizerHeader",hidefocus:"true",unselectable:"on",href:"#",draggable:!1},{height:"37px",display:"block",position:"relative",paddingTop:"10px",top:"10px",borderBottom:"1px solid rgb(51, 122, 183)"}),a=0;a<e.length;a++){var r=this.$cX("div",{id:t+"-"+e[a]+"-PC",hidefocus:"true",unselectable:"on",href:"#",draggable:!1,paramsTrg:i[a],className:"CanvasXpressCustomizerPanel"}),n=this.$cX("span",{id:t+"_"+e[a]+"-PS",innerHTML:e[a],draggable:!1,className:0==a?"CanvasXpressCustomizerPanelActive":"CanvasXpressCustomizerPanel"});r.appendChild(n),s.appendChild(r)}return s},this.addCustomizerHeaderSortPanel=function(t,e,i,s,a,r,n){t||(t=this.newId("-cX-Customizer-Container-")),e||(e=""),s||(s=0),a||(a=220);var o=this.$cX("div",{className:"CanvasXpressCustomizerContainer",id:t},{height:"fit-content",width:this.customizerRightWidth-3+"px"}),h=e.replace(/\s/g,""),l=this.$cX("div",{id:t+"-"+h+"-HSC",className:"CanvasXpressCustomizerHeader",hidefocus:"true",unselectable:"on",href:"#",draggable:!1},{height:this.customizerItemHeight+"px"}),c=this.$cX("span",{id:t+"-"+h+"-HSS",className:"CanvasXpressCustomizerHeader",innerHTML:e||"",draggable:!1},{left:"12px",top:.5*this.customizerItemHeight-.5*this.customizerIcons+"px"}),d=this.$cXI("ascending"==this.sortDir?"sr_azi":"sr_zad",{id:n,className:"CanvasXpressCustomizerHeader",src:"ascending"==this.sortDir?"sr_azi":"sr_zad",asr:"ascending"==this.sortDir?"sr_zad":"sr_azi",params:this.stringifyJSON(["sortDataCustomizer"]),title:"Sort "+e},{left:"22px",top:.5*this.customizerItemHeight-.5*this.customizerIcons+"px"},!1,this.customizerIcons),p=this.$cX("span",{id:t+"_"+h+"-HST",className:"CanvasXpressCustomizerHeadertHelp",innerHTML:i,draggable:!1},{left:"32px",top:.3*this.customizerItemHeight-s+"px",width:a+"px",position:"relative",whiteSpace:"normal"});return l.appendChild(c),l.appendChild(d),l.appendChild(p),o.appendChild(l),o.appendChild(r),o},this.addCustomizerButton=function(t,e,i,s){t||(t=this.newId("-cX-Customizer-Container-")),e||(e="");var a=e.replace(/\s/g,""),r=i&&CanvasXpress.icons.use.hasOwnProperty(i)?i:CanvasXpress.png,n=this.customizerIcons>24?"24px":this.customizerIcons>18?"12px":"5px",o=this.$cX("a",{id:t,className:"CanvasXpressFileCustomizer",hidefocus:"true",unselectable:"on",href:"#",draggable:!1,itemId:a},{height:this.customizerItemHeight+"px"}),h=this.$cXI(r,{id:t+"-"+a+"-I",className:"CanvasXpressFileCustomizer",src:r,key:r,params:this.stringifyJSON(s)},{left:"12px",top:Math.floor(.25*this.customizerItemHeight)+"px"},!1,this.customizerIcons),l=this.$cX("span",{id:t+"-"+a+"-S",className:"CanvasXpressFileCustomizer",innerHTML:e,draggable:!1},{left:"22px",top:n});return o.appendChild(h),o.appendChild(l),o},this.addCustomizerSelectMultiple=function(t,e,i,s,a,r,n,o,h,l){t||(t=this.newId("-cX-Customizer-Container-"));var c=this.addCustomizerSelect(t,e,i,s,a,r,n[0],o,h,l),d=c.childNodes[2];if(d){d.multiple=!0,d.size=10;for(var p=0;p<d.childNodes.length;p++){var g=d.childNodes[p];g.selected=n.includes(g.value)}}return c},this.addCustomizerSelect=function(t,e,i,s,a,r,n,o,h,l){t||(t=this.newId("-cX-Customizer-Container-")),i||(i=""),a||(a=r);var c=this.$cX("div",{id:t,className:"CanvasXpressFileCustomizer",hidefocus:"true",unselectable:"on",href:"#",draggable:!1,paramObj:!!l&&this.stringifyJSON(l)},{width:this.customizerRightWidth-3+"px",borderBottomColor:"rgb(170, 204, 246)",borderWidth:"0 0 1px 0",borderStyle:"solid",cssFloat:"left"}),d=i&&CanvasXpress.icons.use.hasOwnProperty(i)?i:CanvasXpress.png;c.appendChild(this.$cXI(d,{id:t+"-"+i+"-I",className:"CanvasXpressFileCustomizer",src:d,asr:d,title:"tit"},{left:"12px",top:"8px"},!1,this.customizerIcons)),c.appendChild(this.$cX("span",{id:t+"-"+i+"-S",className:"CanvasXpressFileCustomizer",innerHTML:e||"",draggable:!1},{left:"22px",top:this.customizerIcons>24?"12px":"4px"}));var p=this.$cX("select",{id:t+"-"+i+"-N",className:"CanvasXpressSearchCustomizer",type:"text",placeHolder:"Select factor",params:this.stringifyJSON(o),readOnly:!0},{left:"0px",marginTop:"14px",width:this.customizerRightWidth-20+"px",height:"28px",position:"relative"});if(null==n){var g=this.$cX("option",{text:"Select factor",value:"",disabled:!0,selected:!0});try{p.add(g,null)}catch(t){p.add(g)}}for(var u=0;u<a.length;u++){g=this.$cX("option",{text:a[u],value:r[u],selected:r[u]==n});h&&h[u]&&(g.innerHTML=h[u]);try{p.add(g,null)}catch(t){p.add(g)}}var m=this.$cX("span",{id:t+"-"+i+"-T",className:"CanvasXpressCustomizerHeaderHelp",innerHTML:s||"",draggable:!1},{left:"32px",top:this.customizerIcons>24?"12px":"4px"}),f=this.$cX("span",{id:t+"-"+f+"-D",className:"CanvasXpressFileCustomizer",innerHTML:"",draggable:!1},{height:"5px",width:this.customizerRightWidth-3+"px",cssFloat:"left"});return c.appendChild(p),c.appendChild(m),c.appendChild(f),c},this.addCustomizerInput=function(t,e,i,s,a,r){t||(t=this.newId("-cX-Customizer-Container-")),i||(i="");var n=this.customizerIcons>24?"92px":(this.customizerIcons,"82px"),o=this.$cX("div",{id:t,className:"CanvasXpressFileCustomizer",hidefocus:"true",unselectable:"on",href:"#",draggable:!1},{width:this.customizerRightWidth-3+"px",height:n,borderBottomColor:"rgb(170, 204, 246)",borderWidth:"0 0 1px 0",borderStyle:"solid",cssFloat:"left"}),h=i&&CanvasXpress.icons.use.hasOwnProperty(i)?i:CanvasXpress.png;return o.appendChild(this.$cXI(h,{id:t+"-"+i+"-I",className:"CanvasXpressFileCustomizer",src:h,asr:h,title:"tit"},{left:"12px",top:"8px"},!1,this.customizerIcons)),o.appendChild(this.$cX("span",{id:t+"-"+i+"-S",className:"CanvasXpressFileCustomizer",innerHTML:e||"",draggable:!1},{left:"22px",top:this.customizerIcons>24?"12px":"4px"})),o.appendChild(this.$cX("input",{id:t+"-"+i+"-N",className:"CanvasXpressSearchCustomizer",value:0==s?"false":null==s?"null":null!=s?s:""},{width:this.customizerRightWidth-20+"px",height:"30px",marginLeft:"8px",marginTop:"14px",borderBottomColor:"rgb(170, 204, 246)",borderRadius:"4px",resize:"none",cssFloat:"left",zIndex:1e4})),o.appendChild(this.$cXI("ch_creturn",{id:t+"-"+i+"-R",className:"CanvasXpressCustomizerRightB",src:"ch_creturn",key:"ch_creturn",params:this.stringifyJSON(a),params2:!!r&&this.stringifyJSON(r)},{top:"-36px",position:"relative",cssFloat:"right",right:"10px",zIndex:10001},!1,20)),o},this.addCustomizerColor=function(t,e,i,s,a,r,n){t||(t=this.newId("-cX-Customizer-Container-")),i||(i="");var o=this.customizerIcons>24?"90px":(this.customizerIcons,"82px"),h=this.$cX("div",{id:t,className:n||"CanvasXpressFileCustomizer",hidefocus:"true",unselectable:"on",href:"#",draggable:!1},{width:this.customizerRightWidth-3+"px",height:o,borderBottomColor:"rgb(170, 204, 246)",borderWidth:"0 0 1px 0",borderStyle:"solid",cssFloat:"left"}),l=i&&CanvasXpress.icons.use.hasOwnProperty(i)?i:CanvasXpress.png;return h.appendChild(this.$cXI(l,{id:t+"-"+i+"-I",className:"CanvasXpressFileCustomizer",src:l,asr:l,title:"tit"},{left:"12px",top:"8px"},!1,this.customizerIcons)),h.appendChild(this.$cX("span",{id:t+"-"+i+"-S",className:"CanvasXpressFileCustomizer",innerHTML:e||"",draggable:!1},{left:"22px",top:this.customizerIcons>24?"12px":"4px"})),h.appendChild(this.$cX("span",{id:t+"-"+i+"-T",className:"CanvasXpressCustomizerHeaderHelp",innerHTML:s||"",draggable:!1},{left:"32px",top:this.customizerIcons>24?"12px":"4px"})),h.appendChild(this.$cX("input",{id:t+"-"+i+"-N",className:"CanvasXpressSearchCustomizer",value:this.rgbToHex(a),params:this.stringifyJSON(r),type:"color"},{width:this.customizerRightWidth-20+"px",height:"30px",marginLeft:"8px",padding:0,border:"1px solid rgb(170, 204, 246)",resize:"none",cssFloat:"left",zIndex:1e4})),h},this.addCustomizerDiv=function(t,e,i,s,a,r,n,o,h){t||(t=this.newId("-cX-Customizer-Container-Item")),e||(e=[]),i||(i=[]),s||(s=[]),a||(a=[]),r||(r=[]),n||(n=1),o||(o=this.customizerIcons);for(var l=this.$cX("div",{className:"CanvasXpressCustomizerContainer",id:t},{height:"fit-content",width:"100%",margin:"5px 0"}),c=0;c<e.length;c++){var d=e[c].replace(/\s/g,""),p=i[c]&&CanvasXpress.icons.use.hasOwnProperty(i[c])?i[c]:CanvasXpress.png,g=!(!h||!h[c])&&h[c];l.appendChild(this.getCustomizerDiv(t,d,p,e[c],s[c],a[c],r[c],n,o,g))}return l},this.addCustomizerImages=function(t,e,i,s,a,r){t||(t=this.newId("-cX-Customizer-Container-Item")),e||(e=[]),i||(i=[]),s||(s=[]),a||(a=[]),r||(r=1);for(var n=this.$cX("div",{className:"CanvasXpressCustomizerContainer",id:t},{height:"fit-content",width:"100%",marginBottom:"10px"}),o=Math.floor(this.customizerRightWidth/r)-15,h=0;h<e.length;h++){var l=e[h].replace(/\s/g,""),c=i[h]&&CanvasXpress.icons.use.hasOwnProperty(i[h])?i[h]:CanvasXpress.png,d=this.$cXI(c,{id:t+"-"+l+"-I",className:"CanvasXpressCustomizerRightContainer",src:c,key:c,params:this.stringifyJSON(s[h]),title:a[h]},!1,!1,o);n.appendChild(d)}return n},this.addCustomizerNumber=function(t,e,i,s,a){t||(t=this.newId("-cX-Customizer-Container-Item")),i||(i=48),s||(s=1),a||(a="5px 0");var r=(this.customizerRightWidth-1.5*i)/2-10,n=this.customizerIcons<24?22:this.customizerIcons<36?18:14,o=this.$cX("div",{id:t,className:"CanvasXpressCustomizerRightContainer",hidefocus:"true",unselectable:"on",href:"#",draggable:!1},{width:this.customizerRightWidth-10+"px",height:"fit-content",cssFloat:"left",margin:a}),h=this.$cXI("v_minus",{id:t+"-"+e+"-HM",className:"CanvasXpressCustomizerRight",src:"v_minus",key:"v_minus",params:this.stringifyJSON(["increaseDecreaseAttribute",[e,"decrease",s]]),paramsTrg:t+"-"+e+"-I",title:"Decrease"},{left:"8px",top:n+"px"},!1,this.customizerIcons),l=this.$cX("input",{id:t+"-"+e+"-N",className:"CanvasXpressSearchCustomizer",type:"text",value:this[e],params:this.stringifyJSON(["changeAttribute",[e]]),readOnly:!0},{position:"relative",left:r+"px",top:"0px",width:i+"px",textAlign:"center"}),c=this.$cXI("v_plus",{id:t+"-"+e+"-J",className:"CanvasXpressCustomizerRight",src:"v_plus",key:"v_plus",params:this.stringifyJSON(["increaseDecreaseAttribute",[e,"increase",s]]),paramsTrg:t+"-"+e+"-HI",title:"Increase"},{left:"115px",top:n+"px"},!1,this.customizerIcons);return o.appendChild(h),o.appendChild(l),o.appendChild(c),o},this.addCustomizerLabel=function(t,e,i){t||(t=this.newId("-cX-Customizer-Container-Item"));var s=this.$cX("div",{className:"CanvasXpressCustomizerContainer",id:t},{height:"fit-content",width:"100%",margin:"5px 0"}),a=this.$cX("div",{id:t+"-"+e+"-C",className:"CanvasXpressCustomizerRightContainer",hidefocus:"true",unselectable:"on",href:"#",draggable:!1},{width:this.customizerRightWidth-10+"px",height:"48px",cssFloat:"left"}),r=this.$cX("textarea",{id:t+"-"+e+"-N",className:"CanvasXpressSearchCustomizer",innerHTML:this[e]||""},{width:this.customizerRightWidth-14+"px",height:"44px",margin:"0px",border:"none",resize:"none",zIndex:1e4}),n=i?i.unshift(e):[e],o=this.$cXI("ch_creturn",{id:t+"-"+e+"-R",className:"CanvasXpressCustomizerRightB",src:"ch_creturn",key:"ch_creturn",params:this.stringifyJSON(["changeAttribute",n])},{left:this.customizerRightWidth-38+"px",top:"-29px",position:"relative",zIndex:10001},!1,20);return a.appendChild(r),a.appendChild(o),s.appendChild(a),s},this.addCustomizerInt=function(t,e){t||(t=this.newId("-cX-Customizer-Container-Item"));var i=this.$cX("div",{className:"CanvasXpressCustomizerContainer",id:t},{height:"fit-content",width:"100%",margin:"5px 0"}),s=this.$cX("div",{id:t+"-"+e+"-C",className:"CanvasXpressCustomizerRightContainer",hidefocus:"true",unselectable:"on",href:"#",draggable:!1},{width:this.customizerRightWidth-12+"px",height:"30px",cssFloat:"left"}),a=this.$cX("textarea",{id:t+"-"+e+"-N",className:"CanvasXpressSearchCustomizer",innerHTML:this[e]||""},{width:this.customizerRightWidth-18+"px",height:"27px",margin:"0",padding:"3px 0 0 5px",border:"none",resize:"none",zIndex:1e4,fontSize:"16px"}),r=this.$cXI("ch_creturn",{id:t+"-"+e+"-R",className:"CanvasXpressCustomizerRightB",src:"ch_creturn",key:"ch_creturn",params:this.stringifyJSON(["changeAttribute",[e]])},{left:this.customizerRightWidth-38+"px",top:"-28px",position:"relative",zIndex:10001},!1,20);return s.appendChild(a),s.appendChild(r),i.appendChild(s),i},this.addCustomizerText=function(t,e,i){t||(t=this.newId("-cX-Customizer-Container-Item"));var s=["at_col","sr_aai","sr_aad","ch_oa","ch_lb","ch_oitalic"],a=["Color","Bigger","Smaller","Normal","Bold","Italic"],r=[["changeAttribute",[e+"Color"]],["setFontAttributeSize",[e+"ScaleFontFactor","increase"]],["setFontAttributeSize",[e+"ScaleFontFactor","decrease"]],["setFontAttributeStyle",[e+"FontStyle","normal"]],["setFontAttributeStyle",[e+"FontStyle","bold"]],["setFontAttributeStyle",[e+"FontStyle","italic"]]],n=[this.customizerIcons>24?68:this.customizerIcons>18?62:58,24,26,24,17,20],o=Math.floor(this.customizerRightWidth/3)-10,h=this.customizerIcons,l=this.$cX("div",{className:"CanvasXpressCustomizerContainer",id:t},{height:"fit-content",width:"100%",margin:"5px 0"});if(i){var c=this.$cX("div",{id:t+"-"+e+"-C",className:"CanvasXpressCustomizerRightContainer",hidefocus:"true",unselectable:"on",href:"#",draggable:!1},{width:this.customizerRightWidth-10+"px",height:"96px",cssFloat:"left"}),d=this.$cX("textarea",{id:t+"-"+e+"-N",className:"CanvasXpressSearchCustomizer",innerHTML:this[i]||""},{width:this.customizerRightWidth-14+"px",height:"92px",margin:"0px",border:"none",resize:"none",zIndex:1e4}),p=this.$cXI("ch_creturn",{id:t+"-"+e+"-R",className:"CanvasXpressCustomizerRightB",src:"ch_creturn",key:"ch_creturn",params:this.stringifyJSON(["changeAttribute",[i]])},{left:this.customizerRightWidth-38+"px",top:"-29px",position:"relative",zIndex:10001},!1,20);c.appendChild(d),c.appendChild(p),l.appendChild(c)}c=this.$cX("div",{id:t+"-"+a[0]+"-D",className:"CanvasXpressCustomizerRightContainer",hidefocus:"true",unselectable:"on",href:"#",draggable:!1},{width:o+"px",height:this.customizerItemHeight+8+"px",cssFloat:"left"}),d=this.$cX("input",{id:this.target+"-SearchCustomizerSelect",className:"CanvasXpressSearchCustomizer",type:"color",value:this.rgbToHex(this[e+"Color"]),params:this.stringifyJSON(r[0])},{position:"relative",width:h+"px",height:h+"px",left:Math.floor(o/3-3)+"px",top:.125*this.customizerIcons+"px",padding:0});var g=this.$cX("span",{id:t+"-"+a[0]+"-S",className:"CanvasXpressCustomizerRight",innerHTML:a[0],draggable:!1},{left:o/2-n[0]+"px",top:.75*this.customizerItemHeight+"px",display:"grid",lineHeight:this.customizerLineHeight+"px"});c.appendChild(d),c.appendChild(g),l.appendChild(c);for(var u=1;u<a.length;u++)l.appendChild(this.getCustomizerDiv(t,a[u],s[u],a[u],r[u],a[u],n[u],3,h));return l},this.addCustomizerColorBorder=function(t,e,i){t||(t=this.newId("-cX-Customizer-Container-Item"));var s=this.customizerIcons>24?68:this.customizerIcons>18?62:58,a=Math.floor(this.customizerRightWidth/2)-10,r=this.customizerIcons,n=this.$cX("div",{className:"CanvasXpressCustomizerContainer",id:t},{height:"fit-content",width:"100%",margin:"5px 0"}),o=this.$cX("div",{id:t+"-Color-C",className:"CanvasXpressCustomizerRightContainer",hidefocus:"true",unselectable:"on",href:"#",draggable:!1},{width:a+"px",height:this.customizerItemHeight+8+"px",cssFloat:"left"}),h=this.$cX("input",{id:this.target+"-SearchCustomizerColorSelect",className:"CanvasXpressSearchCustomizer",type:"color",value:this.rgbToHex(this[e]),params:this.stringifyJSON(["changeAttribute",[e]])},{position:"relative",width:r+"px",height:r+"px",left:Math.floor(a/2.5-3)+"px",top:.125*this.customizerIcons+"px",padding:0}),l=this.$cX("span",{id:t+"-Color-S",className:"CanvasXpressCustomizerRight",innerHTML:"Color",draggable:!1},{left:a/2-s+"px",top:.75*this.customizerItemHeight+"px",display:"grid",lineHeight:this.customizerLineHeight+"px"});o.appendChild(h),o.appendChild(l),n.appendChild(o);o=this.$cX("div",{id:t+"-Border-D",className:"CanvasXpressCustomizerRightContainer",hidefocus:"true",unselectable:"on",href:"#",draggable:!1},{width:a+"px",height:this.customizerItemHeight+8+"px",cssFloat:"left"}),h=this.$cX("input",{id:this.target+"-SearchCustomizerBorderSelect",className:"CanvasXpressSearchCustomizer",type:"color",value:this.rgbToHex(this[i]),params:this.stringifyJSON(["changeAttribute",[i]])},{position:"relative",width:r+"px",height:r+"px",left:Math.floor(a/2.5-3)+"px",top:.125*this.customizerIcons+"px",padding:0}),l=this.$cX("span",{id:t+"-Border-T",className:"CanvasXpressCustomizerRight",innerHTML:"Border",draggable:!1},{left:a/2-s+"px",top:.75*this.customizerItemHeight+"px",display:"grid",lineHeight:this.customizerLineHeight+"px"});return o.appendChild(h),o.appendChild(l),n.appendChild(o),n},this.addCustomizerBorder=function(t,e,i){t||(t=this.newId("-cX-Customizer-Container-Item"));var s=this.customizerIcons>24?68:this.customizerIcons>18?62:58,a=this.customizerIcons>24?28:this.customizerIcons>18?22:18,r=Math.floor(this.customizerRightWidth/2)-10,n=this.customizerIcons,o=this.$cX("div",{id:t,className:"CanvasXpressCustomizerContainer"},{height:"fit-content",width:"100%",margin:"5px 0"}),h=this.$cX("div",{id:t+"-BorderColor-C",className:"CanvasXpressCustomizerRightContainer",hidefocus:"true",unselectable:"on",href:"#",draggable:!1},{width:r+"px",height:this.customizerItemHeight+8+"px",cssFloat:"left"}),l=this.$cX("input",{id:this.target+"-SearchCustomizerBorderColorSelect",className:"CanvasXpressSearchCustomizer",type:"color",value:this.rgbToHex(this[e]),params:this.stringifyJSON(["changeAttribute",[e]])},{position:"relative",width:n+"px",height:n+"px",left:Math.floor(r/2.5-3)+"px",top:.125*this.customizerIcons+"px",padding:0}),c=this.$cX("span",{id:t+"-BorderColor-S",className:"CanvasXpressCustomizerRight",innerHTML:"Color",draggable:!1},{left:r/2-s+"px",top:.75*this.customizerItemHeight+"px",display:"grid",lineHeight:this.customizerLineHeight+"px"});h.appendChild(l),h.appendChild(c),o.appendChild(h);h=this.$cX("div",{id:t+"-BorderShow-D",className:"CanvasXpressCustomizerRightContainer",hidefocus:"true",unselectable:"on",href:"#",draggable:!1},{width:r+"px",height:this.customizerItemHeight+8+"px",cssFloat:"left"}),l=this.$cXI("sl_eopen",{id:t+"-BorderShow-I",className:"CanvasXpressCustomizerRight",src:"sl_eopen",key:"sl_eopen",params:this.stringifyJSON(["toggleAttribute",[i]]),title:"Toggle Border"},{left:Math.floor(r/2-n/2)+"px",top:Math.floor(.2*this.customizerItemHeight)+"px"},!1,n),c=this.$cX("span",{id:t+"-BorderShow-S",className:"CanvasXpressCustomizerRight",innerHTML:"Show",draggable:!1},{left:r/2-a+"px",top:Math.floor(.3*this.customizerItemHeight)+"px",display:"grid",lineHeight:this.customizerLineHeight+"px"});return h.appendChild(l),h.appendChild(c),o.appendChild(h),o},this.addCustomizerGrid=function(t,e){t||(t=this.newId("-cX-Customizer-Container-Item"));var i=["at_col","gr_major","gr_minor","ln_stylesolid","ln_styledotted","ln_styledashed"],s=["Color","Major","Minor","Solid","Dotted","Dashed"],a=[["changeAttribute",[e+"AxisTickColor"]],["toggleAttribute",[e+"AxisTicksMajorShow"]],["toggleAttribute",[e+"AxisTicksMinorShow"]],["changeAttribute",[e+"AxisTickLineType","solid"]],["changeAttribute",[e+"AxisTickLineType","dotted"]],["changeAttribute",[e+"AxisTickLineType","dashed"]]],r=[this.customizerIcons>24?68:this.customizerIcons>18?62:58,24,24,18,24,26],n=Math.floor(this.customizerRightWidth/3)-10,o=this.customizerIcons,h=this.$cX("div",{className:"CanvasXpressCustomizerContainer",id:t},{height:"fit-content",width:"100%",margin:"5px 0"}),l=this.$cX("div",{id:t+"-"+s[0]+"-C",className:"CanvasXpressCustomizerRightContainer",hidefocus:"true",unselectable:"on",href:"#",draggable:!1},{width:n+"px",height:this.customizerItemHeight+8+"px",cssFloat:"left"}),c=this.$cX("input",{id:this.target+"-SearchCustomizerSelect",className:"CanvasXpressSearchCustomizer",type:"color",value:this.rgbToHex(this[e+"AxisTickColor"]),params:this.stringifyJSON(a[0])},{position:"relative",width:o+"px",height:o+"px",left:Math.floor(n/3-3)+"px",top:.125*this.customizerIcons+"px",padding:0}),d=this.$cX("span",{id:t+"-"+s[0]+"-S",className:"CanvasXpressCustomizerRight",innerHTML:s[0],draggable:!1},{left:n/2-r[0]+"px",top:.75*this.customizerItemHeight+"px",display:"grid",lineHeight:this.customizerLineHeight+"px"});l.appendChild(c),l.appendChild(d),h.appendChild(l);for(var p=1;p<s.length;p++)h.appendChild(this.getCustomizerDiv(t,s[p],i[p],s[p],a[p],s[p],r[p],3,o));return h.appendChild(this.addCustomizerNumber(this.target+"-cX-AxesCustomizerGridNumber",e+"AxisTicks",48,1,"0 0 5px 0")),h},this.addCustomizerSamplesDiv=function(t){var e=this.loadSamplesWranglingCustomizerDiv();t.appendChild(this.$cX("span",{className:"CanvasXpressCustomizerRight",innerHTML:"Samples"},{left:"12px",paddingTop:"10px"})),t.appendChild(this.$cXI("sr_azi",{id:this.target+"-cX-WranglingCustomizerSortSamples",className:"CanvasXpressFileCustomizer",src:"sr_azi",asr:"sr_zad",params:this.stringifyJSON(["sortDataCustomizer"]),title:"Sort Samples"},{left:"12px"})),t.appendChild(e)},this.addCustomizerVariablesDiv=function(t){var e=this.loadVariablesWranglingCustomizerDiv();t.appendChild(this.$cX("span",{className:"CanvasXpressCustomizerRight",innerHTML:"Variables / Data Series"},{left:"12px",paddingTop:"10px"})),t.appendChild(this.$cXI("sr_azi",{id:this.target+"-cX-WranglingCustomizerSortVariables",className:"CanvasXpressFileCustomizer",src:"sr_azi",asr:"sr_zad",params:this.stringifyJSON(["sortDataCustomizer"]),title:"Sort Variables"},{left:"12px"})),t.appendChild(e)},this.addCustomizerAnnotationsDiv=function(t){var e=this.loadAnnotationsWranglingCustomizerDiv();t.appendChild(this.$cX("span",{className:"CanvasXpressCustomizerRight",innerHTML:"Sample Metadata"},{left:"12px",paddingTop:"10px"})),t.appendChild(this.$cXI("sr_azi",{id:this.target+"-cX-WranglingCustomizerSortAnnotations",className:"CanvasXpressFileCustomizer",src:"sr_azi",asr:"sr_zad",params:this.stringifyJSON(["sortDataCustomizer"]),title:"Sort Sample Metadata"},{left:"12px"})),t.appendChild(e)},this.addCustomizerDescriptionsDiv=function(t){var e=this.loadDescriptionsWranglingCustomizerDiv();t.appendChild(this.$cX("span",{className:"CanvasXpressCustomizerRight",innerHTML:"Variable Metadata"},{left:"12px",paddingTop:"10px"})),t.appendChild(this.$cXI("sr_azi",{id:this.target+"-cX-WranglingCustomizerSortDescriptions",className:"CanvasXpressFileCustomizer",src:"sr_azi",asr:"sr_zad",params:this.stringifyJSON(["sortDataCustomizer"]),title:"Sort Variable Metadata"},{left:"12px"})),t.appendChild(e)},this.loadVariablesWranglingCustomizerDiv=function(t,e){var i=this.$(this.target+"-cX-WranglingCustomizerVariables");i||(i=this.$cX("div",{id:this.target+"-cX-WranglingCustomizerVariables",className:"CanvasXpressDataCustomizer",type:"vars"},{height:"102px",marginBottom:"10px"})),t||(t=this.$cX("div",{id:this.target+"-cX-WranglingCustomizerVariables-Mask"},{width:this.customizerRightWidth-16+"px",minHeight:"102px"}));for(var s=0;s<Math.min(this.data.y.vars.length,this.maxDataCustomizerEntries);s++){var a=this.$cX("img",{id:this.target+"-cX-WranglingCustomizerVariablesImage-"+this.data.y.vars[s],src:CanvasXpress.png,className:"CanvasXpressDataCustomizerMask"}),r=this.$cX("span",{id:this.target+"-cX-WranglingCustomizerVariables-"+this.data.y.vars[s],innerHTML:this.data.y.vars[s],className:(this.customizerEntriesAsList?"CanvasXpressDataCustomizerList":"CanvasXpressDataCustomizer")+"Numeric draggable",type:"vars",numeric:!0,params:["switchVarToAnnotation"],draggable:!0,spellcheck:!1});r.appendChild(a),t.appendChild(r)}if(i.appendChild(t),!e)return this.minimizeDataCustomizerContainer(i)},this.loadSamplesWranglingCustomizerDiv=function(t,e){var i=this.$(this.target+"-cX-WranglingCustomizerSamples");i||(i=this.$cX("div",{id:this.target+"-cX-WranglingCustomizerSamples",className:"CanvasXpressDataCustomizer",type:"smps"},{height:"102px",marginBottom:"10px"})),t||(t=this.$cX("div",{id:this.target+"-cX-WranglingCustomizerSamples-Mask"},{width:this.customizerRightWidth-16+"px",minHeight:"102px"}));for(var s=0;s<Math.min(this.data.y.smps.length,this.maxDataCustomizerEntries);s++){var a=this.$cX("img",{id:this.target+"-cX-WranglingCustomizerSamplesImage-"+this.data.y.smps[s],src:CanvasXpress.png,className:"CanvasXpressDataCustomizerMask"}),r=this.$cX("span",{id:this.target+"-cX-WranglingCustomizerSamples-"+this.data.y.smps[s],innerHTML:this.data.y.smps[s],className:(this.customizerEntriesAsList?"CanvasXpressDataCustomizerList":"CanvasXpressDataCustomizer")+"Numeric draggable",type:"smps",numeric:!0,params:["switchSmpToAnnotation"],draggable:!0,spellcheck:!1});r.appendChild(a),t.appendChild(r)}if(i.appendChild(t),!e)return this.minimizeDataCustomizerContainer(i)},this.loadAnnotationsWranglingCustomizerDiv=function(t,e){var i=this.meta.data.x,s=this.customizerEntriesAsList?"CanvasXpressDataCustomizerList":"CanvasXpressDataCustomizer",a=this.$(this.target+"-cX-WranglingCustomizerAnnotations");if(a||(a=this.$cX("div",{id:this.target+"-cX-WranglingCustomizerAnnotations",className:"CanvasXpressDataCustomizer",type:"x"},{height:"102px"})),t||(t=this.$cX("div",{id:this.target+"-cX-WranglingCustomizerAnnotations-Mask"},{width:this.customizerRightWidth-16+"px",minHeight:"102px"})),this.data.x)for(var r in this.data.x){var n=i[r].unique?s+"Unique draggable":"String"==i[r].type?s+"String draggable":s+"Numeric draggable",o=this.$cX("img",{id:this.target+"-cX-WranglingCustomizerAnnotationsImage-"+r,src:CanvasXpress.png,className:"CanvasXpressDataCustomizerMask"}),h=this.$cX("span",{id:this.target+"-cX-WranglingCustomizerAnnotations-"+r,innerHTML:r,className:n,type:"x",unique:i[r].unique,numeric:"String"!=i[r].type,params:["switchAnnotationToVar"],draggable:!0,spellcheck:!1});i[r].unique&&(h.title="Double-click to convert to Id"),(i[r].date||i[r].geo)&&(h.style.color="rgb(0,255,0)"),h.appendChild(o),t.appendChild(h)}if(a.appendChild(t),!e)return this.minimizeDataCustomizerContainer(a)},this.loadDescriptionsWranglingCustomizerDiv=function(t,e){var i=this.meta.data.z,s=this.customizerEntriesAsList?"CanvasXpressDataCustomizerList":"CanvasXpressDataCustomizer",a=this.$(this.target+"-cX-WranglingCustomizerDescriptions");a||(a=this.$cX("div",{id:this.target+"-cX-WranglingCustomizerDescriptions",className:"CanvasXpressDataCustomizer",type:"z"},{height:"102px"})),t||(t=this.$cX("div",{id:this.target+"-cX-WranglingCustomizerDescriptions-Mask"},{width:this.customizerRightWidth-16+"px",minHeight:"102px"}));var r=this.isHistogram&&this.dataStndBy.z?this.dataStndBy.z:this.data.z;if(r)for(var n in r){var o=i[n].unique?s+"Unique draggable":"String"==i[n].type?s+"String draggable":s+"Numeric draggable",h=this.$cX("img",{id:this.target+"-cX-WranglingCustomizerDescriptionsImage-"+n,src:CanvasXpress.png,className:"CanvasXpressDataCustomizerMask"}),l=this.$cX("span",{id:this.target+"-cX-WranglingCustomizerDescriptions-"+n,innerHTML:n,className:o,type:"z",unique:i[n].unique,numeric:"String"!=i[n].type,params:["switchAnnotationToSmp"],draggable:!0,spellcheck:!1});i[n].unique&&(l.title="Double-click to convert to Id"),(i[n].date||i[n].geo)&&(l.style.color="rgb(0,255,0)"),l.appendChild(h),t.appendChild(l)}if(a.appendChild(t),!e)return this.minimizeDataCustomizerContainer(a)},this.minimizeDataCustomizerContainer=function(t){var e=window.document,i=[];t.style.visibility="hidden",e.body.appendChild(t);for(var s=t.firstChild,a=0,r=0;r<s.childNodes.length;r++){var n=s.childNodes[r];i.push([n.offsetLeft-t.offsetLeft,n.offsetTop-t.offsetTop,n.textContent]),n.offsetTop-t.offsetTop<t.clientHeight&&(a=r)}for(;s.childNodes[a+1];)s.removeChild(s.childNodes[a+1]);return i.length?s.style.height=i[i.length-1][1]+31+"px":s.style.height=t.style.height,t.population=i,e.body.removeChild(t),t.style.visibility="visible",t},this.doeCustomizer=function(){var t=[];return t.push(this.doeCustomizerRemove()),t.push(this.doeCustomizerPlots()),t.push(this.doeCustomizerTopology()),this.doeCustomizerLayout(t),[t,this.addRemoveCustomizerListenersRightPanel]},this.doeCustomizerRemove=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerButton(this.target+"-cX-ToolsCustomizerDOERemove","Remove Meta-Data Plots","ly_doeremove",["createDOE"]);return t.appendChild(e),t},this.doeCustomizerTopology=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerSelect(this.target+"-cX-metaCustomizerDOETopology","DOE Topology","ly_segregate",!1,!1,["2X2","2X3","2X4","3X2","3X3","3X4","4X2","4X3","4X4"],this.layoutTopology,["modifyDOE",["layout"]]);return t.appendChild(e),t},this.doeCustomizerPlots=function(){for(var t=[],e=this.graphType.match(/Scatter/)?this.getMetaDataByType("z"):this.getMetaDataByType("x"),i=this.graphType.match(/Scatter/)?this.data.y.smps:this.data.y.vars,s=0;s<e.length;s++)t.push(e[s]);if(this.extendedDOE)for(s=0;s<i.length;s++)t.length<50&&t.push(i[s]);var a=this.getCustomizerDivRaw(),r=this.addCustomizerSelect(this.target+"-cX-metaCustomizerDOEPlots","DOE Plots","ly_doe",!1,!1,t,this.includeDOE[0],["modifyDOE",[]]);return a.appendChild(r),a},this.doeCustomizerLayout=function(t){t.push(this.doeCustomizerSelection()),t.push(this.doeCustomizerGraphType()),t.push(this.doeCustomizerGraphSize())},this.doeCustomizerSelection=function(){for(var t=this.newId("-cX-Customizer-Container-"),e=this.getCustomizerDivRaw(),i=[],s=[],a=[],r=[],n=[this.target+"-cX-metaCustomizerDOEGraphType",this.target+"-cX-metaCustomizerDOEGraphSize"],o=0;o<=this.includeDOE.length;o++)i.push((o+1).toString()),s.push("ly_layout"),a.push(["setActiveLayout"]),r.push(o.toString());var h=this.addCustomizerArrayHeader(t,i,s,a,r,"Click to select graph in layout",n);return e.appendChild(h),e},this.doeCustomizerGraphType=function(){var t=this.getCustomizerDivRaw(),e=this.graphType.match(/Scatter/)?this.meta.data.z:this.meta.data.x,i={num:["Histogram","Bar","Dotplot","Line","Scatter2D","Table"],numMeta:[],str:["Pie","Treemap","Table"],strMeta:[],ori:[this.graphType],varSmp:["Histogram"]};for(var s in e)"Numeric"==e[s].type?i.numMeta.push(s):i.strMeta.push(s);var a=this.addCustomizerSelect(this.target+"-cX-metaCustomizerDOEGraphType","Graph Type","ly_doe",!1,!1,[this.graphType],this.graphType,["updateDOEGraphType",[!1,!1]],!1,i);return t.appendChild(a),t},this.doeCustomizerGraphSize=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerSelect(this.target+"-cX-metaCustomizerDOEGraphSize","Graph Size","ar_minmax",!1,!1,["1X1","1X2","1X3","2X1","2X2","2X3","3X1","3X2","3X3"],"1X1",["updateDOEGraphSize",[!1,!1]]);return t.appendChild(e),t},this.fileCustomizer=function(){var t=[],e={"Save Plot":["sv_disk",[["Save as PNG","sv_image",["print",[]]],["Save as SVG","sv_svg",["saveSVG",[]]],["Save as JSON","sv_diskjson",["save",[]]]]],"Edit Data":["fp_pencil",[["Edit in JS Fiddle","c_jsfiddle",["editJSFiddle",[]]],["Edit in CodePen","c_codepen",["editCodePen",[]]]]],"Show Code":["wp_code",[["Show Reproducible Research code","c_rrcode",["clickRepResearch",[]]],["Show JSON code","cd_json",["clickShowCode",[]]],["Show R code","c_rcode",["clickShowRCode",[]]],["Show Python code","c_python",["clickShowPythonCode",[]]],["Show Jupyter code","c_jupyter",["clickShowPythonCode",[!1,!1,!0]]]]],Utilities:["wp_configuration",[["Open File","cd_upload",["fileUpload",[]]],["Reset","op_refresh",["masterReset",[]]]]]};this.editable||delete e["Edit Data"];var i=this.newId("-cX-Customizer-Container-");for(var s in e){var a=e[s][0],r=e[s][1],n=this.$cX("div",{id:i+"-"+a,className:"CanvasXpressCustomizerContainer"},{width:this.customizerRightWidth-2+"px"}),o=this.addCustomizerHeader(i,s,a,"Click items below to "+("Utilities"==s?"run utilities":s.toLowerCase()));n.appendChild(o);for(var h=0;h<r.length;h++){var l=r[h],c=(o=this.$cX("a",{id:i+"-"+a+"-A",className:"CanvasXpressFileCustomizer",hidefocus:"true",unselectable:"on",href:"#",draggable:!1,params:this.stringifyJSON(l[2])},{height:this.customizerItemHeight+"px"}),this.$cXI(l[1]&&CanvasXpress.icons.use.hasOwnProperty(l[1])?l[1]:CanvasXpress.png,{id:i+"-"+a+"-I",className:"CanvasXpressFileCustomizer",src:l[1],params:this.stringifyJSON(l[2])},{left:"12px",top:2*this.customizerIcons/3+"px"},!1,this.customizerIcons)),d=this.$cX("span",{id:i+"-"+a+"-S",className:"CanvasXpressFileCustomizer",innerHTML:l[0]||"",draggable:!1},{left:"22px",top:2*this.customizerIcons/3+"px"});if(o.appendChild(c),o.appendChild(d),"cd_upload"==l[1]){var p=this.$cX("input",{id:this.target+"-cX-FileUploader",type:"file"},{position:"relative",left:"130px",top:"-10px",color:"transparent",width:"100px"});o.appendChild(p)}n.appendChild(o)}t.push(n)}return[t,this.addRemoveCustomizerListenersRightPanel]},this.dataCustomizer=function(){var t=[];return t.push(this.dataCustomizerTranspose()),t.push(this.dataCustomizerTransform()),this.isGroupedData&&"Bar"==this.graphType&&t.push(this.dataCustomizerSummary()),t.push(this.dataCustomizerSort()),[t,this.addRemoveCustomizerListenersRightPanel]},this.dataCustomizerTranspose=function(){var t=this.newId("-cX-Customizer-Container-"),e=this.getCustomizerDivRaw(),i=this.addCustomizerHeader(t,"Transpose","tb_table","Click to transpose data");e.appendChild(i);var s=this.addCustomizerDiv(this.target+"-cX-DataCustomizerTranspose",["Transpose Data"],["dtt_transpose"],[["transpose"]],["Transpose Data"],[70],1,this.customizerIcons);return e.appendChild(s),e},this.dataCustomizerTransform=function(){var t=this.newId("-cX-Customizer-Container-"),e=this.getCustomizerDivRaw(),i=this.addCustomizerHeader(t,"Transform","ch_ofx","Click to transform data");e.appendChild(i);var s=this.addCustomizerImages(this.target+"-cX-DataCustomizerTransform",["Log2","Log10","Exp2","Exp10","Reset"],["ch_olog2","ch_olog10","ch_oe2","ch_oe10","op_refresh"],[["transform",["log2"]],["transform",["log10"]],["transform",["exp2"]],["transform",["exp10"]],["transform",["reset"]]],["Log2","Log10","Exp2","Exp10","Reset"],5);return e.appendChild(s),e},this.dataCustomizerSummary=function(){var t=this.newId("-cX-Customizer-Container-"),e=this.getCustomizerDivRaw(),i=this.addCustomizerHeader(t,"Summary","ch_ssum","Click to change data summary");e.appendChild(i);var s=this.addCustomizerImages(this.target+"-cX-DataCustomizerSummary",["Mean","Max","Min","Sum","Count"],["ch_omean","dtp_max","dtp_min","ch_ssum","dtp_count"],[["changeAttribute",["summaryType","mean"]],["changeAttribute",["summaryType","max"]],["changeAttribute",["summaryType","min"]],["changeAttribute",["summaryType","sum"]],["changeAttribute",["summaryType","count"]]],["Mean","Max","Min","Sum","Count"],5);return e.appendChild(s),e},this.dataCustomizerSort=function(){var t=this.newId("-cX-Customizer-Container-"),e=this.getCustomizerDivRaw(),i=this.addCustomizerHeader(t,"Sort","sr_az","Click item to select sort type. Drag meta-data to Variables or Samples to sort by category",16);e.appendChild(i);var s=this.addCustomizerDiv(this.target+"-cX-DataCustomizerSort",["Direction","Case","Variables","Samples"],["ascending"==this.sortDir?"sr_zad":"sr_azi","ch_oaa","ch_lv","ch_ls"],[["sortDir"],["sortCase"],["sortVariables"],["sortSamples"]],["ascending"==this.sortDir?"Ascending":"Descending",this.sortCase?"true":"false","Sort Variables","Sort Samples"],[31,20,34,31],4,this.customizerIcons,[!1,!1,!0,!0]);return this.addCustomizerAnnotationsDiv(s),this.addCustomizerDescriptionsDiv(s),e.appendChild(s),e},this.optionsCustomizer=function(){var t=[];return t.push(this.optionsCustomizerText()),this.graphType.match(/Scatter|Heatmap/)||t.push(this.optionsCustomizerGraphOrientation()),t.push(this.optionsCustomizerGraphType()),t.push(this.optionsCustomizerErrorBars()),t.push(this.optionsCustomizerErrorBarsType()),t.push(this.optionsCustomizerErrorBarsColor()),t.push(this.optionsCustomizerErrorBarsWidth()),t.push(this.optionsCustomizerErrorBarsShow()),t.push(this.optionsCustomizerAlgorithm()),t.push(this.optionsCustomizerSampleWidth()),this.graphType.match(/Bar|Boxplot/)&&this.data.y.vars.length>1&&t.push(this.optionsCustomizerVariableSpace()),[t,this.addRemoveCustomizerListenersRightPanel]},this.optionsCustomizerAlgorithm=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerSelect(this.target+"-cX-OptionsCustomizerAlgorithm","Axis Algorithm","ga_axisxy",!1,["Heckbert","R Pretty","Wilkinson","Wilkinson Extended"],["heckbert","rPretty","wilkinson","wilkinsonExtended"],this.axisAlgorithm,["changeAttribute",["axisAlgorithm"]]);return t.appendChild(e),t},this.optionsCustomizerErrorBars=function(){this.newId("-cX-Customizer-Container-");var t=this.getCustomizerDivRaw(),e=this.addCustomizerHeader(this.newId("-cX-Customizer-Container-"),"Error Bars","gc_gerrors","Click / Select to modify");return t.appendChild(e),t},this.optionsCustomizerErrorBarsType=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerSelect(this.target+"-cX-OptionsCustomizerErrorBarsType","Error Bars Type","ch_ofx",!1,["Standard Deviation","Standard Error of Mean","95% Confidence Interval"],["standardDeviation","standardErrorMean","confidenceInterval95"],this.errorBarsType,["changeAttribute",["errorBarsType"]]);return t.appendChild(e),t},this.optionsCustomizerErrorBarsColor=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerColor(this.target+"-cX-OptionsCustomizerErrorBarsColor","Error Bars Color","at_col",!1,this.errorBarsColor,["changeAttribute",["errorBarsColor"]]);return t.appendChild(e),t},this.optionsCustomizerErrorBarsWidth=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerInput(this.target+"-cX-OptionsCustomizerErrorBarsWidth","Error Bars Width","sp_thickness",this.errorBarsThickness,["changeAttribute",["errorBarsThickness"]]);return t.appendChild(e),t},this.optionsCustomizerErrorBarsShow=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerButton(this.target+"-cX-OptionsCustomizerErrorBarsShow","Show / Hide Error Bars","sl_eopen",["toggleAttribute",["showErrorBars"]]);return t.appendChild(e),t},this.optionsCustomizerSampleWidth=function(){var t=["Wider","Thiner"],e=this.newId("-cX-Customizer-Container-"),i=this.getCustomizerDivRaw(),s=this.addCustomizerHeader(e,"Sample Width","sp_thickness","Click to change width");i.appendChild(s);var a=this.addCustomizerDiv(this.target+"-cX-OptionsCustomizerSampleWidth",t,["sp_thicker","sp_thinner"],[["setFontAttributeSize",["widthFactor","increase"]],["setFontAttributeSize",["widthFactor","decrease"]]],t,[25,25],2,this.customizerIcons);return i.appendChild(a),i},this.optionsCustomizerVariableSpace=function(){var t=["Farther","Closer"],e=this.newId("-cX-Customizer-Container-"),i=this.getCustomizerDivRaw(),s=this.addCustomizerHeader(e,"Variable Spacing","sp_spacing","Click to change spacing");i.appendChild(s);var a=this.addCustomizerDiv(this.target+"-cX-OptionsCustomizerVariableSpace",t,["sp_farther","sp_closer"],[["setFontAttributeSize",["variableSpaceFactor","increase"]],["setFontAttributeSize",["variableSpaceFactor","decrease"]]],t,[25,25],2,this.customizerIcons);return i.appendChild(a),i},this.optionsCustomizerGraphType=function(){var t=["Area","Area Line","Bar","Bar Line","Boxplot","Circular","Correlation","Dot Line","Dotplot","Heatmap","Line","Pie Chart"],e=["g_area","g_arealine","g_bar","g_barline","g_boxplot","g_circular","g_correlation","g_dotline","g_dotplot","g_heatmap","g_line","g_pie"],i=[];this.data.y.smps.length>1&&(t.push("Scatter 2D"),e.push("g_scatter2d")),this.data.y.smps.length>2&&(t.push("Scatter Bubble 2D"),e.push("g_scatter3d")),t.push("Stacked","Stacked Line","Stacked Percent","Stacked Percent Line","Tag Cloud","Parallel Coordinates","Treemap"),e.push("g_stacked","g_stackedline","g_stackedpercent","g_stackedpercentline","g_tagcloud","g_parallelcoordinates","g_treemap");for(var s=0;s<t.length;s++){var a=t[s].replace(/\s/g,"");i.push(["changeAttribute",["graphType",a]])}var r=this.newId("-cX-Customizer-Container-"),n=this.getCustomizerDivRaw(),o=this.addCustomizerHeader(r,"Type","ly_doe","Click to change graph type");n.appendChild(o);var h=this.addCustomizerImages(this.target+"-cX-DataCustomizerGraphType",t,e,i,t,5);return n.appendChild(h),n},this.optionsCustomizerGraphOrientation=function(){var t=["Vertical","Horizontal"],e=this.newId("-cX-Customizer-Container-"),i=this.getCustomizerDivRaw(),s=this.addCustomizerHeader(e,"Orientaion","gc_gg2","Click to change plot orientation");i.appendChild(s);var a=this.addCustomizerDiv(this.target+"-cX-DataCustomizerGraphOrientation",t,["gc_govertical","gc_gohorizontal"],[["changeAttribute",["graphOrientation","vertical"]],["changeAttribute",["graphOrientation","horizontal"]]],t,[26,36],2,this.customizerIcons);return i.appendChild(a),i},this.optionsCustomizerText=function(){var t=this.newId("-cX-Customizer-Container-"),e=this.getCustomizerDivRaw(),i=this.addCustomizerArrayHeader(t,["Title","Subtitle","Citation"],["p_g1title","p_g1subtitle","p_g1citation"],["title","subtitle","citation"],["title","subtitle","citation"],"Select text (link) and click to modify",this.target+"-cX-OptionsCustomizerText");e.appendChild(i);var s=this.addCustomizerText(this.target+"-cX-OptionsCustomizerText","title","title");return e.appendChild(s),e},this.plotCustomizer=function(){var t=[];return this.graphType.match(/Scatter/)?this.scatterPlotMatrix&&(t.push(this.plotCustomizerRemoveSplom()),t.push(this.plotCustomizerLayout()),t.push(this.plotCustomizerLayoutAdjust()),t.push(this.plotCustomizerLayoutType())):"Boxplot"==this.graphType?(t.push(this.plotCustomizerBoxplotType()),t.push(this.plotCustomizerBoxplotData()),t.push(this.plotCustomizerBoxplotDataPoints()),t.push(this.plotCustomizerBoxplotJitter()),t.push(this.plotCustomizerBoxplotBinned()),t.push(this.plotCustomizerBoxplotBinnedAlign()),t.push(this.plotCustomizerBoxplotWishkers()),t.push(this.plotCustomizerBoxplotAttributes()),t.push(this.plotCustomizerBoxplotVarWidth()),t.push(this.plotCustomizerBoxplotNotch()),t.push(this.plotCustomizerBoxplotConnect()),t.push(this.plotCustomizerBoxplotMean()),t.push(this.plotCustomizerBoxplotMeanColorBorder()),t.push(this.plotCustomizerBoxplotMedian()),t.push(this.plotCustomizerBoxplotMedianColor()),t.push(this.plotCustomizerBoxplotMedianWidth()),t.push(this.plotCustomizerBoxplotViolin()),t.push(this.plotCustomizerBoxplotViolinShow()),t.push(this.plotCustomizerBoxplotViolinTrim()),t.push(this.plotCustomizerBoxplotViolinHide()),t.push(this.plotCustomizerBoxplotViolinRatio()),t.push(this.plotCustomizerBoxplotViolinScale()),t.push(this.plotCustomizerBoxplotViolinAdjust())):"Heatmap"==this.graphType&&(t.push(this.plotCustomizerHeatmapCellBoxColor()),t.push(this.plotCustomizerHeatmapCellBoxWidth()),t.push(this.plotCustomizerHeatmapCellBoxShow()),t.push(this.plotCustomizerHeatmapCellBoxHighligthColor()),this.plotCustomizerHeatmapSeparate(t)),[t,this.addRemoveCustomizerListenersRightPanel]},this.plotCustomizerHeatmapCellBoxColor=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerColor(this.target+"-cX-PlotCustomizerHeatmapCellBoxColor","Cell Box Color","at_col",!1,this.heatmapCellBoxColor,["changeAttribute",["heatmapCellBoxColor"]]);return t.appendChild(e),t},this.plotCustomizerHeatmapCellBoxWidth=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerInput(this.target+"-cX-PlotCustomizerHeatmapCellBoxWidth","Heatmap Cell Box Width","sp_thickness2",this.heatmapCellBoxWidth,["changeAttribute",["heatmapCellBoxWidth"]]);return t.appendChild(e),t},this.plotCustomizerHeatmapCellBoxShow=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerButton(this.target+"-cX-PlotCustomizerHeatmapCellBoxShow","Show / Hide Heatmap Cell Box","sl_eopen",["toggleAttribute",["heatmapCellBox"]]);return t.appendChild(e),t},this.plotCustomizerHeatmapCellBoxHighligthColor=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerColor(this.target+"-cX-PlotCustomizerHeatmapHighlightCellBoxColor","Highlight Heatmap Cell Box Color","at_col",!1,this.heatmapCellBoxColorHighlight,["changeAttribute",["heatmapCellBoxColorHighlight"]]);return t.appendChild(e),t},this.plotCustomizerHeatmapSeparate=function(t){if(this.smpOverlays.length){for(var e=[],i=0;i<this.smpOverlays.length;i++){var s=this.smpOverlays[i];"String"==this.meta.data.x[s].type&&e.push(s)}if(e.length){e.unshift("");var a=this.getCustomizerDivRaw(),r=this.addCustomizerSelect(this.target+"-cX-PlotCustomizertHeatmapSmpSeparate","Separate Samples By","ch_ls","",!1,e,"",["changeAttribute",["heatmapSmpSeparateBy"]]);a.appendChild(r),t.push(a)}}if(this.varOverlays.length){var n=[];for(i=0;i<this.varOverlays.length;i++){s=this.varOverlays[i];"String"==this.meta.data.z[s].type&&n.push(s)}if(n.length){n.unshift("");a=this.getCustomizerDivRaw(),r=this.addCustomizerSelect(this.target+"-cX-PlotCustomizertHeatmapVarSeparate","Separate Variables By","ch_lv","",!1,n,"",["changeAttribute",["heatmapVarSeparateBy"]]);a.appendChild(r),t.push(a)}}},this.plotCustomizerBoxplotType=function(){var t=["Box and Wishkers","Range"],e=this.newId("-cX-Customizer-Container-"),i=this.getCustomizerDivRaw(),s=this.addCustomizerHeader(e,"Type","bx_type","Click to change boxplot type");i.appendChild(s);var a=this.addCustomizerDiv(this.target+"-cX-PlotCustomizerBoxplotType",t,["bx_typewishkers","bx_typerange"],[["changeAttribute",["boxplotType","boxWhiskers"]],["changeAttribute",["boxplotType","range"]]],t,[66,25],2,this.customizerIcons);return i.appendChild(a),i},this.plotCustomizerBoxplotData=function(){this.newId("-cX-Customizer-Container-");var t=this.getCustomizerDivRaw(),e=this.addCustomizerHeader(this.newId("-cX-Customizer-Container-"),"Data","wp_data","Click to modify display");return t.appendChild(e),t},this.plotCustomizerBoxplotDataPoints=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerButton(this.target+"-cX-PlotCustomizerBoxplotDataPoints","Show / Hide All Data Points","bx_data",["toggleAttribute",["showBoxplotOriginalData"]]);return t.appendChild(e),t},this.plotCustomizerBoxplotJitter=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerButton(this.target+"-cX-PlotCustomizerBoxplotJitter","Jitter Data Points","dp_jittered",["toggleAttribute",["jitter"]]);return t.appendChild(e),t},this.plotCustomizerBoxplotBinned=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerButton(this.target+"-cX-PlotCustomizerBoxplotBinned","Bin Data Points","dp_binned",["toggleAttribute",["binned"]]);return t.appendChild(e),t},this.plotCustomizerBoxplotBinnedAlign=function(){var t=["Left","Center","Right"],e=this.newId("-cX-Customizer-Container-"),i=this.getCustomizerDivRaw(),s=this.addCustomizerHeader(e,"Bin Alignment","dp_bin","Click to change alignment");i.appendChild(s);var a=this.addCustomizerDiv(this.target+"-cX-PlotCustomizerBoxplotBinnedAlign",t,["dp_binr","dp_binc","dp_binl"],[["changeAttribute",["binAlignment","left"]],["changeAttribute",["binAlignment","center"]],["changeAttribute",["binAlignment","right"]]],t,[14,24,20],3,this.customizerIcons);return i.appendChild(a),i},this.plotCustomizerBoxplotWishkers=function(){var t=["None","Single","Double"],e=this.newId("-cX-Customizer-Container-"),i=this.getCustomizerDivRaw(),s=this.addCustomizerHeader(e,"Wishkers","bx_wishkers","Click to change wishkers");i.appendChild(s);var a=this.addCustomizerDiv(this.target+"-cX-PlotCustomizerBoxplotWishkers",t,["bx_wishkersn","bx_wishkerss","bx_wishkersd"],[["changeAttribute",["boxplotWhiskersType","none"]],["changeAttribute",["boxplotWhiskersType","single"]],["changeAttribute",["boxplotWhiskersType","double"]]],t,[14,24,20],3,this.customizerIcons);return i.appendChild(a),i},this.plotCustomizerBoxplotAttributes=function(){this.newId("-cX-Customizer-Container-");var t=this.getCustomizerDivRaw(),e=this.addCustomizerHeader(this.newId("-cX-Customizer-Container-"),"Attributes","ch_la","Click to change attributes");return t.appendChild(e),t},this.plotCustomizerBoxplotVarWidth=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerButton(this.target+"-cX-PlotCustomizerBoxplotVarWidth","Boxplot Var Width","sp_thickness",["toggleAttribute",["boxplotVarWidth"]]);return t.appendChild(e),t},this.plotCustomizerBoxplotNotch=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerButton(this.target+"-cX-PlotCustomizerBoxplotNotch","Boxplot Notch","bx_notched",["toggleAttribute",["boxplotNotched"]]);return t.appendChild(e),t},this.plotCustomizerBoxplotConnect=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerButton(this.target+"-cX-PlotCustomizerBoxplotConnect","Connect Boxplot","bx_connect",["toggleAttribute",["boxplotConnect"]]);return t.appendChild(e),t},this.plotCustomizerBoxplotMean=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerButton(this.target+"-cX-PlotCustomizerBoxplotMean","Show Boxplot Mean","bx_meanb",["toggleAttribute",["boxplotMean"]]);return t.appendChild(e),t},this.plotCustomizerBoxplotMeanColorBorder=function(){var t=this.newId("-cX-Customizer-Container-"),e=this.getCustomizerDivRaw(),i=this.addCustomizerHeader(t,"Boxplot Mean Box","bx_mean","Select color");e.appendChild(i);var s=this.addCustomizerColorBorder(this.target+"-cX-PlotCustomizerBoxplotMeanColorBorder","boxplotMeanColor","boxplotMeanBorderColor");return e.appendChild(s),e},this.plotCustomizerBoxplotMedian=function(){this.newId("-cX-Customizer-Container-");var t=this.getCustomizerDivRaw(),e=this.addCustomizerHeader(this.newId("-cX-Customizer-Container-"),"Boxplot Median","bx_medianw","Click to change");return t.appendChild(e),t},this.plotCustomizerBoxplotMedianColor=function(){var t=this.getCustomizerDivRaw();t.style.borderTop="1px solid rgb(170, 204, 246)";var e=this.addCustomizerColor(this.target+"-cX-PlotCustomizerBoxplotMedianColor","Color","at_col",!1,this.boxplotMedianColor,["changeAttribute",["boxplotMedianColor"]]);return t.appendChild(e),t},this.plotCustomizerBoxplotMedianWidth=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerInput(this.target+"-cX-PlotCustomizerBoxplotMedianWidth","Width","sp_thickness",this.boxplotMedianWidth,["changeAttribute",["boxplotMedianWidth"]]);return t.appendChild(e),t},this.plotCustomizerBoxplotViolin=function(){this.newId("-cX-Customizer-Container-");var t=this.getCustomizerDivRaw(),e=this.addCustomizerHeader(this.newId("-cX-Customizer-Container-"),"Violin","bx_violin","Click to change properties");return t.appendChild(e),t},this.plotCustomizerBoxplotViolinShow=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerButton(this.target+"-cX-PlotCustomizerBoxplotViolinShow","Show / Hide Violin","bx_violinu",["toggleAttribute",["showViolinBoxplot"]]);return t.appendChild(e),t},this.plotCustomizerBoxplotViolinTrim=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerButton(this.target+"-cX-PlotCustomizerBoxplotViolinTrim","Toggle to Trim Violin","bx_violint",["toggleAttribute",["violinTrim"]]);return t.appendChild(e),t},this.plotCustomizerBoxplotViolinHide=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerButton(this.target+"-cX-PlotCustomizerBoxplotViolinHide","Hide Boxplot (if Violin)","bx_violinbp",["toggleAttribute",["showBoxplotIfViolin"]]);return t.appendChild(e),t},this.plotCustomizerBoxplotViolinRatio=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerInput(this.target+"-cX-PlotCustomizerBoxplotViolinRatio","Boxplot / Violin Ratio","sp_thickness",this.boxplotWidthRatioIfViolin,["changeAttribute",["boxplotWidthRatioIfViolin"]]);return t.appendChild(e),t},this.plotCustomizerBoxplotViolinScale=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerSelect(this.target+"-cX-PlotCustomizerBoxplotViolinScale","Violin Scale","wp_scale",!1,!1,["area","count","width"],this.violinScale,["changeAttribute",["violinScale"]]);return t.appendChild(e),t},this.plotCustomizerBoxplotViolinAdjust=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerInput(this.target+"-cX-PlotCustomizerBoxplotViolinAdjust","Bandwidth Adjust","ch_la",this.bandwidthAdjust,["changeAttribute",["bandwidthAdjust"]]);return t.appendChild(e),t},this.plotCustomizerRemoveSplom=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerButton(this.target+"-cX-PlotCustomizerRemoveSPLOM","Remove SPLOM","ly_splomremove",["toggleAttribute",["scatterPlotMatrix"]]);return t.appendChild(e),t},this.plotCustomizerLayout=function(){var t=this.newId("-cX-Customizer-Container-"),e=this.getCustomizerDivRaw(),i=this.addCustomizerHeader(t,"Layout","g_splom","Click / Select to change property");return e.appendChild(i),e},this.plotCustomizerLayoutAdjust=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerButton(this.target+"-cX-PlotCustomizerLayoutAdjust","Adjust Layout Axes","sl_lightbulbon",["toggleAttribute",["layoutAdjust"]]);return t.appendChild(e),t},this.plotCustomizerLayoutType=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerSelect(this.target+"-cX-PlotCustomizerLayoutType","Type of Layout","ly_splom",!1,["Both panels","Upper panel","Lower panel","Correlation","Correlation - Density","Correlation - Histogram","All","First"],["both","upper","lower","correlation","correlationDensity","correlationHistogram","all","first"],this.scatterPlotMatrixType,["modifyLayoutType",[]]);return t.appendChild(e),t},this.axesCustomizer=function(){var t=[];return t.push(this.axesCustomizerLabels()),t.push(this.axesCustomizerText()),this.graphType.match(/Scatter/)&&this.axesCustomizerAssign(t),this.graphType.match(/Heatmap/)||(t.push(this.axesCustomizerAxisProperties()),t.push(this.axesCustomizerShow()),t.push(this.axesCunstomizerMin()),t.push(this.axesCunstomizerMax()),t.push(this.axesCunstomizerFormat()),t.push(this.axesCustomizerGrid())),this.graphType.match(/Scatter/)||(this.axesCustomizerLabelProperties(t),this.axesCustomizerLabelHighlight(t)),[t,this.addRemoveCustomizerListenersRightPanel]},this.axesCustomizerLabels=function(){var t=this.graphType.match(/Scatter/)?["X-Axis","Y-Axis"]:"Heatmap"==this.graphType?["Var-Title","Smp-Title"]:["X-Axis","Smp-Title"],e=this.graphType.match(/Scatter/)?["p_g2axistitlex","p_g2axistitley"]:"Heatmap"==this.graphType?["p_ghvariabletitle","p_ghsampletitle"]:["p_g1axistitle1","p_g1sampletitle"],i=this.graphType.match(/Scatter/)?["xAxisTitle","yAxisTitle"]:"Heatmap"==this.graphType?["varTitle","smpTitle"]:["xAxisTitle","smpTitle"],s=this.newId("-cX-Customizer-Container-"),a=this.getCustomizerDivRaw(),r=this.addCustomizerArrayHeader(s,t,e,i,[!1,!1],"Select text (link) and click to modify",this.target+"-cX-AxesCustomizerLabels");a.appendChild(r);var n=this.addCustomizerLabel(this.target+"-cX-AxesCustomizerLabels",i[0]);return a.appendChild(n),a},this.axesCustomizerText=function(){var t=this.graphType.match(/Scatter/)?["Titles","Ticks"]:"Heatmap"==this.graphType?["Var-Title","Smp-Title","Var-Labels","Smp-Labels"]:["X-Title","Smp-Title","Ticks","Labels"],e=this.graphType.match(/Scatter/)?["p_g2axestitles","p_g2axes"]:"Heatmap"==this.graphType?["p_ghvariabletitle","p_ghsampletitle","p_ghvariablelabels","p_ghsamplelabels"]:["p_g1axistitle1","p_g1sampletitle","p_g1axis","p_g1samplelabels"],i=this.graphType.match(/Scatter/)?["axisTitle","axisTick"]:"Heatmap"==this.graphType?["varTitle","smpTitle","varLabel","smpLabel"]:["axisTitle","smpTitle","axisTick","smpLabel"],s=this.graphType.match(/Scatter/)?[!1,!1]:[!1,!1,!1,!1],a=this.newId("-cX-Customizer-Container-"),r=this.getCustomizerDivRaw(),n=this.addCustomizerArrayHeader(a,t,e,i,s,"Select text (link) and click to modify",this.target+"-cX-AxesCustomizerText");r.appendChild(n);var o=this.addCustomizerText(this.target+"-cX-AxesCustomizerText",i[0]);return r.appendChild(o),r},this.axesCustomizerAxisProperties=function(t){var e=[[["xAxisShow","yAxisShow"],["setMinX","setMinY"],["setMaxX","setMaxY"],["xAxisTickFormat","yAxisTickFormat"]],[["yAxisShow","xAxisShow"],["setMinY","setMinX"],["setMaxY","setMaxX"],["yAxisTickFormat","xAxisTickFormat"]],[["xAxisShow","xAxis2Show"],["setMinX","setMinX2"],["setMaxX","setMaxX2"],["xAxisTickFormat","xAxis2TickFormat"]],[["xAxis2Show","xAxisShow"],["setMinX2","setMinX"],["setMaxX2","setMaxX"],["xAxis2TickFormat","xAxisTickFormat"]]],i=this.graphType.match(/Scatter/)?["X","Y"]:["X","X2"],s=this.graphType.match(/Scatter/)?["p_g2axisx","p_g2axisy"]:["p_g1axis1","p_g1axis2"],a=this.graphType.match(/Scatter/)?[["setAxis",e[1]],["setAxis",e[0]]]:[["setAxis",e[3]],["setAxis",e[2]]],r=[this.target+"-cX-AxesCustomizerAxisShow",this.target+"-cX-AxesCustomizerAxisMin",this.target+"-cX-AxesCustomizerAxisMax",this.target+"-cX-AxesCustomizerAxisFormat"],n=this.newId("-cX-Customizer-Container-"),o=this.getCustomizerDivRaw(),h=this.addCustomizerArrayHeader(n,i,s,a,!1,"Click / Select to change",r,!1,!1,""," Axis");return o.appendChild(h),o},this.axesCustomizerShow=function(t){var e=this.getCustomizerDivRaw(),i=this.addCustomizerButton(this.target+"-cX-AxesCustomizerAxisShow","Show / Hide Axis","sl_eopen",["toggleAttribute",["xAxisShow"]]);return e.appendChild(i),e},this.axesCunstomizerMin=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerInput(this.target+"-cX-AxesCustomizerAxisMin","Axis Min","dtp_min",this.setMinX,["changeAttribute",["setMinX"]]);return t.appendChild(e),t},this.axesCunstomizerMax=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerInput(this.target+"-cX-AxesCustomizerAxisMax","Axis Max","dtp_max",this.setMaxX,["changeAttribute",["setMaxX"]]);return t.appendChild(e),t},this.axesCunstomizerFormat=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerInput(this.target+"-cX-AxesCustomizerAxisFormat","Axis Format","tx_format",this.xAxisTickFormat,["changeAttribute",["xAxisTickFormat"]]);return t.appendChild(e),t},this.axesCustomizerAssign=function(t){var e=this.newId("-cX-Customizer-Container-"),i=this.getCustomizerDivRaw(),s=this.addCustomizerHeader(e,"Axes","ga_axisxy","Click lin / log in the icons belo to transform data in axes",8);i.appendChild(s);var a,r=this.graphType.match(/Scatter3D|Bubble/)?["X","Y","Z"]:["X","Y"],n=["p_g2axisx","p_g2axisy","p_g3axisz"],o=Math.floor(this.customizerRightWidth/r.length)-15,h=2==r.length?56:32;a=2==r.length?this.customizerIcons>24?"0":this.customizerIcons>18?"14px":"15px":this.customizerIcons>24?"-24px":this.customizerIcons>18?"-14px":"-5px";for(var l=this.$cX("div",{id:this.target+"-cX-AxesCustomizerAssign"},{width:this.customizerRightWidth-2+"px",height:"fit-content",cssFloat:"left",margin:"5px 0"}),c=0;c<r.length;c++){var d=r[c].toLowerCase(),p=(s=this.$cX("div",{id:e+"-Axes-"+r[c]+"-HA",className:"CanvasXpressDataCustomizer",hidefocus:"true",unselectable:"on",href:"#",draggable:!1},{width:o+"px",height:this.customizerItemHeight+16+"px",display:"flex",cssFloat:"left"}),this.$cXI(n[c],{id:e+"-Axes-"+r[c]+"-HI",className:"CanvasXpressAxesCustomizer",src:n[c],key:n[c],params:this.stringifyJSON(["addToAxis",[d+"Axis"]]),drop:!0,title:"Drag and Drop Samples into Axes"},{left:h+"px",top:.25*this.customizerItemHeight+"px",position:"relative"},!1,Math.floor(1.125*this.customizerIcons))),g=this.$cXI("ch_olin",{id:e+"-Axes-"+r[c]+"-HLI",className:"CanvasXpressAxesCustomizer",src:this[d+"AxisTransform"]&&this[d+"AxisTransform"].match("log")?"ch_olog":"ch_olin",srt:this[d+"AxisTransform"]&&this[d+"AxisTransform"].match("log")?"ch_olin":"ch_olog",params:this.stringifyJSON(["linLog",[d+"Axis"]]),title:"Click to switch between Linear and Log transformation"},{left:h+"px",top:.35*this.customizerItemHeight+"px",position:"relative"},!1,Math.floor(.6*this.customizerIcons)),u=this.$cX("span",{id:e+"-Axes-"+r[c]+"-HLS",className:"CanvasXpressCustomizerRight",innerHTML:r[c]+" Axis",draggable:!1},{left:a,top:.75*this.customizerItemHeight+"px"});s.appendChild(p),s.appendChild(g),s.appendChild(u),l.appendChild(s)}i.appendChild(l),t.push(i);var m=this.addCustomizerHeaderSortPanel(e+"-AxesAssignSamples","Samples","Drag and Drop Samples into Axes",!1,200,this.loadSamplesWranglingCustomizerDiv(),this.target+"-cX-WranglingCustomizerSortSamples");t.push(m)},this.axesCustomizerGrid=function(){var t=this.newId("-cX-Customizer-Container-"),e=this.getCustomizerDivRaw(),i=this.addCustomizerArrayHeader(t,this.graphType.match(/Scatter/)?["X Grid","Y Grid"]:["X Grid"],this.graphType.match(/Scatter/)?["gr_g2x","gr_g2y"]:["gr_g1"],this.graphType.match(/Scatter/)?["x","y"]:["x"],this.graphType.match(/Scatter/)?["x","y"]:["x"],this.graphType.match(/Scatter/)?"Select text (link) and click to modify":"Click to modify",this.target+"-cX-AxesCustomizerGrid");e.appendChild(i);var s=this.addCustomizerGrid(this.target+"-cX-AxesCustomizerGrid","x");return e.appendChild(s),e},this.axesCustomizerLabelProperties=function(t){t.push(this.axesCustomizerAxisLabels()),t.push(this.axesCustomizerAxisLabelsIntervals()),t.push(this.axesCustomizerAxisLabelsRotate()),t.push(this.axesCustomizerAxisLabelsShow()),t.push(this.axesCustomizerLabelsHighlightColor())},this.axesCustomizerAxisLabels=function(t){var e="Heatmap"==this.graphType?["Sample","Variable"]:["Sample"],i="Heatmap"==this.graphType?["p_ghsamplelabels","p_ghvariablelabels"]:["p_g1samplelabels"],s="Heatmap"==this.graphType?[["setAxisLabels",["Sample"]],["setAxisLabels",["Variable"]]]:[["setAxisLabels",["Sample"]]],a=[this.target+"-cX-AxesCustomizerLabelsIntervals",this.target+"-cX-AxesCustomizerLabelsRotate",this.target+"-cX-ToolsCustomizerLabelsShow",this.target+"-cX-AxesCustomizerHighlightColor"],r=this.newId("-cX-Customizer-Container-"),n=this.getCustomizerDivRaw(),o=this.addCustomizerArrayHeader(r,e,i,s,!1,"Click / Select to change",a,!1,!1,""," Labels");return n.appendChild(o),n},this.axesCustomizerAxisLabelsIntervals=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerInput(this.target+"-cX-AxesCustomizerLabelsIntervals","Interval","ch_snumber",this.smpLabelInterval,["changeAttribute",["smpLabelInterval"]]);return t.appendChild(e),t},this.axesCustomizerAxisLabelsRotate=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerInput(this.target+"-cX-AxesCustomizerLabelsRotate","Rotate in Degrees","rt_c",this.smpLabelRotate,["changeAttribute",["smpLabelRotate"]]);return t.appendChild(e),t},this.axesCustomizerAxisLabelsShow=function(t){var e=this.getCustomizerDivRaw(),i=this.addCustomizerButton(this.target+"-cX-ToolsCustomizerLabelsShow","Show / Hide Label Show","sl_eopen",["toggleAttribute",["showSampleNames"]]);return e.appendChild(i),e},this.axesCustomizerLabelsHighlightColor=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerColor(this.target+"-cX-AxesCustomizerHighlightColor","Highlight Color","at_col",!1,this.smpHighlightColor,["changeAttribute",["smpHighlightColor"]]);return t.appendChild(e),t},this.axesCustomizerLabelHighlight=function(t){var e=this.newId("-cX-Customizer-Container-"),i=this.getCustomizerDivRaw(),s=this.addCustomizerHeader(e,"Highlight","sl_lightbulboff","Click to reset highlights");i.appendChild(s);var a=this.addCustomizerDiv(this.target+"-cX-MetaCustomizerProperties",["Highligtht"],["sl_lightbulbon"],[["highlight"]],["Highlight"],[40],1,this.customizerIcons,[!0]),r=this.loadSamplesWranglingCustomizerDiv(),n="Heatmap"==this.graphType&&this.loadVariablesWranglingCustomizerDiv(),o=this.target+"-cX-WranglingCustomizerSortSamples",h="Heatmap"==this.graphType&&"-cX-WranglingCustomizerSortVariables";i.appendChild(a),t.push(i);var l=this.addCustomizerHeaderSortPanel(e+"-AxesCustomizerLabelsSamplesHighlight","Samples","Drag and Drop Samples to highlight",0,200,r,o);if(t.push(l),n){var c=this.addCustomizerHeaderSortPanel(e+"-AxesCustomizerLabelsVariablesHighlight","Variables","Drag and Drop Variables to highlight",0,200,n,h);t.push(c)}},this.legendCustomizer=function(){var t=[];return t.push(this.legendCustomizerShow()),t.push(this.legendCustomizerText()),t.push(this.legendCustomizerLocation()),t.push(this.legendCustomizerPosition()),"Heatmap"==this.graphType&&t.push(this.indicatorCustomizerPosition()),t.push(this.legendCustomizerColumns()),t.push(this.legendCustomizerBackgroundColorBorder()),"Heatmap"==this.graphType&&(t.push(this.indicatorCustomizer()),t.push(this.indicatorCustomizerWidth()),t.push(this.indicatorCustomizerHeight()),t.push(this.indicatorCustomizerHistogram())),[t,this.addRemoveCustomizerListenersRightPanel]},this.legendCustomizerMargin=function(){var t=this.newId("-cX-Customizer-Container-"),e=this.getCustomizerDivRaw(),i=this.addCustomizerHeader(t,"Legend Margin","mr_all","Change margin size");e.appendChild(i);var s=this.addCustomizerInt(this.target+"-cX-LegendCustomizerMargin","legendMargin");return e.appendChild(s),e},this.legendCustomizerShow=function(){var t=this.smpOverlays.length?["Legend","Overlays"]:["Legend"],e=this.smpOverlays.length?["lg_g1","lg_h"]:[this.graphType.match(/Scatter/)?"lg_g2":"lg_g1"],i=this.smpOverlays.length?[["toggleAttribute",["showLegend"]],["toggleAttribute",["showSmpOverlaysLegend"]]]:[["toggleAttribute",["showLegend"]]],s=this.smpOverlays.length?[26,28]:[42];"Heatmap"==this.graphType&&(t.push("Indicator"),e.push("lg_h"),i.push(["toggleAttribute",["showHeatmapIndicator"]]),s.push(28));var a=this.newId("-cX-Customizer-Container-"),r=this.getCustomizerDivRaw(),n=this.addCustomizerHeader(a,"Legends","lg_legend","Click to hide /show");r.appendChild(n);var o=this.addCustomizerDiv(this.target+"-cX-LegendCustomizerShow",t,e,i,t,s,s.length,this.customizerIcons);return r.appendChild(o),r},this.legendCustomizerText=function(){var t=this.smpOverlays.length?["Legend Title","Legend Text","Overlays"]:["Legend Title","Legend Text"],e=this.smpOverlays.length?["lg_g1","lg_g1","lg_h"]:this.graphType.match(/Scatter/)?["lg_g2","lg_g2"]:["lg_g1","lg_g1"],i=this.smpOverlays.length?["legendTitle","legendText","overlay"]:["legendTitle","legendText"],s=this.smpOverlays.length?["legendTitle","legendText","overlay"]:["legendTitle","legendText"],a=this.newId("-cX-Customizer-Container-"),r=this.getCustomizerDivRaw(),n=this.addCustomizerArrayHeader(a,t,e,i,s,"Click to modify font text",this.target+"-cX-LegendCustomizerText");r.appendChild(n);var o=this.addCustomizerText(this.target+"-cX-LegendCustomizerText","legendTitle");return r.appendChild(o),r},this.legendCustomizerLocation=function(){var t=["Inside / Outside Plot"],e=this.newId("-cX-Customizer-Container-"),i=this.getCustomizerDivRaw(),s=this.addCustomizerHeader(e,"Legend Location","ps_toloc3","Click to toggle location");i.appendChild(s);var a=this.addCustomizerDiv(this.target+"-cX-LegendCustomizerLocation",t,["dps_inout"],[["toggleAttribute",["legendInside"]]],t,[76],1,this.customizerIcons);return i.appendChild(a),i},this.legendCustomizerPosition=function(){var t=["T-Right","Right","B-Right","Bottom","B-Left","Left","T-Left","Top"],e=this.newId("-cX-Customizer-Container-"),i=this.getCustomizerDivRaw(),s=this.addCustomizerHeader(e,"Legend Position","ps_toloc","Click to change position");i.appendChild(s);var a=this.addCustomizerDiv(this.target+"-cX-LegendCustomizerPosition",t,["ps_topright","ps_right","ps_bottomright","ps_bottom","ps_bottomleft","ps_left","ps_topleft","ps_top"],[["changeAttribute",["legendPosition","topRight"]],["changeAttribute",["legendPosition","right"]],["changeAttribute",["legendPosition","bottomRight"]],["changeAttribute",["legendPosition","bottom"]],["changeAttribute",["legendPosition","bottomLeft"]],["changeAttribute",["legendPosition","left"]],["changeAttribute",["legendPosition","topLeft"]],["changeAttribute",["legendPosition","top"]]],t,[22,16,24,20,21,15,18,12],4,this.customizerIcons);return i.appendChild(a),i},this.legendCustomizerColumns=function(){var t=this.newId("-cX-Customizer-Container-"),e=this.getCustomizerDivRaw(),i=this.addCustomizerHeader(t,"Legend Columns","ch_snumber","Click to modify columns");e.appendChild(i);var s=this.addCustomizerNumber(this.target+"-cX-LegendCustomizerColumns","legendColumns");return e.appendChild(s),e},this.legendCustomizerBackgroundColorBorder=function(){var t=this.newId("-cX-Customizer-Container-"),e=this.getCustomizerDivRaw(),i=this.addCustomizerHeader(t,"Legend Background","lg_legend","Select color");e.appendChild(i);var s=this.addCustomizerColorBorder(this.target+"-cX-LegendCustomizerBackgroundColorBorder","legendBackgroundColor","legendBackgroundBorderColor");return e.appendChild(s),e},this.indicatorCustomizerPosition=function(){var t=["T-Right","Right","T-Left","Top"],e=this.newId("-cX-Customizer-Container-"),i=this.getCustomizerDivRaw(),s=this.addCustomizerHeader(e,"Indicator Position","ps_toloc2","Click to change position");i.appendChild(s);var a=this.addCustomizerDiv(this.target+"-cX-IndicatorCustomizerPosition",t,["ps_topright","ps_right","ps_topleft","ps_top"],[["changeAttribute",["heatmapIndicatorPosition","topRight"]],["changeAttribute",["heatmapIndicatorPosition","right"]],["changeAttribute",["heatmapIndicatorPosition","topLeft"]],["changeAttribute",["heatmapIndicatorPosition","top"]]],t,[22,16,18,12],4,this.customizerIcons);return i.appendChild(a),i},this.indicatorCustomizer=function(){var t=this.newId("-cX-Customizer-Container-"),e=this.getCustomizerDivRaw(),i=this.addCustomizerHeader(t,"Indicator","i_h","Click / Select to change property");return e.appendChild(i),e},this.indicatorCustomizerWidth=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerInput(this.target+"-cX-legendCustomizerIndicatorWidth","Indicator Width","sp_thickness",this.heatmapIndicatorWidth,["changeAttribute",["heatmapIndicatorWidth"]]);return t.appendChild(e),t},this.indicatorCustomizerHeight=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerInput(this.target+"-cX-legendCustomizerIndicatorHeight","Indicator Height","sp_heightness",this.heatmapIndicatorHeight,["changeAttribute",["heatmapIndicatorHeight"]]);return t.appendChild(e),t},this.indicatorCustomizerHistogram=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerButton(this.target+"-cX-IndicatorCustomizerHistogram","Indicator Histogram","i_hist",["toggleAttribute",["heatmapIndicatorHistogram"]]);return t.appendChild(e),t},this.metaCustomizer=function(){var t=[];return this.metaCustomizerProperties(t),this.graphType.match(/Scatter/)||this.metaCustomizerOverlaysProperties(t),t.push(this.metaCustomizerDOE()),[t,this.addRemoveCustomizerListenersRightPanel]},this.metaCustomizerProperties=function(t){var e=this.newId("-cX-Customizer-Container-"),i=this.getCustomizerDivRaw(),s=this.addCustomizerHeader(e,"Meta","at_colshpsze","Click property to clear / reset");i.appendChild(s);var a=this.addCustomizerDiv(this.target+"-cX-MetaCustomizerProperties",["Color","Shape","Size","Pattern","Connect","Stack","Overlays","Group","Segregate"],["at_col","at_shp","at_sze","at_pat","bx_connect","g_stacked","o_g1","a_group","ly_segregate"],[["colorBy"],["shapeBy"],["sizeBy"],["patternBy"],["connectBy"],["stackBy"],["overlays"],["groupSamples"],["segregate"]],["Color","Shape","Size","Pattern","Connect","Stack","Overlays","Group","Segregate"],[20,26,18,30,32,22,32,24,36],3,this.customizerIcons,[!0,!0,!0,!0,!0,!0,!0,!0,!0]),r=this.graphType.match(/Scatter/)?this.loadDescriptionsWranglingCustomizerDiv():this.loadAnnotationsWranglingCustomizerDiv(),n="Heatmap"==this.graphType&&this.loadDescriptionsWranglingCustomizerDiv(),o=this.target+(this.graphType.match(/Scatter/)?"-cX-WranglingCustomizerSortDescriptions":"-cX-WranglingCustomizerSortAnnotations"),h="Heatmap"==this.graphType&&"-cX-WranglingCustomizerSortDescriptions";i.appendChild(a),t.push(i);var l=this.addCustomizerHeaderSortPanel(e+"-MetaCustomizerPropertiesMeta",n?"Smp Meta":"Metadata","Drag and Drop Metadata into Property above",12,200,r,o);if(t.push(l),n){var c=this.addCustomizerHeaderSortPanel(e+"-MetaCustomizerPropertiesMeta2","Var Meta","Drag and Drop Metadata into Property above",12,200,n,h);t.push(c)}},this.metaCustomizerOverlaysProperties=function(t){var e=this.getMetaDataByType("x"),i="Heatmap"==this.graphType&&this.getMetaDataByType("z");e&&i&&t.push(this.metaCustomizerOverlaysPanel());var s=e&&this.smpOverlays.length;e&&this.smpOverlays.length&&(t.push(this.metaCustomizerOverlays("Smp",e)),t.push(this.metaCustomizerOverlayType("Smp",e[0])),t.push(this.metaCustomizerOverlayColor("Smp",e[0])),t.push(this.metaCustomizerOverlayScheme("Smp",e[0])),t.push(this.metaCustomizerOverlayShowLegend("Smp",e[0])),t.push(this.metaCustomizerOverlayThickness("Smp",e[0]))),i&&this.varOverlays.length&&(t.push(this.metaCustomizerOverlays("Var",i,s)),t.push(this.metaCustomizerOverlayType("Var",i[0],s)),t.push(this.metaCustomizerOverlayColor("Var",i[0],s)),t.push(this.metaCustomizerOverlayScheme("Var",i[0],s)),t.push(this.metaCustomizerOverlayShowLegend("Var",i[0],s)),t.push(this.metaCustomizerOverlayThickness("Var",i[0],s)))},this.metaCustomizerOverlaysPanel=function(){var t=this.newId("-cX-Customizer-Container-"),e=this.$cX("div",{id:t+"-MetaOverlaysPanel",className:"CanvasXpressCustomizerContainer"},{width:this.customizerRightWidth-2+"px",height:"58px"}),i=[[[this.target+"-MetaSmpOverlays",this.target+"-cX-metaCustomizerOverlaySmpType",this.target+"-cX-metaCustomizerOverlaySmpScheme",this.target+"-cX-metaCustomizerOverlaySmpColor",this.target+"-cX-metaCustomizerOverlaySmpShowLegend",this.target+"-cX-metaCustomizerOverlaySmpThickness"],[this.target+"-MetaVarOverlays",this.target+"-cX-metaCustomizerOverlayVarType",this.target+"-cX-metaCustomizerOverlayVarScheme",this.target+"-cX-metaCustomizerOverlayVarColor",this.target+"-cX-metaCustomizerOverlayVarShowLegend",this.target+"-cX-metaCustomizerOverlayVarThickness"]],[[this.target+"-MetaVarOverlays",this.target+"-cX-metaCustomizerOverlayVarType",this.target+"-cX-metaCustomizerOverlayVarScheme",this.target+"-cX-metaCustomizerOverlayVarColor",this.target+"-cX-metaCustomizerOverlayVarShowLegend",this.target+"-cX-metaCustomizerOverlayVarThickness"],[this.target+"-MetaSmpOverlays",this.target+"-cX-metaCustomizerOverlaySmpType",this.target+"-cX-metaCustomizerOverlaySmpScheme",this.target+"-cX-metaCustomizerOverlaySmpColor",this.target+"-cX-metaCustomizerOverlaySmpShowLegend",this.target+"-cX-metaCustomizerOverlaySmpThickness"]]],s=this.addCustomizerPanelHeader(t,["Samples","Variables"],i);return e.appendChild(s),e},this.metaCustomizerOverlays=function(t,e,i){for(var s=this.target+"-Meta"+t+"Overlays",a="Smp"==t?this.smpOverlays:this.varOverlays,r=this.$cX("div",{id:s,className:"CanvasXpressCustomizerContainer"},{width:this.customizerRightWidth-2+"px",display:i?"none":"block"}),n=[],o=[],h=[],l=[],c=[this.target+"-cX-metaCustomizerOverlay"+t+"Type",this.target+"-cX-metaCustomizerOverlay"+t+"Scheme",this.target+"-cX-metaCustomizerOverlay"+t+"Color",this.target+"-cX-metaCustomizerOverlay"+t+"ShowLegend",this.target+"-cX-metaCustomizerOverlay"+t+"Thickness"],d=0;d<e.length;d++)if(a.includes(e[d])){var p=e[d].length>9?e[d].substring(0,8):e[d];n.push(p),o.push("ch_l"+e[d].substring(0,1).toLowerCase()),h.push([e[d]]),l.push(e[d])}var g=this.addCustomizerArrayHeader(s,n,o,h,l,"",c,!1,!1,"Var"==t?"Var Overlays - ":"Heatmap"==this.graphType?"Smp Overlays - ":"");return r.appendChild(g),r},this.metaCustomizerOverlayType=function(t,e,i){for(var s="Smp"==t?this.meta.data.x:this.meta.data.z,a="Smp"==t?this.smpOverlayProperties:this.varOverlayProperties,r=["Default","Text","Treemap"],n=[],o=["Area","AreaLine","Bar","BarLine","Dotplot","DotLine","Default","Heatmap","Line","Pie","Stacked","StackedLine","StackedPercent","StackedPercentLine","Treemap"],h=[],l=[],c=[],d=0;d<r.length;d++)n.push(["modifyOverlaysProperties",["Default"==r[d]?"Heatmap":r[d],t.toLowerCase()+"OverlayProperties",!1,"type"]]);for(d=0;d<o.length;d++)h.push(["modifyOverlaysProperties",[o[d],t.toLowerCase()+"OverlayProperties",!1,"type"]]);var p={type:t.toLowerCase(),str:r,strParam:n,strOver:[],num:o,numParam:h,numOver:[]};for(d in s)"Numeric"==s[d].type?p.numOver.push(d):p.strOver.push(d),d==e&&(df=a[d].type,c=["modifyOverlaysProperties",[df,t.toLowerCase()+"OverlayProperties",e,"type"]],l="Numeric"==s[d].type?this.cloneObject(o):this.cloneObject(r));var g=this.getCustomizerDivRaw(),u=this.addCustomizerSelect(this.target+"-cX-metaCustomizerOverlay"+t+"Type","Type","ly_doe",!1,!1,l,df,c,!1,p);return g.appendChild(u),g.firstChild.style.display=i?"none":"block",g},this.metaCustomizerOverlayScheme=function(t,e,s){var a="Smp"==t?this.meta.data.x:this.meta.data.z,r="Smp"==t?this.smpOverlayProperties:this.varOverlayProperties;for(i in a)i==e&&(df=r[i].scheme);var n=this.getCustomizerDivRaw(),o=this.addCustomizerSelect(this.target+"-cX-metaCustomizerOverlay"+t+"Scheme","Overlay Scheme","at_palette","String overlays only",!1,this.getColorSchemes(),df,["modifyColorProperties",[df,e,"Smp"==t?"x":"z"]]);return n.appendChild(o),n.firstChild.style.display=s?"none":"block",n},this.metaCustomizerOverlayColor=function(t,e,s){var a="Smp"==t?this.meta.data.x:this.meta.data.z,r="Smp"==t?this.smpOverlayProperties:this.varOverlayProperties;for(i in a)i==e&&(df=r[i].color);var n=this.getCustomizerDivRaw(),o=this.addCustomizerColor(this.target+"-cX-metaCustomizerOverlay"+t+"Color","Overlay Color","at_col","Numeric overlays only",df,["modifyOverlaysProperties",[df,t.toLowerCase()+"OverlayProperties",e,"color"]]);return n.appendChild(o),n.firstChild.style.display=s?"none":"block",n},this.metaCustomizerOverlayShowLegend=function(t,e,s){var a="Smp"==t?this.meta.data.x:this.meta.data.z,r="Smp"==t?this.smpOverlayProperties:this.varOverlayProperties;for(i in a)i==e&&(df=r[i].showLegend);var n=this.getCustomizerDivRaw(),o=this.addCustomizerSelect(this.target+"-cX-metaCustomizerOverlay"+t+"ShowLegend","Overlay Legend","sl_eopen",!1,!1,[!0,!1],df,["modifyOverlaysProperties",[df,t.toLowerCase()+"OverlayProperties",e,"showLegend"]]);return n.appendChild(o),n.firstChild.style.display=s?"none":"block",n},this.metaCustomizerOverlayThickness=function(t,e,s){var a="Smp"==t?this.meta.data.x:this.meta.data.z,r="Smp"==t?this.smpOverlayProperties:this.varOverlayProperties;for(i in a)i==e&&(df=r[i].thickness||this.overlaysThickness);var n=this.getCustomizerDivRaw(),o=this.addCustomizerInput(this.target+"-cX-metaCustomizerOverlay"+t+"Thickness","Overlay Thickness","sp_thickness",df,["modifyOverlaysProperties",[df,t.toLowerCase()+"OverlayProperties",e,"thickness"]]);return n.appendChild(o),n.firstChild.style.display=s?"none":"block",n},this.metaCustomizerDOE=function(){var t=this.newId("-cX-Customizer-Container-"),e=this.getCustomizerDivRaw(),i=this.addCustomizerHeader(t,"DOE","z_zoom","Click to Explore Metadata");e.appendChild(i);var s=this.addCustomizerDiv(this.target+"-cX-MetaCustomizerDOE",["Explore Meta-Data"],["ly_doe"],[["createDOE"]],["Explore Meta-Data"],[70],1,this.customizerIcons);return e.appendChild(s),e},this.wranglingCustomizer=function(){var t=[],e=this.newId("-cX-Customizer-Container-"),i=this.getCustomizerDivRaw(),s=this.addCustomizerHeader(e+"Data-Columns-","Cols","tb_col","Drag and Drop to convert to data / meta-data. Double-click on item to move all other items to meta-data",16),a=this.getCustomizerDivRaw(),r=this.addCustomizerHeader(e+"Data-Rows-","Rows","tb_row","Drag and Drop to convert to data / meta-data. Double-click to toggle item type Numeric / String",16);return i.appendChild(s),i.appendChild(this.wranglingCustomizerColumns()),a.appendChild(r),a.appendChild(this.wranglingCustomizerRows()),t.push(i),t.push(a),[t,this.addRemoveCustomizerListenersRightPanel]},this.wranglingCustomizerColumns=function(){var t=this.$cX("div",{className:"CanvasXpressDataCustomizerPanel"});return this.addCustomizerVariablesDiv(t),this.addCustomizerAnnotationsDiv(t),t},this.wranglingCustomizerRows=function(){var t=this.$cX("div",{className:"CanvasXpressDataCustomizerPanel"});return this.addCustomizerSamplesDiv(t),this.addCustomizerDescriptionsDiv(t),t},this.removeEntriesDataCustomizerContainer=function(t){for(var e,i,s,a=0;a<t.childNodes.length;a++){var r=t.childNodes[a];0==a&&(e=r.type,i=r.params),this.addRemoveEvtListener("removeEvtListener",r,"dragstart",this.dragStartCustomizer,!1),this.addRemoveEvtListener("removeEvtListener",r,"dragend",this.dragEndCustomizer,!1),this.addRemoveEvtListener("removeEvtListener",r,"mouseover",this.mouseoverSpanCustomizer,!1),this.addRemoveEvtListener("removeEvtListener",r,"mouseout",this.mouseoutSpanCustomizer,!1),"vars"!=r.type&&"smps"!=r.type&&"x"!=r.type&&"z"!=r.type||(0==a&&(s=this.meta.data[r.type]),this.addRemoveEvtListener("removeEvtListener",r,"dblclick",this.dblClickCustomizer,!1))}for(;t.childNodes.length;)t.removeChild(t.childNodes[0]);return{type:e,params:i,meta:s}},this.addEntriesDataCustomizerContainer=function(t,e,i,s,a){for(var r=0,n=[],o=this.customizerEntriesAsList?"CanvasXpressDataCustomizerList":"CanvasXpressDataCustomizer",h=0;h<s.length;h++){var l=s[h][2],c=this.$cX("img",{id:this.target+"-cX-WranglingCustomizerEntriesImage-"+l,src:CanvasXpress.png,className:"CanvasXpressDataCustomizerMask"}),d=this.$cX("span",{id:this.target+"-cX-WranglingCustomizerEntries-"+l,innerHTML:l,className:o+"Numeric draggable",type:i.type,numeric:!0,params:i.params,draggable:!0,spellcheck:!1});i.meta&&(d.className=i.meta[l].unique?o+"Unique draggable":"String"==i.meta[l].type?o+"String draggable":o+"Numeric draggable",d.unique=i.meta[l].unique,d.numeric="String"!=i.meta[l].type,i.meta[l].unique&&(d.title="Double-click to convert to Id"),(i.meta[l].date||i.meta[l].geo)&&(d.style.color="rgb(0,255,0)")),d.appendChild(c),e.appendChild(d),a?d.style.top=s[0][1]-7+"px":(n.push([d.offsetLeft-t.offsetLeft,d.offsetTop-t.offsetTop,d.textContent]),d.offsetTop-t.offsetTop<t.clientHeight&&(r=h))}if(!a)for(;e.childNodes[r+1];)e.removeChild(e.childNodes[r+1]);for(h=0;h<e.childNodes.length;h++){var p=e.childNodes[h];this.addRemoveEvtListener("addEvtListener",p,"dragstart",this.dragStartCustomizer,!1),this.addRemoveEvtListener("addEvtListener",p,"dragend",this.dragEndCustomizer,!1),this.addRemoveEvtListener("addEvtListener",p,"mouseover",this.mouseoverSpanCustomizer,!1),this.addRemoveEvtListener("addEvtListener",p,"mouseout",this.mouseoutSpanCustomizer,!1),"vars"!=p.type&&"smps"!=p.type&&"x"!=p.type&&"z"!=p.type||this.addRemoveEvtListener("addEvtListener",p,"dblclick",this.dblClickCustomizer,!1)}return n},this.scrollCustomizer=function(t){return function(e){var i=t.getTargetEvent(e),s=i.population,a=i.firstChild,r=i.scrollTop,n=a.firstChild,o=[],h=null;if(s){for(var l=0;l<s.length;l++)if(s[l][1]>r&&s[l][1]<i.clientHeight+r)null==h&&(h=l),o.push(s[l]);else if(s[l][1]>r+n.scrollHeight)break;if(o[0][2]==n.textContent)return!1;if(h>0){h--;for(l=0;l<2;l++)if(h>=0&&s[h])for(var c=s[h][1];s[h]&&s[h][1]==c&&h>=0;)o.unshift(s[h]),h--}var d=t.removeEntriesDataCustomizerContainer(a);t.addEntriesDataCustomizerContainer(i,a,d,o,!0)}return!1}}(this),this.dropCustomizer=function(t){return function(e){var i,s,a,r,n=function(){if(s=c.type,p==s)return t.updateDataCustomizerContainerPopulation(u),!1;if("smps"==p&&"z"==s)l.type=s,t.resetAxes(!0),t[g](d),l.params[0]="switchAnnotationToSmp";else if("z"==p&&"smps"==s)l.type=s,t.resetAxes(!0),t[g](d),l.params[0]="switchSmpToAnnotation";else if("vars"==p&&"x"==s)l.type=s,t.resetAxes(!0),t[g](d),l.params[0]="switchAnnotationToVar";else{if("x"!=p||"vars"!=s)return alert("Ooops! Only changes between data and ortogonal numeric metadata"),!1;l.type=s,t.resetAxes(!0),t[g](d),l.params[0]="switchVarToAnnotation"}c.firstChild.appendChild(l),t.updateDataCustomizerContainerPopulation(u),t.updateDataCustomizerContainerPopulation(c)},o=function(){switch(i=r?r[0]:"empty",a=c.getAttribute("title").split(" : ")[0],i){case"empty":break;case"highlight":"smps"==p?t.modifyObjectArray(d,!1,"highlightSmp",!0,!0):"vars"==p&&t.modifyObjectArray(d,!1,"highlightVar",!0,!0);break;case"overlays":"x"==p?t.modifySampleOverlays(d):"z"==p?t.modifyVariableOverlays(d):alert("Ooops! Only Sample or Variable factors"),t.addRemoveCustomizerListenersRightPanel("removeEvtListener"),t.transitionMagicCustomizer(t.$(t.target+"-cX-Customizer-Right-Panel"),t.metaCustomizer);break;case"treemapBy":if("x"==p){var n=t.treemapBy;if(n.includes(d)){for(var o=[],h=0;h<n.length;h++)n[h]!=d&&o.push(n[h]);n=o}else n.push(d);n.length>0?c.setAttribute("title",a+" : "+t.treemapBy.join(", ")):c.setAttribute("title",a)}else alert("Ooops! Only Sample factors");t.draw({func:"dropCustomizer",par:[e]});break;case"pivotX":if("x"==p){t.isPivot?t.removePivot():t.pivotX(d);var u=c.getAttribute("src");c.setAttribute("src",c.getAttribute("asr")),c.setAttribute("asr",u)}else alert("Ooops! Only Sample factors");break;case"sortVariables":"z"==p?t.modifySort("cat","var",d):"smps"==p?t.modifySort("smp","var",d):"vars"==p?alert("Ooops! No sorting variables by variable data!"):alert("Ooops! No sorting variables by sample metadata!");break;case"sortSamples":"x"==p?t.modifySort("cat","smp",d):"vars"==p?t.modifySort("var","smp",d):"smps"==p?alert("Ooops! No sorting samples by sample data!"):alert("Ooops! No sorting samples by variable metadata!");break;case"groupSamples":if("x"==p){var m=t.groupingFactors;if(m.includes(d)){for(o=[],h=0;h<m.length;h++)m[h]!=d&&o.push(m[h]);m=o}else m.push(d);m.length>0?(t.groupSamples(m),c.setAttribute("title",a+" : "+t.groupingFactors.join(", "))):(t.ungroupSamples(),c.setAttribute("title",a))}else alert("Ooops! Only Sample factors");break;case"segregate":var f;if("x"==p)if((f=t.segregateSamplesBy).includes(d)){var o=[];for(h=0;h<f.length;h++)f[h]!=d&&o.push(f[h]);o.length>0?(t.segregateSamplesBy=o,t.segregate("Samples",o)):(t.segregateSamplesBy=[],t.desegregate("Samples"))}else t.segregateSamplesBy.length+t.segregateVariablesBy.length<2?(f.push(d),t.segregate("Samples",f)):alert("Ooops! Only 2 segregation factors");else if("z"==p)if((f=t.segregateVariablesBy).includes(d)){for(o=[],h=0;h<f.length;h++)f[h]!=d&&o.push(f[h]);o.length>0?(t.segregateVariablesBy=o,t.segregate("Variables",o)):(t.segregateVariablesBy=[],t.desegregate("Variables"))}else t.segregateSamplesBy.length+t.segregateVariablesBy.length<2?(f.push(d),t.segregate("Variables",f)):alert("Ooops! Only 2 segregation factors");else alert("Ooops! Only Sample or Variable factors");o=(o=t.segregateVariablesBy).concat(t.segregateSamplesBy),c.setAttribute("title",o.length>0?a+" : "+o.join(", "):a);break;case"addToAxis":var y=r[1][0];"smps"==p?(e.shiftKey?t.changeSampleInAxis(d,y):t.changeSampleInAxis(d,y,!0),c.setAttribute("title",a+" : "+t[y].join(", "))):alert("Ooops! Only samples allowed");break;case"motion":if(s=c.getAttribute("type"),"smps"==p){l.type=s,t.resetAxes(!0),t[g](d),l.params[0]="switchAnnotationToSmp";var x=t.$(t.target+"-cX-WranglingCustomizerDescriptions");x&&x.appendChild(l)}else if("vars"==p){l.type=s,t.resetAxes(!0),t[g](d),l.params[0]="switchAnnotationToVar";var v=t.$(t.target+"-cX-WranglingCustomizerAnnotations");v&&v.appendChild(l)}t.changeAttribute("motionBy",d),c.setAttribute("title",a+" : "+d);break;case"linLog":break;default:t.changeAttribute(i,d),c.setAttribute("title",a+" : "+d)}};t.cancelEvent(e);var h=e.dataTransfer.getData("text"),l=t.$(h),c=t.getTargetEvent(e);if(l){var d=l.innerText,p=l.type,g=l.params[0],u=l.parentNode.parentNode;t.resetDataCustomizerDivs(),c.tagName.toUpperCase().match(/SVG|IMG/)?!(r=!!c.getAttribute("params")&&t.parseJSON(c.getAttribute("params")))&&c.parentNode&&c.parentNode.parentNode&&c.parentNode.parentNode.parentNode?(c=c.parentNode.parentNode.parentNode,n()):o():("SPAN"==c.tagName&&c.parentNode.lastChild&&!c.parentNode.lastChild.tagName.toUpperCase().match(/SVG|IMG/)?c=c.parentNode:"DIV"==e.target.tagName.toUpperCase()&&(c=c.parentNode&&c.parentNode.type?c.parentNode:c),c.type?n():(c=c.firstChild,r=!!c.getAttribute("params")&&t.parseJSON(c.getAttribute("params")),o()))}return!1}}(this),this.updateDataCustomizerContainerPopulation=function(t){var e=this,i=t.id,s=t.firstChild,a=function(t){e.addRemoveEvtListener(t,s,"drop",e.dropCustomizer,!1),e.addRemoveEvtListener(t,s,"dragover",e.dragOverCustomizer,!1),e.addRemoveEvtListener(t,s,"dragenter",e.dragEnterCustomizer,!1),e.addRemoveEvtListener(t,s,"dragleave",e.dragLeaveCustomizer,!1);for(var i=0;i<s.childNodes.length;i++){var a=s.childNodes[i];"SPAN"==a.tagName&&a.childNodes.length&&a.lastChild.tagName&&a.lastChild.tagName.toUpperCase().match(/SVG|IMG/)&&(e.addRemoveEvtListener(t,a,"dragstart",e.dragStartCustomizer,!1),e.addRemoveEvtListener(t,a,"dragend",e.dragEndCustomizer,!1),e.addRemoveEvtListener(t,a,"mouseover",e.mouseoverSpanCustomizer,!1),e.addRemoveEvtListener(t,a,"mouseout",e.mouseoutSpanCustomizer,!1),e.addRemoveEvtListener(t,a,"dblclick",e.dblClickCustomizer,!1))}};switch(a("removeEvtListener"),t.removeChild(s),s=this.$cX("div",{id:i+"-Mask"},{width:this.customizerRightWidth-16+"px",minHeight:"102px"}),i){case this.target+"-cX-WranglingCustomizerVariables":this.loadVariablesWranglingCustomizerDiv(s,!0);break;case this.target+"-cX-WranglingCustomizerSamples":this.loadSamplesWranglingCustomizerDiv(s,!0);break;case this.target+"-cX-WranglingCustomizerAnnotations":this.loadAnnotationsWranglingCustomizerDiv(s,!0);break;case this.target+"-cX-WranglingCustomizerDescriptions":this.loadDescriptionsWranglingCustomizerDiv(s,!0)}a("addEvtListener");for(var r=[],n=0;n<s.childNodes.length;n++){var o=s.childNodes[n];r.push([o.offsetLeft-t.offsetLeft,o.offsetTop-t.offsetTop,o.textContent])}s.style.height=r.length?r[r.length-1][1]+31+"px":"31px",t.population=r},this.resetDataCustomizer=function(){for(var t=[this.$(this.target+"-cX-WranglingCustomizerVariables"),this.$(this.target+"-cX-WranglingCustomizerSamples"),this.$(this.target+"-cX-WranglingCustomizerAnnotations"),this.$(this.target+"-cX-WranglingCustomizerDescriptions")],e=0;e<t.length;e++)this.updateDataCustomizerContainerPopulation(t[e])},this.addRemoveCustomizerActiveClass=function(t,e){e?t.className.match(/Active$/)||(t.className=t.className+"Active"):t.className=t.className.replace(/Active$/,"")},this.resetDataCustomizerDivs=function(t){for(var e=["Variables","Annotations","Samples","Descriptions"],i=0;i<e.length;i++){var s=this.$(this.target+"-cX-WranglingCustomizer"+e[i]);s&&this.addRemoveCustomizerActiveClass(s)}var a=this.$(this.target+"-cX-MetaCustomizerProperties");if(a)for(i=0;i<a.childNodes.length;i++)this.addRemoveCustomizerActiveClass(a.childNodes[i]);var r=this.$(this.target+"-cX-AxesCustomizerAssign");if(r)for(i=0;i<r.childNodes.length;i++)this.addRemoveCustomizerActiveClass(r.childNodes[i]);var n=this.$(this.target+"-cX-DataCustomizerSort");if(n)for(i=0;i<n.childNodes.length;i++){var o=n.childNodes[i];o&&o.id&&o.id.match(/-Data-Variables-HA|-Data-Samples-HA/)&&this.addRemoveCustomizerActiveClass(o)}},this.dragStartCustomizer=function(t){return function(e){var i=t.getTargetEvent(e).parentNode;return i.style.opacity="0.3",i.style.background="linear-gradient(rgb(243, 253, 255), rgb(217, 232, 251))",t.customizerEntriesAsList&&(i.style.width="150px"),e.dataTransfer.setDragImage(i,0,0),e.dataTransfer.setData("text",i.id),!1}}(this),this.dragEnterCustomizer=function(t){return function(e){var i=t.getTargetEvent(e);return"SPAN"==i.parentNode.tagName&&(i=i.parentNode),i.tagName.toUpperCase().match(/SVG/)?t.addRemoveCustomizerActiveClass(i.parentNode,!0):"SPAN"==i.tagName&&i.parentNode.lastChild&&!i.parentNode.lastChild.tagName.toUpperCase().match(/SVG|IMG/)?i.parentNode.id.match(/-Mask$/)?t.addRemoveCustomizerActiveClass(i.parentNode.parentNode,!0):t.addRemoveCustomizerActiveClass(i.parentNode,!0):"SPAN"==i.tagName&&i.parentNode.lastChild&&i.parentNode.lastChild.tagName.toUpperCase().match(/SVG|IMG/)?i.parentNode.id.match(/-Mask$/)?t.addRemoveCustomizerActiveClass(i.parentNode.parentNode):t.addRemoveCustomizerActiveClass(i.parentNode):("DIV"==i.tagName&&i.lastChild&&!i.lastChild.tagName.toUpperCase().match(/SVG|IMG/)||i.tagName.toUpperCase().match(/SVG|IMG/))&&(i.id.match(/-Mask$/)?t.addRemoveCustomizerActiveClass(i.parentNode):i.parentNode.id.match(/-Mask$/)?t.addRemoveCustomizerActiveClass(i.parentNode.parentNode,!0):t.addRemoveCustomizerActiveClass(i,!0)),!1}}(this),this.dragOverCustomizer=function(t){return function(e){t.cancelEvent(e);var i=t.getTargetEvent(e);return"SPAN"==i.parentNode.tagName&&(i=i.parentNode),i.tagName.toUpperCase().match(/SVG/)?t.addRemoveCustomizerActiveClass(i.parentNode,!0):"SPAN"==i.tagName&&i.parentNode.lastChild&&!i.parentNode.lastChild.tagName.toUpperCase().match(/SVG|IMG/)?i.parentNode.id.match(/-Mask$/)?t.addRemoveCustomizerActiveClass(i.parentNode.parentNode,!0):t.addRemoveCustomizerActiveClass(i.parentNode,!0):"DIV"==i.tagName&&i.lastChild&&!i.lastChild.tagName.toUpperCase().match(/SVG|IMG/)&&(i.id.match(/-Mask$/)?t.addRemoveCustomizerActiveClass(i.parentNode,!0):t.addRemoveCustomizerActiveClass(i,!0)),!1}}(this),this.dragLeaveCustomizer=function(t){return function(e){var i=t.getTargetEvent(e);return"SPAN"==i.parentNode.tagName&&(i=i.parentNode),i.tagName.toUpperCase().match(/SVG/)?t.addRemoveCustomizerActiveClass(i.parentNode):"DIV"==i.tagName&&(i.id.match(/-Mask$/)||i.parentNode.id.match(/-Mask$/)?t.addRemoveCustomizerActiveClass(i.parentNode):t.addRemoveCustomizerActiveClass(i)),!1}}(this),this.dragEndCustomizer=function(t){return function(e){var i=t.getTargetEvent(e);"SPAN"==i.parentNode.tagName&&(i.blur(),(i=i.parentNode).focus()),i.style.opacity="1",i.style.background="rgba(0,0,0,0)",t.customizerEntriesAsList&&(i.style.width="300px");var s=i.parentNode;if(s&&("SPAN"==s.tagName&&(s=s.parentNode),i.parentNode.id.match(/-Mask$/)?t.addRemoveCustomizerActiveClass(s.parentNode):t.addRemoveCustomizerActiveClass(s),s.type==i.type))return!1;return!1}}(this),this.clickCustomizerPanel=function(t){return function(e){var i=t.getTargetEvent(e);if(i){i.tagName.match(/span/i)&&(i=i.parentNode);var s=i.parentNode;if(s)for(var a=0;a<s.childNodes.length;a++){s.childNodes[a].firstChild.className="CanvasXpressCustomizerPanel"}i.firstChild.className="CanvasXpressCustomizerPanelActive";var r=i.paramsTrg;if(r){var n=r[0],o=r[1];if(n&&o){for(a=0;a<o.length;a++){(h=t.$(o[a]))&&(h.style.display="none")}for(a=0;a<n.length;a++){var h;(h=t.$(n[a]))&&(h.style.display="block")}}}}}}(this),this.clickCustomizer=function(t){return function(e){switchIcon=function(e,i){t.$cXIU(e,i)};var i=t.getTargetEvent(e),s=!1;if(i.tagName.match(/input/i))return!1;if(i.tagName.match(/div/i))i=i.firstChild;else if(i.tagName.match(/span/i)&&i.previousSibling&&i.previousSibling.tagName.match(/svg/))i=i.previousSibling;else if(i.tagName.match(/span/i)&&i.parentNode.tagName.match(/div/i)&&i.parentNode.firstChild.tagName.match(/svg/i))i=i.parentNode.firstChild;else if(i.parentNode&&"A"==i.parentNode.tagName.toUpperCase()&&"SVG"!=i.tagName.toUpperCase())i=i.parentNode;else if(i.previousSibling&&"INPUT"==i.previousSibling.tagName.toUpperCase()){if(o=i.getAttribute("params")){if("modifyOverlaysProperties"==(o=t.parseJSON(o))[0])o[1]&&(o[1][0]=i.previousSibling.value);else{o[1]?o[1].push(i.previousSibling.value):o[1]=[];var a=i.getAttribute("params2");a&&(a=t.parseJSON(a),o[1]=o[1].concat(a))}s=o}}else"A"==i.tagName.toUpperCase()&&i.firstChild&&"SVG"==i.firstChild.tagName.toUpperCase()&&(i=i.firstChild);var r=i.getAttribute("title")?i.getAttribute("title").split(" : ")[0]:"",n=s||(i.getAttribute("params")?t.parseJSON(i.getAttribute("params")):!!i.itemFunc&&t.parseJSON(i.itemFunc));if(!n&&i.tagName.toUpperCase().match(/SVG|SPAN/)&&(r=i.parentNode.title,n=i.parentNode.params),n&&n[1])if("linLog"==n[0]){var o=n[1][0]+"Transform",h=i.getAttribute("src");i.setAttribute("src",i.getAttribute("srt")),i.setAttribute("srt",h),t[o]?t.changeAttribute(o,!1):t.changeAttribute(o,2==t.transformBase?"log2":"log10"),t.$cXIU(i,i.getAttribute("src"))}else if("addToAxis"==n[0]){var l=n[1][0],c=t[l];t.changeSampleInAxis(c[0],l,!0),i.setAttribute("title",r+" : "+t[l].join(", "))}else if("increaseDecreaseAttribute"==n[0]){var d=t.$(i.getAttribute("paramsTrg")),p=n[1][1],g=n[1][2];d&&(d.value="decrease"==p?Number(d.value)-g:Number(d.value)+g),t[n[0]].apply(t,n[1])}else"updateTextColorAttribute"==n[0]?n[1]&&n[1][0]&&"colorSpectrumTarget"==n[1][0]?t[n[0]].apply(t,n[1]):n[1]&&n[1][0]&&"colorSpectrumZeroValue"==n[1][0]&&t[n[0]].apply(t,[n[1]]):"modifyOverlaysProperties"==n[0]?t[n[0]].apply(t,n[1]):(t[n[0]].apply(t,n[1]),n[1][0]&&n[1][0].match(/quantileregression|loessfit|scattertype/i)||n[0].match(/modifycontour|correlat/)?(t.addRemoveCustomizerListenersRightPanel("removeEvtListener"),t.transitionMagicCustomizer(t.$(t.target+"-cX-Customizer-Right-Panel"),t.toolsCustomizer)):"toggleAttribute"==n[0]&&"scatterPlotMatrix"==n[1][0]?(t.addRemoveCustomizerListenersRightPanel("removeEvtListener"),t.transitionMagicCustomizer(t.$(t.target+"-cX-Customizer-Right-Panel"),t.plotCustomizer)):"changeAttribute"==n[0]&&"graphType"==n[1][0]&&(t.addRemoveCustomizerListenersRightPanel("removeEvtListener"),t.transitionMagicCustomizer(t.$(t.target+"-cX-Customizer-Right-Panel"),t.optionsCustomizer)));else if(n&&n[0])switch(n[0]){case"highlight":return t.highlightVar.length&&t.modifyObjectArray(t.highlightVar,!0,"highlightVar",!1,!t.highlightSmp.length),t.highlightSmp.length&&t.modifyObjectArray(t.highlightSmp,!0,"highlightSmp",!1,!0),!1;case"sortDir":return t.modifySort("both"),t.sortDir="ascending"==t.sortDir?"descending":"ascending",switchIcon(i,"ascending"==this.sortDir?"sr_zad":"sr_azi"),!1;case"sortCase":return t.modifySort("both"),t.sortCaseSensitive=!t.sortCaseSensitive,!1;case"sortVariables":return t.sortVariables(),!1;case"sortSamples":return t.sortSamples(),!1;case"overlays":return t.varOverlays=[],t.smpOverlays=[],t.draw({func:"clickCustomizer",par:[e]}),t.addRemoveCustomizerListenersRightPanel("removeEvtListener"),t.transitionMagicCustomizer(t.$(t.target+"-cX-Customizer-Right-Panel"),t.metaCustomizer),!1;case"treemapBy":return t.treemapBy.length>0&&(t.treemapBy=[]),t.draw({func:"clickCustomizer",par:[e]}),!1;case"groupSamples":return t.groupingFactors.length>0&&t.ungroupSamples(),!1;case"segregate":for(var u=0;u<t.segregateSamplesBy.length;u++)t.modifySampleSegregation(t.segregateSamplesBy[u]);for(u=0;u<t.segregateVariablesBy.length;u++)t.modifyVariableSegregation(t.segregateVariablesBy[u]);return!1;case"addToAxis":l=n[1][0],c=t[l];return t.changeSampleInAxis(c[0],l,!0),i.setAttribute("title",r+" : "+t[l].join(", ")),!1;case"motion":return t.changeAttribute("motionBy",!1),!1;case"sortDataCustomizer":var m=i.id.replace("-cX-WranglingCustomizerSort","-cX-WranglingCustomizer"),f=t.$(m);if(f){var y=t.removeEntriesDataCustomizerContainer(f.firstChild),x=i.getAttribute("src");"sr_zad"==x?f.population.sort((function(t,e){return t[2]<e[2]?-1:t[2]>e[2]?1:0})):f.population.sort((function(t,e){return e[2]<t[2]?-1:e[2]>t[2]?1:0})),f.population=t.addEntriesDataCustomizerContainer(f,f.firstChild,y,f.population.reverse()),i.setAttribute("src",i.getAttribute("asr")),i.setAttribute("asr",x),t.$cXIU(i,i.getAttribute("src"))}return!1;case"pivotX":if(t.isPivot){t.removePivot();var v=i.src;i.src=i.asr,i.asr=v}else t[n[0]]();return!1;case"createDOE":return t.isDOE?t.removeDOE():t[n[0]](),t.closeCustomizer(!0),!1;case"fileUpload":return t.$(t.target+"-cX-FileUploader").click(),!1;default:return"function"==typeof t[n[0]]?(t[n[0]](),n[0].match(/cluster|histogram|correlat|qqplot|cdfplot|modifycontour|removecontour/i)?(t.addRemoveCustomizerListenersRightPanel("removeEvtListener"),t.transitionMagicCustomizer(t.$(t.target+"-cX-Customizer-Right-Panel"),t.toolsCustomizer)):n[0].match(/transpose/)&&(t.addRemoveCustomizerListenersRightPanel("removeEvtListener"),t.transitionMagicCustomizer(t.$(t.target+"-cX-Customizer-Right-Panel"),t.dataCustomizer))):t.changeAttribute(n[0],!1),!1}return!1}}(this),this.clickCustomizerText=function(t){return function(e){var i=t.getTargetEvent(e),s=i.previousSibling,a=!!i.getAttribute("params")&&t.parseJSON(i.getAttribute("params"));a&&(a[1].push(s.value),t[a[0]].apply(t,a[1]))}}(this),this.clickCustomizerUpdateText=function(t){return function(e){var i=function(e,i,s){t.resetCustomizerSelections(e);for(var a=0;a<i.length;a++){var r=t.$cX("option",{text:i[a],value:i[a],selected:i[a]==s});try{f.add(r,null)}catch(t){f.add(r)}}},s=t.getTargetEvent(e),a=s.parentNode,r=a.parentNode,n=0;if(s&&a&&r){for(var o=0;o<a.childNodes.length;o++){var h=a.childNodes[o];h.innerHTML==s.innerHTML?(n=o,h.style.color="rgb(51,122,183)",h.style.textDecoration="underline"):(h.style.color="rgb(0,0,0)",h.style.textDecoration="none")}var l=r.childNodes[0];if(l.innerHTML=(l.beforeContent||"")+s.innerHTML+(l.afterContent||""),t.$cXIU(r.childNodes[1],a.paramsIcons[n]),g=t.$(s.itemTarget)){var c=a.paramsParams[n],d=a.paramsNames[n],p=0;if(t.isArray(c)&&g.childNodes&&g.childNodes[2]){if("INPUT"==g.childNodes[2].tagName.toUpperCase())c=c[1][0],(f=g.childNodes[2]).value=t[c],f.params=t.stringifyJSON(["changeAttribute",[c]]);else if("INPUT"==g.childNodes[3].tagName.toUpperCase())c=c[1][0],(f=g.childNodes[3]).value="color"==f.type?t.rgbToHex(t[c]):t[c],f.params=t.stringifyJSON(["changeAttribute",[c]])}else{if("TEXTAREA"==g.childNodes[p].firstChild.tagName.toUpperCase())g.childNodes[p].firstChild.value=t[d]||t[c]||"",(y=!!(f=g.childNodes[p++].lastChild).getAttribute("params")&&t.parseJSON(f.getAttribute("params")))[1]=d?[d]:[c],f.setAttribute("params",t.stringifyJSON(y));2==g.childNodes.length?((f=g.childNodes[0].firstChild).value=t.rgbToHex(t[c[n]+"Color"]),f.params=t.stringifyJSON(["changeAttribute",[c[n]+"Color"]]),(f=g.childNodes[1].firstChild).setAttribute("params",t.stringifyJSON(["toggleAttribute",[c[n]]]))):g.childNodes[p]&&((f=g.childNodes[p++].firstChild).value=t[c+"Color"],f.params=t.stringifyJSON(["changeAttribute",[c+"Color"]]),(f=g.childNodes[p++].firstChild).setAttribute("params",t.stringifyJSON(["setFontAttributeSize",[c+"ScaleFontFactor","increase"]])),(f=g.childNodes[p++].firstChild).setAttribute("params",t.stringifyJSON(["setFontAttributeSize",[c+"ScaleFontFactor","decrease"]])),(f=g.childNodes[p++].firstChild).setAttribute("params",t.stringifyJSON(["setFontAttributeStyle",[c+"FontStyle","normal"]])),(f=g.childNodes[p++].firstChild).setAttribute("params",t.stringifyJSON(["setFontAttributeStyle",[c+"FontStyle","bold"]])),(f=g.childNodes[p++].firstChild).setAttribute("params",t.stringifyJSON(["setFontAttributeStyle",[c+"FontStyle","italic"]])))}}else if(t.isArray(s.itemTarget))for(o=0;o<s.itemTarget.length;o++){var g,u,m,f,y,x;if(g=t.$(s.itemTarget[o]))if(g.childNodes.length&&g.childNodes[2]&&"SELECT"==g.childNodes[2].tagName.toUpperCase())if(m||(m=!!g.paramObj&&t.parseJSON(g.paramObj)),f=g.childNodes[2],(y=t.parseJSON(f.params))&&"modifyOverlaysProperties"==y[0]){if(u||(u=!!m&&t[m.type+"OverlayProperties"]),x=u?u[a.paramsParams[n]][y[1][3]]:"",0==o)m.numOver.includes(a.paramsParams[n][0])?i(f,m.num,x):m.strOver.includes(a.paramsParams[n][0])&&i(f,m.str,x);else for(var v=0;v<f.childNodes.length;v++)f.childNodes[v].selected=f.childNodes[v].value==x.toString();y[1][2]=a.paramsParams[n][0],f.params=t.stringifyJSON(y)}else if(y&&"modifyColorProperties"==y[0]){if(u){x=u?u[a.paramsParams[n]].scheme:"";for(v=0;v<f.childNodes.length;v++)f.childNodes[v].selected=f.childNodes[v].value==x}y[1][1]=a.paramsParams[n][0],f.params=t.stringifyJSON(y)}else y&&y[0].match(/updateDOEGraph/)&&(x=void 0,y[0].match(/GraphType/)?t.layoutConfig[n]&&t.layoutConfig[n].graphType&&(x=t.layoutConfig[n].graphType):y[0].match(/GraphSize/)&&t.layoutConfig[n]&&t.layoutConfig[n].size&&(x=t.layoutConfig[n].size),y[1][1]=n,f.params=t.stringifyJSON(y),0==o&&(0==n?i(f,m.ori,x):m.numMeta.includes(t.includeDOE[n-1])?i(f,m.num,x):m.strMeta.includes(t.includeDOE[n-1])?i(f,m.str,x):i(f,m.varSmp,x)));else g.childNodes.length&&g.childNodes[3]&&"SVG"==g.childNodes[3].tagName.toUpperCase()&&g.childNodes[2]&&"INPUT"==g.childNodes[2].tagName.toUpperCase()?(y=!!(f=g.childNodes[3]).getAttribute("params")&&t.parseJSON(f.getAttribute("params")))&&(y&&"modifyOverlaysProperties"==y[0]?(y[1][2]=a.paramsParams[n][0],f.setAttribute("params",t.stringifyJSON(y))):y[1]&&y[1][0].match(/LabelInterval|LabelRotate/)?("Variable"==s.innerHTML?y[1][0]=y[1][0].replace(/^smp/,"var"):"Sample"==s.innerHTML&&(y[1][0]=y[1][0].replace(/^var/,"smp")),g.childNodes[2].value=t[y[1][0]],f.setAttribute("params",t.stringifyJSON(y))):y[1]&&y[1][0].match(/^xAxis|^yAxis|^setM/)&&(m=a.paramsParams[n][1][o],y[1][0]=y[1][0].replace(m[0],m[1]),g.childNodes[2].value=t[m[1]],f.setAttribute("params",t.stringifyJSON(y)),delete m),u&&(g.childNodes[2].value=u?u[a.paramsParams[n]][y[1][3]]||"18":"")):g.childNodes.length&&g.childNodes[3]&&"INPUT"==g.childNodes[3].tagName.toUpperCase()&&"color"==g.childNodes[3].type?(f=g.childNodes[3],(y=t.parseJSON(f.params))&&"modifyOverlaysProperties"==y[0]?(y[1][2]=a.paramsParams[n][0],f.params=t.stringifyJSON(y),u&&u[a.paramsParams[n]][y[1][3]]&&(f.value=t.rgbToHex(u[a.paramsParams[n]][y[1][3]]))):y[1]&&y[1][0].match(/HighlightColor/)&&("Variable"==s.innerHTML?y[1][0]=y[1][0].replace(/^smp/,"var"):"Sample"==s.innerHTML&&(y[1][0]=y[1][0].replace(/^var/,"smp")),f.params=t.stringifyJSON(y),f.value=t.rgbToHex(t[y[1][0]]))):g.childNodes.length&&g.childNodes[0]&&"SVG"==g.childNodes[0].tagName.toUpperCase()&&(y=!!(f=g.childNodes[0]).getAttribute("params")&&t.parseJSON(f.getAttribute("params")))&&(y[1]&&y[1][0].match(/showSampleNames|showVariableNames/)?("Variable"==s.innerHTML?y[1][0]=y[1][0].replace(/Sample/,"Variable"):"Sample"==s.innerHTML&&(y[1][0]=y[1][0].replace(/Variable/,"Sample")),f.setAttribute("params",t.stringifyJSON(y))):y[1]&&y[1][0].match(/^xAxis|^yAxis/)&&(m=a.paramsParams[n][1][o],y[1][0]=y[1][0].replace(m[0],m[1]),f.setAttribute("params",t.stringifyJSON(y)),delete m))}}}}(this),this.clickCustomizerUpdateGrid=function(t){return function(e){var i=t.getTargetEvent(e),a=i.parentNode,r=a.parentNode,n=0;if(i&&a&&r){for(var o=0;o<a.childNodes.length;o++){var h=a.childNodes[o];h.innerHTML==i.innerHTML?(n=o,h.style.color="rgb(51,122,183)",h.style.textDecoration="underline"):(h.style.color="rgb(0,0,0)",h.style.textDecoration="none")}r.childNodes[0].innerHTML=i.innerHTML,t.$cXIU(r.childNodes[1],a.paramsIcons[n]);var l=t.$(i.itemTarget);if(l){var c=a.paramsParams[n],d=0;s=l.childNodes[d++].firstChild,s.value=t[c+"AxisTickColor"],s.params=t.stringifyJSON(["changeAttribute",[c+"AxisTickColor"]]),s=l.childNodes[d++].firstChild,s.setAttribute("params",t.stringifyJSON(["toggleAttribute",[c+"AxisTicksMajorShow"]])),s=l.childNodes[d++].firstChild,s.setAttribute("params",t.stringifyJSON(["toggleAttribute",[c+"AxisTicksMinorShow"]])),s=l.childNodes[d++].firstChild,s.setAttribute("params",t.stringifyJSON(["changeAttribute",[c+"AxisTickLineType","solid"]])),s=l.childNodes[d++].firstChild,s.setAttribute("params",t.stringifyJSON(["changeAttribute",[c+"AxisTickLineType","dotted"]])),s=l.childNodes[d++].firstChild,s.setAttribute("params",t.stringifyJSON(["changeAttribute",[c+"AxisTickLineType","dashed"]])),s=l.childNodes[6].firstChild,s.setAttribute("params",t.stringifyJSON(["increaseDecreaseAttribute",[c+"AxisTicks","decrease",1]])),s.nextElementSibling.value=t[c+"AxisTicks"],s=l.childNodes[6].lastChild,s.setAttribute("params",t.stringifyJSON(["increaseDecreaseAttribute",[c+"AxisTicks","increase",1]]))}}}}(this),this.dblClickCustomizer=function(t){return function(e){t.showMask();var i=t.getTargetEvent(e).parentNode,s=i.type,a=i.innerText,r=i.parentNode.parentNode,n=t.$(r.id.replace("DataCustomizerVariables","DataCustomizerAnnotations").replace("DataCustomizerSamples","DataCustomizerDescriptions"));if("z"==s)t.isUnique(t.data.z[a])?t.switchVarAnnotationToId(a):i.numeric?t.switchNumericToString(a):t.switchStringToNumeric(a),t.updateDataCustomizerContainerPopulation(r);else if("x"==s)t.isUnique(t.data.x[a])?t.switchSmpAnnotationToId(a):i.numeric?t.switchNumericToString(a,!0):t.switchStringToNumeric(a,!0),t.updateDataCustomizerContainerPopulation(r);else if("vars"==s){for(var o=[],h=0;h<t.data.y.vars.length;h++)t.data.y.vars[h]!=a&&o.push(t.data.y.vars[h]);o.length>1&&(t.switchVarToAnnotationBulk(o),t.updateDataCustomizerContainerPopulation(r),t.updateDataCustomizerContainerPopulation(n))}else if("smps"==s){var l=[];for(h=0;h<t.data.y.smps.length;h++)t.data.y.smps[h]!=a&&l.push(t.data.y.smps[h]);l.length>1&&(t.switchSmpToAnnotationBulk(l[h]),t.updateDataCustomizerContainerPopulation(r),t.updateDataCustomizerContainerPopulation(n))}return t.hideMask(),!1}}(this),this.changeCustomizer=function(t){return function(e){var i,s=t.getTargetEvent(e);if(s.tagName.match(/input/i))(i=!!s.params&&t.parseJSON(s.params))&&("modifyOverlaysProperties"==i[0]&&i[1]?(i[1][0]=this.value,t[i[0]].apply(t,i[1])):t[i[0]].apply(t,[i[1],this.value]));else if(s.tagName.match(/select/i)&&(i=!!s.params&&t.parseJSON(s.params))){i[1]||(i[1]=[]);var a="true"==this.value||"false"!=this.value&&("null"==this.value?null:this.value);if("modifyOverlaysProperties"==i[0]||"modifyColorProperties"==i[0]||i[0].match(/updateDOEGraph/)?i[1]&&(i[1][0]=a):"toggleAttribute"!=i[0]&&i[1].push(a),i[2])for(var r=0;r<i[2].length;r++)i[1].push(i[2][r]);t[i[0]].apply(t,i[1]),i[0].match(/createHistogram|correlat/)?t.transitionMagicCustomizer(t.$(t.target+"-cX-Customizer-Right-Panel"),t.toolsCustomizer):"modifyDOE"==i[0]&&1==i[1].length&&t.transitionMagicCustomizer(t.$(t.target+"-cX-Customizer-Right-Panel"),t.doeCustomizer)}}}(this),this.inputCustomizer=function(t){return function(e){var i=t.getTargetEvent(e);if(i.tagName.match(/input/i)){var s=!!i.params&&t.parseJSON(i.params);if(s){if("increaseDecreaseAttribute"==s[0]&&!this.value)return!1;t[s[0]].apply(t,[s[1],this.value])}}}}(this),this.toolsCustomizer=function(){var t=[];return this.graphType.match(/Scatter/)?this.isHistogram?(t.push(this.toolsCustomizerRemoveHistogram()),t.push(this.toolsCustomizerHistogramStat()),t.push(this.toolsCustomizerHistogramBins()),t.push(this.toolsCustomizerHistogramBinWidth()),t.push(this.toolsCustomizerToggleHistogramBars()),t.push(this.toolsCustomizerHistogramType()),t.push(this.toolsCustomizerToggleHistogramDensity()),t.push(this.toolsCustomizerToggleFilledHistogramDensity()),t.push(this.toolsCustomizerDensityKernel()),t.push(this.toolsCustomizerToggleHistogramDataPoints()),t.push(this.toolsCustomizerToggleHistogramMedian()),t.push(this.toolsCustomizerHistogramMedianLineStyle()),t.push(this.toolsCustomizerHistogramDensityPosition())):this.isCorrelateS?(t.push(this.toolsCustomizerRemoveCorrelation()),t.push(this.toolsCustomizerCorrelationConfidence()),t.push(this.toolsCustomizerCorrelationLegend())):this.showQuantileRegressionFit?t.push(this.toolsCustomizerRemoveQuantileRegression()):this.showLoessFit?(t.push(this.toolsCustomizerRemoveLoess()),t.push(this.toolsCustomizerLoessCell()),t.push(this.toolsCustomizerLoessConfidence()),t.push(this.toolsCustomizerLoessDegree()),t.push(this.toolsCustomizerLoessFamily()),t.push(this.toolsCustomizerLoessIteration()),t.push(this.toolsCustomizerLoessNormalize()),t.push(this.toolsCustomizerLoessSpan()),t.push(this.toolsCustomizerLoessStatistics()),t.push(this.toolsCustomizerLoessSurface())):this.isValidQQ()?t.push(this.toolsCustomizerRemoveQQ()):this.isValidCDF()?t.push(this.toolsCustomizerRemoveCDF()):"bin2d"==this.scatterType?(t.push(this.toolsCustomizerRemoveBin2D()),t.push(this.toolsCustomizerBin2DBins()),t.push(this.toolsCustomizerBin2DBinWidth()),t.push(this.toolsCustomizerBin2DShape()),t.push(this.toolsCustomizerBin2DColorScheme())):this.isContour?(t.push(this.toolsCustomizerRemoveContour()),t.push(this.toolsCustomizerContourLevels()),t.push(this.toolsCustomizerContourShowLevel()),t.push(this.toolsCustomizerContourLevelWidth()),t.push(this.toolsCustomizerContourFilled()),t.push(this.toolsCustomizerContourBands()),t.push(this.toolsCustomizerContourBandsColor()),t.push(this.toolsCustomizerContourDataPoints()),t.push(this.toolsCustomizerContourDataPointsColor()),t.push(this.toolsCustomizerContourType()),t.push(this.toolsCustomizerContourStat()),t.push(this.toolsCustomizerContourColorScheme())):(t.push(this.toolsCustomizerBin2D()),t.push(this.toolsCustomizerCDF()),t.push(this.toolsCustomizerContour()),t.push(this.toolsCustomizerCorrelation()),t.push(this.toolsCustomizerHistogram()),t.push(this.toolsCustomizerLoess()),t.push(this.toolsCustomizerQQ()),t.push(this.toolsCustomizerQuantileRegression()),!this.scatterPlotMatrix&&this.data.y.smps.length>2&&t.push(this.toolsCustomizerSplom())):t.push(this.toolsCustomizerCluster()),[t,this.addRemoveCustomizerListenersRightPanel]},this.toolsCustomizerCluster=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerButton(this.target+"-cX-ToolsCustomizerClusterSamples","Cluster Samples","cl_horizontal",["clusterSamples"]);return t.appendChild(e),t},this.toolsCustomizerContour=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerButton(this.target+"-cX-ToolsCustomizerContour","Create Contour","g_contour",["modifyContour"]);return t.appendChild(e),t},this.toolsCustomizerRemoveContour=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerButton(this.target+"-cX-ToolsCustomizerRemoveContour","Remove Contour","dt_contourremove",["removeContour"]);return t.appendChild(e),t},this.toolsCustomizerContourLevels=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerInput(this.target+"-cX-ToolsCustomizerContourLevels","Number of Levels","ch_snumber",this.contourLevelNumber,["changeAttribute",["contourLevelNumber"]]);return t.appendChild(e),t},this.toolsCustomizerContourShowLevel=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerButton(this.target+"-cX-ToolsCustomizerContourShowLevel","Show / Hide Contour Level","sl_eopen",["toggleAttribute",["showContourLevel"]]);return t.appendChild(e),t},this.toolsCustomizerContourLevelWidth=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerInput(this.target+"-cX-ToolsCustomizerContourLevelWidth","Contour Level Width","sp_thickness",this.contourLevelWidth,["changeAttribute",["contourLevelWidth"]]);return t.appendChild(e),t},this.toolsCustomizerContourFilled=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerButton(this.target+"-cX-ToolsCustomizerContourFilled","Contour Filled","dt_contourfilled",["toggleAttribute",["contourFilled"]]);return t.appendChild(e),t},this.toolsCustomizerContourBands=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerButton(this.target+"-cX-ToolsCustomizerContourBands","Show / Hide Contour Bands","dt_contourlines",["toggleAttribute",["showContourBands"]]);return t.appendChild(e),t},this.toolsCustomizerContourBandsColor=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerColor(this.target+"-cX-ToolsCustomizerContourBandsColor","Contour Bands Color","at_col",!1,this.contourBandsColor,["changeAttribute",["contourBandsColor"]]);return t.appendChild(e),t},this.toolsCustomizerContourDataPoints=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerButton(this.target+"-cX-ToolsCustomizerContourDataPoints","Show / Hide Contour Data Points","dt_contourdata",["toggleAttribute",["showContourDataPoints"]]);return t.appendChild(e),t},this.toolsCustomizerContourDataPointsColor=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerColor(this.target+"-cX-ToolsCustomizerContourDataPointsColor","Contour Data Points Color","at_col",!1,this.contourDataPointsColor,["changeAttribute",["contourDataPointsColor"]]);return t.appendChild(e),t},this.toolsCustomizerContourType=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerSelect(this.target+"-cX-ToolsCustomizerContourType","Contour Type","ch_lt",!1,!1,["normal","raster","point"],this.contourType,["changeAttribute",["contourType"]]);return t.appendChild(e),t},this.toolsCustomizerContourStat=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerSelect(this.target+"-cX-ToolsCustomizerContourStat","Contour Statistics","ch_ofx",!1,!1,["count","ndensity","density"],this.contourStat,["changeAttribute",["contourStat"]]);return t.appendChild(e),t},this.toolsCustomizerContourColorScheme=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerSelect(this.target+"-cX-ToolsCustomizerContourColorScheme","Contour Color Scheme","at_palette",!1,!1,this.getColorSchemes(),this.contourColorScheme,["changeAttribute",["contourColorScheme"]]);return t.appendChild(e),t},this.toolsCustomizerBin2D=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerButton(this.target+"-cX-ToolsCustomizerBin2D","Create 2D Bin Plot","dt_bin",["changeAttribute",["scatterType","bin2d"]]);return t.appendChild(e),t},this.toolsCustomizerRemoveBin2D=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerButton(this.target+"-cX-ToolsCustomizerRemoveBin2D","Remove 2D Bin Plot","dt_binremove",["changeAttribute",["scatterType",!1]]);return t.appendChild(e),t},this.toolsCustomizerBin2DBins=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerInput(this.target+"-cX-ToolsCustomizerBin2DBins","Bin Number","ch_snumber",this.binplotBins,["changeAttribute",["binplotBins"]]);return t.appendChild(e),t},this.toolsCustomizerBin2DBinWidth=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerInput(this.target+"-cX-ToolsCustomizerBin2DBinWidth","Bin Width","sp_thickness",this.binplotBinWidth,["changeAttribute",["binplotBinWidth"]]);return t.appendChild(e),t},this.toolsCustomizerBin2DShape=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerSelect(this.target+"-cX-ToolsCustomizerBin2DShape","Bin Shape","at_shp",!1,!1,["rectangle","hexagon","oval"],this.binplotShape,["changeAttribute",["binplotShape"]],["&#x2610; Rectangle","&#x2B21; Hexagon","&#x25CB; Oval"]);return t.appendChild(e),t},this.toolsCustomizerBin2DColorScheme=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerSelect(this.target+"-cX-ToolsCustomizerBin2DColorScheme","Bin Color Scheme","at_palette",!1,!1,this.getColorSchemes(),this.binplotColorScheme,["changeAttribute",["binplotColorScheme"]]);return t.appendChild(e),t},this.toolsCustomizerCorrelation=function(){var t,e=this.getCustomizerDivRaw(),i=this.graphType.match(/Scatter/)?this.getMetaDataByType("z","String"):this.getMetaDataByType("x","String");if(i.length){var s=this.cloneObject(i);i.unshift("No factor (All data)"),s.unshift(""),t=this.addCustomizerSelect(this.target+"-cX-ToolsCustomizerCreateCorrelation","Create Correlation","dt_cor",i,!1,s,null,["correlateData",[!0]])}else t=this.addCustomizerButton(this.target+"-cX-ToolsCustomizerCreateCorrelation","Create Correlation","dt_cor",["correlateData",[!1]]);return e.appendChild(t),e},this.toolsCustomizerLoess=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerButton(this.target+"-cX-ToolsCustomizerLoess","Loess Fit","dt_loess",["toggleAttribute",["showLoessFit"]]);return t.appendChild(e),t},this.toolsCustomizerRemoveLoess=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerButton(this.target+"-cX-ToolsCustomizerRemoveLoess","Remove Loess Fit","dt_loessremove",["toggleAttribute",["showLoessFit"]]);return t.appendChild(e),t},this.toolsCustomizerLoessConfidence=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerButton(this.target+"-cX-ToolsCustomizerLoessConfidence","Show / Hide Loess Confidence","dt_loessconf",["toggleAttribute",["showConfidenceIntervals"]]);return t.appendChild(e),t},this.toolsCustomizerLoessFamily=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerSelect(this.target+"-cX-ToolsCustomizerLoessFamily","Loess Family","cr_normal",!1,!1,["gaussian","symmetric"],this.loessFamily,["changeAttribute",["loessFamily"]]);return t.appendChild(e),t},this.toolsCustomizerLoessStatistics=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerSelect(this.target+"-cX-ToolsCustomizerLoessStatistics","Loess Statistics","ch_ofx",!1,!1,["approximate","exact"],this.loessStatistics,["changeAttribute",["loessStatistics"]]);return t.appendChild(e),t},this.toolsCustomizerLoessStatistics=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerSelect(this.target+"-cX-ToolsCustomizerLoessStatistics","Loess Statistics","ch_ofx",!1,!1,["approximate","exact"],this.loessStatistics,["changeAttribute",["loessStatistics"]]);return t.appendChild(e),t},this.toolsCustomizerLoessIteration=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerSelect(this.target+"-cX-ToolsCustomizerLoessIteration","Loess Iterations","ch_oiter",!1,!1,[0,1,2,3,4],this.loessIteration||0,["changeAttribute",["loessIteration"]]);return t.appendChild(e),t},this.toolsCustomizerLoessNormalize=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerSelect(this.target+"-cX-ToolsCustomizerLoessNormalize","Loess Normalize","ch_ln",!1,!1,[!1,!0],this.loessNormalize,["changeAttribute",["loessNormalize"]]);return t.appendChild(e),t},this.toolsCustomizerLoessSpan=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerInput(this.target+"-cX-ToolsCustomizerLoessSpan","Loess Span","ar_v",this.loessSpan,["changeAttribute",["loessSpan"]]);return t.appendChild(e),t},this.toolsCustomizerLoessDegree=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerInput(this.target+"-cX-ToolsCustomizerLoessDegree","Loess Degree","ch_ld",this.loessDegree,["changeAttribute",["loessDegree"]]);return t.appendChild(e),t},this.toolsCustomizerLoessCell=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerInput(this.target+"-cX-ToolsCustomizerLoessCell","Loess Cell","ch_lc",this.loessCell,["changeAttribute",["loessCell"]]);return t.appendChild(e),t},this.toolsCustomizerLoessSurface=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerSelect(this.target+"-cX-ToolsCustomizerLoessSurface","Loess Surface","ch_ls",!1,!1,["interpolate","direct"],this.loessSurface,["changeAttribute",["loessSurface"]]);return t.appendChild(e),t},this.toolsCustomizerQuantileRegression=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerButton(this.target+"-cX-ToolsCustomizerQuantileRegression","Quantile Regression","dt_quantreg",["toggleAttribute",["showQuantileRegressionFit"]]);return t.appendChild(e),t},this.toolsCustomizerRemoveQuantileRegression=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerButton(this.target+"-cX-ToolsCustomizerRemoveQuantileRegression","Remove Quantile Regression","dt_quantregremove",["toggleAttribute",["showQuantileRegressionFit"]]);return t.appendChild(e),t},this.toolsCustomizerRemoveCorrelation=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerButton(this.target+"-cX-ToolsCustomizerRemoveCorrelation","Remove Correlation","dt_corremove",["removeCorrelation"]);return t.appendChild(e),t},this.toolsCustomizerCorrelationConfidence=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerButton(this.target+"-cX-ToolsCustomizerCorrelationConfidence","Show / Hide Correlation Confidence","dt_corconf",["toggleAttribute",["showConfidenceIntervals"]]);return t.appendChild(e),t},this.toolsCustomizerCorrelationLegend=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerButton(this.target+"-cX-ToolsCustomizerCorrelationLegend","Show / Hide Correlation Legend","ch_lr",["toggleAttribute",["showDecorationsLegend"]]);return t.appendChild(e),t},this.toolsCustomizerHistogram=function(){var t,e=this.getCustomizerDivRaw(),i=this.graphType.match(/Scatter/)?this.getMetaDataByType("z","String"):this.getMetaDataByType("x","String");if(i.length){var s=this.cloneObject(i);i.unshift("No factor (All data)"),s.unshift(""),t=this.addCustomizerSelect(this.target+"-cX-ToolsCustomizerCreateHistogram","Create Histogram","dt_hist",i,!1,s,null,["createHistogram"])}else t=this.addCustomizerButton(this.target+"-cX-ToolsCustomizerCreateHistogram","Create Histogram","dt_hist",["createHistogram"]);return e.appendChild(t),e},this.toolsCustomizerRemoveHistogram=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerButton(this.target+"-cX-ToolsCustomizerRemoveHistogram","Remove Histogram","dt_histremove",["removeHistogram"]);return t.appendChild(e),t},this.toolsCustomizerHistogramStat=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerSelect(this.target+"-cX-ToolsCustomizerHistogramStat","Histogram Stat","ch_ofx",!1,!1,["count","density"],this.histogramStat,["changeAttribute",["histogramStat"],[!1,"modifyHistogram"]]);return t.appendChild(e),t},this.toolsCustomizerHistogramBins=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerSelect(this.target+"-cX-ToolsCustomizerHistogramBins","Histogram Bins","ch_snumber",!1,!1,[5,10,15,20,25,30,35,40,45,50],this.histogramBins,["changeAttribute",["histogramBins"],[!1,"modifyHistogram"]]);return t.appendChild(e),t},this.toolsCustomizerHistogramBinWidth=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerInput(this.target+"-cX-ToolsCustomizerHistogramBinWidth","Histogram Bin Width","sp_thickness",this.histogramBinWidth,["changeAttribute",["histogramBinWidth"]],[!1,"modifyHistogram"]);return t.appendChild(e),t},this.toolsCustomizerHistogramType=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerSelect(this.target+"-cX-ToolsCustomizerHistogramType","Histogram Type","dt_histstag",!1,!1,["dodge","staggered","stacked"],this.histogramType,["changeAttribute",["histogramType"],[!1,"modifyHistogram"]]);return t.appendChild(e),t},this.toolsCustomizerToggleFilledHistogramDensity=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerButton(this.target+"-cX-ToolsCustomizerToggleFilledDensity","Show / Hide Filled Density","dt_denfilled",["toggleAttribute",["showFilledHistogramDensity"]]);return t.appendChild(e),t},this.toolsCustomizerToggleHistogramBars=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerButton(this.target+"-cX-ToolsCustomizerToggleHistogramBars","Show / Hide Histogram Bars","dt_hist",["toggleAttribute",["hideHistogram"]]);return t.appendChild(e),t},this.toolsCustomizerToggleHistogramDensity=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerButton(this.target+"-cX-ToolsCustomizerToggleHistogramDensity","Show / Hide Density","dt_den",["toggleAttribute",["showHistogramDensity"]]);return t.appendChild(e),t},this.toolsCustomizerDensityKernel=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerSelect(this.target+"-cX-ToolsCustomizerDensityKernel","Kernel Density","g_density",!1,!1,["gaussian","rectangular","triangular","epanechnikov","quartic","biweight","cosine","optcosine"],this.densityKernel,["changeAttribute",["densityKernel"],[!1,"modifyHistogram"]]);return t.appendChild(e),t},this.toolsCustomizerToggleHistogramDataPoints=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerButton(this.target+"-cX-ToolsCustomizerToggleHistogramDataPoints","Show / Hide Data Points","dt_denfitfilled",["toggleAttribute",["showHistogramDataPoints"]]);return t.appendChild(e),t},this.toolsCustomizerToggleHistogramMedian=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerButton(this.target+"-cX-ToolsCustomizerToggleHistogramMedian","Show / Hide Histogram Median","dt_denfilledline",["toggleAttribute",["showHistogramMedian"]]);return t.appendChild(e),t},this.toolsCustomizerHistogramMedianLineStyle=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerSelect(this.target+"-cX-ToolsCustomizerHistogramMedianLineStyle","Histogram Median Line Style","ln_style",!1,!1,["solid","dotted","dashed"],this.histogramMedianLineStyle,["changeAttribute",["histogramMedianLineStyle"],["modifyHistogram"]]);return t.appendChild(e),t},this.toolsCustomizerHistogramDensityPosition=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerSelect(this.target+"-cX-ToolsCustomizerHistogramDensityPosition","Density Position","g_density2",!1,!1,["normal","stacked","filled"],this.histogramMedianLineStyle,["changeAttribute",["densityPosition"],["modifyHistogram"]]);return t.appendChild(e),t},this.toolsCustomizerQQ=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerButton(this.target+"-cX-ToolsCustomizerQQ","QQ Plot","dt_qq",["addQQPlot"]);return t.appendChild(e),t},this.toolsCustomizerRemoveQQ=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerButton(this.target+"-cX-ToolsCustomizerRemoveQQ","Remove QQ Plot","dt_qqremove",["removeQQPlot"]);return t.appendChild(e),t},this.toolsCustomizerCDF=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerButton(this.target+"-cX-ToolsCustomizerCDF","CDF Plot","dt_cdf",["addCDFPlot"]);return t.appendChild(e),t},this.toolsCustomizerRemoveCDF=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerButton(this.target+"-cX-ToolsCustomizerRemoveCDF","Remove CDF Plot","dt_cdfremove",["removeCDFPlot"]);return t.appendChild(e),t},this.toolsCustomizerSplom=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerButton(this.target+"-cX-ToolsCustomizerSPLOM","SPLOM","ly_splom",["toggleAttribute",["scatterPlotMatrix"]]);return t.appendChild(e),t},this.mouseoverSpanCustomizer=function(t){return function(e){var i=t.getTargetEvent(e);if(i&&("SPAN"!=i.tagName.toUpperCase()&&(i=i.parentNode),"SPAN"==i.tagName.toUpperCase()&&!i.className.match(/Active /))){var s=i.className.split(" ");i.className=s[0]+"Active draggable"}return!1}}(this),this.mouseoutSpanCustomizer=function(t){return function(e){var i=t.getTargetEvent(e);return i&&("SPAN"!=i.tagName.toUpperCase()&&(i=i.parentNode),"SPAN"==i.tagName.toUpperCase()&&(i.className=i.className.replace("Active "," "))),!1}}(this),this.mouseoverDivCustomizer=function(t){return function(e){var i=t.getTargetEvent(e);return i&&("DIV"!=i.tagName.toUpperCase()&&(i=i.parentNode),"DIV"!=i.tagName.toUpperCase()&&(i=i.parentNode),"DIV"==i.tagName.toUpperCase()&&(i.className="CanvasXpressToolCustomizerActive")),!1}}(this),this.mouseoutDivCustomizer=function(t){return function(e){var i=t.getTargetEvent(e);return i&&("DIV"!=i.tagName.toUpperCase()&&(i=i.parentNode),"DIV"!=i.tagName.toUpperCase()&&(i=i.parentNode),"DIV"==i.tagName.toUpperCase()&&(i.className="CanvasXpressToolCustomizer")),!1}}(this),this.mouseoverACustomizer=function(t){return function(e){var i=t.getTargetEvent(e);return i&&("A"!=i.tagName.toUpperCase()&&(i=i.parentNode),"A"==i.tagName.toUpperCase()&&(i.className="CanvasXpressFileCustomizerActive")),!1}}(this),this.mouseoutACustomizer=function(t){return function(e){var i=t.getTargetEvent(e);return i&&("A"!=i.tagName.toUpperCase()&&(i=i.parentNode),"A"==i.tagName.toUpperCase()&&(i.className="CanvasXpressFileCustomizer")),!1}}(this),this.loadFileCustomizer=function(t){return function(e){t.getTargetEvent(e);return t.closeCustomizer(),t.loadFile(e),!1}}(this),this.themeCustomizer=function(){var t=[];return t.push(this.themeCustomizerProperty()),t.push(this.themeCustomizerColors()),t.push(this.themeCustomizerBlindType()),t.push(this.themeCustomizerColorScheme()),t.push(this.themeCustomizerSpectrum()),t.push(this.themeCustomizerSpectrumScheme()),t.push(this.themeCustomizerSpectrumColorNumber()),t.push(this.themeCustomizerSpectrumZero()),t.push(this.themeCustomizerBackground()),t.push(this.themeCustomizerBackgroundColor()),t.push(this.themeCustomizerPlotBorder()),t.push(this.themeCustomizerMargin()),t.push(this.themeCustomizerFont()),[t,this.addRemoveCustomizerListenersRightPanel]},this.themeCustomizerProperty=function(){var t=this.newId("-cX-Customizer-Container-"),e=this.getCustomizerDivRaw(),i=this.addCustomizerHeader(t,"Theme","at_sch","Click to change theme");e.appendChild(i);for(var s=["c_ggplot","c_paultol","c_solarized","c_excel","c_stata","c_tableau","c_economist","c_wallstreetjournal","c_canvasxpress"],a=["GGPlot","Paul Tol","Solarized","Excel","Stata","Tableau","The Economist","Wall Street Journal","CanvasXpress"],r=["ggplot","paulTol","solarized","excel","stata","tableau","economist","wallStreetJournal","cx"],n=this.$cX("div",{className:"CanvasXpressCustomizerContainer",id:this.target+"-cX-ThemeCustomizerProperty"},{height:"fit-content",marginBottom:"10px"}),o=Math.floor(this.customizerRightWidth/3)-15,h=0;h<a.length;h++){var l=a[h].replace(/\s/g,""),c=s[h]&&CanvasXpress.icons.use.hasOwnProperty(s[h])?s[h]:CanvasXpress.png,d=this.$cXI(c,{id:t+"-"+l+"-THEME",className:"CanvasXpressCustomizerRightContainer",src:c,key:c,theme:r[h],title:a[h]},!1,!1,o);n.appendChild(d)}return e.appendChild(n),e},this.themeCustomizerBackground=function(){var t=this.newId("-cX-Customizer-Container-"),e=this.getCustomizerDivRaw(),i=this.addCustomizerHeader(t,"Background Type","b_btype","Click to change type");e.appendChild(i);var s=this.addCustomizerDiv(this.target+"-cX-ThemeCustomizerBackground",["Solid","Gradient","Window","Win - Grad","Grad - Solid"],["b_bbody","b_bgradient","b_bwindowsolid","b_bwindowsolid","b_bwindowgradient"],[["changeAttribute",["backgroundType","solid","solid"]],["changeAttribute",["backgroundType","gradient","gradient"]],["changeAttribute",["backgroundType","window","window"]],["changeAttribute",["backgroundType","windowGradient","windowGradient"]],["changeAttribute",["backgroundType","windowSolidGradient","windowSolidGradient"]]],["Solid","Gradient","Window","Window on Gradient","Gradient on Solid"],[20,32,28,42,43],3,this.customizerIcons);return e.appendChild(s),e},this.themeCustomizerBackgroundColor=function(){var t=this.newId("-cX-Customizer-Container-"),e=this.getCustomizerDivRaw(),i=this.addCustomizerArrayHeader(t,["Background","Window"],["b_bbody","b_bwindowsolid"],[["changeAttribute",["background"]],["changeAttribute",["backgroundWindow"]]],["background","backgroundWindow"],"Click change color",this.target+"-cX-ThemeCustomizerBackgroundColor",!1,!1,""," Color");e.appendChild(i);var s=this.addCustomizerColor(this.target+"-cX-ThemeCustomizerBackgroundColor","Background","b_bbody",!1,this.background,["changeAttribute",["background"]],"CanvasXpressCustomizerContainer");return e.appendChild(s),e},this.themeCustomizerColors=function(){this.newId("-cX-Customizer-Container-");var t=this.getCustomizerDivRaw(),e=this.addCustomizerHeader(this.newId("-cX-Customizer-Container-"),"Colors","at_col","Click to modify property");return t.appendChild(e),t},this.themeCustomizerColorScheme=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerSelect(this.target+"-cX-ThemeCustomizerColorScheme","Color Scheme","at_palette",!1,!1,this.getColorSchemes(),this.colorScheme,["changeAttribute",["colorScheme"]]);return t.appendChild(e),t},this.themeCustomizerBlindType=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerSelect(this.target+"-cX-ThemeCustomizerBlindType","Blindness Type","sl_eopen",!1,["None","Protanopia","Deuteranopia","Tritanopia","Monochromatic"],[!1,"protanopia","deuteranopia","tritanopia","monochromatic"],this.blindnessType,["changeAttribute",["blindnessType"]]);return t.appendChild(e),t},this.themeCustomizerSpectrum=function(){this.newId("-cX-Customizer-Container-");var t=this.getCustomizerDivRaw(),e=this.addCustomizerHeader(this.newId("-cX-Customizer-Container-"),"Spectrum","at_sch","Click to modify property");return t.appendChild(e),t},this.themeCustomizerSpectrumScheme=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerSelect(this.target+"-cX-ThemeCustomizerSpectrumScheme","Color Scheme","at_palette",!1,!1,this.getColorSchemes(),this.colorSpectrum,["changeAttribute",["colorSpectrum",[],!1,"modifyColorSpectrumByScheme"]]);return t.appendChild(e),t},this.themeCustomizerSpectrumColorNumber=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerInput(this.target+"-cX-ThemeCustomizerSpectrumColorNumber","Number of Colors","ch_snumber",this.colorSpectrumTarget,["updateTextColorAttribute",[["colorSpectrumTarget"]]]);return t.appendChild(e),t},this.themeCustomizerSpectrumZero=function(){var t=this.getCustomizerDivRaw(),e=this.addCustomizerInput(this.target+"-cX-ThemeCustomizerSpectrumZero","Zero-Center","ch_lc",!1,["updateTextColorAttribute",["colorSpectrumZeroValue","modifyColorSpectrumZeroValue"]]);return t.appendChild(e),t},this.themeCustomizerPlotBorder=function(){var t,e=this.newId("-cX-Customizer-Container-"),i=this.getCustomizerDivRaw();t="Heatmap"!=this.graphType?this.addCustomizerArrayHeader(e,["Graph","XY-Panel"],["dps_square","dps_square"],[["canvasBox","plotBox"],["canvasBox","plotBox"]],!1,"Click to change properties",this.target+"-cX-ThemeCustomizerPlotBorder",!1,!1,""," Border"):this.addCustomizerHeader(e,"Graph Border","dps_square","Click to change properties"),i.appendChild(t);var s=this.addCustomizerBorder(this.target+"-cX-ThemeCustomizerPlotBorder","canvasBoxColor","canvasBox");return i.appendChild(s),i},this.themeCustomizerMargin=function(){var t=this.newId("-cX-Customizer-Container-"),e=this.getCustomizerDivRaw(),i=this.addCustomizerArrayHeader(t,["Global","Right","Top","Left","Bottom"],["mr_all","mr_right","mr_top","mr_left","mr_bottom"],[["changeAttribute",["margin"]],["changeAttribute",["marginRight"]],["changeAttribute",["marginTop"]],["changeAttribute",["marginLeft"]],["changeAttribute",["marginBottom"]]],["margin","marginRight","marginTop","marginLeft","marginBottom"],"Click to change margin size",this.target+"-cX-ThemeCustomizerMargin",!1,!1,""," Margin");e.appendChild(i);var s=this.addCustomizerInt(this.target+"-cX-ThemeCustomizerMargin","margin");return e.appendChild(s),e},this.themeCustomizerFont=function(){var t=this.newId("-cX-Customizer-Container-"),e=this.getCustomizerDivRaw(),i=[],s=[],a=[],r=[];for(var n in CanvasXpress.fonts){var o=n.length>9?n.substring(0,9):n;i.push(o),s.push("ch_l"+n.substring(0,1).toLowerCase()),a.push(["changeAttribute",["fontName",n]]),r.push(16+5*(o.length-5))}var h=this.addCustomizerHeader(t,"Font","ch_oaa","Click to change font");e.appendChild(h);var l=this.addCustomizerDiv(this.target+"-cX-ThemeCustomizerFont",i,s,a,i,r,3,this.customizerIcons);return e.appendChild(l),e},this.clickThemeCustomizerProperty=function(t){return function(e){var i=t.getTargetEvent(e);return t.changeTheme(i.getAttribute("theme")),!1}}(this),this.searchCustomizer=function(){var t=[],e=this.newId("-cX-Customizer-Container-"),i=this.$cX("div",{id:e+"--SearchCustomizer",className:"CanvasXpressCustomizerContainer"},{width:this.customizerRightWidth-2+"px",height:"fit-content",marginBottom:"5px"}),s=this.addCustomizerHeader(e,"Search","z_zoom","Type to search");i.appendChild(s);var a=this.$cX("div"),r=this.$cX("input",{id:this.target+"-SearchCustomizerInput",className:"CanvasXpressSearchCustomizer",type:"text"},{width:this.customizerRightWidth-24+"px"});a.appendChild(r);var n=this.$cXI("op_cancel",{id:this.target+"-SearchCustomizerInputCancel",className:"CanvasXpressCustomizerRight",src:"op_cancel",key:"op_cancel"},{left:this.customizerLeftWidth+this.customizerRightWidth-38+"px",top:this.customizerItemHeight+22+"px",position:"fixed"},!1,20);a.appendChild(n),i.appendChild(a);var o=this.$cX("span",{id:this.target+"-SearchCustomizerSelectTitle",className:"CanvasXpressSearchCustomizerSelect"},{left:"10px",top:"0px"});i.appendChild(o);var h=this.$cX("select",{id:this.target+"-SearchCustomizerSelect",className:"CanvasXpressSearchCustomizer",size:10},{width:this.customizerRightWidth-20+"px"});i.appendChild(h);var l=this.$cX("span",{id:this.target+"-SearchCustomizerCategory",className:"CanvasXpressSearchCustomizerCategory"},{left:"10px",top:"0px",width:this.customizerRightWidth-20+"px"});i.appendChild(l);var c=this.$cX("span",{id:this.target+"-SearchCustomizerDescriptionTitle",className:"CanvasXpressSearchCustomizerDescription"},{left:"10px",top:"0px",width:this.customizerRightWidth-20+"px"});i.appendChild(c);var d=this.$cX("span",{id:this.target+"-SearchCustomizerDescription",className:"CanvasXpressSearchCustomizer"},{left:"10px",top:"0px",height:"200px",width:this.customizerRightWidth-20+"px",overflowY:"scroll"});i.appendChild(d);var p=this.$cX("span",{id:this.target+"-SearchCustomizerCurrentValue",className:"CanvasXpressSearchCustomizerCurrent"},{left:"10px",top:"0px"});i.appendChild(p);var g=this.$cX("input",{id:this.target+"-SearchCustomizerValue",className:"CanvasXpressSearchCustomizer",type:"text"},{width:this.customizerRightWidth-24+"px"});i.appendChild(g);var u=this.$cX("select",{id:this.target+"-SearchCustomizerValueSelect",className:"CanvasXpressSearchCustomizer",size:5},{width:this.customizerRightWidth-20+"px",display:"none"});i.appendChild(u);var m=this.$cX("input",{id:this.target+"-SearchCustomizerButton",className:"CanvasXpressSearchCustomizer",type:"button",value:"Draw"},{width:"100px",borderRadius:"4px",backgroundColor:"#ddd",height:"40px"});return i.appendChild(m),t.push(i),[t,this.addRemoveCustomizerListenersRightPanel]},this.updateCustomizerPropertyValue=function(t){return function(e){var i=t.getTargetEvent(e);t.setCustomizerPropertyValue(i.value)}}(this),this.clickCustomizerCategory=function(t){return function(e){var i=t.$(t.target+"-SearchCustomizerSelect");i&&i.value&&t.selectConfigurations(!1,i.value,this.innerHTML)}}(this),this.clickCustomizerSearch=function(t){return function(e){var i=t.$(t.target+"-SearchCustomizerSelect"),s=t.$(t.target+"-SearchCustomizerValue"),a=t.$(t.target+"-SearchCustomizerValueSelect");if(i.childNodes.length){var r=i.value,n=CanvasXpress.doc.P[r],o=n.O||"boolean"==n.T?a.value:s.value;switch(n.T){case"void":t[o]();break;case"integer":case"float":t.drawCustomizer(r,"null"==o?null:Number(o));case"string":case"color":t.drawCustomizer(r,o);break;case"boolean":t.drawCustomizer(r,"true"==o);break;case"array":case"object":case"filter":t.drawCustomizer(r,t.parseJSON(o))}}}}(this),this.clickCustomizerCancel=function(t){return function(e){t.resetCustomizerPropertyValue()}}(this),this.drawCustomizer=function(t,e){if(this[t]=e,"customizerSize"==t||"customizerGraphMaximize"==t){this.closeCustomizer();var i=this;setTimeout((function(){i.clickDataCustomizer()}),100)}else this.draw({func:"drawCustomizer",par:[t,e]})},this.selectConfigurations=function(t,e,i){var s=this.$(this.target+"-SearchCustomizerInput"),a=this.$(this.target+"-SearchCustomizerSelectTitle"),r=this.$(this.target+"-SearchCustomizerSelect"),n=this.$(this.target+"-SearchCustomizerCategory"),o=this.$(this.target+"-SearchCustomizerDescriptionTitle"),h=this.$(this.target+"-SearchCustomizerDescription"),l=this.$(this.target+"-SearchCustomizerCurrentValue"),c=this.$(this.target+"-SearchCustomizerValue"),d=this.$(this.target+"-SearchCustomizerValueSelect"),p=window.document.activeElement,g=this.getConfigurableProperties(i),u=[];if(t&&13==this.getKeyCode(t));else if(e&&i){for(var m=0;m<g.length;m++)u.push(g[m]);if(u.length>0&&a&&r&&o&&h&&l&&c&&d){this.resetCustomizerSelections(r),u.sort();for(m=0;m<u.length;m++){g=this.$cX("option",{text:u[m],value:u[m],selected:u[m]==e});try{r.add(g,null)}catch(t){r.add(g)}}this.setCustomizerPropertyValue(e,n,o,h,l,c,d),a.innerHTML=u.length}}else if(s&&p.id==s.id){for(m=0;m<g.length;m++)g[m].toLowerCase().indexOf(s.value.toLowerCase())>=0&&u.push(g[m]);if(u.length>0&&a&&r&&o&&h&&l&&c&&d){this.resetCustomizerSelections(r),u.sort();for(m=0;m<u.length;m++){g=this.$cX("option",{text:u[m],value:u[m]});try{r.add(g,null)}catch(t){r.add(g)}}r.options[0].selected=!0,this.setCustomizerPropertyValue(r.options[0].value,n,o,h,l,c,d),a.innerHTML=u.length}else s.value=s.value.slice(0,s.value.length-1)}return!1},this.resetCustomizerSelections=function(t){if(t&&t.hasChildNodes())for(;t.childNodes.length>=1;)t.removeChild(t.firstChild)},this.setCustomizerPropertyValue=function(t,e,i,s,a,r,n){if(t&&(e||(e=this.$(this.target+"-SearchCustomizerCategory")),i||(i=this.$(this.target+"-SearchCustomizerDescriptionTitle")),s||(s=this.$(this.target+"-SearchCustomizerDescription")),a||(a=this.$(this.target+"-SearchCustomizerCurrentValue")),r||(r=this.$(this.target+"-SearchCustomizerValue")),n||(n=this.$(this.target+"-SearchCustomizerValueSelect")),n)){this.resetCustomizerSelections(n);var o=CanvasXpress.doc.P[t];switch(e.innerHTML=o.M,i.innerHTML=t,s.innerHTML=o.C,a.innerHTML=o.T,o.T){case"void":r.style.display="block",n.style.display="none",r.type="text",r.value=t;break;case"integer":case"float":r.style.display="block",n.style.display="none",r.type="text",r.value=this[t];break;case"boolean":for(var h=[!0,!1],l=0;l<h.length;l++){var c=this.$cX("option",{text:h[l],value:h[l]});try{n.add(c,null)}catch(t){n.add(c)}c.selected=h[l]==this[t]}r.style.display="none",n.style.display="block";break;case"string":if(o.O){for(l=0;l<o.O.length;l++){c=this.$cX("option",{text:o.O[l],value:o.O[l]});try{n.add(c,null)}catch(t){n.add(c)}c.selected=o.O[l]==this[t]}r.style.display="none",n.style.display="block"}else r.style.display="block",n.style.display="none",r.type="text",r.value=this[t];break;case"color":r.style.display="block",n.style.display="none",r.type="color",r.value=this[t];break;case"array":case"object":case"filter":r.style.display="block",n.style.display="none",r.type="text",r.value=this.stringifyJSON(this[t]);break;default:r.style.display="block",n.style.display="none",r.type="text",r.value=this[t]}}},this.resetCustomizerPropertyValue=function(){this.$(this.target+"-SearchCustomizerInput").value="",this.$(this.target+"-SearchCustomizerCategory").innerHTML="",this.$(this.target+"-SearchCustomizerDescriptionTitle").innerHTML="",this.$(this.target+"-SearchCustomizerDescription").innerHTML="",this.resetCustomizerSelections(this.$(this.target+"-SearchCustomizerSelect")),this.$(this.target+"-SearchCustomizerCurrentValue").innerHTML="",this.$(this.target+"-SearchCustomizerValue").type="text",this.$(this.target+"-SearchCustomizerValue").value="",this.resetCustomizerSelections(this.$(this.target+"-SearchCustomizerValueSelect"))},this.getConfigurableProperties=function(t){var e=[];for(var i in CanvasXpress.doc.P){if(!CanvasXpress.doc.Z)this.getGraphTypes(CanvasXpress.doc.P[i],!0).hasOwnProperty(this.graphType)&&(t?CanvasXpress.doc.P[i].M==t&&e.push(i):e.push(i))}return e},this.getGraphTypes=function(t,e){var i=[];if(t.U)for(var s=0;s<t.U.length;s++){var a=t.U[s];i=i.concat(CanvasXpress.graphTypes[a])}else if(CanvasXpress.doc.M[t.M].U)for(s=0;s<CanvasXpress.doc.M[t.M].U.length;s++){a=CanvasXpress.doc.M[t.M].U[s];i=i.concat(CanvasXpress.graphTypes[a])}else i=CanvasXpress.graphTypes.AllGraphs;return e?this.getObjectArray(i):this.getUniqueEls(i).sort()},this.closeCustomizer=function(t){var e=this.$(this.target+"-cX-Customizer-Left-Panel"),i=this.$(this.target+"-cX-Customizer-Right-Panel");if(e&&i){this.addRemoveCustomizerListenersLeftPanel("removeEvtListener"),this.addRemoveCustomizerListenersRightPanel("removeEvtListener"),this.customizerItem=!1,this.customizerItemActive=!1;var s=e.parentNode;s.removeChild(e),s.removeChild(i),t?this.addCustomizer():this.clickDataCustomizer()}}},CanvasXpress.prototype.initDataFilter=function(){var t;this.heigthOffsetDataFilter=function(){return"Genome"==this.graphType?82:119},this.addDataFilterDiv=function(){if(!this.$(this.target+"-cX-DataFilter")){var t=this.meta.canvas.canvasPixelRatio,e=null!=this.dataFilterLastX?parseInt(this.dataFilterLastX):-this.meta.canvas.ctx.canvas.width/t*.5,i=null!=this.dataFilterLastY?parseInt(this.dataFilterLastY):this.meta.canvas.ctx.canvas.height/t*.5,s=this.heigthOffsetDataFilter();this.dataFilterHeight=this.meta.canvas.ctx.canvas.height/t-s,this.activeAccordion=null;var a=this.$cX("div",{id:this.target+"-cX-DataFilter",className:"CanvasXpressDataFilter draggable-container"},{top:i+"px",left:e+"px",display:"none",zIndex:1e4,marginLeft:"3px",width:this.dataFilterWidth+6+"px",height:"100%"}),r=this.$cX("div",{id:this.target+"-cX-DataFilterToolbar",className:"CanvasXpressDataFilterToolbar draggable"},{width:this.dataFilterWidth+"px"}),n=this.$cX("span",{innerHTML:"Filters",className:"CanvasXpressDataFilterToolbarText"}),o=this.$cXI(this.filterFlashingOn?"sl_lightbulbon":"sl_lightbulboff",{id:this.target+"-cX-DataFilterKeyFlash",className:"CanvasXpressDataFilterToolbarImage",src:this.filterFlashingOn?"sl_lightbulbon":"sl_lightbulboff",title:this.filterFlashingOn?"Turn off Flashing":"Turn on Flashing"},{display:"Network"==this.graphType?"block":"none"});CanvasXpress.system.isIE&&(o.style.marginTop="-10px");var h=this.$cXI("fp_funnelremove",{id:this.target+"-cX-DataFilterKeyReset",className:"CanvasXpressDataFilterToolbarImage",src:"fp_funnelremove",title:"Reset filters"});CanvasXpress.system.isIE&&(h.style.marginTop="-10px");var l=this.$cX(this.dataFilterLastState&&"docked"==this.dataFilterLastState?"fp_pinremove":"fp_pin",{id:this.target+"-cX-DataFilterKeyDock",className:"CanvasXpressDataFilterToolbarImage",src:this.dataFilterLastState&&"docked"==this.dataFilterLastState?"fp_pinremove":"fp_pin",title:this.dataFilterLastState&&"docked"==this.dataFilterLastState?"Undock":"Dock",state:this.dataFilterLastState&&"docked"==this.dataFilterLastState?"docked":"free"});CanvasXpress.system.isIE&&(l.style.marginTop="-10px");t=this.$cXI("op_cancel",{id:this.target+"-cX-DataFilterKeyClose",className:"CanvasXpressDataFilterToolbarImage",src:"op_cancel",title:"Close"});CanvasXpress.system.isIE&&(t.style.marginTop="-10px");var c=this.$cX("div",{id:this.target+"-cX-DataFilterContainer",className:"CanvasXpressDataFilterContainer"},{width:"fit-content"}),d=this.$cX("div",{id:this.target+"-cX-DataFilterVariableHeader",className:"CanvasXpressDataFilterHead"},{width:this.dataFilterWidth+"px",display:this.graphType.match(/Genome|Network/)?"none":"block"}),p=this.$cX("div",{id:this.target+"-cX-DataFilterVariableContent",className:"CanvasXpressDataFilterContent"},{width:this.dataFilterWidth+"px",height:"0px",display:"none"}),g=this.$cX("span",{innerHTML:"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Variables",className:"CanvasXpressDataFilterText"}),u=this.$cX("div",{id:this.target+"-cX-DataFilterSampleHeader",className:"CanvasXpressDataFilterHead"},{width:this.dataFilterWidth+"px",display:this.graphType.match(/Genome|Network/)?"none":"block"}),m=this.$cX("div",{id:this.target+"-cX-DataFilterSampleContent",className:"CanvasXpressDataFilterContent"},{width:this.dataFilterWidth+"px",height:"0px",display:"none"}),f=this.$cX("span",{innerHTML:"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Samples",className:"CanvasXpressDataFilterText"}),y=this.$cX("div",{id:this.target+"-cX-DataFilterNodeHeader",className:"CanvasXpressDataFilterHead"},{width:this.dataFilterWidth+"px",display:"Network"==this.graphType?"block":"none"}),x=this.$cX("div",{id:this.target+"-cX-DataFilterNodeContent",className:"CanvasXpressDataFilterContent"},{width:this.dataFilterWidth+"px",height:"0px",display:"none"}),v=this.$cX("span",{innerHTML:"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Nodes",className:"CanvasXpressDataFilterText"}),b=this.$cX("div",{id:this.target+"-cX-DataFilterEdgeHeader",className:"CanvasXpressDataFilterHead"},{width:this.dataFilterWidth+"px",display:"Network"==this.graphType?"block":"none"}),A=this.$cX("div",{id:this.target+"-cX-DataFilterEdgeContent",className:"CanvasXpressDataFilterContent"},{width:this.dataFilterWidth+"px",height:"0px",display:"none"}),w=this.$cX("span",{innerHTML:"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Edges",className:"CanvasXpressDataFilterText"}),C=this.$cX("div",{id:this.target+"-cX-DataFilterGenomeHeader",className:"CanvasXpressDataFilterHead"},{width:this.dataFilterWidth+"px",display:"Genome"==this.graphType?"block":"none"}),T=this.$cX("div",{id:this.target+"-cX-DataFilterGenomeContent",className:"CanvasXpressDataFilterContent"},{width:this.dataFilterWidth+"px",height:"0px",display:"none"}),S=this.$cX("span",{innerHTML:"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Features",className:"CanvasXpressDataFilterText"});r.appendChild(n),r.appendChild(t),r.appendChild(l),r.appendChild(h),r.appendChild(o),d.appendChild(g),u.appendChild(f),y.appendChild(v),b.appendChild(w),C.appendChild(S),c.appendChild(d),c.appendChild(p),c.appendChild(u),c.appendChild(m),c.appendChild(y),c.appendChild(x),c.appendChild(b),c.appendChild(A),c.appendChild(C),c.appendChild(T),a.appendChild(r),a.appendChild(c);var M=this.$("east-wrapper-"+this.target);M&&(M.appendChild(a),this.addRemoveDataFilterListeners("addEvtListener"))}},this.addRemoveDataFilterListeners=function(t){var e=this.$(this.target+"-cX-DataFilterToolbar"),i=this.$(this.target+"-cX-DataFilterKeyFlash"),s=this.$(this.target+"-cX-DataFilterKeyReset"),a=this.$(this.target+"-cX-DataFilterKeyDock"),r=this.$(this.target+"-cX-DataFilterKeyClose"),n=this.$(this.target+"-cX-DataFilterVariableHeader"),o=this.$(this.target+"-cX-DataFilterSampleHeader"),h=this.$(this.target+"-cX-DataFilterNodeHeader"),l=this.$(this.target+"-cX-DataFilterEdgeHeader"),c=this.$(this.target+"-cX-DataFilterGenomeHeader");e&&i&&s&&a&&r&&n&&o&&h&&l&&c&&(this[t](e,"mousedown",this.registerMousemove,!1),this[t](i,"click",this.flashDataFilter,!1),this[t](s,"click",this.resetDataFilter,!1),this[t](a,"click",this.dockUndockDataFilter,!1),this[t](r,"click",this.hideDataFilter,!1),this[t](n,"click",this.activateAccordion,!1),this[t](o,"click",this.activateAccordion,!1),this[t](h,"click",this.activateAccordion,!1),this[t](l,"click",this.activateAccordion,!1),this[t](c,"click",this.activateAccordion,!1))},this.flashDataFilter=(t=this,function(e){var i=t.getTargetEvent(e);return t.filterFlashingOn?(t.filterFlashingOn=!1,t.$cXIU(i,"sl_lightbulboff",{title:"Turn on Flashing"})):(t.filterFlashingOn=!0,t.$cXIU(i,"sl_lightbulbon",{title:"Turn off Flashing"})),!1}),this.activateAccordion=function(t){return function(e,i,s,a){if(i||(i=t.getTargetEvent(e)),i){"span"==i.tagName.toLowerCase()&&(i=i.parentNode),i.className="CanvasXpressDataFilterHeadActive",i.firstChild.className="CanvasXpressDataFilterTextActive";var r=i.nextSibling;r&&setTimeout((function(){if(t.activeAccordion&&r.id==t.activeAccordion.id&&(r=!1),t.transitionAccordion((new Date).getTime(),250,r,t.activeAccordion,s,a),t.activeAccordion){var e=t.activeAccordion.previousSibling;e.className="CanvasXpressDataFilterHead",e.firstChild.className="CanvasXpressDataFilterText"}t.activeAccordion=r}),a?0:33)}return!1}}(this),this.resizeDataFilterHeight=function(t){this.$(this.target+"-cX-DataFilter");var e=this.meta.canvas.canvasPixelRatio;this.dataFilterHeight=(t||this.meta.canvas.ctx.canvas.height/e)-this.heigthOffsetDataFilter(),this.activeAccordion&&(this.activeAccordion.style.height=this.dataFilterHeight+"px")},this.moveDataFilter=function(t,e,i,s,a){var r,n=this.meta.canvas.canvasPixelRatio,o=this.$(this.target+"-cX-DataFilter"),h=this.$(this.target+"-cX-DataFilterToolbar"),l=this.$(this.target+"-cX-DataFilterKeyDock"),c=this.$(this.remoteParentId+"-canvasXpressRemoteWindow"),d=this.$("north-container-"+this.target),p=this.$("south-container-"+this.target),g=this.$("west-container-"+this.target),u=this.$("middle-container-"+this.target),m=this.$("east-container-"+this.target),f=this.$("east-wrapper-"+this.target),y=s||this.meta.canvas.ctx.canvas.height/n,x=this.dataFilterWidth;if(o&&h&&l&&d&&p&&g&&u&&m&&f){var v=h.clientWidth-x+2;if(r=parseInt(d.clientHeight)+y+parseInt(p.clientHeight),"free"!=l.state||t)if(l.state="free",this.dataFilterLastState="free",t&&(delete this.dataFilterLastState,this.dataFilterLastX=null,this.dataFilterLastY=null,o.style.width=x+"px",o.style.height=y+"px"),A=parseInt(g.style.width)+this.meta.canvas.ctx.canvas.width/n,c&&this.resizeMoveObject(c,0,0,Math.max(A,parseInt(p.clientWidth))+0,r+64),t){var b=this;this.transitionMagic(o,"holeOut",(function(){o.style.display="none",b.resizeMoveObject(u,0,0,A,y),b.resizeMoveObject(m,0,0,0,y),b.resizeMoveObject(f,0,0,0,y,i)}))}else this.resizeMove(o,-this.meta.canvas.ctx.canvas.width/n*.5,.5*y,x,y);else{l.state="docked",this.dataFilterLastState="docked",this.dataFilterLastX=o.style.left,this.dataFilterLastY=o.style.top;var A=parseInt(g.style.width)+this.meta.canvas.ctx.canvas.width/n+h.clientWidth+2;c&&this.resizeMoveObject(c,0,0,Math.max(A,parseInt(p.clientWidth))+0,r+64),this.resizeMoveObject(u,0,0,A+(a||0),y),this.resizeMoveObject(m,a||0,0,x+v,y),this.resizeMoveObject(f,0,0,x+v,y),e||i?this.resizeMoveObject(o,0,0,x,y,i):this.resizeMove(o,0,0,x,y)}e&&(l.state=e),"docked"==l.state?this.$cXIU(l,"fp_pinremove",{title:"Undock"}):this.$cXIU(l,"fp_pin",{title:"Dock"})}},this.getDataFilterState=function(){var t=this.$(this.target+"-cX-DataFilterKeyDock");return!!t&&t.getAttribute("state")},this.updateDataFilter=function(t,e,i){if(!this.isTransition()){var s,a,r=this,n=this.isDOE,o=this.$(this.target+"-cX-DataTable"),h=!o||"block"!=o.style.display,l=function(t,e,i,s,a){var n={min:">=",max:"<=",like:"like",exact:"exact"};n[i]&&(r[t].comp.push(null!=a&&0!=a?s+":::"+a:s),r[t].op.push(n[i]),r[t].cases.push(!1),r[t].type.push("Filter"),r[t].value.push(r.toDoFilter[e][s][i]))};if(this.filteringStringOn||this.filteringNumericOn||t){this.resetFilters();for(var c in n&&this.removeDOE(!0),this.toDoFilter)for(var d in this.toDoFilter[c])for(var p in this.toDoFilter[c][d]){var g=this.toDoFilter[c][d].ref;"ref"!=p&&("sample"==c?l("filterSmpBy",c,p,d,g):"variable"==c?l("filterVarBy",c,p,d,g):"node"==c?l("filterNodeBy",c,p,d,g):"edge"==c?l("filterEdgeBy",c,p,d,g):"feature"==c&&l("filterFeatureBy",c,p,d,g))}if(this.reset(!0,e,i),this.filterData(!0),this.updateDataTable(),h&&this.hideUnhideDataTable(!0),this.layoutComb&&(s=this.varIndices,a=this.smpIndices),this.motionBy&&this.motionObject&&(this.motionObject.varIndices=this.cloneObject(this.varIndices),this.motionObject.smpIndices=this.cloneObject(this.smpIndices)),n&&this.createDOE(!1,!1,!0),this.decorations&&this.decorations.reg&&this.updateCorrelation(),this.validateAxesOnFilterData())if("Network"==this.graphType&&this.filterFlashingOn){for(var u=[],m=0;m<this.data.nodes.length;m++)this.data.nodes[m].hide||u.push(this.data.nodes[m].id);this.flashNode(u,!1,5)}else this.isGroupedData&&this.smpIndices.length>0&&this.groupSamples(this.groupingFactors,!1,!1,!0,!0),this.draw({func:"updateDataFilter",par:[!0,e,i],prop:{toDoFilter:this.toDoFilter}}),this.layoutComb&&(this.varIndices=s,this.smpIndices=a);else this.scatterPlotMatrix||this.reset(!0,!1,i),this.draw({func:"updateDataFilter",par:[!0,e,i],prop:{toDoFilter:this.toDoFilter}}),this.layoutComb&&(this.varIndices=s,this.smpIndices=a)}}},this.refreshDataFilters=function(t,e,i,s,a,r){if(e&&i&&s&&!r)this.refreshDataFilters(s,e,i,!1,!1,!0);else if(t&&e){var n=function(t){var e=1e6;return((t*e-parseInt(t)*e)/e).toString().replace(/\./,"").length-1},o=CanvasXpress.system.isIE?46:44;switch(e){case"variable":S=this.getVariableIndices(i)>=0?this.getSampleVariableData("smps"):this.getSampleVariableData("vars");break;case"sample":S=this.getSampleIndices(i)>=0?this.getSampleVariableData("vars"):this.getSampleVariableData("smps");break;case"node":S=this.getFilteredNetworkData("nodes");break;case"edge":S=this.getFilteredNetworkData("edges")}if(S){this.lastRefreshedFilter||(this.lastRefreshedFilter=[]);for(var h=this.lastRefreshedFilter.length>0?this.lastRefreshedFilter[this.lastRefreshedFilter.length-1]:"",l=!1;h==i;)this.lastRefreshedFilter.pop(),h=this.lastRefreshedFilter[this.lastRefreshedFilter.length-1],l=!0;for(var c=0;c<t.childNodes.length;c++){var d=t.childNodes[c],p=this.$(d.id.replace("DataFilterContainer","DataFilterScroll")),g=this.$(d.id.replace("DataFilterContainer","DataFilterOptions")),u=this.$(d.id.replace("DataFilterContainer","DataFilterRange")),m=this.$(d.id.replace("DataFilterContainer","DataFilterMin")),f=this.$(d.id.replace("DataFilterContainer","DataFilterMax")),y=this.$(d.id.replace("DataFilterContainer","DataFilterMinLabel")),x=this.$(d.id.replace("DataFilterContainer","DataFilterMaxLabel"));if(p&&g&&S.hasOwnProperty(p.uvalue)){if(p.uvalue!=i){var v=this.sortObject(S[p.uvalue].o);if(p.uvalue==h)p.fvalues=this.cloneObject(p.values);else{p.fvalues=["(All) "+v.length+" values"];for(var b=0;b<v.length;b++)p.fvalues.push(v[b]);p.fvalues.push("")}}else s&&l&&(h==p.uvalue||0==this.lastRefreshedFilter.length)&&(p.fvalues=p.values);for(;g.childNodes.length>0;)g.removeChild(g.childNodes[0]);this.loadStringFilter(p.fvalues,p.uvalue,g,p.values.length,S[p.uvalue].o),d.className.match(/Out$/)&&(p.firstChild.firstChild.style.display="none"),"long"==p.type&&(p.style.height=p.fvalues.length-2>this.maxItemMenuCheckbox?16*(p.fvalues.length+1)+"px":19*(p.fvalues.length-1)+4+"px")}else if(u&&m&&f&&y&&x&&S.hasOwnProperty(u.uvalue)){var A,w,C=n(S[u.uvalue].o.max-S[u.uvalue].o.min);if(u.uvalue!=i){if(u.min==S[u.uvalue].o.min&&u.max!=S[u.uvalue].o.max)A="log"==u.scale?S[u.uvalue].o.max?(Math.log(S[u.uvalue].o.max)-u.lmin)/u.lunits:0:(S[u.uvalue].o.max-u.min)/u.units,A=Math.ceil(A),u.style.width=Math.max(0,Math.floor(A)-parseInt(m.style.left))+"px";else if(u.min!=S[u.uvalue].o.min&&u.max==S[u.uvalue].o.max)A="log"==u.scale?S[u.uvalue].o.min?(Math.log(S[u.uvalue].o.min)-u.lmin)/u.lunits:0:(S[u.uvalue].o.min-u.min)/u.units,A=Math.ceil(A),u.style.width=parseInt(u.style.width)-A+parseInt(m.style.left)+"px",m.style.left=A+"px",u.style.left=A+"px",f.style.left=A+"px";else if(u.min!=S[u.uvalue].o.min&&u.max!=S[u.uvalue].o.max){if("log"==u.scale?(A=S[u.uvalue].o.max?(Math.log(S[u.uvalue].o.max)-u.lmin)/u.lunits:0,w=S[u.uvalue].o.min?(Math.log(S[u.uvalue].o.min)-u.lmin)/u.lunits:0):(A=(S[u.uvalue].o.max-u.min)/u.units,w=(S[u.uvalue].o.min-u.min)/u.units),!this.isNumber(w)||!this.isNumber(A))continue;w=Math.ceil(w),A=Math.ceil(A),u.style.width=A-w+"px",m.style.left=w+"px",u.style.left=w+"px",f.style.left=w+"px"}else u.min==S[u.uvalue].o.min&&u.max==S[u.uvalue].o.max&&(u.style.width=this.dataFilterWidth-o+"px",m.style.left="0px",u.style.left="0px",f.style.left="0px");y.value=this.formatNumber(S[u.uvalue].o.min,C),x.value=this.formatNumber(S[u.uvalue].o.max,C)}}}s?this.refreshDataFilters(s,e,i):this.lastRefreshedFilter.push(i)}}else{if(a)if(l=this.$(this.target+"-cX-DataFilterContainer")){this.lastRefreshedFilter=[];for(c=0;c<l.childNodes.length;c++)if(l.childNodes[c].id.match("Content"))for(d=l.childNodes[c],b=0;b<d.childNodes.length;b++)if(d.childNodes[b].id.match("Items")){var T=d.childNodes[b];for(i=0;i<T.childNodes.length;i++)if(T.childNodes[i].id.match("Container")){var S=T.childNodes[i];p=this.$(S.id.replace("DataFilterContainer","DataFilterScroll")),g=this.$(S.id.replace("DataFilterContainer","DataFilterOptions"));if(p&&g){for(p.fvalues=p.values;g.childNodes.length>0;)g.removeChild(g.childNodes[0]);this.loadStringFilter(p.fvalues,p.uvalue,g,p.values.length)}}}}}},this.validateAxesOnFilterData=function(){if(this.startingXAxisIndices||(this.startingXAxis=this.xAxis,this.startingXAxisIndices=this.graphType.match(/Scatter/i)?this.xAxisIndices:this.xAxisVarIndices),this.startingXAxis2Indices||(this.startingXAxis2=this.xAxis2,this.startingXAxis2Indices=this.xAxis2VarIndices),this.startingYAxisIndices||(this.startingYAxis=this.yAxis,this.startingYAxisIndices=this.yAxisIndices),this.startingZAxisIndices||(this.startingZAxis=this.zAxis,this.startingZAxisIndices=this.zAxisIndices),this.graphType.match(/Scatter/i)){var t=this.getObjectArray(this.smpIndices);this.xAxis=[],this.xAxisIndices=[];for(var e=0;e<this.startingXAxisIndices.length;e++)t.hasOwnProperty(this.startingXAxisIndices[e])&&(this.xAxis.push(this.data.y.smps[this.startingXAxisIndices[e]]),this.xAxisIndices.push(this.startingXAxisIndices[e]));if(this.xAxisIndices.length<1)return this.xAxis=this.startingXAxis,this.xAxisIndices=this.startingXAxisIndices,this.debug&&alert("Cannot filter since there are no samples left in X-Axis"),!1;this.yAxis=[],this.yAxisIndices=[];for(e=0;e<this.startingYAxisIndices.length;e++)t.hasOwnProperty(this.startingYAxisIndices[e])&&(this.yAxis.push(this.data.y.smps[this.startingYAxisIndices[e]]),this.yAxisIndices.push(this.startingYAxisIndices[e]));if(this.yAxisIndices.length<1)return this.yAxis=this.startingYAxis,this.yAxisIndices=this.startingYAxisIndices,this.debug&&alert("Cannot filter since there are no samples left in Y-Axis"),!1;if("Scatter3D"==this.graphType||"ScatterBubble2D"==this.graphType){this.zAxis=[],this.zAxisIndices=[];for(e=0;e<this.startingZAxisIndices.length;e++)t.hasOwnProperty(this.startingZAxisIndices[e])&&(this.zAxis.push(this.data.y.smps[this.startingZAxisIndices[e]]),this.zAxisIndices.push(this.startingZAxisIndices[e]));if(this.zAxisIndices.length<1)return this.zAxis=this.startingZAxis,this.zAxisIndices=this.startingZAxisIndices,this.debug&&alert("Cannot filter since there are no samples left in Z-Axis"),!1}}else if(this.graphType.match(/BarLine|DotLine|AreaLine|StackedLine|StackedPercentLine/)){t=this.getObjectArray(this.varIndices);this.xAxis=[],this.xAxisIndices=[];for(e=0;e<this.startingXAxisIndices.length;e++)t.hasOwnProperty(this.startingXAxisIndices[e])&&(this.xAxis.push(this.data.y.vars[this.startingXAxisIndices[e]]),this.xAxisIndices.push(this.startingXAxisIndices[e]));if(this.xAxisIndices.length<1)return this.xAxis=this.startingXAxis,this.xAxisIndices=this.startingXAxisIndices,this.debug&&alert("Cannot filter since there are no variables left in X-Axis"),!1;this.xAxis2=[],this.xAxis2Indices=[];for(e=0;e<this.startingXAxis2Indices.length;e++)t.hasOwnProperty(this.startingXAxis2Indices[e])&&(this.xAxis2.push(this.data.y.vars[this.startingXAxis2Indices[e]]),this.xAxis2Indices.push(this.startingXAxis2Indices[e]));if(this.xAxis2Indices.length<1)return this.xAxis2=this.startingXAxis2,this.xAxisIndices2=this.startingXAxis2Indices,this.debug&&alert("Cannot filter since there are no variables left in X-Axis2"),!1}return!0},this.showDataFilter=function(t){return function(e,i,s){var a=t.$(t.target+"-cX-DataFilter");if(a||t.disableEvents||t.disableDataFilters||(t.addDataFilterDiv(),a=t.$(t.target+"-cX-DataFilter")),a){if("0px"==a.style.left&&"0px"==a.style.top&&!s){var r=this.meta.canvas.canvasPixelRatio,n=t.$("west-container-"+t.target),o=t.$("middle-container-"+t.target);n&&o&&(o.style.width=parseInt(n.clientWidth)+t.meta.canvas.ctx.canvas.width/r+t.dataFilterWidth+"px")}t.activeTarget&&(t.activeTarget.style.zIndex=1e4),t.activeTarget=a,a.style.display="block",a.style.opacity=0,t.loadDataFilter(),t.resizeDataFilterHeight(s),t.activeAccordion?i&&i():"Genome"==t.graphType?t.activateAccordion(!1,t.$(t.target+"-cX-DataFilterGenomeHeader"),i,!0):"Network"==t.graphType?t.activateAccordion(!1,t.$(t.target+"-cX-DataFilterNodeHeader"),i,!0):t.activateAccordion(!1,t.$(t.target+"-cX-DataFilterVariableHeader"),i,!0),a.style.zIndex=10001}return!1}}(this),this.removeGenericDataFilterListenersOrReset=function(t){var e=[],i=[];switch(this.graphType){case"Bar":case"Line":case"BarLine":case"Area":case"AreaLine":case"Dotplot":case"DotLine":case"Heatmap":case"Stacked":case"StackedLine":case"StackedPercent":case"StackedPercentLine":case"Boxplot":case"Correlation":case"Pie":case"Scatter2D":case"ScatterBubble2D":case"Scatter3D":case"Circular":case"Map":case"Gantt":var s=this.$(this.target+"-cX-DataFilterSampleContent"),a=this.$(this.target+"-cX-DataFilterVariableContent");s&&a&&(e.push(s,a),i.push(this.getSampleVariableData("smps",!0)),i.push(this.getSampleVariableData("vars",!0)));break;case"Venn":return;case"Network":var r=this.$(this.target+"-cX-DataFilterNodeContent"),n=this.$(this.target+"-cX-DataFilterEdgeContent");r&&n&&(e.push(r,n),i.push(this.getNodeData(!0)),i.push(this.getEdgeData(!0)));break;case"Genome":var o=this.$(this.target+"-cX-DataFilterGenomeContent");o&&(e.push(o),i.push(this.getFeatureData(!0)))}for(var h=0;h<i.length;h++){e[h];var l=i[h],c=this.getKeys(l);c.sort();for(var d=0;d<c.length;d++){var p=l[c[d]].t,g=c[d].replace(/\W/g,"_");if("string"==p){var u=this.$(this.target+":"+g+":cX-DataFilterInput"),m=this.$(this.target+":"+g+":cX-DataFilterScroll"),f=this.$(this.target+":"+g+":cX-DataFilterMask");m&&u&&(t?(u.value="",this.resetSelectStringFilter(m)):this.addRemoveStringDataFilterListeners("removeEvtListener",f))}else{var y=this.$(this.target+":"+g+":cX-DataFilterMin"),x=this.$(this.target+":"+g+":cX-DataFilterMinLabel"),v=this.$(this.target+":"+g+":cX-DataFilterRange"),b=this.$(this.target+":"+g+":cX-DataFilterMax"),A=this.$(this.target+":"+g+":cX-DataFilterMaxLabel"),w=this.$(this.target+":"+g+":cX-DataFilterScale"),C=CanvasXpress.system.isIE?46:44;y&&x&&v&&b&&A&&w&&(t?(y.style.left="0px",x.value=this.formatNumber(v.min,v.decis),v.style.left="0px",v.style.width=this.dataFilterWidth-C+"px",b.style.left="0px",A.value=this.formatNumber(v.max,v.decis)):this.addRemoveNumericDataFilterListeners("removeEvtListener",y,b,x,A,w))}}}},this.loadDataFilter=function(){switch(this.toDoFilter||(this.toDoFilter={}),this.graphType){case"Bar":case"Line":case"BarLine":case"Area":case"AreaLine":case"Dotplot":case"DotLine":case"Heatmap":case"Stacked":case"StackedLine":case"StackedPercent":case"StackedPercentLine":case"Boxplot":case"Correlation":case"Pie":case"Scatter2D":case"ScatterBubble2D":case"Scatter3D":case"Circular":case"Map":case"Gantt":return this.loadDataFilterSmpVar();case"Venn":return;case"Network":return this.loadDataFilterNetwork();case"Genome":return this.loadDataFilterGenome()}},this.loadDataFilterGeneric=function(t,e,i){var s="Genome"==this.graphType?95:116,a=this.getKeys(i);a.sort(),e.loaded||(e.loaded={});var r=e.id+"Search";if(!this.$(r)){var n=this.$cX("div",{id:r,className:"CanvasXpressDataFilterContainerHoverable"},{width:"97%"}),o=this.$cX("input",{id:r+"Input",type:"text",placeholder:" Search filters"},{cursor:"default",width:"97%",margin:"3px",border:"none"}),h=this.$cX("div",{id:r+"Items"});n.appendChild(o),e.appendChild(n),e.appendChild(h)}var l=this.$(r+"Items"),c=this.meta.canvas.canvasPixelRatio;l&&(l.style.height=this.meta.canvas.ctx.canvas.height/c-s);for(var d=0;d<a.length;d++){var p=i[a[d]].t,g=i[a[d]].r,u=this.getKeys(i[a[d]].o),m=this.target+":"+a[d].replace(/\W/g,"_")+":cX-DataFilterContainer";this.$(m)||u.length>0&&("string"==p?e.loaded[a[d]]||(h.appendChild(this.createStringFilter(t,a[d],u,g)),e.loaded[a[d]]=!0):e.loaded[a[d]]||("min"==u[0]&&"max"==u[1]&&(u=[i[a[d]].o.min,i[a[d]].o.max]),h.appendChild(this.createNumericFilter(t,a[d],u,g)),e.loaded[a[d]]=!0))}},this.loadDataFilterSmpVar=function(){var t=this.$(this.target+"-cX-DataFilterSampleContent"),e=this.$(this.target+"-cX-DataFilterVariableContent"),i="Scatter2D"==this.graphType&&"manhattan"==this.scatterType,s=!!i&&[this.manhattanMarkerChromosomeNumber,this.manhattanMarkerLogPValue];t&&e&&(this.loadDataFilterGeneric("sample",t,this.getSampleVariableData("smps",!0,s,!1,i)),this.loadDataFilterGeneric("variable",e,this.getSampleVariableData("vars",!0)))},this.loadDataFilterNetwork=function(){var t=this.$(this.target+"-cX-DataFilterNodeContent"),e=this.$(this.target+"-cX-DataFilterEdgeContent");t&&e&&(this.loadDataFilterGeneric("node",t,this.getNodeData(!0)),this.loadDataFilterGeneric("edge",e,this.getEdgeData(!0)))},this.loadDataFilterGenome=function(){var t=this.$(this.target+"-cX-DataFilterGenomeContent");t&&this.loadDataFilterGeneric("feature",t,this.getFeatureData(!0))},this.createNumericFilter=function(t,e,i,s,a,r){var n=this,o=CanvasXpress.system.isIE?46:44;(i=this.filterNumbers(i)).sort((function(t,e){return t-e}));var h,l,c=e.replace(/\W/g,"_"),d=a?this.target+":"+c+"_":this.target+":"+c,p=this.$cX("div",{id:d+":cX-DataFilterContainer",className:"CanvasXpressDataFilterContainerHoverable",type:"numeric",args:[t,e,i,s,a]}),g=this.$cX("div",{id:d+":cX-DataFilterScale",className:i[0]<=0?"CanvasXpressDataFilterContainerScaleNone":"CanvasXpressDataFilterContainerScaleLinearLog",innerHTML:e,draggable:!0},{width:this.dataFilterWidth-18+"px",margin:"5px"}),u=this.$cX("div",!1,{width:this.dataFilterWidth-18+"px",height:"18px",margin:"2px"}),m=!(parseFloat(i[0])<0)&&(0==parseFloat(i[0])?0:Math.log(parseFloat(i[0]))),f=!(parseFloat(i[i.length-1])<0)&&(0==parseFloat(i[i.length-1])?0:Math.log(parseFloat(i[i.length-1]))),y=null!=m&&null!=f&&(f-m)/(this.dataFilterWidth-o),x=(i[i.length-1]-i[0])/(this.dataFilterWidth-o),v=r?[(r[1]-r[0])/x,(r[0]-i[0])/x]:[n.dataFilterWidth-o,0],b=this.$cX("div",{id:d+":cX-DataFilterRange",className:"CanvasXpressDataFilterContainerRange",min:parseFloat(i[0]),max:parseFloat(i[i.length-1]),cmin:parseFloat(i[0]),cmax:parseFloat(i[i.length-1]),range:i[i.length-1]-i[0],units:x,decis:(h=i[i.length-1]-i[0],l=1e6,((h*l-parseInt(h)*l)/l).toString().replace(/\./,"").length-1),lmin:m,lmax:f,lunits:y,scale:!!y&&"linear",filter:t,ref:s,uvalue:e},{width:v[0]+"px",left:v[1]+"px"}),A=this.$cX("input",{id:d+":cX-DataFilterMinLabel",className:"CanvasXpressDataFilterContainerMinValue",type:"text",value:this.formatNumber(r?r[0]:i[0],b.decis)}),w=this.$cX("input",{id:d+":cX-DataFilterMaxLabel",className:"CanvasXpressDataFilterContainerMaxValue",type:"text",value:this.formatNumber(r?r[1]:i[i.length-1],b.decis)}),C=this.$cX("div",{className:"CanvasXpressDataFilterContainerNumeric"},{width:n.dataFilterWidth-16+"px"}),T=this.$cX("div",{id:d+":cX-DataFilterMin",className:"CanvasXpressDataFilterContainerMin"},{left:v[1]+"px"}),S=this.$cX("div",{id:d+":cX-DataFilterMax",className:"CanvasXpressDataFilterContainerMax"},{left:v[1]+"px"});return u.appendChild(A),u.appendChild(w),C.appendChild(T),C.appendChild(b),C.appendChild(S),p.appendChild(g),p.appendChild(u),p.appendChild(C),this.addRemoveNumericDataFilterListeners("addEvtListener",T,S,A,w,g),p},this.addRemoveNumericDataFilterListeners=function(t,e,i,s,a,r){t&&e&&i&&s&&a&&r&&(this[t](e,"mousedown",this.mousedownNumericFilter,!1),this[t](i,"mousedown",this.mousedownNumericFilter,!1),this[t](s,"change",this.changeNumericFilter,!1),this[t](a,"change",this.changeNumericFilter,!1),this[t](r,"click",this.clickNumericFilter,!1),this[t](r,"dragstart",this.dragStartDataFilter,!1),this[t](r,"dragend",this.dragEndDataFilter,!1))},this.dragStartDataFilter=function(t){return function(e){e.acs=t.adjustedCoordinates(e);var i=t.getTargetEvent(e);return i&&(e.dataTransfer.setDragImage(i.parentNode,-5,-5),i.parentNode.style.opacity="0.3",e.dataTransfer.setData("text",i.parentNode.id),t.xMouseDown=e.screenX,t.yMouseDown=e.screenY),!1}}(this),this.dragEndDataFilter=function(t){return function(e){if(e.ace=t.adjustedCoordinates(e),t.getTargetEvent(e)){t.addRemoveDataFilter(e.srcElement.parentNode);e.screenX,t.xMouseDown,e.screenY,t.yMouseDown}return!1}}(this),this.addRemoveDataFilter=function(t,e,i,s,a,r){var n=!1;if(!t){if(this.loadDataFilter(),!(e&&i&&s))return;"string"==s&&(i[2].shift(),i[2].pop()),t=a?this.$(a):this[e].apply(this,i),n=!0}if(e||(e="string"==t.type?"createStringFilter":"createNumericFilter"),i||(i=t.args),t){t.style.opacity="1.0",t.style.cssFloat=r&&r.position&&r.position.match(/Right/)?"right":"left";var o=t.parentNode;if(n&&!a||o.id.match(/DataFilter/)){if(t.className="CanvasXpressDataFilterContainerHoverableOut","string"==t.type){var h=t.getElementsByClassName("CanvasXpressDataFilterContainerMaskNoOverflow"),l=t.getElementsByClassName("CanvasXpressDataFilterContainerMask");h.length?((u=t.childNodes[1]).className="CanvasXpressDataFilterContainerMaskNoOverflowOut",u.style.height="16px",u.firstChild.firstChild.style.display="flex",u.firstChild.firstChild.firstChild.style.display="none"):l.length&&((u=t.childNodes[2]).style.display="none")}var c=this.$("northest-wrapper-"+this.target),d=this.$("southest-wrapper-"+this.target);c&&d&&(r&&r.position&&r.position.match(/bottom/)?d.appendChild(t):c.appendChild(t)),n||r||CanvasXpress.stack[this.target].afterRender.push(["addRemoveDataFilter",[!1,e,i,t.type]])}else{t.className="CanvasXpressDataFilterContainerHoverableOut";var p,g=t.id.split(":")[1];if("string"==t.type){var u;h=t.getElementsByClassName("CanvasXpressDataFilterContainerMaskNoOverflowOut"),l=t.getElementsByClassName("CanvasXpressDataFilterContainerMaskOut");h.length?((u=t.childNodes[1]).className="CanvasXpressDataFilterContainerMaskNoOverflow",u.style.height=u.firstChild.style.height,u.firstChild.firstChild.style.display="",u.firstChild.firstChild.firstChild.style.display=""):l.length&&((u=t.childNodes[2]).style.display="");var m=this.$(this.target+":"+g+":cX-DataFilterMask");m&&(p=this.rebuildDataTableFilter(),this.addRemoveStringDataFilterListeners("removeEvtListener",m))}else{var f=this.$(this.target+":"+g+":cX-DataFilterMin"),y=this.$(this.target+":"+g+":cX-DataFilterMinLabel"),x=this.$(this.target+":"+g+":cX-DataFilterMax"),v=this.$(this.target+":"+g+":cX-DataFilterMaxLabel"),b=this.$(this.target+":"+g+":cX-DataFilterScale");f&&y&&x&&v&&(p=this.rebuildDataTableFilter(),this.addRemoveNumericDataFilterListeners("removeEvtListener",f,x,y,v,b))}n||CanvasXpress.stack[this.target].afterRender.push(["addRemoveDataFilter",[!1,e,i,t.type,g]]),o.removeChild(t),p&&this.rebuildDataTableFilter(p)}}},this.changeNumericFilter=function(t){return function(e){var i=t.getTargetEvent(e);return i&&(t.filteringNumericOn=i,t.updateNumericFilter(e)),!1}}(this),this.mousedownNumericFilter=function(t){return function(e){var i=t.getTargetEvent(e);return i&&(t.filteringNumericOn=i,t.xMouseDown=e.clientX,t.yMouseDown=e.clientY),!1}}(this),this.clickNumericFilter=function(t){return function(e){var i=t.getTargetEvent(e);if(i){var s=t.$(i.id.replace("cX-DataFilterScale","cX-DataFilterRange")),a=t.adjustedCoordinates(e,i);if(s&&a&&s.scale){t.isIE;var r=parseInt(t.dataFilterWidth-18);a.x>r-13?(i.className="CanvasXpressDataFilterContainerScaleLinearLog",s.scale="log"):a.x>r-26&&(i.className="CanvasXpressDataFilterContainerScaleLogLinear",s.scale="linear")}}return!1}}(this),this.updateNumericFilter=function(t){if(this.filteringNumericOn){var e=this;this.cancelEvent(t);var i,s,a,r,n,o,h,l=this.filteringNumericOn;if(l.id.match(/cX-DataFilterMin(Label)?/)?(h=RegExp.$1,i=!0,s=l.id.replace("cX-DataFilterMin"+h,"cX-DataFilterMin"),a=l.id.replace("cX-DataFilterMin"+h,"cX-DataFilterMax"),r=l.id.replace("cX-DataFilterMin"+h,"cX-DataFilterRange"),n=l.id.replace("cX-DataFilterMin"+h,"cX-DataFilterMinLabel"),o=l.id.replace("cX-DataFilterMin"+h,"cX-DataFilterMaxLabel")):l.id.match(/cX-DataFilterMax(Label)?/)&&(h=RegExp.$1,i=!1,a=l.id.replace("cX-DataFilterMax"+h,"cX-DataFilterMax"),s=l.id.replace("cX-DataFilterMax"+h,"cX-DataFilterMin"),r=l.id.replace("cX-DataFilterMax"+h,"cX-DataFilterRange"),n=l.id.replace("cX-DataFilterMax"+h,"cX-DataFilterMinLabel"),o=l.id.replace("cX-DataFilterMax"+h,"cX-DataFilterMaxLabel")),s=this.$(s),a=this.$(a),r=this.$(r),n=this.$(n),o=this.$(o),s&&a&&r&&n&&o){var c,d,p=CanvasXpress.system.isIE?46:44,g=this.dataFilterWidth-p;if(h){var u=l.value-0,m=n.value-0,f=o.value-0,y=!1;l===o&&u<m&&(u=m,y=!0),l===n&&u>f&&(u=f,y=!0),u<r.min&&(u=r.min,y=!0),u>r.max&&(u=r.max,y=!0),y&&(l.value=this.formatNumber(u,r.decis)),d="log"==r.scale?u?(Math.log(u)-r.lmin)/r.lunits:0:(u-r.min)/r.units,d=Math.ceil(d),i?(d=Math.ceil(d),r.style.width=parseInt(r.style.width)-d+parseInt(s.style.left)+"px",s.style.left=d+"px",r.style.left=d+"px",a.style.left=d+"px"):r.style.width=Math.max(0,Math.floor(d)-parseInt(s.style.left))+"px"}else{c=t.clientX-this.xMouseDown,d=parseInt(s.style.left)+c;var x,v,b=i?parseInt(r.style.width)-c:parseInt(r.style.width)+c,A=this.absoluteCoordinates(s),w=this.absoluteCoordinates(a);if(i)d>0&&b>0?(this.xMouseDown=t.clientX,d=Math.max(0,Math.min(g,d)),b=Math.max(0,Math.min(g,b))):d>0?(d-=c,b=w.x-A.x-29):(b+=d,d=0),s.style.left=d+"px",r.style.left=d+"px",r.style.width=b+"px",a.style.left=d+"px",x="log"==r.scale?0!=d?Math.exp(r.lunits*d+r.lmin):0:r.units*d+r.min,x=Math.min(Math.max(x,r.min),parseFloat(o.value)),n.value=this.formatNumber(x,r.decis);else d+b<=g&&b>=0?(this.xMouseDown=t.clientX,d=Math.max(0,Math.min(g,d)),b=Math.max(0,Math.min(g-d,b))):d+b>g&&(b=g-(d-=c)),r.style.width=Math.max(0,b)+"px",v="log"==r.scale?b!=g?Math.exp(r.lunits*(d+b)+r.lmin):r.max:r.units*(d+b)+r.min,v=Math.max(Math.min(v,r.max),parseFloat(n.value)),o.value=this.formatNumber(v,r.decis)}var C=r.uvalue,T=r.filter;this.toDoFilter||(this.toDoFilter={}),this.toDoFilter[T]||(this.toDoFilter[T]={}),this.toDoFilter[T][C]||(this.toDoFilter[T][C]={}),h?i?this.toDoFilter[T][C].min=u:this.toDoFilter[T][C].max=u:(null!=x&&(this.toDoFilter[T][C].min=x),null!=v&&(this.toDoFilter[T][C].max=v)),null!=r.ref&&(this.toDoFilter[T][C].ref=r.ref),this.refreshDataFilters("CanvasXpressListItem"==l.parentNode.parentNode.parentNode.className?"Network"==e.graphType?"node"==T?e.$(e.target+"-cX-DataFilterNodeContentSearchItems"):e.$(e.target+"-cX-DataFilterEdgeContentSearchItems"):"sample"==T?e.getSampleIndices(C)>=0?e.$(e.target+"-cX-DataFilterVariableContentSearchItems"):e.$(e.target+"-cX-DataFilterSampleContentSearchItems"):e.getVariableIndices(C)>=0?e.$(e.target+"-cX-DataFilterSampleContentSearchItems"):e.$(e.target+"-cX-DataFilterVariableContentSearchItems"):l.parentNode.parentNode.parentNode,T,C),h&&this.endNumericFilter(t)}}return!1},this.endNumericFilter=function(t){this.filteringNumericOn&&(this.updateDataFilter(!1,!1,t),this.filteringNumericOn=!1)},this.createStringFilter=function(t,e,i,s,a,r){i.sort(),i.unshift("(All) "+i.length+" values"),i.push("");var n=e.replace(/\W/g,"_"),o=a?this.target+":"+n+"_":this.target+":"+n,h=this.$cX("div",{id:o+":cX-DataFilterContainer",className:"CanvasXpressDataFilterContainerHoverable",type:"string",args:[t,e,i,s,a]});a&&(h.style.width="180px");var l=this.$cX("div",{id:o+":cX-DataFilterLabel",innerHTML:e,draggable:!0},{width:"98%",margin:"5px"}),c=this.$cX("input",{id:o+":cX-DataFilterInput",type:"text",placeholder:" Search values"},{cursor:"default",width:"92%",marginLeft:"5px"}),d=this.$cX("div",{id:o+":cX-DataFilterMask",className:i.length-2>this.maxItemMenuCheckbox?"CanvasXpressDataFilterContainerMask":"CanvasXpressDataFilterContainerMaskNoOverflow"},{height:i.length-2>this.maxItemMenuCheckbox?"80px":19*(i.length-1)+4+"px"}),p=this.$cX("div",{id:o+":cX-DataFilterScroll",type:i.length-2>this.maxItemMenuCheckbox?"long":"short",filter:t,uvalue:e,values:i,fvalues:i,selected:{0:!r},ref:s,skey:n,last:0},{backgroundColor:"rgba(255, 255, 255, 0.95)",height:i.length-2>this.maxItemMenuCheckbox?16*(i.length+1)+"px":19*(i.length-1)+4+"px"}),g=this.$cX("div",{id:o+":cX-DataFilterOptions"},{width:"100%",position:"relative"});return this.loadStringFilter(i,n,g,i.length,!1,a,r),p.appendChild(g),d.appendChild(p),h.appendChild(l),i.length-2>this.maxItemMenuCheckbox&&h.appendChild(c),h.appendChild(d),this.addRemoveStringDataFilterListeners("addEvtListener",d),h},this.loadStringFilter=function(t,e,i,s,a,r,n){if(t&&e&&i){var o=!!n&&this.getObjectArray(n);if(s-2>this.maxItemMenuCheckbox)for(var h=0;h<Math.min(5,t.length);h++){var l=t[h].length>30?t[h].substr(0,30)+" ...":t[h],c=!a&&!n&&0==h||a&&a.hasOwnProperty(t[h])||n&&o.hasOwnProperty(t[h])?"CanvasXpressDataFilterContainerItemSelected":"CanvasXpressDataFilterContainerItem",d=r?this.target+":"+e+"_:cX-DataFilterItem-"+h:this.target+":"+e+":cX-DataFilterItem-"+h,p=this.$cX("div",{id:d,className:c,innerHTML:l,title:t[h],index:h},{});i.appendChild(p)}else for(h=0;h<t.length-1;h++){l=t[h].length>30?t[h].substr(0,30)+" ...":t[h],d=r?this.target+":"+e+"_:cX-DataFilterDivItem-"+h:this.target+":"+e+":cX-DataFilterDivItem-"+h;var g=this.$cX("div",{id:d,title:t[h],value:l,index:h}),u=r?this.target+":"+e+"_:cX-DataFilterInputItem-"+h:this.target+":"+e+":cX-DataFilterInputItem-"+h;p=this.$cX("input",{id:u,className:"CanvasXpressCheckbox",type:"checkbox",checked:!(a&&!a.hasOwnProperty(t[h])),value:l,index:h,name:""});n&&(p.checked=!!o.hasOwnProperty(t[h]));var m=this.$cX("label",{for:this.target+":"+e+":cX-DataFilterItem-"+h,className:"CanvasXpressCheckboxLabel",innerHTML:t[h]});g.appendChild(p),g.appendChild(m),i.appendChild(g)}}},this.addRemoveStringDataFilterListeners=function(t,e){if(t&&e){var i=e.parentNode.firstElementChild;"long"==e.firstChild.type&&this[t](e,"scroll",this.scrollStringFilter,!1),this[t](e,"mousedown",this.registerStringFilter,!1),this[t](e,"mouseup",this.endStringFilter,!1),this[t](i,"dragstart",this.dragStartDataFilter,!1),this[t](i,"dragend",this.dragEndDataFilter,!1)}},this.scrollStringFilter=function(t){return function(e,i,s){i||(i=t.getTargetEvent(e));var a=i.firstChild,r=a.firstChild,n=a.skey;if(a.fvalues){var o=Math.max(0,Math.min(Math.ceil(i.scrollTop/16),a.fvalues.length-5));r.style.top=i.scrollTop+"px";for(var h=0;h<Math.min(5,a.fvalues.length);h++){var l=t.$(t.target+":"+n+":cX-DataFilterItem-"+h)||t.$(t.target+":"+n+"_:cX-DataFilterItem-"+h);if(l){i=a.fvalues[o+h].length>30?a.fvalues[o+h].substr(0,30)+" ...":a.fvalues[o+h];l.className=a.selected[o+h]?"CanvasXpressDataFilterContainerItemSelected":"CanvasXpressDataFilterContainerItem",l.innerHTML=i,l.title=a.fvalues[o+h],l.index=o+h}}t.filteringStringOn&&!s&&t.updateSelectStringFilter(!1,t.$(t.target+":"+n+":cX-DataFilterItem-4"),!0)}return!1}}(this),this.registerStringFilter=function(t){return function(e){var i=t.getTargetEvent(e);return i.id||(i=i.parentNode),i.id.match(/cX-DataFilterMask/)||(i.id.match(/cX-DataFilterDivItem/)?(t.updateSelectStringFilter(!1,i.firstChild,!1,!0),t.filteringStringOn=i):i.parentNode.id.match(/cX-DataFilterDivItem/)?(t.updateSelectStringFilter(!1,i,!1,!0),t.filteringStringOn=i.parentNode):(t.$(i.parentNode.id.replace("cX-DataFilterOptions","cX-DataFilterInput")).value="",t.updateSelectStringFilter(!1,i,e.shiftKey,e.ctrlKey),t.filteringStringOn=i)),!1}}(this),this.endStringFilter=function(t){return function(e,i,s){if(!i&&t.filteringStringOn&&t.filteringStringOn.parentNode&&(i=t.filteringStringOn.parentNode.parentNode),i&&i.selected){var a=i.selected,r=i.filter,n=i.uvalue,o=i.ref,h=i.fvalues,l=s?"like":"exact";if(t.toDoFilter||(t.toDoFilter={}),a[0])t.toDoFilter[r]&&t.toDoFilter[r][n]&&delete t.toDoFilter[r][n],t.toDoFilter[r]&&Object.keys(t.toDoFilter[r]).length;else{for(var c in t.toDoFilter[r]||(t.toDoFilter[r]={}),t.toDoFilter[r][n]||(t.toDoFilter[r][n]={}),t.toDoFilter[r][n][l]=[],a)t.toDoFilter[r][n][l].push(h[c]);null!=o&&(t.toDoFilter[r][n].ref=o)}if(0==Object.keys(t.toDoFilter).length){if(t.layoutComb)for(c=0;c<t.layoutParams.length;c++)delete t.layoutParams[c].dragged;t.reset(!0)}return t.filteringStringOn=!0,t.updateDataFilter(!1,!1,e),t.refreshDataFilters("CanvasXpressListItem"==i.parentNode.parentNode.parentNode.className?"Network"==t.graphType?"node"==r?t.$(t.target+"-cX-DataFilterNodeContentSearchItems"):t.$(t.target+"-cX-DataFilterEdgeContentSearchItems"):"sample"==r?t.getVariableIndices(n)>=0?t.$(t.target+"-cX-DataFilterVariableContentSearchItems"):t.$(t.target+"-cX-DataFilterSampleContentSearchItems"):t.getSampleIndices(n)>=0?t.$(t.target+"-cX-DataFilterSampleContentSearchItems"):t.$(t.target+"-cX-DataFilterVariableContentSearchItems"):i.parentNode.parentNode.parentNode,r,n,"CanvasXpressListItem"==i.parentNode.parentNode.parentNode.className&&i.parentNode.parentNode.parentNode),t.scrollStringFilter(!1,i.parentNode,!0),t.filteringStringOn=!1,!1}}}(this),this.updateStringFilter=function(t){var e=this.getTargetEvent(t),i=this.filteringStringOn&&this.filteringStringOn.id?this.filteringStringOn.id.replace(/-\d$/,""):"";if(e.id.match(i)&&!t.ctrlKey)this.updateSelectStringFilter(!1,e,!0),this.dragStringFilter=[e.parentNode.parentNode.parentNode,e.id.split("-")[2]];else if(this.dragStringFilter){var s=this.dragStringFilter[1]>=3?16:-16;this.dragStringFilter[0].scrollTop+=s,this.scrollStringFilter(!1,this.dragStringFilter[0],!1)}},this.updateSelectStringFilter=function(t,e,i,s){if(t){var a=this.$(t),r=this.$(t.replace("cX-DataFilterInput","cX-DataFilterScroll")),n=r.fvalues.length>1e4?2:r.fvalues.length>1e3?1:0;if(a.value&&a.value.length>n){var o;try{o=new RegExp(a.value.toLowerCase())}catch(a){return}var h=0,l=(g=r.firstChild).childNodes[0].index,c=null,d=0;r.selected={};for(var p=1;p<r.fvalues.length-1;p++)r.fvalues[p].toLowerCase().match(o)&&(c||(c=p,d=16*p),r.selected[p]=!0,h++);h+2==r.fvalues.length&&(r.selected={0:!0},c=0),null!=c&&(r.parentNode.scrollTop=d,this.scrollStringFilter(!1,r.parentNode)),this.endStringFilter(!1,r)}else this.resetSelectStringFilter(r),this.endStringFilter(!1,r)}else if(e){var g,u=e.index,m=!1;if(!(g=e.parentNode).id)return!1;for(;!g.id.match(/cX-DataFilterOptions/);)if(m=!0,!(g=g.parentNode).id)return!1;var f=(d=g.parentNode).last,y=d.selected,x=d.fvalues,v=(l=g.childNodes[0].index,h=0,s&&d.selected[u]);if(d.selected={},v||(d.selected[u]=!0),i)if(u>f)for(p=f;p<=u;p++)d.selected[p]=!0,p&&h++;else for(p=u;p<=f;p++)d.selected[p]=!0,p&&h++;else if(s)if(v||(d.last=u),m&&0==u)for(p=0;p<x.length-1;p++)d.selected[p]=!0;else for(var p in y)p==u&&v||(d.selected[p]=!0,p&&h++);else d.last=u;if(h>0&&delete d.selected[0],!m){delete d.selected[x.length-1];for(p=0;p<g.childNodes.length;p++)g.childNodes[p].className=d.selected[p+l]?"CanvasXpressDataFilterContainerItemSelected":"CanvasXpressDataFilterContainerItem"}}},this.resetSelectStringFilter=function(t){if(t){t.selected={0:!0};var e=t.parentNode;e.scrollTop=0,this.scrollStringFilter(!1,e)}},this.updateSearchFilters=function(t){var e=this.$(t).parentNode.parentNode;if(e)for(var i=e.childNodes,s=new RegExp(i[0].firstChild.value,"i"),a=0;a<i[1].childNodes.length;a++){i[1].childNodes[a].id.split(":")[1].match(s)?i[1].childNodes[a].style.display="block":i[1].childNodes[a].style.display="none"}},this.hideDataFilter=function(t){return function(e,i){return t.removeMenus(),t.$(t.target+"-cX-DataFilter")&&(t.maximized?t.clickLayout(e):(delete t.dragStringFilter,t.moveDataFilter(!0,!1,i,e))),!1}}(this),this.dockUndockDataFilter=function(t){return function(e){return t.$(t.target+"-cX-DataFilter")&&t.moveDataFilter(),!1}}(this),this.resetDataFilter=function(t){return function(e,i,s,a,r){if(!t.isTransition()){t.resetFilters(),t.refreshDataFilters(!1,!1,!1,!1,!0),t.toDoFilter={},t.reset(!1,!1,e),t.updateDataTable(!1,!1,this.reproducing);var n=e&&(e.shiftKey||e.ctrlKey||e.altKey||e.metaKey);if(s){var o=t.$(t.target+"-cX-DataFilter");o&&(t.removeGenericDataFilterListenersOrReset(),o.parentNode.removeChild(o),t.addDataFilterDiv())}else t.removeGenericDataFilterListenersOrReset(!0);return t.sorting&&!n&&t.sortIndices.apply(t,t.sorting),a&&(this.varIndices=a),r&&(this.smpIndices=r),t.motionBy&&t.motionObject&&(t.motionObject.varIndices=t.cloneObject(t.varIndices),t.motionObject.smpIndices=t.cloneObject(t.smpIndices)),i?this.regroupSamples():(t.isGroupedData&&t.groupSamples(t.groupingFactors,!1,!1,!1,!0),t.draw({func:"resetDataFilter",par:[e,i,s,a,r]})),!1}}}(this),this.rebuildDataFilter=function(){this.resetDataFilter(!1,!0,!0)},this.initializeDataFilters=function(){if(this.filtersExposed.length){this.showDataFilter();for(var t=0;t<this.filtersExposed.length;t++){var e=this.filtersExposed[t],i=this.$(this.target+":"+e.name+":cX-DataFilterContainer");i&&this.addRemoveDataFilter(i,!1,!1,!1,!1,e)}this.hideDataFilter()}}},CanvasXpress.prototype.initDataTable=function(){var t;this.addDataTableDiv=function(t,e){if(!this.$(this.target+"-cX-DataTable")){var i=this,s=function(t,e,s){var a=i.$cX(0==e||0==s?"th":"td",{id:i.target+"-cX-DataTableCell."+e+"."+s,className:0==e||0==s?"CanvasXpressTableCellHead":"CanvasXpressTableCell"},{width:i.colWidth+"px",height:i.rowHeight+"px"});"stripped"==i.dataTableStyle?a.style.background=e%2?"rgba(0,0,0,0)":"rgba(0,0,0,0.05)":a.style.background="",0==e&&(a.style.textAlign="center"),t.appendChild(a)};e||this.setDataTableDimensions(t);var a=60,r=null!=this.dataTableLastX?parseInt(this.dataTableLastX):0,n=null!=this.dataTableLastY?parseInt(this.dataTableLastY):.25*-this.meta.canvas.ctx.canvas.height,o=this.dataTableLastWidth||this.dataTableColsWidth+a,h=this.dataTableLastHeight||this.dataTableRowsHeight+60,l=3*(this.colWidth+8)+6,c=3*(this.rowHeight+4)+8,d=this.$cX("div",{id:this.target+"-cX-DataTable",className:"CanvasXpressDataTable draggable-container"},{top:n+"px",left:r+"px",width:o+"px",height:h+"px",minWidth:l+a+"px",minHeight:c+60+28+"px",display:"none",marginTop:"3px",border:"stripped"==this.dataTableStyle?"none":"1px solid rgb(51, 122, 183)",backgroundColor:this.backgroundDataTable,zIndex:10001}),p=this.$cX("div",{id:this.target+"-cX-DataTableToolbar",className:"CanvasXpressDataTableToolbar draggable"},{position:"absolute",overflow:"hidden",width:o+"px",minWidth:l+a+"px",height:0,top:0,right:0,zIndex:10002,backgroundColor:"rgba(255,255,255,0)"}),g=this.$cX("div",{id:this.target+"-cX-DataTableToolbarImages",className:"CanvasXpressDataTableToolbar"},{cssFloat:"right",position:"relative",height:"36px",backgroundColor:"rgba(0,0,0,0)"}),u=this.$cXI(this.getGraphTypeIcon(),{id:this.target+"-cX-DataTableViewImage",className:"CanvasXpressDataTableToolbarImage",src:this.getGraphTypeIcon(),title:"View "+this.graphType},{display:"none"}),m=this.$cXI("sv_disk",{id:this.target+"-cX-DataTableSaveImage",className:"CanvasXpressDataTableToolbarImage",src:"sv_disk",title:"Save data"}),f=this.$cXI("ar_minmax",{id:this.target+"-cX-DataTableMaximizeMinimizeImage",className:"CanvasXpressDataTableToolbarImage",src:"ar_minmax",title:"Minimize / Maximize"}),y=this.$cXI("at_col",{id:this.target+"-cX-DataTableColorImage",className:"CanvasXpressDataTableToolbarImage",src:"at_col",title:"Color Data Table"},{display:i.graphType.match(/Correlation|Venn/)?"none":"block"}),x=this.$cXI("tb_stripped",{id:this.target+"-cX-DataTableStripeImage",className:"CanvasXpressDataTableToolbarImage",src:"tb_stripped",title:"Toggle Stripe Data Table"}),v=this.$cXI("dtt_transpose",{id:this.target+"-cX-DataTableTransposeImage",className:"CanvasXpressDataTableToolbarImage",src:"dtt_transpose",title:"Transpose data"},{display:"Venn"==this.graphType?"none":"block"}),b=this.$cXI("nodes"==this.networkShowDataTable?"n_edges":"n_nodes",{id:this.target+"-cX-DataTableNetworkImage",className:"CanvasXpressDataTableToolbarImage",src:"nodes"==this.networkShowDataTable?"n_edges":"n_nodes",title:"nodes"==this.networkShowDataTable?"Show edge data":"Show node data"},{display:"Network"==this.graphType?"block":"none"}),A=this.$cXI("fp_funnelremove",{id:this.target+"-cX-DataTableFilterResetImage",className:"CanvasXpressDataTableToolbarImage",src:"fp_funnelremove",title:"Reset filters"}),w=this.$cXI(this.dataTableLastState&&"docked"==this.dataTableLastState?"fp_pinremove":"fp_pin",{id:this.target+"-cX-DataTableDockImage",className:"CanvasXpressDataTableToolbarImage",src:this.dataTableLastState&&"docked"==this.dataTableLastState?"fp_pinremove":"fp_pin",title:this.dataTableLastState&&"docked"==this.dataTableLastState?"Undock":"Dock"}),C=this.$cXI("op_cancel",{id:this.target+"-cX-DataTableCloseImage",className:"CanvasXpressDataTableToolbarImage",src:"op_cancel",title:"Close table"},{marginRight:"10px"}),T=this.$cX("input",{id:this.target+"-cX-DataTableSearch",type:"text",placeholder:"Search"},{cursor:"default",borderRadius:"3px",width:"101px",margin:"2px 2px 2px 32px",padding:"5px",border:"1px solid #ccc",cssFloat:"left",backgroundColor:this.backgroundDataTable}),S=this.$cX("div",{id:this.target+"-cX-DataTableContainer",className:"CanvasXpressDataTableContainer"},{width:o+"px",height:h-28+"px",minWidth:l+a+"px",minHeight:c+60+"px"}),M=this.$cX("div",{id:this.target+"-cX-DataTableTableMask",className:"CanvasXpressDataTableMask"},{width:o-a+"px",height:h-60+"px",minWidth:l+"px",minHeight:c+28+"px"}),D=this.$cX("table",{id:this.target+"-cX-DataTableTable",className:"CanvasXpressDataTable"},{fontSize:this.dataTableFontSize+"px",fontFamily:this.dataTableFontFamily});"stripped"==this.dataTableStyle&&D.style.setProperty("border-collapse","collapse","important");for(var k=this.$cX("tbody"),L=0;L<this.maxRows;L++){for(var I=this.$cX("tr"),z=0;z<this.maxCols;z++)s(I,L,z);k.appendChild(I)}var N=this.$cX("div",{id:this.target+"-cX-DataTableVer",className:"CanvasXpressDataTableVertical"},{height:h-60+"px",minHeight:c+28+"px",backgroundColor:this.backgroundDataTable}),B=this.$cX("img",{id:this.target+"-cX-DataTableVerImage",className:"CanvasXpressDataTableVertical",src:CanvasXpress.png,width:1,height:this.dataTableTotalHeight,title:"",alt:""});N.appendChild(B);var P=this.$cX("div",{id:this.target+"-cX-DataTableHor",className:"CanvasXpressDataTableHorizontal"},{width:o-a+"px",minWidth:l+"px",backgroundColor:this.backgroundDataTable}),R=this.$cX("img",{id:this.target+"-cX-DataTableHorImage",className:"CanvasXpressDataTableHorizontal",src:CanvasXpress.png,width:this.dataTableTotalWidth,height:1,title:"",alt:""});P.appendChild(R);var O=this.$cX("div",{id:this.target+"-cX-DataTableResizer",className:"CanvasXpressDataTableResizer resizable"});p.appendChild(T),g.appendChild(C),g.appendChild(w),g.appendChild(A),g.appendChild(v),g.appendChild(x),g.appendChild(y),g.appendChild(f),g.appendChild(m),g.appendChild(u),g.appendChild(b),p.appendChild(g),D.appendChild(k),M.appendChild(D),S.appendChild(M),S.appendChild(N),S.appendChild(P),S.appendChild(O),d.appendChild(p),d.appendChild(S);var X=this.$("south-wrapper-"+this.target);return X?(X.appendChild(d),this.modifyDataTableToolbarView(),this.addRemoveDataTableListeners("addEvtListener"),d):void 0}},this.showDataTableToolbar=function(t,e,i){var s=this,a=this.$(this.target+"-cX-DataTableToolbar");if(a&&0==parseInt(a.style.height)&&!this.isDataTableToolbarBusy){this.isDataTableToolbarBusy=!0;var r=parseInt(a.parentNode.style.width);this.resizeMove(a,0,0,r,36,250,(function(){s.isDataTableToolbarBusy=!1}))}},this.hideDataTableToolbar=function(t,e,i){var s=this,a=this.$(this.target+"-cX-DataTableToolbar"),r=this.$(this.target+"-cX-DataTableSearch"),n=Math.abs(i.y);if(!(e&&Math.abs(e.offsetTop)-n<36)&&(!r||document.activeElement!=r&&""==r.value)&&a&&36==parseInt(a.style.height)&&!this.isDataTableToolbarBusy){this.isDataTableToolbarBusy=!0;var o=parseInt(a.parentNode.style.width);this.resizeMove(a,0,0,o,0,500,(function(){s.isDataTableToolbarBusy=!1}))}},this.isDataTableToolbar=function(t){var e=this.getTargetEvent(t),i=this.adjustedCoordinates(t,e);if(e&&e.id==this.target+"-cX-DataTable"&&i){var s=Math.abs(i.y);Math.abs(e.offsetTop)-s<36?this.showDataTableToolbar(t,e,i):this.hideDataTableToolbar(t,e,i)}else this.hideDataTableToolbar(t,e,i)},this.modifyDataTableToolbarView=function(){var t=this.$(this.target+"-cX-DataTableViewImage"),e=[this.$(this.target+"-cX-DataTableDockImage"),this.$(this.target+"-cX-DataTableCloseImage"),this.$(this.target+"-cX-DataTableResizer")];if("canvas"==this.view){t.style.display="none";for(var i=0;i<e.length;i++)e[i].style.display="block"}else{t.style.display=this.dataTableMaximized&&!this.maximized?"none":"block";for(i=0;i<e.length;i++)e[i].style.display="none"}},this.getGraphTypeIcon=function(){return{Area:"g_area",AreaLine:"g_arealine",Bar:"g_bar",BarLine:"g_barline",Boxplot:"g_boxplot",Circular:"g_circular",Correlation:"g_correlation",DotLine:"g_dotline",Dotplot:"g_dotplot",Fish:"g_fish",Gantt:"g_gantt",Heatmap:"g_heatmap",Line:"g_line",Map:"g_map",Meter:"g_meter",Network:"g_network",Pie:"g_pie",Scatter2D:"g_scatter2d",ScatterBubble2D:"g_scatterbubble2d",Scatter3D:"g_scatter3d",Stacked:"g_stacked",StackedLine:"g_stackedline",StackedPercent:"g_stackedpercent",StackedPercentLine:"g_stackedpercentline",TagCloud:"g_tagcloud",ParallelCoordinates:"g_parallelcoordinates",Sankey:"g_sankey",Tree:"g_tree",Treemap:"g_treemap",Venn:"g_venn"}[this.graphType]||CanvasXpress.png},this.addRemoveDataTableListeners=function(t){this.addRemoveEvtListener(t,this.$(this.target+"-cX-DataTable"),"mousewheel",this.scrollDataTable,{passive:!1}),this.addRemoveEvtListener(t,this.$(this.target+"-cX-DataTableHor"),"scroll",this.scrollTable,!1),this.addRemoveEvtListener(t,this.$(this.target+"-cX-DataTableVer"),"scroll",this.scrollTable,!1),this.addRemoveEvtListener(t,this.$(this.target+"-cX-DataTableToolbar"),"mousedown",this.registerMousemove,!1),this.addRemoveEvtListener(t,this.$(this.target+"-cX-DataTableViewImage"),"click",this.clickView,!1),this.addRemoveEvtListener(t,this.$(this.target+"-cX-DataTableSaveImage"),"click",this.saveTable,!1),this.addRemoveEvtListener(t,this.$(this.target+"-cX-DataTableMaximizeMinimizeImage"),"click",this.maximizeMinimizeTable,!1),this.addRemoveEvtListener(t,this.$(this.target+"-cX-DataTableStripeImage"),"click",this.stripeTable,!1),this.addRemoveEvtListener(t,this.$(this.target+"-cX-DataTableColorImage"),"click",this.colorTable,!1),this.addRemoveEvtListener(t,this.$(this.target+"-cX-DataTableFilterResetImage"),"click",this.filterResetTable,!1),this.addRemoveEvtListener(t,this.$(this.target+"-cX-DataTableNetworkImage"),"click",this.networkUpdateTable,!1),this.addRemoveEvtListener(t,this.$(this.target+"-cX-DataTableTransposeImage"),"click",this.transposeDataTable,!1),this.addRemoveEvtListener(t,this.$(this.target+"-cX-DataTableDockImage"),"click",this.dockUndockTable,!1),this.addRemoveEvtListener(t,this.$(this.target+"-cX-DataTableCloseImage"),"click",this.hideTable,!1),this.addRemoveEvtListener(t,this.$(this.target+"-cX-DataTableResizer"),"mousedown",this.mousedownDataTableResizer,!1);for(var e=this.maxRows,i=this.maxCols,s=0;s<i;s++)this.addRemoveEvtListener(t,this.$(this.target+"-cX-DataTableCell.0."+s),"click",this.clickDataTableHeader,!1),this.addRemoveEvtListener(t,this.$(this.target+"-cX-DataTableCell.0."+s),"mousemove",this.mousemoveDataTableHeader,!1),this.addRemoveEvtListener(t,this.$(this.target+"-cX-DataTableCell.0."+s),"mousedown",this.mousedownDataTableHeader,!1),this.addRemoveEvtListener(t,this.$(this.target+"-cX-DataTableCell.0."+s),"mouseover",this.mouseoverDataTableHeader,!1),this.addRemoveEvtListener(t,this.$(this.target+"-cX-DataTableCell.0."+s),"mouseout",this.mouseoutDataTableHeader,!1);for(s=0;s<e;s++)this.addRemoveEvtListener(t,this.$(this.target+"-cX-DataTableCell."+s+".0"),"mouseover",this.mouseoverDataTableHeader,!1),this.addRemoveEvtListener(t,this.$(this.target+"-cX-DataTableCell."+s+".0"),"mouseout",this.mouseoutDataTableHeader,!1);for(s=1;s<e;s++)for(var a=1;a<i;a++)this.addRemoveEvtListener(t,this.$(this.target+"-cX-DataTableCell."+s+"."+a),"mouseover",this.mouseoverDataTableCell,!1),this.addRemoveEvtListener(t,this.$(this.target+"-cX-DataTableCell."+s+"."+a),"mouseout",this.mouseoutDataTableCell,!1),this.addRemoveEvtListener(t,this.$(this.target+"-cX-DataTableCell."+s+"."+a),"click",this.clickDataTableCell,!1)},this.scrollDataTable=(t=this,function(e){t.removeMenus(),t.cancelEvent(e);var i=t.$(t.target+"-cX-DataTableVer"),s=CanvasXpress.system.os;return i&&(e.wheelDelta>0?s.match(/Mac/)?i.scrollTop-=100:i.scrollTop+=100:s.match(/Mac/)?i.scrollTop+=100:i.scrollTop-=100),!1}),this.scrollTable=function(t){return function(e){t.removeMenus();var i=t.$(t.target+"-cX-DataTable"),s=t.$(t.target+"-cX-DataTableVer"),a=t.$(t.target+"-cX-DataTableHor");if(i&&s&&a&&!t.resizingDataTableOn){var r=Math.ceil(a.scrollLeft/(a.scrollWidth/t.totalCols)),n=Math.ceil(s.scrollTop/(s.scrollHeight/t.totalRows));t.dataTableLastScrollLeft=a.scrollLeft,t.dataTableLastScrollTop=s.scrollTop,t.dataTableLastScrollWidth=a.scrollWidth,t.dataTableLastScrollHeight=s.scrollHeight,r==t.startCol&&n==t.startRow||(t.startCol=r,t.startRow=n,t.updateDataTable())}return!1}}(this),this.maximizeMinimizeTable=function(t){return function(e){t.removeMenus();var i,s,a=window,r=a.document,n=t.$(t.target+"-cX-DataTable"),o=t.$(t.target+"-cX-DataFilter"),h=a.innerWidth,l=a.innerHeight,c=t.remoteService?t.$(t.remoteParentId+"-canvasXpressRemoteWindow"):t.$("container-"+t.target),d=t.$(t.target+"-cX-DataTableViewImage"),p="table"!=t.view&&o&&t.activeAccordion?t.dataFilterWidth+10:0,g=!("table"==t.view||!o)&&t.activeAccordion;return n&&(t.dataTableTarget=n,t.dataTableMaximized?(t.maximized||(t.moveCanvasXpressContainer(c,!0),t.backgroundMask(),d&&(d.style.display="block")),s=t.dataTableMaximized[2],i=t.dataTableMaximized[3],t.maximized||(r.documentElement.style.overflowX=t.dataTableMaximized[4],r.documentElement.style.overflowY=t.dataTableMaximized[5]),t.updateDataTableResizerDiv(!1,t.dataTableMaximized[0],t.dataTableMaximized[1]),"table"!=t.view&&o&&t.activeAccordion&&(t.dataFilterHeight=t.dataTableMaximized[6],o.style.left=t.dataTableMaximized[7],g.style.height=t.dataTableMaximized[8]),delete t.dataTableMaximized):(t.maximized||(t.moveCanvasXpressContainer(c),t.backgroundMask([h,l]),d&&(d.style.display="none")),t.dataTableMaximized=[t.dataTableLastWidth,t.dataTableLastHeight,parseInt(n.style.left),parseInt(n.style.top),r.body.style.overflowX,r.body.style.overflowY],t.maximized||(r.documentElement.style.overflowX="hidden",r.documentElement.style.overflowY="hidden"),i=-(t.height+3),s=0,t.updateDataTableResizerDiv(!1,h-(6+p),l-6),"table"!=t.view&&o&&t.activeAccordion&&(t.dataTableMaximized.push(t.dataFilterHeight,o.style.left,g.style.height),t.dataFilterHeight=l-(t.heigthOffsetDataFilter()+4),o.style.left=h-(t.width+t.dataFilterWidth+13)+"px",g.style.height=t.dataFilterHeight+"px")),t.endDataTableResizerDiv(),(n=t.$(t.target+"-cX-DataTable")).style.top=i+"px",n.style.left=s+"px"),!1}}(this),this.colorTable=function(t){return function(e){return t.removeMenus(),t.colorDataTable=!t.colorDataTable,t.updateDataTable(),!1}}(this),this.stripeTable=function(t){return function(e){return t.removeMenus(),t.dataTableStyle="stripped"!=t.dataTableStyle&&"stripped","stripped"==t.dataTableStyle?(t.colorDataTable=!1,t.rowHeight=Number(t.dataTableFontSize+16)):(t.colorDataTable=!0,t.rowHeight=Number(t.dataTableFontSize+6)),t.resetDataTable(!0),t.dataTableRowHeight=[],t.dataTableColumnWidth=[],t.updateDataTable(!1,!0),t.$(t.target+"-cX-DataTable").style.top=-t.meta.canvas.ctx.canvas.height/t.meta.canvas.canvasPixelRatio+"px",!1}}(this),this.filterResetTable=function(t){return function(e){return t.removeMenus(),t.resetDataFilter(e),t.resetDataTableSearch(e),t.updateDataTable(),!1}}(this),this.saveTable=function(t){return function(e){return t.removeMenus(),t.exportToExcel(t.getDataClassAsArray(t.data,0,t.totalCols,0,t.totalRows,!0)[0]),!1}}(this),this.dockUndockTable=function(t){return function(e){t.removeMenus();var i=t.dataTableLastState&&"docked"==t.dataTableLastState?"undock":"dock",s=t.getTargetEvent(e);return"dock"==i?t.$cXIU(s,"fp_pinremove",{title:"Undock"}):t.$cXIU(s,"fp_pin",{title:"Dock"}),t.moveDataTableDiv(i),!1}}(this),this.transposeDataTable=function(t){return function(e){return t.dataTableTransposed=!t.dataTableTransposed,t.resetDataTableRowsCols(),!1}}(this),this.networkUpdateTable=function(t){return function(e){return t.networkShowDataTable="nodes"==t.networkShowDataTable?"edges":"nodes",t.resetDataTableRowsCols(),!1}}(this),this.hideTable=function(t){return function(e,i,s){t.removeMenus();var a=t.$(t.target+"-cX-DataTable");return a&&(t.maximized?t.clickLayout(e):t.transitionMagic(a,s||"holeOut",(function(){t.showDataTable=!1,t.moveDataTableDiv("hide"),t.hideUnhideDataTable(!0),t.resetDataTable(!0),i&&i()}))),!1}}(this),this.hideUnhideDataTable=function(t){var e=this.$(this.target+"-cX-DataTable");e&&(e.style.display=1==t?"none":"block")},this.resetDataTable=function(t){this.addRemoveDataTableListeners("removeEvtListener"),this.removeTarget(this.target+"-cX-DataTable"),this.addDataTableDiv(!1,t)},this.rebuildDataTable=function(){this.resetDataTable()},this.resetDataTableRowsCols=function(t){this.removeMenus(),this.startRow=0,this.startCol=0,this.totalRows=null,this.totalCols=null,this.sortDataTableHead=!1,this.dataTableHide={},this.updateDataTable(!1,!0),this.adjustDataTable(),this.dataTableMaximized&&(this.$(this.target+"-cX-DataTable").style.top=-(this.height+3)+"px")},this.mousedownDataTableResizer=function(t){return function(e){t.removeMenus();var i=e.target||e.srcElement;if(t.hasClass(i,"resizable")){var s=t.$(t.target+"-cX-DataTable");s&&(t.dataTableTarget=s,t.xMouseDown=e.clientX,t.yMouseDown=e.clientY,t.dataTableWidth=parseInt(t.dataTableTarget.style.width),t.dataTableHeight=parseInt(t.dataTableTarget.style.height),t.resizingDataTableOn=!0)}return!1}}(this),this.mousemoveDataTableHeader=function(t){return function(e){var i=t.resizingDataTableColumnOn?t.dataTableColumnTarget:t.getTargetEvent(e),s=t.adjustedCoordinates(e,i),a=t.$(t.target+"-cX-DataTableHorImage");if(s&&a)if(t.resizingDataTableColumnOn){var r=t.dataTableColumnTarget.id.split("."),n=parseInt(r[2]),o=s.x-t.xMouseDown,h=Math.max(t.colWidth,(t.dataTableColumnWidth[t.startCol+n]||t.colWidth)+o);t.dataTableColumnTarget.firstChild.style.width=h+"px",a.width+=o,a.style.maxWidth=a.width+"px";for(var l=t.startRow;l<t.startRow+t.totalRows;l++){var c=t.$(t.target+"-cX-DataTableCell."+l+"."+n);c&&(c.style.width=h+"px",c.firstChild.style.width=h+"px")}t.dataTableColumnWidth[t.startCol+n]=h,t.xMouseDown=s.x,t.yMouseDown=s.y,window.document.body.style.cursor="col-resize"}else{i.offsetLeft+i.clientWidth-s.x<5&&"th"==i.nodeName.toLowerCase()?i.style.cursor="col-resize":i.style.cursor=t.isResizeDataTable(i,s)?"col-resize":"default"}return!1}}(this),this.mousedownDataTableHeader=function(t){return function(e){var i=t.getTargetEvent(e);i="th"!=i.nodeName.toLowerCase()&&t.isIE?i.parentNode:i;var s=t.adjustedCoordinates(e,i);return s&&t.isResizeDataTable(i,s)&&(t.dataTableColumnTarget=i,t.xMouseDown=s.x,t.yMouseDown=s.y,t.resizingDataTableColumnOn=!0,window.document.body.style.cursor="col-resize"),!1}}(this),this.isResizeDataTable=function(t,e){return t.offsetLeft+t.offsetWidth-e.x<(CanvasXpress.system.isIE?10:5)&&("th"==t.nodeName.toLowerCase()||CanvasXpress.system.isIE&&t.parentNode&&"th"==t.parentNode.nodeName.toLowerCase())},this.getColumnsDataTableHeaderMenu=function(){var t=this.dataTableHide;this.dataTableHide={};var e=this.getDataClassAsArray(this.data,0,this.totalCols,0,0,!0)[0][0];this.dataTableHide=t;for(var i=[],s=1;s<e.length;s++)i.push([e[s],this.dataTableHide[e[s]]?"sl_checkboxoff":"sl_checkboxon","hideUnhideDataTableColumn",[e[s]]]);return i},this.getColumnsDataTableHeaderFilterMenu=function(t,e){var i,s,a,r;if("Network"==this.graphType)i=this.networkShowDataTable.replace(/s$/,""),s=this.networkShowDataTable,a=this.getFilteredNetworkData(s,!0),r=this.getFilteredNetworkData(s);else{switch(t){case"cxv":i="variable",s="vars";break;case"cxx":case"cxs":i="sample",s="smps";break;case"cxz":i="variable",s="vars";break;case"cxb":return!1}a=this.getSampleVariableData(s,!0,e,"cxv"==t,"cxs"==t),r=this.getSampleVariableData(s,!1,e,"cxv"==t,"cxs"==t)}var n=this.getKeys(a[e].o),o=this.getKeys(r[e].o);return"numeric"==a[e].t&&"min"==n[0]&&"max"==n[1]&&(n=[a[e].o.min,a[e].o.max],o=[r[e].o.min,r[e].o.max]),[["-filter-",o="string"==a[e].t?this.createStringFilter(i,e,n,!1,!0,!this.isSameObject(n,o)&&o):this.createNumericFilter(i,e,n,!1,!0,!this.isSameObject(n,o)&&o)]]},this.clickDataTableHeader=function(t){return function(e,i){if(!t.noSorting){i||(t.cancelEvent(e),i=t.getTargetEvent(e));var s=t.target+"-cX-DataTableCell.0.0";if(i.tagName.match(/th/i)&&(i=i.firstChild),i.tagName.match(/^a$/i)){if(t.skipHeaderMouseout&&t.skipHeaderMouseout.id==this.id)return t.removeMenus(),!1;var a=[];a.push(["Sort Ascending","sr_azi","sortDataTableByColumn",["asc",i.parentNode]]),a.push(["Sort Descending","sr_zad","sortDataTableByColumn",["desc",i.parentNode]]),a.push(["-"]),a.push(["Columns","tb_table",!1,!1,!1,"getColumnsDataTableHeaderMenu",[]]),t.graphType.match(/Correlation|Venn|Genome/)||"cxb"==i.parentNode.type||(a.push(["-"]),a.push(["Filter","fp_funnel",!1,!1,!1,"getColumnsDataTableHeaderFilterMenu",[i.parentNode.type,i.parentNode.innerText]]));var r=t.absoluteCoordinates(i),n=t.absoluteCoordinates(t.$(t.target+"-cX-DataTable")),o=t.absoluteCoordinates(t.$(t.target));t.addMenu(e,!1,!1,a,r.x-n.x+(n.x-o.x),r.y-(o.y-18),this),t.skipHeaderMouseout=this}else{if("CanvasXpressTableCellSortDesc"==i.className?i.className="CanvasXpressTableCellSortAsc":i.className="CanvasXpressTableCellSortDesc",t.sortDataTableHead&&t.sortDataTableHead.id!=i.id){var h=t.$(t.sortDataTableHead.id);h&&(i.parentNode.id==s&&(t.sortDataTableHead.id=t.target+"-cX-DataTableCellContent.0.0"),h.className="CanvasXpressTableCell")}t.removeMenus(),t.sortDataTableHead=i,t.sortDataTable(e)}return!1}}}(this),this.mouseoverDataTableHeader=function(t){return this.className="CanvasXpressTableCellHeadActive",this.firstChild&&this.firstChild.firstChild&&(this.firstChild.firstChild.className="CanvasXpressTableCellHeadActive"),!1},this.mouseoutDataTableHeader=function(t){return function(e){return t.skipHeaderMouseout&&t.skipHeaderMouseout.id==this.id||(this.className="CanvasXpressTableCellHead",this.firstChild&&this.firstChild.firstChild&&(this.firstChild.firstChild.className="CanvasXpressTableCellHead")),!1}}(this),this.mouseoverDataTableCell=function(t){return function(e){return this.className="CanvasXpressTableCellActive",t.colorDataTable&&this.style.background&&(this.style.background=t.removeColorTransparency(this.style.background,!0)),!1}}(this),this.mouseoutDataTableCell=function(t){return function(e){return this.className="CanvasXpressTableCell",t.colorDataTable&&this.style.background&&(this.style.background=t.addColorTransparency(this.style.background,t.colorDataTableTransparency,!0)),!1}}(this),this.clickDataTableCell=function(t){return function(e){return t.removeMenus(),!1}}(this),this.hideUnhideDataTableColumn=function(t){this.dataTableHide[t]?delete this.dataTableHide[t]:this.dataTableHide[t]=!0,this.updateDataTable()},this.sortDataTableByColumn=function(t,e){e.className="asc"==t?"CanvasXpressTableCellSortDesc":"CanvasXpressTableCellSortAsc",this.sortDataTableHead=e,this.clickDataTableHeader(!1,e)},this.setDataTableDimensions=function(t,e){t||(t=this.data),this.dataTableHide||(this.dataTableHide={});var i=0;if(t.x)for(var s in t.x)this.dataTableHide[s]||i++;var a=0;if(t.z)for(var s in t.z)this.dataTableHide[s]||a++;var r=0,n=0;if(t.y&&t.y.vars&&t.y.smps){for(s=0;s<t.y.smps.length;s++)this.dataTableHide[t.y.smps[s]]||r++;for(s=0;s<t.y.vars.length;s++)this.dataTableHide[t.y.vars[s]]||n++}this.adjustDataTableRowsCols();this.getDataTableDimensions();var o=0,h=0;if("Network"==this.graphType){var l=this.getAllNetworkAttributes(t);o=this.dataTableTransposed?1+t[this.networkShowDataTable].length:1+l[1],h=this.dataTableTransposed?1+l[1]:1+t[this.networkShowDataTable].length}else if("Genome"==this.graphType)o=1,h=1;else if("Venn"==this.graphType){n=this.getVennCompartments(t);o=this.dataTableTransposed?1+n.length:2,h=this.dataTableTransposed?2:1+n.length}else"Correlation"==this.graphType?h=o="samples"==this.correlationAxis?1+r:1+n:t.y&&t.y.vars&&t.y.smps&&(o=this.dataTableTransposed?1+a+r:1+i+n,h=this.dataTableTransposed?1+i+n:1+a+r);null!=this.totalRows&&null!=this.totalCols||(this.totalRows=o+2,this.totalCols=h+1),this.dataTableTotalHeight=1;for(s=0;s<this.totalRows;s++)this.dataTableTotalHeight+=this.setDataTableRowHeight(s)+10;this.dataTableRowsHeight=1;for(s=this.startRow;s<this.startRow+this.maxRows;s++)this.dataTableRowsHeight+=this.setDataTableRowHeight(s)+10;this.dataTableTotalWidth=1;for(s=0;s<this.totalCols;s++)this.dataTableTotalWidth+=this.setDataTableColumnWidth(s)+14;this.dataTableColsWidth=1;for(s=this.startCol;s<this.startCol+this.maxCols;s++)this.dataTableColsWidth+=this.setDataTableColumnWidth(s)+14;e?this.resetDataTable(!0):this.showDataTable&&this.hideUnhideDataTable()},this.setDataTableColumnWidth=function(t,e){return this.dataTableColumnWidth[t]?e&&(this.dataTableColumnWidth[t]=Math.max(e,this.colWidth)):this.dataTableColumnWidth[t]=this.colWidth,this.dataTableColumnWidth[t]},this.setDataTableRowHeight=function(t,e){return this.dataTableRowHeight[t]?e&&(this.dataTableRowHeight[t]=Math.max(e,this.rowHeight)):this.dataTableRowHeight[t]=this.rowHeight,this.dataTableRowHeight[t]},this.getAllNetworkAttributes=function(t){if("Network"==this.graphType){var e=[],i=[],s=this.getNetworkData(this.networkShowDataTable,!0),a=this.getKeys(s).length;switch(this.networkShowDataTable){case"nodes":for(var r in s)if("id"==r){for(var n=0;n<t[this.networkShowDataTable].length;n++)e.push(t[this.networkShowDataTable][n].id);i.push(r)}else i.push(r);break;case"edges":for(var r in s)if("id1"==r){for(n=0;n<t[this.networkShowDataTable].length;n++)e.push(t[this.networkShowDataTable][n].id1+"::"+t[this.networkShowDataTable][n].id2);i.push(r)}else i.push(r)}return[s,a,e,i]}return!1},this.getVennCompartments=function(t){var e=0;if(!t.venn.indices)for(var i in t.venn.indices=[],t.venn.data)t.venn.indices[i]=e++;var s=Object.keys(this.data.venn.data);return s=s.sort((function(e,i){return t.venn.indices[e]-t.venn.indices[i]}))},this.getDataTableDimensions=function(){var t=0,e=0,i=0,s=0,a=this.$(this.target+"-cX-DataTableTable"),r=this.$(this.target+"-cX-DataTableCell.0.0");if(a){var n=a.childNodes[0].rows;n&&(t=n.length,e=n[0].cells.length,i=r&&r.firstChild&&r.firstChild.style?parseInt(r.firstChild.style.height):0,s=r&&r.firstChild&&r.firstChild.style?parseInt(r.firstChild.style.width):0)}return[t,e,i,s]},this.adjustDataTableRowsCols=function(){var t=this.$(this.target+"-cX-DataTableContainer");if(t){var e=1;this.maxCols=0;for(var i=this.startCol;i<this.totalCols;i++){if(e+=this.dataTableColumnWidth[i]+14,parseInt(t.style.width)<e){this.maxCols++;break}this.maxCols++}if(e<parseInt(t.style.width)&&this.startCol>0)for(i=this.startCol;i>=0&&e+this.dataTableColumnWidth[i]+14<parseInt(t.style.width);i--)e+=this.dataTableColumnWidth[i]+14,this.maxCols++,this.startCol--;parseInt(t.style.width)>this.dataTableTotalWidth&&(this.maxCols=this.totalCols-this.startCol),this.maxCols=Math.max(2,Math.min(this.maxCols,this.totalCols-this.startCol));var s=1;this.maxRows=0;for(i=this.startRow;i<this.totalRows;i++){if(s+=this.dataTableRowHeight[i]+10,parseInt(t.style.height)<s){this.maxRows++;break}this.maxRows++}if(s<parseInt(t.style.height)&&this.startRow>0)for(i=this.startRow;i>=0&&s+this.dataTableRowHeight[i]+10<parseInt(t.style.height);i--)s+=this.dataTableRowHeight[i]+10,this.maxRows++,this.startRow--;parseInt(t.style.height)>this.dataTableTotalHeight&&(this.totalRows=this.totalRows-this.startRow),this.maxRows=Math.max(2,Math.min(this.maxRows,this.totalRows-this.startRow))}},this.adjustDataTableScrollers=function(){var t=this.$(this.target+"-cX-DataTableVer"),e=this.$(this.target+"-cX-DataTableHor");t&&e&&(CanvasXpress.system.isIE||(t.scrollHeight=this.dataTableLastScrollHeight),t.scrollTop=this.dataTableLastScrollTop?this.dataTableLastScrollTop:t.scrollTop,CanvasXpress.system.isIE||(e.scrollWidth=this.dataTableLastScrollWidth),e.scrollLeft=this.dataTableLastScrollLeft?this.dataTableLastScrollLeft:e.scrollLeft)},this.adjustDataTable=function(t){this.adjustDataTableRowsCols(),this.updateDataTable(!1,!0,t),this.adjustDataTableScrollers(),"docked"==this.dataTableLastState&&this.resizeViewportSouth(!0)},this.sortDataTableVenn=function(t){var e=this;if("No"==t){var i=Object.keys(this.data.venn.data);i=i.sort((function(t,i){return"ascending"==e.sortDir?e.data.venn.data[t]-e.data.venn.data[i]:e.data.venn.data[i]-e.data.venn.data[t]}));for(var s=0;s<i.length;s++)this.data.venn.indices[i[s]]=s}else{var a=0,r=Object.keys(this.data.venn.data).length;for(var s in this.data.venn.data)"descending"==this.sortDir?this.data.venn.indices[s]=a++:this.data.venn.indices[s]=--r}},this.sortDataTable=function(t){this.sortDir="CanvasXpressTableCellSortDesc"==this.sortDataTableHead.className?"descending":"ascending";var e=this.sortDataTableHead.innerText?this.sortDataTableHead.innerText:this.sortDataTableHead.textContent;if("Network"==this.graphType){if(!this.dataTableTransposed)return this.sortDataTableHead.className="CanvasXpressTableCell",void(this.sortDataTableHead=!1);if("cxb"==this.sortDataTableHead.type)return this.sortDataTableHead.className="CanvasXpressTableCell",void(this.sortDataTableHead=!1);this.sortNetworkIndices(e)}else{if("Genome"==this.graphType)return this.sortDataTableHead.className="CanvasXpressTableCell",void(this.sortDataTableHead=!1);if("Venn"==this.graphType)this.sortDataTableHead.className="CanvasXpressTableCell",this.sortDataTableHead=!1,this.sortDataTableVenn(e);else if("Correlation"==this.graphType)"samples"==this.correlationAxis?"cxb"==this.sortDataTableHead.type?this.sortSamples():(this.sortSamples(!1,!1,e,"cor"),this.sortDataTableHead.className="CanvasXpressTableCell",this.sortDataTableHead=!1):"cxb"==this.sortDataTableHead.type?this.sortVariables():(this.sortVariables(!1,!1,e,"cor"),this.sortDataTableHead.className="CanvasXpressTableCell",this.sortDataTableHead=!1);else if(this.data.y.vars&&this.data.y.smps){var i="table"==this.view;t.ctrlKey||(this.sortingSampleCategories=[],this.sortingVariables=[]),this.dataTableTransposed?"cxx"==this.sortDataTableHead.type?this.modifySort("cat","smp",e,i):"cxv"==this.sortDataTableHead.type?this.modifySort("var","smp",e,i):"cxb"==this.sortDataTableHead.type&&this.modifySort("samples","smp","samples",i):(t.ctrlKey||(this.sortingVariableCategories=[],this.sortingSamples=[]),"cxz"==this.sortDataTableHead.type?this.modifySort("cat","var",e,i):"cxs"==this.sortDataTableHead.type?this.modifySort("smp","var",e,i):"cxb"==this.sortDataTableHead.type&&this.modifySort("variables","var","variables",i))}}this.updateDataTable(!1,!0)},this.getDataClassAsArray=function(t,e,i,s,a,r){var n=0,o=0,h=0,l=0,c=[],d=[],p=[],g=[],u=[],m=[],f=this.meta.data,y=this.isGroupedData;this.isGroupedData=!1;var x=this.$(this.target+"-cX-DataTable");x||(x=this.initializeDataTable());var v=function(t,e,i,s){if(e.hasOwnProperty(t))return null!=e[t]?e[t]:"";if(i[0][t]&&i[0][t].hasOwnProperty("r")){for(var a=i[0][t].r,r=0;r<s[a].length;r++){var n=s[a][r];if(!e.hasOwnProperty(n))return"";e=e[n]}if(e.hasOwnProperty(t))return null!=e[t]?e[t]:""}return""};if(null==e&&(e=0),null==i&&(i=999),null==s&&(s=0),null==a&&(a=999),"Network"==this.graphType){var b=this.getAllNetworkAttributes(t);if(g.push(""),u.push("cxb"),m.push(!1),this.dataTableTransposed){for(var A=0;A<b[3].length;A++)o<i&&l>=e&&!this.dataTableHide[b[3][A]]&&(g.push(b[3][A]),u.push("cxx"),m.push(!1),o++),l++;c.push(g),d.push(u),p.push(m);for(A=0;A<b[2].length;A++)if(!t[this.networkShowDataTable][A].hide){if(n<a&&h>=s&&!this.dataTableHide[b[2][A]]){o=0,l=0,g=[b[2][A]],u=["cxz"],m=[!1];for(var w=0;w<b[3].length;w++){if(o<i&&l>=e&&!this.dataTableHide[b[3][w]]){var C=v(b[3][w],t[this.networkShowDataTable][A],b,this[this.networkShowDataTable+"Properties"]),T=f[this.networkShowDataTable][b[3][w]].type.match(/String|Object/)?f[this.networkShowDataTable][b[3][w]].colors[f[this.networkShowDataTable][b[3][w]].order[C]]:this.getColorForValue(f[this.networkShowDataTable][b[3][w]].colorBrew,C);g.push(C),u.push("cxy"),m.push(T),o++}l++}c.push(g),d.push(u),p.push(m),n++}h++}}else{for(A=0;A<b[2].length;A++)t[this.networkShowDataTable][A].hide||(o<i&&l>=e&&!this.dataTableHide[b[2][A]]&&(g.push(b[2][A]),u.push("cxz"),m.push(!1),o++),l++);c.push(g),d.push(u),p.push(m);for(A=0;A<b[3].length;A++){if(n<a&&h>=s&&!this.dataTableHide[b[3][A]]){o=0,l=0,g=[b[3][A]],u=["cxx"],m=[!1];for(w=0;w<t[this.networkShowDataTable].length;w++)if(!t[this.networkShowDataTable][w].hide){if(o<i&&l>=e&&!this.dataTableHide[b[2][w]]){C=v(b[3][A],t[this.networkShowDataTable][w],b,this[this.networkShowDataTable+"Properties"]),T=f[this.networkShowDataTable][b[3][A]].type.match(/String|Object/)?f[this.networkShowDataTable][b[3][A]].colors[f[this.networkShowDataTable][b[3][A]].order[C]]:this.getColorForValue(f[this.networkShowDataTable][b[3][A]].colorBrew,C);g.push(C),u.push("cxy"),m.push(T),o++}l++}c.push(g),d.push(u),p.push(m),n++}h++}}}else if("Genome"==this.graphType)c=[["Not implemented"]],d=[["cxb"]];else if("Venn"==this.graphType){C=this.getVennCompartments(t);if(g.push(""),u.push("cxb"),m.push(!1),this.dataTableTransposed){g.push("No"),u.push("cxz"),m.push(!1),c.push(g),d.push(u),p.push(m);for(A=0;A<C.length;A++)n<a&&h>=s&&(o=0,l=0,g=[C[A]],u=["cxx"],m=[!1],o<i&&l>=e&&(g.push(t.venn.data[C[A]]),u.push("cxy"),m.push(!1),o++),l++,c.push(g),d.push(u),p.push(m),n++),h++}else{for(A=0;A<C.length;A++)o<i&&l>=e&&(g.push(C[A]),u.push("cxx"),m.push(!1),o++),l++;if(c.push(g),d.push(u),p.push(m),n<a&&h>=s){for(var A in o=0,l=0,g=["No"],u=["cxz"],m=[!1],C[0])o<i&&l>=e&&(g.push(t.venn.data[C[A]]),u.push("cxy"),m.push(!1),o++),l++;c.push(g),d.push(u),p.push(m)}}}else if("Correlation"==this.graphType){var S="samples"==this.correlationAxis?t.y.smps:t.y.vars,M="samples"==this.correlationAxis?this.smpIndices:this.varIndices,D="samples"==this.correlationAxis?"cxs":"cxv";g.push(""),u.push("cxb"),m.push(!1);for(A=0;A<S.length;A++)o<i&&l>=e&&!this.dataTableHide[r?S[M[A]]:S[A]]&&(g.push(r?S[M[A]]:S[A]),u.push(D),m.push(!1),o++),l++;c.push(g),d.push(u),p.push(m);for(A=0;A<S.length;A++){if(n<a&&h>=s&&!this.dataTableHide[r?S[M[A]]:S[A]]){if(o=0,l=0,u=[D],m=[!1],null!=(g=[r?S[M[A]]:S[A]])[0])for(w=0;w<S.length;w++)o<i&&l>=e&&!this.dataTableHide[r?S[M[w]]:S[w]]&&(t.y.cor?g.push(r?t.y.cor[M[A]][M[w]]:t.y.cor[A][w]):g.push(A==w?1:t.y.data),u.push("cxy"),m.push(!1),o++),l++;c.push(g),d.push(u),p.push(m),n++}h++}}else if(t.y&&t.y.vars&&t.y.smps){var k=r?this.varIndices.length:t.y.vars.length,L=r?this.smpIndices.length:t.y.smps.length,I=!!t.x&&this.sortObject(t.x),z=!!t.z&&this.sortObject(t.z);if(g.push(""),u.push("cxb"),m.push(!1),this.dataTableTransposed){if(t.x)for(A=0;A<I.length;A++)o<i&&l>=e&&!this.dataTableHide[I[A]]&&(g.push(I[A]),u.push("cxx"),m.push(f.x[I[A]].type),o++),l++;for(A=0;A<k;A++)o<i&&l>=e&&!this.dataTableHide[r?t.y.vars[this.varIndices[A]]:t.y.vars[A]]&&(g.push(r?t.y.vars[this.varIndices[A]]:t.y.vars[A]),u.push("cxv"),m.push(!1),o++),l++;if(c.push(g),d.push(u),p.push(m),t.z)for(A=0;A<z.length;A++){if(n<a&&h>=s&&!this.dataTableHide[z[A]]){if(o=0,l=0,g=[z[A]],u=["cxz"],m=[f.z[z[A]].type],t.x)for(w=0;w<I.length;w++)o<i&&l>=e&&!this.dataTableHide[I[w]]&&(g.push(""),u.push("cxb"),m.push(!1),o++),l++;for(w=0;w<k;w++){if(o<i&&l>=e&&!this.dataTableHide[r?t.y.vars[this.varIndices[w]]:t.y.vars[w]]){var N=r?this.getMetadataValue(this.varIndices[w],"z",z[A]):t.z[z[A]][w],B="String"==f.z[z[A]].type?f.z[z[A]].colors[f.z[z[A]].order[N]]:this.getColorForValue(f.z[z[A]].colorBrew,N);g.push(N),u.push("cxz"),m.push(B),o++}l++}c.push(g),d.push(u),p.push(m),n++}h++}for(A=0;A<L;A++){if(n<a&&h>=s&&!this.dataTableHide[r?t.y.smps[this.smpIndices[A]]:t.y.smps[A]]){if(o=0,l=0,g=[r?t.y.smps[this.smpIndices[A]]:t.y.smps[A]],u=["cxs"],m=[!1],t.x)for(w=0;w<I.length;w++){if(o<i&&l>=e&&!this.dataTableHide[I[w]]){N=r?this.getMetadataValue(this.smpIndices[A],"x",I[w]):t.x[I[w]][A],B="String"==f.x[I[w]].type?f.x[I[w]].colors[f.x[I[w]].order[N]]:this.getColorForValue(f.x[I[w]].colorBrew,N);g.push(N),u.push("cxx"),m.push(B),o++}l++}for(w=0;w<k;w++)o<i&&l>=e&&!this.dataTableHide[r?t.y.vars[this.varIndices[w]]:t.y.vars[w]]&&(r?g.push(t.y.data[this.varIndices[w]][this.smpIndices[A]]):g.push(null!=t.y.data[w][A]?t.y.data[w][A]:t.y.data[A]),u.push("cxy"),m.push(!1),o++),l++;c.push(g),d.push(u),p.push(m),n++}h++}}else{if(t.z)for(A=0;A<z.length;A++)o<i&&l>=e&&!this.dataTableHide[z[A]]&&(g.push(z[A]),u.push("cxz"),m.push(f.z[z[A]].type),o++),l++;for(A=0;A<L;A++)o<i&&l>=e&&!this.dataTableHide[r?t.y.smps[this.smpIndices[A]]:t.y.smps[A]]&&(g.push(r?t.y.smps[this.smpIndices[A]]:t.y.smps[A]),u.push("cxs"),m.push(!1),o++),l++;if(c.push(g),d.push(u),p.push(m),t.x)for(A=0;A<I.length;A++){if(n<a&&h>=s&&!this.dataTableHide[I[A]]){if(o=0,l=0,g=[I[A]],u=["cxx"],m=[f.x[I[A]].type],t.z)for(w=0;w<z.length;w++)o<i&&l>=e&&!this.dataTableHide[z[w]]&&(g.push(""),u.push("cxb"),m.push(!1),o++),l++;for(w=0;w<L;w++){if(o<i&&l>=e&&!this.dataTableHide[r?t.y.smps[this.smpIndices[w]]:t.y.smps[w]]){N=r?this.getMetadataValue(this.smpIndices[w],"x",I[A]):t.x[I[A]][w],B="String"==f.x[I[A]].type?f.x[I[A]].colors[f.x[I[A]].order[N]]:this.getColorForValue(f.x[I[A]].colorBrew,N);g.push(N),u.push("cxx"),m.push(B),o++}l++}c.push(g),d.push(u),p.push(m),n++}h++}for(A=0;A<k;A++){if(n<a&&h>=s&&!this.dataTableHide[r?t.y.vars[this.varIndices[A]]:t.y.vars[A]]){if(o=0,l=0,g=[r?t.y.vars[this.varIndices[A]]:t.y.vars[A]],u=["cxv"],m=[!1],t.z)for(w=0;w<z.length;w++){if(o<i&&l>=e&&!this.dataTableHide[z[w]]){N=r?this.getMetadataValue(this.varIndices[A],"z",z[w]):t.z[z[w]][A],B="String"==f.z[z[w]].type?f.z[z[w]].colors[f.z[z[w]].order[N]]:this.getColorForValue(f.z[z[w]].colorBrew,N);g.push(N),u.push("cxz"),m.push(B),o++}l++}for(w=0;w<L;w++)o<i&&l>=e&&!this.dataTableHide[r?t.y.smps[this.smpIndices[w]]:t.y.smps[w]]&&(r?g.push(t.y.data[this.varIndices[A]][this.smpIndices[w]]):g.push(null!=t.y.data[A][w]?t.y.data[A][w]:t.y.data[w]),u.push("cxy"),m.push(!1),o++),l++;c.push(g),d.push(u),p.push(m),n++}h++}}}return this.isGroupedData=y,[c,d,p]},this.updateDataTable=function(t,e,i){var s=this.$(this.target+"-cX-DataTable");if(s||(s=this.initializeDataTable()),s){this.dataTableLastState&&"docked"==this.dataTableLastState&&(this.dataTableLastX=0,this.dataTableLastY=0),this.dataTableLastState||(this.dataTableLastState="free");var a=s.style.left,r=s.style.top;t=t?this.getUngroupedDataObject(t):this.data,this.setDataTableDimensions(t,e);var n=this.getDataClassAsArray(t,this.startCol,this.maxCols,this.startRow,this.maxRows,!0);this.loadDataTableValues(n[0],n[1],n[2],i),this.$(this.target+"-cX-DataTable").style.left=a,this.$(this.target+"-cX-DataTable").style.top=r,this.dataTableMaximized&&(this.$(this.target+"-cX-DataTable").style.top=-(this.height+3)+"px")}},this.loadDataTableValues=function(t,e,i,s){var a=window.document,r=this.$(this.target+"-cX-DataTable");if(r){for(var n=this.setDataTableRowHeight(0),o=this.setDataTableColumnWidth(0),h=0;h<this.maxRows;h++)for(var l=0;l<this.maxCols;l++){var c=this.target+"-cX-DataTableCell."+h+"."+l,d=this.target+"-cX-DataTableCellContent."+h+"."+l,p=this.target+"-cX-DataTableCellContentA."+h+"."+l;if(y=this.$(c)){if(y.hasChildNodes())for(;y.childNodes.length>=1;)y.removeChild(y.firstChild);var g=this.$cX("div",{id:d,className:"CanvasXpressTableCell ",title:""});if(0==h){var u=this.$cX("a",{id:p,className:"CanvasXpressTableCellHead ",href:"#"});g.appendChild(u)}g.appendChild(a.createTextNode("")),0==l&&(g.style.height=n+"px",y.style.height=n+"px"),0==h&&(g.style.width=o+"px",y.style.width=o+"px"),"stripped"==this.dataTableStyle?y.style.background=h%2?"rgba(0,0,0,0)":"rgba(0,0,0,0.05)":y.style.background="",y.appendChild(g)}}var m=this.startRow;for(h=0;h<t.length;h++){var f=this.startCol;for(l=0;l<t[h].length+this.startCol;l++){var y;c=this.target+"-cX-DataTableCell."+h+"."+l,d=this.target+"-cX-DataTableCellContent."+m+"."+f,p=this.target+"-cX-DataTableCellContentA."+m+"."+f;if(y=this.$(c)){if(y.hasChildNodes())for(;y.childNodes.length>=1;)y.removeChild(y.firstChild);var x="object"==typeof t[h][l],v=null!=t[h][l]?t[h][l].toString().replace("\0",""):"",b=null!=e[h][l]?e[h][l]:"",A=i[h][l];isNaN(v)||"cxy"!=b||null==t[h][l]||"Network"==this.graphType?"NaN"===v&&(v=""):v=this.formatNumber(v);g=this.$cX("div",{id:d,className:"CanvasXpressTableCell ",title:x?this.prettyJSON(t[h][l]):v,type:b},{lineHeight:"stripped"==this.dataTableStyle?this.dataTableFontSize+16+"px":this.dataTableFontSize+6+"px"});if(0==h){u=this.$cX("a",{id:p,className:"CanvasXpressTableCellHead ",href:"#"});g.appendChild(u)}g.appendChild(a.createTextNode(v)),b.match(/cxv|cxs|cxy/)?g.style.fontStyle="normal":g.style.fontStyle="italic",0!=h?(g.style.height=this.setDataTableRowHeight(m)+"px",y.style.height=this.setDataTableRowHeight(m)+"px"):(g.style.height=this.setDataTableRowHeight(0)+"px",y.style.height=this.setDataTableRowHeight(0)+"px"),0!=l?(g.style.width=this.setDataTableColumnWidth(f)+"px",y.style.width=this.setDataTableColumnWidth(f)+"px"):(g.style.width=this.setDataTableColumnWidth(0)+"px",y.style.width=this.setDataTableColumnWidth(0)+"px"),y.appendChild(g),this.colorDataTable&&(A&&h>0&&l>0?y.style.background=this.addColorTransparency(A,this.colorDataTableTransparency,!0):h>0&&l>0?y.style.background="":(g.title=0==h&&0==l?this.totalRows-1+" X "+(this.totalCols-1)+" data points":0==l?"Row "+m+": "+v:"Col "+f+": "+v,g.ftype=A)),f++}}m++}if(this.sortDataTableHead){var w=this.$(this.sortDataTableHead.id),C=this.$(this.target+"-cX-DataTableCell.0.0").firstChild,T=this.target+"-cX-DataTableCellContent.0.0";w&&(w.className=this.sortDataTableHead.className),C&&(C.className=this.sortDataTableHead.id==T?this.sortDataTableHead.className:"CanvasXpressTableCell")}this.activeTarget=r,s&&(r.style.opacity=0),r.style.display="block"}},this.moveDataTableDiv=function(t){var e=this.$(this.target+"-cX-DataTable");if(e){var i,s,a=this.$(this.remoteParentId+"-canvasXpressRemoteWindow"),r=this.$("north-container-"+this.target),n=this.$("west-container-"+this.target),o=this.$("east-container-"+this.target),h=this.$("south-container-"+this.target),l=this.$("south-wrapper-"+this.target),c=this.meta.canvas.canvasPixelRatio;if(n&&o&&h&&l)if(!t||"dock"!=t&&"dockMagic"!=t)if(t&&"hide"==t)delete this.dataTableLastState,delete this.dataTableLastX,delete this.dataTableLastY,i=parseInt(n.style.width)+parseInt(o.style.width)+this.meta.canvas.ctx.canvas.width/c,s=parseInt(r.style.height)+this.meta.canvas.ctx.canvas.height/c,a&&this.resizeMoveObject(a,0,0,i+0,s+64),"hide"==t&&(e.style.display="none"),this.resizeMoveObject(l,0,0,i,0),this.resizeMoveObject(h,0,0,i,0);else{if(!t||"max"!=t&&"release"!=t&&"undock"!=t)return;this.dataTableLastState="free",i=parseInt(n.style.width)+parseInt(o.style.width)+this.meta.canvas.ctx.canvas.width/c,s=parseInt(r.style.height)+this.meta.canvas.ctx.canvas.height/c,a&&this.resizeMoveObject(a,0,0,i+i,s+64),"max"!=t&&"undock"!=t||this.resizeMove(e,parseInt(this.dataTableLastX),parseInt(this.dataTableLastY),e.clientWidth,parseInt(this.dataTableLastHeight)||this.dataTableRowsHeight+42),this.resizeMoveObject(l,0,0,i,0),this.resizeMoveObject(h,0,0,i,0)}else this.dataTableLastState="docked",this.dataTableLastHeight=e.clientHeight,this.dataTableLastX=e.offsetLeft,this.dataTableLastY=e.offsetTop,i=Math.max(e.clientWidth,parseInt(n.style.width)+parseInt(o.style.width)+this.meta.canvas.ctx.canvas.width/c)+2,s=parseInt(r.style.height)+this.meta.canvas.ctx.canvas.height/c+e.clientHeight+2,a&&this.resizeMoveObject(a,0,0,i+0,s+64),this.resizeMoveObject(h,0,0,i,e.clientHeight+2),this.resizeMoveObject(l,0,0,i,e.clientHeight+2),"dockMagic"==t?this.resizeMoveObject(e,0,0,e.clientWidth,e.clientHeight):this.resizeMove(e,0,0,e.clientWidth,e.clientHeight)}},this.updateDataTableResizerDiv=function(t,e,i){if(!t||null!=e&&null!=i||(e=Math.abs(this.dataTableWidth)-(this.xMouseDown-t.clientX),i=Math.abs(this.dataTableHeight)-(this.yMouseDown-t.clientY)),this.dataTableTarget&&this.dataTableTarget.style&&e&&i){var s=this.$(this.target+"-cX-DataTable"),a=this.$(this.target+"-cX-DataTableContainer"),r=this.$(this.target+"-cX-DataTableTableMask"),n=this.$(this.target+"-cX-DataTableVer"),o=this.$(this.target+"-cX-DataTableHor"),h=this.$(this.target+"-cX-DataTableToolbar");s&&a&&r&&n&&o&&h&&(this.dataTableTarget.style.width=CanvasXpress.system.isIE?Math.max(0,e)+"px":e+"px",a.style.width=CanvasXpress.system.isIE?Math.max(0,e)+"px":e+"px",r.style.width=CanvasXpress.system.isIE?Math.max(0,e-60)+"px":e-60+"px",o.style.width=CanvasXpress.system.isIE?Math.max(0,e-60)+"px":e-60+"px",h.style.width=CanvasXpress.system.isIE?Math.max(0,e)+"px":e+"px",this.dataTableTarget.style.height=CanvasXpress.system.isIE?Math.max(0,i)+"px":i+"px",a.style.height=CanvasXpress.system.isIE?Math.max(0,i-28)+"px":i-28+"px",r.style.height=CanvasXpress.system.isIE?Math.max(0,i-60)+"px":i-60+"px",n.style.height=CanvasXpress.system.isIE?Math.max(0,i-60)+"px":i-60+"px",this.dataTableLastWidth=e,this.dataTableLastHeight=i)}},this.endDataTableResizerDiv=function(t){null!=this.dataTableTarget&&(this.adjustDataTable(t),this.xMouseDown=null,this.yMouseDown=null,this.dataTableWidth=null,this.dataTableHeight=null,this.dataTableTarget=!1,this.resizingDataTableOn=!1)},this.endDataTableColumnResize=function(t){that=this,this.xMouseDown=null,this.yMouseDown=null,this.resizingDataTableColumnOn=!1,this.dataTableColumnTarget=!1,this.noSorting=!0,window.document.body.style.cursor="default",setTimeout((function(){that.noSorting=!1}),200)},this.updateSearchDataTable=function(t){var e=this.$(t).value,i=new RegExp(e,"i"),s=this.getAllNetworkAttributes(this.data);if(this.dataTableHide={},s){for(var a=this.data[this.networkShowDataTable],r=0;r<s[2].length;r++)this.dataTableHide[s[2][r]]=!0;var n=!1;for(r=0;r<s[2].length;r++)if(null!=s[2]&&s[2][r].toString().match(i))delete this.dataTableHide[s[2][r]];else{n=!1;for(var o=0;o<s[3].length;o++)if(null!=a[r][s[3][o]]&&a[r][s[3][o]].toString().match(i)){n=!0;break}n&&delete this.dataTableHide[s[2][r]]}}if(this.data.z){for(r=0;r<this.data.y.vars.length;r++)this.dataTableHide[this.data.y.vars[r]]=!0;for(var h in this.data.z)this.dataTableHide[h]=!1;for(r=0;r<this.data.y.vars.length;r++)for(var h in this.data.z)this.data.z[h][r].toString().match(i)&&delete this.dataTableHide[this.data.y.vars[r]]}if(this.data.x){for(r=0;r<this.data.y.smps.length;r++)this.dataTableHide[this.data.y.smps[r]]=!0;for(var h in this.data.x)this.dataTableHide[h]=!1;for(r=0;r<this.data.y.smps.length;r++)for(var h in this.data.x)this.data.x[h][r].toString().match(i)&&delete this.dataTableHide[this.data.y.smps[r]]}this.updateDataTable(!1,!0),this.$(this.target+"-cX-DataTableToolbar").style.height="36px",this.$(this.target+"-cX-DataTableSearch").value=e,this.$(this.target+"-cX-DataTableSearch").focus()},this.resetDataTableSearch=function(){this.$(this.target+"-cX-DataTableSearch").value="",this.dataTableHide={}},this.initializeDataTable=function(){if(!this.disableEvents&&!this.disableDataTable&&"Genome"!=this.graphType)return"stripped"==this.dataTableStyle&&(this.colorDataTable=!1,this.rowHeight=Number(28)),this.addDataTableDiv()},this.drawDOETableCanvas=function(){for(var t=this.marginLeft+this.offsetX+this.left,e=this.marginTop+this.offsetY+this.top,i=this.layoutWidth-(this.left+this.right),s=this.layoutHeight-(this.top+this.bottom),a=this.data.y.smps[0],r=t+i/6,n=t+i/2,o=t+i-i/6,h=e+31,l=this.darkenLightenColor(this.background,-20),c=0,d="";h<e+s&&c<this.data.y.vars.length;)c%2||this.toRender({p:["drawShape","rectangle",t+i/2,h,i-14,18,l,l],t:"Labels"}),h+=18,c++;for(this.toRender({p:["drawText","Row",r,e+16,"Bold"+this.font,this.foreground,"center","middle"],t:"Labels"}),this.toRender({p:["drawText",a,n,e+16,"Bold"+this.font,this.foreground,"center","middle"],t:"Labels"}),this.toRender({p:["drawText","#",o,e+16,"Bold"+this.font,this.foreground,"center","middle"],t:"Labels"}),h=e+32,c=0;h<e+s&&c<this.data.y.vars.length;)this.toRender({p:["drawText",c+1,r,h,"Bold"+this.font,this.foreground,"right","middle"],t:"Labels"}),d=this.data.y.vars[c],this.measureText(d,this.font)>i/3&&(d=d.substring(0,10)),this.toRender({p:["drawText",d,n,h,this.font,this.foreground,"center","middle"],t:"Labels"}),d=this.data.y.data[c][0],this.measureText(d,this.font)>i/3&&(d=d.substring(0,10)),this.toRender({p:["drawText",d,o+i/15,h,this.font,this.foreground,"right","middle"],t:"Labels"}),h+=18,c++},this.drawDOETable=function(){var t=this.marginLeft+this.offsetX+this.left,e=this.marginTop+this.offsetY+this.top,s=this.layoutWidth-(this.left+this.right),a=this.layoutHeight-(this.top+this.bottom),r=this.data.y.smps[0],n=Math.floor(s/3)+"px",o=this.$("northest-container-"+this.target),h=this.darkenLightenColor(this.background,-20),l=this.background,c=this.layoutDOETables[r].idxs;this.drawDOETableCanvas();var d=this.$cX("div",{id:this.target+"-cX-DataTable-"+r,className:"CanvasXpressDataTableDOE"},{position:"absolute",height:a-14+"px",width:s-14+"px",left:t+7+"px",top:e+7+"px",overflow:"scroll",backgroundColor:this.background,zIndex:9999}),p=this.$cX("table",{className:"CanvasXpressDataTableDOE",width:s-14+"px"}),g=this.$cX("head",{className:"CanvasXpressDataTableDOE"},{display:"block",position:"sticky",top:0}),u=this.$cX("tr",{className:"CanvasXpressDataTableDOE"});u.appendChild(this.$cX("th",{className:"CanvasXpressDataTableDOE",innerHTML:"Row"},{width:n,maxWidth:n,position:"sticky",top:0,backgroundColor:this.background,color:this.foreground})),u.appendChild(this.$cX("th",{className:"CanvasXpressDataTableDOE",innerHTML:r},{width:n,maxWidth:n,position:"sticky",top:0,backgroundColor:this.background,color:this.foreground})),u.appendChild(this.$cX("th",{className:"CanvasXpressDataTableDOE",innerHTML:"#"},{width:n,maxWidth:n,position:"sticky",top:0,backgroundColor:this.background,color:this.foreground})),g.appendChild(u);var m=this.$cX("body",{className:"CanvasXpressDataTableDOE"});for(i=0;i<this.data.y.data.length;i++){var f=c[i]||i,y=this.$cX("tr",{className:"CanvasXpressDataTableDOE"});y.appendChild(this.$cX("th",{className:"CanvasXpressDataTableDOE",innerHTML:i+1},{width:n,maxWidth:n,backgroundColor:i%2?l:h,color:this.foreground})),y.appendChild(this.$cX("td",{className:"CanvasXpressDataTableDOE",innerHTML:this.data.y.vars[f]},{width:n,maxWidth:n,backgroundColor:i%2?l:h,color:this.foreground})),y.appendChild(this.$cX("td",{className:"CanvasXpressDataTableDOE",innerHTML:this.data.y.data[f][0]},{width:n,maxWidth:n,backgroundColor:i%2?l:h,color:this.foreground})),c[i]=f,m.appendChild(y)}p.appendChild(g),p.appendChild(m),d.appendChild(p),o&&o.appendChild(d),this.addRemoveDataTableDOEListeners("addEvtListener",d)},this.addRemoveDataTableDOEListeners=function(t,e){if(e){var i=e.firstChild.firstChild.firstChild;if(i)for(var s=1;s<i.childNodes.length;s++)this.addRemoveEvtListener(t,i.childNodes[s],"click",this.clickDataTableDOE,!1)}},this.clickDataTableDOE=function(t){return function(e){t.removeMenus();var i=t.getActiveLayout(e),s=t.dataStndBy.l,a=s.smps[i.idx][0],r=t.createPie(a,!0),n=t.seq(0,r.y.data.length-1,1),o=this.parentNode.parentNode.nextSibling,h=t.layoutDOETables[a];if(o){this.innerHTML==s.smps[i.idx][0]?h.sort&&"desc"!=h.sort?(h.sort="desc",n=n.sort((function(t,e){return r.y.vars[e].toString().toLowerCase().localeCompare(r.y.vars[t].toString().toLowerCase())}))):(h.sort="asc",n=n.sort((function(t,e){return r.y.vars[t].toString().toLowerCase().localeCompare(r.y.vars[e].toString().toLowerCase())}))):h.sort&&"desc"!=h.sort?(h.sort="desc",n=n.sort((function(t,e){return r.y.data[e][0]-r.y.data[t][0]}))):(h.sort="asc",n=n.sort((function(t,e){return r.y.data[t][0]-r.y.data[e][0]})));for(var l=0;l<o.childNodes.length;l++)o.childNodes[l].childNodes[1].innerHTML=r.y.vars[n[l]],o.childNodes[l].childNodes[2].innerHTML=r.y.data[n[l]][0];h.idxs=n}return!1}}(this),this.removeDOETables=function(){var t=this.$("northest-container-"+this.target);if(t)for(var e=t.getElementsByTagName("div"),i=Array.prototype.filter.call(e,(function(t){return"CanvasXpressDataTableDOE"==t.className})),s=0;s<i.length;s++)this.addRemoveDataTableDOEListeners("removeEvtListener",i[s]),t.removeChild(i[s])}},CanvasXpress.prototype.initCanvasResizerEvents=function(){this.addCanvasResizerDiv=function(t){if(t){if(this.$("canvasXpressCanvasResize"))return}else if(this.$(this.target+"canvasXpressCanvasResize"))return;var e=this.$cX("div",{id:t?"canvasXpressCanvasResize":this.target+"canvasXpressCanvasResize",className:"CanvasXpressCanvasResizer"},{left:"0px",top:"0px",width:"0.5px",height:"0.5px",position:"absolute",display:"none",zIndex:100001});if(t&&(e.style.opacity=.5,e.style.filter="alpha(opacity = 50)",e.style.backgroundColor=this.resizerBackgroundColor),t)return window.document.body.appendChild(e),e;this.meta.canvas.ctx.canvas.parentNode.appendChild(e)},this.isCanvasResize=function(t){if(this.resizable){var e=this.adjustedCoordinates(t);if(e){var i=e.x,s=e.y;return i>this.width-18&&this.resizableX&&s>this.height-18&&this.resizableY?(this.resizeCanvasCursorShow="se-resize",!0):i>this.width-18&&this.resizableX&&s>20?(this.resizeCanvasCursorShow="e-resize",!0):s>this.height-18&&this.resizableY?(this.resizeCanvasCursorShow="s-resize",!0):(this.resizeCanvasCursorShow=!1,!1)}}},this.updateCanvasResizerCursor=function(t){if(this.resizable){var e=this.$(this.target2);if(e){var i=this.adjustedCoordinates(t);if(i){var s=i.x,a=i.y;s<=this.width&&a<=this.height&&(s>this.width-18&&this.resizableX&&a>this.height-18&&this.resizableY?(e.style.cursor="se-resize",this.resizeCanvasCursorShow="se-resize"):s>this.width-18&&this.resizableX&&a>20?(e.style.cursor="e-resize",this.resizeCanvasCursorShow="e-resize"):a>this.height-18&&this.resizableY?(e.style.cursor="s-resize",this.resizeCanvasCursorShow="s-resize"):this.movingOn||(e.style.cursor="default",this.resizeCanvasCursorShow=!1))}}}},this.updateCanvasResizer=function(t){if(this.resizingCanvasOn&&this.resizeCanvasCursorShow){window.document.body.style.cursor=this.resizeCanvasCursorShow;var e=this.$(this.target+"canvasXpressCanvasResize"),i=this.$("canvasXpressCanvasResize"),s=this.adjustedCoordinates(t),a=this.relativeCoordinates(this.meta.canvas.ctx.canvas);e&&s&&a&&("se-resize"==this.resizeCanvasCursorShow?(w=s.x,h=s.y):"e-resize"==this.resizeCanvasCursorShow?(w=s.x,h=this.height):"s-resize"==this.resizeCanvasCursorShow&&(w=this.width,h=s.y),i||(i=this.addCanvasResizerDiv(!0)),this.preventSelection(),dx=s.x-this.meta.canvas.ctx.canvas.width,dy=s.y-this.meta.canvas.ctx.canvas.height,e.style.width=w+"px",e.style.height=h+"px",e.style.display="block",i.style.left=a.x+"px",i.style.top=a.y+"px",i.style.width=w+"px",i.style.height=h+"px",i.style.display="block",CanvasXpress.resizing=!0)}},this.endCanvasResizer=function(t){if(this.resizingCanvasOn){if(this.isTransition())return;var e=this.$(this.target),i=this.$(this.target+"canvasXpressCanvasResize"),s=this.$("canvasXpressCanvasResize"),a=this.$("west-container-"+this.target),r=this.$("middle-container-"+this.target),n=this.$("east-container-"+this.target);if(e&&i&&s){this.clickLayoutNoAnimation();var o=parseInt(i.style.width),h=parseInt(i.style.height);r.style.width=parseInt(a.style.width)+parseInt(i.style.width)+parseInt(n.style.width)+"px",r.style.height=i.style.height,this.draw({width:o,height:h,func:"setDimensions",par:[o,h]}),i.style.width="0.5px",i.style.height="0.5px",i.style.display="none",e.style.cursor="default",this.updateRemoteNavigationWindow(),this.resetMotionDiv(),window.document.body.removeChild(s),this.resizeCanvasCursorShow=!1,this.resizingCanvasOn=!1,CanvasXpress.resizing=!1}}},this.initializeCanvasResizerEvents=function(){this.disableEvents||(this.addCanvasResizerDiv(),this.showMask())},this.initializeCanvasResizerEvents()},CanvasXpress.prototype.initMotionEvents=function(){var t;this.addMotionDiv=function(t){var e=this.target+"-cX-Motion";if(this.reproducing||!this.$(e)&&this.motionBy){if(!this.reproducing||!this.$(e)){var i=this.reproducing?1:3,s=this.reproducing?40:0,a=this.reproducing?18:0,r=2*this.margin,n=this.reproducing?this.motionWidth:this.width-6*this.margin,o=this.reproducing?-this.motionWidth-23:this.margin*i,h=45+this.margin+s,l=this.reproducing?0:this.height-(h+this.margin),c=this.margin,d=21+this.margin+s,p=n-(20+8*this.margin),g=4*this.margin,u=this.margin+s,m=n-(20+8*this.margin),f=4*this.margin,y=this.margin+s,x=n+17-(20+8*this.margin+2),v=15+4*this.margin,b=this.margin+s;this.motionControlWidth=p,this.setMotionObject();var A=this.motionObject,w=this.reproducing?32*A.levels.length:0,C=this.$cX("div",{id:e,className:this.reproducing?"CanvasXpressMotion draggable":"CanvasXpressMotion"},{left:o+"px",top:l+"px",width:n+a+"px",height:h+"px",position:"absolute",maxHeight:this.height+"px"});this.reproducing&&(C.style.backgroundColor="rgba(245, 245, 245, 0.95)",C.style.border="1px solid rgb(51, 122, 183)",C.style.borderRadius="5px",C.style.boxSizing="content-box",C.style.opacity=0);var T=this.$cXI("op_cancel",{id:e+"CloseImage",className:"CanvasXpressMotion unselectable",src:"op_cancel",title:"Close Reproducer"},{cssFloat:"right",padding:"3px"}),S=this.$cX("span",{id:e+"Span",className:"CanvasXpressMotion unselectable",innerHTML:"Customization Timeline"},{left:"8px",top:"5px",position:"absolute",cssFloat:"left",fontWeight:"bold"}),M=this.$cXI("v_play",{id:e+"Play",className:"unselectable",src:"v_play",className:"CanvasXpressMotion"},{left:c+"px",top:d+"px",width:"20px",height:"20px",position:"relative",cssFloat:"left"}),D=this.$cX("div",{id:e+"Scale",className:"CanvasXpressMotion"},{left:g+"px",top:u+"px",width:p+"px",height:"14px",position:"relative",cssFloat:"left"}),k=this.$cX("div",{id:e+"Ticks",className:"CanvasXpressMotion"},{left:f+"px",top:y+"px",width:m+"px",height:"10px",position:"relative",cssFloat:"left"}),L=this.$cX("div",{id:e+"Container",className:"CanvasXpressMotionContainer"},{left:v+"px",top:b+"px",width:x+"px",height:"14px",position:"relative",cssFloat:"left",clear:"none"}),I=this.$cX("div",{id:e+"Current",className:"CanvasXpressMotionCurrent"},{left:"0px",cursor:"pointer"}),z=this.$cX("div",{id:e+"Range",className:"CanvasXpressMotionRange"},{width:0,maxWidth:x+"px"}),N=this.$cX("div",{id:e+"Selection",className:"unselectable",draggable:!1},{left:c+"px",top:b+this.margin+"px",width:this.motionWidth+a-r+"px",position:"relative",cssFloat:"left",clear:"both",maxHeight:this.height-100+"px"}),B=this.$cX("ul",{className:"CanvasXpressList unselectable",draggable:!1},{height:this.height-100+"px"});if(N.appendChild(B),"String"==A.type){if(A.levels.length<100)for(var P=0;P<A.levels.length;P++){n=this.measureText(P.toString()," 2pt Arial"),A.levels[P].length>18?A.levels[P].substring(0,15):A.levels[P];var R=this.$cX("div",{className:"unselectable",innerHTML:P.toString(),title:A.levels[P]},{left:parseInt(P*A.unit-n/2)+"px",cssFloat:"left",position:"absolute",fontSize:"xx-small",cursor:"pointer"});D.appendChild(R);var O=this.$cX("div",{className:"unselectable",innerHTML:"|"},{left:parseInt(P*A.unit)+1+"px",cssFloat:"left",position:"absolute",fontSize:"xx-small"});if(k.appendChild(O),this.reproducing){var X=this.$cX("li",{className:"CanvasXpressListItem"},{height:"initial"}),F=this.$cX("a",{className:"CanvasXpressListItemA",unselectable:"on",draggable:!1}),_=this.$cXI(P<A.levels.length-1?"sl_radiooff":"sl_radioon",{className:"CanvasXpressListIcon unselectable",idx:P,src:P<A.levels.length-1?"sl_radiooff":"sl_radioon"}),E=this.$cX("span",{innerHTML:P+". "+A.levels[P],className:"CanvasXpressListItemText unselectable",idx:P,draggable:!1});F.appendChild(_),F.appendChild(E),X.appendChild(F),B.appendChild(X)}}}else for(P=0;P<A.values.length;P++){n=this.measureText(A.values[P].toString()," 2pt Arial"),R=this.$cX("div",{className:"unselectable",innerHTML:A.values[P],title:A.values[P]},{left:parseInt((A.values[P]-A.min)*A.unit-n/2)+"px",cssFloat:"left",position:"absolute",fontSize:"xx-small",cursor:"pointer"});D.appendChild(R);O=this.$cX("div",{className:"unselectable",innerHTML:"|"},{left:parseInt((A.values[P]-A.min)*A.unit)+1+"px",cssFloat:"left",position:"absolute",fontSize:"xx-small"});k.appendChild(O)}this.reproducing&&C.appendChild(T),L.appendChild(z),L.appendChild(I),this.reproducing&&C.appendChild(S),C.appendChild(M),C.appendChild(D),C.appendChild(k),C.appendChild(L),this.reproducing&&(C.style.height=h+w+r+"px",C.appendChild(N)),this.updateMotionIndices(),(x=this.$("center-wrapper-"+this.target))&&(x.appendChild(C),this.addRemoveMotionListeners("addEvtListener")),this.motionCache&&this.refreshMotionDiv(),this.reproducing&&this.transitionMagic(C,"swashIn")}}else this.motionBy?this.motionObject&&this.motionObject.name!=this.motionBy?this.resetMotionDiv(t):this.motionObject&&this.motionObject.setIndices&&this.updateMotionIndices([this.motionObject.current]):this.removeMotionDiv(!1,t)},this.setMotionObject=function(){if(!this.motionObject||this.motionObject.name!=this.motionBy)if(this.reproducing){for(var t=CanvasXpress.stack[this.target].afterRender,e=t.length,i={type:"String",levels:[],unit:this.motionControlWidth/(e-1),current:t[0][0],currentIdx:0,name:"Reproduce",fraction:0,initialized:!1},s=0;s<e;s++)i.levels.push(t[s][0]);this.motionObject=i}else{i={};var a=[],r={},n=this.data.x&&this.data.x[this.motionBy]?this.meta.data.x[this.motionBy]:this.meta.data.z[this.motionBy];if("Numeric"==n.type){if(this.data.x&&this.data.x[this.motionBy]){for(s=0;s<this.data.x[this.motionBy].length;s++){var o=this.data.x[this.motionBy][s];r.hasOwnProperty(o)||(a.push(o),r[o]=!0)}i.meta="x"}else{for(s=0;s<this.data.z[this.motionBy].length;s++){o=this.data.z[this.motionBy][s];r.hasOwnProperty(o)||(a.push(o),r[o]=!0)}i.meta="z"}if(a.length>20){i.type="Numeric",i.values=[],i.min=n.rmin,i.max=n.rmax,i.unit=this.motionControlWidth/(n.vals[n.vals.length-1]-n.rmin),i.current=n.rmin;for(s=0;s<n.vals.length;s++)n.vals[s]>=n.rmin&&i.values.push(n.vals[s]);i.range=n.rmax-n.rmin,i.step=Math.pow(10,Math.floor(Math.log(i.range/i.values.length)/Math.LN10)),i.decs=this.getNumberDecimals(i.step),i.levels=a.sort((function(t,e){return t-e}))}else i.type="String",i.levels=a.sort((function(t,e){return t-e})),i.unit=this.motionControlWidth/(a.length-1),i.current=a[0]}else i.type="String",i.levels=n.levels,i.unit=this.motionControlWidth/(n.levels.length-1),i.current=n.levels[0];i.varIndices=this.cloneObject(this.varIndices),i.smpIndices=this.cloneObject(this.smpIndices),i.grpIndices=this.cloneObject(this.grpIndices),i.varIndicesMotion=[],i.smpIndicesMotion=[],i.grpIndicesMotion=[],i.name=this.motionBy,i.fraction=0,this.motionObject=i}},this.updateMotionIndices=function(t,e){if(this.motionBy&&this.motionObject){var i=[],s="x"==this.motionObject.meta?this.motionObject.smpIndices:this.motionObject.varIndices,a="x"==this.motionObject.meta?this.data.x[this.motionBy]:this.data.z[this.motionBy];if("String"==this.motionObject.type)for(var r=t&&null!=t[0]?t[0]:this.motionObject.levels[0],n=0;n<s.length;n++){a[l=s[n]]==r&&i.push(l)}else{var o=t&&null!=t[0]?t[0]:this.motionObject.min,h=t&&null!=t[1]?t[1]:this.motionObject.values[0];for(n=0;n<s.length;n++){var l;a[l=s[n]]>o&&a[l]<=h&&i.push(l)}}"x"==this.motionObject.meta?this.smpIndices=i:this.varIndices=i,t&&t.length>0&&!e&&(this.motionObject.varIndicesMotion.push(this.cloneObject(this.varIndices)),this.motionObject.smpIndicesMotion.push(this.cloneObject(this.smpIndices)),this.motionObject.grpIndicesMotion.push(this.cloneObject(this.grpIndices))),this.motionObject.varIndicesMotion.length>3&&this.motionObject.varIndicesMotion.shift(),this.motionObject.smpIndicesMotion.length>3&&this.motionObject.smpIndicesMotion.shift(),this.motionObject.grpIndicesMotion.length>3&&this.motionObject.grpIndicesMotion.shift()}},this.addRemoveMotionListeners=function(t){var e=this.$(this.target+"-cX-Motion"),i=this.$(this.target+"-cX-MotionPlay"),s=this.$(this.target+"-cX-MotionCurrent");if(t&&e&&i&&s){if(this.reproducing){var a=this.$(this.target+"-cX-MotionCloseImage");a&&this[t](a,"click",this.closeMotion,!1),this[t](e,"mousedown",this.registerMousemove,!1);var r=this.$(this.target+"-cX-MotionSelection");if(r)for(var n=0;n<r.childNodes[0].childNodes.length;n++)for(var o=r.childNodes[0].childNodes[n].childNodes[0],h=0;h<o.childNodes.length;h++){var l=o.childNodes[h];this[t](l,"click",this.clickMotionSelection,!1)}}this[t](i,"click",this.clickMotion,!1),this[t](s,"mousedown",this.mousedownMotion,!1)}},this.closeMotion=(t=this,function(e){if(t.getTargetEvent(e)){var i=t.$(t.target+"-cX-Motion");t.transitionMagic(i,"holeOut",(function(){t.updateReproducing(t.motionObject.levels.length-1),t.removeMotionDiv(!1,e)}))}}),this.mousedownMotion=function(t){return function(e){if(t.getTargetEvent(e)){var i=t.$(t.target+"-cX-MotionRange");i&&(t.motionOn=i.style.width,t.xMouseDown=e.clientX,t.yMouseDown=e.clientY)}return!1}}(this),this.updateMotionToCurrent=function(t,e){if(!this.isTransition()&&this.$(this.target+"-cX-MotionRange")){for(var i=this.motionObject.levels,s=null,a=0;a<i.length;a++)if(i[a]==t){s=a+.99,a==i.length-1&&(s+=.05);break}if(null!=s){var r=this.motionControlWidth/i.length*s;this.disableMotion=!0,this.updateMotion(!1,r,!1,e),delete this.disableMotion}}},this.updateMotion=function(t,e,i,s){if(!this.isTransition()){var a=this.$(this.target+"-cX-MotionRange");if(a){var r,n=this.motionControlWidth,o=null!=e?Math.min(Math.max(0,e),n):t?Math.min(Math.max(0,t.clientX+parseInt(this.motionOn)-this.xMouseDown),n):0,h=o/this.motionObject.unit;if(a.style.width=o+"px",this.motionFraction=o/n,this.motionObject.last=o,"String"==this.motionObject.type)r=parseInt(h),this.reproducing?this.updateReproducing(r):(this.motionObject.levels[r]!=this.motionObject.current||i)&&(this.updateMotionIndices([this.motionObject.levels[r]],i),this.motionObject.current=this.motionObject.levels[r],this.userEvents.motion&&this.userEvents.motion.call(this,this.motionObject.current,t,this),s||this.draw({func:"updateMotion",par:[t,e,i,s]}));else{r=h+this.motionObject.min;for(var l=1;l<this.motionObject.values.length;l++)if(this.motionObject.values[l]>r){this.updateMotionIndices([this.motionObject.values[l-1],r],i),this.motionObject.decs?this.motionObject.current=this.formatNumber(r,this.motionObject.decs):this.motionObject.current=parseInt(r),this.userEvents.motion&&this.userEvents.motion.call(this,this.motionObject.current,t,this),s||this.draw({func:"updateMotion",par:[t,e,i,s]});break}}}}},this.updateReproducing=function(t){this.motionObject.initialized||(this.initializeDataReproduceMotion(),this.motionObject.initialized=!0),t!=this.motionObject.currentIdx?(t==this.motionObject.currentIdx+1?this.reproduceMotionDataToIdx(t,this.motionObject.currentIdx,!0):(this.motionObject.currentIdx=null,this.reproduceMotionDataToIdx(t,null)),this.motionObject.currentIdx=t):this.reproduceMotionDragOn||this.reproduceMotionDrag(t+1)},this.initializeDataReproduceMotion=function(){var t=!(!this.data.y||!this.data.y.hasOwnProperty("contour")),e="Map"==this.graphType?this.cloneObject(this.data):this.parseJSON(this.stringifyJSON(CanvasXpress.stack[this.target].data)),i=this.parseJSON(this.stringifyJSON(CanvasXpress.stack[this.target].config)),s=CanvasXpress.stack[this.target].afterRender,a=this.showTransition;for(var r in t&&(this.isContour=!1),this.setConfigDefaults(),i)this[r]=i[r];if(this.reproducing=!0,this.showTransition=!1,this.skipRender=!1,this.layoutValid=!1,this.isDOE){var n=!!this.data.l.histogram&&this.data.l.histogram.ridgeBy;this.graphType=this.initialGraphType,this.isDOE=!1,this.isPie=!1,this.isPieGroup=!1,this.data.y.histogram||(this.isHistogram=!1,this.isCreateHistogram=!1),this.layoutValid=!1,this.removeMenus(),this.switchData(!1,!0),this.ridgeBy=n,delete this.data.l,this.layoutComb=!1,this.layoutModified=!1,this.isValidLayout(),this.removeToolbar(),this.removeDOETables()}this.initializeData(e,!0),this.resetLegendPosition(!0),this.resetDendrograms(),this.resetSankey(),this.setTheme(),this.initializeGraph(!0),this[s[0][0]].apply(this,s[0][1]),this.hideMask(),this.showTransition=a},this.getDragDivDimensions=function(t,e,i){var s,a,r,n,o,h,l,c,d,p,g,u,m=e[0],f=null,y=this.graphType;switch(t){case"handleDragEventGenome":case"handleDragEventHeatmap":case"handleDragEventOneDimension":case"handleDragEventScatter":case"handlePanning":case"showHideSelectedData":f=e[1];break;case"updateDragNetwork":f=e[5]}var x=null!=f&&this.getBoundsXY(f);if(0!=x){var v=m.xMouseDown,b=m.yMouseDown,A=m.ac.x,w=m.ac.y;if(v>=x[0]&&v<=x[1]&&b>=x[2]&&b<=x[3])!y.match(/Scatter|Heatmap|Network|Genome|Circular/)&&"vertical"==this.graphOrientation&&!m.shiftKey||!y.match(/Scatter|Heatmap|Network|Genome|Circular/)&&"vertical"!=this.graphOrientation&&m.shiftKey?(s=o=x[0],r=l=x[1]-x[0]):(s=o=Math.min(v,A),r=0,l=A>v?A-v:v-A),d=o,g=o+l,!y.match(/Scatter|Heatmap|Network|Genome|Circular/)&&"vertical"!=this.graphOrientation&&!m.shiftKey||!y.match(/Scatter|Heatmap|Network|Genome|Circular/)&&"vertical"==this.graphOrientation&&m.shiftKey||"Genome"==y?(a=h=x[2],n=c=x[3]-x[2]):(a=h=Math.min(b,w),n=0,c=w>b?w-b:b-w),p=h,u=h+c;else if(i&&v>=x[4]&&v<=x[5]&&b>=x[6]&&b<=x[7]){var C=function(){s=o=x[4],a=b,h=w,r=l=x[5]-x[4],n=c=3,d=v,p=b,g=v,u=h},T=function(){s=v,o=A,a=h=x[6],r=l=3,n=c=x[7]-x[6],d=v,p=b,g=o,u=b};i.moveDendrogram?"varDendrogram"==i.moveDendrogram||"smpDendrogram"==i.moveDendrogram&&"vertical"==this.graphOrientation?C():T():i.moveSmpOverlay?y.match(/Heatmap/)||"horizontal"==this.graphOrientation?T():C():i.moveSmp?y.match(/Heatmap/)||"horizontal"==this.graphOrientation?C():T():i.moveVarOverlay?C():i.moveVar&&T()}}return[s,a,r,n,o,h,l,c,d,p,g,u]},this.getReproduceMotionDragIcon=function(t,e){return"updateClickConfigurator"==t?this.$cXI("m_left2",!1,!1,!0):e.type.match(/wheel/)?this.$cXI("m_wheel",!1,!1,!0):e.type.match(/key/)?this.$cXI("ch_cesc",!1,!1,!0):e.type.match(/mouse/)?this.$cXI("m_left",!1,!1,!0):this.$cXI("m_right",!1,!1,!0)},this.getHTMLReproduceMotionDragIcon=function(t,e){var i=this.getReproduceMotionDragIcon(t,e),s=i?[i]:[];return e.shiftKey&&s.push(this.$cXI("ch_cshift",!1,!1,!0)),e.ctrlKey&&s.push(this.$cXI("ch_cctrl",!1,!1,!0)),e.altKey&&s.push(this.$cXI("ch_calt",!1,!1,!0)),s.length>0?s.join(""):""},this.reproduceMotionCode=function(t,e){var i=CanvasXpress.stack[this.target].afterRender[t];if(i){var s=i[0],a=i[1]||[],r=i[2]||{},n=e?"<b>Function "+t+":</b> "+s+"<br><br>":"<b>Next modification...</b><br><br><b>Function "+t+":</b> "+s+"<br><br>",o=a[0]&&a[0].type?this.getHTMLReproduceMotionDragIcon(s,a[0]):"updateDragScatter"==s||"setDimensions"==s?this.$cXI("m_left",!1,!1,!0):"",h=this.prettyJSON(a);h.length>200&&(h=h.substring(0,250)+"..."),n+="<b>Parameters:</b> "+o+'<pre class="CanvasXpressCode">'+h+"</pre><br>";var l=this.prettyJSON(r);l.length>200&&(l=h.substring(0,250)+"..."),n+='<b>Config:</b> <pre class="CanvasXpressCode">'+l+"</pre><br>",this.reproduceMotionCurrentDiv&&this.closeTooltipDiv(!1,this.reproduceMotionCurrentDiv.id),this.reproduceMotionCurrentDiv=e?this.showTooltipDiv(!1,n,!1,!1,this.width+1,-2):this.flashInfoSpan(this.width+1,-2,n)}else this.flashInfoSpan(this.width/2,this.height/2,"<b>That's All Folks</b>",2e3)},this.reproduceMotionDrag=function(t){if(this.motioningOn){this.reproduceMotionCode(t);var e=window.document,i=e.scrollingElement,s=this.$(this.target).parentNode.getClientRects(),a=this.$(this.target+"-cX-Drag"),r=this.$(this.target+"-cX-Icon-Reproduce");r||(r=this.$cXI("tm_history",{id:this.target+"-cX-Icon-Reproduce",src:"tm_history"},{display:"none",position:"absolute",zIndex:239010}),e.body.appendChild(r));var n=CanvasXpress.stack[this.target].afterRender[t];if(!(n&&n[1]&&n[1][0]&&n[1][0].type))return void this.resetReproduceDragDiv();var o=n[0],h=n[1]||[],l=n[2]||{},c=!!(h[0]&&h[0].type&&h[0].type.match(/wheel/)),d=.95*this.reproduceTime,p=(i.scrollLeft||0)+s[0].left-16,g=(i.scrollTop||0)+s[0].top-16;if(c)this.resetReproduceDragDiv(),this.reproduceMotionDragOn=!0,this.$cXIU(r,"m_wheel",!1,{left:p+h[0].ac.x+"px",top:g+h[0].ac.y+"px",width:"24px",height:"24px",display:"block",position:"absolute"});else if("updateDragScatter"!=o&&"setDimensions"!=o){this.reproduceMotionDragOn=!0;var u=this.getDragDivDimensions(o,h,l);this.$cXIU(r,"m_left",!1,{left:p+u[8]+"px",top:g+u[9]+"px",width:"24px",height:"24px",display:"block",position:"absolute"}),a.style.left=u[0]+"px",a.style.top=u[1]+"px",a.style.width=u[2]+"px",a.style.height=u[3]+"px",a.style.display="block",this.resizeMove(a,u[4]+16,u[5],u[6],u[7],d),this.resizeMove(r,p+u[10]+16,g+u[11],32,32,d)}}},this.reproduceMotionDataToIdx=function(t,e,i){var s=CanvasXpress.stack[this.target].afterRender.length-1,a=null!=e?e:1;if(a!=t||t!=s){this.showMask(),i||this.initializeDataReproduceMotion();for(var r=a;r<=t;r++)if(r!=this.motionObject.currentIdx){var n=this.showTransition,o=CanvasXpress.stack[this.target].afterRender[r],h=o[0],l=o[1]||[],c=o[2]||{};for(var d in c)this[d]=c[d];"createHistogram"==h&&(this.isDOE=!1),this.reproducing=!0,this.showTransition=!1,this.updateMotionSelection(r),this.skipStack=!0,this[h].apply(this,l),this.skipStack=!1,this.reproduceMotionDrag(r+1),this.showTransition=n}this.hideMask()}},this.clickMotion=function(t){return function(e,i,s){if(s)for(var a=0;a<t.motionObject.levels.length;a++)t.updateReproducing(a),t.print(!1,(t.saveFilename?t.saveFilename:"cX-"+t.target)+"-"+a+".png");else if(e||i){var r=t.$(t.target+"-cX-MotionPlay");if(t.motioningOn)return t.$cXIU(r,"v_play"),void(t.motioningOnStop=!0);t.$cXIU(r,"v_stop"),t.motionOn=t.reproducing?0:"0px",t.motioningOn=!0,t.motioningOnStop=!1;var n=t.motionControlWidth,o=n/t.motionObject.levels.length,h=t.motionObject.last||0;t.reproducing&&t.updateMotionSelection(t.motionObject.lastSelection||0),0==h&&(t.resetSelected(e,!0),t.meta.ids={});t.reproducing&&!t.motionObject.initialized&&(t.initializeDataReproduceMotion(),t.motionObject.initialized=!0),t.updateMotion(e,h,!1,!0),t.skipStack=!0,t.skipTransition=!0;var l=t.setInterval((function(){if(h>=n||t.motioningOnStop){clearInterval(l);var i=t.setInterval((function(){if((t.reproducing?0:t.motionObject.varIndicesMotion.length)<1)return t.motionOn=!1,t.motioningOn=!1,t.motioningOnStop=!1,t.motionObject.last=h>=n?0:h,t.resetReproduceDragDiv(),clearInterval(i),t.$cXIU(r,"v_play"),t.skipStack=!1,void(t.skipTransition=!1);t.reproducing||(t.motionObject.varIndicesMotion.shift(),t.motionObject.smpIndicesMotion.shift(),t.motionObject.grpIndicesMotion.shift()),t.motioningOnStop||t.updateMotion(e,n,!1,!0)}),t.reproduceTime)}h+=o,t.updateMotion(e,h,!1,!0)}),t.reproduceTime)}}}(this),this.clickMotionSelection=function(t){return function(e){var i=t.getTargetEvent(e);if(i){var s=i.getAttribute("idx");0==s&&(t.resetSelected(e,!0),t.meta.ids={}),t.updateMotionSelection(s),t.updateMotionSelectionScale(s),t.updateReproducing(s),t.reproduceMotionCode(s,!0)}}}(this),this.updateMotionSelection=function(t){var e=this.$(this.target+"-cX-MotionSelection");if(e){var i=parseInt(e.style.maxHeight);e.childNodes[0].childNodes.length>1&&e.childNodes[0].childNodes[1].offsetTop-e.childNodes[0].childNodes[0].offsetTop;for(var s=0;s<e.childNodes[0].childNodes.length;s++){var a=e.childNodes[0].childNodes[s].childNodes[0].childNodes[0];if(a.getAttribute("idx")==t){this.$cXIU(a,"sl_radioon");var r=e.childNodes[0],n=e.childNodes[0].childNodes[s];(n.offsetTop>i-r.scrollTop||n.offsetTop<r.scrollTop)&&(r.scrollTop=n.offsetTop)}else this.$cXIU(a,"sl_radiooff")}this.motionObject.lastSelection=t}},this.updateMotionSelectionScale=function(t){var e=this.$(this.target+"-cX-MotionRange");if(e&&"String"==this.motionObject.type){var i=this.motionControlWidth/(this.motionObject.levels.length-1)*t;e.style.width=i+"px",this.motionObject.last=i}},this.refreshMotionDiv=function(){this.updateMotionIndices([this.motionCache.current],!0),this.motionObject.current=this.motionCache.current;var t=this.$(this.target+"-cX-MotionRange");t&&(t.style.width=parseInt(Number(this.motionControlWidth)*Number(this.motionCache.fraction))+"px"),this.motionObject.setIndices=!1,delete this.motionCache},this.removeMotionDiv=function(t,e){var i=this.$(this.target+"-cX-Motion");if(i){this.reproduceMotionCurrentDiv&&this.closeTooltipDiv(!1,this.reproduceMotionCurrentDiv.id),this.addRemoveMotionListeners("removeEvtListener");var s=this.reproducing?CanvasXpress.stack[this.target].afterRender.length-1:0;t&&(this.motionCache={name:this.motionObject.name,current:(this.motionObject.type,[this.motionObject.current]),fraction:this.motionFraction}),this.reset(!1,!1,e,!0),this.initializeAxis(),s&&this.reproduceMotionDataToIdx(s,this.motionObject.currentIdx),this.skipStack=!1,this.reproducing=!1,delete this.motionObject,i.parentNode.removeChild(i),this.hideMask()}},this.endMotion=function(){return this.motionOn=!1,!1},this.resetReproduceDragDiv=function(){var t=this.$(this.target+"-cX-Icon-Reproduce");t&&(t.style.display="none"),this.reproduceMotionCurrentDiv&&this.closeTooltipDiv(!1,this.reproduceMotionCurrentDiv.id),this.resetDrag(),this.reproduceMotionDragOn=!1},this.resetMotionDiv=function(t){this.motionBy&&!this.disableEvents&&(this.skipStack=!0,this.removeMotionDiv(!1,t),this.addMotionDiv())}},CanvasXpress.prototype.initDraggingEvents=function(){this.getActiveLayout=function(t){if(t){var e={};if(t&&"keydown"==t.type?(e.x=(this.layoutComb?this.layoutParams[0].width:this.width)/2,e.y=(this.layoutComb?this.layoutParams[0].height:this.height)/2):e=this.adjustedCoordinates(t),!this.layoutValid)return{idx:0,row:0,col:0,ac:e};for(var i=e.x,s=e.y,a=0,r=0;r<this.layoutRows;r++)for(var n=0;n<this.layoutCols;n++){if(!(a<this.data.l.weight.length))return!1;var o=this.getBoundsXY(a);if(i>=o[4]&&i<=o[5]&&s>=o[6]&&s<=o[7])return this.layoutValidR=r,this.layoutValidC=n,this.layoutValidN=a,this.layoutValidBounds=o,a={idx:a,row:r,col:n,ac:e,bounds:o};a++}}return!1},this.setActiveLayout=function(t){var e=this.getActiveLayout(t);e&&null!=e.row&&null!=e.col&&null!=e.idx&&(this.layoutValidR=e.row,this.layoutValidC=e.col,this.layoutValidN=e.idx,this.layoutValidBounds=e.bounds)},this.getActiveLayoutIndicesMetadata=function(t){var e=this.getActiveLayout(t);if(e){var i=this.layoutComb?this.layoutParams[e.idx]:this,s=this.cloneObject(i.varIndices),a=this.isGroupedData?this.cloneObject(i.grpIndices):this.cloneObject(i.smpIndices);if(s&&a){this.setOriginalIndices(e.idx,s,a);var r=e.ac.x-(i.offsetX+this.marginLeft+i.left),n=e.ac.y-(i.offsetY+this.marginTop+i.top),o=Math.min(Math.max(r,0),i.x)/i.x,h=2*Math.ceil(s.length/10),l=Math.round(o*h),c=h-l,d=Math.min(Math.max(n,0),i.y)/i.y,p=2*Math.ceil(a.length/10),g=Math.round(d*p),u=p-g;return{ac:e.ac,row:e.row,col:e.col,idx:e.idx,lcx:o,stx:l,edx:c,lcy:d,sty:g,edy:u,vin:s,sin:a}}r=e.ac.x-(i.offsetX+this.marginLeft+i.left),n=e.ac.y-(i.offsetY+this.marginTop+i.top),o=Math.min(Math.max(r,0),i.x)/i.x,d=Math.min(Math.max(n,0),i.y)/i.y;return{ac:e.ac,row:e.row,col:e.col,idx:e.idx,lcx:o,lcy:d}}return!1},this.isDragNotClick=function(t,e){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)>2},this.setIndicesAfterWheelEvent=function(t,e){var i,s,a,r,n,o,h,l=!1,c=this.getActiveLayoutIndicesMetadata(t);if(c){var d=this.layoutComb?this.layoutParams[c.idx]:this;if("Correlation"!=this.graphType||this.zoomDisable?"Heatmap"==this.graphType?(i=!this.zoomVariablesDisable&&!this.zoomDisable,s=!this.zoomSamplesDisable&&!this.zoomDisable,a=c.stx,r=c.edx,n=c.sty,o=c.edy,h=!1):this.graphType.match(/Bar|Line|Dotplot|Boxplot|Area|Stacked/)&&!this.zoomDisable&&(i=!1,s=!0,a=!1,r=!1,n="vertical"==this.graphOrientation?c.stx:c.sty,o="vertical"==this.graphOrientation?c.edx:c.edy,h=!0):(i="variables"==this.correlationAxis,s="samples"==this.correlationAxis,a=c.stx,r=c.edx,n=c.stx,o=c.edx,h=!1),e>0){if(i&&c.vin.length>3){d.varIndicesStart<0&&d.varIndicesStart++;for(var p=0;p<a;p++)c.vin.shift(),d.varIndicesStart++;for(p=0;p<r;p++)c.vin.pop();l=!0}if(s&&c.sin.length>3){if(this.isGroupedData){d.grpIndicesStart<0&&d.grpIndicesStart++;for(p=0;p<n;p++)c.sin.shift(),d.grpIndicesStart++}else{d.smpIndicesStart<0&&d.smpIndicesStart++;for(p=0;p<n;p++)c.sin.shift(),d.smpIndicesStart++}for(p=0;p<o;p++)c.sin.pop();l=!0}}else{if(i){for(p=0;p<a;p++)d.varIndicesStart>=0&&d.varIndicesStart+c.vin.length<d.startingVarIndices.length?(c.vin.push(d.startingVarIndices[d.varIndicesStart+c.vin.length]),l=!0):d.varIndicesStart>0&&(d.varIndicesStart--,c.vin.unshift(d.startingVarIndices[d.varIndicesStart]),l=!0);for(p=0;p<r;p++)d.varIndicesStart>0?(d.varIndicesStart--,c.vin.unshift(d.startingVarIndices[d.varIndicesStart]),l=!0):d.varIndicesStart>=0&&d.varIndicesStart+c.vin.length<d.startingVarIndices.length&&(c.vin.push(d.startingVarIndices[d.varIndicesStart+c.vin.length]),l=!0)}if(s)if(this.isGroupedData){for(p=0;p<n;p++)d.grpIndicesStart>=0&&d.grpIndicesStart+c.sin.length<d.startingGrpIndices.length?(c.sin.push(d.startingGrpIndices[d.grpIndicesStart+c.sin.length]),l=!0):d.grpIndicesStart>0&&(d.grpIndicesStart--,c.sin.unshift(d.startingGrpIndices[d.grpIndicesStart]),l=!0);for(p=0;p<o;p++)d.grpIndicesStart>0?(d.grpIndicesStart--,c.sin.unshift(d.startingGrpIndices[d.grpIndicesStart]),l=!0):d.grpIndicesStart>=0&&d.grpIndicesStart+c.sin.length<d.startingGrpIndices.length&&(c.sin.push(d.startingGrpIndices[d.grpIndicesStart+c.sin.length]),l=!0)}else{for(p=0;p<n;p++)d.smpIndicesStart>=0&&d.smpIndicesStart+c.sin.length<d.startingSmpIndices.length?(c.sin.push(d.startingSmpIndices[d.smpIndicesStart+c.sin.length]),l=!0):d.smpIndicesStart>0&&(d.smpIndicesStart--,c.sin.unshift(d.startingSmpIndices[d.smpIndicesStart]),l=!0);for(p=0;p<o;p++)d.smpIndicesStart>0?(d.smpIndicesStart--,c.sin.unshift(d.startingSmpIndices[d.smpIndicesStart]),l=!0):d.smpIndicesStart>=0&&d.smpIndicesStart+c.sin.length<d.startingSmpIndices.length&&(c.sin.push(d.startingSmpIndices[d.smpIndicesStart+c.sin.length]),l=!0)}}l&&this.drawIndicesAfterWheelEvent(t,i,c.vin,s,c.sin,h,c.idx)}},this.drawIndicesAfterWheelEvent=function(t,e,i,s,a,r,n){if(!this.isTransition()){var o=this.layoutComb?this.layoutParams[n]:this;e&&(o.varIndices=i),s&&(r&&this.setSamplesVisible(a,!0),o.isGroupedData?o.grpIndices=a:o.smpIndices=a),this.draw({func:"drawIndicesAfterWheelEvent",par:[t,e,i,s,a,r,n],prop:{varIndicesStart:this.varIndicesStart,smpIndicesStart:this.smpIndicesStart,grpIndicesStart:this.grpIndicesStart}})}},this.setRangesAfterWheelEvent=function(t,e){var i=this.getActiveLayoutIndicesMetadata(t);if(i&&!this.zoomDisable){var s,a,r,n,o=this.layoutComb?this.layoutParams[i.idx]:this,h=i.ac.x>this.marginLeft+o.offsetX+o.left&&i.ac.x<this.marginLeft+o.offsetX+o.left+o.x,l=i.ac.y>this.marginTop+o.offsetY+o.top&&i.ac.y<this.marginTop+o.offsetY+o.top+o.y,c=(o.xAxisMax-o.xAxisMin)*this.zoomStep*i.lcx,d=(o.yAxisMax-o.yAxisMin)*this.zoomStep*i.lcy,p=(o.xAxisMax-o.xAxisMin)*this.zoomStep*(1-i.lcx),g=(o.yAxisMax-o.yAxisMin)*this.zoomStep*(1-i.lcy);e>0?(h&&(s=this.setMinX=null!=o.setMinX?o.setMinX+c:o.xAxisMin+c,a=this.setMaxX=null!=o.setMaxX?o.setMaxX-p:o.xAxisMax-p),l&&"Genome"!=this.graphType&&(r=this.setMinY=null!=o.setMinY?o.setMinY+g:o.yAxisMin+g,n=this.setMaxY=null!=o.setMaxY?o.setMaxY-d:o.yAxisMax-d)):(h&&(s=this.setMinX=null!=o.setMinX?o.setMinX-c:o.xAxisMin-c,a=this.setMaxX=null!=o.setMaxX?o.setMaxX+p:o.xAxisMax+p),l&&"Genome"!=this.graphType&&(r=this.setMinY=null!=o.setMinY?o.setMinY-g:o.yAxisMin-g,n=this.setMaxY=null!=o.setMaxY?o.setMaxY+d:o.yAxisMax+d),this.graphType.match(/Scatter/)&&s<o.xAxisMin&&(s=o.xAxisMin,a=o.xAxisMax),this.graphType.match(/Scatter/)&&r<o.yAxisMin&&(r=o.yAxisMin,n=o.yAxisMax)),(s<=o.xAxisAbsMin||a>=o.xAxisAbsMax||r<=o.yAxisAbsMin||n>=o.yAxisAbsMax)&&e<0&&"Genome"!=this.graphType&&(this.setMinX=null,this.setMaxX=null,this.setMinY=null,this.setMaxY=null),"Infinity"!=o.setMinX&&"Infinity"!=o.setMaxX||(this.setMinX=s,this.setMaxX=a),"Infinity"!=o.setMinY&&"Infinity"!=o.setMaxY||(this.setMinY=r,this.setMaxY=n),this.drawRangesAfterWheelEvent(this.setMinX,this.setMaxX,this.setMinY,this.setMaxY,i.idx)}},this.drawRangesAfterWheelEvent=function(t,e,i,s,a){if(!this.isTransition()){if(this.scatterPlotMatrix&&this.scatterPlotMatrixType.match(/correlation|all/))for(var r=0,n=0;n<this.layoutRows;n++)for(var o=0;o<this.layoutCols;o++){var h=this.layoutParams[r];n==this.layoutValidR&&(h.setMinY=i,h.setMaxY=s),o==this.layoutValidC&&(h.setMinX=t,h.setMaxX=e),r++}else(h=this.layoutComb?this.layoutParams[a]:this).setMinX=t,h.setMaxX=e,h.setMinY=i,h.setMaxY=s;this.draw({func:"drawRangesAfterWheelEvent",par:[t,e,i,s,a]})}},this.setIndicesAfterPannEvent=function(t,e){var i,s,a=0,r=this.layoutComb?this.layoutParams[this.layoutValidN||0]:this,n=this.cloneObject(r.varIndices),o=r.isGroupedData?this.cloneObject(r.grpIndices):this.cloneObject(r.smpIndices),h=this.draggingOn?Math.max(1,Math.floor(n.length/10)):1,l=this.draggingOn?Math.max(1,Math.floor(o.length/10)):1;if(this.setOriginalIndices(this.layoutComb?this.layoutValidN:0,n,o),"Correlation"==this.graphType)switch(a=1,e){case 37:s=r.varIndicesStart>0?3:r.smpIndicesStart>0?4:1;break;case 39:s=r.varIndicesStart>-1?5:r.smpIndicesStart>-1?6:1}else"Heatmap"==this.graphType?a=2:this.graphType.match(/Bar|Line|Dotplot|Boxplot|Area|Stacked/)&&(a=3);switch(e){case 33:i=1==a?1:2==a||3==a?4:1;break;case 34:i=1==a?1:2==a||3==a?6:1;break;case 35:i=1;break;case 36:i=1==a?1:2==a?2:1;break;case 37:i=1==a?s:2==a?3:3==a?4:1;break;case 38:i=1==a?1:2==a||3==a?4:1;break;case 39:i=1==a?s:2==a?5:3==a?6:1;break;case 40:i=1==a?1:2==a||3==a?6:1}var c=!1;if(1==i)return!1;if(2==i)r.varIndicesStart=-1,r.smpIndicesStart=-1,r.grpIndicesStart=-1,r.varIndices=r.startingVarIndices,r.isGroupedData?r.grpIndices=r.startingGrpIndices:r.smpIndices=r.startingSmpIndices,c=!0;else if(3==i)for(var d=0;d<h;d++)r.varIndicesStart>0&&(n.unshift(r.startingVarIndices[r.varIndicesStart-1]),n.pop(),r.varIndicesStart--,c=!0);else if(4==i)if(this.isGroupedData)for(d=0;d<l;d++)r.grpIndicesStart>0&&(o.unshift(r.startingGrpIndices[r.grpIndicesStart-1]),o.pop(),r.grpIndicesStart--,c=!0);else for(d=0;d<l;d++)r.smpIndicesStart>0&&(o.unshift(r.startingSmpIndices[r.smpIndicesStart-1]),o.pop(),r.smpIndicesStart--,c=!0);else if(5==i)for(d=0;d<h;d++)r.varIndicesStart>-1&&r.varIndicesStart+n.length<r.startingVarIndices.length&&(n.push(r.startingVarIndices[r.varIndicesStart+n.length]),n.shift(),r.varIndicesStart++,c=!0);else if(6==i)if(this.isGroupedData)for(d=0;d<l;d++)r.grpIndicesStart>-1&&r.grpIndicesStart+o.length<r.startingGrpIndices.length&&(o.push(r.startingGrpIndices[r.grpIndicesStart+o.length]),o.shift(),r.grpIndicesStart++,c=!0);else for(d=0;d<l;d++)r.smpIndicesStart>-1&&r.smpIndicesStart+o.length<r.startingSmpIndices.length&&(o.push(r.startingSmpIndices[r.smpIndicesStart+o.length]),o.shift(),r.smpIndicesStart++,c=!0);c&&this.drawIndicesAfterPannEvent(t,n,o,this.layoutValidN||0)},this.setRangesAfterPannEvent=function(t,e){var i=this.getActiveLayoutIndicesMetadata(t);if(i){var s=this.layoutComb?this.layoutParams[i.idx]:this,a=s.xAxisRange*this.zoomStep,r=s.yAxisRange*this.zoomStep;switch(e){case 37:this.setMinX-=a,this.setMaxX-=a;break;case 38:this.setMinY+=r,this.setMaxY+=r;break;case 39:this.setMinX+=a,this.setMaxX+=a;break;case 40:this.setMinY-=r,this.setMaxY-=r}var n=this.showTransition;this.showTransition=!1,this.drawRangesAfterWheelEvent(this.setMinX,this.setMaxX,this.setMinY,this.setMaxY,i.idx),this.showTransition=n}},this.drawIndicesAfterPannEvent=function(t,e,i,s){if(!this.isTransition()){var a=this.layoutComb?this.layoutParams[s]:this;a.varIndices=e,a.isGroupedData?a.grpIndices=i:a.smpIndices=i,this.draw({func:"drawIndicesAfterPannEvent",par:[t,e,i,s],prop:{varIndicesStart:this.varIndicesStart,smpIndicesStart:this.smpIndicesStart,grpIndicesStart:this.grpIndicesStart}})}},this.addDragDiv=function(){if(!this.$(this.target+"-cX-Drag")){var t=this.$cX("div",{id:this.target+"-cX-Drag",className:"CanvasXpressDrag"},{width:"0px",height:"0px",zIndex:9e3});this.meta.canvas.ctx.canvas.parentNode.appendChild(t)}},this.addDragDivLayout=function(){if(!this.$(this.target+"-cX-Drag-Layout")){var t=this.$cX("div",{id:this.target+"-cX-Drag-Layout",className:"CanvasXpressDragLayout"},{width:"0px",height:"0px",zIndex:8900});this.meta.canvas.ctx.canvas.parentNode.appendChild(t)}},this.registerDragNetwork=function(t){var e,i,s,a=this.getRenderObjects(t),r=this.getRenderObjectIndices(a),n=this.getTargetEvent(t),o=t.shiftKey,h=this.adjustBackNetworkObjectX(this.xMouseDown),l=this.adjustBackNetworkObjectY(this.yMouseDown);if(r){var c=this.isArray(r)?r[0].toString():r.toString();if(c&&c.match(/-lab$/)?(o&&(i=!0),e=c.split("-")[0]):c&&c.match(/-dec$/)?o?(e=c.split("-")[0],s=!0):(this.resetDrag(t),this.resetFlags(t)):c&&c.match(/-elbow$/)?(r=c.replace("-elbow","").split(","),n.style.cursor="move",this.moveEdge=!0,this.moveEdgeIndex=r[0]-this.data.nodes.length,this.moveEdgeElbow=r[1]):c&&c.match(/-resize/)?(e=c.split("-")[0],this.resizeNode=c.split("-resize")[1]):e=r,this.moveEdge){var d=this.data.edges[this.moveEdgeIndex].elbows[this.moveEdgeElbow];this.moveEdgeX=d[0]-h,this.moveEdgeY=d[1]-l}else if(!isNaN(e)&&e<this.data.nodes.length){n.style.cursor="move",this.moveNode=!0,this.moveNodeIndex=e,i?this.moveNodeLab=!0:s&&(this.moveNodeDec=!0);var p=this.data.nodes[this.moveNodeIndex];this.moveNodeW=p.width?p.width:p.size?this.nodeSize*p.size:this.nodeSize,this.moveNodeH=p.height?p.height:p.size?this.nodeSize*p.size:this.nodeSize,this.moveNodeLab?(this.moveNodeX=null!=p.labelX?p.labelX-h:p.labelXi-h,this.moveNodeY=null!=p.labelY?p.labelY-l:p.labelYi-l):this.moveNodeDec?(this.moveNodeX=null!=p.decorationsX?p.decorationsX-h:p.decorationsXi-h,this.moveNodeY=null!=p.decorationsY?p.decorationsY-l:p.decorationsYi-l):(this.moveNodeX=p.x-h,this.moveNodeY=p.y-l)}}},this.registerDragGenome=function(t){var e=this.getRenderObjects(t,!0),i=this.getRenderObjectIndices(e);i&&isNaN(i[0][0])?this.moveGenome=i[0][0]:this.moveGenome=!1},this.registerDragCircular=function(t){var e=this.getRenderObjects(t,!0),i=this.getRenderObjectIndices(e);this.moveCircular=!!i&&{id:i,x:this.cx,y:this.cy,ac:this.adjustedCoordinates(t),ring:i[0].toString().match("Ring")?Number(i[0].toString().split(":")[1]).toString():null}},this.registerDragScatter=function(t){var e=this.getRenderObjects(t,!0),i=this.getRenderObjectIndices(e),s=this.xMouseDown,a=this.yMouseDown;i&&this.isArray(i)&&(i=i[0].toString()),i&&i.match(/-legend-/)&&(i.match(/-legend-sample/)?(ml="sample",mx=this.legend.sample.curX-s,my=this.legend.sample.curY-a):i.match(/-legend-variable/)?(ml="variable",mx=this.legend.variable.curX-s,my=this.legend.variable.curY-a):i.match(/-legend-color/)?(ml="color",mx=this.legend.color.curX-s,my=this.legend.color.curY-a):i.match(/-legend-size/)?(ml="size",mx=this.legend.size.curX-s,my=this.legend.size.curY-a):i.match(/-legend-shape/)?(ml="shape",mx=this.legend.shape.curX-s,my=this.legend.shape.curY-a):i.match(/-legend-pattern/)?(ml="pattern",mx=this.legend.pattern.curX-s,my=this.legend.pattern.curY-a):i.match(/-legend-decoration/)?(ml="decoration",mx=this.legend.decoration.curX-s,my=this.legend.decoration.curY-a):(ml=this.moveLegend,mx=this.moveLegendX,my=this.moveLegendY),this.moveLegend=ml,this.moveLegendX=mx,this.moveLegendY=my)},this.isLegend=function(t){var e=this.getRenderObjects(t),i=this.getRenderObjectIndices(e);i&&!this.isArray(i)&&i.match(/legend/)&&this.registerDragScatter(t)},this.isMarkerDrag=function(t,e,i){var s=this.getRenderObjects(t),a=this.getRenderObjectIndices(s);if(a&&this.isArray(a)&&a[0].toString().match(/^Marker/)){var r=a[0].split(":");this.skipClick=!1,this.draggingOn=!0,this.xMouseDown=e,this.yMouseDown=i;var n=this.getMarker(r[1]);n&&(this.moveMarker=r[1],this.moveMarkerX=n.curX-e,this.moveMarkerY=n.curY-i,n.position=!1,this.draw({func:"isMarkerDrag",par:[t,e,i],prop:{moveMarker:this.moveMarker}}))}},this.registerSankey=function(t,e,i){var s=this.getRenderObjects(t,!0),a=this.getRenderObjectIndices(s);if(a&&a[0]&&a[0].toString().match(/^Sankey/)){var r=a[0].toString().split(":"),n=this.data.sankey.nodes[r[2]];this.skipClick=!1,this.draggingOn=!0,this.xMouseDown=e,this.yMouseDown=i,this.moveSankey=n,this.moveSankeyId=r[2],this.moveSankeyMin=n.y,this.moveSankeyX=n.x,this.moveSankeyY=i;for(var o=[],h=0;h<this.data.sankey.nodes.length;h++){var l=this.data.sankey.nodes[h];l.breadth==this.moveSankey.breadth&&o.push({idx:h,id:l.id,y:l.y,dy:l.dy})}this.moveSankeyOrder=o.sort((function(t,e){return t.y-e.y}))}},this.registerMap=function(t,e,i){this.skipClick=!1,this.draggingOn=!0,this.xMouseDown=e,this.yMouseDown=i,this.moveMap=!0},this.registerDrag=function(t){if(this.isCanvasResize(t))this.resizingCanvasOn=!0;else{if(this.isDOE){var e=this.getTargetEvent(t),i=t.shiftKey;return(s=this.adjustedCoordinates(t))&&(this.xMouseDown=s.x,this.yMouseDown=s.y,this.skipClick=!0),!1}if(!t)return!1;this.touches||(this.touches=[]);var s;e=this.getTargetEvent(t),i=t.shiftKey;if(s=this.adjustedCoordinates(t)){CanvasXpress.current=e.id;for(var a=s.x,r=s.y,n=0,o=0;o<this.layoutRows;o++)for(var h=0;h<this.layoutCols;h++){if(!this.layoutComb||n<this.data.l.weight.length){var l=this.layoutComb?this.layoutParams[n].graphType:this.graphType,c=this.getBoundsXY(n);if(this.isMarkerDrag(t,a,r),this.moveMarker)return!1;if(l.match(/Pie|Venn|Stacked|Area|Treemap|TagCloud|ParallelCoordinates|Tree|Gantt|Meter|Fish/)){if(!CanvasXpress.system.isTouchScreen)return this.isLegend(t),!1;if(a>=c[0]&&a<=c[1]&&r>=c[2]&&r<=c[3]||this.moveGenome)return this.skipClick=!1,this.draggingOn=!0,this.xMouseDown=a,this.yMouseDown=r,t.touches&&(this.touches[0]=this.cleanTouchEvent(t.touches[0])),!1}else if("Genome"==l)this.registerDragGenome(t);else if("Circular"==l)this.registerDragCircular(t);else{if("Sankey"==l)return this.registerSankey(t,a,r),!1;if("Map"==l)return this.registerMap(t,a,r),!1}if(a>=c[0]&&a<=c[1]&&r>=c[2]&&r<=c[3]||this.moveGenome){if(this.skipClick=!1,this.draggingOn=!0,this.xMouseDown=a,this.yMouseDown=r,t.touches&&(this.touches[0]=this.cleanTouchEvent(t.touches[0])),"Correlation"==l)return!1;if(l.match(/Network/)&&this.lassoSelected)return void(this.lassoPoints=[[a],[r]]);if(l.match(/Scatter/)){if(this.lassoSelected)return void(this.lassoPoints=[[a],[r]]);if(this.registerDragScatter(t),this.moveLegend)return!1}if(!l.match(/Network|Genome|Venn|Correlation|Scatter/)&&(this.isLegend(t),this.moveLegend))return!1;var d=this.$(this.target+"-cX-Drag");return"Network"==l&&this.registerDragNetwork(t),!l.match(/Scatter|Heatmap|Network|Genome|Circular/)&&"vertical"==this.graphOrientation&&!i||!l.match(/Scatter|Heatmap|Network|Genome|Circular/)&&"vertical"!=this.graphOrientation&&i?d.style.left=c[0]+"px":d.style.left=this.xMouseDown+"px",!l.match(/Scatter|Heatmap|Network|Genome|Circular/)&&"vertical"!=this.graphOrientation&&!i||!l.match(/Scatter|Heatmap|Network|Genome|Circular/)&&"vertical"==this.graphOrientation&&i||"Genome"==l?d.style.top=c[2]+"px":d.style.top=this.yMouseDown+"px",this.layoutValid&&(this.layoutValidR=o,this.layoutValidC=h,this.layoutValidN=n,this.layoutValidBounds=c),!1}if(a>=c[4]&&a<=c[5]&&r>=c[6]&&r<=c[7]){var p=this.getRenderObjects(t),g=this.getRenderObjectIndices(p);if(g){if(this.skipClick=!1,this.draggingOn=!0,this.xMouseDown=a,this.yMouseDown=r,t.touches&&(this.touches[0]=this.cleanTouchEvent(t.touches[0])),"Correlation"==l)return!1;if(l.match(/Scatter/)){if(this.lassoSelected)return void(this.lassoPoints=[[a],[r]]);if(this.registerDragScatter(t),this.moveLegend)return!1}if(!l.match(/Network|Genome|Venn|Correlation|Scatter/)&&(this.isLegend(t),this.moveLegend))return!1;d=this.$(this.target+"-cX-Drag");return g[0].toString().match(/^varDendrogram|^smpDendrogram/)?(this.moveDendrogram=g[0].split(":")[0],e.style.cursor="move",g[0].match(/^varDendrogram/)||g[0].match(/^smpDendrogram/)&&"vertical"==this.graphOrientation?(d.style.left=c[4]+"px",d.style.width=c[5]-c[4]+"px",d.style.height="3px"):(d.style.width="3px",d.style.top=c[6]+"px",d.style.height=c[7]-c[6]+"px")):g[0].toString().match("SmpOverlay")?(this.moveSmpOverlay=g[0],e.style.cursor="move",l.match(/Heatmap/)||"horizontal"==this.graphOrientation?(d.style.width="3px",d.style.top=c[6]+"px",d.style.height=c[7]-c[6]+"px"):(d.style.left=c[4]+"px",d.style.width=c[5]-c[4]+"px",d.style.height="3px")):g[0].toString().match("Smp")?(this.moveSmp=g[0],e.style.cursor="move",l.match(/Heatmap/)||"horizontal"==this.graphOrientation?(d.style.left=c[4]+"px",d.style.width=c[5]-c[4]+"px",d.style.height="3px"):(d.style.width="3px",d.style.top=c[6]+"px",d.style.height=c[7]-c[6]+"px")):g[0].toString().match("VarOverlay")?(this.moveVarOverlay=g[0],e.style.cursor="move",d.style.left=c[4]+"px",d.style.width=c[5]-c[4]+"px",d.style.height="3px"):g[0].toString().match("Var")&&(this.moveVar=g[0],e.style.cursor="move",d.style.width="3px",d.style.top=c[6]+"px",d.style.height=c[7]-c[6]+"px"),!1}}}n++}return!1}}},this.updateDragCircular=function(t,e,i,s,a,r){if(!this.isTransition()){if(this.moveCircular){s=this.moveCircular;var n=this.ringInfo;if(null!=s.ring){for(var o,h=n.length-1,l=(n[s.ring],this.euclidianDistance([s.x,s.y],[e,i])),c=h;c>=0;c--)if(n[c]>l){o=c,s.last=c.toString();break}var d=this.$(this.target+"-cX-Drag");d&&(d.style.width=2*n[o]+"px",d.style.height=2*n[o]+"px",d.style.left=s.x-(n[o]+3)+"px",d.style.top=s.y-(n[o]+3)+"px",d.style.borderRadius="50%",d.style.backgroundColor="rgba(0,0,0,0)",d.style.border="3px solid black")}else{var p=180*Math.atan2(a-this.cx,r-this.cy)/Math.PI+this.circularRotate-180*Math.atan2(e-this.cx,i-this.cy)/Math.PI;this.circularRotate=p}}else this.panningX-=this.xMouseDown-e,this.panningY-=this.yMouseDown-i;this.xMouseDown=e,this.yMouseDown=i,this.skipTransition=!0,this.draw({func:"updateDragCircular",par:[t,e,i,s,a,r],prop:{circularRotate:this.circularRotate,moveCircular:this.moveCircular,panningX:this.panningX,panningY:this.panningY,xMouseDown:this.xMouseDown,yMouseDown:this.yMouseDown}}),this.skipClick=!0}},this.updateDragScatter3D=function(t,e,i,s,a){if(!this.isTransition()){var r=s,n=a,o=t,h=e,l=this.layoutComb?this.layoutParams[i].x:this.x,c=this.layoutComb?this.layoutParams[i].y:this.y,d=(o-r)*this.rotationSensitivity/l,p=(h-n)*this.rotationSensitivity/c;this.xRotate-=d,this.yRotate+=p,this.xMouseDown=t,this.yMouseDown=e,this.skipTransition=!0,this.draw({func:"updateDragScatter3D",par:[t,e,i,s,a]})}},this.updateDragScatter=function(t,e){if(!this.isTransition()){if(this.lassoSelected)this.lassoPoints[0].push(t),this.lassoPoints[1].push(e);else if(this.resizeLegend){var i=t-this.xMouseDown,s=e-this.yMouseDown;this.heatmapIndicatorWidth+=parseInt(i/10),this.heatmapIndicatorHeight+=parseInt(s/10),this.heatmapIndicatorWidth=Math.max(10,this.heatmapIndicatorWidth),this.heatmapIndicatorHeight=Math.max(10,this.heatmapIndicatorHeight)}else{var a=this.moveLegend;i=this.legend[a].curX-t-this.moveLegendX,s=this.legend[a].curY-e-this.moveLegendY;this.legend[a].curX-=i,this.legend[a].curY-=s,this.legend[a].x=this.legend[a].curX,this.legend[a].y=this.legend[a].curY}this.skipTransition=!0,this.lassoSelected||this.draw({func:"updateDragScatter",par:[t,e],prop:{moveLegend:this.moveLegend,moveLegendX:this.moveLegendX,moveLegendY:this.moveLegendY}}),this.skipClick=!0}},this.updateDragNetwork=function(t,e,i){if(!this.isTransition())if(this.lassoSelected)this.lassoPoints[0].push(e),this.lassoPoints[1].push(i);else{var s,a,r,n,o,h,l,c,d,p,g,u,m,f,y,x={},v=this.data,b=this.moveNodeX,A=this.moveNodeY,w=this.moveNodeW,C=this.moveNodeH,T=t.shiftKey,S=t.ctrlKey;this.movingOn=!0;var M=this.adjustBackNetworkObjectX(e),D=this.adjustBackNetworkObjectY(i),k=this.getTargetEvent(t),L=this.adjustNetworkMouseDownX(e),I=this.adjustNetworkMouseDownY(i);if(k&&(k.style.cursor=T?"se-resize":"move"),this.moveNode||this.moveEdge||this.moveLegend){if(this.moveLegend)h=v.legend,this.moveLegend.match("Text")?(z=parseInt(this.moveLegend.replace("Text","")),a=h.text[z].x-M-this.moveLegendX,r=h.text[z].y-D-this.moveLegendY,h.text[z].x-=a,h.text[z].y-=r):(z=this.moveLegend.toLowerCase(),a=h.pos[z].x-M-this.moveLegendX,r=h.pos[z].y-D-this.moveLegendY,h.pos[z].x-=a,h.pos[z].y-=r);else if(v.edges[this.moveEdgeIndex])a=(l=v.edges[this.moveEdgeIndex].elbows[this.moveEdgeElbow])[0]-M-this.moveEdgeX,r=l[1]-D-this.moveEdgeY,this.modifyXYEdgeElbow(this.moveEdgeIndex,this.moveEdgeElbow,a,r);else if(v.nodes[this.moveNodeIndex])if(s=v.nodes[this.moveNodeIndex],this.moveNodeLab)a=null!=s.labelX?s.labelX-M-b:s.labelXi-M-b,r=null!=s.labelY?s.labelY-D-A:s.labelYi-D-A,this.modifyXYNodeLab(s.id,a,r);else if(this.moveNodeDec)a=null!=s.decorationsX?s.decorationsX-M-b:s.decorationsXi-M-b,r=null!=s.decorationsY?s.decorationsY-D-A:s.decorationsYi-D-A,this.modifyXYNodeDec(s.id,a,r);else if(a=s.x-M-b,r=s.y-D-A,T&&!t.ctrlKey)for(var z in n=w-a+L,o=C-r+I,this.modifyNodeSize(s.id,Math.abs(n),Math.abs(o)),CanvasXpress.selector.nodes)z!=s.id&&this.modifyNodeSize(z,n,o);else{if(this.resizeNode){switch(d=null!=s.rotate?s.rotate:0,this.resizeNode){case"ROT":d=180-180*Math.atan2(M-s.x,D-s.y)/Math.PI,n=w,o=C,a=0,r=0;break;case"TL":n=T?w-a+L:w-L,o=T?C-r+I:C-I,a+=L/2,r+=I/2;break;case"TR":n=T?w-a+L:w+L,o=T?C-r+I:C-I,a+=L/2,r+=I/2;break;case"BL":n=T?w-a+L:w-L,o=T?C-r+I:C+I,a+=L/2,r+=I/2;break;case"BR":n=T?w-a+L:w+L,o=T?C-r+I:C+I,a+=L/2,r+=I/2;break;case"TM":n=T?w-a+L:w,o=T?C-r+I:C-I,a=0,r+=I/2;break;case"BM":n=T?w-a+L:w,o=T?C-r+I:C+I,a=0,r+=I/2;break;case"ML":n=T?w-a+L:w-L,o=T?C-r+I:C,a+=L/2,r=0;break;case"MR":n=T?w-a+L:w+L,o=T?C-r+I:C,a+=L/2,r=0}p=this.getNodeWidth(s),g=this.getNodeHeight(s),u=Math.abs(n)/p,m=Math.abs(o)/g,f=(Math.abs(n)-p)/2,y=(Math.abs(o)-g)/2}if(c=this.findParentNodes(s.id),"radial"!=this.networkLayoutType&&(this.moveParentsWithChildren&&!T&&!S||!this.moveParentsWithChildren&&T&&S)&&c&&(s=v.nodes[v.nodeIndices[c[0]]]),this.modifyXYNode(s.id,a,r),null!=s.community&&this.networkConvexHulls[s.community].nodes&&S)for(var N=0;N<this.networkConvexHulls[s.community].nodes.length;N++)if(this.networkConvexHulls[s.community].nodes[N]!=this.moveNodeIndex){var B=v.nodes[this.networkConvexHulls[s.community].nodes[N]];this.modifyXYNode(B.id,a,r)}if(null!=d&&(s.rotate=d),CanvasXpress.selector.nodes.hasOwnProperty(s.id)||S){if(S&&!CanvasXpress.selector.nodes.hasOwnProperty(s.id)&&this.addRemoveToSelected({nodes:[s]},!1,t),x[s.id]=!0,c=this.findChildrenNodeIndices(s.id))for(N=0;N<c.length;N++)x[v.nodes[c[N]].id]=!0;for(var z in CanvasXpress.selector.nodes)if(!x.hasOwnProperty(z)){B=v.nodes[v.nodeIndices[z]];if(c=this.findParentNodes(B.id),"radial"!=this.networkLayoutType&&(this.moveParentsWithChildren&&!T&&!S||!this.moveParentsWithChildren&&T&&S)&&c&&(B=v.nodes[v.nodeIndices[c[0]]]),this.resizeNode){switch(p=this.getNodeWidth(B),g=this.getNodeHeight(B),this.resizeNode){case"ROT":f=0,y=0}this.modifyXYNode(B.id,-f,-y)}else this.modifyXYNode(B.id,a,r);if(x[B.id]=!0,c=this.findChildrenNodeIndices(B.id),null!=d&&(B.rotate=d),c)for(N=0;N<c.length;N++)x[v.nodes[c[N]].id]=!0}}else this.resetSelected(t);if(this.resizeNode)for(var z in this.modifyNodeSize(s.id,Math.abs(n),Math.abs(o)),CanvasXpress.selector.nodes)if(z!=s.id){B=v.nodes[v.nodeIndices[z]];this.modifyNodeSize(z,this.getNodeWidth(B)*u,this.getNodeHeight(B)*m)}}}else this.panningX=L,this.panningY=I;this.skipClick=null!=a||null!=r,this.skipTransition=!0,this.draw({network:!0,func:"updateDragNetwork",par:[t,e,i],prop:{moveLegend:this.moveLegend,moveLegendX:this.moveLegendX,moveLegendY:this.moveLegendY,moveEdge:this.moveEdge,moveEdgeIndex:this.moveEdgeIndex,moveEdgeElbow:this.moveEdgeElbow,moveNode:this.moveNode,moveNodeIndex:this.moveNodeIndex,moveNodeLab:this.moveNodeLab,moveNodeDec:this.moveNodeDec,moveNodeW:this.moveNodeW,moveNodeH:this.moveNodeH,moveNodeX:this.moveNodeX,moveNodeY:this.moveNodeY,xMouseDown:this.xMouseDown,yMouseDown:this.yMouseDown}}),this.is3DNetwork&&s&&(this.moveNodeIndex=v.nodeIndices[s.id])}},this.updateDragGenome=function(t,e){if(!this.isTransition())if(this.moveGenome){this.movingOn=!0,(i=this.$(this.target+"-cX-Drag")).style.left="0px",i.style.width=this.width+"px",i.style.top=e+"px",i.style.height="3px"}else{var i=(t-this.xMouseDown)/this.xAxisUnit;null==this.setMinX&&(this.setMinX=this.xAxisMin),null==this.setMaxX&&(this.setMaxX=this.xAxisMax),this.setMinX-=i,this.setMaxX-=i,this.skipTransition=!0,this.draw({func:"updateDragGenome",par:[t,e],prop:{moveGenome:this.moveGenome,setMinX:this.setMinX,setMaxX:this.setMaxX,xMouseDown:this.xMouseDown}}),this.xMouseDown=t}},this.updateDragMap=function(t,e){this.isTransition()||this.moveMap&&(this.panningX-=this.xMouseDown-t,this.panningY-=this.yMouseDown-e,this.xMouseDown=t,this.yMouseDown=e,this.skipTransition=!0,this.draw({func:"updateDragMap",par:[t,e],prop:{moveMap:this.moveMap,panningX:this.panningX,panningY:this.panningY,xMouseDown:this.xMouseDown,yMouseDown:this.yMouseDown}}),this.skipClick=!0)},this.updateDragMarker=function(t,e){if(!this.isTransition()){var i=this.getMarker(this.moveMarker),s=i.curX-t,a=i.curY-e;i.curX-=s,i.curY-=a,this.moveMarkerX=i.curX,this.moveMarkerY=i.curY;var r=this.layoutValid?this.layoutValidBounds[0]:this.left,n=this.layoutValid?this.layoutValidBounds[2]:this.top,o=this.layoutValid?this.layoutValidBounds[1]-this.layoutValidBounds[0]:this.x,h=this.layoutValid?this.layoutValidBounds[3]-this.layoutValidBounds[2]:this.y;i.x=Math.max(.01,Math.min((i.curX-r)/o,.99)),i.y=Math.max(.01,Math.min((i.curY-n)/h,.99)),this.skipTransition=!0,this.drawMarkers(!0),this.skipClick=!0}},this.resetSankey=function(){delete this.moveSankey,delete this.moveSankeyId,delete this.moveSankeyY,delete this.moveSankeyMin,delete this.moveSankeyOrder},this.updateDragSankey=function(t,e){this.moveSankey=this.data.sankey.nodes[this.moveSankeyId];var i=Math.max(-this.moveSankey.y,Math.min(this.y-(this.moveSankey.y+this.moveSankey.dy),e-this.moveSankeyY));this.moveSankey.y+=i,this.moveSankeyY=e,this.resortSankey()},this.resortSankey=function(t){if(!this.isTransition()){var e=[],i=this.moveSankeyMin,s=0;this.moveSankey=this.data.sankey.nodes[this.moveSankeyId];for(var a=0;a<this.data.sankey.nodes.length;a++){(r=this.data.sankey.nodes[a]).breadth==this.moveSankey.breadth&&(e.push({idx:a,id:r.id,y:r.y,dy:r.dy}),i=Math.min(i,r.y),s+=r.dy+this.margin)}if(i+s-this.margin>this.y&&(i=this.y-(s-this.margin)),e.sort((function(t,e){return t.y-e.y})),(this.reproducing||this.afterRendering)&&(e=this.moveSankeyOrder),!this.isSameObject(e,this.moveSankeyOrder)||t)for(a=0;a<e.length;a++){var r;((r=this.data.sankey.nodes[e[a].idx]).id!=this.moveSankey.id||t)&&(r.y=i),i+=r.dy+this.margin}this.data.sankey.object.relayout(),this.skipStack=!!this.reproducing||!t,this.draw({func:"resortSankey",par:[t],prop:{moveSankeyId:this.moveSankeyId,moveSankeyY:this.moveSankeyY,moveSankeyMin:i,moveSankeyOrder:e}}),this.skipStack=!1}},this.updateDrag=function(t){if(this.draggingOn){var e=this;if(this.resetOn)return this.resetOn=!1,void this.stopEvent(t);var i=t.shiftKey,s=t.ctrlKey,a=t.altKey,r=this.adjustedCoordinates(t);if(r){this.touchEvent="drag";var n=r.x,o=r.y,h=(this.layoutValidR,this.layoutValidC,this.layoutValidN||0),l=(this.layoutValidBounds,(e=this.layoutComb?this.layoutParams[h]:this).graphType);if("Scatter3D"!=l&&!this.lassoSelected&&this.showMousePositionOnDrag&&this.showMousePosition(t),CanvasXpress.system.isTouchScreen)return o<this.yMouseDown||n>this.xMouseDown?this.handleWheelEvent(t,1,r):this.handleWheelEvent(t,-1,r),!1;if(this.moveMarker)return this.updateDragMarker(n,o),!1;if(l.match(/Pie|Venn|Stacked|Area|Treemap|TagCloud|ParallelCoordinates|Tree|Gantt|Meter|Fish/)){if(CanvasXpress.system.isTouchScreen&&(this.movingOn=!0,this.resetOn=!1),l.match(/Network|Genome|Venn|Correlation|Gantt|Scatter/)||!this.moveLegend)return!1;this.updateDragScatter(n,o),this.movingOn=!0,this.resetOn=!1}if("Sankey"==l)this.updateDragSankey(n,o);else if(l.match(/Scatter/)&&(this.moveLegend||this.lassoSelected))this.updateDragScatter(n,o);else if(!l.match(/Network|Genome|Venn|Correlation|Scatter/)&&this.moveLegend)this.updateDragScatter(n,o);else if("Scatter3D"==l&&!i||this.is3DPlot)this.updateDragScatter3D(n,o,h,this.xMouseDown,this.yMouseDown);else if("Circular"==l)this.moveLegend?(this.updateDragScatter(n,o),this.movingOn=!0,this.resetOn=!1):this.updateDragCircular(t,n,o,h,this.xMouseDown,this.yMouseDown);else if("Network"!=l||!this.moveNode&&!this.moveLegend&&(s||i||a))if("Genome"!=l||!this.moveGenome&&i)if("Map"==l)this.updateDragMap(n,o);else if(this.moveDendrogram){var c=this.getBoundsXY(h),d=this.$(this.target+"-cX-Drag");this.skipClick=!0,n>=c[4]&&n<=c[5]&&o>=c[6]&&o<=c[7]&&("varDendrogram"==this.moveDendrogram||"smpDendrogram"==this.moveDendrogram&&"vertical"==this.graphOrientation?d.style.top=o+"px":d.style.left=n+"px")}else if(this.moveVarOverlay||this.moveSmpOverlay){c=this.getBoundsXY(h),d=this.$(this.target+"-cX-Drag");this.skipClick=!0,n>=c[4]&&n<=c[5]&&o>=c[6]&&o<=c[7]&&(this.moveSmpOverlay&&(l.match(/Heatmap/)||"horizontal"==this.graphOrientation)?d.style.left=n+"px":d.style.top=o+"px")}else if(this.moveVar||this.moveSmp){c=this.getBoundsXY(h),d=this.$(this.target+"-cX-Drag");this.skipClick=!0,n>=c[4]&&n<=c[5]&&o>=c[6]&&o<=c[7]&&(this.moveSmp&&(l.match(/Heatmap/)||"horizontal"==this.graphOrientation)?d.style.top=o+"px":d.style.left=n+"px")}else{var p;if(p=e.varIndicesStart>0||e.smpIndicesStart>0||e.grpIndicesStart>0||(0==e.varIndicesStart&&e.startingVarIndices&&e.startingVarIndices?e.varIndicesStart+e.varIndices.length<e.startingVarIndices.length:this.isGroupedData&&0==e.grpIndicesStart&&e.startingGrpIndices&&e.startingGrpIndices?e.grpIndicesStart+e.grpIndices.length<e.startingGrpIndices.length:0==e.smpIndicesStart&&e.startingSmpIndices&&e.startingSmpIndices?e.smpIndicesStart+e.smpIndices.length<e.startingSmpIndices.length:!!function(t){var e=t.meta.config.user,i=null!=t.setMinX&&null!=t.setMinY&&null!=t.setMaxX&&null!=t.setMaxY,s=null!=e.setMinX&&null!=e.setMinY&&null!=e.setMaxX&&null!=e.setMaxY;return!(t.graphType.match(/Scatter/)&&"visium"==t.scatterType&&!t.visiumPanning)&&(!s&&!!i)}(this)),l.match(/Heatmap|Bar|Line|Dotplot|Boxplot|Correlation|Scatter/)&&p){this.panningOn=!0;var g=Math.abs(this.xMouseDown-n),u=Math.abs(this.yMouseDown-o);d=!1;return g>u?g>this.x/20&&(d=this.xMouseDown>n?39:37,this.xMouseDown=n,this.yMouseDown=o):u>this.y/20&&(d=this.yMouseDown>o?40:38,this.xMouseDown=n,this.yMouseDown=o),d&&this.handlePanning(t,d),this.movingOn=!0,this.resetOn=!1,!1}if(l.match(/Correlation/))return!1;c=this.getBoundsXY(h);var m=l.match(/Scatter|Heatmap|Network|Genome|Circular/),f="vertical"==this.graphOrientation;d=this.$(this.target+"-cX-Drag");this.skipClick=!0,!m&&f&&!i||!m&&!f&&i?d.style.width=c[1]-c[0]+"px":n>this.xMouseDown?n>c[1]?d.style.width=c[1]-this.xMouseDown+"px":d.style.width=n-this.xMouseDown+"px":n<c[0]?(d.style.left=c[0]+"px",d.style.width=this.xMouseDown-c[0]+"px"):(d.style.left=n+"px",d.style.width=this.xMouseDown-n+"px"),!m&&!f&&!i||!m&&f&&i||"Genome"==l?d.style.height=c[3]-c[2]+"px":o>this.yMouseDown?o>c[3]?d.style.height=c[3]-this.yMouseDown+"px":d.style.height=o-this.yMouseDown+"px":o<c[2]?(d.style.top=c[2]+"px",d.style.height=this.yMouseDown-c[2]+"px"):(d.style.top=o+"px",d.style.height=this.yMouseDown-o+"px")}else this.updateDragGenome(n,o);else this.updateDragNetwork(t,n,o)}this.movingOn=!0,this.resetOn=!1}},this.endDrag=function(t){if(this.draggingOn){if(this.isTransition())return;var e=this.layoutComb?this.layoutParams[this.layoutValidN||0].graphType:this.graphType;if(e.match(/Venn|Stacked|Area|Treemap|TagCloud|ParallelCoordinates|Tree|Gantt|Meter|Fish/)&&!this.userEvents.drag)return!1;var i=this.$(this.target);if(i){i.style.cursor="default";var s=this.getTargetEvent(t);s&&s.style&&(s.style.cursor="default")}if(this.panningGlobalX+=this.panningX,this.panningGlobalY+=this.panningY,this.resetMousePosition(),"Circular"!=e&&"Map"!=e&&(this.panningX=0,this.panningY=0),this.moveMarker)this.resetDrag(),this.moveMarker=!1,this.draw({func:"endDrag",par:[t]});else if(this.moveSankeyId)this.resortSankey(!0),this.resetDrag();else if("Scatter3D"==e&&!t.shiftKey||this.is3DPlot)this.resetDrag(t);else if("Network"==e&&(this.moveNode||this.moveEdge||this.moveLegend))i&&this.endDragNetwork(t);else if("Genome"!=e||!this.moveGenome&&t.shiftKey){if(e.match(/Scatter/)&&this.moveLegend)this.resetDrag(t);else if("Circular"==e)this.handleDragEvent(t),this.resetDrag(t);else if("Map"==e)this.skipTransition=!1,this.skipClick=!1;else if(this.moveLegend)this.resetDrag(t);else if(this.movingOn&&!this.panningOn){if(c=this.adjustedCoordinates(t)){var a=c.x;l=c.y;if(a!=this.xMouseDown||l!=this.yMouseDown){p=this.$(this.target+"-cX-Drag"),a=this.lassoSelected||"Scatter3D"==this.graphType;var r=parseFloat(p.style.left),n=parseFloat(p.style.top),o=r+parseInt(p.style.width),h=n+parseInt(p.style.height);this.handleDragEvent(t,r,n,o,h),this.resetDrag(t,a)}}}else this.resetDrag(t)}else{if(this.movingOn&&this.moveGenome){var l,c=this.adjustedCoordinates(t),d=this.subtracksInfo;if(c)if((l=c.y)!=this.yMouseDown)for(var p=this.moveGenome.replace("track-","").split(":"),g=parseInt(p[0]),u=p.length>1?parseInt(p[1]):null,m=0;m<d.length;m++)if(d[m]){var f=d[m].start,y=d[m].track,x=d[m].index;if(f>l){if(g!=y&&g!=y-1){y>g&&y--;var v=this.data.tracks.splice(g,1)[0];this.data.tracks.splice(y,0,v),v=this.meta.data.tracks.splice(g,1)[0],this.meta.data.tracks.splice(y,0,v),this.draw({func:"endDrag",par:[t]})}else if(null!=u&&(g==y-1&&(x=d[m-1].index,x++),(u=d[u].index)!=x)){x>u&&x--;v=this.data.tracks[g].data.splice(u,1)[0];this.data.tracks[g].data.splice(x,0,v),this.draw({func:"endDrag",par:[t]})}break}}}this.resetDrag(t)}}else this.resetDrag(t);this.userEvents.drag&&this.userEvents.drag.call(this,t,this)},this.endDragNetwork=function(t){if(CanvasXpress.selector.selections&&this.movingOn&&(this.resetSelected(t),this.draw({func:"endDragNetwork",par:[t]})),this.userEvents.enddragnode&&this.movingOn){var e;if(this.moveLegend)e={legend:this.moveLegend};else{var i=this.moveNodeIndex,s=this.findChildrenNodeIndices(this.data.nodes[i].id);s?s.push(i):s=[i],e=this.extractDataObject(s)}this.resetDrag(t),this.userEvents.enddragnode.call(this,e,this)}else this.resetDrag(t)},this.validateMinMax=function(t,e,i,s){return!isNaN(t)&&!isNaN(e)&&!(t>e||i>t||s<e)},this.handleDragEventCircular=function(t){if(!this.isTransition()&&this.moveCircular&&this.isDragNotClick(this.adjustedCoordinates(t),this.moveCircular.ac)){var e=this.ringsOrder,i=e.splice(this.moveCircular.ring,1);e.splice(this.moveCircular.last,0,i[0]),this.draw({func:"handleDragEventCircular",par:[t]}),this.skipClick=!1}},this.handleDragEventNetwork=function(t,e,i,s,a){if(!this.isTransition()){for(var r={},n=[],o=[],h=[],l=[],c={},d=[],p=0;p<this.meta.render.objects.length;p++){var g=this.meta.render.objects[p];(this.lassoSelected?null!=g.idx&&this.isAreaInsidePolygon(g.area,this.lassoPoints):null!=g.idx&&this.isObjectInsideArea(g.area,e,i,s,a))&&g.idx[0]<this.data.nodes.length&&(r[g.idx[0]]=1)}for(p=0;p<this.data.nodes.length;p++)r[p]?(o.push(this.data.nodes[p].id),d.push(this.data.nodes[p]),h.push(p)):n.push(this.data.nodes[p].id);if(n.length<this.data.nodes.length&&(t.shiftKey?(t.ctrlKey||this.resetSelected(t,!0),this.addRemoveToSelected(!1,{nodes:d},t),this.broadcastDraw({func:"handleDragEventNetwork",par:[t,e,i,s,a]}),this.draggingOn=!1,this.showInfoSpan(t,"While mouse-over nodes:<br>1. Press Shift and drag mouse to resize nodes<br>2. Drag mouse to move nodes")):(this.resetZoomPan(),this.hideUnhideNodes(n,!0),this.translateCanvas(-this.offsetX,-this.offsetY),this.scaleCanvas(1/this.scaleFactorX,1/this.scaleFactorY),this.draw({network:!0,func:"handleDragEventNetwork",par:[t,e,i,s,a]})),this.showDataTableOnSelect))if("edges"==this.networkShowDataTable){for(p=0;p<o.length;p++)c[o[p]]=1;for(p=0;p<this.data.edges.length;p++)(c[this.data.edges[p].id1]||c[this.data.edges[p].id2])&&l.push(this.data.nodes.length+p);this.updateDataTable(this.extractDataObject(l))}else this.updateDataTable(this.extractDataObject(h));this.lassoSelected&&(this.lassoPoints=[],this.lassoSelected=!1)}},this.handleDragEventHeatmap=function(t,e,i,s,a,r){if(!this.isTransition()){var n=[],o=[],h=this.layoutComb?this.layoutParams[e]:this,l=this.cloneObject(h.varIndices),c=this.isGroupedData?this.cloneObject(h.grpIndices):this.cloneObject(h.smpIndices);this.setOriginalIndices(e,l,c),h.varIndicesStart=h.varIndicesStart<0?0:h.varIndicesStart,h.smpIndicesStart=h.smpIndicesStart<0?0:h.smpIndicesStart,h.grpIndicesStart=h.grpIndicesStart<0?0:h.grpIndicesStart,h.varIndices=[],h.grpIndices=[],h.smpIndices=[];for(var d=0;d<this.meta.render.objects.length;d++){var p=this.meta.render.objects[d],g=p.area;this.isContour&&p.idx&&p.idx[0]&&p.idx[0].toString().match(/Contour/)||p.idx&&(i<g[1]||i<g[3])&&a>g[1]&&(s<g[2]||s<g[4])&&r>g[2]&&(n[p.idx[0]]||(h.varIndices.push(p.idx[0]),n[p.idx[0]]=1),o[p.idx[1]]||(h.isGroupedData?h.grpIndices.push(p.idx[1]):h.smpIndices.push(p.idx[1]),o[p.idx[1]]=1))}if(h.varIndices.length>0&&h.smpIndices.length>0){for(d=0;d<l.length;d++)l[d]==h.varIndices[0]&&(h.varIndicesStart+=d);for(d=0;d<c.length;d++)h.isGroupedData?c[d]==h.grpIndices[0]&&(h.grpIndicesStart+=d):c[d]==h.smpIndices[0]&&(h.smpIndicesStart+=d);var u=this.extractDataObject(this.smpIndices,this.varIndices);this.draw({func:"handleDragEventHeatmap",par:[t,e,i,s,a,r]}),this.showDataTableOnSelect&&this.updateDataTable(u),this.skipClick=!1}else h.varIndices=l,h.isGroupedData?h.grpIndices=c:h.smpIndices=c}},this.handleDragEventCorrelation=function(t,e,i,s,a){return this.handleDragEventHeatmap(t,0,e,i,s,a)},this.isTransformedAxis=function(t,e,i){this[t+"Transform"]&&("log2"==this[t+"Transform"]&&!i||"exp2"==this[t+"Transform"]&&i?(this["setMin"+e]=Math.pow(2,this["setMin"+e]),this["setMax"+e]=Math.pow(2,this["setMax"+e])):"log10"==this[t+"Transform"]&&!i||"exp10"==this[t+"Transform"]&&i?(this["setMin"+e]=Math.pow(10,this["setMin"+e]),this["setMax"+e]=Math.pow(10,this["setMax"+e])):"exp2"==this[t+"Transform"]&&!i||"log2"==this[t+"Transform"]&&i?(this["setMin"+e]=Math.log(this["setMin"+e])/Math.LN2,this["setMax"+e]=Math.log(this["setMax"+e])/Math.LN2):("exp10"==this[t+"Transform"]&&!i||"log10"==this[t+"Transform"]&&i)&&(this["setMin"+e]=Math.log(this["setMin"+e])/Math.LN10,this["setMax"+e]=Math.log(this["setMax"+e])/Math.LN10))},this.isTransformedRange=function(t,e){if(!this[t+"Transform"])return e;if("log2"==this[t+"Transform"]);else{if("log10"==this[t+"Transform"])return Math.log(e)/Math.LN10;"exp2"==this[t+"Transform"]||this[t+"Transform"]}},this.handleDragEventScatter=function(t,e,i,s,a,r){if(!this.isTransition()){var n={v:{},s:{},c:{}},o=0,h=!1,l=this.data.y.vars,c=this.data.y.smps;if(t.shiftKey||this.lassoSelected){for(var d=0;d<this.meta.render.objects.length;d++){var p=this.meta.render.objects[d];if((this.lassoSelected?p.idx&&this.isAreaInsidePolygon(p.area,this.lassoPoints):p.idx&&this.isObjectInsideArea(p.area,i,s,a,r))&&"Data"==p.type&&(n.v[p.idx[0]]=!0,n.s[p.idx[1]]=!0,n.s[p.idx[2]]=!0,n.c[l[p.idx[0]]+"::"+c[p.idx[1]]+"::"+c[p.idx[2]]]=!0,o++,exc=this.getSelectedExcludedFromRender(p.idx),exc))for(var g=0;g<exc.length;g++)n.v[exc[g]]=!0,n.c[l[exc[g]]+"::"+c[p.idx[1]]+"::"+c[p.idx[2]]]=!0,o++}if(o>0)(h=this.extractDataObject(this.getKeys(n.s),this.getKeys(n.v))).y.comp=n.c,t.ctrlKey||this.resetSelected(t,!0),this.addRemoveToSelected(!1,h,t),this.broadcastDraw({func:"handleDragEventScatter",par:[t,e,i,s,a,r],prop:{lassoPoints:this.lassoPoints,lassoSelected:this.lassoSelected}}),this.showDataTableOnSelect&&this.updateDataTable(h);this.lassoSelected&&(this.lassoPoints=[],this.lassoSelected=!1)}else{var u=(h=this.layoutComb?this.layoutParams[e]:this).xAxisMin+(i-(this.marginLeft+h.offsetX+h.left))/h.xAxisUnit,m=h.xAxisMin+(a-(this.marginLeft+h.offsetX+h.left))/h.xAxisUnit,f=h.yAxisMax-(s-(this.marginTop+h.offsetY+h.top))/h.yAxisUnit,y=h.yAxisMax-(r-(this.marginTop+h.offsetY+h.top))/h.yAxisUnit;if(this.validateMinMax(u,m,h.xAxisMin,h.xAxisMax)&&this.validateMinMax(y,f,h.yAxisMin,h.yAxisMax)){if(this.scatterPlotMatrix&&this.scatterPlotMatrixType.match(/correlation|all/)){var x=0;for(d=0;d<this.layoutRows;d++)for(g=0;g<this.layoutCols;g++)h=this.layoutParams[x],d==this.layoutValidR&&(h.setMinY=y,h.setMaxY=f),g==this.layoutValidC&&(h.setMinX=u,h.setMaxX=m),d==this.layoutValidR||this.layoutValidC,x++}else(h=this.layoutComb&&this.layoutAdjust?this.layoutParams[e]:this).setMinX=u,h.setMaxX=m,h.setMaxY=f,h.setMinY=y;this.draw({func:"handleDragEventScatter",par:[t,e,i,s,a,r]})}}}},this.handleDragEventGenome=function(t,e,i,s,a,r){if(!this.isTransition()){var n=this.layoutComb?this.layoutParams[e]:this,o=n.xAxisMin+(i-(this.marginLeft+n.offsetX+n.left))/n.xAxisUnit,h=n.xAxisMin+(a-(this.marginLeft+n.offsetX+n.left))/n.xAxisUnit;this.validateMinMax(o,h,this.xAxisMin,this.xAxisMax)&&(this.setMinX=o,this.setMaxX=h,this.draw({func:"handleDragEventGenome",par:[t,e,i,s,a,r]}))}},this.handleDragEventOneDimension=function(t,e,i,s,a,r,n){if(!this.isTransition()){var o=this.graphType,h=.95,l={moveDendrogram:this.moveDendrogram,moveVarOverlay:this.moveVarOverlay,varOverlayInfo:this.varOverlayInfo,moveVar:this.moveVar,varInfo:this.varInfo,moveSmpOverlay:this.moveSmpOverlay,smpOverlayInfo:this.smpOverlayInfo,moveSmp:this.moveSmp,smpInfo:this.smpInfo};if(this.moveDendrogram){var c=this.layoutComb?this.layoutParams[e]:this;"varDendrogram"==this.moveDendrogram?(g=s>this.marginTop+c.offsetY+c.top+c.y*h?"bottom":"top",this.varDendrogramPosition!=g&&(this.varDendrogramPosition=g,this.draw({func:"handleDragEventOneDimension",par:[t,e,i,s,a,r,n],prop:l}))):(g="Heatmap"==o||"horizontal"==this.graphOrientation?i>this.marginLeft+c.offsetX+c.left+c.x*h?"right":"left":s>this.marginTop+c.offsetY+c.top+c.y*h?"bottom":"top",this.smpDendrogramPosition!=g&&(this.smpDendrogramPosition=g,this.draw({func:"handleDragEventOneDimension",par:[t,e,i,s,a,r,n],prop:l}))),this.skipClick=!1}else if(this.moveVarOverlay){c=this.layoutComb?this.layoutParams[e]:this;var d=this.moveVarOverlay.split("-")[1],p=this.varOverlays[d],g=s<this.marginTop+c.offsetY+c.top?"top":"bottom";this.varOverlays.splice(d,1);for(var u=this.varOverlays.length,m=0;m<this.varOverlays.length;m++){var f=this.varOverlays[m];if(this.varOverlayInfo[f]>s){u=m;break}}this.varOverlays.splice(u,0,p),this.varOverlayProperties.hasOwnProperty(p)||(this.varOverlayProperties[p]={}),this.varOverlayProperties[p].position=g,this.draw({func:"handleDragEventOneDimension",par:[t,e,i,s,a,r,n],prop:l}),this.skipClick=!1}else if(this.moveVar){d=this.moveVar.split("-")[1];if(this.showVarDendrogram&&this.varDendrogram)return alert("Ooops. Cannot change order when showing the dendrogram"),!1;var y=this.layoutComb?this.layoutParams[e].varIndices:this.varIndices,x=this.layoutComb?this.cloneObject(this.layoutParams[e].varInfo):this.cloneObject(this.varInfo),v=[];if(this.moveVar.match(/VarOvr/)){var b=this.moveVar.split("-")[2],A=this.data.z[this.varOverlays[b]];for(m=0;m<y.length;m++)if(y[m]==d){u=m;break}if(u>0)for(;u>0&&A[y[u-1]]==A[y[u]];)u--;for(v=[u];A[y[u+1]]==A[y[u]];)u++,v.push(u)}else{for(m=0;m<y.length;m++)if(y[m]==d){u=m;break}v=[u]}v=y.splice(v[0],v.length),x.splice(v[0],v.length);for(m=0;m<y.length;m++)if(x[m]>i){u=m;break}for(m=0;m<v.length;m++)y.splice(u+m,0,v[m]);this.draw({func:"handleDragEventOneDimension",par:[t,e,i,s,a,r,n],prop:l}),this.skipClick=!1}else if(this.moveSmpOverlay){c=this.layoutComb?this.layoutParams[e]:this,d=this.moveSmpOverlay.split("-")[1],p=this.smpOverlays[d];g=o.match(/Heatmap/)||"horizontal"==this.graphOrientation?(C=i)>this.marginLeft+c.offsetX+c.left+c.x*h?"right":"left":(C=s)<this.marginTop+c.offsetY+c.top?"top":"bottom",this.smpOverlays.splice(d,1);for(u=this.smpOverlays.length,m=0;m<this.smpOverlays.length;m++){f=this.smpOverlays[m];if(this.smpOverlayInfo[f]>C){u=m;break}}this.smpOverlays.splice(u,0,p),this.smpOverlayProperties.hasOwnProperty(p)||(this.smpOverlayProperties[p]={}),this.smpOverlayProperties[p].position=g,this.draw({func:"handleDragEventOneDimension",par:[t,e,i,s,a,r,n],prop:l}),this.skipClick=!1}else if(this.moveSmp){d=this.moveSmp.split("-")[1];var w=this.layoutComb?this.cloneObject(this.layoutParams[e].smpInfo):this.cloneObject(this.smpInfo);if(this.layoutComb&&(this.layoutParams[e].dragged=!0),this.isGroupedData)T=this.layoutComb?this.layoutParams[e].grpIndices:this.grpIndices;else if(T=this.layoutComb?this.layoutParams[e].smpIndices:this.smpIndices,this.showSmpDendrogram&&this.smpDendrogram)return alert("Ooops. Cannot change order when showing the dendrogram"),!1;v=[];if(this.moveSmp.match(/SmpOvr/)){for(b=this.moveSmp.split("-")[2],A=this.isGroupedData?this.data.w.factors[this.smpOverlays[b]]:this.data.x[this.smpOverlays[b]],m=0;m<T.length;m++)if(T[m]==d){u=m;break}if(u>0)for(;u>0&&A[T[u-1]]==A[T[u]];)u--;for(v=[u];A[T[u+1]]==A[T[u]];)u++,v.push(u)}else{for(m=0;m<T.length;m++)if(T[m]==d){u=m;break}v=[u]}v=T.splice(v[0],v.length),w.splice(v[0],v.length);var C=o.match(/Heatmap/)||"horizontal"==this.graphOrientation?s:i;for(m=0;m<T.length;m++)if(w[m]>C){u=m;break}for(m=0;m<v.length;m++)T.splice(u+m,0,v[m]);this.draw({func:"handleDragEventOneDimension",par:[t,e,i,s,a,r,n],prop:l}),this.skipClick=!1}else if(t.shiftKey||n){var T,S={},M=[],D=(y=this.layoutComb?this.layoutParams[e].varIndices:this.varIndices,this.isGroupedData?this.grpIndices:this.smpIndices),k=!1;T=this.isGroupedData?this.layoutComb?this.layoutParams[e].grpIndices:this.grpIndices:this.layoutComb?this.layoutParams[e].smpIndices:this.smpIndices,this.setOriginalIndices(e,y,T);for(m=0;m<this.meta.render.objects.length;m++){var L=this.meta.render.objects[m];L.idx&&this.isObjectInsideArea(L.area,i,s,a,r)&&(S[L.idx[1]]=!0)}for(m=0;m<D.length;m++)S.hasOwnProperty(D[m])&&(M.push(D[m]),k||(this.isGroupedData?(this.grpIndicesStart=m,k=!0):(this.smpIndicesStart=m,k=!0)));this.setSamplesVisible(M,!0);f=this.extractDataObject(M,this.varIndices);this.draw({func:"handleDragEventOneDimension",par:[t,e,i,s,a,r,n],prop:l}),this.showDataTableOnSelect&&this.updateDataTable(f)}else{var I=(f=this.layoutComb?this.layoutParams[e]:this).xAxisMin,z=f.xAxisMax,N=this.marginLeft+f.offsetX+f.left,B=N+f.x,P=this.marginTop+f.offsetY+f.top,R=P+f.y;"vertical"==this.graphOrientation?(I+=Math.max(R-r,0)/f.xAxisUnit,z-=Math.max(s-P,0)/f.xAxisUnit):(I+=Math.max(i-N,0)/f.xAxisUnit,z-=Math.max(B-a,0)/f.xAxisUnit),this.validateMinMax(I,z,this.xAxisMin,this.xAxisMax)&&((f=this.layoutComb&&this.layoutAdjust?this.layoutParams[e]:this).setMinX=I,f.setMaxX=z,this.draw({func:"handleDragEventOneDimension",par:[t,e,i,s,a,r,n],prop:l}))}}},this.handleDragEvent=function(t,e,i,s,a){var r=this.layoutComb?this.layoutValidN:0,n=this.layoutComb?this.layoutParams[r].graphType:this.graphType;"Correlation"==n?this.handleDragEventCorrelation(t,e,i,s,a):"Circular"==n?this.handleDragEventCircular(t):"Network"==n?this.handleDragEventNetwork(t,e,i,s,a):"Heatmap"!=n||this.moveDendrogram||this.moveVar||this.moveSmp||this.moveVarOverlay||this.moveSmpOverlay?n.match(/Scatter/)?this.handleDragEventScatter(t,r,e,i,s,a):"Genome"==n?this.handleDragEventGenome(t,r,e,i,s,a):this.handleDragEventOneDimension(t,r,e,i,s,a):this.handleDragEventHeatmap(t,r,e,i,s,a)},this.updateLayoutDrag=function(t){var e=this,i=this.layoutValidDrag||this.layoutValidBounds,s=this.$(this.target+"-cX-Drag"),a=this.adjustedCoordinates(t);if(i&&s&&a){var r=a.x,n=a.y,o=function(){for(var t=0,i=0;i<e.layoutRows;i++)for(var s=0;s<e.layoutCols;s++){var a=e.getBoundsXY(t);if(r>=a[4]&&r<=a[5]&&n>=a[6]&&n<=a[7])return{bounds:a,target:t};t++}return!1}();this.layoutValidDrag||(this.layoutValidDrag=this.cloneObject(i),this.layoutValidDrag.push(this.xMouseDown),this.layoutValidDrag.push(this.yMouseDown),this.layoutValidDrag.push(this.layoutValidN));var h=i[4]+(r-this.layoutValidDrag[8]),l=i[6]+(n-this.layoutValidDrag[9]),c=i[5]-i[4],d=i[7]-i[6];if(s.style.left=h+"px",s.style.top=l+"px",s.style.width=c+"px",s.style.height=d+"px",s.style.border="1px solid grey",o)(c=this.$(this.target+"-cX-Drag-Layout"))&&(c.style.left=o.bounds[4]+"px",c.style.top=o.bounds[6]+"px",c.style.width=o.bounds[5]-o.bounds[4]+"px",c.style.height=o.bounds[7]-o.bounds[6]+"px",c.style.border="1px solid grey",this.layoutValidDrag[11]=o.target)}},this.endDragLayout=function(t){if(this.layoutValidDrag&&this.layoutValidDrag[10]&&this.layoutValidDrag[11]&&this.layoutValidDrag[10]!=this.layoutValidDrag[11]&&this.includeDOE.length){var e=this.includeDOE.splice(this.layoutValidDrag[10]-1,1),i=this.layoutConfig.splice(this.layoutValidDrag[10],1);this.includeDOE.splice(this.layoutValidDrag[11]-1,0,e[0]),this.layoutConfig.splice(this.layoutValidDrag[11],0,i[0]),this.createDOE(!1,!1,!0),this.draw({func:"endDragLayout",par:[t],prop:{layoutValidDrag:this.layoutValidDrag}})}this.resetDrag(t)},this.resetDrag=function(t,e){var i=this.$(this.target+"-cX-Drag");i&&(i.style.left="0px",i.style.top="0px",i.style.width="0px",i.style.height="0px",i.style.borderRadius="",i.style.backgroundColor=this.resizerBackgroundColor,i.style.border="none");var s=this.$(this.target+"-cX-Drag-Layout");s&&(s.style.left="0px",s.style.top="0px",s.style.width="0px",s.style.height="0px",s.style.border="none"),this.isDOE&&(this.layoutValidDrag=!1,this.cancelEvent(t),this.stopEvent(t)),e||(this.skipClick=!1)},this.initializeDraggingEvents=function(){this.disableEvents||(this.addDragDiv(),this.addDragDivLayout())},this.initializeDraggingEvents()},CanvasXpress.prototype.initKeyEvents=function(){this.getKeyCode=function(t){if(t)return t.charCode&&0==t.keyCode?t.charCode:t.keyCode},this.registerKey=function(t){var e=this.getTargetEvent(t),i=t.shiftKey,s=t.ctrlKey,a=t.altKey,r=window.document,n=this.getKeyCode(t);if(!this.disableKeys||s&&a&&107==n){if(this.motioningOn)return this.stopEvent(t),!1;if(13==n)return;if(27==n)return i?this.replot(t,a):this.animationOn?(this.animationOn=!1,!1):(s&&this.resetFilters(),void("table"!=this.view&&this.masterReset(t)));if(16==n){if(this.disableShowShortcuts)return;this.showShortcuts()}else if(17==n){if(this.disableShowShortcuts)return;this.showShortcuts()}else if(18==n||224==n){if(this.disableShowShortcuts)return;this.showShortcuts()}else 91==n||93==n||(s&&i?(n>=33&&n<=40?this.arrowMove(n,!0):80==n?this.motionBy||this.reproduce(t,!1,!0):82==n?this.motionBy||"Windows"==CanvasXpress.system.os||this.reproduce(t):83==n&&this.save(t),r.defaultAction=!0):s&&a?(80!=n||this.keyOn?82==n?this.motionBy||this.reproduce(t):68==n?(this.flashInfoSpan(100,100,"Debug info dropped to JavaScript console!",3e3),console.log({system:CanvasXpress.system,factory:CanvasXpress.factory})):83==n&&(this.motionBy||this.save(t)):(this.keyOn=!0,this.print(t)),r.defaultAction=!0):i&&a?(n>=50&&n<90&&!this.keyOn&&(this.keyOn=!0),r.defaultAction=!0):s?(n>=33&&n<=40?36==n&&CanvasXpress.selector.selections&&"Network"==this.graphType?this.showHideSelectedData(t,n):this.arrowMove(n):45!=n&&46!=n||this.keyOn?n>=48&&n<58&&!this.keyOn?this.keyOn=!0:n>=65&&n<=90&&("Network"!=this.graphType||this.keyOn||/input|textarea|select/i.test(e.tagName)?80!=n||this.keyOn?82==n?this.motionBy||"Windows"==CanvasXpress.system.os||this.reproduce(t):83==n?this.motionBy||this.save(t):89==n&&(this.keyOn=!0,this.redo()):(this.keyOn=!0,this.print(t)):66!=n&&72!=n&&76!=n&&82!=n&&84!=n&&86!=n||(this.keyOn=!0,this.alignDistributeSelectedNodes(t,n)),90==n&&(this.keyOn=!0,this.undo())):(this.keyOn=!0,this.showHideSelectedData(t,n)),r.defaultAction=!0):107==n||109==n||61==n||187==n||189==n?this.disablePlusMinusKeys||/input|textarea|select/i.test(e.tagName)||(109==n||189==n?this.handleWheelEvent(t,-1):this.handleWheelEvent(t,1)):i&&n>=33&&n<=40?this.disableArrowKeys||/input|textarea|select/i.test(e.tagName)?r.defaultAction=!0:this.handlePanning(t,n):n>=36&&n<=40?this.disableArrowKeys||/input|textarea|select/i.test(e.tagName)||this.handlePanning(t,n):(i||a)&&(r.defaultAction=!0))}},this.showShortcuts=function(){var t="<br>";t+="<b>Ctrl P</b> : Print PNG <br>",t+="<b>Ctrl S</b> : Save as JSON <br>",t+="<b>Ctrl R</b> : Open Reproduce Widget <br>",t+="<br>",t+="<b>Ctrl + Shift + P</b> : Print PNGs over time <br>",t+="<b>Ctrl + Shift + S</b> : Save as JSON overwrite <br>","Windows"!=CanvasXpress.system.os&&(t+="<b>Ctrl + Shift + R</b> : Play reproduce auto <br>"),t+="<b>Ctrl + Shift + D</b> : Print debug info to console <br>",t+="<br>",t+="<b>Ctrl + Alt/Option P</b> : Print PNG overwrite <br>",t+="<b>Ctrl + Alt/Option S</b> : Save as JSON overwrite <br>",t+="<b>Ctrl + Alt/Option R</b> : Open Reproduce Widget <br>",t+="<br>",this.flashInfoSpan(this.width-100,10,t,5e3)},this.undo=function(){!this.disableUndoRedoKeys&&CanvasXpress.stack[this.target].stateIndex>=1&&(CanvasXpress.stack[this.target].stateIndex--,this.setConfigState(CanvasXpress.stack[this.target].stateIndex,!0))},this.redo=function(){var t=CanvasXpress.stack[this.target].state.length-1;!this.disableUndoRedoKeys&&CanvasXpress.stack[this.target].stateIndex<t&&(CanvasXpress.stack[this.target].stateIndex++,this.setConfigState(CanvasXpress.stack[this.target].stateIndex,!0))},this.handlePanning=function(t,e){if(!this.isTransition()){if("Correlation"==this.graphType||"Heatmap"==this.graphType||this.graphType.match(/Bar|Line|Dotplot|Boxplot|Area|Stacked/)){if(this.cancelEvent(t),this.layoutComb&&!this.layoutAdjust&&"Correlation"!=this.graphType&&"Heatmap"!=this.graphType)return!1;this.setIndicesAfterPannEvent(t,e)}else if(this.graphType.match(/Scatter/))this.setRangesAfterPannEvent(t,e);else if("Network"==this.graphType){this.cancelEvent(t);var i=Math.abs(this.x*this.panningStep),s=Math.abs(this.y*this.panningStep);33==e?this.panningY-=5*s:34==e?this.panningY+=5*s:35==e?(this.panningX=20*i,this.panningY=20*s):36==e?(this.panningX=0,this.panningY=0):37==e?this.panningX-=i:38==e?this.panningY-=s:39==e?this.panningX+=i:40==e&&(this.panningY+=s),this.draw({network:!0,func:"handlePanning",par:[t,e]})}else if("Genome"==this.graphType){var a="high"==this.genomeResolution?1:this.xAxisRange*this.panningStep;null==this.setMinX&&(this.setMinX=this.xAxisMin),null==this.setMaxX&&(this.setMaxX=this.xAxisMax),this.cancelEvent(t),37==e||38==e?(this.setMinX-=a,this.setMaxX-=a):39==e||40==e?(this.setMinX+=a,this.setMaxX+=a):33==e?(this.setMinX+=.95*this.xAxisRange,this.setMaxX+=.95*this.xAxisRange):34==e?(this.setMinX-=.95*this.xAxisRange,this.setMaxX-=.95*this.xAxisRange):35==e?this.setMaxX=null:36==e&&(this.setMinX=null),this.draw({func:"handlePanning",par:[t,e]})}else if("Map"==this.graphType){var r=this.rotationStep;33==e||38==e?this.panningY-=8*r:39==e?this.panningX+=8*r:37==e?this.panningX-=8*r:34!=e&&40!=e||(this.panningY+=8*r),this.draw({func:"handlePanning",par:[t,e]})}return!1}},this.arrowMove=function(t,e){if(!this.isTransition()){var i=this.graphType;this.is3DPlot&&(i="Scatter3D");var s=this.rotationStep;switch(i){case"Network":this.is3DNetwork?33==t?(this.xRotate+=3*s,this.yRotate-=3*s):34==t?(this.xRotate-=3*s,this.yRotate+=3*s):37==t?this.xRotate+=s:38==t?this.yRotate-=s:39==t?this.xRotate-=s:40==t&&(this.yRotate+=s):33==t?this.network2DRotate-=3*s:34==t?this.network2DRotate+=3*s:37==t||38==t?this.network2DRotate-=s:39!=t&&40!=t||(this.network2DRotate+=s);break;case"Scatter2D":case"ScatterBubble2D":var a,r;if("XYZ"==this.axesType?(a=["xAxisCurrent","yAxisCurrent","zAxisCurrent"],r=["xAxis","yAxis","zAxis"]):"XY"==this.axesType?(a=["zAxisCurrent"],r=["zAxis"]):"X"==this.axesType?(a=["yAxisCurrent","zAxisCurrent"],r=["yAxis","zAxis"]):(a=["xAxisCurrent","zAxisCurrent"],r=["xAxis","zAxis"]),33==t)for(var n=0;n<a.length;n++)this[a[n]]+=2;else if(34==t)for(n=0;n<a.length;n++)this[a[n]]-=2;else if(35==t)for(n=0;n<a.length;n++)this[a[n]]=this[r[n]].length-1;else if(36==t)for(n=0;n<a.length;n++)this[a[n]]=0;else if(37==t||40==t)for(n=0;n<a.length;n++)this[a[n]]--;else if(38==t||39==t)for(n=0;n<a.length;n++)this[a[n]]++;this.xAxisCurrent=this.xAxisCurrent<0?this.xAxis.length-1:this.xAxisCurrent>this.xAxis.length-1?0:this.xAxisCurrent,this.yAxisCurrent=this.yAxisCurrent<0?this.xAxis.length-1:this.yAxisCurrent>this.yAxis.length-1?0:this.yAxisCurrent,this.zAxisCurrent=this.zAxisCurrent<0?this.xAxis.length-1:this.zAxisCurrent>this.zAxis.length-1?0:this.zAxisCurrent;break;case"Scatter3D":33==t?(this.xRotate+=3*s,this.yRotate-=3*s):34==t?(this.xRotate-=3*s,this.yRotate+=3*s):35==t?(this.xRotate=0,this.yRotate=0,this.zRotate=45):36==t?(this.xRotate=45,this.yRotate=0,this.zRotate=0):37==t?this.xRotate+=s:38==t?this.yRotate-=s:39==t?this.xRotate-=s:40==t&&(this.yRotate+=s)}e&&!this.animationOn?(this.animationOn=!0,this.animateParams(t)):this.draw({network:!0,func:"arrowMove",par:[t,e]})}},this.animateParams=function(t){var e=this;this.removeMenus(),function(){this.update=function(){e.animationOn||clearInterval(i),e.arrowMove(t);var s=e.graphType;e.is3DPlot&&(s="Scatter3D");var a=this.rotationStep;switch(s){case"Network":this.is3DNetwork?33==t?(this.xRotate+=3*a,this.yRotate-=3*a):34==t?(this.xRotate-=3*a,this.yRotate+=3*a):37==t?this.xRotate-=a:38==t?this.yRotate-=a:39==t?this.xRotate+=a:40==t&&(this.yRotate+=a):33==t?this.network2DRotate+=3*a:34==t?this.network2DRotate-=3*a:37==t||38==t?this.network2DRotate-=a:39!=t&&40!=t||(this.network2DRotate+=a);break;case"Scatter2D":case"ScatterBubble2D":37!=t?"ScatterBubble2D"==e.graphType&&e.xAxisIndices.length>1&&e.xAxisIndices.length==e.yAxisIndices.length&&e.xAxisIndices.length==e.zAxisIndices.length?e.xAxisCurrent>=e.xAxis.length-1&&(e.xAxisCurrent=e.xAxis.length-1,e.yAxisCurrent=e.yAxis.length-1,e.zAxisCurrent=e.zAxis.length-1,t=37):e.xAxisIndices.length>1&&e.xAxisIndices.length==e.yAxisIndices.length?e.zAxisCurrent>=e.zAxis.length-1&&(e.zAxisCurrent=e.zAxis.length-1,t=37):e.xAxisIndices.length>e.yAxisIndices.length?(e.yAxisCurrent>=e.yAxis.length-1&&(e.yAxisCurrent=e.yAxis.length-1),e.zAxisCurrent>=e.zAxis.length-1&&(e.zAxisCurrent=e.zAxis.length-1),e.yAxisCurrent>=e.yAxis.length-1&&e.zAxisCurrent>=e.zAxis.length-1&&(t=37)):(e.xAxisCurrent>=e.xAxis.length-1&&(e.xAxisCurrent=e.xAxis.length-1),e.zAxisCurrent>=e.zAxis.length-1&&(e.zAxisCurrent=e.zAxis.length-1),e.xAxisCurrent>=e.xAxis.length-1&&e.zAxisCurrent>=e.zAxis.length-1&&(t=37)):39!=t&&("ScatterBubble2D"==e.graphType&&e.xAxisIndices.length>1&&e.xAxisIndices.length==e.yAxisIndices.length&&e.xAxisIndices.length==e.zAxisIndices.length?e.xAxisCurrent<=0&&(e.xAxisCurrent=0,e.yAxisCurrent=0,e.zAxisCurrent=0,t=39):e.xAxisIndices.length>1&&e.xAxisIndices.length==e.yAxisIndices.length?e.zAxisCurrent<=0&&(e.zAxisCurrent=0,t=39):e.xAxisIndices.length>e.yAxisIndices.length?(e.yAxisCurrent<=0&&(e.yAxisCurrent=0),e.zAxisCurrent<=0&&(e.zAxisCurrent=0),e.yAxisCurrent<=0&&e.zAxisCurrent<=0&&(t=39)):(e.xAxisCurrent<=0&&(e.xAxisCurrent=0),e.zAxisCurrent<=0&&(e.zAxisCurrent=0),e.xAxisCurrent<=0&&e.zAxisCurrent<=0&&(t=39)));break;case"Scatter3D":e.xRotate<=0&&(39==t||t<37)?(e.xRotate=0,e.yRotate=0,t=40):e.xRotate>=90&&(37==t||t<37)?(e.xRotate=90,e.yRotate=90,t=38):e.yRotate<=0&&(38==t||t<37)?(e.yRotate=0,e.xRotate=90,t=39):e.yRotate>=90&&(40==t||t<37)&&(e.yRotate=90,e.xRotate=0,t=37)}};var i=e.setInterval(this.update,30)}.call()},this.reset=function(t,e,i,s){this.varIndicesStart=-1,this.smpIndicesStart=-1,this.grpIndicesStart=-1;var a=!!e&&this.cloneObject(this.varIndices),r=!!e&&this.cloneObject(this.smpIndices),n=!!e&&this.cloneObject(this.grpIndices);switch(s||this.resetSelected(i),this.graphType){case"Area":case"AreaLine":case"Stacked":case"StackedLine":case"StackedPercent":case"StackedPercentLine":case"Heatmap":case"Correlation":case"Venn":case"Pie":case"Bar":case"Line":case"BarLine":case"Boxplot":case"Dotplot":case"DotLine":case"Circular":case"Treemap":case"TagCloud":case"ParallelCoordinates":case"Sankey":case"Tree":case"Gantt":case"Meter":this.setAllVariablesVisible(a,t),this.setAllSamplesVisible(r,t),this.isGroupedData&&this.data.w&&e&&(this.data.w.grpIdxs=n);break;case"Scatter2D":case"ScatterBubble2D":case"Scatter3D":case"Fish":this.setAllVariablesVisible(a,t),this.setAllSamplesVisible(r,t),this.motionBy&&this.motionObject&&(this.motionObject.setIndices=!0);break;case"Network":this.setAllNodesVisible(),this.translateCanvas(-this.offsetX,-this.offsetY),this.scaleCanvas(1/this.scaleFactorX,1/this.scaleFactorY);break;case"Genome":this.setAllFeaturesVisible(t);break;case"Map":this.setAllVariablesVisible(a,t),this.setAllSamplesVisible(r,t),this.setAllMapFeaturesVisible()}this.startingVarIndices&&this.startingVarIndices.length==this.varIndices.length&&(this.varIndices=this.startingVarIndices),this.startingSmpIndices&&this.startingSmpIndices.length==this.smpIndices.length&&(this.smpIndices=this.startingSmpIndices),this.startingGrpIndices&&this.startingGrpIndices.length==this.grpIndices.length&&(this.grpIndices=this.startingGrpIndices)},this.hardReset=function(t){if(!this.isTransition()){switch(this.varIndicesStart=-1,this.smpIndicesStart=-1,this.grpIndicesStart=-1,this.resetSelected(t),this.graphType){case"Area":case"AreaLine":case"Stacked":case"StackedLine":case"StackedPercent":case"StackedPercentLine":case"Correlation":case"Circular":case"Venn":case"Pie":case"Treemap":case"TagCloud":case"ParallelCoordinates":case"Sankey":case"Tree":this.setAllVariablesVisible(),this.setAllSamplesVisible(),this.circularRotate=0;break;case"Bar":case"Line":case"BarLine":case"Boxplot":case"Dotplot":case"DotLine":case"Genome":case"Gantt":case"Meter":this.setAllVariablesVisible(),this.setAllSamplesVisible(),this.resetRange(),this.xRotate=45,this.yRotate=0;break;case"Scatter2D":case"ScatterBubble2D":case"Fish":this.setAllVariablesVisible(),this.setAllSamplesVisible(),this.resetRange(),this.motionBy&&this.motionObject&&(this.motionObject.setIndices=!0);break;case"Scatter3D":this.setAllVariablesVisible(),this.setAllSamplesVisible(),this.xRotate=45,this.yRotate=0;break;case"Heatmap":this.setAllVariablesVisible(),this.setAllSamplesVisible(),this.sortOncoprint();break;case"Network":this.setAllNodesVisible(),this.network2DRotate=0,this.randomData&&(this.isLayoutDone=!0),this.networkFreeze=!1,this.setNetworkMinMaxRangeXY(),this.setNetworkScaleFactor(),this.translateCanvas(-this.offsetX,-this.offsetY),this.scaleCanvas(1/this.scaleFactorX,1/this.scaleFactorY);break;case"Map":this.setAllVariablesVisible(),this.setAllSamplesVisible(),this.setAllMapFeaturesVisible();var e=this.meta.map.geojson;this.panningX=0,this.panningY=0,this.zoom=1,delete e.isZoomed,e.geometry.zoom=this.cloneObject(e.geometry.initial.zoom),e.geometry.center=this.cloneObject(e.geometry.initial.center),this.setMapAttributes(!0)}this.setInitialConfig()}},this.resetZoomPan=function(){this.zoom=1,this.panningX=0,this.panningY=0,this.panningGlobalX=0,this.panningGlobalY=0,this.padX=this.x/2,this.padY=this.y/2,this.padZ=this.y/2},this.resetRange=function(){if(this.layoutComb&&this.scatterPlotMatrix&&this.scatterPlotMatrixType.match(/correlation|all/))for(var t=0,e=0;e<this.layoutRows;e++)for(var i=0;i<this.layoutCols;i++)(s=this.layoutParams[t++])&&(s.setMinX=null,s.setMaxX=null,s.setMinX2=null,s.setMaxX2=null,s.setMinY=null,s.setMaxY=null,s.setMinZ=null,s.setMaxZ=null);else{var s=this.layoutComb&&this.layoutAdjust&&null!=this.layoutValidN?this.layoutParams[this.layoutValidN]:this;s&&(s.setMinX=null,s.setMaxX=null,s.setMinX2=null,s.setMaxX2=null,s.setMinY=null,s.setMaxY=null,s.setMinZ=null,s.setMaxZ=null)}},this.resetTouches=function(){var t=this,e=function(){clearTimeout(e),t.touches=!1,t.touchEvent=!1};setTimeout(e,500)},this.masterReset=function(t){if(this.isDOE)this.resetDOE();else{var e=t&&(t.shiftKey||t.ctrlKey||t.altKey||t.metaKey),i=[];if(this.broadcast&&e)i=CanvasXpress.instances;else for(var s=this.broadcast?CanvasXpress.instances:[this],a=0;a<s.length;a++)this.broadcastGroup==s[a].broadcastGroup&&i.push(s[a]);i.length<1&&(i=[this]);for(a=0;a<i.length;a++){var r=i[a];r.resetTooltipDivs(),r.resetDrag(t),r.resetSelected(t),r.resetHidden(),r.resetDataFilter(t,!0),r.dataTableLastState&&"docked"!=r.dataTableLastState&&r.hideUnhideDataTable(!0),r.resetFlags(t),r.resetZoomPan(),r.redraw(t)}}}},CanvasXpress.prototype.initSelectEvents=function(){this.showHideSelectedData=function(t,e,i){if(!this.isTransition()){t&&this.stopEvent(t);var s=this.layoutComb?this.layoutValidN:0,a=this.layoutComb?this.layoutParams[s].graphType:this.graphType;if(45==e||46==e){if("Network"==a){var r=[],n=45!=e;for(var o in CanvasXpress.selector.nodes)r.push(o);r.length&&this.hideUnhideNodes(r,n)}else if(a.match(/Scatter/))for(v in CanvasXpress.selector.vars)this.hideUnhideVars(v);i||this.draw({func:"showHideSelectedData",par:[t,e,i]})}else if((36==e||1e3==e)&&"Network"==a){for(var h={},l=[],c=(r=this.data.nodes,this.data.edges),d=0;d<c.length;d++)1e3==e?CanvasXpress.selector.nodes.hasOwnProperty(c[d].id1)&&CanvasXpress.selector.nodes.hasOwnProperty(c[d].id2)&&(h[c[d].id1]=!0,h[c[d].id2]=!0):(CanvasXpress.selector.nodes.hasOwnProperty(c[d].id1)||CanvasXpress.selector.nodes.hasOwnProperty(c[d].id2))&&(h[c[d].id1]=!0,h[c[d].id2]=!0);for(d=0;d<r.length;d++)h.hasOwnProperty(r[d].id)&&!r[d].hide||l.push(r[d].id);this.resetSelected(t),l.length>0&&(this.hideUnhideNodes(l,!0),i||this.draw({func:"showHideSelectedData",par:[t,e,i]}))}}},this.broadcastDrawIframes=function(t){var e=parent.document.getElementsByTagName("iframe");for(var i in e){var s=e[i]||!1;if(s&&window.document.URL!=s.src){var a=!!s.contentWindow&&s.contentWindow.CanvasXpress;if(a&&this.broadcast){a.selector=CanvasXpress.selector;for(var r=[],n=a.instances,o=0;o<n.length;o++)this.broadcastGroup==n[o].broadcastGroup&&r.push(n[o]);for(i=0;i<r.length;i++){var h=r[i];"Map"==h.graphType&&"orthographic"==h.mapProjection&&h.eventMapCenter?h.transitionMap(h,t):(h.filterSelected(),h.draw(t))}}}}},this.broadcastDraw=function(t){if(!this.isTransition()){for(var e=[],i=this.broadcast?CanvasXpress.instances:[this],s=0;s<i.length;s++)this.broadcastGroup==i[s].broadcastGroup&&e.push(i[s]);for(s=0;s<e.length;s++){var a=e[s];"Map"==a.graphType&&"orthographic"==a.mapProjection&&a.eventMapCenter?a.transitionMap(a,t):(a.filterSelected(),a.draw(t))}CanvasXpress.system.isInIframe&&this.broadcastDrawIframes(t)}},this.broadcastHidden=function(t){var e=t.par[0];if(!this.isTransition()){for(var i=[],s=this.broadcast?CanvasXpress.instances:[this],a=0;a<s.length;a++)this.broadcastGroup==s[a].broadcastGroup&&i.push(s[a]);if(this.data&&this.data.y)if(e.op){for(a in e.hidden.hiddenVars)CanvasXpress.hidden.hiddenVars[a]=!0;for(a in e.hidden.hiddenSmps)CanvasXpress.hidden.hiddenSmps[a]=!0}else{for(a in e.unhidden.hiddenVars)CanvasXpress.hidden.hiddenVars[a]=!1;for(a in e.unhidden.hiddenSmps)CanvasXpress.hidden.hiddenSmps[a]=!1}if(this.data&&this.data.w)if(e.op)for(a in e.hidden.hiddenGrps)CanvasXpress.hidden.hiddenGrps[a]=!0;else for(a in e.unhidden.hiddenGrps)CanvasXpress.hidden.hiddenGrps[a]=!1;for(a=0;a<i.length;a++){var r=i[a],n=(r.graphType,!1);if(r.data&&r.data.y){for(var o=0;o<r.data.y.vars.length;o++){var h=r.data.y.vars[o];(CanvasXpress.hidden.hiddenVars.hasOwnProperty(h)||CanvasXpress.hidden.hiddenSmps.hasOwnProperty(h))&&(r.hiddenVarsLocal&&r.hiddenVarsLocal[h]||(r.hiddenVars[o]!=CanvasXpress.hidden.hiddenVars[h]&&(n=!0),r.hiddenVars[o]=CanvasXpress.hidden.hiddenVars[h]))}for(o=0;o<r.data.y.smps.length;o++){h=r.data.y.smps[o];(CanvasXpress.hidden.hiddenVars.hasOwnProperty(h)||CanvasXpress.hidden.hiddenSmps.hasOwnProperty(h))&&(r.hiddenSmpsLocal&&r.hiddenSmpsLocal[h]||(r.hiddenSmps[o]!=CanvasXpress.hidden.hiddenSmps[h]&&(n=!0),r.hiddenSmps[o]=CanvasXpress.hidden.hiddenSmps[h]))}}if(r.data&&r.data.w)for(o=0;o<r.data.w.smps.length;o++){h=r.data.w.smps[o];(CanvasXpress.hidden.hiddenVars.hasOwnProperty(h)||CanvasXpress.hidden.hiddenSmps.hasOwnProperty(h))&&(r.hiddenGrpsLocal&&r.hiddenGrpsLocal[h]||(r.hiddenGrps[o]!=CanvasXpress.hidden.hiddenGrps[h]&&(n=!0),r.hiddenGrps[o]=CanvasXpress.hidden.hiddenGrps[h]))}n&&i.length>1&&r.draw(t)}}},this.resetHidden=function(){CanvasXpress.hidden={hiddenVars:{},hiddenSmps:{},hiddenGrps:{},hiddenMapFeatures:{}}},this.filterSelected=function(){if(CanvasXpress.graphTypes.OneTwoThreeeDGraphs.includes(this.graphType)&&"filter"==this.selectionMode){var t=[];for(var e in CanvasXpress.selector.smps)t.push(e);var i=[];for(var e in CanvasXpress.selector.vars)i.push(e);var s=CanvasXpress.selector.graphType;if(this.graphType.match(/Scatter/))if(s&&this.data.y.histogram){var a=this.dataStndBy.y.smps[0];this.removeHistogram(!0),this.selectionMode="filter",this.filterVariables(!1,"exact",s.match(/Scatter/)?i:t,!1,!0),this.createHistogram(a)}else if(s&&s.match(/Scatter/))this.filterVariables(!1,"exact",i,!1,!0);else if(s)this.filterVariables(!1,"exact",t,!1,!0);else{a=!1;this.data.y.histogram&&(a=this.dataStndBy.y.smps[0],this.removeHistogram(!0),this.selectionMode="filter"),this.resetFilters(),this.toDoFilter={},this.reset(),a&&this.createHistogram(a)}else if(s&&this.graphType.match(/Pie|Treemap/))if(this.data.y.pie||this.data.y.treemap){a="Pie"==this.graphType?this.data.y.smps[0]:this.data.y.vars[0];"Pie"==this.graphType?this.removePie(!0):this.removeTreemap(!0),this.selectionMode="filter",this.filterSamples(!1,"exact",s.match(/Scatter/)?i:t,!1,!0),"Pie"==this.graphType?this.createPie(a):this.createTreemap(a)}else this.filterVariables(!1,"exact",i,!1,!0);else if(s&&s.match(/Scatter/))this.filterSamples(!1,"exact",i,!1,!0);else if(s)this.filterSamples(!1,"exact",t,!1,!0);else{a=!1;(this.data.y.pie||this.data.y.treemap)&&(a="Pie"==this.graphType?this.data.y.smps[0]:this.data.y.vars[0],"Pie"==this.graphType?this.removePie(!0):this.removeTreemap(!0)),this.resetFilters(),this.toDoFilter={},this.reset(),a&&("Pie"==this.graphType?this.createPie(a):this.createTreemap(a))}}},this.isSelected=function(t){if(CanvasXpress.selector.selections){if(this.broadcastGroup&&!CanvasXpress.selector.groups.hasOwnProperty(this.broadcastGroup))return!1;var e=CanvasXpress.selector.graphType||"";if(this.graphType.match(/Genome/));else{if("Network"==this.graphType){var i=this.data.nodes[this.data.nodeIndices[t]];if(i){var s=i.name||"AbsurdName",a=i.label||"AbsurdName";return CanvasXpress.selector.nodes.hasOwnProperty(t)||CanvasXpress.selector.mixed.hasOwnProperty(s)||CanvasXpress.selector.mixed.hasOwnProperty(a)}return CanvasXpress.selector.nodes.hasOwnProperty(t)}if("Map"==this.graphType){if(!this.isArray(t))return!1;if(this.motionBy)for(var r=this.motionObject.levels,n=0;n<r.length;n++){if(CanvasXpress.selector.vars.hasOwnProperty(r[n])){this.updateMotionToCurrent(r[n],!0);break}if(CanvasXpress.selector.smps.hasOwnProperty(r[n])){this.updateMotionToCurrent(r[n],!0);break}}return CanvasXpress.selector.vars.hasOwnProperty(t[0].split(":")[1])||CanvasXpress.selector.mixed.hasOwnProperty(t[0].split(":")[1])}if(this.graphType.match(/Scatter/)){var o=this.data.y.vars[t[0]],h=this.data.y.smps[t[1]],l=this.data.y.smps[t[2]];if(e.match(/Scatter/)){if(this.isCreateHistogram||this.xAxisIndices.length>1||this.yAxisIndices.length>1){if(CanvasXpress.selector.comp.hasOwnProperty(o+"::"+h+"::"+l))return!0;if((m=this.getVariableIndices(o))>=0&&this.data.y.histogram)for(var c=0;c<this.data.y.histogram[m][0].length;c++){var d=this.dataStndBy.y.vars[this.data.y.histogram[m][0][c]];if(CanvasXpress.selector.vars.hasOwnProperty(d))return!0}return!1}return CanvasXpress.selector.vars.hasOwnProperty(o)}if(this.isCreateHistogram&&!this.isDOE){if((m=this.getVariableIndices(o))>=0)for(c=0;c<this.data.y.histogram[m][0].length;c++){d=this.dataStndBy.y.vars[this.data.y.histogram[m][0][c]];if(CanvasXpress.selector.smps.hasOwnProperty(d))return!0}return!1}return CanvasXpress.selector.nodes.hasOwnProperty(o)||CanvasXpress.selector.smps.hasOwnProperty(o)}o=this.data.y.vars[t[0]];var p=5==t.length?t[3]:3==t.length?this.data.y.smps[t[2]]:this.data.y.smps[t[1]],g=!!this.isGroupedData&&this.data.w.smps[t[1]];if(e.match(/Scatter/)){if(this.isGroupedData)return"Dotplot"==this.graphType||"Boxplot"==this.graphType&&this.showBoxplotOriginalData?CanvasXpress.selector.vars.hasOwnProperty(o)&&CanvasXpress.selector.smps.hasOwnProperty(p):CanvasXpress.selector.comp.hasOwnProperty(o+"::"+g);if("Treemap"==this.graphType||"Pie"==this.graphType){var u=this.graphType.toLowerCase();if((m="Treemap"==this.graphType?this.getSampleIndices(p):this.getVariableIndices(o))>=0&&this.data.y[u])for(c=0;c<this.data.y[u][m].length;c++){d=this.dataStndBy.y.smps[this.data.y[u][m][c]];if(CanvasXpress.selector.vars.hasOwnProperty(d))return!0}return!1}return CanvasXpress.selector.vars.hasOwnProperty(p)}if(e.match(/Pie|Treemap/)){if(this.isGroupedData)return"Dotplot"==this.graphType||"Boxplot"==this.graphType&&this.showBoxplotOriginalData?CanvasXpress.selector.vars.hasOwnProperty(o)&&CanvasXpress.selector.smps.hasOwnProperty(p):CanvasXpress.selector.comp.hasOwnProperty(o+"::"+g);if(this.data.y.hasOwnProperty("pie")||this.data.y.hasOwnProperty("treemap")){if(CanvasXpress.selector.meta.hasOwnProperty(o)&&CanvasXpress.selector.meta[o].hasOwnProperty(p))return!0;u=this.graphType.toLowerCase();if((m="Treemap"==this.graphType?this.getSampleIndices(p):this.getVariableIndices(o))>=0&&this.data.y[u])for(c=0;c<this.data.y[u][m].length;c++){d=this.dataStndBy.y.smps[this.data.y[u][m][c]];if(CanvasXpress.selector.smps.hasOwnProperty(d))return!0}return!1}return"Pie"==this.graphType?CanvasXpress.selector.vars.hasOwnProperty(o):CanvasXpress.selector.smps.hasOwnProperty(p)}if(this.isGroupedData)return"Dotplot"==this.graphType||"Boxplot"==this.graphType&&this.showBoxplotOriginalData?CanvasXpress.selector.vars.hasOwnProperty(o)&&CanvasXpress.selector.smps.hasOwnProperty(p):"Bar"==this.graphType&&(this.stackBy||this.dodgeBy)?CanvasXpress.selector.comp.hasOwnProperty(o+"::"+g+"::"+(this.stackBy||this.dodgeBy)+"::"+t[4]):CanvasXpress.selector.comp.hasOwnProperty(o+"::"+g);if("Treemap"==this.graphType||"Pie"==this.graphType){var m;u=this.graphType.toLowerCase();if((m="Treemap"==this.graphType?this.getSampleIndices(p):this.getVariableIndices(o))>=0&&this.data.y[u])for(c=0;c<this.data.y[u][m].length;c++){d=this.dataStndBy.y.smps[this.data.y[u][m][c]];if(CanvasXpress.selector.smps.hasOwnProperty(d))return!0}return!1}switch(this.graphType){case"Heatmap":return CanvasXpress.selector.comp.hasOwnProperty(o+"::"+p);case"Boxplot":return this.showBoxplotOriginalData?CanvasXpress.selector.comp.hasOwnProperty(o+"::"+p):CanvasXpress.selector.vars.hasOwnProperty(o)&&CanvasXpress.selector.smps.hasOwnProperty(p);default:return(1==this.data.y.vars.length||"Map"==e||this.layoutValid||CanvasXpress.selector.vars.hasOwnProperty(o))&&CanvasXpress.selector.smps.hasOwnProperty(p)}}}return!1},this.addRemoveToSelected=function(t,e,i){var s=function(t,e,i){CanvasXpress.selector[e].hasOwnProperty(t)&&CanvasXpress.selector[e][t]?i||(delete CanvasXpress.selector[e][t],CanvasXpress.selector.selections--):(CanvasXpress.selector[e][t]=!0,CanvasXpress.selector.selections++)};if(e&&(e.y||e.w))if(this.graphType.match(/Scatter/))if(this.isCreateHistogram){for(var a=t[1]-1,r=0;r<e.y.histogram[a].length;r++){s(d=this.dataStndBy.y.vars[e.y.histogram[a][r]],"vars")}s(this.data.y.vars[t[0]]+"::"+this.data.y.smps[t[1]]+"::"+this.data.y.smps[t[2]],"comp")}else{if(this.xAxisIndices.length>1||this.yAxisIndices.length>1)if(e.y.comp)for(var a in e.y.comp)s(a,"comp");else for(a=0;a<e.y.vars.length;a++)s(e.y.vars[a]+"::"+e.y.smps[0]+"::"+e.y.smps[1],"comp");if(e.y.vars)for(a=0;a<e.y.vars.length;a++)s(e.y.vars[a],"vars");if(e.y.smps)for(a=0;a<e.y.smps.length;a++)s(e.y.smps[a],"smps",this.getKeys(CanvasXpress.selector.vars).length)}else{var n=this.graphType.toLowerCase();if(this.data.y[n]){CanvasXpress.selector.meta.hasOwnProperty(e.y.vars[0])||(CanvasXpress.selector.meta[e.y.vars[0]]={}),e.y&&!CanvasXpress.selector.meta[e.y.vars[0]].hasOwnProperty(e.y.smps[0])?CanvasXpress.selector.meta[e.y.vars[0]][e.y.smps[0]]=!0:e.y&&(CanvasXpress.selector.meta[e.y.vars[0]][e.y.smps[0]]=!CanvasXpress.selector.meta[e.y.vars[0]][e.y.smps[0]]);a="Pie"==this.graphType?this.getVariableIndices(e.y.vars[0]):(this.graphType,this.getSampleIndices(e.y.smps[0]));for(var o=0;o<this.data.y[n][a].length;o++){s(d=this.dataStndBy.y.smps[this.data.y[n][a][o]],"smps")}}else{if(this.isGroupedData&&e.objectType&&e.objectType.match(/Stack|Dodge/)&&e.y&&e.w){s(e.y.vars[0],"vars");for(a=0;a<e.y.smps.length;a++)s(e.y.smps[a],"smps");s(e.y.vars[0]+"::"+e.w.smps[0]+"::"+(this.stackBy||this.dodgeBy)+"::"+e.stack,"comp")}if(this.isGroupedData&&e.w){if((this.graphType.match(/Dotplot/)||"Boxplot"==this.graphType&&this.showBoxplotOriginalData)&&e.y)s(e.y.vars,"vars"),s(e.y.smps,"smps");else{for(a=0;a<e.w.vars.length;a++)s(e.w.vars[a],"vars");for(a=0;a<e.w.grps.length;a++)for(r=0;r<e.w.grps[a].length;r++)s(this.data.y.smps[e.w.grps[a][r]],"smps")}s(this.groupingFactors.join("::")+"::"+e.w.smps.join("::"),"meta"),s(e.w.vars.join("::")+"::"+e.w.smps.join("::"),"comp")}else{if(this.graphType.match(/Heatmap/))for(a=0;a<e.y.vars.length;a++)for(r=0;r<e.y.smps.length;r++)s(e.y.vars[a]+"::"+e.y.smps[r],"comp");if(e.y.vars)for(a=0;a<e.y.vars.length;a++)s(e.y.vars[a],"vars");if(e.y.smps)for(a=0;a<e.y.smps.length;a++)s(e.y.smps[a],"smps");"Map"==this.graphType&&t&&t[0]&&t[0].toString().match(":")&&s(t[0].split(":")[1],"mixed")}}}else if(e&&"Histogram"==e.objectType&&this.xAxisIndices.length==this.yAxisIndices.length&&this.xAxisIndices.length>1){var h=this[e.a].cntx[e.d],l=h[0],c=h[1],d=this[e.a].histogram[e.b][e.c-1];for(a=0;a<d.length;a++)s(this.data.y.vars[d[a]]+"::"+this.data.y.smps[l]+"::"+this.data.y.smps[c],"comp");for(a=0;a<d.length;a++)s(this.data.y.vars[d[a]],"vars");s(this.data.y.smps[l],"smps"),s(this.data.y.smps[c],"smps")}else if(e&&e.nodes)for(a=0;a<e.nodes.length;a++)s(e.nodes[a].id,"nodes"),e.nodes[a].name&&s(e.nodes[a].name,"mixed"),e.nodes[a].label&&s(e.nodes[a].label,"mixed");else t?this.addRemoveToSelected(!1,this.extractDataObject(t),i):e&&e.idx&&"Map"==this.graphType&&(s(e.idx,"vars"),s(e.idx,"mixed"));if(this.broadcastGroup&&(CanvasXpress.selector.groups[this.broadcastGroup]=!0),CanvasXpress.selector.selections&&(CanvasXpress.selector.graphType=this.graphType),e&&this.userEvents.select)if(e.y){d=this.getVariableIndices(this.getKeys(CanvasXpress.selector.vars));var p=this.getSampleIndices(this.getKeys(CanvasXpress.selector.smps)),g=this.extractDataObject(p,d);this.userEvents.select.call(this,g,i,this)}else e.nodes,this.userEvents.select.call(this,e,i,this)},this.drawSelectedLabel=function(t,e,i){this.isSelected(t)&&"name"==this.selectionMode&&(this.selectionMetadata&&this.data.z&&this.data.z[this.selectionMetadata]?lab=this.data.z[this.selectionMetadata][t[0]]||this.data.y.vars[t[0]]:lab=this.data.y.vars[t[0]],this.toRender({p:["drawText",lab,e,i,this.varLabelFont,this.foreground,"center","middle"],t:"Labels"}))},this.resetSelected=function(t,e){if(!this.isTransition()&&CanvasXpress.selector.selections){var i=this.getKeys(CanvasXpress.selector.vars).length?{y:{vars:[],smps:[],data:[]}}:{nodes:[],edges:[]};CanvasXpress.selector={meta:{},vars:{},smps:{},comp:{},nodes:{},edges:{},mixed:{},selections:0,groups:{},graphType:!1},this.userEvents.select&&this.userEvents.select.call(this,i,t,this),e||this.broadcastDraw({func:"resetSelected",par:[t,e]})}},this.getSelectedExcludedFromRender=function(t){if(!this.graphType.match(/Scatter/))return!1;var e=this.graphType.match(/Scatter2D/)?t[1]+":"+t[2]:t[1]+":"+t[2]+":"+t[3],i=this.graphType.match(/Scatter2D/)&&this.meta.data.d.a.hasOwnProperty(e)?this.meta.data.d.a[e]:{skip:{},density:{}},s=[];if(i.density.hasOwnProperty(t[0]))for(var a in i.skip)i.skip[a]==t[0]&&s.push(Number(a));return s}},CanvasXpress.prototype.initDendrogramEvents=function(){this.zoomDendrogram=function(t){if(!this.isTransition()){if(!t||!t.objectType||!t.objectType.match(/Dendrogram/))return!1;var e=function(t){if(t.children)for(var i=0;i<t.children.length;i++)e(t.children[i]);else s.push(t.idx);return s},i=function(e){if(!r&&(null!=e.nodeId&&e.nodeId==t.nodeId&&(r=!0,a=e),e.children))for(var s=0;s<e.children.length;s++)i(e.children[s])},s=[],a={},r=!1,n=this[t.objectType];i(n),this.setOriginalIndices();var o=this.layoutComb?this.layoutParams[t.c||0]:this;if("varDendrogram"==t.objectType){o.varIndices=e(a);for(var h=0;h<o.startingVarIndices.length;h++)if(o.startingVarIndices[h]==o.varIndices[0]){o.varIndicesStart=h;break}}else if(this.isGroupedData){o.grpIndices=e(a);for(h=0;h<o.startingGrpIndices.length;h++)if(o.startingGrpIndices[h]==o.grpIndices[0]){o.grpIndicesStart=h;break}}else{o.smpIndices=e(a);for(h=0;h<o.startingSmpIndices.length;h++)if(o.startingSmpIndices[h]==o.smpIndices[0]){o.smpIndicesStart=h;break}}this.draw({func:"zoomDendrogram",par:[t]})}},this.modifyDendrogram=function(t){if(!this.isTransition()){if(!t||!t.objectType||!t.objectType.match(/Dendrogram/))return!1;var e=function(t){if(t.children)for(var i=0;i<t.children.length;i++)e(t.children[i]);else s.push(t.idx);return s},i=function(e){if(!a&&(null!=e.nodeId&&e.nodeId==t.nodeId&&(e.children.reverse(),a=!0),e.children))for(var s=0;s<e.children.length;s++)i(e.children[s])},s=[],a=!1,r=this[t.objectType],n=t.objectType+"Newick";this.setOriginalIndices(),i(r),this[n]=this.writeNewick(r);var o=this.layoutComb?this.layoutParams[t.c||0]:this;"varDendrogram"==t.objectType?o.startingVarIndices=e(r):this.isGroupedData?o.startingGrpIndices=e(r):o.startingSmpIndices=e(r),this.draw({func:"modifyDendrogram",par:[t]})}}},CanvasXpress.prototype.initCanvasEvents=function(){var t;this.moveCanvas=function(t,e){var i=this.remoteService?this.$(this.remoteParentId+"-canvasXpressRemoteWindow"):this.$("container-"+this.target);i&&(i.style.left=t,i.style.top=e)},this.contextmenuCanvas=(t=this,function(e){return e&&(t.motioningOn?t.stopEvent(e):e.ctrlKey?(t.cancelEvent(e),t.clickCanvas(e)):(t.cancelEvent(e),t.handleMouseEvents(e,"contextmenu",t.getRenderObjects(e)))),!1}),this.mousedownCanvas=function(t){return function(e){if(t.motioningOn)t.stopEvent(e);else if(CanvasXpress.system.isTouchScreen&&"touchstart"==e.type){e.preventDefault?e.preventDefault():e.returnValue=!1,t.touchEvent="click",t.touches||(t.touches=[]);for(var i=0;i<e.touches.length;i++){var s=e.touches[i].identifier;t.touches[s]||(t.touches[s]=t.cleanTouchEvent(e.touches[i]))}t.tapBuffer?(clearTimeout(t.tapBuffer),t.tapBuffer=null,t.touchEvent=t.touches.length>1?"contextmenu":"dblclick",t.registerDrag(e)):t.tapBuffer=setTimeout((function(){t.tapBuffer=null}),200)}else(e&&e.which?3!=e.which:e&&e.button&&2!=e.button)&&t.registerDrag(e);return!1}}(this),this.clickCanvas=function(t){return function(e){t.isIE&&(e=t.copyEvent(e)),t.resetMenus(),t.resetLinks(),t.clickBuffer=function(){if(t.motioningOn)return t.stopEvent(e),!1;t.doubleClick||(t.skipClick||t.handleMouseEvents(e,"click",t.getRenderObjects(e)),t.lastCanvasEvent="click")},setTimeout(t.clickBuffer,250),setTimeout((function(){t.doubleClick=!1}),500)}}(this),this.dblclickCanvas=function(t){return function(e){if(t.doubleClick=!0,t.motioningOn)return t.stopEvent(e),!1;if(t.clickBuffer&&(clearTimeout(t.clickBuffer),t.clickBuffer=null),!t.skipClick){var i=t.getRenderObjects(e);i?t.handleMouseEvents(e,"dblclick",i):t.customizing||(t.cancelEvent(e),t.clickDataCustomizer(e)),t.lastCanvasEvent="dblclick"}return!1}}(this),this.wheelCanvas=function(t){return function(e,i,s){if(t.motioningOn)return t.stopEvent(e),!1;if(t.lastWheel&&(new Date).getTime()-t.lastWheel<20)return t.cancelEvent(e),!1;t.lastWheel=(new Date).getTime();var a=0;e.wheelDelta?(a=e.wheelDelta/120,window.opera&&(a=-a)):e.detail?a=-e.detail/3:i&&(a=i),a&&t.handleWheelEvent(e,a,s)}}(this),this.dropCanvas=function(t){return function(e){t.cancelEvent(e);var i=e.dataTransfer,s=e.dataTransfer.getData("text/html"),a=e.dataTransfer.getData("text/uri-list");if(t.motioningOn||t.mousePositioning)return t.stopEvent(e),!1;if(i&&i.files.length>0)t.loadFile(i);else if(i&&a){var r=t.newId("-cX-data-url-");t.dataURL=a,t.getDataFromURLOrString(r,!1,!1,!1,(function(){CanvasXpress.$(r).$("container-"+r).style.display="block"}))}else if(s.match(/img.+src=.+png/)){var n=t.$cX("div");n.innerHTML=s;a=n.firstChild.src;var o=function(e){var i=new FileReader;i.onloadend=function(){var e=t.parseDataFromPNG(this.result);e.uploadFile=!0,t.remoteServiceType="file",t.updateRemoteData(e)},i.readAsArrayBuffer(e)};t.ajaxRequest(a,!1,o,"blob")}this.className="CanvasXpress"}}(this),this.dragEnterCanvas=function(t){return function(e){if(!t.motioningOn&&!t.mousePositioning)return t.cancelEvent(e),this.className="CanvasXpressUpload",!1}}(this),this.dragOverCanvas=function(t){return function(e){if(!t.motioningOn&&!t.mousePositioning)return t.cancelEvent(e),this.className="CanvasXpressUpload",!1}}(this),this.dragLeaveCanvas=function(t){return this.className="CanvasXpress",!1},this.addRemoveCanvasListeners=function(t){var e=this.meta.canvas.ctx2.canvas;this[t](e,"contextmenu",this.contextmenuCanvas,!1),this[t](e,"mousedown",this.mousedownCanvas,!1),this[t](e,"touchstart",this.mousedownCanvas,{passive:!1}),this[t](e,"click",this.clickCanvas,!1),this[t](e,"dblclick",this.dblclickCanvas,!1),this[t](e,"mousewheel",this.wheelCanvas,{passive:!1}),this[t](e,"drop",this.dropCanvas,!1),this[t](e,"dragenter",this.dragEnterCanvas,!1),this[t](e,"dragover",this.dragOverCanvas,!1),this[t](e,"dragleave",this.dragLeaveCanvas,!1)},this.isVersion=function(t){if(this.showVersion){var e=this.adjustedCoordinates(t);return!!(e&&e.x>=0&&e.x<=13&&e.y>=0&&e.y<=13)}},this.isHelp=function(t){var e=this.adjustedCoordinates(t);return!!(e&&e.x>0&&e.x<=13&&e.y>0&&e.y<=13)},this.handleWheelEvent=function(t,e,i){if(!this.isTransition()&&!this.disableWheel){this.skipTransition=!0;var s=this.getTargetEvent(t);s&&/CanvasXpress/.test(s.className)&&(CanvasXpress.current=s.id);var a={panningX:this.panningX,panningY:this.panningY};if("Correlation"==this.graphType||"Heatmap"==this.graphType||this.graphType.match(/Bar|Line|Dotplot|Boxplot|Area|Stacked/)&&!this.is3DPlot){if(this.cancelEvent(t),this.layoutComb&&!this.layoutAdjust&&"Correlation"!=this.graphType&&"Heatmap"!=this.graphType)return!1;this.setIndicesAfterWheelEvent(t,e)}else if("Scatter2D"==this.graphType||"ScatterBubble2D"==this.graphType||"Genome"==this.graphType){if(this.cancelEvent(t),"Genome"==this.graphType&&this.xAxisUnit>100&&e>0)return;this.setRangesAfterWheelEvent(t,e)}else if("Scatter3D"==this.graphType||this.is3DPlot){if(this.cancelEvent(t),i||(i=this.adjustedCoordinates(t),t.ac={x:i.x,y:i.y}),i){i.x-=this.marginLeft+this.left,i.y-=this.marginTop+this.top;var r=Math.min(Math.max(i.x,0),this.x)/this.x-.5,n=Math.min(Math.max(i.y,0),this.y)/this.y-.5}if(e>0){if(this.zoom>=4)return;this.zoom*=1.1,this.padX-=r*this.padX/4,this.padY-=n*this.padY/4}else{if(this.zoom<=.5)return;this.zoom*=.9,this.padX+=r*this.padX/4,this.padY+=n*this.padY/4}this.draw({func:"handleWheelEvent",par:[t,e,i],prop:a})}else if("Network"==this.graphType){if(this.cancelEvent(t),i||(i=this.adjustedCoordinates(t),t.ac={x:i.x,y:i.y}),i){"keydown"==t.type&&(i.x=this.width/2,i.y=this.height/2);var o=i.x/this.scaleFactorX-this.offsetX,h=i.y/this.scaleFactorY-this.offsetY,l=this.scaleFactorX*this.zoomStep,c=this.scaleFactorY*this.zoomStep,d=Math.min(l,c),p=Math.abs(e>0?this.zoom+d:this.zoom-d),g=this.networkFreeze?Math.min(this.scaleFactorX,this.scaleFactorY)*p:Math.min(this.x/(this.maxX-this.minX),this.y/(this.maxY-this.minY))*p,u=g,m=this.x/g,f=this.y/u,y=m/2-(this.minX+this.maxX)/2+this.left/g,x=f/2-(this.minY+this.maxY)/2+this.top/u,v=i.x/g-y-o,b=i.y/u-x-h;this.panningX=v,this.panningY=b,this.zoom=p,this.draw({network:!0,func:"handleWheelEvent",par:[t,e,i],prop:a})}}else if("Circular"==this.graphType){if(this.cancelEvent(t),i||(i=this.adjustedCoordinates(t),t.ac={x:i.x,y:i.y}),i){var A=this.width/2,w=this.height/2,C=A-i.x,T=w-i.y,S=1*(e>0?-1:1)*.1;this.panningX+=C*S*2,this.panningY+=T*S*2,this.zoom+=S,this.draw({func:"handleWheelEvent",par:[t,e,i],prop:a})}}else if("Map"==this.graphType&&!this.layoutComb&&(this.cancelEvent(t),i||(i=this.adjustedCoordinates(t),t.ac={x:i.x,y:i.y}),i)){if("orthographic"==this.mapProjection)this.zoom+=e>0?.1*this.zoom:-.1*this.zoom;else{this.panningX=0,this.panningY=0;var M=this.meta.map.geojson,D=(S=M.zoom+(e>0?.1:-.1),Math.pow(2,S)/Math.pow(2,M.zoom)),k=this.width/2+(i.x-this.width/2)*(1-1/D),L=this.height/2+(i.y-this.height/2)*(1-1/D),I=this.mapPointToCoordinate([k+M.center[0],L+M.center[1]]);M.geometry.zoom=S,M.geometry.center=I,M.isZoomed=!0}this.draw({func:"handleWheelEvent",par:[t,e,i],prop:a})}return this.userEvents.wheel&&this.userEvents.wheel.call(this,t,e,this),!1}},this.getTreeNode=function(t){if(null!=t){t=t.toString().replace("Tree-Node:","");for(var e=this.data.tree.plot.descendants(),i=e.length,s=0;s<i;s++){var a=e[s];if(a.id==t)return a}}return!1},this.handleTreeClick=function(t){if(t){var e=!1,i=this.getTreeNode(t.id);i&&(e=!0,this.data.tree.click=i,i.children?(i._children=i.children,i.children=null):(i.children=i._children,i._children=null)),e&&this.draw({func:"handleTreeClick",par:[t]})}},this.handleDOEClick=function(t,e){var i=!!e&&this.extractDataObject(e,!1,t);if(this.isDOE&&e&&this.layoutValidN){if(e[0].toString().match(/legend|PieVar/))return!1;i&&i.w?i.y?this.dataStndBy.l.doe=[e[2]]:this.dataStndBy.l.doe=i.w.grps[0]:i&&i.y.pie?this.dataStndBy.l.doe=i.y.pie[0]:i&&i.y.treemap?(this.dataStndBy.l.doe=i.y.treemap[0],this.dataStndBy.l.treemap=i.y.smps[0]):i&&i.y.histogram?this.dataStndBy.l.doe=i.y.histogram[0]:e&&e[1]&&(this.dataStndBy.l.doe=[e[1]]),this.draw({func:"handleDOEClick",par:[e],prop:{layoutValidN:this.layoutValidN}})}},this.handleChordMouseOver=function(t){t&&this.highlightCanvas(this.getKeys(this.circularChord.segments[t.id].ribbons))},this.getEventAreaData=function(t){var e=this.getRenderObjects(t),i=this.getRenderObjectIndices(e);return this.extractDataObject(i,!1,e)},this.handleMouseEvents=function(t,e,i){var s=this.getRenderObjectIndices(i);if(this.isTransition())return!1;if(this.lastEvent=t,this.layoutComb&&(this.setActiveLayout(t),null==!this.layoutValidN))return!1;var a=!!s&&this.extractDataObject(s,!1,i);return this.userEvents[e]&&("object"==typeof this.userEvents[e]&&this.userEvents[e].handler&&this.userEvents[e].scope?this.userEvents[e].handler.apply(this.userEvents[e].scope,[a,t,this,i,s]):"object"==typeof this.userEvents[e]&&this.userEvents[e].handler?this.userEvents[e].handler(a,t,this,i,s):this.userEvents[e](a,t,this,i,s)),a&&"Chord"==a.objectType},this.formatCoords=function(t,e){var i=[],s=e.length;if("Network"!=this.graphType)for(var a=0;a<s;a++)a%2?i.push(this.sprintf("%.0f",(e[a]+this.translateY)*this.scaleY)):this.layoutValid&&"circle"==t&&2==a?i.push(this.sprintf("%.0f",e[a]*((this.scaleX+this.scaleY)/2))):i.push(this.sprintf("%.0f",(e[a]+this.translateX)*this.scaleX));else for(a=0;a<s;a++)i.push(this.sprintf("%.0f",parseInt(e[a])));"rect"==t&&(i=[Math.min(i[0],i[2]),Math.min(i[1],i[3]),Math.max(i[0],i[2]),Math.max(i[1],i[3])]);return i.join(",")},this.drawArea=function(t){var e=this.meta.canvas.ctx2;e.strokeStyle="red",e.fillStyle="green",e.lineWidth=2;var i=[],s=this.meta.render.objects,a=s.length;if(t)i.push(t);else for(var r=0;r<a;r++)s[r].idx&&i.push(r);var n=i.length;for(r=0;r<n;r++){var o=this.cloneObject(s[i[r]]);if(o.idx){var h=o.area;switch(h[0]){case"rect":e.beginPath(),e.moveTo(h[1],h[2]),e.lineTo(h[3],h[2]),e.lineTo(h[3],h[4]),e.lineTo(h[1],h[4]),e.closePath(),e.stroke();break;case"circle":e.beginPath(),e.arc(h[1],h[2],Math.abs(h[3]),0,2*Math.PI,!0),e.closePath(),e.stroke();break;case"poly":e.beginPath(),e.moveTo(h[1],h[2]),e.arc(h[1],h[2],5,0,2*Math.PI,!0),e.closePath(),e.fill(),e.beginPath(),e.moveTo(h[1],h[2]);for(var l=3;l<h.length;l+=2)e.lineTo(h[l],h[l+1]);e.closePath(),e.stroke()}}}},this.adjustNetworkObjects=function(t){if(!t)return!1;if("circle"==t[0])t[1]=this.adjustNetworkObjectX(t[1]),t[2]=this.adjustNetworkObjectY(t[2]),t[3]=t[3]*Math.min(this.scaleFactorX,this.scaleFactorY)*.75;else for(var e=t.length,i=1;i<e;i++)t[i]=i%2?this.adjustNetworkObjectX(t[i]):this.adjustNetworkObjectY(t[i]);return t},this.adjustNetworkObjectFont=function(t){var e=this.getFontPt(t),i=Math.floor(e*Math.min(this.scaleFactorX,this.scaleFactorY));return t.replace(e,i)},this.adjustNetworkObjectX=function(t){return(this.offsetX+t)*this.scaleFactorX},this.adjustNetworkObjectY=function(t){return(this.offsetY+t)*this.scaleFactorY},this.adjustBackNetworkObjectX=function(t){return t/this.scaleFactorX-this.offsetX},this.adjustBackNetworkObjectY=function(t){return t/this.scaleFactorY-this.offsetY},this.adjustNetworkMouseDownX=function(t){return(t-this.xMouseDown)/this.scaleFactorX},this.adjustNetworkMouseDownY=function(t){return(t-this.yMouseDown)/this.scaleFactorY},this.clearHighlightCanvas=function(){this.meta.canvas.ctx2.canvas.width=this.width,this.meta.canvas.ctx2.canvas.height=this.height},this.highlightCanvas=function(t){this.clearHighlightCanvas(),this.isHighlightCanvas=!0;var e=this.meta.render.objects,i=function(t){for(var i=t;i>=0;i--)if("setClipArea"==e[i].func)return e[i].params[0];return!1};if(this.lassoSelected&&this.lassoPoints&&this.lassoPoints.length)this.drawShape("polygon",this.lassoPoints[0],this.lassoPoints[1],!1,!1,"rgba(245,245,245,0.75)","rgb(0,0,0)");else if(t){for(var s={polygon:!0,path:!0,spline:!0,confidence:!0,violin:!0},a=[],r=t.length,n=0;n<r;n++)a=a.concat(this.meta.render.groups[e[t[n]].group]);a=a.sort();var o={},h=!1,l=this.outlineWidth;if(this.highlightGreyOut&&function(){for(var t=0;t<a.length;t++)if("Data"==e[a[t]].type)return!0;return!1}()){var c="rgba(255,255,255,"+this.highlightGreyOutTransparency+")";this.drawShape("rectangle",this.width/2,this.height/2,this.width,this.height,c,c)}var d=a.length,p=2*Math.PI;for(n=0;n<d;n++)if(!o[a[n]]){o[a[n]]=!0;var g=this.meta.render.objects[a[n]],u=g.func,m=this.cloneObject(g.params),f=this.graphType;if(this.outlineWidth=l,g&&g.type.match(/Axes/))continue;if(u&&m){switch(u){case"drawLine":if(m[1]==m[3]?(m[1]=.5+(m[1]+.5<<1>>1),m[3]=m[1]):m[2]==m[4]&&(m[2]=.5+(m[2]+.5<<1>>1),m[4]=m[2]),"Network"==f&&!this.preScaleNetwork){if(m[1]=this.adjustNetworkObjectX(m[1]),m[2]=this.adjustNetworkObjectY(m[2]),m[3]=this.adjustNetworkObjectX(m[3]),m[4]=this.adjustNetworkObjectY(m[4]),this.isArray(m[12])){pc=[];for(var y=0;y<m[12].length;y++){pc[y]=[];for(var x=0;x<m[12][y].length;x++)pc[y][x]=x%2?this.adjustNetworkObjectY(m[12][y][x]):this.adjustNetworkObjectX(m[12][y][x])}m[12]=pc}m[8]=m[8]*this.scaleFactorX,m[9]=m[9]*this.scaleFactorY}"error"==m[0]?this.outlineWidth=3:m[6]=m[6]?parseFloat(m[6])+2:3,"Network"==f||h||(this.setClipArea(m[11]?m[11]:i(a[n])),h++);break;case"drawShape":"object"==typeof g.params[5]&&(m[5]=g.params[5]),"Network"!=f||this.preScaleNetwork||"Legends"==g.type?s.hasOwnProperty(m[0])?m[9]=2:m[0]:(m[1]=this.adjustNetworkObjectX(m[1]),m[2]=this.adjustNetworkObjectY(m[2]),m[3]=(m[3]+4)*this.scaleFactorX,m[4]=(m[4]+4)*this.scaleFactorY),"sphere"==m[0]&&this.isColorTransparent(m[5])?(m[5]=this.removeColorTransparency(m[5],!0),m[6]=this.foreground,m[9]=2):"bezier"==m[0]&&m[8]&&this.isArray(m[8])?(m[5]=this.getLinearGradient(0,0,m[3],0,[m[8][0],m[8][1]]),m[6]=this.foreground):"pie"==m[0]&&m[12]%p==m[13]%p?(m[0]="sphere",m[5]=this.addColorTransparency(m[5],.7,!0),m[6]=this.foreground,m[12]=!1,m[13]=!1):(m[5]=this.addColorTransparency(m[5],.7,!0),m[6]=this.foreground),"Network"==f||h||"Data"!=g.type||(this.setClipArea(m[11]?m[11]:i(a[n])),h++);break;case"drawArcText":case"drawText":"Network"!=f||this.preScaleNetwork||"Legends"==g.type?(m[1]-=0,m[2]-=0):(m[1]=this.adjustNetworkObjectX(m[1]),m[2]=this.adjustNetworkObjectY(m[2]),m[3]=this.adjustNetworkObjectFont(m[3]));break;default:return this.isHighlightCanvas=!1,void(this.outlineWidth=l)}this[u].apply(this,m),this.outlineWidth=l}}h&&this.resetClipArea()}this.isHighlightCanvas=!1},this.flash=function(t,e,i,s,a,r){var n=this.$cX("div",{id:this.target+"canvasXpressFlash"+(new Date).getTime()},{left:t-i/2+"px",top:e-s/2+"px",width:i+"px",height:s+"px",borderRadius:"999px",WebkitBorderRadius:"999px",MozBorderRadius:"999px",opacity:.6,filter:"alpha(opacity = 60)",position:"absolute",zIndex:1e5,display:"block",backgroundColor:a||this.resizerBackgroundColor});this.meta.canvas.ctx.canvas.parentNode.appendChild(n),r||(r=3);var o=this,h=1;(function(){this.update=function(){n.style.display=h%2?"none":"block",h>=2*r&&(o.meta.canvas.ctx.canvas.parentNode.removeChild(n),clearInterval(t)),h++};var t=o.setInterval(this.update,300)}).call()},this.initializeCanvasEvents=function(){this.disableEvents||this.disableCanvas||this.addRemoveCanvasListeners("addEvtListener")},this.toRender=function(t){var e=this,i=function(t){return!(!g||!g.map.hasOwnProperty(t))&&g.map[t]},s=t.p,a=t.i,r=t.m,n=t.g,o=t.s,h=t.b,l=t.t,c=t.h,d=t.d,p=this.meta.render,g=p.transition,u=s.shift(),m=!!t.i&&function(t,i){var s=t.replace("draw","get")+"Area";return e[s].apply(e,i)}(u,s),f=u.match(/^draw/)?u.replace("draw","").substring(0,1):"O",y=p.objects.length,x=this.transparencyHidden;n=null!=n?n.toString():y,p.groups.hasOwnProperty(n)||(p.groups[n]=[]),p.types.hasOwnProperty(l)||(p.types[l]={all:[],drawShape:[],drawLine:[],drawText:[],drawArcText:[],other:[]}),p.order.includes(l)||p.order.push(l);var v=p.types[l].hasOwnProperty(u)?p.types[l][u].length:p.types[l].other.length,b=a&&this.isArray(a)?a.join(":"):a||l+":"+f+":"+this.padNumber(v);switch(p.objects.push({func:u,params:s,idx:a,id:b,n:y,modifier:r,group:n,area:m,layout:!!this.layoutComb&&this.layoutCurrent,type:l,skip:o,baseline:h}),p.groups[n].push(y),p.types[l].all.push(y),u){case"drawShape":p.types[l].drawShape.push(y);break;case"drawLine":p.types[l].drawLine.push(y);break;case"drawText":case"drawArcText":p.types[l].drawText.push(y);break;default:p.types[l].other.push(y)}if(n!=y&&"drawLine"==u&&p.objects[n].idx&&(a||(a=p.objects[n].idx),b=a.join(":")+":"+p.groups[n].length,p.objects[y].id=b,this.showBoxplotOriginalData),p.origin[y]=[],"Data"==l&&a&&!this.graphType.match(/Scatter|Treemap/))if(this.isGroupedData)if(this.isDotplotGraph()&&"box"!=a[a.length-1]||this.graphType.match(/Stacked/))b=a[0]+":"+a[a.length-1],p.map[b]=y,p.origin[y].push(i(b));else if(2==a.length&&n==y)for(var A=(C=this.data.w.grps[a[1]]).length,w=0;w<A;w++)b=a[0]+":"+C[w],p.map[b]=y,p.origin[y].push(i(b));else if(3==a.length&&"box"==a[2]){var C;for(A=(C=this.data.w.grps[a[1]]).length,w=0;w<A;w++)b=a[0]+":"+C[w]+":box",p.map[b]=y,p.origin[y].push(i(b))}else p.map[b]=y,p.origin[y].push(i(b));else p.map[b]=y,p.origin[y].push(i(b));else p.map[b]=y,p.origin[y].push(i(b));if((CanvasXpress.graphTypes.OneTwoThreeeDGraphs.includes(this.graphType)||"TagCloud"==this.graphType||"Map"==this.graphType)&&c)if("color"==this.filterMode)switch(u){case"drawShape":s[5]=this.missingDataColor,s[6]=this.missingDataColor;break;case"drawLine":s[5]=this.missingDataColor;break;case"drawText":s[4]=this.missingDataColor;break;case"drawArcText":s[7]=this.missingDataColor}else switch(u){case"drawShape":s[5]=this.addColorTransparency(s[5],x,!0),s[6]=this.addColorTransparency(s[6]||this.foreground,x,!0);break;case"drawLine":s[5]=this.addColorTransparency(s[5],x,!0);break;case"drawText":s[4]=this.addColorTransparency(s[4],x,!0);break;case"drawArcText":s[7]=this.addColorTransparency(s[7],x,!0)}return(this.debug||CanvasXpress.system.isRStudio||d)&&(u.match(/disable|enable|reset/)?this[u].apply(this):this[u].apply(this,s)),y},this.resetRender=function(t,e){var i=this.meta.render;i.objects.length>0&&!this.skipTransition&&(delete i.transition,e||(i.transition=this.cloneObject(i))),t||(i.objects=[],i.groups={},i.types={},i.order=[],i.map={},i.origin=[])},this.render=function(t,e){if(!this.debug&&!this.skipRender&&!CanvasXpress.system.isRStudio){this.meta.time.render.push((new Date).getTime());var i=this.getCanvasContext(),s=this.meta.render.objects;if(s.length>0){t||(t=0),e||(e=s.length);for(var a=t;a<e;a++){var r=s[a],n=r.params;switch(r.func){case"drawShape":this.drawShape(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15],i);break;case"drawLine":this.drawLine(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15],n[16],i);break;case"drawText":this.drawText(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],i);break;case"setClipArea":this.setClipArea(n[0],i);break;case"resetClipArea":this.resetClipArea(i);break;default:this[r.func].apply(this,r.params)}}}}},this.initializeCanvasEvents()},CanvasXpress.prototype.initCleanupEvents=function(){this.destroy=function(t,e){if(t){if("object"==typeof t&&t.target&&(t=t.target),1==CanvasXpress.instances.length&&CanvasXpress.instances[0].target==t)return this.destroy(!1,e);this.removeInstance(t,e)}else this.removeInstance(this.target,e),CanvasXpress.cacheImages={},CanvasXpress.cacheText={},CanvasXpress.stack={},CanvasXpress.current=!1,CanvasXpress.selector={vars:{},smps:{},meta:{},comp:{},nodes:{},edges:{},mixed:{},selections:0,graphType:!1},CanvasXpress.hidden={hiddenVars:{},hiddenSmps:{},hiddenGrps:{},hiddenMapFeatures:{}}},this.destroyInDOM=function(t){for(var e=0,i=t.length;t.length>0&&e<=i;)this.destroy(t[0].id),e++},this.monitorInstances=function(){var t=this;setTimeout((function(){for(var e=[],i=0;i<CanvasXpress.instances.length;i++){t.$(CanvasXpress.instances[i].target)||e.push(CanvasXpress.instances[i].target)}for(i=0;i<e.length;i++)t.destroy(e[i])}),1e3)},this.removeInstance=function(t,e){var i=CanvasXpress.instances;CanvasXpress.instances=[];for(var s=0;s<i.length;s++)if(i[s].target!=t)CanvasXpress.instances.push(i[s]);else{var a=i[s];if(a.isR||e){var r=a.$("container-"+a.target);if(r){var n=r.parentNode,o=a.$cX("canvas",a.meta.dom);for(id in CanvasXpress.chain)if(CanvasXpress.chain[id]==o.id){o.id=id;break}a.resetTooltipDivs(),a.cleanEvtListeners(),a.removeTarget("container-"+a.target),a.removeTarget(a.target+"-cX-Info"),delete CanvasXpress.stack[a.target],n.appendChild(o),"Network"==a.graphType&&this.isR&&(o.width=0,o.height=0)}}else a.resetTooltipDivs(),a.cleanEvtListeners(),a.removeTarget("container-"+a.target),a.removeTarget(a.target+"-cX-Info"),delete CanvasXpress.stack[a.target]}},this.cleanEvtListeners=function(){this.addRemoveLinkListeners("removeEvtListener"),this.addRemoveToolbarListeners("removeEvtListener"),this.addRemoveCodeListeners("removeEvtListener"),this.addRemoveBinListeners("removeEvtListener"),this.addRemoveCustomizerListeners("removeEvtListener"),this.addRemoveItemListeners("removeEvtListener"),this.addRemoveDataTableListeners("removeEvtListener"),this.removeGenericDataFilterListenersOrReset(),this.addRemoveDataFilterListeners("removeEvtListener"),this.addRemoveCanvasListeners("removeEvtListener"),this.addRemoveMotionListeners("removeEvtListener"),this.addRemoveNavigationListeners("removeEvtListener"),this.removeEvtListener(document,"mousemove",this.mousemoveDoc,!1),this.removeEvtListener(document,"touchmove",this.mousemoveDoc,!1),this.removeEvtListener(document,"mouseup",this.mouseupDoc,!1),this.removeEvtListener(document,"touchend",this.mouseupDoc,!1),this.removeEvtListener(document,"keydown",this.keydownDoc,!1),this.removeEvtListener(document,"keyup",this.keyupDoc,!1),this.removeEvtListener(window,"resize",this.resizeWindow,!1)}},CanvasXpress.prototype.initEvents=function(){var t;this.cloneEvent=function(t){for(var e=["ac","altKey","bubbles","button","buttons","cancelBubble","cancelable","charCode","code","clientX","clientY","ctrlKey","defaultPrevented","deltaMode","deltaX","deltaY","deltaZ","detail","eventPhase","isTrusted","isTrusted","keyCode","keyIdentifier","location","layerX","layerY","metaKey","movementX","movementY","offsetX","offsetY","pageX","pageY","repeat","returnValue","screenX","screenY","shiftKey","timeStamp","type","wheelDelta","wheelDeltaX","wheelDeltaY","which","x","y"],i=["clientX","clientY","force","identifier","pageX","pageY","radiusX","radiusY","rotationAngle","screenX","screenY"],s={srcElement:t.srcElement?t.srcElement.id:t.target.id,target:t.target.id},a=0;a<e.length;a++)s[e[a]]=t[e[a]];if(s.ac||(s.ac=this.adjustedCoordinates(s)),s.xMouseDown=this.xMouseDown,s.yMouseDown=this.yMouseDown,t.touches){s.touches=[];for(a=0;a<t.touches.length;a++){s.touches[a]={target:t.touches[a].target.id};for(var r=0;r<i.length;r++)s.touches[a][i[r]]=t.touches[a][i[r]];s.touches[a].ac||(s.touches[a].ac=this.adjustedCoordinates(t.touches[a],t.touches[a].target))}}return s},this.cleanTouchEvent=function(t){for(var e=["clientX","clientY","force","identifier","pageX","pageY","radiusX","radiusY","rotationAngle","screenX","screenY"],i={target:t.target.id,ac:this.adjustedTouchCoordinates(t,t.target),time:(new Date).getTime()},s=0;s<e.length;s++)i[e[s]]=t[e[s]];return i},this.cleanEventInArguments=function(t){for(var e=0;e<t.length;e++)t[e]instanceof Event&&(t[e]=this.cloneEvent(t[e]));return t},this.getOffset=function(t){for(var e=0,i=0;t&&!isNaN(t.offsetLeft)&&!isNaN(t.offsetTop);)e+=t.offsetLeft-t.scrollLeft,i+=t.offsetTop-t.scrollTop,t=t.offsetParent;return{top:i,left:e}},this.regularCoordinates=function(t,e){var i={};if(t&&t.ac)i.x=t.ac.x,i.y=t.ac.y;else if(null==t.pageX&&null!=e.clientX){var s=t.target.ownerDocument||window.document,a=s.documentElement,r=s.body;i.x=e.clientX+(a&&a.scrollLeft||r&&r.scrollLeft||0)-(a&&a.clientLeft||r&&r.clientLeft||0),i.y=e.clientY+(a&&a.scrollTop||r&&r.scrollTop||0)-(a&&a.clientTop||r&&r.clientTop||0)}else i.x=t.pageX,i.y=t.pageY;return i},this.renderObjectCoordinates=function(t,e,i,s,a,r){var n=this,o=this.centroidArea(t.area),h=function(t){for(var e=t.length>1,i={maxX:e?Number.NEGATIVE_INFINITY:0,maxY:e?Number.NEGATIVE_INFINITY:0,minX:e?Number.POSITIVE_INFINITY:0,minY:e?Number.POSITIVE_INFINITY:0},s=0;s<t.length;s++){var a=n.meta.render.objects[t[s]];"error"==a.params[0]&&(i.minX=Math.min(i.minX,a.params[1],a.params[3]),i.minY=Math.min(i.minY,a.params[2],a.params[4]),i.maxX=Math.max(i.maxX,a.params[1],a.params[3]),i.maxY=Math.max(i.maxY,a.params[2],a.params[4]))}return{left:i.minX,right:i.maxX,top:i.minY,bottom:i.maxY}}(this.meta.render.groups[t.group]),l=[o[0],o[1]],c=this.margin*(s||0),d=t.hasOwnProperty("layout")&&null!=t.layout&&0!=t.layout?this.layoutParams[t.layout]:this,p=t.area[3]/2+c,g=i?this.marginLeft+d.offsetX+d.left:0,u=i?this.marginTop+d.offsetY+d.top:0,m=i?d.x:1,f=i?d.y:1,y=i?2:0,x=this.marginLeft+d.offsetX+d.left,v=this.marginTop+d.offsetY+d.top,b={};switch("rect"==t.area[0]?l[0]=t.area[3]+c:"circle"==t.area[0]&&(l[0]=t.area[1]+p),b.right=[Number(((l[0]-g)/m).toFixed(y)),Number(((l[1]-u)/f).toFixed(y))],l=[o[0],o[1]],"rect"==t.area[0]?l[0]=t.area[1]-c:"circle"==t.area[0]&&(l[0]=t.area[1]-p),b.left=[Number(((l[0]-g)/m).toFixed(y)),Number(((l[1]-u)/f).toFixed(y))],l=[o[0],o[1]],"rect"==t.area[0]?l[1]=t.area[2]-c:"circle"==t.area[0]&&(l[1]=t.area[2]-p),b.top=[Number(((l[0]-g)/m).toFixed(y)),Number(((l[1]-u)/f).toFixed(y))],l=[o[0],o[1]],"rect"==t.area[0]?l[1]=t.area[4]+c:"circle"==t.area[0]&&(l[1]=t.area[2]+p),b.bottom=[Number(((l[0]-g)/m).toFixed(y)),Number(((l[1]-u)/f).toFixed(y))],b.center=[b.top[0],b.right[1]],l=[o[0],o[1]],e){case"center":break;case"right":"rect"==t.area[0]?l[0]=t.area[3]+c:"circle"==t.area[0]&&(l[0]=t.area[1]+p),h.right>0&&(l[0]=Math.max(l[0],h.right+c));break;case"left":"rect"==t.area[0]?l[0]=t.area[1]-c:"circle"==t.area[0]&&(l[0]=t.area[1]-p),h.left>0&&(l[0]=Math.min(l[0],h.left-c));break;case"top":"rect"==t.area[0]?l[1]=t.area[2]-c:"circle"==t.area[0]&&(l[1]=t.area[2]-p),h.top>0&&(l[1]=Math.min(l[1],h.top-c));break;case"bottom":"rect"==t.area[0]?l[1]=t.area[4]+c:"circle"==t.area[0]&&(l[1]=t.area[2]+p),h.bottom>0&&(l[1]=Math.max(l[1],h.bottom+c))}return[Number(((l[0]-g)/m).toFixed(y)),Number(((l[1]-u)/f).toFixed(y)),b,[Number(d.x*(a||.5)+x),Number(d.y*(r||.5)+v)],h]},this.relativeCoordinates=function(t){var e={x:0,y:0};if(t&&t.ac)e.x=t.ac.x,e.y=t.ac.y;else for(;t&&!isNaN(t.offsetLeft)&&!isNaN(t.offsetTop);)e.x+=t.offsetLeft,e.y+=t.offsetTop,t=t.offsetParent;return e},this.absoluteCoordinates=function(t){var e={x:0,y:0};if(t&&t.ac)e.x=t.ac.x,e.y=t.ac.y;else for(;t&&!isNaN(t.offsetLeft)&&!isNaN(t.offsetTop);)e.x+=t.offsetLeft-t.scrollLeft,e.y+=t.offsetTop-t.scrollTop,t=t.offsetParent;return e},this.getBoundingClientRect=function(t){var e=window,i=e.document,s=i.body,a=void 0!==e.pageXOffset?e.pageXOffset:(i.documentElement||s.parentNode||s).scrollLeft,r=void 0!==e.pageYOffset?e.pageYOffset:(i.documentElement||s.parentNode||s).scrollTop,n=t.getBoundingClientRect();if(t!==s)for(var o=t.parentNode;o!==s&&o.scrollLeft&&o.scrollTop;)a+=o.scrollLeft,r+=o.scrollTop,o=o.parentNode;return{bottom:n.bottom+r,height:n.height,left:n.left+a,right:n.right+a,top:n.top+r,width:n.width,viewportWidth:s.clientWidth,viewportHeight:s.clientHeight}},this.adjustedCoordinates=function(t,e){if(e||(e=this.$(this.target)),e&&t){var i=t.target||t.srcElement,s={};if(CanvasXpress.system.isReveal&&i&&i.tagName&&"canvas"==i.tagName.toLowerCase()){var a=1/Reveal.getScale(),r=i.getClientRects();s.x=t.x-r[0].left/a,s.y=t.y-r[0].top/a}else try{i&&"CanvasXpressDataTableDOE"==i.className&&(e=this.$(this.target));var n=e.parentNode.getClientRects(),o=!(!t||!t.changedTouches)&&t.changedTouches[0];if(t&&t.ac)s.x=t.ac.x,s.y=t.ac.y;else if(n&&n[0]){var h=window.document,l=n[0].left,c=n[0].top,d=t&&t.clientX?t.clientX:o?o.clientX:t&&t[0]?t[0]:l,p=t&&t.clientY?t.clientY:o?o.clientY:t&&t[1]?t[1]:c;s.x=h.body.scrollLeft>Math.abs(l)+d&&d>h.body.scrollLeft-l?Math.abs(l)+d:d-l,s.y=h.body.scrollTop>Math.abs(c)+p&&p>h.body.scrollTop-c?Math.abs(c)+p:p-c}else s.x=0,s.y=0}catch(t){return!1}return s}return!1},this.adjustedTouchCoordinates=function(t,e){if(e||(e=this.$(this.target)),e){var i={},s=window.document,a=e.parentNode.getClientRects(),r=a[0].left,n=a[0].top,o=t.clientX,h=t.clientY;return i.x=s.body.scrollLeft>Math.abs(r)+o&&o>s.body.scrollLeft-r?Math.abs(r)+o:o-r,i.y=s.body.scrollTop>Math.abs(n)+h&&h>s.body.scrollTop-n?Math.abs(n)+h:h-n,i}},this.isPointInsidePolygon=function(t,e,i){for(var s=!1,a=0,r=i[0].length-1;a<i[0].length;r=a++){var n=i[0][a],o=i[1][a],h=i[0][r],l=i[1][r];o>e!=l>e&&t<(h-n)*(e-o)/(l-o)+n&&(s=!s)}return s},this.isAreaInsidePolygon=function(t,e){var i,s;switch(t[0]){case"rect":i=(t[1]+t[3])/2,s=(t[2]+t[4])/2;break;case"circle":i=t[1],s=t[2];break;case"poly":var a=this.centroidArea(t);i=a[0],s=a[1]}return this.isPointInsidePolygon(i,s,e)},this.isObjectInsideArea=function(t,e,i,s,a){var r,n;switch(t[0]){case"rect":r=(t[1]+t[3])/2,n=(t[2]+t[4])/2;break;case"circle":r=t[1],n=t[2];break;case"poly":var o=this.centroidArea(t);r=o[0],n=o[1]}return this.isPointInsideArea(r,n,["rect",e,i,s,a])},this.isPointInsideArea=function(t,e,i){if(!i)return!1;switch(i[0]){case"rect":return i[1]>i[3]&&(i[5]=i[1],i[1]=i[3],i[3]=i[5]),i[2]>i[4]&&(i[5]=i[2],i[2]=i[4],i[4]=i[5]),t>=i[1]&&t<=i[3]&&e>=i[2]&&e<=i[4];case"circle":var s=i[3]/2;return t>=i[1]-s&&t<=i[1]+s&&e>=i[2]-s&&e<=i[2]+s;case"poly":for(var a=[],r=[],n=!1,o=1;o<i.length;o++)o%2?a.push(i[o]):r.push(i[o]);r[0]<r[1]&&(r=r.reverse(),a=a.reverse());o=0;for(var h=a.length-1;o<a.length;h=o++)(r[o]<=e&&e<r[h]||r[h]<=e&&e<r[o])&&t<(a[h]-a[o])*(e-r[o])/(r[h]-r[o])+a[o]&&(n=!n);return n}},this.isEvent=function(t,e){var i=this.adjustedCoordinates(t);if(i){var s=this.getTargetEvent(t);if(this.xMouseMove=i.x,this.yMouseMove=i.y,s&&s.id&&s.id.match(this.target)){for(var a=this.meta.render.objects,r=[],n=a.length-1;n>=0;n--){var o=a[n];if(o.idx&&this.isPointInsideArea(i.x,i.y,o.area)){if(!e)return[n];r.push(n)}}if(e&&r.length>0)return r}}return!1},this.getRenderObjects=function(t,e,i){var s=[],a=i||this.isEvent(t,e);if(a){for(var r=a.length,n=0;n<r;n++){var o=this.meta.render.objects[a[n]];s.push(o)}return s}return!1},this.getRenderObjectIndices=function(t){var e=[];if(t){if(1==t.length)return t[0].modifier?[t[0].idx+t[0].modifier]:t[0].idx;for(var i=t.length,s=0;s<i;s++)e.push(t[s].idx);return e}return!1},this.getBoundsXY=function(t){var e=this.layoutComb&&this.layoutParams&&this.layoutParams.length?this.layoutParams[t]:this,i="Network"==this.graphType?0:this.marginLeft+e.offsetX,s="Network"==this.graphType?0:this.marginTop+e.offsetY;return"Map"==this.graphType?[i+e.left,i+e.left+e.width,s+e.top,s+e.top+e.height,i,i+e.left+e.width+e.right,s,s+e.top+e.height+e.bottom]:[i+e.left,i+e.left+e.x,s+e.top,s+e.top+e.y,i,i+e.left+e.x+e.right,s,s+e.top+e.y+e.bottom]},this.getUngroupedDataObject=function(t,e,i){return this.isGroupedData&&this.graphType.match(/Dotplot|Boxplot/)&&t.y?(this.isGroupedData=!1,t=this.extractDataObject([i[0],i[2]],!1,e),this.isGroupedData=!0):this.isDOE&&this.graphType.match(/Dotplot|Boxplot/)&&t.w?(this.isDOE=!1,t=this.extractDataObject(t.w.grps[0],this.getVariableIndices(t.w.vars),e),this.isDOE=!0):this.isGroupedData&&t.w&&(this.isGroupedData=!1,t=this.extractDataObject(t.w.grps[0],this.getVariableIndices(t.w.vars),e),this.isGroupedData=!0),t},this.extractDataObject=function(t,e,i){var s=this,a=this.layoutParams,r=this.layoutValidN||0,n=this.scatterPlotMatrix&&this.data.l.data[r]?this.data.l.data[r]:this.isDOE&&0==r&&this.data.l.data?this.data.l.data:this.data,o=[],h=[],l=function(t){var e={},i=s.isGroupedData;for(var a in s.isGroupedData=!1,n.x)if(e[a]=[],t&&t.length)for(var r=0;r<t.length;r++)e[a].push(s.getMetadataValue(t[r],"x",a,"Gantt"==i));return s.isGroupedData=i,e},c=function(t){var e={};for(var i in n.z){e[i]=[];for(var a=0;a<t.length;a++)e[i].push(s.getMetadataValue(t[a],"z",i,"Gantt"==G))}return e},d=function(t){var e=[];if(s.isDOE)for(var i=0;i<t.length;i++)e.push(a[r].data.y.vars[t[i]]);else for(i=0;i<t.length;i++)e.push(n.y.vars[t[i]]);return e},p=function(t,e){var i=e||n.y.smps,o=[];if(s.isDOE)o.push(a[r].data.y.smps[t[0]]);else if(t&&t.length)for(var h=0;h<t.length;h++)o.push(i[t[h]]);return o},g=function(t,e){var i=[];if(e)for(var s=0;s<t.length;s++)i.push(e[t[s]]);return i},u=function(t,e){for(var i=[],s=0;s<t.length;s++)i.push(e.grps[t[s]]);return i},m=function(t,e,i){var o=[];if(s.isDOE)for(var h=0;h<t.length;h++)if(o[h]=[],a[r].data.y.data[t[h]])o[h].push(a[r].data.y.data[t[h]][e[0]]);else{if(!a[r].data.y.data[h])return!1;o[h].push(a[r].data.y.data[h][e[0]])}else if(i||(i="data"),e)for(h=0;h<t.length;h++)if(o[h]=[],s.isTransformedData&&n.y.trans)for(var l=0;l<e.length;l++)o[h].push(s.formatNumber(n.y.trans[t[h]][e[l]]));else for(l=0;l<e.length;l++)o[h].push(n.y[i][t[h]][e[l]]);else if(s.isTransformedData&&n.y.trans)for(h=0;h<t.length;h++)o.push(s.formatNumber(n.y.trans[t[h]]));else for(h=0;h<t.length;h++)o.push(n.y[i][t[h]]);return o};switch(G=this.layoutComb&&!1!==r&&a&&a.length?a[r].graphType:this.graphType){case"Area":case"AreaLine":case"Bar":case"Line":case"BarLine":case"Boxplot":case"Dotplot":case"DotLine":case"Heatmap":case"Pie":case"Stacked":case"StackedLine":case"StackedPercent":case"StackedPercentLine":case"Scatter2D":case"ScatterBubble2D":case"Scatter3D":case"Gantt":case"Meter":case"Circular":case"Treemap":case"TagCloud":case"ParallelCoordinates":case"Sankey":case"Tree":case"Map":if(!t||0==t.length||null==t[0])return;if(isNaN(t[0])){if(t[0]&&t[0].match(/ScatterBoxplot/)){var f={},y=t[0].split(":::");return f.display=y[1],f.objectType="ScatterBoxplot",f.render=i,f}if(t[0]&&t[0].match(/QuantileRegression/)){var x=t[0].split(":");return f={display:t[1],objectType:"QuantileRegression",render:i}}if(t[0]&&t[0].match(/Bin2d/)){x=t[0].split(":");return f={display:t[1],objectType:"Bin2d",render:i}}if(t[0]&&t[0].match(/Loess/)){x=t[0].split("-");return f={display:t[1],objectType:"Loess",render:i}}if(t[0]&&t[0].match(/Contour/))return f=t[1]?{display:t[1].join(" - "),objectType:"Contour",render:i}:{display:t[0].split("-")[1],objectType:"Contour",render:i};if(t[0]&&t[0].match(/Decor-Line/))return f={display:(x=t[0].split(":"))[0],objectType:"Decoration",render:i};if(t[0]&&t[0].match(/Decor-Point/))return f={display:(x=t[0].split(":"))[0],objectType:"Decoration",render:i};if(t[0]&&t[0].match(/QQ-Line/))return f={display:(x=t[0].split(":"))[0],objectType:"QQ-Line",render:i};if(t[0]&&t[0].match(/Confidence/))return f={display:(x=t[0].split(":"))[0],objectType:"Confidence",render:i};if(t[0]&&t[0].match(/Chr/))return f={display:t[0],objectType:"Chr",render:i};if(t[0]&&t[0].match(/Ring/))return f={display:t[0],objectType:"Ring",render:i};if(t[0]&&t[0].match(/Line|Area/))return f={display:(x=t[0].split(":"))[1],objectType:"Line",render:i};if(t[0]&&t[0].match(/Sankey/))return f={display:(x=t[0].split(":"))[1],objectType:"Sankey",render:i};if(t[0]&&t[0].match(/Tree/)){var f={},v=this.getTreeNode(t[0]);return v&&(f={id:v.id,display:v.data.tooltip,objectType:"Tree",render:i}),f}if(t[0]&&t[0].match(/Marker/))return f={id:(x=t[0].split(":"))[1],display:x[2],objectType:"Marker",render:i};if(t[0]&&t[0].match(/Sunburst/))return f={display:(x=t[0].split(":"))[1],objectType:"Sunburst"};if(t[0]&&t[0].match(/Bubble/))return f={display:(x=t[0].split(":"))[1],objectType:"Bubble",render:i};if(t[0]&&t[0].match(/Connect/))return f={display:(x=t[0].split(":"))[1],objectType:"Connect",render:i};if(t[0]&&t[0].match(/Chord/))return f={id:(x=t[0].split(":"))[1],display:x[2],objectType:"Chord",render:i};if(t[0]&&t[0].match(/Outlier/))return f={display:(x=t[0].split(":"))[1],objectType:"Outlier",render:i};if(t[0]&&t[0].match(/Series/))return(x=t[0].split(":")).shift(),f={display:this.data.y.smps[x[0]]+" : "+this.data.y.smps[x[1]],selector:{type:"series",name:[this.data.y.smps[x[0]],this.data.y.smps[x[1]]],id:t[0]},objectType:"Series",render:i};if(t[0]&&t[0].match(/Property/)){(x=t[0].split(":")).shift();var b=x.shift(),A=x.pop(),w=x.join(":");return{display:b+" : "+w,selector:{type:"meta",object:A,factor:b,level:w,id:"Property:"+b+":"+w+":"+A},objectType:"Property",render:i}}if(t[0]&&t[0].match(/Histogram/))return{a:(y=t[0].split("-"))[0],b:y[1],c:y[2],d:y[3],objectType:"Histogram",render:i};if(t[0]&&t[0].match(/Dendrogram/))return(y=t[0].split("-")).length>1?{nodeId:parseInt(y.shift()),height:Number(y.shift()),objectType:y.shift(),name:!!y[0]&&y.join("-"),render:i}:{display:"Circular"==this.graphType?"":"<i>Drag to move</i>",render:i};if(!t[0]||!t[0].match(/,error/)){if(t[0]&&t[0].match(/PieVar/)){y=t[0].split("-");var C=parseInt(y[1]);return{display:n.y.vars[C],objectType:"Var",selector:{type:"var",index:C,name:n.y.vars[C],id:"Var-"+C},render:i}}if(t[0]&&t[0].match(/Var/)){y=t[0].split("-"),C=parseInt(y[1]);var T=t[0].match(/VarOvr|VarOverlay/)?this.smpIndices:[C].concat(this.smpIndices);f=t[0].match(/VarOvr|VarOverlay/)?{}:this.extractDataObject(T,!1,i);if(t[0].match(/VarOvr/)){var S=this.getMetadataValue(C,"z",this.varOverlays[y[2]]);f.display=this.varOverlays[y[2]]+" : "+S,f.objectType="VarOverlay",f.selector={type:"meta",object:"z",factor:this.varOverlays[y[2]],level:S,id:"Property:"+this.varOverlays[y[2]]+":"+S+":z"},f.render=i}else t[0].match(/VarOverlay/)?(f.display=this.varOverlays[y[1]],f.objectType="VarOverlay",f.render=i):(f.display=n.y.vars[C],f.objectType="Var",f.selector={type:"var",index:C,name:n.y.vars[C],id:"Var-"+C},f.render=i);return f}if(t[0]&&t[0].match(/Smp/)){y=t[0].split("-"),C=parseInt(y[1]);if(this.isDOE?f=this.extractDataObject([C],this.layoutParams[this.layoutValidN].varIndices,i):this.isGroupedData&&n.w&&"Treemap"!=G&&"Gantt"!=G&&!this.treemapBy.length>0&&!this.isDOE?(f={y:{vars:d(this.varIndices),smps:p(n.w.grps[C])},z:c(this.varIndices),x:l(n.w.grps[C])}).y.data=m(this.varIndices,n.w.grps[C]):f=this.extractDataObject([C],this.varIndices,i),t[0].match(/SmpOvrSgr/)){y.shift();var M=this.segregateSamplesBy[y.shift()];S=y.join("-");f.display=M+" : "+S,f.objectType="SmpOverlaySgr",f.selector={type:"meta",object:"x",factor:M,level:S,id:"Property:"+M+":"+S+":x"},f.render=i}else if(t[0].match(/SmpOvr/)){M=this.smpOverlays[y[2]],S=this.layoutValid&&n.l.group&&a&&a[r].w&&a[r].w.factors&&a[r].w.factors[M]?a[r].w.factors[M][C]:this.isGroupedData&&n.w?n.w.factors[this.smpOverlays[y[2]]][C]:this.getMetadataValue(C,"x",this.smpOverlays[y[2]]);f.display=this.smpOverlays[y[2]]+" : "+S,f.objectType="SmpOverlay",f.selector={type:"meta",object:"x",factor:this.smpOverlays[y[2]],level:S,id:"Property:"+this.smpOverlays[y[2]]+":"+S+":x"},f.render=i}else t[0].match(/SmpOverlay/)?(f.display=this.smpOverlays[y[1]],f.objectType="SmpOverlay",f.render=i):(f.display=this.layoutValid&&n.l.group&&a&&a[r].w&&a[r].w.glab&&a[r].w.glab[C]?a[r].w.glab[C]:this.isGroupedData&&n.w?n.w.smps[C]:this.isGraphTime?this.dateFormat(n.y.smps[C],this.timeFormat):1==this.isDOE&&0==this.layoutValidN&&n.w&&n.w.smps[C]?n.w.smps[C]:this.isDOE&&this.layoutValidN?f.y.smps[0]:n.y.smps[C],f.objectType="Smp",f.selector={type:this.isGroupedData?"grp":"smp",index:C,name:f.display,id:"Smp-"+C},f.render=i);return f}if(t[0]&&t[0].match(/Cat/)){f={},y=t[0].split("-");return f.display=y[1],f.objectType="Cat",f.render=i,f}if(t[0]&&t[0].match(/Onc/)){f={},y=t[0].split("-");return f.display=y[1],f.objectType="Onc",f.selector={type:"data",object:this["oncoprint"+y[2]],name:f.display,id:"Onc-"+f.display+"-"+y[2]},f.render=i,f}if(t[0]&&t[0].match(/Density|Path/)){f={},y=t[0].split(":");return f.display=y[1],f.objectType=t[0].match(/Density/)?"Density":"Path",f.render=i,f}if(t[0]&&t[0].match(/MapKey/)){o=this.mapVarIds[t[0].split(":")[1]],h=t[1];var D=this.canvasPointToCoordinate(this.xMouseMove,this.yMouseMove),k="[ "+D[1].toFixed(1)+", "+D[0].toFixed(1)+" ]";if(o&&o.length)(f={y:{vars:d(o),smps:p(h)},z:c(o)}).y.data=m(o,h),f.c=k;else{var L=t[0].split(":")[1];if(!CanvasXpress.countries[L]){if(this.meta.map.geojson&&this.meta.map.geojson.features&&this.meta.map.geojson.features[L]&&this.meta.map.geojson.features[L].properties)for(var C in this.meta.map.geojson.features[L].properties)if(C.match(/name/i))return f={idx:L,display:this.meta.map.geojson.features[L].properties[C]+"<br>"+k,type:"MapProperty"};return!1}f={display:CanvasXpress.countries[L][0]+"<br>"+k,type:"MapCountry"}}return f.render=i,f}return}var y=t[0].split(",");o=[parseInt(y[0])],h=[parseInt(y[1])]}else{if(("Pie"==G||"Gantt"==G)&&t.length>2&&!this.isDOE){h=[t[0]];for(C=1;C<t.length;C++)o.push(t[C])}else if(G.match(/Pie|Treemap/)&&this.isDOE)o=[t[0]],h=[t[1]];else if(e)o=e,h=t;else if(this.isGroupedData&&(this.stackBy||this.dodgeBy))o=[t[0]],h=t[3]?t[3]:[t[1]];else{o=[t[0]],h=[];for(C=1;C<t.length;C++)!1===t[C]||t[C].toString().match(/[A-Za-z]/)||h.push(t[C])}if(G.match(/Scatter/)){if(this.colorBy){var I=this.getSampleIndices(this.colorBy);!this.isArray(I)&&I>-1&&h.push(I)}if(this.shapeBy){I=this.getSampleIndices(this.shapeBy);!this.isArray(I)&&I>-1&&h.push(I)}if(this.sizeBy){I=this.getSampleIndices(this.sizeBy);!this.isArray(I)&&I>-1&&h.push(I)}}}if(this.isGroupedData&&n.w&&"Treemap"!=G&&"Gantt"!=G&&!this.treemapBy.length>0&&!this.isDOE||this.isDOE&&0==r&&n.w||this.layoutValid&&n.l&&n.l.group&&!this.isOneDimensionalGraph()&&!this.scatterPlotMatrix&&!this.isDOE){f={x:{},w:{},z:c(o)};if(G.match(/Boxplot|Dotplot|DotLine|Gantt/)&&null!=h[1]){f.y={data:n.y.data[o[0]][h[1]],vars:n.y.vars[o[0]],smps:n.y.smps[h[1]]};var z=l([h[1]]);for(var y in z)f.y[y]=z[y][0];h.pop()}else if("Bar"==G&&(this.stackBy||this.dodgeBy)||"StackedPercent"==G&&this.stackBy){var N=this.isGroupedData;this.isGroupedData=!1,f.x=l(h),f.y={data:m(o,h),vars:d(o),smps:p(h),idxs:h},f.display=t[2],f.objectType=this.stackBy?"Stack":"Dodge",f.stack=t[4],h=[t[1]],this.isGroupedData=N}var B=this.layoutValid&&n.l.group&&a&&a[r].w?a[r].w:n.w;if(h&&o)for(var y in B)"smps"==y?f.w[y]=p(h,B.smps):"labs"==y?f.w[y]=g(h,B.labs):"glab"==y?f.w[y]=g(h,B.glabs):"grps"==y?f.w[y]=u(h,B):"vars"==y?f.w[y]=d(o):B[y].length>o[0]&&B[y][o[0]]&&B[y][o[0]].length>h[0]&&(f.w[y]=[],f.w[y].push(B[y][o[0]][h[0]]));if(!this.stackBy&&!this.dodgeBy&&f.w.grps[0]){N=this.isGroupedData;for(var y in this.isGroupedData=!1,n.x){var P=[];for(C=0;C<f.w.grps[0].length;C++)P.push(this.getMetadataValue(f.w.grps[0][C],"x",y));f.x[y]=P}this.isGroupedData=N}}else{f={y:{vars:d(o),smps:p(h)},z:c(o)};if(this.isDOE||(f.x=l(h)),this.isHistogram&&!this.isDOE&&n.y.histogram&&(f.y.histogram=n.y.histogram[o]),this.isDOE&&n.l){n.l.type[0];if(a[r].data.y.pie){f.y.pie=[];for(C=0;C<o.length;C++)f.y.pie.push(a[r].data.y.pie[o[C]]);f.x=l(a[r].data.y.pie[o[0]])}else if(a[r].data.y.treemap){f.y.treemap=[];for(C=0;C<o.length;C++)f.y.treemap.push(a[r].data.y.treemap[h[C]]);f.x=l(a[r].data.y.treemap[h[0]])}else a[r].data.y.histogram&&(f.y.histogram=a[r].data.y.histogram[o],f.x=l(a[r].data.y.histogram[o[0]][0]))}if(f.y.data=m(o,h),this.isMultidimensionalData){var R=["outline","shape","size"];for(C=0;C<R.length;C++){var O=R[C]+"ByData";n.y[this[O]]&&(f.y[this[O]]=m(o,h,this[O]))}}else"Sankey"==G&&(f.links=this.data.sankey.links[h])}return f.render=i,f;case"Fish":f={};if(t[0]&&t[0].match(/fish/)){x=t[0].split("-").pop();f={display:this.fishCloneLabels.length&&this.fishCloneLabels[x]?this.fishCloneLabels[x]:this.data.y.vars[x]}}else if(t[0]&&t[0].match(/Var/)){y=t[0].split("-"),C=parseInt(y[1]);f.display=this.data.y.vars[C],f.objectType="Var",f.selector={type:"var",index:C,name:this.data.y.vars[C],id:"Var-"+C}}return f.render=i,f;case"Correlation":if(!t||null==t[0]||isNaN(t[0])&&!t[0].match(/^\d/))return;if(x=this.isGroupedData&&n.w?n.w.cor:n.y.cor,"samples"==this.correlationAxis){f={x:{},y:{}};for(var y in n.x){for(P=[],C=0;C<t.length;C++)P.push(this.getMetadataValue(t[C],"x",y));f.x[y]=P}f.y.smps=[n.y.smps[t[0]],n.y.smps[t[1]]]}else{f={y:{},z:{}};for(var y in n.y){var X=[];for(C=0;C<t.length;C++)X.push(n.y[y][t[C]]);f.z[y]=X}f.y.vars=[n.y.vars[t[0]],n.y.vars[t[1]]]}return f.y.data=x[t[0]][t[1]],f.render=i,f;case"Venn":return(f={venn:{data:{}}}).venn.data[this.vennCompartments[t[0]]]=n.venn.data[this.vennCompartments[t[0]]],f.render=i,f;case"Network":f={};if(!t||0==t.length)return;if(this.isArray(t)||(t=[t]),isNaN(t[0]))if(t[0]=t[0].toString(),t[0].match(/legend/))if(t[0].match(/Nodes/))f={nodeLegend:n.legend.nodes};else if(t[0].match(/Edges/))f={edgeLegend:n.legend.edges};else if(t[0].match(/Decorations/))f={decorationLegend:n.legend.decorations};else if(t[0].match(/-legend-indicator-color/))f={indicatorLegend:"ColorIndicator"};else if(t[0].match(/legend-shape|legend-line-|legend-text/))f={display:t[0].split("-")[2]},f={};else{var F=parseInt(t[0].replace("-1-legend-Text",""));f=n.legend&&n.legend.text?{textLegend:n.legend.text[F]}:{}}else if(t[0].match(/-dec/)){C=t[0].split("-");var _=n.nodes[C[0]],E=(x=this.decorations[C[1]],_.tooltip||_.name||_.label||_.id),V=_[x]?_[x]:!(!_.decorations||!_.decorations[x])&&_.decorations[x],H=!!C[3]&&C[2];H?V?null!=V[H]?f.display=E+"<br><b>"+x+"</b> : "+H+" : "+V[H]:f.display=E+"<br><b>"+x+"</b> : "+H+" : NA":f.display=E+"<br><b>"+x+"</b> : NA":f.display=E+"<br><b>"+x+"</b> : "+(V||"NA")}else t[0].match(/-elbow/)?f={edges:[n.edges[parseInt(t[0].split("-"))-n.nodes.length]]}:t[0].match(/-lab/)?f.nodes=[n.nodes[parseInt(t[0].split("-")[0])]]:t[0].match(/-edge/)&&(f={edges:[n.edges[parseInt(t[0].split("-"))-n.nodes.length]]});else for(C=0;C<t.length;C++)t[C]>=n.nodes.length?(f.edges||(f.edges=[]),f.edges.push(n.edges[t[C]-n.nodes.length])):(f.nodes||(f.nodes=[]),f.nodes.push(n.nodes[t[C]]));return f.render=i,f;case"Genome":var G;(f=[])[0]={data:[]};F=0;var q=!(!isNaN(t[0])||!t[0].match(":"))&&t[0].match(/:(\d+)/)[1];for(C=0;C<n.tracks.length;C++){if(F+=_=n.tracks[C].data.length,isNaN(t[0])){if(t[0]=="track-"+C)return{name:n.tracks[C].name,render:i};if(t[0]=="track-"+C+":"+q){var j=parseInt(q)-(F-_);for(var y in n.tracks[C])"data"==y?f[0][y].push(n.tracks[C][y][j]):f[0][y]=n.tracks[C][y];return f.render=i,f}if(t[0]=="dataframe-"+C+":"+q){var U=n.tracks[C].data[0].data[q].xAxis,Y=n.tracks[C].data[0].data[q].yAxis,W=n.tracks[C].dataframe,$={};for(var Q in W)W[Q].length==W[U].length&&($[Q]=W[Q][t[1]]);var K={};return K[U]=W[U][t[1]],K[Y]=W[Y][t[1]],f={values:$,data:K,display:"<b>"+U+"</b> :"+W[U][t[1]]+"<br><b>"+Y+"</b> :"+W[Y][t[1]]+"<br>"},n.tracks[C].data[0].data[q].colorBy&&(f.data[n.tracks[C].data[0].data[q].colorBy]=W[n.tracks[C].data[0].data[q].colorBy][t[1]],f.display+="<b>"+n.tracks[C].data[0].data[q].colorBy+"</b> :"+W[n.tracks[C].data[0].data[q].colorBy][t[1]]+"<br>"),n.tracks[C].data[0].data[q].shapeBy&&(f.data[n.tracks[C].data[0].data[q].shapeBy]=W[n.tracks[C].data[0].data[q].shapeBy][t[1]],f.display+="<b>"+n.tracks[C].data[0].data[q].shapeBy+"</b> :"+W[n.tracks[C].data[0].data[q].shapeBy][t[1]]+"<br>"),f.render=i,f}}else if(t[t.length-1]<F){for(Q=0;Q<t.length;Q++){j=t[Q]-(F-_);for(var y in n.tracks[C])"data"==y?f[0][y].push(n.tracks[C][y][j]):f[0][y]=n.tracks[C][y]}return f.render=i,f}}}},this.getSummaryDataObject=function(t,e){if(!t)return"";switch(this.graphType){case"Bar":case"Line":case"Area":case"AreaLine":case"BarLine":case"Boxplot":case"Dotplot":case"DotLine":case"Fish":case"Heatmap":case"Stacked":case"StackedLine":case"StackedPercent":case"StackedPercentLine":case"Scatter2D":case"ScatterBubble2D":case"Scatter3D":case"Meter":case"Circular":case"Treemap":case"TagCloud":case"ParallelCoordinates":case"Map":var i="";if(t.display)return t.objectType&&t.objectType.match(/ScatterBoxplot|Dendrogram/)?t.display:"<b>"+t.display+"</b><br>";if(this.isGroupedData&&t.w&&t.w.vars[0]||this.configStndBy&&this.configStndBy.groupingFactors&&t.w)i="<b>"+t.w.vars[0]+"</b><br>","mean"==this.summaryType?(i+="<b>"+t.w.smps[0]+"</b>: "+this.formatNumber(t.w.mean[0]),t.w.stdev&&null!=t.w.stdev[0]&&(i+=" <i>&plusmn;"+this.formatNumber(t.w.stdev[0])+"</i>"),t.w.n&&null!=t.w.n[0]&&(i+=" ("+t.w.n+")"),i+="<br>"):"median"==this.summaryType||"iqr"==this.summaryType||"Boxplot"==this.graphType?(t.w.labs&&t.w.median&&t.w.labs[0]?i+="<b>"+t.w.labs[0]+"</b>: "+this.formatNumber(t.w.median[0]):t.w.smps&&t.w.median&&(i+="<b>"+t.w.smps[0]+"</b>: "+this.formatNumber(t.w.median[0])),t.w.stdev&&null!=t.w.stdev[0]&&(i+=" <i>&plusmn;"+this.formatNumber(t.w.stdev[0])+"</i>"),t.w.n&&null!=t.w.n[0]&&(i+=" ("+t.w.n+")"),i+="<br>"):"sum"==this.summaryType?(i+="<b>"+t.w.smps[0]+"</b>: "+this.formatNumber(t.w.sum[0]),t.w.stdev&&null!=t.w.stdev[0]&&(i+=" <i>&plusmn;"+this.formatNumber(t.w.stdev[0])+"</i>"),t.w.n&&null!=t.w.n[0]&&(i+=" ("+t.w.n+")"),i+="<br>"):"min"!=this.summaryType&&"max"!=this.summaryType&&"count"!=this.summaryType||(i+="<b>"+t.w.smps[0]+"</b>: "+this.formatNumber(t.w[this.summaryType][0]),i+="<br>"),this.graphType.match(/Boxplot|Dotplot|DotLine/)&&t.y&&t.y.smps?i+="<b>"+t.y.smps+"</b>: "+this.formatNumber(t.y.data)+"<br>":"Boxplot"==this.graphType&&t.w&&t.w.iqr1&&(i='<div style="max-width:300px;display:grid;grid-template-columns:1fr 1fr;grid-column-gap:5px;">',i+='<div style="text-align:right;"><b>'+t.w.vars[0]+'</b> - </div><div  style="text-align:left;"><b>'+t.w.labs[0]+"</b></div>",i+='<div style="text-align:right;"><b>1st IQR:</b></div><div style="text-align:left;">'+this.formatNumber(t.w.iqr1[0])+"</div>",i+='<div style="text-align:right;"><b>1st Qtl:</b></div><div style="text-align:left;">'+this.formatNumber(t.w.qtl1[0])+"</div>",i+='<div style="text-align:right;"><b>Median:</b></div><div style="text-align:left;">'+this.formatNumber(t.w.median[0])+"</div>",i+='<div style="text-align:right;"><b>3rd Qtl:</b></div><div style="text-align:left;">'+this.formatNumber(t.w.qtl3[0])+"</div>",i+='<div style="text-align:right;"><b>3rd IQR:</b></div><div style="text-align:left;">'+this.formatNumber(t.w.iqr3[0])+"</div>",i+='<div style="text-align:right;"><b>Outliers:</b></div><div style="text-align:left;">'+this.formatNumber(t.w.out[0])+"</div>",i+='<div style="text-align:right;"><b>N-Data:</b></div><div style="text-align:left;">'+this.formatNumber(t.w.n[0])+"</div>",i+="</div>");else if(t.y){i="<b>"+t.y.vars[0]+"</b><br>";for(var s=0;s<t.y.smps.length;s++)if(this.isMultidimensionalData){for(var a=[t.y.data[0][s]],r=["outline","shape","size"],n=0;n<r.length;n++){var o=r[n]+"ByData";t.y[this[o]]&&t.y[this[o]][0][s]&&a.push(t.y[this[o]][0][s])}i+="<b>"+t.y.smps[s]+"</b>: "+a.join(", ")+"<br>"}else if("Map"==this.graphType&&this.motionBy&&this.motionObject)for(n=0;n<this.motionObject.levels.length;n++)this.motionObject.levels[n]==this.motionObject.current&&(t.y.data[n]?i+="<b>"+(this.isGraphTime?this.dateFormat(t.y.smps[s],this.timeFormat):t.y.smps[s])+"</b>: "+t.y.data[n][s]+"<br>":i+="<b>"+(this.isGraphTime?this.dateFormat(t.y.smps[s],this.timeFormat):t.y.smps[s])+"</b>: "+t.y.data[t.y.data.length-1][s]+"<br>");else t.y&&t.y.histogram&&s>0||(i+="<b>"+(this.isGraphTime?this.dateFormat(t.y.smps[s],this.timeFormat):t.y.smps[s])+"</b>: "+t.y.data[0][s]+"<br>")}else t&&"Histogram"==t.objectType?i="<b>"+this[t.a].vars[t.b]+"</b><br>n: "+this[t.a].data[t.b][t.c]+"<br>":t&&t.objectType&&t.objectType.match(/Dendrogram/)&&(i=t.name?"<b>"+t.name+"</b><br><i>Click to flip<br>Dbl-click to focus</i>":"Circular"==this.graphType?t.nodeId?"<i>Click to flip</i>":"":"<i>Click to flip<br>Dbl-click to focus</i>");return"Map"==this.graphType&&t.c&&(i+=t.c),i.replace("u0000","");case"Gantt":if(i="",t.y)i="<b>"+this.dateFormat(this.parseDate(t.y.data[0][0]),this.timeFormat).replace(/-/g,"/")+" - "+this.dateFormat(this.parseDate(t.y.data[1][0]),this.timeFormat).replace(/-/g,"/")+"</b><br>",t.y.data.length>2&&t.y.data[2][0]&&(i+="<b>Milestone</b>: "+this.dateFormat(this.parseDate(t.y.data[2][0]),this.timeFormat).replace(/-/g,"/")+"<br>");return i;case"Sankey":if(t.links){i="<b>"+t.links.source.name+" &#8702; "+t.links.target.name+"</b><br>";i+="<b>"+t.y.vars[0]+"</b>: "+t.y.data[0][0]+"<br>"}else if(t.display)return"<b>"+t.display+"</b><br>";return i;case"Tree":return t.display?"<b>"+t.display+"</b><br>":i;case"Pie":if(t.display)return"<b>"+t.display+"</b><br>";var h="<b>"+t.y.smps[0]+"</b><br>";for(s=0;s<t.y.vars.length;s++){var l=this.sprintf("%."+this.pieSegmentPrecision+"f",t.y.data[s]/this.varPie.tot*100);h+="<b>"+t.y.vars[s]+"</b>: "+t.y.data[s]+" ("+l+"%)<br>"}return h;case"Correlation":return h="samples"==this.correlationAxis?"<b>"+t.y.smps[0]+"</b> vs <b>"+t.y.smps[1]+"</b><br>Cor: "+Math.round(100*t.y.data)/100:"<b>"+t.y.vars[0]+"</b> vs <b>"+t.y.vars[1]+"</b><br>Cor: "+Math.round(100*t.y.data)/100;case"Venn":for(var c in t.venn.data)return c+" = "+t.venn.data[c];case"Network":if(t.display)return"<b>"+t.display+"</b><br>";if(t&&t.nodes)t.nodes[0]&&(h=t.nodes[0].hideTooltip?"":t.nodes[0].tooltip||t.nodes[0].name||t.nodes[0].label||t.nodes[0].id),this.colorNodeBy&&(h+="<br><b>"+this.colorNodeBy+"</b>: "+(t.nodes[0][this.colorNodeBy]||""));else if(t&&t.edges){var d=this.nodes[t.edges[0].id1],p=this.nodes[t.edges[0].id2];h=(d.label||d.id)+" - "+(p.label||p.id),h=t.edges[0].hideTooltip?"":t.edges[0].tooltip||t.edges[0].name||t.edges[0].label||h}return h;case"Genome":return t.display||t.name||(t[0].data[0]?t[0].data[0].id:"")}},this.setUserEvents=function(){var t={},e=this.events,i=this;this.disableEvents?this.userEvents={}:(t.enddragnode=function(t,i){e&&e.enddragnode&&e.enddragnode.call(i,t,i)},t.clicklegend=function(t,i,s){e&&e.clicklegend&&e.clicklegend.call(s,i,t,s),s.broadcastHidden({func:"userEventClickLegend",par:[t,i]})},t.select=function(t,i,s){e&&e.select&&e.select.call(s,t,i,s)},t.enddraw=function(t){e&&e.enddraw&&e.enddraw.call(t,t)},t.remoteupdate=function(t){e&&e.remoteupdate&&e.remoteupdate.call(t,t)},t.motion=function(t,s,a){a||(a=i),a.disableMotion||(a.resetSelected(s,!0),a.addRemoveToSelected(!1,{y:{vars:[t],smps:[t]}},s),e&&e.motion&&e.motion.call(a,t,s,a),a.broadcastDraw({func:"userEventsMotion",par:[t,s,!1]}))},t.drag=function(t,i){e&&e.drag&&e.drag.call(i,t,i)},t.wheel=function(t,i,s){e&&e.wheel&&e.wheel.call(s,t,i,s)},t.mouseout=function(t,i,s,a,r){s.resetInfoSpan(i),e&&e.mouseout&&e.mouseout.call(s,t,i,s,a,r)},t.mouseup=function(t,i,s,a,r){e&&e.mouseup&&e.mouseout.call(s,t,i,s,a,r)},t.contextmenu=function(t,i,s,a,r){if("Network"==s.graphType){if(i.ctrlKey)return!1;t&&t.nodes&&1==t.nodes.length&&(CanvasXpress.selector.nodes.hasOwnProperty([t.nodes[0].id])||s.resetSelected(i))}s.addMenu(i),e&&e.contextmenu&&e.contextmenu.call(s,t,i,s,a,r)},t.click=function(t,s,a,r,n){a||(a=i);var o=function(){var e=s.ctrlKey,i=s.altKey;e&&i?(a.flashInfoSpan(10,10,"Object printed to console",3e3),console.log(a.prettyJSON(t))):(e||a.resetSelected(s,!0),a.addRemoveToSelected(n,t,s),"Sankey"==a.graphType&&delete t.links,a.broadcastDraw({func:"userEventsClick",par:[t,s,!1,n]}),a.flashInfoSpan(10,10,"Click ESC to reset graph",3e3))};if(a.isDOE&&n)a.setActiveLayout(s),a.handleDOEClick(r,n);else if(t){if(t&&t.objectType)t.objectType.match(/Histogram|Stack/)?o():t.objectType.match(/Dendrogram/)?a.modifyDendrogram(t):"Tree"==t.objectType?(a.skipTransition=!1,a.handleTreeClick(t)):"Ring"==t.objectType||(t&&t.objectType&&t.selector?(a.handleSelector(t.selector),a.flashInfoSpan(10,10,"Click ESC to reset graph",3e3)):(a.logConsole("Click on "+t.display),a.verbose&&a.flashInfoSpan(100,100,"Click on "+t.display,3e3)));else if(t&&(t.nodes||t.edges))o(),t&&t.nodes&&1==t.nodes.length&&t.nodes[0].links?a.showLinkDiv(s,t.nodes[0].links,null!=t.nodes[0].label?t.nodes[0].label:t.nodes[0].name?t.nodes[0].name:t.nodes[0].id):t&&t.edges&&1==t.edges.length&&t.edges[0].links&&a.showLinkDiv(s,t.edges[0].links,null!=t.edges[0].label?t.edges[0].label:t.edges[0].name?t.edges[0].name:t.edges[0].id1+"-"+t.edges[0].id2);else if(t.y||t.w||"Map"==a.graphType){if(a.graphType&&"orthographic"==a.mapProjection){var h=a.adjustedCoordinates(s),l=a.geoProjectInvert([h.x,h.y]);a.eventMapCenter=[-l[0],-l[1]]}o()}}else a.resetSelected(s,!CanvasXpress.selector.selections);return e&&e.click&&e.click.call(a,t,s,a,r,n),!1},t.dblclick=function(t,i,s,a,r){return t&&t.objectType&&t.objectType.match(/Dendrogram/)&&"Circular"!=s.graphType?s.zoomDendrogram(t):t&&t.objectType&&"Ring"==t.objectType||t&&"Fish"==s.graphType||(t&&t.objectType&&"Stack"!=t.objectType?(s.logConsole("Double Click on "+t.display),this.verbose&&s.flashInfoSpan(100,100,"Double Click on "+t.display,3e3)):t&&!s.graphType.match(/Tree|Circular|Sankey/)&&(t.display&&t.display.match(/Drag/)||s.showTooltipDiv(i,s.arrayToHTML(s.getDataClassAsArray(s.getUngroupedDataObject(t,a,r))),!1,!1,null,null,t))),e&&e.dblclick&&e.dblclick.call(s,t,i,s,a,r),!1},t.mouseover=function(t,i,s,a,r){e&&e.mouseover&&e.mouseover.call(s,t,i,s,a,r);var n=s.getSummaryDataObject(t,i);n&&""!=n&&(s.showInfoSpan(i,n),"Chord"==t.objectType&&s.handleChordMouseOver(t),r&&r[0].toString().match("elbow")&&(s.getTargetEvent(i).style.cursor="move"))},t.mousemove=function(t,i,s,a,r){e&&e.mousemove&&e.mousemove.call(s,t,i,s,a,r);var n=s.getSummaryDataObject(t,i);n&&""!=n&&(s.showInfoSpan(i,n),"Chord"==t.objectType&&s.handleChordMouseOver(t),r&&r[0].toString().match("elbow")&&(s.getTargetEvent(i).style.cursor="move"))},this.userEvents=t)},this.userEventsClick=function(t,e,i,s,a){this.userEvents.click(t,e,i,s,a)},this.userEventsDblClick=function(t,e,i,s,a){this.userEvents.dblclick(t,e,i,s,a)},this.userEventsMotion=function(t,e){this.reproducing||this.userEvents.motion(t,e,this)},this.userEventsMouseover=function(t,e,i,s,a){this.userEvents.mouseover(t,e,i,s,a)},this.userEventsMousemove=function(t,e,i,s,a){this.userEvents.mousemove(t,e,i,s,a)},this.userEventsDrag=function(t,e){this.userEvents.drag(t,e)},this.userEventsWheel=function(t,e,i){this.userEvents.wheel(t,e,i)},this.resetFlags=function(t){this.resetOn=!0,this.animationOn=!1,this.skipTransition=!1,this.draggingOn=!1,this.movingOn=!1,this.panningOn=!1,this.changingColorOn=!1,this.changingColorItemOn=!1,this.changingSliderItemOn=!1,this.keyOn=!1,this.lassoOn=!1,this.xMouseDown=!1,this.yMouseDown=!1,this.resetTouches(),this.moveNode=!1,this.moveNodeIndex=!1,this.moveNodeLab=!1,this.moveNodeDec=!1,this.moveNodeX=!1,this.moveNodeY=!1,this.moveNodeW=!1,this.moveNodeH=!1,this.moveEdge=!1,this.moveEdgeIndex=!1,this.moveEdgeElbow=!1,this.moveEdgeX=!1,this.moveEdgeY=!1,this.resizeNode=!1,this.resizeLegend=!1,this.moveLegend=!1,this.moveLegendX=!1,this.moveLegendY=!1,this.moveMarker=!1,this.moveMarkerX=!1,this.moveMarkerY=!1,this.moveSankey=!1,this.moveSankeyId=!1,this.moveSankeyX=!1,this.moveSankeyY=!1,this.moveGenome=!1,this.moveMap=!1,this.moveCircular=!1,this.moveDendrogram=!1,this.moveVar=!1,this.moveSmp=!1,this.moveVarOverlay=!1,this.moveSmpOverlay=!1,t&&this.stopEvent(t),window.document.defaultAction=!0,window.document.body.style.cursor="default"},this.mousemoveDoc=(t=this,function(e){var i=e.target||e.srcElement;"CanvasXpress"!=i.className||CanvasXpress.resizing||(CanvasXpress.current=i.id);var s,a=function(){if(i&&i.className&&i.className.toString().match(/canvasxpress/i)){var s=t.isEvent(e);if(t.isDOE&&t.setActiveLayout(e),s||t.lassoSelected)"CanvasXpress"==i.className&&(t.lassoPoints&&t.lassoPoints.length&&t.resetInfoSpan(e,!0),(t.varIndicesStart>0||t.smpIndicesStart>0||t.grpIndicesStart>0)&&(i.style.cursor="move"),t.handleMouseEvents(e,"mousemove",t.getRenderObjects(e,!1,s))||t.highlightCanvas(s));else if(t.clearHighlightCanvas(),"Map"==t.graphType&&t.canvasPointToCoordinate&&"CanvasXpress"==i.className){var a=t.canvasPointToCoordinate(t.xMouseMove,t.yMouseMove),r=" [ "+a[1].toFixed(1)+", "+a[0].toFixed(1)+" ]";t.showInfoSpan(e,r)}else t.resetInfoSpan(e,!0)}};if(t.motioningOn)return a();if(CanvasXpress.system.isTouchScreen&&"touchmove"==e.type&&t.touches){if("click"==t.touchEvent)t.mouseupDoc();else if(t.touches.length>1&&e.touches.length>1&&"mousemove"!=t.touchEvent){t.touchEvent="pinch";var r=t.euclidianDistance([t.touches[0].clientX,t.touches[0].clientY],[t.touches[1].clientX,t.touches[1].clientY]),n=t.euclidianDistance([e.touches[0].clientX,e.touches[0].clientY],[e.touches[1].clientX,e.touches[1].clientY]),o=(e.touches[0].clientX+e.touches[1].clientX)/2,h=(e.touches[0].clientY+e.touches[1].clientY)/2;if(Math.abs(n-r)>100)return t.wheelCanvas(e,n-r,{x:o,y:h})}t.touchEvent="mousemove"}if(CanvasXpress.current&&CanvasXpress.current==t.target||CanvasXpress.current&&CanvasXpress.current==t.target2||CanvasXpress.resizing||i.id&&i.id.match(/-cX-API-Example/)){if(t.lastMousemove&&"Scatter3D"==t.graphType&&(new Date).getTime()-t.lastMousemove<100)return;if(t.lastMousemove=(new Date).getTime(),t.isToolbar(e),t.isDataTableToolbar(e),t.isVersion(e))t.$(t.target).style.cursor="help",t.showInfoSpan([e.clientX,e.clientY+30],(s="CanvasXpress<br>ver : "+CanvasXpress.factory.version+"<br>date : "+CanvasXpress.factory.buildDate,t.createVersion&&(s+="<br><br>- Original Plot -<br>CanvasXpress<br>ver : "+t.createVersion),window.cX&&(s+="<br><b>license</b> : "+window.cX),s));else if(t.filteringNumericOn)t.preventSelection(),t.updateNumericFilter(e);else if(t.filteringStringOn)t.preventSelection(),t.updateStringFilter(e);else if(t.draggingTargetOn)t.preventSelection(),t.updateMousemove(e);else if(t.resizingDataTableOn)t.preventSelection(),t.updateDataTableResizerDiv(e);else if(t.motionOn)t.preventSelection(),t.updateMotion(e);else if(t.resizingDataTableColumnOn)t.preventSelection(),t.mousemoveDataTableHeader(e);else if(t.changingColorOn)t.preventSelection(),t.updateColorValue(e);else if(t.changingColorItemOn)t.preventSelection(),t.updateColorItemValue(!1,e);else if(t.changingSliderItemOn)t.preventSelection(),t.updateSliderItemValue(e);else if(t.isDOE&&t.skipClick)t.preventSelection(),t.updateLayoutDrag(e),a();else if(!t.configuringOn){if(t.draggingOn){if(t.preventSelection(),t.cancelEvent(e),t.updateDrag(e),t.lastCanvasEvent="drag",t.moveMarker)return}else t.resizingCanvasOn&&t.resizeCanvasCursorShow?(t.preventSelection(),t.cancelEvent(e),t.updateCanvasResizer(e),t.lastCanvasEvent="resize"):t.updateCanvasResizerCursor(e);a()}}return!1}),this.registerMousemove=function(t){return function(e){var i=e.target||e.srcElement;if(t.motioningOn)t.stopEvent(e);else if(t.hasClass(this,"CanvasXpressMenu")){if(t.draggableTarget)return;for(var s=this;t.hasClass(s.previousSibling,"CanvasXpressMenu");)s=s.previousSibling;t.draggableTarget=s,t.draggableTargetEl=i,t.activeTarget=t.draggableTarget,t.activeTarget.style.zIndex=10001,t.xMouseDown=e.clientX,t.yMouseDown=e.clientY,t.draggableXoffset=parseInt(t.draggableTarget.style.left)||0,t.draggableYoffset=parseInt(t.draggableTarget.style.top)||0,t.draggableTargetEl.style.cursor="grabbing",t.draggableTargetEl.style.cursor="-moz-grabbing",t.draggableTargetEl.style.cursor="-webkit-grabbing",t.draggingTargetOn=!0}else{if((1==e.button&&null!=window.event||0==e.button)&&t.hasClass(i,"draggable")&&i.className.match("Customizer")&&"SPAN"==i.tagName.toUpperCase())return;(1==e.button&&null!=window.event||0==e.button)&&t.hasClass(i,"draggable")?(t.activeTarget&&(t.activeTarget.style.zIndex=1e4),t.draggableTarget=i.parentNode&&t.hasClass(i.parentNode,"draggable-container")?i.parentNode:i,t.activeTarget=t.draggableTarget,t.activeTarget.style.zIndex=10001,t.xMouseDown=e.clientX,t.yMouseDown=e.clientY,t.draggableXoffset=parseInt(t.draggableTarget.style.left)||0,t.draggableYoffset=parseInt(t.draggableTarget.style.top)||0,t.draggingTargetOn=!0,t.removeMenus()):i.id==t.target+"-cX-ToolbarMove"&&(t.draggableTarget=t.remoteService?t.$(t.remoteParentId+"-canvasXpressRemoteWindow"):t.$("container-"+t.target),t.activeTarget=t.draggableTarget,t.activeTarget.style.zIndex=10001,t.xMouseDown=e.clientX,t.yMouseDown=e.clientY,t.draggableXoffset=parseInt(t.draggableTarget.style.left)||0,t.draggableYoffset=parseInt(t.draggableTarget.style.top)||0,t.draggingTargetOn=!0,t.removeMenus())}}}(this),this.updateMousemove=function(t){if(this.draggableTarget&&this.draggableTarget.style){var e=parseInt(this.draggableTarget.style.left),i=parseInt(this.draggableTarget.style.top),s=this.draggableXoffset+t.clientX-this.xMouseDown,a=this.draggableYoffset+t.clientY-this.yMouseDown;if(this.draggableTarget.style.left=s+"px",this.draggableTarget.style.top=a+"px",this.draggableLastX=s,this.draggableLastY=a,this.draggableTarget.id==this.target+"-cX-DataTable"&&"docked"==this.dataTableLastState)this.moveDataTableDiv("release");else if(this.hasClass(this.draggableTarget,"CanvasXpressMenu"))for(var r=s-e,n=a-i,o=this.draggableTarget.nextSibling;o&&this.hasClass(o,"CanvasXpressMenu");)o.style.left=parseInt(o.style.left)+r+"px",o.style.top=parseInt(o.style.top)+n+"px",o=o.nextSibling}},this.endMousemove=function(t){if(null!=this.draggableTarget){this.moveDataTableDiv(),window.document.onselectstart=null;var e=this.remoteService?this.remoteParentId+"-canvasXpressRemoteWindow":"container-"+this.target;this.draggableTarget.id==e&&(CanvasXpress.stack[this.target].afterRender.push(["moveCanvas",[this.draggableTarget.style.left,this.draggableTarget.style.top]]),this.draggableTarget.style.zIndex="unset"),this.hasClass(this.draggableTarget,"CanvasXpressMenu")&&(this.draggableTargetEl.style.cursor="grab",this.draggableTargetEl.style.cursor="-moz-grab",this.draggableTargetEl.style.cursor="-webkit-grab",delete this.draggableTargetEl),this.yMouseDown=null,this.draggableXoffset=null,this.draggableYoffset=null,this.draggableTarget.ondragstart=null,this.draggableTarget=!1,this.draggingTargetOn=!1}},this.mousedownDoc=function(t){return function(e){return t.mousedownElement=e.target||e.srcElement,!1}}(this),this.mouseupDoc=function(t){return function(e){var i=e.target||e.srcElement;i.className;if(CanvasXpress.current&&CanvasXpress.current==t.target||CanvasXpress.current&&CanvasXpress.current==t.target2||i&&i.id&&i.id.match(/-cX-API-Example/)||t.resizingCanvasOn||t.draggingOn||t.draggingTargetOn){if(t.resetMousePosition(),t.motioningOn)return t.stopEvent(e),!1;if(t.draggingTargetOn)t.endMousemove(e);else if(t.motionOn)t.endMotion(e);else if(t.resizingDataTableOn)t.endDataTableResizerDiv();else if(t.resizingDataTableColumnOn)t.endDataTableColumnResize(e);else if(t.changingColorOn)t.endColorChange(e);else if(t.changingColorItemOn)t.endColorItemChange(e);else if(t.changingSliderItemOn)t.endSliderItemChange(e);else if(t.isDOE&&t.skipClick)t.endDragLayout(e);else if(!t.configuringOn){if(t.isR&&(!t.mousedownElement||t.mousedownElement.className&&t.mousedownElement.className.toString().match(/shiny/i)))return;t.stopEvent(e),t.endDrag(e),t.endCanvasResizer(e),t.endNumericFilter(e),t.endStringFilter(e),t.resetFlags(e)}t.userEvents[e.type]&&t.handleMouseEvents(e,e.type)}}}(this),this.touchendDoc=function(t){return function(e){if(CanvasXpress.current&&CanvasXpress.current==t.target||CanvasXpress.current&&CanvasXpress.current==t.target2){switch(t.touchEvent){case"click":(new Date).getTime()-(t.touches?t.touches[0].time:0)>500?(t.touchEvent="reset",t.masterReset(e)):t.clickCanvas(e);break;case"dblclick":t.dblclickCanvas(e);break;case"contextmenu":t.contextmenuCanvas(e);break;case"mousemove":t.mouseupDoc(e);break;case"drag":t.touchEvent=!1;break;case"pinch":t.mouseupDoc(e);break;case"mousewheel":break;default:t.mouseupDoc(e)}return t.resetTouches(),!1}}}(this),this.contextDoc=function(t){return function(e){(e.target||e.srcElement).className.toString().match(/CanvasXpressDataTableDOE/)&&(t.addMenu(e),t.cancelEvent(e))}}(this),this.keydownDoc=function(t){return function(e){var i=e.target||e.srcElement;CanvasXpress.current&&CanvasXpress.current==t.target||CanvasXpress.current&&CanvasXpress.current==t.target2?t.configuringOn||i.id.match(/cX-DataTableSearch/)||i.id.match(/cX-DataFilter.+ContentSearch/)||i.id.match(/cX-DataFilterInput/)||"CanvasXpressListItemScrollSearch"==i.className||t.registerKey(e):i.className.match(/CanvasXpressMap/)&&CanvasXpress.$(i._cX).registerKey(e)}}(this),this.keyupDoc=function(t){return function(e){var i=e.target||e.srcElement;i.parentNode&&i.parentNode.id.match(/cX-DataTableToolbar/)?(i.id.match(t.target)&&(t.keyOn=!1,i.id.match(/cX-DataTableSearch/)&&t.updateSearchDataTable(i.id)),t.stopEvent()):CanvasXpress.current&&CanvasXpress.current==t.target||CanvasXpress.current&&CanvasXpress.current==t.target2?(t.keyOn=!1,i.id.match(/cX-DataTableSearch/)?t.updateSearchDataTable(i.id):i.id.match(/cX-DataFilter.+ContentSearch/)?t.updateSearchFilters(i.id):i.id.match(/cX-DataFilterInput/)?t.updateSelectStringFilter(i.id):"CanvasXpressListItemScrollSearch"==i.className?t.filterScrollSearch(i.id):t.configuringOn?t.selectConfig(e):t.customizing?t.selectConfigurations(e):t.remoteService&&t.selectDataSet(e)):i.className.match(/CanvasXpressMap/)}}(this),this.resizeWindow=function(t){return function(e){var i,s=function(){if(t.targetParentNodeResponsive)if(t.customizing)t.closeCustomizer();else{var e=t.getMaxCanvasWidthHeight(t.$(t.target),t.targetParentNodeAspectRatio);t.setDimensions(e[0],e[1])}},a=this,r=arguments,n=function(){i=null,s.apply(a,r)};clearTimeout(i),i=setTimeout(n,250),t.scrollWindow(e)}}(this),this.scrollWindow=function(t){return function(e){for(var i=0;i<CanvasXpress.instances.length;i++){var s=CanvasXpress.instances[i];!s.loaded&&s.lazyLoad&&t.isInViewport(s.meta.canvas.ctx.canvas)&&s.continueInitialization()}}}(this),this.initDocEvents=function(){if(!this.disableEvents){var t=window.document;this.disableDocument||(this.addEvtListener(t,"mousedown",this.mousedownDoc,!1),this.addEvtListener(t,"mousemove",this.mousemoveDoc,!1),this.addEvtListener(t,"touchmove",this.mousemoveDoc,!1),this.addEvtListener(t,"mouseup",this.mouseupDoc,!1),this.addEvtListener(t,"touchend",this.touchendDoc,!1),this.addEvtListener(t,"contextmenu",this.contextDoc,!1)),this.disableKeys||(this.addEvtListener(t,"keydown",this.keydownDoc,!1),this.addEvtListener(t,"keyup",this.keyupDoc,!1)),this.disableWindow||(this.addEvtListener(window,"resize",this.resizeWindow,!1),this.addEvtListener(window,"scroll",this.scrollWindow,!1))}},this.initializeEvents=function(){this.setUserEvents(),this.initDraggingEvents(),this.initCanvasResizerEvents(),this.initMotionEvents(),this.initKeyEvents(),this.initSelectEvents(),this.initDendrogramEvents(),this.initCanvasEvents(),this.initDocEvents(),this.initCleanupEvents()}},CanvasXpress.prototype.initAnimation=function(){this.moveMenu=function(t,e){var i=parseInt(t.style.left),s=i-e,a=(s-i)/5;this.updateMoveMenu(t,i,s,a)},this.updateMoveMenu=function(t,e,i,s){var a=this;e=this.stepResizeMove(e,i,s),t.style.left=Math.round(e)+"px",e!=i&&setTimeout((function(){a.updateMoveMenu(t,e,i,s)}),40)},this.resizeMoveObject=function(t,e,i,s,a,r){t.style.left=Math.round(e)+"px",t.style.top=Math.round(i)+"px",t.style.width=Math.round(s)+"px",t.style.height=Math.round(a)+"px",null!=r&&r()},this.resizeMove=function(t,e,i,s,a,r,n,o){if(t)if(o)t.style.left=Math.round(e)+"px",t.style.top=Math.round(i)+"px",t.style.width=Math.round(s)+"px",t.style.height=Math.round(a)+"px",null!=n&&n();else{r||(r=500);var h=parseInt(t.style.left)||0,l=parseInt(t.style.top)||0,c=parseInt(t.style.width)||t.clientWidth||0,d=parseInt(t.style.height)||t.clientHeight||0,p=1;r>0&&(p=r/40);var g=e-h;0!=g&&(g/=p);var u=i-l;0!=u&&(u/=p);var m=s-c;0!=m&&(m/=p);var f=a-d;0!=f&&(f/=p),this.updateResizeMove(t,h,e,g,l,i,u,c,s,m,d,a,f,n)}},this.updateResizeMove=function(t,e,i,s,a,r,n,o,h,l,c,d,p,g){if(t){var u=this;if(e=this.stepResizeMove(e,i,s),a=this.stepResizeMove(a,r,n),o=this.stepResizeMove(o,h,l),c=this.stepResizeMove(c,d,p),t.style.left=Math.round(e)+"px",t.style.top=Math.round(a)+"px",t.style.width=Math.round(o)+"px",t.style.height=Math.round(c)+"px",e==i&&a==r&&c==d&&o==h)return void(null!=g&&g());setTimeout((function(){u.updateResizeMove(t,e,i,s,a,r,n,o,h,l,c,d,p,g)}),50)}},this.stepResizeMove=function(t,e,i){return 0==i||t==e?e:(t+=i,i>0&&t>=e||i<0&&t<=e?e:t)},this.move=function(t,e,i,s,a,r){if(t)if(r)t.style.left=Math.round(e)+"px",t.style.top=Math.round(i)+"px",null!=a&&a();else{s||(s=1e3);var n=parseInt(t.style.left)||0,o=parseInt(t.style.top)||0,h=1;s>0&&(h=s/40);var l=e-n;0!=l&&(l/=h);var c=i-o;0!=c&&(c/=h),this.updateMove(t,n,e,l,o,i,c,a)}},this.updateMove=function(t,e,i,s,a,r,n,o){if(t){var h=this;if(e=this.stepResizeMove(e,i,s),a=this.stepResizeMove(a,r,n),t.style.left=Math.round(e)+"px",t.style.top=Math.round(a)+"px",e==i&&a==r)return void(null!=o&&o());setTimeout((function(){h.updateMove(t,e,i,s,a,r,n,o)}),30)}},this.transitionAccordion=function(t,e,i,s,a,r){var n=this,o=(new Date).getTime(),h=o-t;if(e<=h||r)return i&&(i.style.height=this.dataFilterHeight+"px",i.style.display="block"),s&&(s.style.height="0px",s.style.display="none"),void(a&&a());e-=h;var l=Math.round(e/250*this.dataFilterHeight);i&&(i.style.height=this.dataFilterHeight-l+"px",i.style.display="block"),s&&(s.style.height=l+"px"),setTimeout((function(){n.transitionAccordion(o,e,i,s,a)}),33)},this.createCarousel=function(t,e,i,s,a,r,n){var o;e||(e=100),i||(i=100),a||(a=0),!r||"vertical"!=r&&"horizontal"!=r?(r="vertical",o="rotateX"):o="rotateY";var h=360/t.length,l=Math.round((r=i)/2/Math.tan(Math.PI/t.length)),c=this.$cX("div",{id:this.newId("-cX-Carousel-"),className:"CanvasXpressCarouselScene",rotate:o,theta:h,radius:l,current:0,limit:t.length-1},{width:e+2*a+"px",height:i+2*a+"px",perspective:s+"px"});if(n)for(p in n)c.style[p]=n[p];for(var d=this.$cX("div",{className:"CanvasXpressCarousel"}),p=0;p<t.length;p++){var g=this.$cX("div",{className:"CanvasXpressCarouselCell"},{width:e+"px",height:i+"px",transform:o+"("+h*p+"deg) translateZ("+l+"px)"});g.appendChild(t[p]),d.appendChild(g)}return c.appendChild(d),this.rotateCarousel(c,6),c},this.rotateCarousel=function(t,e){t.firstChild.style.transform="translateZ("+-t.radius+"px) "+t.rotate+"("+t.theta*-e+"deg)"},this.transitionMagic=function(t,e,i,s){var a=this;e||(e="holeOut"),null==s&&(s=1e3),t.style.opacity=1,this.addClass(t,"magictime"),this.addClass(t,e),setTimeout((function(){a.removeClass(t,"magictime"),a.removeClass(t,e),i&&i()}),s)},this.transitionMagicCustomizer=function(t,e){if(t){var i=this,s=t.childNodes.length>=8?50:100,a=[],r=0,n=function(){if(t.childNodes.length){var h=i.customizerEffectOut,l=s,c=t.childNodes[t.childNodes.length-1];i.addClass(c,"magictime"),i.addClass(c,h);for(var d=t.childNodes.length-1;d>=0;d--)t.childNodes[d].style.zIndex=Number(t.childNodes.length-d);setTimeout((function(){c.parentNode.removeChild(c),n()}),l)}else e&&(t.style.height=t.parentNode.style.height,(a=e.apply(i))&&(r=a[0].length>=8?25:50,e=a[1],a=a[0],o(0)))},o=function(s){s<a.length?setTimeout((function(){!function(e){var s=i.customizerEffectIn;i.addClass(e,"magictime"),i.addClass(e,s),t.appendChild(e),setTimeout((function(){i.removeClass(e,"magictime"),i.removeClass(e,s)}),1e3)}(a[s]),s++,o(s)}),1*r):(t.style.height=Math.max(t.clientHeight,t.scrollHeight)+"px",e.apply(i,["addEvtListener"]))};n()}},this.initTransitions=function(){CanvasXpress.transitions||(CanvasXpress.transitions={}),CanvasXpress.transitions[this.target]=[]},this.isTransition=function(){if(this.isTransitionOn){var t=arguments.callee.caller;return t&&CanvasXpress.transitions[this.target].push([t,this.cleanEventInArguments(Array.from(t.arguments))]),!0}return!1},this.getTransitionSteps=function(){for(var t=[],e=1/(this.transitionStep-1),i=0;i<this.transitionStep;i++)t.push(this.easeVal(e*i));return t},this.getTransitionObjectsSteps=function(t,e,i){for(var s=this.getTransitionSteps(),a=Math.ceil(t/this.getTransitionStaggeringSteps(i)),r=[],n=0;n<t;n++)r.push(Math.max(0,s[Math.min(s.length-1,Math.max(0,e-Math.floor(n/a)))]));return r},this.getTransitionStaggeringSteps=function(t){return"Tree"==this.graphType||this.graphType.match(/Scatter/)||"Sankey"==this.graphType||"Circular"==this.graphType||"Correlation"==this.graphType||"Venn"==this.graphType||this.decorations&&this.decorations.kaplanMeier||this.connectBy||this.graphType.match(/Bar/)&&"lollipop"==this.barType&&!this.isGroupedData?1:t?"Data"==t?this.transitionStaggering:1:this.transitionStaggering},this.transition=function(){var t=this,e=this.transitionStep+this.getTransitionStaggeringSteps(),i=this.mapTransitionObject(),s=t.meta.render.order;if(this.meta.render.transition)for(var a in this.meta.render.transition.types)this.meta.render.types.hasOwnProperty(a)||s.push(a);this.transitionIter=0,this.isTransitionOn=!0;var r=function(){if(t.transitionIter>=e){if(CanvasXpress.transitions[t.target].length>0){var a=CanvasXpress.transitions[t.target].shift();if(a[2])for(var n in a[2])t[n]=a[2][n];return t.isTransitionOn=!1,a[0].apply(t,a[1]||!1)}return t.isTransitionOn=!1,t.triggerDataLoaded("transition")}for(var o=0;o<s.length;o++)i[s[o]]&&(t.disableGradientTransparencyShadow(),"Data"==s[o]&&"Venn"==t.graphType&&(t.rectangleClear(0,0,t.width,t.height),t.setGlobalCompositionOperation("lighter")),"Legends"!=s[o]&&"Labels"!=s[o]||"Circular"==t.graphType?"Size"==s[o]?t.transitionPropertyDataNoInterpolate(s[o]):t.transitionPropertyData(t.transitionIter,i[s[o]],s[o]):t.transitionPropertyDataTransparency(t.transitionIter,s[o]),"Data"==s[o]&&"Venn"==t.graphType&&t.setGlobalCompositionOperation("source-over"),t.enableGradientTransparencyShadow());t.transitionIter++,this.requestAnimationFrame(r)};r()},this.transitionPropertyData=function(t,e,i){for(var s=this.meta.render.transition.objects,a=this.meta.render.objects,r=this.getTransitionObjectsSteps(e.length,t,i),n=e.length,o=0;o<n;o++){var h=r[o],l=e[o][0],c=e[o][1],d=this.isObject(l)?l:s[l],p=this.isObject(c)?c:a[c];if(d&&p){var g=d.func;if(g==p.func){var u=d.params,m=p.params;switch(g){case"drawShape":if("arch"==u[0]){var f=(L=this.interpolateChord(u,m,h))[0],y=L[1],x=L[2],v=L[3],b=this.interpolateColor(u[5],m[5],h);this.drawShape(m[0],f,y,x,v,b,m[6],m[7],m[8],m[9],m[10],m[11],m[12],m[13],m[14],m[15])}else if(u[0]==m[0]||"arc2"==u[0]||"arc2"==m[0]||u[0].match("roundrect")||m[0].match("roundrect"))if("arc2"==u[0]&&"arc2"!=m[0]){var A=(M=u[4]-u[3]/2)*Math.cos(u[12])+u[1],w=M*Math.sin(u[12])+u[2],C=(A+(z=M*Math.cos(u[13])+u[1]))/2,T=(w+(N=M*Math.sin(u[13])+u[2]))/2,S=this.euclidianDistance([A,w],[z,N]);f=this.interpolateNumber(C,m[1],h),y=this.interpolateNumber(T,m[2],h),v=this.interpolateNumber(S,m[3],h),x=this.interpolateNumber(u[3],m[4],h),b=this.interpolateColor(u[5],m[5],h),k=this.interpolateNumber(u[12],m[12],h),L=this.interpolateNumber(u[13],m[13],h),I=this.interpolateNumber(u[12],Math.PI,h);this.drawShape(m[0],f,y,Math.max(x,v),Math.min(x,v),b,m[6],m[7],I,m[9],m[10],m[11],k,L,m[14],m[15])}else if("arc2"!=u[0]&&"arc2"==m[0]){var M;A=(M=m[4]-m[3]/2)*Math.cos(m[12])+m[1],w=M*Math.sin(m[12])+m[2],C=(A+(z=M*Math.cos(m[13])+m[1]))/2,T=(w+(N=M*Math.sin(m[13])+m[2]))/2,S=this.euclidianDistance([A,w],[z,N]),f=this.interpolateNumber(u[1],C,h),y=this.interpolateNumber(u[2],T,h),v=this.interpolateNumber(u[3],S,h),x=this.interpolateNumber(u[4],m[3],h),b=this.interpolateColor(u[5],m[5],h),k=!("pie"!=u[0]&&!u[0].match(/arc/))&&this.interpolateNumber(u[12],m[12],h),L=!("pie"!=u[0]&&!u[0].match(/arc/))&&this.interpolateNumber(u[13],m[13],h),I=this.interpolateNumber(Math.PI,m[12],h);this.drawShape(u[0],f,y,Math.max(x,v),Math.min(x,v),b,m[6],m[7],I,m[9],m[10],m[11],k,L,m[14],m[15])}else if("arrow"==u[0]&&"arrow"==m[0]){f=this.interpolateNumber(u[8]==m[8]?u[1]:u[2],m[1],h),y=this.interpolateNumber(u[8]==m[8]?u[2]:u[1],m[2],h),x=this.interpolateNumber(u[8]==m[8]?u[3]:u[4],m[3],h),v=this.interpolateNumber(u[8]==m[8]?u[4]:u[3],m[4],h),b=this.interpolateColor(u[5],m[5],h),I=u[8]==m[8]?u[8]:!(u[8]||!m[8]);this.drawShape(m[0],f,y,x,v,b,m[6],m[7],I,m[9],m[10])}else{f=this.interpolateNumber(u[1],m[1],h),y=this.interpolateNumber(u[2],m[2],h),x=this.interpolateNumber(u[3],m[3],h),v=this.interpolateNumber(u[4],m[4],h),b=this.interpolateColor(u[5],m[5],h),k=!("pie"!=u[0]&&!u[0].match(/arc/))&&this.interpolateNumber(u[12],m[12],h),L=!("pie"!=u[0]&&!u[0].match(/arc/))&&this.interpolateNumber(u[13],m[13],h),I="ellipse2"==u[0]&&this.interpolateNumber(u[8],m[8],h);this.drawShape(m[0],f,y,x,v,b,m[6],m[7],I,m[9],m[10],m[11],k,L,m[14],m[15])}else{var f=this.interpolateNumber(u[1],m[1],h),y=this.interpolateNumber(u[2],m[2],h),x=this.interpolateNumber(u[3],m[3],h),v=this.interpolateNumber(u[4],m[4],h),b=this.interpolateColor(u[5],m[5],h),D=u[0].match(/circle|sphere/)&&m[0].match(/rect|square/)&&t>5?m[0]:"oval",k=!("pie"!=u[0]&&!u[0].match(/arc/))&&this.interpolateNumber(u[12],m[12],h),L=!("pie"!=u[0]&&!u[0].match(/arc/))&&this.interpolateNumber(u[13],m[13],h),I="ellipse2"==u[0]&&this.interpolateNumber(u[8],m[8],h);this.drawShape(D,f,y,x,v,b,m[6],m[7],I,m[9],m[10],m[11],k,L,m[14],m[15])}break;case"drawLine":A=this.interpolateNumber(u[1],m[1],h),w=this.interpolateNumber(u[2],m[2],h);var z=this.interpolateNumber(u[3],m[3],h),N=this.interpolateNumber(u[4],m[4],h);x="error"==u[0]?this.interpolateNumber(u[6],m[6],h):m[6],b=this.interpolateColor(u[5],m[5],h);this.drawLine(m[0],A,w,z,N,b,x,m[7],m[8],m[9],m[10],m[11],m[12],m[13],m[14]);break;case"drawText":f=this.interpolateNumber(u[1],m[1],h),y=this.interpolateNumber(u[2],m[2],h);var B=this.interpolateTextFont(u[3],m[3],h);b=this.interpolateColor(u[4],m[4],h),I=this.interpolateNumber(u[7]||0,m[7]||0,h);this.drawText(m[0],f,y,B,b,m[5],m[6],I,m[8],m[9],m[10],m[11]);break;case"drawArcText":f=this.interpolateNumber(u[1],m[1],h),y=this.interpolateNumber(u[2],m[2],h),I=this.interpolateNumber(u[3],m[3],h),k=this.interpolateNumber(u[4],m[4],h),L=this.interpolateNumber(u[5],m[5],h),B=this.interpolateTextFont(u[6],m[6],h),b=this.interpolateColor(u[7],m[7],h);this.drawArcText(m[0],f,y,I,k,L,B,b,m[8],m[9],m[10],m[11]);break;default:this.layoutValid||"Correlation"==this.graphType||"Axes"==i||this[g].apply(this,m)}}}}},this.transitionPropertyDataNoInterpolate=function(t){for(var e=this.meta.render.types.hasOwnProperty(t)?this.meta.render.types[t].all:[],i=0;i<e.length;i++){var s=this.meta.render.objects[e[i]],a=s.func,r=s.params;switch(a){case"drawShape":this.drawShape(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15]);break;case"drawLine":this.drawLine(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],r[9],r[10],r[11],r[12],r[13],r[14]);break;case"drawText":this.drawText(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],r[9],r[10],r[11]);break;case"drawArcText":this.drawArcText(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],r[9],r[10],r[11])}}},this.transitionPropertyDataTransparency=function(t,e){for(var i=this.meta.render.types.hasOwnProperty(e)?this.meta.render.types[e].all:[],s=this.getTransitionObjectsSteps(i.length,t),a=0;a<i.length;a++){var r=this.meta.render.objects[i[a]],n=r.func,o=r.params,h=s[a];switch(n){case"drawShape":this.drawShape(o[0],o[1],o[2],o[3],o[4],this.addColorTransparency(o[5],h,!0),this.addColorTransparency(o[6],h,!0),o[7],o[8],o[9],o[10],o[11],o[12],o[13],o[14],o[15]);break;case"drawLine":this.drawLine(o[0],o[1],o[2],o[3],o[4],this.addColorTransparency(o[5],h,!0),o[6],o[7],o[8],o[9],o[10],o[11],o[12],o[13],o[14]);break;case"drawText":this.drawText(o[0],o[1],o[2],o[3],this.addColorTransparency(o[4],h,!0),o[5],o[6],o[7],o[8],o[9],o[10],o[11]);break;case"drawArcText":this.drawArcText(o[0],o[1],o[2],o[3],o[4],o[5],o[6],this.addColorTransparency(o[7],h,!0),o[8],o[9],o[10],o[11])}}},this.transitionMap=function(t,e){var i=t,s=i.getTransitionSteps(),a=i.transitionStep,r=i.geoProjection.rotate(),n=i.eventMapCenter;i.transitionIter=0,i.isTransitionOn=!0;var o=function(){if(i.transitionIter>=a)return delete i.eventMapZoom,delete i.eventMapCenter,i.isTransitionOn=!1,i.draw({func:"broadcastDraw",par:[e]});var t=s[i.transitionIter++],h=i.interpolateNumber(r[0],n[0],t),l=i.interpolateNumber(r[1],n[1],t);i.geoProjection.rotate([h,l]),i.eventMapCenter=[h,l],i.draw({func:"broadcastDraw",par:[e]}),i.requestAnimationFrame(o)};o()},this.easeVal=function(t){switch(this.transitionFunction){case"linear":return t;case"easeInQuad":return t*t;case"easeOutQuad":return t*(2-t);case"easeInOutQuad":return t<.5?2*t*t:(4-2*t)*t-1;case"easeInCubic":return t*t*t;case"easeOutCubic":return--t*t*t+1;case"easeInOutCubic":return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1;case"easeInQuart":return t*t*t*t;case"easeOutQuart":return 1- --t*t*t*t;case"easeInOutQuart":return t<.5?8*t*t*t*t:1-8*--t*t*t*t;case"easeInQuint":return t*t*t*t*t;case"easeOutQuint":return 1+--t*t*t*t*t;case"easeInOutQuint":return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t;default:return t}},this.interpolateNumber=function(t,e,i){var s=[],a=this.isArray(t),r=this.isArray(e);if(a&&r){for(var n=t.length,o=0;o<n;o++){var h=[],l=this.isArray(t[o]),c=this.isArray(e[o]);if(l&&c){for(var d=t[o].length,p=0;p<d;p++)h.push(t[o][p]+i*(e[o][p]-t[o][p]));s.push(h)}else if(l){for(d=t[o].length,p=0;p<d;p++)h.push(t[o][p]+i*(e[o]-t[o][p]));s.push(h)}else if(c){var g=e[o].length;for(p=0;p<g;p++)h.push(t[o]+i*(e[o][p]-t[o]));s.push(h)}else s.push(t[o]+i*(e[o]-t[o]))}return s}if(a){for(n=t.length,o=0;o<n;o++)s.push(t[o]+i*(e-t[o]));return s}if(r){var u=e.length;for(o=0;o<u;o++)s.push(t+i*(e[o]-t));return s}return t+i*(e-t)},this.interpolateChord=function(t,e,i){var s=this.interpolateNumber(t[3],e[3],i),a=this.interpolateNumber(t[4],e[4],i),r=this.interpolateNumber(t[1][1],e[1][1],i),n=this.interpolateNumber(t[2][1],e[2][1],i),o=r+a[0]*Math.cos(s[0]),h=n+a[0]*Math.sin(s[0]),l=r+a[1]*Math.cos(s[3]),c=n+a[1]*Math.sin(s[3]),d=r+a[1]*Math.cos(s[2]),p=n+a[1]*Math.sin(s[2]);return[[o,r,l,d,r,r+a[0]*Math.cos(s[1])],[h,n,c,p,n,n+a[0]*Math.sin(s[1])],s,a]},this.interpolateColor=function(t,e,i){if(t instanceof CanvasGradient)return t;if(e instanceof CanvasGradient)return e;t=this.colorAsArray(t),e=this.colorAsArray(e);var s=[];return s[0]=parseInt(this.interpolateNumber(t[0],e[0],i)),s[1]=parseInt(this.interpolateNumber(t[1],e[1],i)),s[2]=parseInt(this.interpolateNumber(t[2],e[2],i)),4==t.length&&4==e.length?s[3]=parseInt(10*this.interpolateNumber(t[3],e[3],i))/10:s[3]=parseInt(10*this.interpolateNumber(null!=t[3]?t[3]:1,null!=e[3]?e[3]:1,i))/10,(4==s.length?"rgba(":"rgb(")+s.join(",")+")"},this.interpolateTextFont=function(t,e,i){var s=this.getFontPt(t),a=this.getFontPt(e),r=Math.floor(this.interpolateNumber(s,a,i));return t.replace(s,r)},this.setTransitionObject=function(t,e,i){var s=t.func,a=this.meta.render,r=this.meta.render.transition,n=function(){return e?a.objects[t.group]:r.objects[t.group]};switch(s){case"drawShape":switch(h=t.params[0]){case"box":case"rect":case"rectangle":case"roundrect":case"roundrectt":case"roundrectr":case"roundrectb":case"roundrectl":null!=t.baseline?this.isArray(t.baseline)&&4==t.baseline.length?(t.params[1]=t.baseline[0],t.params[2]=t.baseline[1],t.params[3]=t.baseline[2],t.params[4]=t.baseline[3]):this.isArray(t.baseline)?(t.params[1]=t.baseline[0],t.params[2]=t.baseline[1],t.params[3]=0,t.params[4]=0):"vertical"==this.graphOrientation?(t.params[2]=t.baseline,t.params[4]=0):(t.params[1]=t.baseline,t.params[3]=0):"vertical"==this.graphOrientation?(t.params[2]+=t.params[4]/2,t.params[4]=0):(t.params[1]-=t.params[3]/2,t.params[3]=0);break;case"spline":null!=t.baseline&&(this.isArray(t.baseline)?(t.params[1]=this.replaceArray(t.params[1],t.baseline[0]),t.params[2]=this.replaceArray(t.params[2],t.baseline[1])):"vertical"==this.graphOrientation?t.params[2]=this.replaceArray(t.params[2],t.baseline):t.params[1]=this.replaceArray(t.params[1],t.baseline));break;case"violin":null!=t.baseline&&this.isArray(t.baseline)&&(t.params[1][0]=t.baseline[0],t.params[1][1]=t.baseline[0],t.params[2][0]=t.baseline[1],t.params[2][1]=t.baseline[1]);break;case"confidence":if(null!=t.baseline)if(this.isArray(t.baseline))for(var o=0;o<t.params[1].length;o++)t.params[1][o][0]=t.params[1][o][1]=t.baseline[o][0],t.params[2][o][0]=t.params[2][o][1]=t.baseline[o][1];else if("vertical"==this.graphOrientation)for(o=0;o<t.params[2].length;o++)t.params[2][o][0]=t.params[2][o][1]=t.baseline;else for(o=0;o<t.params[1].length;o++)t.params[1][o][0]=t.params[1][o][1]=t.baseline;break;case"polygon":for(o=1;o<t.params[1].length;o++)t.params[1][o]=t.params[1][0],t.params[2][o]=t.params[2][0];break;case"arc2":t.params[3]=0,t.params[4]=0,t.params[12]=0,t.params[13]=0;break;case"pie":t.params[12]=0,t.params[13]=0;break;case"arch":t.params[1][0]=t.params[1][2]=t.params[1][3]=t.params[1][5]=t.params[1][1],t.params[2][0]=t.params[2][2]=t.params[2][3]=t.params[2][5]=t.params[2][1],t.params[3][0]=t.params[3][1]=t.params[3][2]=t.params[3][3]=0,t.params[4]=[1,1];break;default:null!=t.baseline?this.isArray(t.baseline)?(t.params[1]=t.baseline[0],t.params[2]=t.baseline[1],t.params[3]=t.baseline[2]||0,t.params[4]=t.baseline[3]||0):"vertical"==this.graphOrientation?(t.params[2]=t.baseline,t.params[3]=0,t.params[4]=0):(t.params[1]=t.baseline,t.params[3]=0,t.params[4]=0):(t.params[3]=0,t.params[4]=0),"ellipse2"==h&&(t.params[8]=t.params[8]>0?Math.PI/2:-Math.PI/2)}e||(t.params[5]=this.addColorTransparency(t.params[5],0,!0),t.params[6]=this.addColorTransparency(t.params[6],0,!0));break;case"drawLine":var h;switch(h=t.params[0]){case"error":(l=n())&&(t.params[6]>0?t.params[1]=t.params[3]=l.baseline||l.params[1]:t.params[2]=t.params[4]=l.baseline||l.params[2],t.params[6]=0);break;case"median":var l;(l=n())&&("vertical"==this.graphOrientation?(t.params[1]=t.params[3]=(t.params[1]+t.params[3])/2,t.params[2]=t.params[4]=l.baseline||l.params[2]):(t.params[2]=t.params[4]=(t.params[2]+t.params[4])/2,t.params[1]=t.params[3]=l.baseline||l.params[1]));break;case"spline":if(null!=t.baseline)if(this.isArray(t.baseline))for(o=0;o<t.params[1].length;o++)t.params[1][o]=t.baseline[0],t.params[2][o]=t.baseline[1];else if("vertical"==this.graphOrientation)for(o=0;o<t.params[2].length;o++)t.params[2][o]=t.baseline;else for(o=0;o<t.params[1].length;o++)t.params[1][o]=t.baseline;else if("vertical"==this.graphOrientation)for(o=1;o<t.params[1].length;o++)t.params[1][o]=t.params[1][0];else for(o=1;o<t.params[2].length;o++)t.params[2][o]=t.params[2][0];break;case"arc":t.params[3]=0,t.params[4]=0,t.params[8]=0,t.params[9]=0;break;default:i?(t.params[5]=this.addColorTransparency(t.params[5],0,!0),t.params[6]=.1):null!=t.baseline?this.isArray(t.baseline)?4==t.baseline.length?(t.params[1]=t.baseline[0],t.params[2]=t.baseline[1],t.params[3]=t.baseline[2],t.params[4]=t.baseline[3]):(t.params[1]=t.baseline[0],t.params[2]=t.baseline[1],t.params[3]=t.baseline[0],t.params[4]=t.baseline[1]):"vertical"==this.graphOrientation?(t.params[2]=t.baseline,t.params[4]=t.baseline):(t.params[1]=t.baseline,t.params[3]=t.baseline):(this.graphOrientation,t.params[3]=t.params[1],t.params[4]=t.params[2])}e||(t.params[5]=this.addColorTransparency(t.params[5],0,!0));break;case"drawText":null!=t.baseline?this.isArray(t.baseline)?(t.params[1]=t.baseline[0],t.params[2]=t.baseline[1],t.baseline[2]&&(t.params[3]=t.baseline[2]),t.baseline[3]&&(t.params[4]=t.baseline[3]),t.baseline[4]&&(t.params[7]=t.baseline[4])):"vertical"==this.graphOrientation?t.params[2]=t.baseline:t.params[1]=t.baseline:(t.params[3]="1px "+this.fontName,t.params[4]="rgba(0,0,0,0)"),e||(t.params[3]="1px "+this.fontName,t.params[4]="rgba(0,0,0,0)");break;case"drawArcText":t.params[1]=this.cx||this.width/2,t.params[2]=this.cy||this.height/2,t.params[3]=0,t.params[4]=0,t.params[5]=0,t.params[6]="1px "+this.fontName,t.params[7]="rgba(0,0,0,0)",e||(t.params[4]="rgba(0,0,0,0)")}return t},this.initTransitionObject=function(){var t=this.meta.render;if(t.transition)this.resetRender(!0);else{this.resetRender(!0);for(var e=0;e<t.transition.objects.length;e++)this.setTransitionObject(t.transition.objects[e])}},this.mapTransitionObject=function(){var t=this,e=this.meta.render,i={},s={},a=!1,r=function(i){var s=e.transition.types.hasOwnProperty(i)?e.transition.types[i].all:[],r=e.types.hasOwnProperty(i)?e.types[i].all:[],n=e.transition.objects,o=e.objects,h=e.origin,l={},c=[],d=s.length>0&&"Data"==i&&n[s[0]].params[0];if("Data"==i&&"rectangle"!=d&&(t.data.y&&t.data.y.histogram||t.meta.vals.histogram))for(var p=t.data.y&&t.data.y.histogram?t.data.y.histogram:t.meta.vals.histogram,g=0;g<p.length;g++)for(var u=0;u<p[g].length;u++)for(var m=0;m<p[g][u].length;m++){var f=p[g][u][m]+":0:"+u+":false",y=p[g][u][m]+":0:"+(u+1)+":false";if(t.meta.vals.histogram){var x=e.map[f],v=e.map[y];f=g+":"+(u+1);null!=(b=e.transition.map[f])&&null!=x?c.push([b,x]):null!=b&&null!=v&&c.push([b,v])}else{var b=e.transition.map[f],A=e.transition.map[y],w=g+":"+(u+1)+":0";x=e.map[w];null!=b&&null!=x?c.push([b,x]):null!=A&&null!=x&&c.push([A,x])}}else if("Data"==i&&"rectangle"==d&&t.meta.vals.histogram)for(p=t.meta.vals.histogram,g=0;g<p.length;g++)for(u=0;u<p[g].length;u++)for(m=0;m<p[g][u].length;m++){f=p[g][u][m]+":0:"+u+":false",y=p[g][u][m]+":0:"+(u+1)+":false",x=e.map[f],v=e.map[y],f=g+":"+(u+1)+":0";null!=(b=e.transition.map[f])&&null!=x?c.push([b,x]):null!=b&&null!=v&&c.push([b,v])}else{for(g=0;g<r.length;g++){var C=o[r[g]];if(!C.skip)for(u=0;u<h[r[g]].length;u++){if(T=h[r[g]][u]){n[T];c.push([T,r[g]])}else c.push([t.setTransitionObject(t.cloneObject(C),!0),r[g]]);l[T]=!0}}if(!a)for(g=0;g<s.length;g++){var T;(T=n[s[g]]).skip||l[s[g]]||c.push([s[g],t.setTransitionObject(t.cloneObject(T),!1,i.match(/Axes/))])}}return c};for(var n in e.transition||(this.initTransitionObject(),a=!0),"Tree"==this.graphType&&this.data.tree.click&&function(){var i,s={},a=t.data.tree.click,r=a._children?e.transition.objects:e.objects,n=(a.id,a._children?e.objects[e.map["Tree-Node:"+a.id]]:e.transition.objects[e.transition.map["Tree-Node:"+a.id]]);a._children?(a.children=a._children,i=a.descendants(),a._children=a.children,a.children=null):i=a.descendants();for(var o=0;o<i.length;o++)s[i[o].id.toString()]=!0;for(o=0;o<r.length;o++)for(var h in s){var l=new RegExp(":"+h+"$");if(r[o].id.match(l))switch(r[o].func){case"drawLine":r[o].baseline=[n.params[1],n.params[2],n.params[1],n.params[2]];break;default:r[o].baseline=[n.params[1],n.params[2]]}}t.data.tree.click=!1}(),e.types)s[n]=r(n),i[n]=!0;for(var n in e.transition.types)i.hasOwnProperty(n)||(s[n]=r(n));return s}},CanvasXpress.prototype.initExample=function(){this.getDataSet=function(t){if(t&&t.match(/RandomFunction/))return this.createRandomFunction();if(t&&t.match(/RandomVenn/))return this.createRandomVenn();if(t&&t.match(/RandomChord/))return this.createRandomChord();if(t&&t.match(/RandomNonLinearFit/))return this.createRandomNonLinearFit();if(t&&t.match(/RandomKaplanMeier/))return this.createRandomKaplanMeier();if(t&&t.match(/RandomGenome/))return this.createRandomGenome();if(t&&t.match(/RandomSankey/))return this.createRandomSankey();if(t&&t.match(/RandomCircular/))return this.createRandomCircular(t);if(t&&t.match(/RandomIdeogram/))return this.createRandomIdeogram(t);if(t&&t.match(/RandomNetwork/)){var e=t.split(":"),i={randomNetworkReduce:this.randomNetworkReduce,randomNetworkNodes:this.randomNetworkNodes,randomNetworkNodeEdgesMax:this.randomNetworkNodeEdgesMax,randomNetworkAll:this.randomNetworkAll,randomNetworkDummy:this.randomNetworkDummy,randomNetworkLayout:this.randomNetworkLayout};e.length>0&&(null!=e[1]&&Number(e[1])>0?this.randomNetworkReduce=!0:this.randomNetworkReduce=!1,null!=e[2]&&(this.randomNetworkNodes=Number(e[2])),null!=e[3]&&(this.randomNetworkNodeEdgesMax=Number(e[3])),null!=e[4]&&Number(e[4])>0?this.randomNetworkAll=!0:this.randomNetworkAll=!1,null!=e[5]&&Number(e[5])>0?this.randomNetworkDummy=!0:this.randomNetworkDummy=!1,null!=e[6]&&(this.randomNetworkLayout=e[6]));var s=this.createRandomNetwork();return this.randomNetworkReduce=i.randomNetworkReduce,this.randomNetworkNodes=i.randomNetworkNodes,this.randomNetworkNodeEdgesMax=i.randomNetworkNodeEdgesMax,this.randomNetworkAll=i.randomNetworkAll,this.randomNetworkDummy=i.randomNetworkDummy,this.randomNetworkLayout=i.randomNetworkLayout,s}if(t&&t.match(/Random/)){var a=!!t.match(/Multidimensional/);e=t.split(":"),i={randomDataVariables:this.randomDataVariables,randomDataSamples:this.randomDataSamples,randomDataVariableAnnotations:this.randomDataVariableAnnotations,randomDataSampleAnnotations:this.randomDataSampleAnnotations,randomDataMin:this.randomDataMin,randomDataMax:this.randomDataMax,randomMissingDataPercentage:this.randomMissingDataPercentage,randomDataTime:this.randomDataTime,randomDataDistribution:this.randomDataDistribution,randomDataMean:this.randomDataMean,randomDataSigma:this.randomDataSigma};e.length>0&&(null!=e[1]&&(this.randomDataVariables=Number(e[1])),null!=e[2]&&(this.randomDataSamples=Number(e[2])),this.randomDataVariableAnnotations=null!=e[3]?Number(e[3]):0,this.randomDataSampleAnnotations=null!=e[4]?Number(e[4]):0,null!=e[5]&&(this.randomDataSampleMin=Number(e[5])),null!=e[6]&&(this.randomDataSampleMax=Number(e[6])),this.randomMissingDataPercentage=null!=e[7]?Number(e[7]):0,this.randomDataTime=null!=e[8]&&"false"!=e[8],null!=e[9]&&(this.randomDataDistribution=e[9]),null!=e[10]&&(this.randomDataMean=Number(e[10])),null!=e[11]&&(this.randomDataSigma=Number(e[11])));s=this.createRandomData(a,!0);return this.randomDataVariables=i.randomDataVariables,this.randomDataSamples=i.randomDataSamples,this.randomDataVariableAnnotations=i.randomDataVariableAnnotations,this.randomDataSampleAnnotations=i.randomDataSampleAnnotations,this.randomDataMin=i.randomDataMin,this.randomDataMax=i.randomDataMax,this.randomMissingDataPercentage=i.randomMissingDataPercentage,this.randomDataTime=i.randomDataTime,this.randomDataDistribution=i.randomDataDistribution,this.randomDataMean=i.randomDataMean,this.randomDataSigma=i.randomDataSigma,s}return"Venn"==this.graphType?this.createRandomVenn():"Genome"==this.graphType?this.createRandomGenome():"Sankey"==this.graphType?this.createRandomSankey():"Circular"==this.graphType?this.showIdeogram?this.createRandomIdeogram():this.createRandomCircular("RandomCircular"):"Network"==this.graphType?this.getDataSet("RandomNetwork:1:20:10:0:0:large"):this.getDataSet("Random:4:8:1:2:1:100:0:false:biased:0:1")}},CanvasXpress.prototype.initData=function(){this.isValidPlotData=function(t){var e=this.isGroupedData?this.data.w:this.data.y;return!("cor"!=t||!e.cor)||(!("venn"!=t||!this.data.venn)||(!("network"!=t||!this.data.nodes)||(!("genome"!=t||!this.data.tracks)||(!!("sum"==t&&e.sum&&e.sum[0].length>0)||(!!("max"==t&&e.max&&e.max[0].length>0)||(!!("min"==t&&e.min&&e.min[0].length>0)||(!!("count"==t&&e.count&&e.count[0].length>0)||(!!("mean"==t&&e.mean&&e.mean[0].length>0)||(!!("median"==t&&e.median&&e.median[0].length>0)||(!!("iqr"==t&&e.iqr1&&e.qtl1&&e.median&&e.qtl3&&e.iqr3&&e.median[0].length>0)||!("raw"!=t||!this.isRawData)))))))))))},this.setRangeData=function(t,e,i,s,a){var r=this,n=this.isGroupedData&&!e&&this.data.w?this.data.w:this.data.y,o="Scatter2D"==this.graphType&&"visium"==this.scatterType&&CanvasXpress.cacheImages[this.backgroundImageMD5||this.getFileName(this.backgroundImage)],h=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY;if(null!=this.setMin&&null!=this.setMax)return this.minData=this.setMin,void(this.maxData=this.setMax);if(this.isGroupedData&&!t&&(t="Boxplot"==this.graphType?"iqr":this.summaryType,"Boxplot"!=this.graphType||this.isBoxplotCalc||(this.groupSamples(this.groupingFactors,!1,!1,!1,!0),n=this.data.w)),"Meter"==this.graphType){var c;c=this.layoutValid&&this.segregateVariablesBy.length&&this.segregateSamplesBy.length?this.data.l.comp[this.layoutCurrent||0][0][0]:this.layoutValid&&this.segregateVariablesBy.length&&!this.segregateSamplesBy.length?this.layoutCurrent||0:this.layoutValid&&this.segregateSamplesBy.length?this.meterVar?this.getVariableIndices(this.meterVar):0:this.layoutValid?this.layoutCurrent||0:this.meterVar?this.getVariableIndices(this.meterVar):0,this.meterIndex=c>=0?c:0;var d=this.data.y.data[this.meterIndex];h=0,l=this.max(d,!0)}else{if("fish"==t)"xAxis"==a?(h=this.fishTimepoints[0]-(this.fishTimepoints[this.fishTimepoints.length-1]-this.fishTimepoints[0])/5,l=this.fishTimepoints[this.fishTimepoints.length-1]):(h=0,l=100);else if("genome"==t)for(var p=this.data.tracks.length,g=0;g<p;g++)for(var u=this.data.tracks[g].data.length,m=0;m<u;m++)if("box"==this.data.tracks[g].type)for(var f=this.data.tracks[g].data[m].data.length,y=0;y<f;y++)d=this.data.tracks[g].data[m].data[y],l=Math.max(l,Math.max(d[0],d[1])),h=Math.min(h,Math.min(d[0],d[1]));else if("sequence"==this.data.tracks[g].type)d=this.data.tracks[g].data[m].offset,l=Math.max(l,d+this.data.tracks[g].data[m].sequence.length),h=Math.min(h,d);else if(this.data.tracks[g].type.match(/bar|heatmap/))d=this.data.tracks[g].data[m].offset,l=this.data.tracks[g].autowidth?Math.max(l,d+this.data.tracks[g].data[m].data.length):Math.max(l,d),h=Math.min(h,d);else if("dataframe"==this.data.tracks[g].type)for(f=this.data.tracks[g].data[0].data.length,y=0;y<f;y++)d=this.data.tracks[g].dataframe[this.data.tracks[g].data[0].data[y].xAxis],l=Math.max(l,d[d.length-1]),h=Math.min(h,d[0]);else if("marker"==this.data.tracks[g].type)for(f=this.data.tracks[g].data[m].data.length,y=0;y<f;y++)d=this.data.tracks[g].data[m].data[y],l=Math.max(l,d[d.length-1]),h=Math.min(h,d[0]);else d=this.data.tracks[g].data[m].offset,l=Math.max(l,d),h=Math.min(h,d);else if("circular"==t)if("chord"==this.circularType)this.circularChord=this.chordifyData(),h=0,l=this.circularChord.total;else if((w=this.getVariableIndices(this.rAxis))>=0){var x=this.range(this.data.y.data[w]);h=x[0],l=x[1]}else h=0,l=1;else if("gantt"==t){this.data.gantt||(this.isGanttDataFormated=!1,this.setGanttData());g=this.getVariableIndices(this.ganttStart),m=this.getVariableIndices(this.ganttEnd);var v=this.cloneObject(this.data.gantt);h=v[g].sort((function(t,e){return t-e}))[0],l=v[m].sort((function(t,e){return e-t}))[0]}else if("km"!=t||e)if("qq"==t||"cdf"==t){"qq"==t?this.checkQQPlot():this.checkCDFPlot();j=this.layoutValid?this.meta.data.p.l:this.meta.data.p.g;if(this.layoutValid)for(g=0;g<j.length;g++)for(m=0;m<j[g].length;m++)h=Math.min(h,j[g][m].data[a][0]),l=Math.max(l,j[g][m].data[a][j[g][m].data[a].length-1]);else for(g=0;g<j.length;g++)h=Math.min(h,j[g].data[a][0]),l=Math.max(l,j[g].data[a][j[g].data[a].length-1])}else if("density"==t&&n.density)if(this.histogramAsDotplot&&"yAxis"==a)"down"!=this.histogramStackDir?(h=-.5,l=.5):(h=0,l=1);else if(this.densityPosition.match(/filled|stacked/))"count"==this.histogramStat?("filled"==this.densityPosition||"stacked"==this.densityPosition)&&(l=n.global.maxY):"filled"==this.densityPosition?l=1:"stacked"==this.densityPosition&&(l=n.position.max),h=0;else if("stacked"==this.histogramType&&"count"==this.histogramStat){if(this.layoutValid&&this.data.l){var b=function(t){for(var e=1;e<r.data.l.name.length;e++)if(r.data.l.name[e]==t)return e-1;return 0};for(g=0;g<this.data.l.axes.length;g++){var A=0;for(m=0;m<this.data.l.axes[g].yAxis.length;m++){var w=b(this.data.l.axes[g].yAxis[m]);A+=n.density[w].histogram.maxY}l=Math.max(l,A)}}else l=n.global.maxY;h=0}else{"stacked"==this.histogramType&&(l=0);for(g=0;g<this.smpIndices.length;g++)"stacked"==this.histogramType?l+=n.density[this.smpIndices[g]-1].globalMaxY:l=Math.max(l,n.density[this.smpIndices[g]-1].globalMaxY);h=0}else if("percentile"!=t||e||s)if("mean"!=t&&"median"!=t&&"sum"!=t&&"max"!=t&&"min"!=t&&"count"!=t||e)if("mean"!=this.summaryType||this.isRawData)if("iqr"==t&&!e&&this.grpIndices||"iqr"==this.summaryType&&!this.isRawData)for(H=this.isDOE&&1==this.isDOE?this.data.y.vars.length:this.varIndices.length,g=0;g<H;g++){p=this.varIndices[g];var C=this.grpIndices?this.grpIndices:this.smpIndices,T=C.length;for(m=0;m<T;m++){u=C[m];var S=n.iqr1[p][u],M=n.iqr3[p][u],D=n.out[p][u];if(isNaN(S)||isNaN(M)||(i?S>0&&M>0&&(h=Math.min(S,h),l=Math.max(M,l)):(h=Math.min(S,h),l=Math.max(M,l))),D){var k=D.length;for(y=0;y<k;y++)isNaN(D[y])||(i?D[y]>0&&(h=Math.min(D[y],h),l=Math.max(D[y],l)):(h=Math.min(D[y],h),l=Math.max(D[y],l)))}}}else if("cor"==t)for(p=(O="variables"==this.correlationAxis?this.varIndices:this.isGroupedData?this.grpIndices:this.smpIndices).length,g=0;g<p;g++)for(u=O.length,m=0;m<u;m++){z=this.isTransformedData&&n.trans?n.trans[g][m]:n.cor[g][m];isNaN(z)||(i?z>0&&(h=Math.min(z,h),l=Math.max(z,l)):(h=Math.min(z,h),l=Math.max(z,l)))}else{X=this.isTransformedData&&n.trans?n.trans:n.data;var L=!!o&&o.height;if(X&&X.length>0)if(s){F=(R=(P="Circular"==this.graphType&&this.showIdeogram)?[this.varIndices,this.smpIndices]:[this.smpIndices,this.varIndices])[0].length;l=0,h=0,maxSt=0,minSt=0;for(g=0;g<F;g++){for(_=0,E=0,V=R[1].length,m=0;m<V;m++){z=P?X[R[0][g]][R[1][m]]:X[R[1][m]][R[0][g]];isNaN(z)||(minSt=Math.min(z,minSt),maxSt=Math.max(z,maxSt),z>0?_+=z:z<0&&(E+=z))}l=Math.max(_,l),h=Math.min(E,h)}}else for(p=this.motionBy||this.isDOE&&1==this.isDOE?this.data.y.vars.length:this.varIndices.length,g=0;g<p;g++)for(u=this.smpIndices.length,m=0;m<u;m++){var I=this.motionBy?g:this.varIndices[g];if(X[I]){z=L?L-X[I][this.smpIndices[m]]:X[I][this.smpIndices[m]];isNaN(z)||(i?z>0&&(h=Math.min(z,h),l=Math.max(z,l)):(h=Math.min(z,h),l=Math.max(z,l)))}}}else{var p=this.isDOE&&1==this.isDOE?this.data.y.vars.length:this.varIndices.length;for(g=0;g<p;g++)for(var u=this.smpIndices.length,m=0;m<u;m++){var z=n.mean[this.varIndices[g]][this.smpIndices[m]],N=n.stdev&&n.stdev[this.varIndices[g]]&&n.stdev[this.varIndices[g]][this.smpIndices[m]]/2?n.stdev[this.varIndices[g]][this.smpIndices[m]]/2:0;isNaN(z)||(isNaN(N)?(h=Math.min(z,h),l=Math.max(z,l)):(h=Math.min(z-N,h),l=Math.max(z+N,l)))}}else if(s)if(this.dodgeBy){var B=this.dodgeBy;this.dodgeBy=!1,this.groupingFactors.push(B),this.groupSamples(this.groupingFactors,!1,!1,!1,!0),l=this.maxData,h=this.minData,this.groupingFactors.pop(),this.groupSamples(this.groupingFactors,!1,!1,!1,!0),this.dodgeBy=B}else{l=0,h=0,maxSt=0,minSt=0;for(var P,R,O=this.isGroupedData?this.grpIndices:this.smpIndices,X=this.isTransformedData?n.trans:n[this.summaryType],F=(R=(P="Circular"==this.graphType&&this.showIdeogram)?[this.varIndices,O]:[O,this.varIndices])[0].length,g=0;g<F;g++){for(var p=R[0][g],_=0,E=0,V=R[1].length,m=0;m<V;m++){var u=this.isGroupedData?m:R[1][m],z=P?X[p][u]:X[u][p];isNaN(z)||(minSt=Math.min(z,minSt),maxSt=Math.max(z,maxSt),z>0?_+=z:z<0&&(E+=z))}l=Math.max(_,l),h=Math.min(E,h)}}else for(var H=this.isDOE&&1==this.isDOE?this.data.y.vars.length:this.varIndices.length,g=0;g<H;g++){var G,p=this.varIndices[g];if(this.isTransformedData?(d=n.trans[g],G=!!n.tstdev&&n.tstdev[g]):("mean"==this.summaryType?d=n.mean[g]||n.mean[p]:"median"==this.summaryType?d=n.median[g]||n.median[p]:"sum"==this.summaryType?d=n.sum[g]||n.sum[p]:"max"==this.summaryType?d=n.max[g]||n.max[p]:"min"==this.summaryType?d=n.min[g]||n.min[p]:"count"==this.summaryType&&(d=n.count[g]||n.count[p]),G=!!n.stdev&&(n.stdev[g]||n.stdev[p])),d)for(var q=d.length,m=0;m<q;m++){var z=d[m];J=G?G[m]/2:Number.NaN,isNaN(z)||(isNaN(J)?i?z>0&&(h=Math.min(z,h),l=Math.max(z,l)):(h=Math.min(z,h),l=Math.max(z,l)):i?z>0&&(h=Math.min(z-J,h),l=Math.max(z+J,l)):(h=Math.min(z-J,h),l=Math.max(z+J,l)))}}else h=0,l=100;else if(this.layoutValid||this.checkKMPlot(),"y"==a)h=0,l=1;else{var j=this.layoutValid&&this.meta.data.p.l.length?this.meta.data.p.l:this.meta.data.p.g;if(this.layoutValid&&this.meta.data.p.l.length)for(var g=0;g<j.length;g++)for(var m=0;m<j[g].length;m++)h=Math.min(h,j[g][m].data.time[0]),l=Math.max(l,j[g][m].data.time[j[g][m].data.time.length-1]);else for(var g=0;g<j.length;g++)h=Math.min(h,j[g].data.time[0]),l=Math.max(l,j[g].data.time[j[g].data.time.length-1])}}if("Boxplot"==this.graphType&&this.showViolinBoxplot&&!this.violinTrim){var U=this.meta.data.d;if(this.isGroupedData)for(p=(U=U.g).length,g=0;g<p;g++)for(u=U[g].length,m=0;m<u;m++){(Y=U[g][m].density.xy).length&&(isNaN(Y[0][0])||(h=Math.min(h,Y[0][0])),isNaN(Y[Y.length-1][0])||(l=Math.max(l,Y[Y.length-1][0])))}else for(p=(U=U.v).length,g=0;g<p;g++){var Y;(Y=U[g].density.xy).length&&(isNaN(Y[0][0])||(h=Math.min(h,Y[0][0])),isNaN(Y[Y.length-1][0])||(l=Math.max(l,Y[Y.length-1][0])))}}else if("Scatter2D"==this.graphType&&"visium"==this.scatterType){var W=CanvasXpress.cacheImages[this.backgroundImageMD5||this.getFileName(this.backgroundImage)];h=0,l=a.match(/y/i)?W.height:W.width}else if("Scatter2D"==this.graphType&&this.ribbonBy){X=this.isTransformedData&&n.trans?n.trans:n.data,U=this.meta.data;if(this.isArray(this.ribbonBy))if(U.z&&U.z.hasOwnProperty(this.ribbonBy[0])&&"Numeric"==U.z[this.ribbonBy[0]].type&&U.z.hasOwnProperty(this.ribbonBy[1])&&"Numeric"==U.z[this.ribbonBy[1]].type)for(g=0;g<this.varIndices.length;g++){var $=this.data.z[this.ribbonBy[0]][this.varIndices[g]],Q=this.data.z[this.ribbonBy[1]][this.varIndices[g]];isNaN($)||(h=Math.min($,h),l=Math.max($,l)),isNaN(Q)||(h=Math.min(Q,h),l=Math.max(Q,l))}else{var K=this.getSampleIndices(this.ribbonBy);if(this.isArray(K))for(g=0;g<this.varIndices.length;g++)for(m=0;m<this.smpIndices.length;m++){$=X[this.varIndices[g]][K[0]],Q=X[this.varIndices[g]][K[1]];isNaN($)||(h=Math.min($,h),l=Math.max($,l)),isNaN(Q)||(h=Math.min(Q,h),l=Math.max(Q,l))}}else if(U.z&&U.z.hasOwnProperty(this.ribbonBy)&&"Numeric"==U.z[this.ribbonBy].type)for(g=0;g<this.varIndices.length;g++){var J=this.data.z[this.ribbonBy][this.varIndices[g]];for(m=0;m<this.smpIndices.length;m++){z=X[this.varIndices[g]][this.smpIndices[m]];isNaN(z)||isNaN(J)||(h=Math.min(z-J,h),l=Math.max(z+J,l))}}else for(g=0;g<this.varIndices.length;g++)for(m=0;m<this.smpIndices.length;m++){z=X[this.varIndices[g]][this.smpIndices[m]],J=X[this.varIndices[g]][K];isNaN(z)||isNaN(J)||(h=Math.min(z-J,h),l=Math.max(z+J,l))}}this.minData=null!=this.setMin?this.setMin:h==Number.POSITIVE_INFINITY||h==Number.NEGATIVE_INFINITY?0:h,this.maxData=null!=this.setMax?this.setMax:l==Number.NEGATIVE_INFINITY||l==Number.POSITIVE_INFINITY?1:l,s&&"percentile"!=t&&(this.minDataStacked=minSt,this.maxDataStacked=maxSt)},this.setRangeDataObject=function(t){for(var e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,s=this.varIndices.length,a=0;a<s;a++)for(var r=this.smpIndices.length,n=0;n<r;n++){var o=t[this.varIndices[a]][this.smpIndices[n]];isNaN(o)||(e=Math.min(o,e),i=Math.max(o,i))}return[e=e==Number.POSITIVE_INFINITY||e==Number.NEGATIVE_INFINITY?-1:e,i=i==Number.NEGATIVE_INFINITY||i==Number.POSITIVE_INFINITY?1:i]},this.checkObject=function(){var t=this.data.y;this.isGroupedData&&(this.data.w={},t=this.data.w);for(var e=["vars","smps","labs","glab","desc","data","mean","median","stdev","n","qtl1","qtl3","iqr1","iqr3","out","conf","nfac","trans","tstdev","cor","min","max","sum","count","grps","grpIdxs","factors"],i=e.length,s=0;s<i;s++)t[e[s]]||(t[e[s]]="factors"==e[s]?{}:[]);t.iqr=t.median},this.resetObject=function(t){var e=["mean","median","stdev","n","qtl1","qtl3","iqr1","iqr3","out","conf","nfac","cor","min","max","sum","count","grps","grpIdxs","factors"],i=e.length;if(this.isGroupedData){this.isTransformedData||(e.push("trans"),e.push("tstdev")),i=e.length;for(var s=0;s<i;s++)delete this.data.y[e[s]];delete this.data.w}else if(this.isTransformedData||(e.push("trans"),e.push("tstdev")),i=e.length,this.isRawData)for(s=0;s<i;s++)delete this.data.y[e[s]];t&&this.isRawData&&this.checkObject()},this.summarize=function(t,e){var i=this.isGroupedData?this.data.w:this.data.y,s=!this.isGroupedData;this.isGroupedData||this.checkObject();var a=["trans","tstdev","mean","median","stdev","qtl1","qtl3","iqr1","iqr3","out","conf","nfac","n","min","max","sum","count"],r=0,n=function(t,e){i[t][e]||(i[t][e]=[])};if("cor"==t)if(this.isBoxplotCalc=!1,"samples"==this.correlationAxis){this.isGroupedData&&0==i.cor.length&&this.ungroupSamples(!0,!0,!0);for(var o=this.isGroupedData?this.grpIndices:this.smpIndices,h=o.length,l=0;l<h;l++){var c=o[l],d=this.getDataForSmpGrpAtIndex(c);i.cor[c]||(i.cor[c]=[]);for(var p=o.length,g=l;g<p;g++){var u=o[g];i.cor[u]||(i.cor[u]=[]);var m=this.getDataForSmpGrpAtIndex(u);l==g?(this.isTransformedData&&(i.trans[c][u]=1),i.cor[c][u]=1):(i.cor[c][u]=this.correlation(d,m),i.cor[u][c]=i.cor[c][u],this.isTransformedData&&(i.trans[c][u]=i.cor[c][u],i.trans[u][c]=i.cor[u][c]))}}}else for(h=this.varIndices.length,l=0;l<h;l++){c=this.varIndices[l];i.cor[c]||(i.cor[c]=[]);for(p=this.varIndices.length,g=l;g<p;g++){u=this.varIndices[g];i.cor[u]||(i.cor[u]=[]),l==g?(i.cor[c][u]=1,this.isTransformedData&&(i.trans[c][u]=1)):(i.cor[c][u]=this.correlation(i.data[c],i.data[u],s),i.cor[u][c]=i.cor[c][u],this.isTransformedData&&(i.trans[c][u]=i.cor[c][u],i.trans[u][c]=i.cor[u][c]))}}else{this.isBoxplotCalc="iqr"==t;for(h=this.isDOE&&1==this.isDOE?this.data.y.vars.length:this.varIndices.length,l=0;l<h;l++){c=this.varIndices[l];var f,y=a.length;for(g=0;g<y;g++)n(a[g],c);if(this.isGroupedData)if(e)f=e[c];else{var x=this.isTransformedData?this.data.y.trans:this.data.y.data;f=[];var v=this.data.w.grps.length;for(g=0;g<v;g++){f[g]=[];for(var b=this.data.w.grps[g].length,A=0;A<b;A++){var w=this.data.w.grps[g][A];f[g].push(x[c][w])}}}else{i.grps=[],f=[];for(p=this.smpIndices.length,g=0;g<p;g++){u=this.smpIndices[g];i.grps[g]=[],i.grps[g].push(u),f[g]=[this.isTransformedData&&i.trans?i.trans[c][u]:i.data[c][u]]}}if("iqr"==t){if(this.summaryType="iqr",this.isRawData)if(this.isGroupedData)for(y=f.length,g=0;g<y;g++){var C=this.boxplot(f[g]);this.isTransformedData&&(i.trans[c][g]=C[1]),i.mean[c][g]=C[0],i.median[c][g]=C[2],i.qtl1[c][g]=C[1],i.qtl3[c][g]=C[3],i.iqr1[c][g]=C[4],i.iqr3[c][g]=C[5],i.out[c][g]=C[6],i.n[c][g]=C[7],i.conf[c][g]=C[8],r=Math.max(r,C[7])}else{p=this.smpIndices.length;for(var g=0;g<p;g++){u=this.smpIndices[g];this.isTransformedData&&(i.trans[c][g]=f[g][0]),i.mean[c][u]=f[g][0],i.median[c][u]=f[g][0],i.qtl1[c][u]=f[g][0],i.qtl3[c][u]=f[g][0],i.iqr1[c][u]=f[g][0],i.iqr3[c][u]=f[g][0],i.out[c][u]=[],i.n[c][u]=1,i.conf[c][u]=[],r=1}}i.iqr=i.median}else if("median"==t){if(this.summaryType="median",this.isRawData)for(y=f.length,g=0;g<y;g++){C=this.median(f[g],s);this.isTransformedData&&(i.trans[c][g]=C[1]),i.median[c][g]=C[0],i.n[c][g]=C[1]}}else if("mean"==t||"raw"==t){if(this.summaryType="mean",this.isRawData)for(y=f.length,g=0;g<y;g++){C=this.sumarizeErrorData(f[g],s);this.isTransformedData&&(i.trans[c][g]=C[0],i.tstdev[c][g]=C[1]),i.mean[c][g]=C[0],i.stdev[c][g]=C[1],i.n[c][g]=C[2]}}else if("sum"==t){if(this.summaryType="sum",this.isRawData)for(y=f.length,g=0;g<y;g++){var T=this.sum(f[g],s);this.isTransformedData&&(i.trans[c][g]=T),i.sum[c][g]=T,i.n[c][g]=f[g].length}}else if("max"==t){if(this.summaryType="max",this.isRawData)for(y=f.length,g=0;g<y;g++){var S=this.max(f[g],s);this.isTransformedData&&(i.trans[c][g]=S),i.max[c][g]=S,i.n[c][g]=f[g].length}}else if("min"==t){if(this.summaryType="min",this.isRawData)for(y=f.length,g=0;g<y;g++){var M=this.min(f[g],s);this.isTransformedData&&(i.trans[c][g]=M),i.min[c][g]=M,i.n[c][g]=f[g].length}}else if("count"==t&&(this.summaryType="count",this.isRawData))for(y=f.length,g=0;g<y;g++){var D=f[g].length;this.isTransformedData&&(i.trans[c][g]=D),i.count[c][g]=D,i.n[c][g]=D}}if("iqr"==t)for(l=0;l<i.n.length;l++)if(i.n[l])for(g=0;g<i.n[l].length;g++)i.nfac[l][g]=Math.sqrt(Math.log(i.n[l][g]))/Math.sqrt(Math.log(r))}},this.copySummarizedData=function(){for(var t,e=this.isGroupedData?this.data.w:this.data.y,i=0;i<this.varIndices.length;i++){var s=this.varIndices[i];if(e.data[s]=[],e.trans[s]=[],"mean"==this.summaryType)for(var a=0;a<e.mean[s].length;a++)e.data[s][a]=e.mean[s][a];else if("median"==this.summaryType||"iqr"==this.summaryType)for(a=0;a<e.median[s].length;a++)e.data[s][a]=e.median[s][a];else if("sum"==this.summaryType)for(a=0;a<e.sum[s].length;a++)e.data[s][a]=e.sum[s][a];else if("max"==this.summaryType)for(a=0;a<e.max[s].length;a++)e.data[s][a]=e.max[s][a];else if("min"==this.summaryType)for(a=0;a<e.min[s].length;a++)e.data[s][a]=e.min[s][a];else if("count"==this.summaryType)for(a=0;a<e.count[s].length;a++)e.data[s][a]=e.count[s][a];t||(t=s)}return t},this.transformValue=function(t,e,i){switch(t){case"log2":return i?Math.pow(2,e):Math.log(e)/Math.LN2;case"log10":return i?Math.pow(10,e):Math.log(e)/Math.LN10;case"exp2":return i?Math.log(e)/Math.LN2:Math.pow(2,e);case"exp10":return i?Math.log(e)/Math.LN10:Math.pow(10,e);default:return e}},this.transform=function(t,e,i,s){if(!this.isTransition()&&!this.graphType.match(/Area/)){this.isGroupedData||this.checkObject();var a=this.transformData;if(this.transformData=t,this.transformAxis=e,this.xAxisMaxStrLength=!1,this.xAxis2MaxStrLength=!1,this.yAxisMaxStrLength=!1,this.zAxisMaxStrLength=!1,"reset"==t||"undo"==t)this.transformReset(),this.transformData=!1,this.isTransformedData=!1,this.tempIndices&&(this.isGroupedData?this.grpIndices=this.tempIndices:this.smpIndices=this.tempIndices,this.tempIndices=!1);else if("save"==t)this.transformSave(),this.transformData=!1,this.isTransformedData=!1;else if("log2"==t||"log10"==t||"exp2"==t||"exp10"==t){if(!this.transformLogExp(t))return void(this.transformData=a);this.isTransformedData=t}else"ratio2"==t||"ratio10"==t?(this.transformRatio(t,i),this.isTransformedData=t):(this.transformRelative(t,e,!this.isRawData||this.isGroupedData?this.copySummarizedData():0),this.isTransformedData=t);delete this.meta.def.colorBrew,"Boxplot"==this.graphType&&(this.summarizeBoxplot=!0),this.resetCorrelation(),this.resetRange(),s||this.draw({func:"transform",par:[t,e,i,s]})}},this.transformReset=function(){for(var t=this.data.y,e=0;e<this.varIndices.length;e++)for(var i=this.varIndices[e],s=0;s<t.data[i].length;s++)t.trans&&t.trans[i]&&!isNaN(t.data[i][s])&&(t.trans[i][s]=t.data[i][s]);this.isGroupedData&&(this.isTransformedData=!1,this.groupSamples(this.groupingFactors,!1,!1,!1,!0))},this.transformSave=function(){var t=!!this.isGroupedData&&this.groupingFactors,e=this.data.y;if(e.trans&&e.trans.length>0){this.ungroupSamples();for(var i=0;i<this.varIndices.length;i++)for(var s=this.varIndices[i],a=0;a<e.data[s].length;a++)isNaN(e.data[s][a])||(e.data[s][a]=e.trans[s][a]);t&&(this.isTransformedData=!1,this.groupSamples(t,!1,!1,!1,!0))}},this.transformLogExp=function(t){var e=this.isGroupedData?this.data.y:this.dataStndBy&&!this.isDOE?this.dataStndBy.y:this.data.y,i=this.range2D(e.data);if(t.match(/log/)){if(i[0]<=0){if(!this.nanOmit)return alert("Cannot log transform values <= 0"),!1;console.log("Dropping values <= 0"),alert("Dropping values <= 0")}t="log2"==t?"log2":"log10"}else if(t.match(/exp/)){if(i[1]>=1e3)return alert("Cannot exp transform values > 1000"),!1;t="exp2"==t?"exp2":"exp10"}e.trans||(e.trans=[]),e.tstdev||(e.tstdev=[]);for(var s=this.motionBy||this.isGroupedData?this.data.y.vars.length:this.dataStndBy&&!this.isDOE?this.dataStndBy.y.vars.length:this.varIndices.length,a=0;a<s;a++){var r=this.motionBy||this.dataStndBy&&!this.isDOE?a:this.varIndices[a];e.trans[r]||(e.trans[r]=[]),e.tstdev[r]||(e.tstdev[r]=[]);for(var n=0;n<e.data[r].length;n++)isNaN(e.data[r][n])||("log2"==t?(this.transformBase=2,e.trans[r][n]=Math.log(e.data[r][n])/Math.LN2):"log10"==t?(this.transformBase=10,e.trans[r][n]=Math.log(e.data[r][n])/Math.LN10):"exp2"==t?(this.transformBase=2,e.trans[r][n]=Math.pow(2,e.data[r][n])):"exp10"==t&&(this.transformBase=10,e.trans[r][n]=Math.pow(10,e.data[r][n])))}return this.isGroupedData&&(this.isTransformedData=t,this.groupSamples(this.groupingFactors,!1,!1,!0,!0)),!0},this.transformRatio=function(){var t=[],e=this.data,i=this.isGroupedData&&!this.graphType.match(/dotplot|boxplot/i)?e.w:e.y;if(this.isGroupedData&&this.ratioGroupReference&&e.x.hasOwnProperty(this.ratioGroupReference)){if(!this.ratioLevelReference)for(var s=0;s<e.x[this.ratioGroupReference].length;s++)if(null!=e.x[this.ratioGroupReference][s]){this.ratioLevelReference=e.x[this.ratioGroupReference][s];break}if(1==this.groupingFactors.length)this.ratioReference=this.getSampleIndices(this.ratioLevelReference),this.ratioReference<0&&(this.ratioLevelReference=e.w.smps[0],this.ratioReference=0),t=[this.ratioReference];else{var a=[];for(s=0;s<this.groupingFactors.length;s++)this.groupingFactors[s]!=this.ratioGroupReference&&a.push(this.groupingFactors[s]);var r={},n=[],o=0;for(s=0;s<this.smpIndices.length;s++){for(var h,l=this.smpIndices[s],c=[],d=0;d<a.length;d++){var p=a[d];(h=e.x[p][l])||(h="NA"),c.push(h)}h=c.join(" - "),r.hasOwnProperty(h)?r[h].push(l):(e.w.smps.push(h),n[o]=h,r[h]=[],r[h].push(l),o++)}t=this.getSamplesByAnnotationLevel(this.ratioGroupReference,this.ratioLevelReference),this.ratioReference=[];for(s=0;s<e.w.grps.length;s++){var g=e.w.grps[s][0],u=!1;for(var m in r){for(d=0;d<r[m].length;d++)if(g==r[m][d]){u=this.getObjectArray(r[m]);break}if(u)break}for(d=0;d<t.length;d++)if(u.hasOwnProperty(t[d])){this.ratioReference.push(t[d]);break}}}}else{if(this.ratioSampleReference)this.isGroupedData&&this.graphType.match(/dotplot|boxplot/i)?(this.isGroupedData=!1,this.ratioReference=this.getSampleIndices(this.ratioSampleReference),this.isGroupedData=!0):this.ratioReference=this.getSampleIndices(this.ratioSampleReference);this.ratioReference<0&&(this.ratioSampleReference=e.y.smps[0],this.ratioReference=0),t=[this.ratioReference]}for(s=0;s<this.varIndices.length;s++){l=this.varIndices[s];i.trans||(i.trans=[]),i.stdev||(i.stdev=[]),i.trans[l]||(i.trans[l]=[]),i.stdev[l]||(i.stdev[l]=[]);for(d=0;d<i.data[l].length;d++){var f;if(f=this.isGroupedData&&this.ratioGroupReference&&e.x.hasOwnProperty(this.ratioGroupReference)?1==this.groupingFactors.length?e.w.mean[l][this.ratioReference]:e.w.mean[l][this.ratioReference[d]]:i.data[l][this.ratioReference],!isNaN(i.data[l][d])&&!isNaN(f)&&f>0){var y=2==this.transformBase?"ratio2":"ratio10",x=i.data[l][d]/f,v=i.stdev[l][d];"ratio2"==y?(i.trans[l][d]=Math.log(x)/Math.LN2,v&&v>0&&(i.tstdev[l][d]=Math.log(v)/Math.LN2)):"ratio10"==y&&(i.trans[l][d]=Math.log(x)/Math.LN10,v&&v>0&&(i.tstdev[l][d]=Math.log(v)/Math.LN10))}}}},this.transformRelative=function(t,e,i){var s,a=this.isGroupedData&&!this.graphType.match(/dotplot|boxplot/i)?this.data.w:this.data.y,r=!this.isGroupedData;if("samples"==(e=e||this.transformAxis))for(var n=0;n<a.data[i].length;n++){for(var o=[],h=0;h<this.varIndices.length;h++){var l=this.varIndices[h];o.push(a.data[l][n])}"percentile"==t?s=this.range(o):"zscore"==t&&(s=this.sumarizeErrorData(o,r));for(h=0;h<this.varIndices.length;h++){l=this.varIndices[h];a.trans||(a.trans=[]),a.trans[l]||(a.trans[l]=[]),isNaN(a.data[l][n])||("percentile"==t?a.trans[l][n]=this.percentile(s[0],s[1],a.data[l][n]):"zscore"==t&&(a.trans[l][n]=(a.data[l][n]-s[0])/s[1]))}}else for(n=0;n<this.varIndices.length;n++){var c=this.varIndices[n];a.trans||(a.trans=[]),a.trans[c]||(a.trans[c]=[]);o=a.data[c];"percentile"==t?s=this.range(o):"zscore"==t&&(s=this.sumarizeErrorData(o,r));for(h=0;h<o.length;h++)isNaN(a.data[c][h])||("percentile"==t?a.trans[c][h]=this.percentile(s[0],s[1],a.data[c][h]):"zscore"==t&&(a.trans[c][h]=(a.data[c][h]-s[0])/s[1]))}},this.groupSamples=function(t,e,i,s,a,r,n){if(!this.isTransition()&&this.isRawData){var o=this.data;if(!(t=this.isArray(t)?this.unique(t):[t])||t.length<1||!o.x)return this.ungroupSamples();for(var h=0;h<t.length;h++)if(!t||!o.x[t[h]])return this.ungroupSamples();if(!this.isDOE&&this.layoutComb&&o.l&&!o.l.group)return o.l.group=t,void(a||this.draw({func:"groupSamples",par:[t,e,i,s,a,r,n]}));if(o.l&&o.l.group&&(o.l.group=t),this.isDOE&&this.layoutComb&&o.l&&o.l.comp){this.varIndices=[];var l=o.l.comp.length;for(h=0;h<l;h++)for(var c=o.l.comp[h].length,d=0;d<c;d++)this.varIndices.push(o.l.comp[h][d])}var p={},g={},u=this.getObjectArray(this.smpOverlays),m=!(!o.w||!o.w.smps)&&o.w.smps,f=this.cloneObject(this.hiddenGrps);this.isDOE||s||this.resetIndices(!0),s||this.resetIndices(),this.isGroupedData=!0,this.groupingFactors=t,this.resetObject(!0),this.hiddenGrps=n?f:[],this.isGroupedData=!1;for(l=this.smpIndices.length,h=0;h<l;h++){var y,x=this.smpIndices[h],v=[],b=[];for(c=t.length,d=0;d<c;d++){var A=t[d];w=this.getMetadataValue(x,"x",A),"Numeric"==this.meta.data.x[A].type?null==w&&(w="NA"):!1===w?w="false":w||(w="NA"),v.push(w),u.hasOwnProperty(A)||b.push(w)}w=v.join(" :: "),y=b.length>0?b.join(" :: "):"",p.hasOwnProperty(w)||(o.w.smps.push(w),g[w]=y,p[w]=[]),p[w].push(x)}if(this.isGroupedData=!0,o.w.smps.length<1)return o.w.smps=m,void this.draw({func:"groupSamples",par:[t,e,i,s,a,r,n]});this.sortOnGrouping&&("descending"==this.sortOnGrouping?o.w.smps.sort().reverse():o.w.smps.sort());for(l=o.w.smps.length,h=0;h<l;h++){var w=o.w.smps[h];o.w.labs.push(g[w]),o.w.grps.push(p[w]),o.w.grpIdxs.push(h)}if(this.grpIndices=[],i)for(l=i.length,h=0;h<l;h++)this.grpIndices.push(i[h]),n||this.hiddenGrps.push(!1);else for(l=o.w.grps.length,h=0;h<l;h++)this.grpIndices.push(h),n||this.hiddenGrps.push(!1);for(l=this.varIndices.length,h=0;h<l;h++)o.w.vars.push(o.y.vars[this.varIndices[h]]);var C={};for(var w in o.x)C[w]="Numeric"==this.meta.data.x[w].type;for(l=o.w.grps.length,h=0;h<l;h++)for(var w in o.x){var T;if(o.w.factors.hasOwnProperty(w)||(o.w.factors[w]=[]),C[w]){T=[];for(c=o.w.grps[h].length,d=0;d<c;d++){var S=this.getMetadataValue(o.w.grps[h][d],"x",w,!0);isNaN(S)||T.push(S)}o.w.factors[w].push(this.mean(T))}else{T={};for(c=o.w.grps[h].length,d=0;d<c;d++){null!=(S=this.getMetadataValue(o.w.grps[h][d],"x",w,!0))&&""!==S&&(T[S]=!0)}var M=this.getKeys(T);o.w.factors[w].push(M.join(" + "))}}C=[];e?this.isArray(e)?C=e:C.push(e):(e="Boxplot"==this.graphType?"iqr":this.graphType.match(/Stacked/i)?"sum":this.summaryType?this.summaryType:"mean",C.push(e));for(var D=0;D<C.length;D++){var k=[],L=C[D],I=!0;this.isTransformedData&&(I=o.y.trans||this.dataStndBy),this.isTransformedData&&(o.y.trans||this.dataStndBy)?data=o.y.trans?o.y.trans:this.dataStndBy.y.trans:this.isRawData?data=o.y.data:"median"==this.summaryType||"iqr"==this.summaryType?data=o.y.median:"mean"==this.summaryType?data=o.y.mean:"cor"==this.summaryType?data=o.y.cor:"sum"==this.summaryType?data=o.y.sum:"max"==this.summaryType?data=o.y.max:"min"==this.summaryType?data=o.y.min:"count"==this.summaryType?data=o.y.count:data=o.y[this.summaryType];for(l=this.isDOE&&1==this.isDOE?this.data.y.vars.length:this.varIndices.length,h=0;h<l;h++){k[x=this.varIndices[h]]=[];for(c=o.w.grps.length,d=0;d<c;d++){k[x][d]=[];for(var z=o.w.grps[d].length,N=0;N<z;N++){var B=o.w.grps[d][N];k[x][d].push(data[x][B])}}}this.summarize(L,k)}this.setGroupLabels(),this.setOriginalIndices(!1,!1,!1,!this.layoutComb),r||(this.xAxisValues=[],this.xAxis2Values=[],this.yAxisValues=[],this.zAxisValues=[],this.layoutComb&&this.layoutAdjust||"function"==typeof this.setAxes&&this.setAxes()),I||this.transformLogExp(this.isTransformedData),a||this.draw({func:"groupSamples",par:[t,e,i,s,a,r,n]})}},this.ungroupSamples=function(t,e,i){if(!this.isTransition()&&(this.isGroupedData||this.groupingFactors.length)){this.resetIndices(!0),this.isGroupedData=!1;var s=this.data;s.l&&delete s.l.group,s.w&&!i&&delete s.w,this.groupingFactors=[],this.grpIndices=[],this.hiddenGrps=[],this.updateMetaData("w"),e||this.setOriginalIndices(!1,!1,!1,!0),t||this.draw({func:"ungroupSamples",par:[t,e,i]})}},this.regroupSamples=function(){this.isGroupedData=!1,this.groupSamples(this.groupingFactors,!1,!1,!1,!0)},this.removePivot=function(t){this.removeMenus();var e=this.rebuildDataTableFilter();this.isTransition()||(this.isPivot&&(this.switchData(!0,!0),(this.isPivotSegregateVars.length||this.isPivotSegregateSmps.length)&&this.desegregateVariablesSamples(!0),this.isPivotGroup&&this.groupSamples(this.isPivotGroup,!1,!1,!1,!0),this.isPivot=!1,(this.isPivotSegregateVars.length||this.isPivotSegregateSmps.length)&&this.segregateVariablesAndOrSamples(this.isPivotSegregateVars,this.isPivotSegregateSmps,!0),t||this.draw({func:"removePivot",par:[t]})),this.rebuildDataTableFilter(e))},this.pivot=function(t,e){if(!this.isTransition()){this.isPivot=!0,this.isPivotGroup=this.cloneObject(this.groupingFactors),this.isPivotSegregateVars=this.cloneObject(this.segregateVariablesBy),this.isPivotSegregateSmps=this.cloneObject(this.segregateSamplesBy),this.colorBy=!1,this.dataStndBy=this.data,this.configStndBy=this.getConfig(),this.removeMenus();var i=this.rebuildDataTableFilter(),s={y:{data:[],vars:[],smps:[]}};this.desegregateVariablesSamples(!0),this.isPivotGroup&&this.ungroupSamples(!0);for(var a=t.shift(),r=0;r<t.length;r++){s.y.vars.push(t[r][0]);for(var n=[],o=1;o<a.length;o++)n.push(t[r][o]);s.y.data.push(n)}a.shift(),s.y.smps=a,this.initializeData(s,!0),this.segregateVariablesAndOrSamples(this.isPivotSegregateVars,this.isPivotSegregateSmps,!0),this.resetObject(),e||this.draw({func:"pivot",par:[t,e]}),this.rebuildDataTableFilter(i)}},this.pivotX=function(t,e){if(!this.isTransition()){this.isPivot=!0,this.isPivotGroup=this.cloneObject(this.groupingFactors),this.isPivotSegregateVars=this.cloneObject(this.segregateVariablesBy),this.isPivotSegregateSmps=this.cloneObject(this.segregateSamplesBy),this.colorBy=!1,this.dataStndBy=this.data,this.configStndBy=this.getConfig(),this.removeMenus();var i={y:{vars:[],smps:[],data:[]}},s=function(e){for(var i=[],s=0;s<r.length;s++)if(r[s]!=t){var a=h.x[r[s]][e];!1===a?a="false":null===a&&(a="null"),i.push(a.toString().replace("\0",""))}return i.length?i.join("\0"):"x"+e};this.desegregateVariablesSamples(!0);for(var a=this.rebuildDataTableFilter(),r=this.sortObject(this.data.x),n=!1,o=this.meta.data.x[t],h=this.data,l=o.levels.length,c=[],d={},p=1,g=0;g<l;g++){c[g]={};for(var u=0;u<h.y.smps.length;u++){if(h.x[t][u]==o.levels[g]){var m=s(u);c[g][m]||(c[g][m]=[]),c[g][m].push(u)}null!=m&&(d[m]=!0)}}for(var m in d){z=0;for(g=0;g<l;g++)c[g].hasOwnProperty(m)&&(z=Math.max(z,c[g][m].length));d[m]=z}for(g=0;g<l;g++)for(u=0;u<h.y.vars.length;u++)for(var m in i.y.data[g+u]=[],1==h.y.vars.length?i.y.vars.push(o.levels[g].replace("\0","")):i.y.vars.push(h.y.vars[u]+"::"+o.levels[g].replace("\0","")),d)for(var f=0;f<d[m];f++){if(0==g&&0==u){i.y.smps.push("Smp"+p++);for(var y=m.split("\0"),x=0,v=0;v<r.length;v++)r[v]!=t&&(i.x||(i.x={}),i.x.hasOwnProperty(r[v])||(i.x[r[v]]=[]),i.x[r[v]].push(y[x++]))}c[g].hasOwnProperty(m)&&null!=c[g][m][f]?i.y.data[g+u].push(h.y.data[u][c[g][m][f]]):i.y.data[g+u].push(null)}if(i.y.data.length!=i.y.vars.length||i.y.data[0].length!=i.y.smps.length)return this.isPivot=!1,this.isPivotGroup=!1,this.isPivotSegregateVars=!1,this.isPivotSegregateSmps=!1,this.dataStndBy=!1,this.configStndBy=!1,void alert("Invalid Pivoting");if(i.y.vars.includes("null")){var b=null;for(g=0;g<i.y.vars.length;g++)if("null"==i.y.vars[g]){b=g;break}null!=b&&(i.y.vars.splice(b,1),i.y.data.splice(b,1))}this.groupingFactors&&(this.modifyObjectArray([t],!0,"groupingFactors"),this.modifyObjectArray([t],!0,"isPivotSegregateVars"),this.modifyObjectArray([t],!0,"isPivotSegregateSmps"),n=this.groupingFactors,this.ungroupSamples(!0)),this.initializeData(i,!0),this.segregateVariablesAndOrSamples(this.isPivotSegregateVars,this.isPivotSegregateSmps,!0),this.resetObject(),n&&(this.groupingFactors=n),e||this.draw({func:"pivotX",par:[t,e]}),this.isPivotSegregateVars=this.cloneObject(this.segregateVariablesBy),this.isPivotSegregateSmps=this.cloneObject(this.segregateSamplesBy),this.rebuildDataTableFilter(a)}},this.pivotXX=function(t,e,i){for(var s=[],a=this.data,r=0;r<a.y.smps.length;r++)s.push([a.x[t][r],a.x[e][r],a.y.data[0][r]]);var n=this.pivotMatrix(s,0,1,2);return this.pivot(n,i)},this.pivotXY=function(t,e,i){var s,a=[],r=this.data;if(r.x.hasOwnProperty(t)){for(var n=0;n<r.y.smps.length;n++)a.push([r.x[t][n],r.y.data[0][n],r.y.data[1][n]]);r.y.vars[0]==e?s=this.pivotMatrix(a,0,1,2):r.y.vars[1]==e&&(s=this.pivotMatrix(a,0,2,1))}else if(r.x.hasOwnProperty(e)){for(n=0;n<r.y.smps.length;n++)a.push([r.x[e][n],r.y.data[0][n],r.y.data[1][n]]);r.y.vars[0]==t?s=this.pivotMatrix(a,1,0,2):r.y.vars[1]==t&&(s=this.pivotMatrix(a,2,0,1))}return this.pivot(s,i)},this.pivotYY=function(t,e,i){var s;t=this.getVariableIndices(t),e=this.getVariableIndices(e);for(var a=0;a<this.data.y.vars.length;a++)if(a!=t&&a!=e){s=a;break}return this.pivot(this.pivotMatrix(this.transposeDataMatrix(this.data.y.data),t,e,s),i)},this.transposeDataSet=function(t){var e=t.x,i=t.z;e?t.z=e:delete t.z,i?t.x=i:delete t.x;var s=t.y.smps;t.y.smps=t.y.vars,t.y.vars=s;var a=t.y.data;t.y.data=[];for(var r=t.y.vars.length,n=0;n<r;n++){t.y.data[n]=[];for(var o=t.y.smps.length,h=0;h<o;h++)t.y.data[n][h]=a[h][n]}return t},this.transpose=function(t,e,i){if(!this.isTransition())if(this.removeMenus(),this.graphType.match(/Gantt/))this.flashInfoSpan(100,100,"Data transpose not allowed for Gantt graphs",5e3);else if("Bar"!=this.graphType||"lollipop"!=this.barType||i){var s=this.rebuildDataTableFilter(),a=this.data,r=this.meta.data;if(t)return this.transposeDataMatrix(t);this.ungroupSamples(!0),this.transform("reset",!1,!1,!0),a.l&&delete a.l;for(var n=["varOverlays","varOverlayInfo","varOverlayProperties","varOverlaysStrLength","varOverlaysThicknessBottom","varOverlaysThicknessTop","varDendrogramNewick","colorVarDendrogramBy","heatmapVarSeparateBy","variablesClustered","segregateVariablesBy"],o=["smpOverlays","smpOverlayInfo","smpOverlayProperties","smpOverlaysStrLength","smpOverlaysThicknessBottom","smpOverlaysThicknessTop","smpDendrogramNewick","colorSmpDendrogramBy","heatmapSmpSeparateBy","samplesClustered","segregateSamplesBy"],h=0;h<n.length;h++)if(this[n[h]]||this[o[h]]){var l=this[n[h]],c=this[o[h]];this[n[h]]=c,this[o[h]]=l}var d=a.x,p=a.z;d?a.z=d:delete a.z,p?a.x=p:delete a.x;var g=r.x,u=r.z;for(var h in r.x=u,r.z=g,r.x)r.x[h].origin="x";for(var h in r.z)r.z[h].origin="z";var m=r.y.maxSmpChr,f=r.y.maxSmpLen,y=r.y.maxSmpStr;r.y.maxSmpChr=r.y.maxVarChr,r.y.maxSmpLen=r.y.maxVarLen,r.y.maxSmpStr=r.y.maxVarStr,r.y.maxVarChr=m,r.y.maxVarLen=f,r.y.maxVarStr=y;var x=a.y.smps;a.y.smps=a.y.vars,a.y.vars=x;var v=a.y.data;a.y.data=[];for(h=0;h<a.y.vars.length;h++){a.y.data[h]=[];for(var b=0;b<a.y.smps.length;b++)a.y.data[h][b]=v[b][h]}this.initializeData(this.data),this.resetObject(),this.setOriginalIndices(!1,!1,!1,!0),this.dataTableTransposed=!this.dataTableTransposed,e||this.draw({func:"transpose",par:[t,e]}),this.rebuildDataTableFilter(s)}else this.flashInfoSpan(100,100,"Data transpose not allowed for Lollipops",5e3)},this.chordifyData=function(){for(var t={},e=[],i=[],s=[],a=[],r=0;r<this.varIndices.length;r++){var n=this.varIndices[r],o=this.data.y.vars[n];e.push(o),t[o]={};for(var h=0;h<this.smpIndices.length;h++){var l=this.smpIndices[h],c=this.data.y.smps[l];e.push(c),t[o][c]=this.data.y.data[n][l]}}var d=(e=this.unique(e)).length,p=0;for(r=0;r<d;r++){i[r]=[],a.push(this.seq(0,d-1,1));var g=0;for(h=0;h<d;h++)i[r][h]=0,t[e[r]]&&t[e[r]][e[h]]&&(i[r][h]=t[e[r]][e[h]]),g+=i[r][h];s.push(g),p+=g}for(r=0;r<a.length;r++)a[r].sort((function(t,e){return i[r][e]-i[r][t]}));this.circularArc>360?this.circularArc=360:this.circularArc<90&&(this.circularArc=90);var u=(this.circularArc*(2*Math.PI)/360-this.radians(this.arcSegmentsSeparation)*(360==this.circularArc?d:d-1))/p,m=[],f=[],y=0;for(r=0;r<d;r++){var x=y;for(h=0;h<d;h++){var v=a[r][h],b=i[r][v],A=y,w=y+=b*u;m[v*d+r]={idx:r,sid:v,start:A,end:w,value:b,color:this.colors[v%this.colors.length]}}f[r]={name:e[r],idx:r,start:x,end:y,value:s[r],color:this.colors[r%this.colors.length]},y+=this.radians(this.arcSegmentsSeparation)}var C=[];for(r=0;r<d;r++)for(h=r;h<d;h++){var T=m[h*d+r],S=m[r*d+h];(T.value||S.value)&&C.push({source:T,target:S})}return{chords:C,segments:f,total:p,unit:u}},this.summarizeSwimmer=function(){if(this.isSwimmerSumarized&&this.isGroupedData!=this.isSwimmerSumarized.grouped&&delete this.isSwimmerSumarized,!this.isSwimmerSumarized){var t=this,e={high:[],cap:[],fill:[],color:{},shape:{},smps:{},grouped:this.isGroupedData},i=this.get1DIndices(),s=this.getVariableIndices(this.swimHigh),a=this.getVariableIndices(this.swimStart),r=this.getVariableIndices(this.swimEnd);this.swimStatus||(this.swimStatus="Status"),this.swimHighCap||(this.swimHighCap="HighCap");var n=!(!this.meta.data.x||!this.meta.data.x.hasOwnProperty(this.swimStatus))&&this.meta.data.x[this.swimStatus],o=!(!this.meta.data.x||!this.meta.data.x.hasOwnProperty(this.swimHighCap))&&this.meta.data.x[this.swimHighCap];if(this.isGroupedData){this.isGroupedData=!1;for(var h=0;h<i.length;h++)for(var l=0;l<this.data.w.grps[i[h]].length;l++){var c=this.data.w.grps[i[h]][l],d=this.getDataAtPos(s,c,!1,this.xAxisTransform,this.xAxisFloorValue,this.xAxisCeilValue),p=this.getDataAtPos(a,c,!1,this.xAxisTransform,this.xAxisFloorValue,this.xAxisCeilValue),g=this.getDataAtPos(r,c,!1,this.xAxisTransform,this.xAxisFloorValue,this.xAxisCeilValue);if(e.smps[this.data.w.smps[i[h]]]=h,e.fill[h]=this.getPropertyValue(i[h],c,"colorBy"),n){var u=this.getMetadataValue(c,"x",this.swimStatus);e[u]||(e[u]=[]),e[u][h]||(e[u][h]=[]),e[u][h].push([p,g]),e.color[u]=this.darkenLightenColor(this.meta.data.x[this.swimStatus].colors[this.meta.data.x[this.swimStatus].order[u]],-50)}else e.none||(e.none=[]),e.none[h]||(e.none[h]=[]),e.none[h].push([p,g]),e.color.none="green";if(e.high.push(d),o){var m=this.getMetadataValue(c,"x",this.swimHighCap);e.cap[h]=!(!m||!m.match(/arrow/i))}}this.isGroupedData=!0}else for(h=0;h<i.length;h++){d=this.getDataAtPos(s,i[h],!1,this.xAxisTransform,this.xAxisFloorValue,this.xAxisCeilValue),p=this.getDataAtPos(a,i[h],!1,this.xAxisTransform,this.xAxisFloorValue,this.xAxisCeilValue),g=this.getDataAtPos(r,i[h],!1,this.xAxisTransform,this.xAxisFloorValue,this.xAxisCeilValue);if(e.smps[this.data.y.smps[i[h]]]=h,e.fill[h]=this.getPropertyValue(d[h],i[h],"colorBy"),n){u=this.getMetadataValue(i[h],"x",this.swimStatus);e[u]||(e[u]=[]),e[u][h]||(e[u][h]=[]),e[u][h].push([p,g]),e.color[u]=this.darkenLightenColor(this.meta.data.x[this.swimStatus].colors[this.meta.data.x[this.swimStatus].order[u]],-50)}else e.none||(e.none=[]),e.none[h]||(e.none[h]=[]),e.none[h].push([p,g]),e.color.none="green";if(e.high.push(d),o){m=this.getMetadataValue(i[h],"x",this.swimHighCap);e.cap[h]=!(!m||!m.match(/arrow/i))}}this.isSwimmerSumarized=e,this.customLegend[0]=function(){var i={title:"Response",shape:[t.shapes[0],t.shapes[1]],shapeColor:["grey","grey"],size:[!1,!1],line:[!1,!1],lineColor:[!1,!1],lineStart:[!1,!1],lineEnd:[!1,!1],text:["Response Start","Response End"]};for(var s in e.color)i.shape.push(!1),i.shapeColor.push(!1),i.size.push(!1),i.line.push("solid"),i.lineColor.push(e.color[s]),i.lineStart.push(!1),i.lineEnd.push(!1),i.text.push(s);return i.shape.push("triangle"),i.shapeColor.push("grey"),i.size.push(!1),i.line.push(!1),i.lineColor.push(!1),i.lineStart.push(!1),i.lineEnd.push(!1),i.text.push("Continued Response"),i}()}},this.summarizeOncoprint=function(){if(this.isOncoprint&&!this.isOncoprintSumarized){var t=this,e=this.data,i=this.meta.data,s={cols:[],rows:[]};!function(){i[t.oncoprintCNA].levels.length;var e={},s=function(){for(var e=0;e<i[t.oncoprintCNA].levels.length;e++)if(i[t.oncoprintCNA].levels[e].match(/ampli/i))return e;return!1}(),a=function(){for(var e=0;e<i[t.oncoprintCNA].levels.length;e++)if(i[t.oncoprintCNA].levels[e].match(/delet/i))return e;return!1}(),r=[];null!=s&&(e[i[t.oncoprintCNA].levels[s]]="rgb(255,0,0)"),null!=a&&(e[i[t.oncoprintCNA].levels[a]]="rgb(0,0,255)");for(var n=0;n<i[t.oncoprintCNA].levels.length;n++){var o=i[t.oncoprintCNA].levels[n];e.hasOwnProperty(o)?r.push(e[o]):""==o?r.push("rgb(220,220,220)"):r.push(t.colors[n])}i[t.oncoprintCNA].colors=r}(),function(){if(t.oncoprintMUT){var e=i[t.oncoprintMUT].levels.length;if(CanvasXpress.colorSchemes.Greens[e])i[t.oncoprintMUT].colors=CanvasXpress.colorSchemes.Greens[e];else if(2==e){var s=CanvasXpress.colorSchemes.Greens[3];i[t.oncoprintMUT].colors=[s[1],s[2]]}else i[t.oncoprintMUT].colors=1==e?["rgb(0,153,0)"]:CanvasXpress.colorSchemes.Greens[9]}}();for(var a=0;a<e.y.vars.length;a++){s.rows[a]={CNA:{},MUT:{},TOT:0};for(var r=0;r<i[this.oncoprintCNA].levels.length;r++){var n=i[this.oncoprintCNA].levels[r];s.rows[a].CNA[n]=0}for(r=0;r<i[this.oncoprintMUT].levels.length;r++){var o=i[this.oncoprintMUT].levels[r];s.rows[a].MUT[o]=0}}for(a=0;a<e.y.smps.length;a++){s.cols[a]={CNA:{},MUT:{},TOT:0};for(r=0;r<i[this.oncoprintCNA].levels.length;r++){n=i[this.oncoprintCNA].levels[r];s.cols[a].CNA[n]=0}for(r=0;r<i[this.oncoprintMUT].levels.length;r++){o=i[this.oncoprintMUT].levels[r];s.cols[a].MUT[o]=0}}for(a=0;a<e.y.vars.length;a++)for(r=0;r<e.y.smps.length;r++){n=this.getDataAtPos(a,r,!1,!1,!1,!1,this.oncoprintCNA),o=this.getDataAtPos(a,r,!1,!1,!1,!1,this.oncoprintMUT);n&&(s.rows[a].CNA[n]++,s.cols[r].CNA[n]++),o&&(s.rows[a].MUT[o]++,s.cols[r].MUT[o]++),(n||o)&&(s.rows[a].TOT++,s.cols[r].TOT++)}e.z||(e.z={});for(a=0;a<i[this.oncoprintCNA].levels.length;a++){n=i[this.oncoprintCNA].levels[a];e.z[n]=[];for(r=0;r<e.y.vars.length;r++)e.z[n][r]=s.rows[r].CNA[n];this.updateMetaData("z",n,!1,!0),this.varOverlayProperties[n]={type:"Stacked",position:"top",thickness:80,color:i[this.oncoprintCNA].colors[a],showName:!1,showBox:!1},this.oncoprintColSummary&&this.varOverlays.push(n)}for(a=0;a<i[this.oncoprintMUT].levels.length;a++){o=i[this.oncoprintMUT].levels[a];e.z[o]=[];for(r=0;r<e.y.vars.length;r++)e.z[o][r]=s.rows[r].MUT[o];this.updateMetaData("z",o,!1,!0),this.varOverlayProperties[o]={type:"Stacked",position:"top",thickness:80,color:i[this.oncoprintMUT].colors[a],showName:!1,showBox:!1},this.oncoprintColSummary&&this.varOverlays.push(o)}e.z["Altered-Vars"]=[],e.z["% Altered-Vars"]=[];for(a=0;a<e.y.vars.length;a++)e.z["Altered-Vars"][a]=s.rows[a].TOT,e.z["% Altered-Vars"][a]=(s.rows[a].TOT/e.y.smps.length*100).toFixed(1)+"%";this.updateMetaData("z","Altered-Vars",!1,!0),this.updateMetaData("z","% Altered-Vars",!1,!0),this.varOverlayProperties["% Altered-Vars"]={type:"Text",position:"bottom",thickness:this.overlaysThickness+2,showName:!1},e.x||(e.x={});for(a=0;a<i[this.oncoprintCNA].levels.length;a++){n=i[this.oncoprintCNA].levels[a];e.x[n]=[];for(r=0;r<e.y.smps.length;r++)e.x[n][r]=s.cols[r].CNA[n];this.updateMetaData("x",n,!1,!0),this.smpOverlayProperties[n]={type:"Stacked",position:"right",thickness:80,color:i[this.oncoprintCNA].colors[a],showName:!1,showBox:!1},this.oncoprintRowSummary&&this.smpOverlays.push(n)}for(a=0;a<i[this.oncoprintMUT].levels.length;a++){o=i[this.oncoprintMUT].levels[a];e.x[o]=[];for(r=0;r<e.y.smps.length;r++)e.x[o][r]=s.cols[r].MUT[o];this.updateMetaData("x",o,!1,!0),this.smpOverlayProperties[o]={type:"Stacked",position:"right",thickness:80,color:i[this.oncoprintMUT].colors[a],showName:!1,showBox:!1},this.oncoprintRowSummary&&this.smpOverlays.push(o)}e.x["Altered-Smps"]=[],e.x["% Altered-Smps"]=[];for(a=0;a<e.y.smps.length;a++)e.x["Altered-Smps"][a]=s.cols[a].TOT,e.x["% Altered-Smps"][a]=(s.cols[a].TOT/e.y.vars.length*100).toFixed(1)+"%";this.updateMetaData("x","Altered-Smps",!1,!0),this.updateMetaData("x","% Altered-Smps",!1,!0),this.smpOverlayProperties["% Altered-Smps"]={type:"Text",position:"left",thickness:Math.ceil(i.x["% Altered-Smps"].maxLevLen),showName:!1,rotate:!0},this.oncoprintRowSummary&&this.smpOverlays.push("% Altered-Smps"),this.isOncoprintSumarized=!0,this.sortOncoprint()}},this.getDataAtPos=function(t,e,i,s,a,r,n,o){var h=Number.NaN,l=this.isGroupedData?this.data.w:this.data.y;if(n?h=this.data.y[n][t][e]:this.isGroupedData||!this.isRawData?this.isTransformedData?i?"stdev"==i?h=l.tstdev[t][e]:l.hasOwnProperty(i)&&(h=l[i][t][e]):h=l.trans[t][e]:(i=i||this.summaryType,h=l.hasOwnProperty(i)?l[i][t]?l[i][t][e]:NaN:0):i?l[i]&&l[i][t]?h=l[i][t][e]:"sum"!=i||this.isGroupedData||(h=l.data[t][e]):(h=this.isTransformedData&&l.trans&&l.trans.length?l.trans[t][e]:l.data[t][e],o&&(h=o-h)),"percentile"!=s&&(null!=a||null!=r)){if(null!=a&&0!=a&&null!=a)if("out"==i)for(var c=0;c<h.length;c++)h[c]=Math.max(a,h[c]);else h=Math.max(a,h);if(null!=r&&0!=r&&null!=r)if("out"==i)for(c=0;c<h.length;c++)h[c]=Math.min(r,h[c]);else h=Math.min(r,h)}return s&&(isNaN(h)||("log2"==s?h=Math.log(h)/Math.LN2:"log10"==s?h=Math.log(h)/Math.LN10:"exp2"==s?h=Math.pow(2,h):"exp10"==s?h=Math.pow(10,h):"percentile"==s&&(h=this.percentile(a,r,h)))),null==h?Number.NaN:h},this.getDataForSmpAtPosition=function(t){for(var e=[],i=this.data.y.data.length,s=0;s<i;s++)e.push(this.data.y.data[s][t]);return e},this.getDataForSmpGrpAtIndex=function(t,e,i,s){var a=[];if(e||(e=this.varIndices),this.isGroupedData||!this.isRawData){var r=this.isGroupedData?this.data.w:this.data.y;if(this.isTransformedData)r.trans[0]&&r.trans[0][t]&&a.push(r.trans[0][t]);else if(i="iqr"==this.summaryType?"median":this.summaryType,r.hasOwnProperty(i)&&r[i].length)for(var n=this.isDOE&&1==this.isDOE?this.data.y.vars.length:e.length,o=0;o<n;o++){var h=e[o];a.push(r[i][h][t])}}else{var l=i?this.data.y[i]:this.data.y.data;n=this.isDOE&&1==this.isDOE?this.data.y.vars.length:e.length;if(this.isTransformedData)for(o=0;o<n;o++){h=e[o];a.push(this.data.y.trans[h][t])}else if(s)for(o=0;o<n;o++){h=e[o];a.push(this.getDataAtPos(h,t,!1,s))}else for(o=0;o<n;o++){h=e[o];a.push(l[h][t])}}return a},this.getDataForVariableAtIndex=function(t){var e=[],i=this.smpIndices.length;if(this.isTransformedData)for(var s=0;s<i;s++){var a=this.smpIndices[s];e.push(this.data.y.trans[t][a])}else for(s=0;s<i;s++){a=this.smpIndices[s];e.push(this.data.y.data[t][a])}return e},this.getMetaDataForVariableAtIndex=function(t){var e={};if(this.data.z)for(var i in this.data.z)e[i]=this.getMetadataValue(t,"z",i);return e[name]=this.data.y.vars[t],e},this.getMetaDataForSampleAtIndex=function(t){return this.isGroupedData?this.getMetaDataForGrpAtIndex(t):this.getMetaDataForSmpAtIndex(t)},this.getMetaDataForSmpAtIndex=function(t){var e={};if(this.data.x)for(var s in this.data.x)e[s]=this.getMetadataValue(t,"x",s);else i=Math.min(Math.max(Math.floor(v*(m.vals.length+1)/m.vals[n])-1,0),n);return e.name=this.data.y.vars[t],e},this.getMetaDataForGrpAtIndex=function(t){for(var e=[],i=this.data.w.grps[t].length,s=0;s<i;s++){var a=this.data.w.grps[t][s];e.push(this.getMetaDataForSmpAtIndex[a])}return e},this.setOriginalIndices=function(t,e,i,s){var a=this.layoutComb&&this.layoutParams?this.layoutParams[t||0]:this;e||(e=a.varIndices),i||(i=this.isGroupedData?a.grpIndices:a.smpIndices),!s&&a.startingVarIndices&&0!=a.startingVarIndices.length||(a.startingVarIndices=this.cloneObject(e)),this.isGroupedData?!s&&a.startingGrpIndices&&0!=a.startingGrpIndices.length||(a.startingGrpIndices=this.cloneObject(i)):!s&&a.startingSmpIndices&&0!=a.startingSmpIndices.length||(a.startingSmpIndices=this.cloneObject(i))},this.getMeterSummaryValue=function(){var t;t=this.layoutValid&&this.segregateVariablesBy.length&&this.segregateSamplesBy.length?this.data.l.comp[this.layoutCurrent||0][0][0]:this.layoutValid&&this.segregateVariablesBy.length&&!this.segregateSamplesBy.length?this.layoutCurrent||0:this.layoutValid&&this.segregateSamplesBy.length?this.meterVar?this.getVariableIndices(this.meterVar):0:this.layoutValid?this.layoutCurrent||0:this.meterVar?this.getVariableIndices(this.meterVar):0,this.meterIndex=t>=0?t:0;var e=this.data.y.data[this.meterIndex];if(!e||!e.length)return 0;switch(this.summaryType){case"raw":case"mean":return Number(this.mean(e,!0)).toFixed(this.xAxisDecs);case"min":return this.min(e,!0);case"max":return this.max(e,!0);case"sum":return this.sum(e,!0);case"count":return this.cleanArray(e,!0).length}},this.getMeterVariable=function(){var t;return t=this.layoutValid&&this.segregateVariablesBy.length&&this.segregateSamplesBy.length?this.data.l.comp[this.layoutCurrent||0][0][0]:this.layoutValid&&this.segregateVariablesBy.length&&!this.segregateSamplesBy.length?this.layoutCurrent||0:this.layoutValid&&this.segregateSamplesBy.length?this.meterVar?this.getVariableIndices(this.meterVar):0:this.layoutValid?this.layoutCurrent||0:this.meterVar?this.getVariableIndices(this.meterVar):0,this.meterIndex=t>=0?t:0,this.data.y.vars[this.meterIndex]},this.validateNetworkPropertyValues=function(t){for(var e=["colorNodeBy","shapeNodeBy","sizeNodeBy","patternNodeBy"],i=["colorEdgeBy","SizeEdgeBy"],s=this.meta.data,a=0;a<e.length;a++){var r=this[e[a]];s.nodes.hasOwnProperty(r)||(this[e[a]]=!1)}for(a=0;a<i.length;a++){r=this[i[a]];s.edges.hasOwnProperty(r)||(this[i[a]]=!1)}if(this.decorations){var n=[];for(a=0;a<this.decorations.length;a++){var o=this.decorations[a];s.nodes.hasOwnProperty(o)&&n.push(o)}this.decorations=n}t&&this.setLegends()},this.validatePropertyValues=function(t){for(var e=["color","shape","size","line","pattern","outline","connect","motion","ellipse","ridge","stack"],i="",s=0;s<e.length;s++){var a=this[e[s]+"By"];this.isArray(a)&&(a=a[0]);var r=this[a+"Data"];if(a)if(this.isMultidimensionalData)r&&!this.data.y[r]&&(this[e[s]+"By"]=!1,this[a+"Data"]=!1);else{if("variable"==a)continue;if("data"==a&&this.ridgeBy)continue;if(this.data.x&&this.data.x.hasOwnProperty(a))continue;if(this.data.z&&this.data.z.hasOwnProperty(a)){e[s].match(/ellipse|ridge/)&&"Numeric"==this.meta.data.z[a].type&&(this[e[s]+"By"]=!1);continue}if(this.dataStndBy&&this.dataStndBy.x&&this.dataStndBy.x.hasOwnProperty(a))continue;if(this.dataStndBy&&this.dataStndBy.z&&this.dataStndBy.z.hasOwnProperty(a))continue;if(-1!=this.getSampleIndices(a)||-1!=this.getSampleIndices(a,!0))continue;this[e[s]+"By"]=!1}}if(this.treemapBy.length>0){var n=[],o=[];for(s=0;s<this.treemapBy.length;s++)"sample"==this.treemapBy[s]?o.push("sample"):this.data.x&&this.data.x.hasOwnProperty(this.treemapBy[s])?this.data.x&&this.data.x.hasOwnProperty(this.treemapBy[s])&&n.push(this.treemapBy[s]):o.push("sample");o.length,this.treemapBy=n}var h=this.graphType.match(/Boxplot|Dotplot|Gantt|Scatter|Map/)||"Tree"==this.graphType;!this.shapeBy||this.isMultidimensionalData||h?this.shapeBy&&this.groupingFactors.length>1&&!h?(i+="shapeBy changed to variable (multiple grouping factors not allowed)\n",this.shapeBy="variable"):this.shapeBy&&1==this.groupingFactors.length&&this.shapeBy!=this.groupingFactors[0]&&!h&&(i+="shapeBy changed to variable (grouping factor should the same as shapeBy)\n",this.shapeBy="variable"):(i+="shapeBy changed to false (shapeBy not support in"+this.graphType+")\n",this.shapeBy=!1),!this.sizeBy||this.isMultidimensionalData||h?this.sizeBy&&this.groupingFactors.length>1&&!h?(i+="sizeBy changed to variable (multiple grouping factors not allowed)\n",this.sizeBy="variable"):this.sizeBy&&1==this.groupingFactors.length&&this.sizeBy!=this.groupingFactors[0]&&!h&&(i+="sizeBy changed to variable (grouping factor should the same as sizeBy)\n",this.sizeBy="variable"):(i+="sizeBy changed to false (sizeBy not support in"+this.graphType+")\n",this.sizeBy=!1),this.colorBy&&"Heatmap"==this.graphType&&!this.isMultidimensionalData?(i+="colorBy changed to false (colorBy not support in"+this.graphType+")\n",this.colorBy=!1):this.colorBy&&this.groupingFactors.length>1&&!this.graphType.match(/Boxplot|Dotplot|Gantt|Scatter|Stacked|Treemap/)?(i+="colorBy changed to variable (multiple grouping factors not allowed)\n",this.colorBy="variable"):this.colorBy&&1==this.groupingFactors.length&&this.colorBy!=this.groupingFactors[0]&&!this.graphType.match(/Boxplot|Dotplot|Gantt|Scatter|Stacked|Treemap|Line/)&&"swimmer"!=this.barType&&(i+="colorBy changed to variable (grouping factor should the same as colorBy)\n",this.colorBy="variable"),!(this.shapeBy||this.sizeBy||this.patternBy||this.outlineBy)||this.colorBy||this.isMultidimensionalData||"Heatmap"!=!this.graphType?this.shapeBy||this.sizeBy||this.patternBy||"variable"!=this.colorBy||(this.colorBy=!1):this.colorBy="variable","variable"!=this.shapeBy||this.colorBy||this.graphType.match(/Scatter/)||(this.colorBy="variable"),"variable"!=this.sizeBy||this.colorBy||this.graphType.match(/Scatter/)||(this.colorBy="variable"),"variable"!=this.patternBy||this.colorBy||this.graphType.match(/Scatter/)||(this.colorBy="variable"),this.stackBy&&!this.colorBy?this.colorBy=this.stackBy:this.stackBy&&this.colorBy&&this.stackBy!=this.colorBy&&(i+="colorBy changed to stackBy (remove stackBy to color by different factor)\n",this.colorBy=this.stackBy),this.dodgeBy&&!this.colorBy?this.colorBy=this.dodgeBy:this.dodgeBy&&this.colorBy&&this.dodgeBy!=this.colorBy&&(i+="colorBy changed to dodgeBy (remove dodgeBy to color by different factor)\n",this.colorBy=this.dodgeBy),this.lineBy&&!this.colorBy&&this.isGroupedData||(this.lineBy&&this.colorBy&&this.lineBy!=this.colorBy&&this.isGroupedData?(i+="colorBy changed to lineBy (remove lineBy to color by different factor)\n",this.colorBy=this.lineBy):this.lineBy&&!this.isGroupedData&&"Scatter2D"!=this.graphType&&(i+="Data needs to be grouped",this.lineBy=!1)),""!=i&&this.flashInfoSpan(10,10,i,3e3),t&&this.setLegends()},this.getMetaDataByType=function(t,e){var i=[];if(this.meta.data[t])for(var s in this.meta.data[t])e&&this.meta.data[t][s].type==e?i.push(s):e||i.push(s);return i},this.getPropertyValueBin=function(t,e,i,s,a){var r,n=t.vals.length-1;if("shapes"==s[a]&&!this.shapeByContinuous||"sizes"==s[a]&&!this.sizeeByContinuous){for(var o=0;o<t.vals.length;o++)if(e<=t.vals[o]){r=o;break}}else r=Math.min(Math.max(Math.floor(e*(t.vals.length+1)/t.vals[n])-1,0),n);return i?r:parseInt(this[s[a]][r%this[s[a]].length])},this.getPropertyValueSize=function(t,e,i){var s=t.vals?t.vals.length-1:t.values.length-1;return parseFloat((e-t.min)/(t.max-t.min)*(this[i][s]-this[i][0]))+parseInt(this[i][0])},this.getMetadataValue=function(t,e,i,s){return this.isGroupedData&&!s&&"z"!=e?this.data.w&&this.data.w.factors.hasOwnProperty(i)?this.data.w.factors[i][t]:"NoCatFound":"x"==e&&this.data.x&&this.data.x.hasOwnProperty(i)?(this.meta.data.x[i].type,this.data.x[i][t]):"z"==e&&this.data.z&&this.data.z.hasOwnProperty(i)?(this.meta.data.z[i].type,this.data.z[i][t]):void 0},this.getNodeEdgePropertyValue=function(t,e,i){var s=t?this.meta.data.nodes:this.meta.data.edges,a=this[i],r={colorNodeBy:"colors",colorEdgeBy:"colors",shapeNodeBy:"shapes",sizeNodeBy:"sizes",sizeEdgeBy:"sizes",patternNodeBy:"patterns"};if(t)if(a&&s.hasOwnProperty(a)&&t.hasOwnProperty(a)&&null!=t[a])if("Numeric"==s[a].type&&"shapeNodeBy"!=i)switch(i){case"colorNodeBy":return null!=t[a]&&this.getColorForValue(s[a].colorBrew,Number(t[a]));case"shapeNodeBy":return 10==(o=parseInt(this.percentile(s[a].min,s[a].max,Number(t[a]))/10))?"circle":"pie"+o;case"sizeNodeBy":var n=s[a].max-s[a].min<=10?100:s[a].max-s[a].min<=100?50:20,o=parseInt(this.percentile(s[a].min,s[a].max,Number(t[a])))/n;return Math.pow(.5+o,2);case"patternNodeBy":return"closed"}else{if(r[i]){o=s[a].order[t[a]];return s[a][r[i]][o]}alert("Ooops")}else{if(i=i.replace("NodeBy",""),t.hasOwnProperty(i))return t[i];switch(i){case"color":return this.missingDataColor;case"shape":return"circle";case"size":return 1;case"pattern":return"closed"}}else if(a&&s.hasOwnProperty(a)&&e.hasOwnProperty(a))if("colorEdgeBy"==i){if("Numeric"==s[a].type)return this.getColorForValue(s[a].colorBrew,Number(e[a]));if(r[i]){o=s[a].order[e[a]];return s[a][r[i]][o]}alert("Ooops")}else if(i="sizeEdgeBy"){if("Numeric"==s[a].type){o=parseInt(this.percentile(s[a].min,s[a].max,Number(e[a]||s[a].min)))/100*4;return.5+(isNaN(o)?.5:o)}if(r[i]){o=s[a].order[e[a]];return s[a][r[i]][o]}alert("Ooops")}else alert("Ooops. Not implemented yet!");else{if("colorEdgeBy"==i)return e.color||this.foreground;if(i="sizeEdgeBy")return e.thickness||this.edgeThickness;alert("Ooops. Not implemented yet!")}},this.getPropertyValue=function(t,e,i){var s,a,r,n,o=this,h=this[i],l=this.ungroupGroupedData(),c=this.groupingFactors&&1==this.groupingFactors.length,d=this.data,p=this.meta.data,g={colorVarDendrogramBy:"colors",colorSmpDendrogramBy:"colors",colorBy:"colors",outlineBy:"colors",outlineByData:"colors",markerBy:"colors",shapeBy:"shapes",shapeByData:"shapes",sizeBy:"sizes",sizeByData:"sizes",patternBy:"patterns",patternByData:"patterns",stackBy:"colors",dodgeBy:"colors",lineBy:"colors"},u=function(){return o.patternBy?o[g[i]][0]:t>o.colors.length-1&&!o.colorBy?o[g[i]][Math.floor(t/o.colors.length)]:o[g[i]][0]},m=!!i&&this[g[i]].length;if(null!=t&&null!=e&&h&&d.y.hasOwnProperty(h))s=d.y[h][t][e],r=(a=p[h]).type;else if(null!=e&&h&&d.x&&d.x.hasOwnProperty(h)){if(a=p.x[h],!l&&this.isGroupedData)return c&&(this.groupingFactors[0]==h||function(){var t={},i=0;if(e>=0&&d.w.grps[e])for(var s=0;s<d.w.grps[e].length;s++){p.x[h].type;var a=d.x[h][d.w.grps[e][s]];if(t.hasOwnProperty(a)||(t[a]=!0,i++),i>1)return!1}return!0}())?(r=a.type,(s=!1!==e&&e>=0&&d.x[h][d.w.grps[e][0]])&&i.match(/color|patternBy/)?a[i]&&a[i].hasOwnProperty(s)?a[i][s]:a[g[i]]?a[g[i]][a.order[s]%m]:this[g[i]][a.order[s]%m]:a[g[i]]?a[g[i]][0]:i.match(/color/)?this[g[i]][0]:"patternBy"==i?u():this[g[i]][0]):null!=t&&i.match(/color/)?this[g[i]][t%m]:"patternBy"==i?u():this[g[i]][0];if(r=a.type,s="Gantt"==this.graphType?d.x[h][e]:this.isGroupedData?d.w.smps[e]:d.x[h][e],a[i]&&a[i].hasOwnProperty(s))return a[i][s];if("colorSmpDendrogramBy"==i&&a.colorBy&&a.colorBy.hasOwnProperty(s))return a.colorBy[s]}else if(null!=t&&h&&d.z&&d.z.hasOwnProperty(h)){if(r=(a=p.z[h]).type,s=d.z[h][t],a[i]&&a[i].hasOwnProperty(s))return a[i][s];if("colorVarDendrogramBy"==i&&a.colorBy&&a.colorBy.hasOwnProperty(s))return a.colorBy[s]}else if(null!=t&&null!=e&&i&&(this.isGroupedData&&p.w.smps.hasOwnProperty(i)||!this.isGroupedData&&p.y.range.hasOwnProperty(i)))s=d.y.data[t][e],a=p.y.range[i],r=p.y.type;else{if(null==t||this.isGroupedData||!p.y.range.hasOwnProperty(h))return null!=t?h||!h&&i.match(/color/)?this[g[i]][t%m]:"patternBy"==i?u():this[g[i]][0]:this[g[i]][0];if(r=(a=p.y.range[h]).type,n=null==e&&this.getSampleIndices(h),s=null!=e?d.y.data[t][e]:d.y.data[t]?d.y.data[t][n>=0?n:0]:0,p.modified&&p.modified.z&&p.modified.z[h])return this[g[i]][s%m];a.colorBrew||(a.colorBrew=this.getColorBrew(!1,a.min,a.max),a.vals=a.colorBrew.vals)}if("Numeric"==r){if(i.match(/color|outlineBy/))return isNaN(s)||null===s?this.missingDataColor:this.getColorForValue(a.colorBrew,Number(s));if(i.match(/shapeBy/))return isNaN(s)?"sphere":this.shapeByContinuous?"pie"+this.getPropertyValueBin(a,s,!0,g,i):this[g[i]][this.getPropertyValueBin(a,s,!0,g,i)];if(i.match(/sizeBy/))return isNaN(s)?this[g[i]][0]:this.sizeByContinuous?this.getPropertyValueSize(a,s,g[i]):this.getPropertyValueBin(a,s,!1,g,i);if(i.match(/patternBy/))return isNaN(s)?"closed":this.getPropertyValueBin(a,s,!1,g,i)}else if("String"==r)return a[g[i]]?"sizeBy"==i?parseInt(a[g[i]][a.order[s]%a[g[i]].length]):a[g[i]][a.order[s]%a[g[i]].length]:"sizeBy"==i?parseInt(this[g[i]][a.order[s]%this[g[i]].length]):this[g[i]][a.order[s]%this[g[i]].length]},this.resetMetaData=function(t){delete this.meta.data,this.initializeDataAttributes(!1,!1,!1,!0,t)},this.getMetadata=function(t,e){var i=this.meta.data;if(e){var s="x"==t?"z":"x";return t&&i[t]&&i[t].hasOwnProperty(e)?i[t][e]:i[s]&&i[s].hasOwnProperty(e)?i[s][e]:i.x&&i.x.hasOwnProperty(e)?i.x[e]:!(!i.z||!i.z.hasOwnProperty(e))&&i.z[e]}return t?"x"==t?i.x:"z"==t?i.z:!!i[t]&&i[t]:i},this.updateGenomeMetaData=function(t){t&&(this.meta.data={tracks:[]});for(var e=0;e<this.data.tracks.length;e++){var i=this.data.tracks[e],s={};if("dataframe"==i.type)for(var a in i.dataframe){var r=i.dataframe[a];if(this.isNumeric(r)){for(var n=this.range(r),o=this[this.axisAlgorithm](n[0],n[1],5,this.axisWilkinsonLoose),h=[],l=0;l<o.length;l++)h.push(o[l].toString());var c=this.getMaxText(h),d=this.measureText(c,this.axisTickFont),p=Math.min(n[0],o[0]),g=Math.max(n[1],o[o.length-1]),u=(i.height||this.featureTypeDefault)/(1.05*(g-p)),m=this.getColorBrew(i.colorSpectrum||this.colorSpectrum,p,g,i.colorSpectrumZeroValue||this.colorSpectrumZeroValue,i.colorSpectrumBreaks||this.colorSpectrumBreaks,!0);s[a]={type:"Numeric",range:n,values:o,valuesStr:h,maxValueStrLen:d,min:p,max:g,units:u,brew:m}}else{var f={};for(l=0;l<r.length;l++)f[r[l]]=!0;var y=this.sortObject(f),x={},v=0,b=0,A="";for(l=0;l<y.length;l++){x[y[l]]=l;var w=this.measureText(y[l],this.axisTickFont);w>v&&(v=w,b=y[l].length,A=y[l])}var C=[];for(l=0;l<y.length;l++)i.meta&&i.meta.hasOwnProperty(a)&&i.meta[a].hasOwnProperty("color")&&i.meta[a].color.hasOwnProperty(y[l])?C.push(i.meta[a].color[y[l]]):C.push(this.colors[l%this.colors.length]);var T=[];for(l=0;l<y.length;l++)i.meta&&i.meta.hasOwnProperty(a)&&i.meta[a].hasOwnProperty("shape")&&i.meta[a].shape.hasOwnProperty(y[l])?T.push(i.meta[a].shape[y[l]]):T.push(this.shapes[l%this.shapes.length]);s[a]={type:"String",levels:y,order:x,maxLevLen:v,maxLevChr:b,maxLevStr:A,colors:C,shapes:T,sizes:this.getBestSizes(y.length)}}}else if(i.type.match(/bar|heatmap/)){r=i.data;for(var S=[],M=0;M<r.length;M++)for(l=0;l<r[M].data.length;l++)S.push(r[M].data[l]);for(n=this.range(S),o=this[this.axisAlgorithm](n[0],n[1],5,this.axisWilkinsonLoose),h=[],M=0;M<o.length;M++)h.push(o[M].toString());c=this.getMaxText(h);s={range:n,values:o,valuesStr:h,maxValueStrLen:d=this.measureText(c,this.axisTickFont),min:p=Math.min(n[0],o[0]),max:g=Math.max(n[1],o[o.length-1]),units:u=(i.height||this.featureTypeDefault)/(1.05*(g-p)),brew:m=this.getColorBrew(i.colorSpectrum||this.colorSpectrum,p,g,i.colorSpectrumZeroValue||this.colorSpectrumZeroValue,i.colorSpectrumBreaks||this.colorSpectrumBreaks,!0)}}this.meta.data.tracks.push(s)}},this.updateNetworkMetaData=function(t,e,i){var s=this,a=this.meta.data,r=this.data,n=["nodes","edges"],o=this.nodeFont,h={x:!0,y:!0,z:!0,width:!0,height:!0,eventless:!0,color:!0,hideLabel:!0,imagePath:!0,size:!0,shape:!0,endArrow:!0,startArrow:!0,elbows:!0},l=function(t){for(var e={},i=0;i<s.data[t].length;i++){var a=s.data[t][i];for(var r in a)if(!h.hasOwnProperty(r)){var n=null!==a[r]&&a[r];if("object"!=typeof n)e.hasOwnProperty(r)?(e[r].o.hasOwnProperty(n)||(e[r].o[n]=!0),isNaN(n)&&(e[r].t="String")):(e[r]={o:{},t:isNaN(n)?"String":"Numeric"},e[r].o[n]=!0);else for(var o in e.hasOwnProperty(r)||(e[r]={o:{}}),e[r].t="Object",n)e[r].o[o]=!0}}return function(t){for(var e in t)if("Numeric"==t[e].t){var i=s.getKeys(t[e].o);(2==i.length&&t[e].o.hasOwnProperty("true")&&t[e].o.hasOwnProperty("false")||1==i.length&&(t[e].o.hasOwnProperty("true")||t[e].o.hasOwnProperty("false"))||1==i.length&&t[e].o.hasOwnProperty(""))&&(t[e].t="String")}return t}(e)};if(!t||"nodes"==t||"edges"==t){t&&i&&a[t][e]&&delete a[t][e];for(var c=0;c<n.length;c++){var d=n[c];if((!t||t==d)&&r[d]){var p=l(d);for(var g in p)if(!e||e==g){a[d][g]={},a[d][g].len=this.measureText(g,o);a[d][g].len,g.length;a[d][g].type=p[g].t;var u=0,m=0,f="";if("String"==a[d][g].type||"Object"==a[d][g].type){var y=this.sortObject(p[g].o);a[d][g].unique=this.isUnique(y),a[d][g].levels=y,a[d][g].order={};for(var x=0;x<y.length;x++){a[d][g].order[y[x]]=x,(M=this.measureText(y[x],o))>u&&(u=M,m=y[x].length,f=y[x])}a[d][g].maxLevLen=u,a[d][g].maxLevChr=m,a[d][g].maxLevStr=f,a[d][g].colors=[];var v=0;for(x=0;x<y.length;x++)a[d][g].colors.push(this.colors[v%this.colors.length]),v++;a[d][g].shapes=[];for(v=0,x=0;x<y.length;x++)a[d][g].shapes.push(this.shapes[v%this.shapes.length]),v++;a[d][g].sizes=this.getBestSizes(y.length,"edges"==d),a[d][g].patterns=[];for(v=0,x=0;x<y.length;x++)a[d][g].patterns.push(this.patterns[v%this.patterns.length]),v++}else{a[d][g].unique=!1;y=this.sortObject(p[g].o);var b=this.range(y);a[d][g].rmin=b[0],a[d][g].rmax=b[1],a[d][g].n=y.length;var A=this.colorSpectrum;a[d][g].colorBrew=this.getColorBrew(A,b[0],b[1],this.colorSpectrumZeroValue,this.colorSpectrumBreaks),a[d][g].min=a[d][g].colorBrew.min,a[d][g].max=a[d][g].colorBrew.max,a[d][g].zero=a[d][g].colorBrew.zero,a[d][g].vals=a[d][g].colorBrew.vals,a[d][g].incr=a[d][g].colorBrew.incr,a[d][g].decs=a[d][g].colorBrew.decs,a[d][g].levels=a[d][g].colorBrew.vals,a[d][g].order={};for(x=0;x<a[d][g].levels.length;x++){a[d][g].order[a[d][g].levels[x]]=x,(M=this.measureText(a[d][g].levels[x],o))>u&&(u=M,m=a[d][g].levels[x].toString().length,f=a[d][g].levels[x]),a[d][g].maxLevLen=u,a[d][g].maxLevChr=m,a[d][g].maxLevStr=f}a[d][g].shapes=this.shapes,a[d][g].sizes=this.sizes,a[d][g].patterns=this.patterns}}}}}if(this.decorations.length&&"heatmap"==this.decorationsType){var w=[];a.decorations={},a.decorations.unique=!1,a.decorations.type="Numeric",a.decorations.n=0;for(x=0;x<this.decorations.length;x++){g=this.decorations[x];if(a.nodes[g]&&"Numeric"==a.nodes[g].type)a.decorations.n+=a.nodes[g].n,w.push(a.nodes[g].rmin),w.push(a.nodes[g].rmax);else if(a.nodes[g]&&"Object"==a.nodes[g].type)for(var C=0;C<a.nodes[g].levels.length;C++)for(var T=a.nodes[g].levels[C],S=0;S<r.nodes.length;S++)r.nodes[S][g]&&r.nodes[S][g].hasOwnProperty(T)&&r.nodes[S][g][T]&&!isNaN(r.nodes[S][g][T])&&(a.decorations.n++,w.push(r.nodes[S][g][T]))}if(w.length){A=this.colorSpectrum,b=this.range(w);a.decorations.rmin=b[0],a.decorations.rmax=b[1],a.decorations.colorBrew=this.getColorBrew(A,b[0],b[1],this.colorSpectrumZeroValue,this.colorSpectrumBreaks),a.decorations.min=a.decorations.colorBrew.min,a.decorations.max=a.decorations.colorBrew.max,a.decorations.zero=a.decorations.colorBrew.zero,a.decorations.vals=a.decorations.colorBrew.vals,a.decorations.incr=a.decorations.colorBrew.incr,a.decorations.decs=a.decorations.colorBrew.decs,a.decorations.levels=a.decorations.colorBrew.vals,a.decorations.order={};for(x=0;x<a.decorations.levels.length;x++){var M;a.decorations.order[a.decorations.levels[x]]=x,(M=this.measureText(a.decorations.levels[x],o))>u&&(u=M,m=a.decorations.levels[x].toString().length,f=a.decorations.levels[x]),a.decorations.maxLevLen=u,a.decorations.maxLevChr=m,a.decorations.maxLevStr=f}}}},this.updateMetaDataColors=function(t,e){var i=this.meta.data,s=this.data,a="Network"==this.graphType?["nodes","edges"]:["x","z"];if(t&&e)e.colors=t,e.connects=t;else for(var r=0;r<a.length;r++){var n=a[r];if(s[n]||this.isCreateHistogram){if("Network"==this.graphType)return void(this.decorationsTextColors=[]);var o=s[n]||i[n];for(var h in o)if("String"==i[n][h].type){var l={};if(s[n])for(var c=0;c<o[h].length;c++)l[o[h][c]]=!0;else for(c=0;c<o[h].levels.length;c++)l[o[h].levels[c]]=!0;var d=(l=this.stringRangeSort(this.getKeys(l))).length;if(!this.colorKey&&"Map"!=this.graphType){i[n][h].colors=[];var p=0;if(d!=t.length&&this.colorScheme){var g=this.getCustomColorScheme(d,this.colorScheme);for(c=0;c<l.length;c++)i[n][h].colors.push(g[p%g.length]),p++}else for(c=0;c<l.length;c++)i[n][h].colors.push(t[p%t.length]),p++}}}}},this.updateMetaData=function(t,e,i,s,a,r){var n=this,o=this.meta.data,h=a&&this.dataStndBy?this.dataStndBy:this.data,l=["x","z","w"],c=this.font,d=function(t,e,i,s,a){var r={};if(n.legendOrder&&n.legendOrder[t]){for(var o=0;o<n.legendOrder[t].length;o++)r[n.legendOrder[t][o]]=o;var h=n.legendOrder[t].length;if(e)for(var o in e)r.hasOwnProperty(o)||(r[o]=h++);else for(o=0;o<i.length;o++)r.hasOwnProperty(i[o])||(r[o]=h++);return r}if(s){for(var o in i=[],e)r[o]=new Date(n.dateFormat(o)).getTime(),i.push(o);i=i.sort((function(t,e){return r[t]-r[e]}));var l={};for(h=0,o=0;o<i.length;o++)l.hasOwnProperty(i[o])||(l[i[o]]=h++);return l}if(a){i=(i=n.getKeys(e)).sort((function(t,e){return parseInt(CanvasXpress.dates[t])-parseInt(CanvasXpress.dates[e])}));for(l={},o=0;o<i.length;o++)l[i[o]]=o;return l}i=n.getKeys(e);for(o=0;o<i.length;o++)if(!i[o].match("\0"))return!1;i=i.sort((function(t,e){return Number(t.replace("\0",""))-Number(e.replace("\0",""))}));for(l={},o=0;o<i.length;o++)l[i[o]]=o;return l},p=function(t,e){if(n[t+"Key"]&&n[t+"Key"][b]){if(n.isObject(n[t+"Key"][b])){o[v][b][t+"By"]=n[t+"Key"][b];for(var i=0;i<z.length;i++)if(o[v][b][t+"By"].hasOwnProperty(z[i]))"color"==t&&(o[v][b][t+"By"][z[i]]=n.validateColor(o[v][b][t+"By"][z[i]]));else{var s=Number(z[i].replace("\0",""));o[v][b][t+"By"].hasOwnProperty(s)?o[v][b][t+"By"][z[i]]=o[v][b][t+"By"][s]:o[v][b][t+"By"][z[i]]=e[i%e.length]}o[v][b][t+"s"]=[];for(i=0;i<z.length;i++)o[v][b][t+"s"][i]=o[v][b][t+"By"][z[i]]}else if(n.isArray(n[t+"Key"][b]))o[v][b][t+"s"]=n[t+"Key"][b];else if("color"==t){var a=z.length;if(CanvasXpress.colorSchemes[n[t+"Key"][b]][a])o[v][b][t+"s"]=CanvasXpress.colorSchemes[n[t+"Key"][b]][a];else{if((h=n.getKeys(CanvasXpress.colorSchemes[n[t+"Key"][b]])).sort((function(t,e){return t-e})),a>h[h.length-1])for(a--;!CanvasXpress.colorSchemes[n[t+"Key"][b]][a];)a--;else if(a<h[h.length-1])for(a++;!CanvasXpress.colorSchemes[n[t+"Key"][b]][a];)a++;o[v][b][t+"s"]=CanvasXpress.colorSchemes[n[t+"Key"][b]][a]}for(i=0;i<a;i++)o[v][b][t+"s"][i]=n.validateColor(CanvasXpress.colorSchemes[n[t+"Key"][b]][a][i])}}else{o[v][b][t+"s"]=[];var r=0;if("color"==t&&z.length>e.length&&1==e.length&&"Map"==n.graphType){var h;a=z.length;if((h=n.getKeys(CanvasXpress.colorSchemes[n.colorScheme])).sort((function(t,e){return t-e})),a>h[h.length-1])for(a--;!CanvasXpress.colorSchemes[n.colorScheme][a];)a--;else if(a<h[h.length-1])for(a++;!CanvasXpress.colorSchemes[n.colorScheme][a];)a++;for(i=0;i<a;i++)o[v][b][t+"s"][i]=n.validateColor(CanvasXpress.colorSchemes[n.colorScheme][a][i])}else for(i=0;i<e.length;i++)"color"==t?o[v][b][t+"s"].push(n.validateColor(e[r%e.length])):o[v][b][t+"s"].push(e[r%e.length]),r++}},g=function(t,e){var i=n.colorSpectrum;if(n[t+"Key"]&&n[t+"Key"][b])if(n.isObject(n[t+"Key"][b])){o[v][b][t+"By"]=n[t+"Key"][b];for(var s=0;s<h[v][b].length;s++)o[v][b][t+"By"].hasOwnProperty(h[v][b][s].toString())||(o[v][b][t+"By"][h[v][b][s].toString()]=n[t+"s"][s%n[t+"s"].length]);o[v][b].orderS=d(b,!1,h[v][b])}else if("color"==t)if(n.isArray(n[t+"Key"][b]))i=n[t+"Key"][b];else{var a=n.getKeys(CanvasXpress.colorSchemes[n[t+"Key"][b]]);a.sort((function(t,e){return t-e})),i=CanvasXpress.colorSchemes[n[t+"Key"][b]].hasOwnProperty(8)?CanvasXpress.colorSchemes[n[t+"Key"][b]][8]:CanvasXpress.colorSchemes[n[t+"Key"][b]][a[0]]}if("color"==t){o[v][b].colorBrew=n.getColorBrew(i,N[0],N[1],n.colorSpectrumZeroValue,n.colorSpectrumBreaks,!0);var r=["min","max","zero","vals","incr","decs"];for(s=0;s<r.length;s++){var l=r[s];o[v][b][l]=o[v][b].colorBrew[l]}o[v][b].levels=o[v][b].colorBrew.vals,o[v][b].order={};for(s=0;s<o[v][b].levels.length;s++){o[v][b].order[o[v][b].levels[s]]=s;var p=n.measureText(o[v][b].levels[s],c);p>M&&(M=p,D=o[v][b].levels[s].toString().length,k=o[v][b].levels[s]),o[v][b].maxLevLen=M,o[v][b].maxLevChr=D,o[v][b].maxLevStr=k}}else o[v][b][t+"s"]="connect"==t?n.colors:n[t+"s"]};if(t&&"w"!=t&&"x"!=t&&"z"!=t)if(h.y[t]){o[t]={};M=0,D=0,k="";if(this.isNumeric2DArray(h.y[t])){for(A=0;A<h.y[t].length;A++)for(b=0;b<h.y[t][A].length;b++)null!=h.y[t][A][b]?h.y[t][A][b]=Number(h.y[t][A][b]):h.y[t][A][b]=Number.NaN;N=this.setRangeDataObject(h.y[t]);o[t].rmin=N[0],o[t].rmax=N[1],o[t].n=h.y[t].length*h.y[t][0].length,o[t].type="Numeric",o[t].colorBrew=this.getColorBrew(this.colorSpectrum,N[0],N[1],this.colorSpectrumZeroValue,this.colorSpectrumBreaks);var u=["min","max","zero","vals","incr","decs"];for(A=0;A<u.length;A++){var m=u[A];o[t][m]=o[t].colorBrew[m]}o[t].levels=o[t].colorBrew.vals,o[t].order={};for(A=0;A<o[t].levels.length;A++){o[t].order[o[t].levels[A]]=A,(X=this.measureText(o[t].levels[A],c))>M&&(M=X,D=o[t].levels[A].toString().length,k=o[t].levels[A]),o[t].maxLevLen=M,o[t].maxLevChr=D,o[t].maxLevStr=k}o[t].shapes=this.shapes,o[t].sizes=this.sizes,o[t].patterns=this.patterns}else{for(z={},A=0;A<h.y[t].length;A++)for(b=0;b<h.y[t][A].length;b++)null!=h.y[t][A][b]?z[h.y[t][A][b]]=!0:h.y[t][A][b]="";z=this.stringRangeSort(this.getKeys(z)),o[t].levels=z,o[t].order={};for(A=0;A<z.length;A++){o[t].order[z[A]]=A,(X=this.measureText(z[A],c))>M&&(M=X,D=z[A].length,k=z[A])}o[t].maxLevLen=M,o[t].maxLevChr=D,o[t].maxLevStr=k,o[t].type="String",o[t].colors=[];var f=0;for(A=0;A<z.length;A++)o[t].colors.push(this.colors[f%this.colors.length]),f++;o[t].shapes=[];for(f=0,A=0;A<z.length;A++)o[t].shapes.push(this.shapes[f%this.shapes.length]),f++;var y=this.getBestSizes(z.length);o[t].sizes=[];for(f=0,A=0;A<z.length;A++)o[t].sizes.push(y[f%y.length]),f++;o[t].patterns=[];for(f=0,A=0;A<z.length;A++)o[t].patterns.push(this.patterns[f%this.patterns.length]),f++}}else alert("Error while setting metadata. This may not work!");else{t&&i&&(e?o[t][e]&&delete o[t][e]:delete o[t]);for(var x=0;x<l.length;x++){var v=l[x];if(!t||t==v){if(c="z"==v?this.varLabelFont:this.smpLabelFont,h[v])for(var b in h[v])if(!e||e==b){if("w"==v){if("smps"!=b&&"grps"!=b)continue;if("grps"==b){o[v][b]=h[v][b],o[v].smps={};for(var A=0;A<h[v].smps.length;A++)o[v].smps[h[v].smps[A]]=A;continue}}o[v][b]={},o[v][b].origin=v,o[v][b].len=this.measureText(b,c);var w=o[v][b].len,C=b.length,T=b,S=this.isNumeric(h[v][b])&&!this.isEmpty(h[v][b])&&!this.isNull(h[v][b]);o[v][b].type=S?"Numeric":"String";var M=0,D=0,k="";if("String"==o[v][b].type){if(o[v][b].unique=this.isUnique(h[v][b]),o[v][b].boolean=this.isBoolean(h[v][b]),o[v][b].date=this.isDate(h[v][b]),o[v][b].monthDay=this.isMonthDay(h[v][b]),o[v][b].geo=this.isCountry(h[v][b])||this.isUsa(h[v][b]),o[v][b].boolean&&this.isR)for(var A=0;A<h[v][b].length;A++)null!=h[v][b][A]&&"string"==typeof h[v][b][A]&&("true"==h[v][b][A].toLowerCase()?h[v][b][A]=!0:"false"==h[v][b][A].toLowerCase()?h[v][b][A]=!1:h[v][b][A]=null);for(var L={},A=0;A<h[v][b].length;A++)L[h[v][b][A]]||(L[h[v][b][A]]=0),L[h[v][b][A]]++;var I=d(b,L,!1,o[v][b].date,o[v][b].monthDay),z=this.stringRangeSort(this.getKeys(L));o[v][b].levels=I?z.sort((function(t,e){return I[t]-I[e]})):z,o[v][b].n=[];for(var A=0;A<o[v][b].levels.length;A++)o[v][b].n.push(L[o[v][b].levels[A]]);o[v][b].order={};for(var A=0;A<z.length;A++){o[v][b].order[z[A]]=I?I[z[A]]:A,(X=this.measureText(z[A],c))>M&&(M=X,D=z[A].length,k=z[A])}o[v][b].maxLevLen=M,o[v][b].maxLevChr=D,o[v][b].maxLevStr=k,p("color",this.colors),p("shape",this.shapes),p("size",this.getBestSizes(z.length)),p("pattern",this.patterns),p("linePattern",this.linePatterns),p("connect",this.colors)}else{o[v][b].unique=!1,o[v][b].boolean=!1;for(var A=0;A<h[v][b].length;A++)null!=h[v][b][A]&&(h[v][b][A]=Number(h[v][b][A]));var N=this.range(h[v][b]);o[v][b].rmin=N[0],o[v][b].rmax=N[1],o[v][b].n=h[v][b].length,g("color",this.colors),g("shape",this.shapes),g("size",this.sizes),g("pattern",this.patterns),g("connect",this.colors)}o.m[v]||(o.m[v]={}),o.m[v].maxFacLen?w>o.m[v].maxFacLen&&(o.m[v].maxFacLen=w,o.m[v].maxFacChr=C,o.m[v].maxFacStr=T):(o.m[v].maxFacLen=w,o.m[v].maxFacChr=C,o.m[v].maxFacStr=T)}if(s)return;var B,P,R;"z"==v&&(B="y",P="vars",R="Var"),"x"!=v&&"q"!=v||(B="y",P="smps",R="Smp"),"w"==v&&(B="w",P="smps",R="Smp");var M=0,D=0,k="";if(h[B]){for(var A=0;A<h[B][P].length;A++){var O,X;if(h[B][P].length>this.fullTextMeasureCheck){if((O=h[B][P][A].toString().length)>D)(X=this.measureText(h[B][P][A],c))>M&&(M=X,D=O,k=h[B][P][A])}else if((O=h[B][P][A].toString().length)>=D)(X=this.measureText(h[B][P][A],c))>M&&(M=X,D=O,k=h[B][P][A])}if(o[B]["max"+R+"Len"]=M,o[B]["max"+R+"Chr"]=D,o[B]["max"+R+"Str"]=k,o[B].vars=this.isCountry(h.y.vars)?"World":this.isUsa(h.y.vars)?"USA":this.isDate(h.y.vars)?"Date":"String",o[B].smps=this.isCountry(h.y.smps)?"World":this.isUsa(h.y.smps)?"USA":this.isDate(h.y.smps)?"Date":"String","x"==v){o[B].range||(o[B].range={});for(var A=0;A<h.y.smps.length;A++){var N=this.range(this.getDataForSmpAtPosition(A));o[B].range[h.y.smps[A]]={},o[B].range[h.y.smps[A]].min=N[0],o[B].range[h.y.smps[A]].max=N[1],o[B].range[h.y.smps[A]].type="Numeric",r&&(o[B].range[h.y.smps[A]].time=r[A])}}if("z"==v){o[B].range||(o[B].range={});for(var A=0;A<h.y.data.length;A++){N=this.range(h.y.data[A]);o[B].range[h.y.vars[A]]={},o[B].range[h.y.vars[A]].min=N[0],o[B].range[h.y.vars[A]].max=N[1],o[B].range[h.y.vars[A]].type="Numeric"}}if("w"==v){o[B].range||(o[B].range={});var F=[],_=this.isGroupedData?this.data.w:this.data.y;if(this.layoutValid&&this.data.l&&this.data.l.smps)for(var A=0;A<this.data.l.smps.length;A++)F.push(A);else F=this.isGroupedData&&this.grpIndices?this.grpIndices:this.smpIndices;for(A=0;A<F.length;A++){N=this.range(this.getDataForSmpGrpAtIndex(A));o[B].range[_.smps[A]]={},o[B].range[_.smps[A]].min=N[0],o[B].range[_.smps[A]].max=N[1],o[B].range[_.smps[A]].type="Numeric"}}}}}this.setColorScheme(!(!t||!e)&&this.meta.data[t][e])}},this.setMetaData=function(t){if(!this.meta.data)if("Network"==this.graphType)this.meta.data={nodes:{},edges:{},decorations:{}},this.updateNetworkMetaData();else if("Genome"==this.graphType)this.meta.data={tracks:[]},this.updateGenomeMetaData();else if("Venn"==this.graphType);else{if(this.meta.data={w:{},x:{},y:{},z:{},m:{},p:{g:[],l:[],i:[]},l:[],q:{l:{},g:[],b:!1,o:!1},b:{l:[],g:!1,c:!1},c:{z:{},s:{},p:[]},d:{m:{},v:[],g:[],s:{},a:{},l:[],q:null,x:{},y:{},z:{},d:{}}},this.data.y){var e=this.data.y,i=[];if(this.isRawData){for(var s=0;s<e.smps.length;s++)i[s]=!0;for(s=0;s<e.data.length;s++)for(var a=0;a<e.data[s].length;a++)null!=e.data[s][a]?(i[a]&&!this.isDate([e.data[s][a]])&&(i[a]=!1),e.data[s][a]=e.data[s][a]==this.missingDataValue?Number.NaN:Number(e.data[s][a])):e.data[s][a]=Number.NaN}else{var r="iqr"==this.summaryType?["iqr1","iqr3","median","qtl1","qtl3","out"]:[this.summaryType];for(s=0;s<r.length;s++){var n=r[s];if(e.hasOwnProperty(n))for(a=0;a<e[n].length;a++)for(var o=0;o<e[n][a].length;o++)if("out"==n)for(var h=0;h<e[n][a][o].length;h++)null!=e[n][a][o][h]?e[n][a][o][h]=e[n][a][o][h]==this.missingDataValue?Number.NaN:Number(e[n][a][o][h]):e.data[s][a]=Number.NaN;else null!=e[n][a][o]?e[n][a][o]=e[n][a][o]==this.missingDataValue?Number.NaN:Number(e[n][a][o]):e[n][a][o]=Number.NaN;else{e[n]=[];var l="iqr"==this.summaryType?"median":this.summaryType;for(a=0;a<e[l].length;a++){e[n][a]=[];for(o=0;o<e[l][a].length;o++)e[n][a][o]=[]}}}n="iqr"==this.summaryType?"median":this.summaryType;e.data=[];for(s=0;s<e[n].length;s++)e.data.push(e[n][s])}}this.updateMetaData(!1,!1,!1,!1,t,i)}},this.setGroupLabels=function(){if(this.groupingFactors.length){var t=!0;if(this.colorBy&&this.groupingFactors.includes(this.colorBy)&&this.data.w&&this.groupingFactors.length>1){t=!1;for(var e=this.groupingFactors.indexOf(this.colorBy),i=0;i<this.data.w.smps.length;i++){if(this.data.w.smps[i].length)this.data.w.glab[i]||(this.data.w.glab[i]=this.cloneObject(this.data.w.smps[i])),(a=this.data.w.glab[i].split(" :: ")).splice(e,1).join(" :: "),this.showLegend&&(this.data.w.smps[i]=a)}}if(this.shapeBy&&this.groupingFactors.includes(this.shapeBy)&&this.data.w&&this.groupingFactors.length>1){t=!1;for(e=this.groupingFactors.indexOf(this.shapeBy),i=0;i<this.data.w.smps.length;i++){if(this.data.w.smps[i].length)this.data.w.glab[i]||(this.data.w.glab[i]=this.cloneObject(this.data.w.smps[i])),(a=this.data.w.glab[i].split(" :: ")).splice(e,1).join(" :: "),this.showLegend&&(this.data.w.smps[i]=a)}}t&&this.data.w&&this.data.w.glab.length==this.data.w.smps.length&&(this.data.w.smps=this.cloneObject(this.data.w.glab))}if(this.data.w&&this.data.w.smps&&this.groupingFactors.length)for(i=0;i<this.segregateSamplesBy.length;i++){e=this.groupingFactors.indexOf(this.segregateSamplesBy[i]);for(var s=0;s<this.data.w.smps.length;s++)if(this.data.w.smps[s].length){this.data.w.glab[s]||(this.data.w.glab[s]=this.cloneObject(this.data.w.smps[s]));var a=this.data.w.glab[s].split(" :: ");e>=0?a.splice(e,1).join(" :: "):a=a.join(" :: "),this.data.w.smps[s]=a}}this.data.w&&this.updateMetaData("w")},this.getIndices=function(t,e,i){if(null!=t&&e){i||(i=this.getObjectArrayOrder(e));var s=[];if(this.isArray(t)){if(this.isArray(e)){for(var a=t.length,r=0;r<a;r++)i.hasOwnProperty(t[r])&&s.push(i[t[r]]);return s}return i.hasOwnProperty(e)?i[e[r]]:-1}return e.indexOf(t)}},this.getLevelsByAnnotation=function(t,e,i,s,a){var r=[],n={},o=this.data[i],h=this.meta.data[i];if(o&&t&&o[t]){h=h[t];for(var l=0;l<e.length;l++){var c=e[l],d=this.getMetadataValue(c,i,t,s)||"";n.hasOwnProperty(d)||r.push(d),n[d]=!0}h&&a&&(r=h.monthDay?r.sort((function(t,e){return parseInt(CanvasXpress.dates[t])-parseInt(CanvasXpress.dates[e])})):r.sort((function(t,e){return h.n[h.order[e]]-h.n[h.order[t]]||e>t})))}return r},this.getVariablesSamplesByAnnotationLevel=function(t,e,i,s,a){var r=[];if(o=this.data[s],o&&t&&o[t])if(e)for(var n=0;n<i.length;n++){var h=i[n];this.getMetadataValue(h,s,t)==e&&(a&&a[h],r.push(h))}else for(n=0;n<i.length;n++){h=i[n];this.getMetadataValue(h,s,t)||(a&&a[h],r.push(h))}return r},this.getVarSmpAnnotations=function(t,e,i,s,a){var r={},n=[],o=!1,h=this.data[a];if(e||(e="x"==a?this.smpIndices:this.varIndices),h&&h.hasOwnProperty(t)){for(var l=0;l<e.length;l++){var c=e[l],d=this.getMetadataValue(c,a,t);null!=d?(r[d]=!0,n.push(d)):o=!0}if(o&&n.push(""),s)return i?n.join("+"):n;for(var l in n=[],r)n.push(l);return o&&n.push(""),i?n.join("+"):n}},this.setAllSamplesVisible=function(t,e,i){var s=this.data;if(s.y){var a=s.y.smps;if(!a&&s.y.vars){s.y.data||alert("Missing data object"),a=[];for(var r=0;r<s.y.data[0].length;r++)a.push("smp"+(r+1));s.y.smps=a}var n=[],o=[];if(t)for(r=0;r<t.length;r++)n.push(t[r]),o.push(!1);else for(r=0;r<a.length;r++)n.push(r),o.push(!1);!e&&this.varIndices&&this.filterData(),this.smpIndices="descending"==this.sortDir?n.reverse():n,this.hiddenSmps="descending"==this.sortDir?o.reverse():o}if(this.data.w&&this.data.w.smps){n=[],o=[],this.hiddenGrps=[];for(r=0;r<this.data.w.smps.length;r++)n.push(r),o.push(!1);this.grpIndices="descending"==this.sortDir?n.reverse():n,this.hiddenGrps="descending"==this.sortDir?o.reverse():o}if(this.layoutComb&&this.layoutParams&&!i)for(r=0;r<this.layoutParams.length;r++){var h=this.layoutParams[r];h&&(h.startingSmpIndices&&(h.smpIndices=h.startingSmpIndices,h.smpIndicesStart=-1),this.isGroupedData&&h.startingGrpIndices&&(h.grpIndices=h.startingGrpIndices,h.grpIndicesStart=-1))}},this.getSampleIndices=function(t,e,i,s,a){return s||(s=this.isGroupedData&&!e?this.data.w.smps:i&&this.dataStndBy?this.dataStndBy.y.smps:this.data.y.smps,a=this.getObjectArrayOrder(s)),this.getIndices(t,s,a)},this.getSamplesByAxis=function(t){return this[t]||[]},this.getSamplesByAnnotationLevel=function(t,e,i){return this.getVariablesSamplesByAnnotationLevel(t,e,i||this.smpIndices,"x",this.hiddenSmps)},this.getSampleLevelsByAnnotation=function(t,e){return this.getLevelsByAnnotation(t,e||this.smpIndices,"x")},this.setSamplesVisible=function(t,e){if(this.isGroupedData){this.grpIndices=[];for(var i=0;i<t.length;i++)this.grpIndices.push(t[i])}else{this.smpIndices=[];for(i=0;i<t.length;i++)this.smpIndices.push(t[i])}if(status){var s=this.getObjectArray(t),a=this.isGroupedData?this.data.w:this.data.y,r=this.isGroupedData?this.hiddenGrps:this.hiddenSmps;for(i=0;i<a.smps.length;i++)s.hasOwnProperty(i)?r[i]=!1:r[i]=!0}},this.hideUnhideSmps=function(t){if(!this.isTransition()&&t){var e=this.isGroupedData?this.data.w:this.data.y,i=this.isGroupedData?this.hiddenGrps:this.hiddenSmps;if(this.isArray(t)){for(var s=0;s<t.length;s++)for(var a=0;a<e.smps.length;a++)if(e.smps[a]==t[s]){i[a]?i[a]=!1:i[a]=!0;break}}else for(s=0;s<e.smps.length;s++)if(e.smps[s]==t){i[s]?i[s]=!1:i[s]=!0;break}var r=[];for(s=0;s<e.smps.length;s++)i[s]||r.push(s);this.setSamplesVisible(r),this.draw({func:"hideUnhideSmps",par:[t]})}},this.getSamples=function(){for(var t=[],e=this.isGroupedData?this.data.w.smps:this.data.y.smps,i=(this.isGroupedData?this.data.w:this.data.y,this.isGroupedData?this.hiddenGrps:this.hiddenSmps),s=this.isGroupedData?this.grpIndices:this.smpIndices,a=0;a<e.length;a++){for(var r=-1,n=0;n<s.length;n++)if(s[n]==a){r=n;break}t.push({name:e[a],hidden:i[a],index:r})}return t},this.getSmpAnnotations=function(t,e,i,s){return this.getVarSmpAnnotations(t,e,i,s,"x")},this.setAllVariablesVisible=function(t,e){var i=this.data;if(i.y){var s=i.y.vars;if(!s&&i.y.data){s=[];for(var a=0;a<i.y.data.length;a++)s.push("var"+(a+1));i.y.vars=s}var r=[],n=[];if(!this.isDOE&&this.xAxis.length&&this.isOneDimensionalGraph())if(t=this.xAxis2.length?this.getVariableIndices(this.xAxis).concat(this.getVariableIndices(this.xAxis2)):this.getVariableIndices(this.xAxis),this.isArray(t)){if(!t.length)for(a=0;a<i.y.data.length;a++)t.push(a)}else t=t>=0&&[t];if(t)for(a=0;a<t.length;a++)r.push(t[a]),n.push(!1);else for(a=0;a<s.length;a++)r.push(a),n.push(!1);if(!e&&this.smpIndices&&this.filterData(),this.layoutComb&&this.layoutParams)for(a=0;a<this.layoutParams.length;a++){var o=this.layoutParams[a];o&&o.startingVarIndices&&(o.varIndices=o.startingVarIndices,o.varIndicesStart=-1)}this.varIndices=r,this.hiddenVars=n}},this.getVariableIndices=function(t,e,i,s){return i||(i=e&&this.dataStndBy?this.dataStndBy.y.vars:this.data.y.vars,s=this.getObjectArrayOrder(i)),this.getIndices(t,i,s)},this.setVariablesVisibleByAxis=function(t,e){var i=this[t+"VarIndices"];i=[];for(var s=0;s<e.length;s++)i.push(e[s])},this.getVariablesVisibleByAxis=function(t){return this[t+"VarIndices"]},this.getVariablesByAnnotationLevel=function(t,e,i){return this.getVariablesSamplesByAnnotationLevel(t,e,i||this.varIndices,"z",this.hiddenVars)},this.getVariableLevelsByAnnotation=function(t,e){return this.getLevelsByAnnotation(t,e||this.varIndices,"z")},this.setVariablesVisible=function(t){this.varIndices=[];for(var e=0;e<t.length;e++)this.varIndices.push(t[e])},this.hideUnhideVars=function(t){if(!this.isTransition()){var e=this.data.y,i=this.hiddenVars;if(t){if(this.isArray(t)){for(var s=0;s<t.length;s++)for(var a=0;a<e.vars.length;a++)if(e.vars[a]==t[s]){i[a]?i[a]=!1:i[a]=!0;break}}else for(s=0;s<e.vars.length;s++)if(e.vars[s]==t){i[s]?i[s]=!1:i[s]=!0;break}var r=[];for(s=0;s<e.vars.length;s++)i[s]||r.push(s);this.setVariablesVisible(r),this.draw({func:"hideUnhideVars",par:[t]})}}},this.getVariables=function(){for(var t=[],e=0;e<this.data.y.vars.length;e++){for(var i=-1,s=0;s<this.varIndices.length;s++)if(this.varIndices[s]==e){i=s;break}t.push({name:this.data.y.vars[e],hidden:this.hiddenVars[e],index:i})}return t},this.getVarAnnotations=function(t,e,i,s){return this.getVarSmpAnnotations(t,e,i,s,"z")},this.setNodeIndices=function(){for(var t=this.data.nodes,e={},i={},s={},a=0;a<t.length;a++){var r=t[a];e[r.id]=r,i[r.id]=a,s[r.id]=!1}this.nodes=e,this.data.nodeIndices=i,this.nodeInitialCache=s},this.setNodes=function(){if(this.data.nodeIndices){for(var t=this.data.nodeIndices,e=this.data.nodes,i={},s=0;s<e.length;s++){var a=e[s];i[a.id]=a}for(var s in e=[],t)e[t[s]]=i[s];this.data.nodes=e,this.nodes=i}else this.setNodeIndices()},this.setAllNodesVisible=function(t){this.nodes={},this.data.nodeIndices={};for(var e=this.data.nodes,i=0;i<e.length;i++){var s=e[i];s.hide=!1,this.nodes[s.id]=s,this.data.nodeIndices[s.id]=i}var a=this.data.edges;for(i=0;i<a.length;i++)a[i].hide=!1;t||this.filterData()},this.hideUnhideNodes=function(t,e){e=!!e,this.isHiddenNodes=e;var i=this.data.nodes,s=this.nodes;if(t){if(this.isArray(t))for(var a=0;a<t.length;a++){var r=t[a];(n=i[this.data.nodeIndices[r]]).hide=e,s&&null!=s[r]&&(s[r].hide=e)}}else{for(a=0;a<i.length;a++){var n;(n=i[a]).hide=e,s&&null!=s[n.id]&&(s[n.id].hide=e)}this.removeMenus(),this.draw({func:"hideUnhideNodes",par:[t,e]})}},this.setAllFeaturesVisible=function(){for(var t=this.data.tracks,e=0;e<t.length;e++){var i=t[e];i.hide=!1;for(var s=i.data,a=0;a<s.length;a++)s[a].hide=!1}},this.hideUnhideMapFeatures=function(t,e,i){var s=this.meta.map.geojson.features;if(i)for(var a=0;a<s.length;a++)s[a].hidden=i;for(a=0;a<t.length;a++)s[t[a]].hidden=e},this.setAllMapFeaturesVisible=function(){if(this.meta.map&&this.meta.map.geojson)for(var t=0;t<this.meta.map.geojson.features.length;t++)this.meta.map.geojson.features[t].hidden=!1},this.setIndices=function(t,e,i){"Network"==this.graphType?this.setNodes():"Genome"!=this.graphType&&"Venn"!=this.graphType&&(this.setAllVariablesVisible(t,i),this.setAllSamplesVisible(e,i))},this.resetIndices=function(t){if(this.isGroupedData&&this.grpIndices&&this.data.w)if(t&&this.grpIndices.length){for(var e=[],i=0;i<this.grpIndices.length;i++){var s=this.data.w.grps[this.grpIndices[i]];s&&(e=e.concat(s))}this.smpIndices=e}else this.setIndices()},this.initializeDataAttributes=function(t,e,i,s,a){var r=this.graphType,n=["outlineByData","shapeByData","sizeByData","patternByData"];if(s||this.setIndices(t,e,i),"Network"==r||"Genome"==r)this.setMetaData(a);else if("Venn"!=r){this.setMetaData(a);for(var o=0;o<n.length;o++)this[n[o]]&&this.data.y.hasOwnProperty(this[n[o]])?this.updateMetaData(this[n[o]]):this[n[o]]=!1;this.oncoprintCNA&&this.data.y.hasOwnProperty(this.oncoprintCNA)&&(this.updateMetaData(this.oncoprintCNA),this.isOncoprint=!0),this.oncoprintMUT&&this.data.y.hasOwnProperty(this.oncoprintMUT)&&this.updateMetaData(this.oncoprintMUT)}},this.cleanData=function(t){for(var e=["sankey","tree","bubble","gantt","contour"],i=0;i<e.length;i++)delete t[e[i]];return t},this.setGanttData=function(){if(!this.isGanttDataFormated){this.data.gantt=[];for(var t=0;t<this.data.y.vars.length;t++){this.data.gantt[t]=[];for(var e=0;e<this.data.y.smps.length;e++){var i=null!=this.data.y.data[t][e]?this.parseDate(this.data.y.data[t][e]).getTime():null;this.data.gantt[t].push(i)}}this.isGanttDataFormated=!0}},this.setQQData=function(){this.isQQ||this.addQQPlot(!0)},this.setCDFData=function(){this.isCDF||this.addCDFPlot(!0)},this.setManhattanData=function(){if(!this.isManhattanDataFormated){var t=this,e=function(e,i){for(var s=0,a=0;a<e-1;a++)s+=t.chromosomeLengths[a];return s+i},i=this.manhattanMarkerChromosomeNumber?this.getSampleIndices(this.manhattanMarkerChromosomeNumber):-1,s=this.manhattanMarkerPosition?this.getSampleIndices(this.manhattanMarkerPosition):-1,a=this.manhattanMarkerLogPValue?this.getSampleIndices(this.manhattanMarkerLogPValue):-1;if(i<0)return this.scatterType=!1,void alert("Missing marker chromosome number");if(s<0)return this.scatterType=!1,void alert("Missing marker base postion");if(a<0)return this.scatterType=!1,void alert("Missing marker p-value");if(!this.chromosomeLengths.length){for(var r=[],n=0;n<this.data.y.vars.length;n++){var o=this.data.y.data[n][i],h=this.data.y.data[n][s];r[o]||(r[o]=[]),r[o].push(h)}for(n=0;n<r.length;n++)this.chromosomeLengths[n]=this.max(r[n]||[0])+1}var l=this.getSampleIndices("Manhattan");if(l>=0)for(n=0;n<this.data.y.vars.length;n++)this.data.y.data[n][l]=e(this.data.y.data[n][i],this.data.y.data[n][s]);else{this.data.y.smps.push("Manhattan");for(n=0;n<this.data.y.vars.length;n++)this.data.y.data[n].push(e(this.data.y.data[n][i],this.data.y.data[n][s]))}var c=this.meta.config.user;this.manhattanMarkerChromosomeNumberIndex=i,this.manhattanMarkerPositionIndex=s,this.manhattanMarkerLogPValueIndex=a,this.xAxis=["Manhattan"],this.xAxisTitle=c.xAxisTitle||"Chromosome",this.yAxis=[this.data.y.smps[a]],this.yAxisTitle=c.yAxisTitle||this.data.y.smps[a],this.xAxisTicksMajorShow=c.xAxisTicksMajorShow||!1,this.xAxisTicksMinorShow=c.xAxisTicksMinorShow||!1,this.xAxisTickRighShow=c.xAxisTickRightShow||!1,this.yAxisTicksMinorShow=c.yAxisTicksMinorShow||!1,this.yAxisTickTopShow=c.yAxisTickTopShow||!1,this.yAxisTickBottomShow=c.yAxisTickBottomShow||!1,this.plotBox=c.plotBox||!1,this.isManhattanDataFormated=!0}},this.setSankeyData=function(){if(this.sankeySource&&this.sankeyTarget){this.data.sankey={nodes:[],links:[]};for(var t={},e=0;e<this.smpIndices.length;e++){var i=this.smpIndices[e],s=this.getMetadataValue(i,"x",this.sankeySource),a=this.getMetadataValue(i,"x",this.sankeyTarget),r=this.getDataAtPos(this.hierarchyVarIndex,i,!1,this.xAxisTransform,this.xAxisFloorValue,this.xAxisCeilValue);this.data.sankey.links.push({source:s,target:a,value:r,id:i}),t[s]=!0,t[a]=!0}var n=0;for(var e in t)this.data.sankey.nodes.push({name:e,id:n++});var o={};this.data.sankey.nodes.forEach((function(t){o[t.name]=t})),this.data.sankey.links=this.data.sankey.links.map((function(t){return{source:o[t.source],target:o[t.target],value:t.value,id:t.id}}))}else this.data.sankey&&delete this.data.sankey},this.setHierarchyData=function(t){if("Sankey"==this.graphType||"Circular"==this.graphType&&("sunburst"==this.circularType||"bubble"==this.circularType)){var e=this.hierarchyVar?this.getVariableIndices(this.hierarchyVar):0;this.hierarchyVarIndex=e>=0?e:0}if(this.hierarchy.length>0){if(!this.data[t]){this.data[t]={},this.data[t].data={name:this.hierarchy[0],children:[]};for(e=0;e<this.smpIndices.length;e++)for(var i=this.smpIndices[e],s=this.data[t].data.children,a=0;a<this.hierarchy.length;a++){for(var r=this.hierarchy[a],n=-1,o=0;o<s.length;o++)this.getMetadataValue(i,"x",r)==s[o].name&&(n=o);if(-1==n){var h=this.getMetadataValue(i,"x",r);if(null==h){if(a==this.hierarchy.length-1){s.push({name:this.data.y.smps[i],size:this.data.y.data[this.hierarchyVarIndex][i],idx:i});continue}continue}s.push({name:h,children:[]}),n=s.length-1}s=s[n].children,a===this.hierarchy.length-1&&s.push({name:this.data.y.smps[i],size:this.data.y.data[this.hierarchyVarIndex][i],idx:i})}}}else{this.data[t]={},this.data[t].data={name:"Samples",children:[]};for(e=0;e<this.smpIndices.length;e++){i=this.smpIndices[e];(s=this.data[t].data.children).push({name:this.data.y.smps[i],size:this.data.y.data[this.hierarchyVarIndex][i],idx:i})}}},this.initializeData=function(t,e,i){if(t&&"string"==typeof t&&this.isValidJSON(t)&&(t=JSON.parse(t)),this.data=t||this.getDataSet(),this.isExample=!t,this.isExample&&(this.$(this.target).style.display="none"),this.nodesData=!1,this.edgesData=!1,this.featuresData=!1,e&&delete this.meta.data,this.validGraphTypes=[],Array.isArray(t)&&Array.isArray(t[0])&&(this.data=this.arrayToCanvasXpress(t).data),this.data&&(this.data.y||this.data.venn||this.data.nodes||this.data.tracks||this.data.fx)){if(this.FunctionData(!!this.data.fx),this.data.venn&&("Venn"==this.graphType&&(this.summaryType="venn"),this.validGraphTypes.push("Venn")),this.data.nodes&&("Network"==this.graphType&&(this.summaryType="network"),this.validGraphTypes.push("Network")),this.data.tracks&&("Genome"==this.graphType&&(this.summaryType="genome"),this.validGraphTypes.push("Genome")),this.data.y){if(!(this.data.y||this.data.y.cor||this.data.y.close))return void alert("Dude! there is not a valid data structure");this.data.y.data?(this.isRawData=!0,this.summaryType=this.summaryType&&this.summaryType.match(/iqr|median|mean|cor|sum|max|min|count|gantt/)?this.summaryType:"raw","cor"==this.summaryType?this.graphType="Correlation":"iqr"==this.summaryType?this.graphType="Boxplot":"gantt"==this.summaryType?this.graphType="Gantt":this.data.y[this.summaryType]&&this.isSameObject(this.data.y[this.summaryType],this.data.y.data)&&(this.isRawData=!1),"Gantt"==this.graphType?((!this.ganttStart||this.getVariableIndices(this.ganttStart)<0)&&(this.ganttStart=this.data.y.vars[0]),(!this.ganttEnd||this.getVariableIndices(this.ganttEnd)<0)&&(this.ganttEnd=this.data.y.vars[1]||this.data.y.vars[0]),this.setGanttData()):"Scatter2D"==this.graphType&&"manhattan"==this.scatterType&&this.setManhattanData()):(this.isRawData=!1,this.data.y.iqr1&&this.data.y.qtl1&&this.data.y.median&&this.data.y.qtl3&&this.data.y.iqr3?this.summaryType="iqr":this.data.y.median?this.summaryType="median":this.data.y.mean?this.summaryType="mean":this.data.y.cor?this.summaryType="cor":this.data.y.sum?this.summaryType="sum":this.data.y.max?this.summaryType="max":this.data.y.min?this.summaryType="min":this.data.y.count?this.summaryType="count":this.summaryType=!1),this.validGraphTypes.push("Bar"),this.validGraphTypes.push("Line"),this.validGraphTypes.push("Area"),this.validGraphTypes.push("AreaLine"),this.validGraphTypes.push("BarLine"),this.validGraphTypes.push("Boxplot"),this.validGraphTypes.push("Dotplot"),this.validGraphTypes.push("DotLine"),this.validGraphTypes.push("Heatmap"),this.validGraphTypes.push("Stacked"),this.validGraphTypes.push("StackedLine"),this.validGraphTypes.push("StackedPercent"),this.validGraphTypes.push("StackedPercentLine"),this.validGraphTypes.push("Pie"),this.validGraphTypes.push("Correlation"),this.validGraphTypes.push("Circular"),(this.data.y.smps||this.isDOE)&&(this.data.y.smps.length>2||this.isDOE?(this.validGraphTypes.push("Scatter2D"),this.validGraphTypes.push("ScatterBubble2D"),this.validGraphTypes.push("Scatter3D")):(this.data.y.smps.length>1||this.isDOE)&&this.validGraphTypes.push("Scatter2D"))}this.validGraphTypes.sort(),this.initializeDataAttributes(!1,!1,i)}}},CanvasXpress.prototype.initDataUtils=function(){this.switchVarIdToAnnotation=function(){if(!this.isTransition()){var t=this.data,e=this.meta.data,i=function(){for(var i=0,s="Var-Name-"+i;t.z.hasOwnProperty(s)&&e.z[s];)s="Var-Name-"+ ++i;return s}();t.z[i]=[];for(var s=0;s<t.y.vars.length;s++)t.z[i].push("var"+(s+1));this.updateMetaData("z",i),this.switchVarAnnotationToId(i)}},this.switchVarAnnotationToId=function(t){if(!this.isTransition()){var e=this.data;this.meta.data;if(e.z.hasOwnProperty(t)&&this.isUnique(e.z[t])){var i=this.rebuildDataTableFilter(),s=this.groupingFactors,a=this.cloneObject(e.y.vars),r=this.cloneObject(e.z[t]),n=t.match(/^--/)?t.replace(/^--/,""):"--"+t;e.z[n]=a,e.y.vars=r,delete e.z[t],this.resetMetaData(),s&&s.length>0?(this.ungroupSamples(!0),this.groupSamples(s)):this.draw({func:"switchVarAnnotationToId",par:[t]}),this.removeMenus(),this.rebuildDataTableFilter(i,!0)}else alert("Annotation "+t+" is not unique!")}},this.switchAnnotationToVar=function(t,e){if(!this.isTransition()){var i=this.data,s=this.meta.data;if(i.hasOwnProperty("x")&&i.x.hasOwnProperty(t)){var a=this.rebuildDataTableFilter();s.modified||(s.modified={}),s.modified.z||(s.modified.z={}),s.modified.z[t]||(s.modified.z[t]={});var r=this.groupingFactors;if(this.isGroupedData=!1,i.y.vars.push(t),this.isNumeric(i.x[t]))i.y.data.push(i.x[t]);else{for(var n=[],o=0;o<i.y.smps.length;o++)n.push(s.x[t].order[i.x[t][o]]);i.y.data.push(n),s.modified.x||(s.modified.x={}),s.modified.x[t]||(s.modified.x[t]=this.cloneObject(s.x[t].levels))}if(delete i.x[t],(h=this.getKeys(i.x)).length<1&&delete i.x,i.z){var h=this.getKeys(i.z);for(o=0;o<h.length;o++)i.z[h[o]].push(s.modified.z[t][h[o]]||"")}var l=this.cloneObject(s.modified);this.updateMetaData("x",t,!0),this.updateData(i,!1,!0),this.updateDOE(t,!0),this.meta.data.modified=l,e||(r&&r.length>0?(this.ungroupSamples(!0),this.groupSamples(r)):this.draw({func:"switchAnnotationToVar",par:[t]})),this.removeMenus(),this.rebuildDataTableFilter(a,!0)}}},this.switchVarToAnnotationBulk=function(t){this.stack({func:"switchVarToAnnotationBulk",par:[t]}),this.skipStack=!0;for(var e=0;e<t.length;e++)this.resetAxes(!0),this.switchVarToAnnotation(t[e],e!=t.length-1);this.skipStack=!1},this.switchVarToAnnotation=function(t,e){if(!this.isTransition()){var i=this.getVariableIndices(t);if(i>=0){var s=this.data,a=this.meta.data,r=this.rebuildDataTableFilter();a.modified||(a.modified={}),a.modified.z||(a.modified.z={}),a.modified.z[t]||(a.modified.z[t]={});var n=this.groupingFactors;if(this.isGroupedData=!1,s.x||(s.x={}),a.modified&&a.modified.x&&a.modified.x[t]){for(var o=[],h=0;h<s.y.smps.length;h++)o.push(a.modified.x[t][s.y.data[i][h]]);s.x[t]=o}else s.x[t]=s.y.data[i];if(s.y.vars.splice(i,1),s.y.data.splice(i,1),s.z){var l=this.getKeys(s.z);for(h=0;h<l.length;h++){var c=s.z[l[h]].splice(i,1);a.modified.z[t][l[h]]=c[0]}}var d=this.cloneObject(a.modified);this.updateMetaData("x"),this.updateData(s,!1,!0),this.updateDOE(t),this.meta.data.modified=d,e||(n&&n.length>0?(this.ungroupSamples(!0),this.groupSamples(n)):this.draw({func:"switchVarToAnnotation",par:[t]})),this.removeMenus(),this.rebuildDataTableFilter(r,!0)}}},this.switchSmpIdToAnnotation=function(){if(!this.isTransition()){var t=this.data,e=this.meta.data,i=function(){for(var i=0,s="Smp-Name-"+i;t.x.hasOwnProperty(s)&&e.x[s];)s="Smp-Name-"+ ++i;return s}();t.x[i]=[];for(var s=0;s<t.y.smps.length;s++)t.x[i].push("smp"+(s+1));this.updateMetaData("x",i),this.switchSmpAnnotationToId(i)}},this.switchSmpAnnotationToId=function(t){if(!this.isTransition()){var e=this.data;this.meta.data;if(e.x.hasOwnProperty(t)&&this.isUnique(e.x[t])){var i=this.rebuildDataTableFilter(),s=this.groupingFactors,a=this.cloneObject(e.y.smps),r=this.cloneObject(e.x[t]),n=t.match(/^--/)?t.replace(/^--/,""):"--"+t;e.x[n]=a,e.y.smps=r,delete e.x[t],this.resetMetaData(),s&&s.length>0?(this.ungroupSamples(!0),this.groupSamples(s)):this.draw({func:"switchSmpAnnotationToId",par:[t]}),this.removeMenus(),this.rebuildDataTableFilter(i,!0)}else alert("Annotation "+t+" is not unique!")}},this.switchAnnotationToSmp=function(t,e){if(!this.isTransition()){var i=this.data,s=this.meta.data;if(i.z.hasOwnProperty(t)){var a=this.rebuildDataTableFilter();s.modified||(s.modified={}),s.modified.x||(s.modified.x={}),s.modified.x[t]||(s.modified.x[t]={});var r=this.groupingFactors;if(this.isGroupedData=!1,i.y.smps.push(t),this.isNumeric(i.z[t]))for(var n=0;n<i.y.vars.length;n++)i.y.data[n].push(i.z[t][n]);else{for(n=0;n<i.y.vars.length;n++)i.y.data[n].push(s.z[t].order[i.z[t][n]]);s.modified.z||(s.modified.z={}),s.modified.z[t]||(s.modified.z[t]=this.cloneObject(s.z[t].levels))}if(delete i.z[t],(o=this.getKeys(i.z)).length<1&&delete i.z,i.x)for(var o=this.getKeys(i.x),h=0;h<o.length;h++)i.x[o[h]].push(s.modified.x[t][o[h]]||"");var l=this.cloneObject(s.modified);this.updateMetaData("z",t,!0),this.updateData(i,!1,!0),this.resetAxes(),this.meta.data.modified=l,e||(r&&r.length>0?(this.ungroupSamples(!0),this.groupSamples(r)):this.draw({func:"switchAnnotationToSmp",par:[t]})),this.removeMenus(),this.rebuildDataTableFilter(a,!0)}}},this.switchSmpToAnnotationBulk=function(t){this.stack({func:"switchSmpToAnnotationBulk",par:[t]}),this.skipStack=!0;for(var e=0;e<t.length;e++)this.resetAxes(!0),this.switchSmpToAnnotation(t[e],e!=t.length-1);this.skipStack=!1},this.switchSmpToAnnotation=function(t,e){if(!this.isTransition()){var i=this.getSampleIndices(t,!0);if(i>=0){var s=this.data,a=this.meta.data,r=this.rebuildDataTableFilter();a.modified||(a.modified={}),a.modified.x||(a.modified.x={}),a.modified.x[t]||(a.modified.x[t]={});var n=this.groupingFactors;if(this.isGroupedData=!1,s.z||(s.z={}),s.y.smps.splice(i,1),s.z[t]=[],a.modified&&a.modified.z&&a.modified.z[t])for(var o=0;o<s.y.vars.length;o++){var h=s.y.data[o].splice(i,1);s.z[t].push(a.modified.z[t][h])}else for(o=0;o<s.y.vars.length;o++)s.z[t].push(s.y.data[o].splice(i,1));if(s.x){var l=this.getKeys(s.x);for(o=0;o<l.length;o++){var c=s.x[l[o]].splice(i,1);a.modified.x[t][l[o]]=c[0]}}var d=this.cloneObject(a.modified);this.updateMetaData("z"),this.updateData(s,!1,!0),this.resetAxes(),this.meta.data.modified=d,e||(n&&n.length>0?(this.ungroupSamples(!0),this.groupSamples(n)):this.draw({func:"switchSmpToAnnotation",par:[t]})),this.removeMenus(),this.rebuildDataTableFilter(r,!0)}}},this.switchNumericToString=function(t,e,i){if(!this.isTransition()){var s=e?"x":"z",a=e?"smps":"vars";if(t&&this.data[s]&&this.data[s][t]&&"Numeric"==this.meta.data[s][t].type){for(var r=this.rebuildDataTableFilter(),n=0;n<this.data.y[a].length;n++)this.data[s][t][n]=this.data[s][t][n]+"\0";e?this.updateMetaData("x",t):this.updateMetaData("z",t),this.rebuildDataTableFilter(r,!0),this.removeMenus(),i||this.draw({func:"switchNumericToString",par:[t,e]})}}},this.switchStringToNumeric=function(t,e,i){if(!this.isTransition()){var s=e?"x":"z",a=e?"smps":"vars";if(t&&this.data[s]&&this.data[s][t]&&"String"==this.meta.data[s][t].type){for(var r=this.rebuildDataTableFilter(),n=0;n<this.data.y[a].length;n++)this.data[s][t][n]=this.data[s][t][n].replace("\0","");e?this.updateMetaData("x",t):this.updateMetaData("z",t),this.rebuildDataTableFilter(r,!0),this.removeMenus(),i||this.draw({func:"switchStringToNumeric",par:[t,e]})}}},this.getSegregationObject=function(t){var e={lay:{},idx:[],ids:{},nme:[],n:0};this.isHistogramLayout()&&(e.axes=[]);var i="x"==t?"smps":"vars",s="x"==t?this.segregateSamplesBy[0]:this.segregateVariablesBy[0],a=this.isHistogramLayout(),r=!1;"variable"==s?(t="y",s="vars"):"sample"==s&&(t="y",s="smps");var n=!(!this.data.hasOwnProperty(t)||!this.data[t].hasOwnProperty(s))&&this.data;if(a&&!n&&this.dataStndBy&&this.dataStndBy.hasOwnProperty(t)&&this.dataStndBy[t].hasOwnProperty(s)?("z"==t&&(r=this.meta.data.z[s].levels,t="y",s="smps",i="smps"),n=!(!this.data.hasOwnProperty(t)||!this.data[t].hasOwnProperty(s))&&this.data):a&&this.colorBy&&this.segregateSamplesBy.length&&this.dataStndBy&&(r=this.dataStndBy.y.smps),n){for(var o=0;o<n[t][s].length;o++){var h=n[t][s][o];e.lay.hasOwnProperty(h)||(e.lay[h]=[],e.ids[h]=[],e.n++),e.lay[h].push(n.y[i][o]),e.ids[h].push(o)}for(var h in e.lay)e.nme.push(h),e.idx.push(e.lay[h]);if(a)if(this.segregateVariablesBy.length)if(r)for(o=0;o<r.length;o++){for(var l=[],c=0;c<e.nme.length;c++)(e.nme[c].match(":")&&e.nme[c].match(r[o])||!e.nme[c].match(":")&&e.nme[c]==r[o])&&l.push(e.nme[c]);l.length||(l=[this.dataStndBy.y.smps[o]]),e.axes.push({xAxis:["Bin"],yAxis:l})}else for(o=0;o<this.dataStndBy.y.smps.length;o++){for(l=[],c=0;c<e.nme.length;c++)e.nme[c].match(this.dataStndBy.y.smps[o])&&l.push(e.nme[c]);l.length||(l=[this.dataStndBy.y.smps[o]]),e.axes.push({xAxis:["Bin"],yAxis:l})}else if(r)for(o=0;o<r.length;o++){for(l=[],c=0;c<e.nme.length;c++)(e.nme[c].match(":")&&e.nme[c].match(r[o])||!e.nme[c].match(":")&&e.nme[c]==r[o])&&l.push(e.nme[c]);l.length||(l=[this.dataStndBy.y.smps[o]]),e.axes.push({xAxis:["Bin"],yAxis:l})}else for(o=1;o<e.nme.length;o++)e.axes.push({xAxis:["Bin"],yAxis:[e.nme[o]]});return e}return!1},this.segregate=function(t,e,i,s){if(this.isSegregatable()){var a=function(t,e,i){return i.indexOf(t)===e},r="segregate"+t+"By",n="desegregate"+t,o="Samples"==t?"segregateVariablesBy":"segregateSamplesBy",h="Samples"==t?"x":"z",l=this[r],c=this.cloneObject(this.grpIndices),d=!!this.data.w&&this.cloneObject(this.data.w);if(s){if(this.modifyObjectArray(e,!1,r,!0,!1),0==this[r].length)return void this[n](i)}else if(0==this[r].length&&(this.isArray(e)||(e=[e]),this[r]=e,!this.validateSegregation()))return void(this[r]=l);if(this.isArray(this[r])||(this[r]=[this[r]]),this.treemapBy.length&&this.segregateSamplesBy.length&&this.segregateVariablesBy.length)return this.removeMenus(),alert("Ooops. Operation not allowed!"),void(this[r]=[]);if(("sample"==e||this.segregateSamplesBy.includes("sample"))&&this.segregateSamplesBy.length+this.segregateVariablesBy.length>1)return this.removeMenus(),alert("Ooops. Operation not allowed!"),void("sample"==e||this.segregateSamplesBy.length>1?this.segregateSamplesBy.pop():this.segregateVariablesBy.pop());if(this.isGroupedData&&(this.groupingFactorsStdBy=this.groupingFactors,this.ungroupSamples(!0,!0)),this.resetLayout(),this.isCreateHistogram&&"Variables"==t&&this.isCreateHistogram.factor!=this[r][0]&&this.isCreateHistogram.factor!=this.colorBy&&this.isCreateHistogram.factor!=e&&(this.removeHistogram(!0),this.createHistogram(this[r][0]||this.colorBy||e,!0)),1==this[r].length){var p=this.getSegregationObject(h);if(this[o].length>0)this.segregateSamplesVariables(i,"segregateVariablesBy"==o,{func:"segregate",par:[t,e,i,s]}),i=!0;else{this.data.l={},"Samples"==t?this.data.l.smps=[]:this.data.l.vars=[],this.data.l.ids=[],this.data.l.weight=[],this.data.l.type=[],this.data.l.name=[],this.groupingFactorsStdBy&&(this.data.l.group=this.groupingFactorsStdBy,this.data.l.groupLayout=[]);for(var g in p.lay)"Samples"==t?this.data.l.smps.push(p.lay[g]):this.data.l.vars.push(p.lay[g]),this.data.l.ids.push(p.ids[g]),this.data.l.type.push(this.graphType),this.data.l.name.push(g);if(this.groupingFactorsStdBy&&d)for(var u=0;u<this.data.l.ids.length;u++){this.data.l.groupLayout[u]=[];for(var m=0;m<this.data.l.ids[u].length;m++)for(var f=0;f<d.grps.length;f++)if(d.grps[f].includes(this.data.l.ids[u][m])){this.data.l.groupLayout[u].push(f);break}this.data.l.groupLayout[u]=this.data.l.groupLayout[u].filter(a)}this.layoutComb="Circular"!=this.graphType,this.showAnimationTemp=this.showAnimation,this.showAnimation=!1;var y=this.isHistogram?p.axes.length:"Samples"==t?this.data.l.smps.length:this.data.l.vars.length,x=(g=Math.ceil(Math.sqrt(y)),"rows"==this.layoutType?y:"cols"==this.layoutType?1:g*(g-1)>=y?g-1:g),v="cols"==this.layoutType?y:"rows"==this.layoutType?1:x*(g-1)>=y?g-1:g;for(var g in this.layout=x+"X"+v,this.layoutTopologyCurrent&&Number(this.layoutTopologyCurrent[0])*Number(this.layoutTopologyCurrent[1])==y&&(this.layoutTopology=this.layoutTopologyCurrent[0]+"X"+this.layoutTopologyCurrent[1]),p.lay)this.data.l.weight.push([this.layoutTopology?1/this.layoutTopology.split(/X/i)[1]:1/v,this.layoutTopology?1/this.layoutTopology.split(/X/i)[0]:1/x]);this.graphType.match(/Scatter2D/)&&this.isCreateHistogram&&(this.data.l.axes=p.axes),this.isValidLayout()}}else{var b={},A={},w="Samples"==t?this.getSampleLevelsByAnnotation(this.segregateSamplesBy[0]):this.getVariableLevelsByAnnotation(this.segregateVariablesBy[0]),C="Samples"==t?this.getSampleLevelsByAnnotation(this.segregateSamplesBy[1]):this.getVariableLevelsByAnnotation(this.segregateVariablesBy[1]),T=w;"cols"==this.layoutType&&(w=C,C=T);var S=1/w.length,M=1/C.length;if(w.length&&C.length){for(u=0;u<w.length;u++){b[w[u]]={},A[w[u]]={};for(m=0;m<C.length;m++)if(b[w[u]][C[m]]=[],A[w[u]][C[m]]=[],"Samples"==t)for(f=0;f<this.data.y.smps.length;f++)this.data[h][this[r]["cols"==this.layoutType?1:0]][f]==w[u]&&this.data[h][this[r]["cols"==this.layoutType?0:1]][f]==C[m]&&(b[w[u]][C[m]].push(this.data.y.smps[f]),A[w[u]][C[m]].push(f));else for(f=0;f<this.data.y.vars.length;f++)this.data[h][this[r]["cols"==this.layoutType?1:0]][f]==w[u]&&this.data[h][this[r]["cols"==this.layoutType?0:1]][f]==C[m]&&(b[w[u]][C[m]].push(this.data.y.vars[f]),A[w[u]][C[m]].push(f))}this.data.l={},"Samples"==t?this.data.l.smps=[]:this.data.l.vars=[],this.data.l.ids=[],this.data.l.weight=[],this.data.l.type=[],this.data.l.name=[],this.groupingFactorsStdBy&&(this.data.l.group=this.groupingFactorsStdBy,this.data.l.groupLayout=[]);for(u=0;u<w.length;u++)for(m=0;m<C.length;m++)this.layoutRemoveEmpty&&"wrap"==this.layoutType&&b[w[u]][C[m]].length<1||(this.data.l.type.push(this.graphType),this.data.l.name.push([w[u],C[m]]),"Samples"==t?(this.data.l.smps.push(b[w[u]][C[m]]),this.data.l.ids.push(A[w[u]][C[m]])):(this.data.l.vars.push(b[w[u]][C[m]]),this.data.l.ids.push(A[w[u]][C[m]])));if(this.groupingFactorsStdBy&&d)for(u=0;u<this.data.l.ids.length;u++){this.data.l.groupLayout[u]=[];for(m=0;m<this.data.l.ids[u].length;m++)for(f=0;f<d.grps.length;f++)if(d.grps[f].includes(this.data.l.ids[u][m])){this.data.l.groupLayout[u].push(f);break}this.data.l.groupLayout[u]=this.data.l.groupLayout[u].filter(a)}var D=0;for(m=0;m<C.length;m++){var k=0;for(u=0;u<w.length;u++)b[w[u]][C[m]].length>0&&"wrap"==this.layoutType&&k++;D=Math.max(D,k)}var L=0;for(u=0;u<w.length;u++){var I=0;for(m=0;m<C.length;m++)b[w[u]][C[m]].length>0&&"wrap"==this.layoutType&&I++;L=Math.max(L,I)}y=this.data.l.name.length;this.layoutRemoveEmpty&&"wrap"==this.layoutType&&(L=(D=L*(D-1)>y?D-1:D)*(L-1)>y?L-1:L),w.length*C.length>y?w.length==y?(D=y,L=1):C.length==y?(D=1,L=y):D=(L=Math.ceil(Math.sqrt(y)))*(L-1)>=y?L-1:L:(D=w.length,L=C.length),S=1/D,M=1/L,this.layoutTopologyCurrent&&Number(this.layoutTopologyCurrent[0])*Number(this.layoutTopologyCurrent[1])==y&&(this.layoutTopology=this.layoutTopologyCurrent[0]+"X"+this.layoutTopologyCurrent[1]);for(u=0;u<y;u++)this.data.l.weight.push([this.layoutTopology?1/this.layoutTopology.split(/X/i)[1]:M,this.layoutTopology?1/this.layoutTopology.split(/X/i)[0]:S]);this.layoutComb="Circular"!=this.graphType,this.showAnimationTemp=this.showAnimation,this.showAnimation=!1,this.layout=this.layoutRemoveEmpty&&"wrap"==this.layoutType?D+"X"+L:w.length+"X"+C.length}else alert("Incompatible Segregation"),"Samples"==t?this.segregateSamplesBy.pop():this.segregateVariablesBy.pop(),this.removeMenus();this.isValidLayout()}this.setColorScheme(),this.resetCorrelation(),this.checkKMPlot(),this.grpIndices=c,d&&(this.data.w=d),i||this.draw({func:"segregate",par:[t,e,i,s]})}},this.segregateVariables=function(t,e,i){this.segregate("Variables",t,e,i)},this.segregateSamples=function(t,e,i){this.segregate("Samples",t,e,i)},this.segregateSamplesVariables=function(t,e,i){if(this.isSegregatable()){var s=this.getSegregationObject("x"),a=this.getSegregationObject("z"),r=s.idx,n=a.idx,o=s.nme,h=a.nme;this.isGroupedData&&(this.groupingFactorsStdBy=this.groupingFactors,this.ungroupSamples(!0,!0)),delete this.data.l,this.data.l={},this.data.l.smps=r,this.data.l.vars=n,this.data.l.weight=[],this.data.l.type=[],this.data.l.name=[],this.groupingFactorsStdBy&&(this.data.l.group=this.groupingFactorsStdBy),this.layoutTopologyCurrent&&Number(this.layoutTopologyCurrent[0])*Number(this.layoutTopologyCurrent[1])==n.length*r.length&&(this.layoutTopology=this.layoutTopologyCurrent[0]+"X"+this.layoutTopologyCurrent[1]);var l=this.layoutTopology?1/this.layoutTopology.split(/X/i)[0]:1/r.length,c=this.layoutTopology?1/this.layoutTopology.split(/X/i)[1]:1/n.length;if("cols"==this.layoutType&&e||"rows"==this.layoutType&&!e){for(var d=0;d<r.length;d++)for(var p=0;p<n.length;p++)this.data.l.weight.push([c,l]),this.data.l.type.push(this.graphType),this.data.l.name.push([o[d],h[p]]);this.layout=r.length+"X"+n.length}else{for(d=0;d<n.length;d++)for(p=0;p<r.length;p++)this.data.l.weight.push([l,c]),this.data.l.type.push(this.graphType),this.data.l.name.push([h[d],o[p]]);this.layout=n.length+"X"+r.length}this.layoutComb=!0,this.layoutTypeVariablesFirst=e,this.isValidLayout(),this.resetCorrelation(),t?this.groupingFactorsStdBy&&this.groupingFactorsStdBy.length&&this.groupSamples(this.groupingFactorsStdBy,!1,!1,!1,!0):this.draw({func:i.func,par:i.par})}},this.segregateVariablesAndOrSamples=function(t,e,i){e&&e.length&&this.segregate("Samples",e,i),t&&t.length&&this.segregate("Variables",t,i)},this.desegregate=function(t,e){if(this.isSegregatable()){this.showAnimation=this.showAnimationTemp,this.resetLayout();var i="Samples"==t?"segregateSamplesBy":"segregateVariablesBy",s="Samples"==t?"segregateSamples":"segregateVariables";if(this[i].length>0?this[s](this[i],e):this.isValidLayout(),this.groupingFactorsStdBy&&(this.groupSamples(this.groupingFactorsStdBy,!1,!1,!0,!0),this.groupingFactorsStdBy=!1),this.isHistogram&&!this.layoutValid){this.yAxis=this.cloneObject(this.data.y.smps),this.yAxis.shift(),this.yAxisIndices=this.getSampleIndices(this.yAxis);var a=this.isCreateHistogram.isAnnt;this.removeHistogram(!0),this[i]=[],this.createHistogram(a,!0)}else this.graphType.match(/Scatter/)&&(this.meta.data.d.a={},this.meta.data.d.s={},this.resetAxes());this.resetCorrelation(),e||(delete this.layoutConfig,this.draw({func:"desegregate",par:[t,e],prop:{segregateSamplesBy:this.segregateSamplesBy,segregateVariablesBy:this.segregateVariablesBy}}))}},this.desegregateVariables=function(t){this.isSegregatable()&&this.desegregate("Variables",t)},this.desegregateSamples=function(t){this.isSegregatable()&&this.desegregate("Samples",t)},this.desegregateVariablesSamples=function(t){this.isSegregatable()&&(this.segregateVariablesBy.length&&(this.segregateVariablesBy=[],this.desegregate("Variables",t)),this.segregateSamplesBy.length&&(this.segregateSamplesBy=[],this.desegregate("Samples",t)))},this.setScatterPlotMatrix=function(){if(this.graphType.match(/Scatter/)){var t,e,i,s,a,r=this,n=function(t){for(var e={y:{vars:[],smps:[],data:[]}},i=!(!r.data.z||!r.data.z.hasOwnProperty(r.scatterPlotMatrix))&&r.scatterPlotMatrix,s=!!i&&r.meta.data.z[r.scatterPlotMatrix].order,a=i?r.meta.data.z[r.scatterPlotMatrix].levels.length:1,n=r.getDataForSmpGrpAtIndex(t),o=0;o<n.length;o++)e.y.data.push([i?s[r.data.z[i][o]]:0,n[o]]),e.y.vars.push("Smp"+(o+1));return e.y.smps=[i||"Global",r.data.y.smps[t]],i&&(e.z={},e.z[i]=r.data.z[i]),{data:e,params:{xAxis:[i||"Global"],yAxis:[r.data.y.smps[t]],setMinX:-.5,setMaxX:a-.5,scatterType:"boxplot",graphOrientation:"vertical",scatterPlotMatrix:i||!0}}},o=this.scatterPlotMatrixType.match(/first/)?this.data.y.smps.length-1:this.data.y.smps.length,h=Math.ceil(Math.sqrt(o));if(this.data.l={},this.data.l.smps=[],this.data.l.weight=[],this.data.l.type=[],this.data.l.stype=[],this.data.l.data=[],this.data.l.group=!(!this.data.z||!this.data.z.hasOwnProperty(this.scatterPlotMatrix))&&this.scatterPlotMatrix,this.data.l.params=[],this.xAxisTemp=this.xAxisTemp||this.xAxis,this.xAxis=[],this.yAxisTemp=this.yAxisTemp||this.yAxis,this.yAxis=[],this.zAxisTemp=this.zAxisTemp||this.zAxis,this.zAxis=[],this.scatterPlotMatrixType.match(/first/)){t=1/(i=h),e=1/(s=h*(h-1)>=o?h-1:h),a=1;for(l=0;l<s;l++)for(c=0;c<i;c++){if(this.data.l.weight.push([t,e]),this.data.l.type.push(this.graphType),!this.data.y.smps[a]){this.data.l.smps.push({});break}this.data.l.smps.push({xAxis:[this.data.y.smps[0]],yAxis:[this.data.y.smps[a]]}),a++}}else{this.scatterPlotMatrixType.match(/all/)&&o++,t=1/(i=o),e=1/(s=o);for(var l=0;l<o;l++)for(var c=0;c<o;c++)if(this.data.l.weight.push([t,e]),this.data.l.type.push(this.scatterPlotMatrixType.match(/all/)&&l==o-1&&c!=o-1?"Boxplot":this.graphType),this.data.l.data.push(!1),this.data.l.params.push(!1),l==c)this.scatterPlotMatrixType.match(/all/)&&l==o-1?(this.data.l.smps.push({}),this.data.l.stype.push(!1)):this.scatterPlotMatrixType.match(/correlationHistogram/)?(this.data.l.smps.push({xAxis:[this.data.y.smps[c]],yAxis:[this.data.y.smps[l]]}),this.data.l.stype.push("Histogram")):this.scatterPlotMatrixType.match(/correlationDensity|all/)?(this.data.l.smps.push({xAxis:[this.data.y.smps[c]],yAxis:[this.data.y.smps[l]]}),this.data.l.stype.push("Density")):(this.data.l.smps.push({}),this.data.l.stype.push(!1));else if(this.scatterPlotMatrixType.match(/all/)&&l==o-1)this.data.l.smps.push({xAxis:[this.data.y.smps[c]],yAxis:[this.data.y.smps[l]]}),this.data.l.stype.push("Histogram");else if(this.scatterPlotMatrixType.match(/all/)&&c==o-1){this.data.l.smps.push(this.data.y.smps[l]),this.data.l.stype.push("Boxplot");var d=n(l);this.data.l.data[this.data.l.data.length-1]=d.data,this.data.l.params[this.data.l.params.length-1]=d.params}else this.scatterPlotMatrixType.match(/upper/)?c>l?(this.data.l.stype.push("Scatter2D"),this.data.l.smps.push({xAxis:[this.data.y.smps[c]],yAxis:[this.data.y.smps[l]]})):(this.data.l.stype.push(!1),this.data.l.smps.push({})):this.scatterPlotMatrixType.match(/lower/)?l>c?(this.data.l.stype.push("Scatter2D"),this.data.l.smps.push({xAxis:[this.data.y.smps[c]],yAxis:[this.data.y.smps[l]]})):(this.data.l.stype.push(!1),this.data.l.smps.push({})):this.scatterPlotMatrixType.match(/both/)?l!=c?(this.data.l.stype.push("Scatter2D"),this.data.l.smps.push({xAxis:[this.data.y.smps[c]],yAxis:[this.data.y.smps[l]]})):this.data.l.smps.push({}):c>l?(this.data.l.stype.push(!1),this.data.l.smps.push({})):(this.data.l.stype.push("Scatter2D"),this.data.l.smps.push({xAxis:[this.data.y.smps[c]],yAxis:[this.data.y.smps[l]]}))}this.layout=s+"X"+i,this.layoutComb=!0,this.showAnimationTemp=this.showAnimation,this.showAnimation=!1,this.isValidLayout()}},this.unsetScatterPlotMatrix=function(){if(this.graphType.match(/Scatter/)){if(this.xAxisTemp&&this.xAxisTemp.length>0&&(this.xAxis=this.xAxisTemp,this.xAxisTmp=[]),this.yAxisTemp&&this.yAxisTemp.length>0&&(this.yAxis=this.yAxisTemp,this.yAxisTmp=[]),this.zAxisTemp&&this.zAxisTemp.length>0&&(this.zAxis=this.zAxisTemp,this.zAxisTmp=[]),!this.xAxis||!this.yAxis){this.xAxis=[],this.yAxis=[],this.xAxisIndices=[],this.yAxisIndices=[],this.xAxis=[this.data.y.smps[0]];for(var t=1;t<this.data.y.smps.length;t++)this.yAxis.push(this.data.y.smps[t]);this.xAxisIndices=this.getSampleIndices(this.xAxis),this.yAxisIndices=this.getSampleIndices(this.yAxis),this.initializeAxis()}this.scatterPlotMatrix=!1,this.showAnimationTemp&&(this.showAnimation=this.showAnimationTemp),this.resetLayout(),this.isValidLayout()}},this.setMultiplePies=function(){if(this.graphType.match(/Pie/)){var t,e,i=this.xAxis.length;if(this.layout){var s=this.layout.split(/X/i);(t=parseInt(s[0]))*(e=parseInt(s[1]))<i&&(t=Math.ceil(Math.sqrt(i)),e=Math.floor(Math.sqrt(i)),this.layout=t+"X"+e)}else t=Math.ceil(Math.sqrt(i)),e=Math.floor(Math.sqrt(i)),this.layout=t+"X"+e;var a=1/t,r=1/e;delete this.layoutParams,delete this.data.l,this.data.l={},this.data.l.smps=[],this.data.l.weight=[],this.data.l.type=[];for(var n=0;n<i;n++)this.data.l.smps.push([this.xAxis[n]]),this.data.l.weight.push([r,a]),this.data.l.type.push(this.graphType);this.layoutComb=!0,this.showAnimationTemp=this.showAnimation,this.showAnimation=!1,this.isValidLayout()}},this.createPie=function(t,e){if(!this.isTransition()){var i=!!(this.groupingFactors&&this.groupingFactors.length>0)&&this.groupingFactors,s={data:{},smps:{}},a={y:{data:[],vars:[],smps:[],pie:[]}};if(CanvasXpress.cacheImagesReady){var r,n;i&&this.ungroupSamples(!0),this.isDOE?(r=this.dataStndBy.l.doe,n=this.isDOE>1?this.dataStndBy.z[t]:this.dataStndBy.x[t]):(r=this.smpIndices,n=this.data.x[t]);for(var o=0;o<r.length;o++){var h=n[r[o]];s.data[h]||(s.data[h]=0,s.smps[h]=[]),s.data[h]++,s.smps[h].push(r[o])}for(var o in a.y.smps.push(t),s.data)a.y.vars.push(o),a.y.data.push([s.data[o]]),a.y.pie.push(s.smps[o]);if(this.xAxis=!1,this.yAxis=!1,this.isDOE){if(this.graphType="Pie",e)return a;this.initializeData(a)}else this.dataStndBy=this.data,this.configStndBy=this.getConfig(),this.configStndBy.isPie=!1,this.data={},this.graphType="Pie",this.isPie=!0,this.isPieGroup=i,this.initializeData(a),this.removeMenus(),this.draw({func:"createPie",par:[t]})}else setTimeout((function(){that.createPie(t)}),200)}},this.removePie=function(t){if(!this.isTransition()){var e=this.isPieGroup;this.isPie=!1,this.isPieGroup=!1,this.removeMenus(),this.switchData(!1,!0),e?this.groupSamples(e,!1,!1,!1,t):t||this.draw({func:"removePie"})}},this.createBin2d=function(t){"bin2d"!=this.scatterType&&(this.scatterType="bin2d",this.removeMenus(),t||this.draw({func:"createBin2d"}))},this.removeBin2d=function(t){"bin2d"==this.scatterType&&(this.scatterType=!1,this.removeMenus(),this.meta.data.b={l:[],g:!1,c:!1},t||this.draw({func:"removeBin2d"}))},this.modifyContour=function(t,e){this.removeMenus(),this.isContour=t||!0,e||this.draw({func:"modifyContour",par:[t,e]})},this.isSkipContour=function(){if(this.layoutValid&&this.scatterPlotMatrix){var t=!!(this.dataStndBy&&this.dataStndBy.l&&this.dataStndBy.l.stype)&&this.dataStndBy.l.stype;if(null==this.layoutCurrent)return!0;if(t&&!t[this.layoutCurrent].toString().match(/Scatter2D/))return!0}return!1},this.getSetContour=function(){var t=this.meta.data.q;if(this.isContour){if(t.g.length&&(t.g[0].stat==this.contourStat&&t.b==this.contourColorScheme||(this.meta.data.q={l:{},g:[],b:!1},this.createContour(this.isContour,!0,!0),t=this.meta.data.q)),!0!==this.isContour&&this.graphType.match(/Scatter/)){var e=[this.xAxisIndices[0],this.yAxisIndices[0],this.layoutCurrent].join(":");return this.layoutValid?(t.l.hasOwnProperty(e)||this.createContour(this.isContour,!0),t.l[e]):(t.l[this.isContour]||this.createContour(this.isContour,!0),t.l[this.isContour])}if(this.graphType.match(/Scatter/)){e=[this.xAxisIndices[0],this.yAxisIndices[0]].join(":");return this.layoutValid?(t.l.hasOwnProperty(e)||this.createContour(!1,!0),t.l[e]):(t.g.length||this.createContour(!1,!0),t.g)}if("Heatmap"==this.graphType){if(this.layoutValid){e=this.layoutCurrent.toString();return t.l.hasOwnProperty(e)||this.createContour(!1,!0),t.l[e]}return t.g.length||this.createContour(!1,!0),t.g}}return!1},this.createContour=function(t,e,i){var s=this;this.removeMenus(),this.isContour=t||!0;var a=this.meta.data.q,r=this.layoutValid&&!1===this.layoutCurrent||i,n=0,o=function(t,e){if("ndensity"!=s.contourStat&&s.layoutValid&&!1!==s.layoutCurrent&&!0!==s.isContour&&s.graphType.match(/Scatter/)&&a.g.length)return a.g[0].data.colorBrew;switch(s.contourStat){case"density":return s.getColorBrew(s.getCustomColorScheme(t.length,s.contourColorScheme,!0),e[0],e[1],null,!1,!0);case"ndensity":return s.getColorBrew(s.getCustomColorScheme(t.length,s.contourColorScheme,!0),0,1,null,!1,!0);case"count":return s.getColorBrew(s.getCustomColorScheme(t.length,s.contourColorScheme,!0),0,e[1]*l(),null,!1,!0)}},h=function(t,e){var i=s.getAxisDataBySample([s[t+"AxisIndices"][0]],!1,e),a=t.toUpperCase();return s.setMinX||s.setMaxX||s.setMinY||s.setMaxY?(i.unshift(null!=s["setMin"+a]&&s["setMin"+a]<s[t+"AxisMin"]?s["setMin"+a]:s[t+"AxisMin"]),i.push(null!=s["setMax"+a]&&s["setMax"+a]>s[t+"AxisMax"]?s["setMax"+a]:s[t+"AxisMax"])):s.layoutValid&&(i.unshift(s[t+"AxisMin"]),i.push(s[t+"AxisMax"])),i},l=function(){return"ndensity"!=s.contourStat&&s.layoutValid&&!1!==s.layoutCurrent&&!0!==s.isContour&&s.graphType.match(/Scatter/)&&a.g.length?a.g[0].data.max:n},c=function(t){if("ndensity"!=s.contourStat&&s.layoutValid&&!1!==s.layoutCurrent&&!0!==s.isContour&&s.graphType.match(/Scatter/)&&a.g.length)return a.g[0].data.levels;var e=[];if(s.contourLevels.length)return s.contourLevels;var i=Number(s.contourLevelWidth),r=s[s.axisAlgorithm](t[0],t[1],s.contourLevelNumber),n=r[r.length-1],o=r[0];if(!i)return r.push(n+(r[1]-r[0])),r;for(;o<=n;)e.push(o),o+=i;return e.push(o+i),e},d=function(t,e,i,a){var r=[],n=t.length;e.length*n!=i.length&&(i=function(t){for(var e=[],i=h("x",t),a=h("y",t),r=h("z",t),n={},o=0;o<i.length;o++)n[i[o].toString()+":"+a[o].toString()]=r[o];i=s.unique(i).sort(),a=s.unique(a).sort();for(o=0;o<i.length;o++)for(var l=i[o].toString(),c=0;c<a.length;c++){var d=a[c].toString();n.hasOwnProperty(l+":"+d)?e.push(n[l+":"+d]):e.push(null)}return e}(a));for(var o=0;o<t.length;o++)for(var l=0;l<e.length;l++)r.push(i[o+l*n]);return r};if(!0!==this.isContour&&this.graphType.match(/Scatter/))for(var p=this.getLevelsByAnnotation(this.isContour,this.varIndices,"z"),g=0;g<p.length;g++){var u=this.getVariablesSamplesByAnnotationLevel(this.isContour,p[g],this.varIndices,"z");n=Math.max(n,u.length)}else n="Heatmap"==this.graphType?this.varIndices.length*this.smpIndices.length:this.varIndices.length;if(!0!==this.isContour&&this.graphType.match(/Scatter/)&&!r){if("Numeric"==this.meta.data.z[this.isContour].type)return this.isContour=!1,void alert("Contour by Numeric factor not allowed");var m=!!this.layoutValid&&[this.xAxisIndices[0],this.yAxisIndices[0],this.layoutCurrent].join(":");for(p=this.getLevelsByAnnotation(this.isContour,this.varIndices,"z"),g=0;g<p.length;g++){if(!((C=(u=this.getVariablesSamplesByAnnotationLevel(this.isContour,p[g],this.varIndices,"z")).length)<2))if("ScatterBubble2D"==this.graphType&&this.xAxisIndices&&this.yAxisIndices){var f=d(b=this.unique(h("x",u)).sort(),A=this.unique(h("y",u)).sort(),h("z",u),u),y=c(D=this.range(f)),x=this.filledContour(b,A,f,y),v=this.contour(b,A,f,y);(x||v)&&(m?(a.l.hasOwnProperty(m)||(a.l[m]=[]),a.l[m].push({name:p[g],data:{filled:x,lines:v,levels:y,colorBrew:o(y,D),range:D,n:C,max:l()}})):(a.l.hasOwnProperty(this.isContour)||(a.l[this.isContour]=[]),a.l[this.isContour].push({name:p[g],data:{filled:x,lines:v,levels:y,colorBrew:o(y,D),range:D,n:C,max:l()}})))}else if("Scatter2D"==this.graphType&&this.xAxisIndices&&this.yAxisIndices&&!this.isSkipContour()){var b=h("x",u),A=h("y",u),w=this.kde2d(b,A);y=c(D=this.range(w.z)),x=this.filledContour(w.x,w.y,w.z,y),v=this.contour(w.x,w.y,w.z,y);(x||v)&&(m?(a.l.hasOwnProperty(m)||(a.l[m]=[]),a.l[m].push({name:p[g],data:{filled:x,lines:v,kde2d:w,levels:y,colorBrew:o(y,D),range:D,n:C,max:l()}})):(a.l.hasOwnProperty(this.isContour)||(a.l[this.isContour]=[]),a.l[this.isContour].push({name:p[g],data:{filled:x,lines:v,kde2d:w,levels:y,colorBrew:o(y,D),range:D,n:C,max:l()}})))}}}else if("ScatterBubble2D"==this.graphType&&this.xAxisIndices&&this.yAxisIndices){m=!!this.layoutValid&&[this.xAxisIndices[0],this.yAxisIndices[0]].join(":"),f=d(b=this.unique(h("x")),A=this.unique(h("y")),h("z")),y=c(D=this.range(f)),x=this.filledContour(b,A,f,y),v=this.contour(b,A,f,y);var C=this.varIndices.length;(x||v)&&(m&&!r?(a.l.hasOwnProperty(m)||(a.l[m]=[]),a.l[m].push({name:this.data.y.smps[this.xAxisIndices[0]]+":"+this.data.y.smps[this.yAxisIndices[0]]+":"+this.data.y.smps[this.zAxisIndices[0]],data:{filled:x,lines:v,levels:y,colorBrew:o(y,D),range:D,n:C,max:l()}})):a.g.push({name:"Global",stat:this.contourStat,data:{filled:x,lines:v,levels:y,colorBrew:o(y,D),range:D,n:C,max:l()}}))}else if("Heatmap"==this.graphType){m=!!this.layoutValid&&this.layoutCurrent.toString(),b=this.varIndices,A=this.isGroupedData?this.grpIndices:this.smpIndices,C=this.varIndices.length*this.smpIndices.length;this.setRangeData();f=[];for(var T=0;T<A.length;T++)for(var S=0;S<b.length;S++)f.push(this.getDataAtPos(b[S],A[T])-this.minData);y=c(D=this.range(f)),x=this.filledContour(b,A,f,y),v=this.contour(b,A,f,y);(x||v)&&(m?(a.l.hasOwnProperty(m)||(a.l[m]=[]),a.l[m].push({name:m,data:{filled:x,lines:v,levels:y,colorBrew:o(y,D),range:D,n:C,max:l()}})):a.g.push({name:"Global",stat:this.contourStat,data:{filled:x,lines:v,levels:y,colorBrew:o(y,D),range:D,n:C,max:l()}}))}else if("Scatter2D"==this.graphType&&this.xAxisIndices&&this.yAxisIndices&&!this.isSkipContour()){m=!!this.layoutValid&&[this.xAxisIndices[0],this.yAxisIndices[0]].join(":"),b=h("x"),A=h("y"),w=this.kde2d(b,A),y=c(D=this.range(w.z)),x=this.filledContour(w.x,w.y,w.z,y),v=this.contour(w.x,w.y,w.z,y),C=this.varIndices.length;(x||v)&&(m&&!r?(a.l.hasOwnProperty(m)||(a.l[m]=[]),a.l[m].push({name:this.data.y.smps[this.xAxisIndices[0]]+":"+this.data.y.smps[this.yAxisIndices[0]],data:{filled:x,lines:v,kde2d:w,levels:y,colorBrew:o(y,D),range:D,n:C,max:l()}})):a.g.push({name:"Global",stat:this.contourStat,data:{filled:x,lines:v,kde2d:w,levels:y,colorBrew:o(y,D),range:D,n:C,max:l()}}))}if(a.l){var M=[];for(var m in a.l)for(g=a.l[m],T=0;T<g.length;T++){(v=g[T])&&v.data&&v.data.levels&&v.data.levels.length&&(M=M.concat(v.data.levels))}if(M.length){var D=s.range(M);a.b=this.contourColorScheme}}a.g.length&&(a.b=this.contourColorScheme),e||this.draw({func:"createContour",par:[t,e]})},this.removeContour=function(t){this.isContour&&(this.removeMenus(),this.isContour=!1,this.meta.data.q={l:{},g:[],b:!1},t||this.draw({func:"removeContour"}))},this.createHierarchy=function(t,e){var i=this,s=this.meta.data.x,a=this.colorBy&&s&&s.hasOwnProperty(this.colorBy),r=t&&s&&s.hasOwnProperty(t[0]),n=a?this.getCustomColorScheme(s[this.colorBy].colors.length):r?this.getCustomColorScheme(s[t[0]].colors.length):this.colors,o=a?s[this.colorBy].order:!!r&&s[t[0]].order;if(a&&(s[this.colorBy].colors=n),!e){var h=this.hierarchyVar?this.getVariableIndices(this.hierarchyVar):0;this.hierarchyVarIndex=h>=0?h:0,e=this.hierarchyVarIndex}var l=function(t,e){return o&&o.hasOwnProperty(t)?n[o[t]]:e||i.missingDataColor},c=function(s,a,r){if(s.length>0){if(t&&a+1<t.length){a++;for(var o=i.getSampleLevelsByAnnotation(t[a],s),h=[],p=0,g=0;g<o.length;g++){var u=l(o[g],r),m=i.getSamplesByAnnotationLevel(t[a],o[g],s),f=c(m,a,u);p+=f[1],h.push({name:o[g],idx:m,children:f[0],value:f[1],depth:a,color:u,tooltip:"<b>"+o[g]+"</b><br>"+i.formatNumber(f[1])+" ("+i.formatNumber(100*f[1]/d)+"%)"})}}else for(h=[],p=0,g=0;g<s.length;g++){var y=i.getDataAtPos(e,s[g]);p+=y,h.push({name:i.data.y.smps[s[g]],idx:[s[g]],value:y,depth:a+1,color:n[s[g]%n.length],tooltip:"<b>"+i.data.y.smps[s[g]]+"</b><br>"+i.formatNumber(y)+" ("+i.formatNumber(100*y/d)+"%)"})}return[h,p]}},d=this.sum(this.data.y.data[e],!0),p=c(this.smpIndices,-1);return[{name:"root",children:p[0],value:p[1],depth:-1,color:this.missingDataColor}]},this.createDOE=function(t,e,i){if(!this.isTransition()){this.configStndBy&&this.isDOE&&this.updateConfig(this.cloneObject(this.meta.config.user));var s,a,r,n,o,h,l=function(t,e){for(var i=[],s=0;s<A.length;s++)for(var a=0;a<A[s].length;a++)if(null==A[s][a]){for(var r=!1,n=s;n<s+e[0];n++)for(var o=a;o<a+e[1];o++)if(null!=A[n][o]||o>=y){r=!0;break}if(!r){i=[s,a];for(n=s;n<s+e[0];n++)for(o=a;o<a+e[1];o++)A[n][o]=t;return i}}return[0,0]},c=this.isHistogram?this.isCreateHistogram:!(!this.data.l||!this.data.l.histogram)&&this.data.l.histogram;this.data.l&&this.data.l.histogram||this.isHistogram&&this.removeHistogram(!0);var d=[],p=!!(this.groupingFactors&&this.groupingFactors.length>0)&&this.groupingFactors,g=this.plotByVariable?this.plotByVariable:!!this.configStndBy&&this.configStndBy.plotByVariable,u=this.initialGraphType||this.graphType,m="Map"==this.graphType&&this.configStndBy?this.configStndBy.colorBy:this.colorBy;p?this.ungroupSamples(!0,!1,!0):this.configStndBy&&this.configStndBy.groupingFactors&&(p=this.configStndBy.groupingFactors),this.resetFilters(),this.desegregateVariablesSamples(!0),u.match(/Scatter|Map/i)?(this.isDOE=2,s=this.varIndices,a=this.data.z,r=this.meta.data.z,n=this.data.y.smps):(this.data.x||this.extendedDOE)&&(this.isDOE=1,s=this.smpIndices,a=this.data.x,r=this.meta.data.x,n=this.data.y.vars);var f=Number(this.layout.split("X")[0]),y=Number(this.layout.split("X")[1]),x=f*y,v=this.getKeys(a);if(this.includeDOE.length<1){for(var b=0;b<v.length&&!(b>=this.maxDOENumber);b++)this.includeDOE.push(v[b]),d.push(-1);if(this.extendedDOE&&!c)for(b=0;b<n.length;b++)this.includeDOE.length<this.maxDOENumber&&(this.includeDOE.push(n[b]),d.push(b))}else for(b=0;b<this.includeDOE.length;b++)v.includes(this.includeDOE[b])?d.push(-1):1==this.isDOE?d.push(this.getVariableIndices(this.includeDOE[b])):2==this.isDOE&&d.push(this.getSampleIndices(this.includeDOE[b]));(1==x||e)&&(f=Math.ceil(Math.sqrt(this.includeDOE.length+1)),y=f*(f-1)>=this.includeDOE.length+1?f-1:f,this.layout=f+"X"+y);var A=[];for(b=0;b<f*y;b++){A[b]=[];for(var w=0;w<y;w++)A[b][w]=null}this.layoutTopology=this.layout,delete this.layoutParams,delete this.data.l,this.data.l={histogram:c},o=t&&t[0]&&t[0].size?t[0].size.split("X"):this.layoutConfig&&this.layoutConfig[0]&&this.layoutConfig[0].size?this.layoutConfig[0].size.split("X"):[1,1],o=[Number(o[0]),Number(o[1])],h=t&&t[0]&&t[0].graphType?t[0].graphType:this.layoutConfig&&this.layoutConfig[0]&&this.layoutConfig[0].graphType?this.layoutConfig[0].graphType:this.graphType,this.data.l.smps=[[s]],this.data.l.weight=[[o[1]/y,o[0]/f]],this.data.l.type=[h],this.data.l.doe=s,this.data.l.coords=[l(0,o)],this.data.l.extended=[-1];for(b=0;b<this.includeDOE.length;b++){var C=b+1;if(o=t&&t[C]&&t[C].size?t[C].size.split("X"):this.layoutConfig&&this.layoutConfig[C]&&this.layoutConfig[C].size?this.layoutConfig[C].size.split("X"):[1,1],o=[Number(o[0]),Number(o[1])],h=t&&t[C]&&t[C].graphType?t[C].graphType:!!(this.layoutConfig&&this.layoutConfig[C]&&this.layoutConfig[C].graphType)&&this.layoutConfig[C].graphType,this.data.l.coords[C]=l(C,o),this.data.l.smps.push([this.includeDOE[b]]),this.data.l.weight.push([o[1]/y,o[0]/f]),this.data.l.extended.push(d[b]),h)this.data.l.type.push(h);else if(d[b]>=0)this.data.l.type.push("Scatter2D");else if(r[this.includeDOE[b]]&&"Numeric"==r[this.includeDOE[b]].type)this.data.l.type.push("Scatter2D");else{var T=this.unique(a[this.includeDOE[b]]);this.data.l.type.push(T.length<this.maxPieSectors?"Pie":T.length<200?"Treemap":"Table")}}var S=this.getKeys(this.meta.config.user);CanvasXpress.graphTypes.CombinationLineGraphs.includes(this.graphType)&&S.push("xAxis","xAxis2","yAxis"),this.layoutComb=!0,this.plotByVariable=!1,this.isValidLayout(),this.dataStndBy=this.data,this.configStndBy=this.getConfig(S),this.configStndBy.groupingFactors=p,this.configStndBy.plotByVariable=g,this.configStndBy.histogramStat=this.histogramStat,this.configStndBy.stackBy=this.stackBy,this.configStndBy.dodgeBy=this.dodgeBy,this.configStndBy.lineBy=this.lineBy,this.configStndBy.summaryType=this.summaryType,this.configStndBy.colorBy=m,this.histogramStat="count",this.useOpenShapes=!1,this.showAnimation=!1,this.initialGraphType||(this.initialGraphType=this.graphType),this.title="",this.subtitle="",this.removeToolbar(),i||(this.removeMenus(),this.draw({func:"createDOE",par:[t,e,i]}))}},this.removeDOE=function(t){if(!this.isTransition()){var e=this.cloneObject(this.meta.config.user),i=!!this.configStndBy&&this.configStndBy.groupingFactors,s=!!this.data.l.histogram,a=!!this.data.l.histogram&&this.data.l.histogram.ridgeBy,r=!!this.data.l.histogram&&this.data.l.histogram.isAnnt;this.graphType=this.initialGraphType,this.isDOE=!1,this.isPie=!1,this.isPieGroup=!1,this.data.y.histogram||(this.isHistogram=!1,this.isCreateHistogram=!1),this.layoutValid=!1,this.removeMenus(),this.switchData(!1,!0),this.updateConfig(e),delete this.data.l,delete this.dataStndBy,delete this.configStndBy,this.layoutComb=!1,this.layoutModified=!1,this.isValidLayout(),this.removeToolbar(),s?(t||this.stack({func:"removeDOE",par:[t]}),this.ridgeBy=a,this.skipStack=!0,this.createHistogram(a||r),this.skipStack=!1):i?(t||this.stack({func:"removeDOE",par:[t]}),this.skipStack=!0,this.groupSamples(i,!1,!1,!1,t),this.skipStack=!1):t||this.draw({func:"removeDOE",par:[t]})}},this.updateDOE=function(t,e){if(this.isDOE)if(e){for(var i,s=1;s<this.data.l.smps.length;s++)if(this.data.l.smps[s][0]==t){i=s;break}this.data.l.smps.splice(i,1),this.data.l.comp.splice(i,1),this.data.l.type.splice(i,1),this.data.l.weight.splice(i,1),this.data.l.extended.splice(i,1),this.layoutConfig.splice(i,1)}else this.data.l.smps.push([t]),this.data.l.comp.push([]),this.data.l.type.push("Scatter2D"),this.data.l.weight.push(this.data.l.weight[0]),this.data.l.extended.push(t),this.layoutConfig.push({})},this.resetDOE=function(){if(!this.isTransition()){for(var t in this.configStndBy)this[t]=this.configStndBy[t];var e=this.isDOE>1?this.dataStndBy.y.vars.length:this.dataStndBy.y.smps.length,i=[];for(t=0;t<e;t++)i.push(t);this.dataStndBy.l.doe=i,delete this.dataStndBy.l.treemap,this.histogramStat="count",this.configStndBy.groupingFactors.length>0&&(this.layoutComb=!1,this.groupSamples(this.configStndBy.groupingFactors,!1,!1,!1,!0),this.layoutComb=!0),this.toDoFilter={},"Map"==this.graphType&&(this.setAllMapFeaturesVisible(),this.hideUnhideMapFeatures(this.hiddenMapFeatures,!0),this.hideUnhideMapFeatures(this.visibleMapFeatures,!1,this.visibleMapFeatures.length)),this.draw({func:"resetDOE"})}},this.createTreemap=function(t){if(!this.isTransition()){var e,i,s=!!(this.groupingFactors&&this.groupingFactors.length>0)&&this.groupingFactors,a={data:{},vars:{}},r={y:{data:[[]],vars:[],smps:[],treemap:[]}};s&&this.ungroupSamples(!0),this.isDOE?(e=this.dataStndBy.l.doe,i=this.isDOE>1?this.dataStndBy.z[t]:this.dataStndBy.x[t]):this.graphType.match(/Scatter/)?(e=this.varIndices,i=this.data.z[t]):(e=this.smpIndices,i=this.data.x[t]);for(var n=0;n<e.length;n++){var o=this.isDOE&&this.dataStndBy.l.treemap?this.dataStndBy.l.treemap:i[e[n]];a.data[o]||(a.data[o]=0,a.vars[o]=[]),a.data[o]++,a.vars[o].push(e[n])}for(var n in r.y.vars.push(t),a.data)r.y.smps.push(n),r.y.data[0].push(a.data[n]),r.y.treemap.push(a.vars[n]);this.isDOE?(this.graphType="Treemap",this.initializeData(r)):(this.dataStndBy=this.data,this.configStndBy=this.getConfig(),this.configStndBy.isTreemap=!1,this.data={},this.xAxis=!1,this.yAxis=!1,this.graphType="Treemap",this.isTreemap=!0,this.isTreemapGroup=s,this.initializeData(r),this.removeMenus(),this.draw({func:"createTreemap",par:[t]}))}},this.removeTreemap=function(t){if(!this.isTransition()){var e=this.isTreemapGroup;this.isTreemap=!1,this.isTreemapGroup=!1,this.removeMenus(),this.switchData(!1,!0),e?this.groupSamples(e,!1,!1,!1,t):t||this.draw({func:"removeTreemap"})}},this.createFish=function(){var t=function(e,i){return i>e.length&&alert("Cannot have a parent that does not exist in list. (p: "+e+", x: "+i+")"),i<0&&alert("Cannot have a value in parents of less than zero"),0==e[i-1]?0:t(e,e[i-1])+1},e=function(t,e){if(0==t)return 0;for(var i=[],r=0;r<s.length;r++)s[r]==t&&i.push(r);var n=0;for(r=0;r<i.length;r++)a[i[r]][e]>0&&n++;return n},i=this.fishTimepoints,s=this.fishParents,a=this.data.y.data;if(i.length)this.isNumeric(i)||alert("fishTimepoints must be array of numbers");else for(var r=0;r<this.data.y.smps.length;r++)i.push(r);var n=function(e){for(var i=[],s=1;s<=e.length;s++)i.push(t(e,s));return i}(s),o=function(t,e){for(var i=0;i<t[0].length;i++)for(var s=0;s<t.length;s++)for(var a=s+1;a<t.length;a++)e[a]==s+1&&(t[s][i]-=t[a][i]);return t}(this.cloneObject(a),s),h=function(t,e){for(var i=[],s=0;s<t[0].length;s++)i[s]=100;for(s=0;s<e.length;s++)if(0==e[s])for(var a=0;a<t[0].length;a++)i[a]-=t[s][a];return i}(this.cloneObject(a),s),l=[],c=[],d=[];!function(t,e){for(var i=0;i<t.length;i++){for(var s=0,a=0,r=0;r<t[i].length;r++)t[i][r]>0&&(0==s?s=r:a=r);if(s>0&a>0)for(r=s;r<=a;r++)0==t[i][r]&&(t[i][r]=Math.pow(.01,e[i]))}}(a,n);for(r=0;r<i.length;r++){for(var p=i[r],g=[],u=[],m=[],f=0;f<s.length;f++)g[f]=null,u[f]=null,m[f]=p;for(var y=[0];y.length>0;){var x=y[0],v=[];for(f=0;f<s.length;f++)s[f]==x&&v.push(f+1);y.shift();for(f=0;f<v.length;f++)y.push(v[f]);var b=0,A=h[r]/2;if(this.fishSeparateIndependentClones){A=0;var w=0;if(0==x){for(f=0;f<s.length;f++)0==s[f]&&w++;w>1&&h[r]>0&&(b=h[r]/(w+1))}}0!=x&&(A=u[x-1],b=o[x-1][r]/(e(x,r)+1));for(f=0;f<v.length;f++){var C=v[f]-1;0==a[C][r]?(m[C]=null,r>0&&a[C][r-1]>0&&(u[C]=A+b/2,g[C]=A+b/2,m[C]=p-.25)):(u[C]=A+b,A+=a[C][r],g[C]=A+b,A+=b)}}c.push(u),l.push(g),d.push(m)}c=this.transposeDataMatrix(c),l=this.transposeDataMatrix(l),d=this.transposeDataMatrix(d);for(r=0;r<c.length;r++)c[r]=c[r].filter((function(t){return null!==t})),l[r]=l[r].filter((function(t){return null!==t})),d[r]=d[r].filter((function(t){return null!==t}));return{nestLevel:n,innerSpace:o,outerSpace:h,ytop:l,ybtm:c,xpos:d}},this.createHistogram=function(t,e,i,s){if(!(this.isTransition()||this.dataStndBy&&this.isCreateHistogram&&!this.isDOE)){var a=function(e,i,s){var a=[],r=[],o=[],p=[],g=[],u=[],m={y:{data:[],vars:[],smps:[],histogram:[],cols:[],level:[],maxLevel:1,subLevel:[],values:[],density:[],global:!1}};if(e&&i&&null!=s){for(var f=e.histogram.count.length,y=e.histogram.size,x=e.histogram.breaks,v=e.histogram.fbreaks,b=x[0],A=x[x.length-1],w=i.length,C=0;C<f;C++){m.y.vars.push("Bin"+(C+1)+" ("+e.histogram.breaks[C]+" - "+e.histogram.breaks[C+1]+")"),m.y.data[C]=[],m.y.data[C][0]=x[C+1]-b,m.y.histogram[C]=[];for(var T=0;T<w;T++)m.y.histogram[C][T]=[]}m.y.smps.push("Bin"),m.y.maxLevel=i.length;var S=0;for(C=0;C<i.length;C++){var M=t?n.getVariablesSamplesByAnnotationLevel(t,i[C],n.varIndices,"z"):n.varIndices,D=0,k=0;u.push(s),g.push(C),m.y.smps.push(i[C]),a.push(i[C]);var L=[];for(T=0;T<f;T++)L[T]=0;for(T=0;T<M.length;T++){var I=n.getDataAtPos(M[T],n.smpIndices[s]);if(null!=I&&""!==I&&!isNaN(I)){var z=n.histBin(I,v);L[z]++,m.y.histogram[z][C].push(M[T]),D++}}r.push(D);for(T=0;T<f;T++)m.y.data[T][S+1]=L[T],k=Math.max(k,L[T]);m.y.cols.push(k),p.push(S),S++}for(C=0;C<r.length;C++)o.push(C);o.sort((function(t,e){return r[e]-r[t]}));var N={graphType:"Scatter2D",isHistogram:!0,isCreateHistogram:{min:b,max:A,rmin:b,rmax:A,size:y,transposed:d,groups:h,smpIndices:o,n:p,factor:t,colorBy:n.colorBy,ridgeBy:n.ridgeBy,isAnnt:c,transformed:l,level:g,maxLevel:i.length,subLevel:u},xAxis:["Bin"],yAxis:a,setMinX:null,setMaxX:null,setMinX2:null,setMaxX2:null,setMinY:null,setMaxY:null,setMinZ:null,setMaxZ:null,xAxisExact:!0,summaryType:"raw",histogramData:t,hideHistogram:!!n.scatterPlotMatrixType.match(/Density/),histogramType:"staggered",showHistogramDensity:!!n.scatterPlotMatrixType.match(/Density/),showFilledHistogramDensity:!0};return n.cloneObject({data:m,params:N})}return m};if(t){if(t&&"Scatter2D"==this.graphType&&this.meta.data&&this.meta.data.z&&this.meta.data.z[t]&&"Numeric"==this.meta.data.z[t].type&&!this.isDOE)return void this.flashInfoSpan(100,100,"Not allowed to create histograms with numerical factors",5e3);if(this.segregateVariablesBy.length+this.segregateSamplesBy.length>1)return void alert("Ooops!. Histograms on multiple levels of segregation not supported yet!");if(this.segregateVariablesBy.length&&this.segregateVariablesBy[0]!=t)return void alert("Ooops!. Histograms with a variable factor must match the corresponding segregation!");this.segregateSamplesBy.length&&this.segregateSamplesBy[0]}this.isDOE||(this.dataStndBy=this.data,this.configStndBy=this.getConfig(),this.configStndBy.isCreateHistogram=!1,this.configStndBy.isHistogram=!1);var r,n=this,o=0,h=this.groupingFactors,l=this.isTransformedData,c=t,d=this.smpIndices.length>this.varIndices.length&&!this.isDOE;if(d){var p=this.cloneObject(this.varIndices),g=this.cloneObject(this.smpIndices);this.transpose(!1,!0,!0),this.varIndices=g,this.smpIndices=p}if(!t&&this.segregateVariablesBy.length?t=this.segregateVariablesBy[0]:!t&&this.colorBy?t=this.colorBy:t||(t=!1),CanvasXpress.cacheImagesReady){if(!this.isDOE&&t&&this.data.x&&this.data.x.hasOwnProperty(t)&&alert("Not implemented.\nCreating Histogram by Sample!"),this.isDOE&&t){var u=this.dataStndBy.l.doe;if(i){var m=[];this.meta.data.d.z[t]={};for(var f=this.getLevelsByAnnotation(t,u,this.isDOE>1?"z":"x",!1,!0),y=0;y<f.length;y++)for(var x=this.getVariablesSamplesByAnnotationLevel(t,f[y],u,this.isDOE>1?"z":"x"),v=this.isDOE>1?this.data.y.smps:this.data.y.vars,b=0;b<v.length;b++){this.meta.data.d.z[t].hasOwnProperty(f[y])||(this.meta.data.d.z[t][f[y]]={});for(var A=[],w=0;w<x.length;w++){null==($=this.isDOE>1?this.getDataAtPos(x[w],b):this.getDataAtPos(b,x[w]))||""===$||isNaN($)||(A.push($),m.push($))}this.meta.data.d.z[t][f[y]][b.toString()]=this.density(A,t+" - "+f[y]+" - "+v[b]),o=Math.max(o,this.meta.data.d.z[t][f[y]][b.toString()].maxY)}for(y=0;y<f.length;y++)for(v=this.isDOE>1?this.data.y.smps:this.data.y.vars,b=0;b<v.length;b++)this.meta.data.d.z[t][f[y]][b.toString()].globalMaxY=o;r=this.density(m,"Global"),this.meta.data.d.m=r}else{var C;if(this.isDOE>1)if(this.dataStndBy.z&&this.dataStndBy.z.hasOwnProperty(t))C=this.dataStndBy.z[t];else{C=[];for(y=0;y<this.dataStndBy.y.vars.length;y++)C.push(this.dataStndBy.y.data[y][s])}else C=this.dataStndBy.x&&this.dataStndBy.x.hasOwnProperty(t)?this.dataStndBy.x[t]:this.dataStndBy.y.data[s];for(A=[],y=0;y<u.length;y++){null==($=C[u[y]])||""===$||isNaN($)||A.push($)}r=this.density(A,t),this.meta.data.d.d[t]=r}}else if(this.isDOE&&i){for(x=u=this.dataStndBy.l.doe,v=this.isDOE>1?this.data.y.smps:this.data.y.vars,m=[],y=0;y<v.length;y++){for(A=[],b=0;b<x.length;b++){null==($=this.isDOE>1?this.getDataAtPos(x[b],y):this.getDataAtPos(y,x[b]))||""===$||isNaN($)||(A.push($),m.push($))}r=this.density(A,v[y]),this.meta.data.d.s[y.toString()]=r,o=Math.max(o,this.meta.data.d.s[y.toString()].maxY)}for(y=0;y<v.length;y++)this.meta.data.d.s[y.toString()].globalMaxY=o;r=this.density(m,"Global"),this.meta.data.d.m=r}else{if(t&&this.data.z&&this.data.z.hasOwnProperty(t)){this.meta.data.d.z[t]={};f=this.getLevelsByAnnotation(t,this.varIndices,"z",!1,!0);if(this.scatterPlotMatrix)for(y=0;y<this.smpIndices.length;y++){m=[];this.meta.data.d.z[t][this.smpIndices[y].toString()]={};for(b=0;b<f.length;b++){for(x=this.getVariablesSamplesByAnnotationLevel(t,f[b],this.varIndices,"z"),A=[],w=0;w<x.length;w++){null==($=this.getDataAtPos(x[w],this.smpIndices[y]))||""===$||isNaN($)||(A.push($),m.push($))}this.meta.data.d.z[t][this.smpIndices[y].toString()][f[b]]=this.density(A,t+" - "+f[b]+" - "+this.data.y.smps[this.smpIndices[y]]),o=Math.max(o,this.meta.data.d.z[t][this.smpIndices[y].toString()][f[b]].maxY)}var T=a(r=this.density(m,t+this.data.y.smps[this.smpIndices[y]]),f,y);for(b=0;b<f.length;b++)T.data.y.density[b]=[t,this.smpIndices[y].toString(),f[b]],this.meta.data.d.z[t][this.smpIndices[y].toString()][f[b]].globalMaxY=o;r.data=T.data,r.params=T.params,this.meta.data.d.z[t][this.smpIndices[y].toString()][this.data.y.smps[this.smpIndices[y]]]=r}else{for(y=0;y<f.length;y++)for(x=this.getVariablesSamplesByAnnotationLevel(t,f[y],this.varIndices,"z"),b=0;b<this.smpIndices.length;b++){this.meta.data.d.z[t].hasOwnProperty(f[y])||(this.meta.data.d.z[t][f[y]]={});for(A=[],w=0;w<x.length;w++){null==($=this.getDataAtPos(x[w],this.smpIndices[b]))||""===$||isNaN($)||A.push($)}this.meta.data.d.z[t][f[y]][this.smpIndices[b].toString()]=this.density(A,t+" - "+f[y]+" - "+this.data.y.smps[this.smpIndices[b]]),o=Math.max(o,this.meta.data.d.z[t][f[y]][this.smpIndices[b].toString()].maxY)}for(y=0;y<f.length;y++)for(b=0;b<this.smpIndices.length;b++)this.meta.data.d.z[t][f[y]][this.smpIndices[b].toString()].globalMaxY=o}}else{for(y=0;y<this.smpIndices.length;y++){for(A=[],b=0;b<this.varIndices.length;b++){null==($=this.getDataAtPos(this.varIndices[b],this.smpIndices[y]))||""===$||isNaN($)||A.push($)}if(r=this.density(A,this.data.y.smps[y]),this.scatterPlotMatrix)(T=a(r,[this.data.y.smps[this.smpIndices[y]]],y)).data.y.density.push([this.smpIndices[y].toString()]),r.data=T.data,r.params=T.params;this.meta.data.d.s[this.smpIndices[y].toString()]=r,o=Math.max(o,this.meta.data.d.s[this.smpIndices[y].toString()].maxY)}for(y=0;y<this.smpIndices.length;y++)this.meta.data.d.s[this.smpIndices[y].toString()].globalMaxY=o}if(this.scatterPlotMatrix)return this.dataStndBy=this.data,this.configStndBy||(this.configStndBy=this.getConfig()),this.configStndBy.isCreateHistogram=!1,void(this.configStndBy.isHistogram=!1);for(A=[],y=0;y<this.smpIndices.length;y++)for(b=0;b<this.varIndices.length;b++){null==($=this.getDataAtPos(this.varIndices[b],this.smpIndices[y]))||""===$||isNaN($)||A.push($)}if(r=1!=this.smpIndices.length||t?this.density(A,"Global"):this.meta.data.d.s[this.smpIndices[0].toString()],this.meta.data.d.m=r,t&&this.data.z&&this.data.z.hasOwnProperty(t)&&f){this.meta.data.d.m.position={tot:[],max:0};for(y=0;y<r.xy.length;y++)this.meta.data.d.m.position.tot[y]=0;var S=[];for(y=0;y<f.length;y++){var M=f[y];for(b=0;b<this.smpIndices.length;b++){var D=this.approxStack(this.meta.data.d.z[t][M][this.smpIndices[b].toString()].xy,r.xy),k=[],L=[];for(w=0;w<r.xy.length;w++)k[w]=[r.xy[w][0],this.meta.data.d.m.position.tot[w]],this.meta.data.d.m.position.tot[w]+=D[w][1],L[w]=[r.xy[w][0],this.meta.data.d.m.position.tot[w]];this.meta.data.d.z[t][f[y]][this.smpIndices[b].toString()].stacked=L.concat(k.reverse()),S.push(this.cloneObject(D))}}var I=0;for(y=0;y<this.meta.data.d.m.position.tot.length;y++)I=Math.max(I,this.meta.data.d.m.position.tot[y]);this.meta.data.d.m.position.max=I,this.meta.data.d.m.position.factor=this.meta.data.d.m.histogram.maxY/I;var z=[];for(y=0;y<r.xy.length;y++)z[y]=0;for(y=0;y<f.length;y++)for(M=f[y],b=0;b<this.smpIndices.length;b++){for(D=S.shift(),k=[],L=[],w=0;w<r.xy.length;w++)k[w]=[r.xy[w][0],z[w]],z[w]+=this.meta.data.d.m.position.tot[w]>0?D[w][1]/this.meta.data.d.m.position.tot[w]:0,L[w]=[r.xy[w][0],z[w]];this.meta.data.d.z[t][f[y]][this.smpIndices[b].toString()].filled=L.concat(k.reverse()),this.meta.data.d.z[t][f[y]][this.smpIndices[b].toString()].position=this.meta.data.d.m.position}}}var N=[],B=[],P=[],R=[],O=[],X=[],F=r.histogram.count.length,_=r.histogram.size,E=r.histogram.breaks,V=r.histogram.fbreaks,H=E[0],G=E[E.length-1];v=this.isDOE&&t&&!i?1:this.isDOE&&t&&i?this.getLevelsByAnnotation(t,u,this.isDOE>1?"z":"x",!1,!0).length:f?f.length*this.smpIndices.length:this.smpIndices.length;(T=a()).y.global=r.histogram,T.y.position=r.position;for(y=0;y<F;y++){T.y.vars.push("Bin"+(y+1)+" ("+r.histogram.breaks[y]+" - "+r.histogram.breaks[y+1]+")"),T.y.data[y]=[],T.y.data[y][0]=E[y+1]-H,T.y.histogram[y]=[],T.y.values[y]=[];for(b=0;b<v;b++)T.y.histogram[y][b]=[],T.y.values[y][b]=[]}if(T.y.smps.push("Bin"),this.isDOE&&t){u=this.dataStndBy.l.doe;if(i){f=this.getLevelsByAnnotation(t,u,this.isDOE>1?"z":"x",!1,!0);T.y.maxLevel=f.length;var q=0;for(y=0;y<f.length;y++)for(x=this.getVariablesSamplesByAnnotationLevel(t,f[y],u,this.isDOE>1?"z":"x"),v=this.isDOE>1?this.data.y.smps:this.data.y.vars,b=0;b<v.length;b++){var j=1==v.length?f[y]:v[b]+":"+f[y],U=0,Y=0;T.y.smps.push(j),T.y.level.push(y),T.y.subLevel.push(b),O.push(y),X.push(b),N.push(j);var W=[];for(w=0;w<F;w++)W[w]=0;for(w=0;w<x.length;w++){if(null!=($=this.isDOE>1?this.getDataAtPos(x[w],b):this.getDataAtPos(b,x[w]))&&""!==$&&!isNaN($))W[Q=this.histBin($,V)]++,T.y.histogram[Q]&&T.y.histogram[Q][q]&&(T.y.histogram[Q][q].push(x[w]),T.y.values[Q][q].push($),U++)}B.push(U);for(w=0;w<F;w++)T.y.data[w][q+1]=W[w],Y=Math.max(Y,W[w]);T.y.cols.push(Y),T.y.density[q]=this.meta.data.d.z[t][f[y]][b.toString()],R.push(q),q++}}else{T.y.smps=["Bin",t],N=[t];for(y=0;y<F;y++)T.y.data[y][1]=r.histogram.count[y],T.y.histogram[y][0]=r.histogram.idxs[y];B=[1],R=[0],T.y.density[0]=r}}else if(this.isDOE&&i)for(x=u=this.dataStndBy.l.doe,v=this.isDOE>1?this.data.y.smps:this.data.y.vars,y=0;y<v.length;y++){U=0,Y=0;T.y.smps.push(v[y]),T.y.level.push(0),T.y.subLevel.push(y),O.push(0),X.push(y),N.push(v[y]);for(W=[],b=0;b<F;b++)W[b]=0;for(b=0;b<x.length;b++){if(null!=($=this.isDOE>1?this.getDataAtPos(x[b],y):this.getDataAtPos(y,x[b]))&&""!==$&&!isNaN($))W[Q=this.histBin($,V)]++,T.y.histogram[Q]&&T.y.histogram[Q][y]&&(T.y.histogram[Q][y].push(x[b]),T.y.values[Q][y].push($),U++)}B.push(U);for(b=0;b<F;b++)T.y.data[b][y+1]=W[b],Y=Math.max(Y,W[b]);T.y.cols.push(Y),T.y.density[y]=this.meta.data.d.s[y.toString()],R.push(y)}else if(f){T.y.maxLevel=f.length;for(q=0,y=0;y<f.length;y++){x=this.getVariablesSamplesByAnnotationLevel(t,f[y],this.varIndices,"z");for(b=0;b<this.smpIndices.length;b++){j=1==this.smpIndices.length?f[y]:this.data.y.smps[this.smpIndices[b]]+":"+f[y],U=0,Y=0;T.y.smps.push(j),T.y.level.push(y),T.y.subLevel.push(b),O.push(y),X.push(b),N.push(j);for(W=[],w=0;w<F;w++)W[w]=0;for(w=0;w<x.length;w++){if(null!=($=this.getDataAtPos(x[w],this.smpIndices[b]))&&""!==$&&!isNaN($))W[Q=this.histBin($,V)]++,T.y.histogram[Q]&&T.y.histogram[Q][q]&&(T.y.histogram[Q][q].push(x[w]),T.y.values[Q][q].push($),U++)}B.push(U);for(w=0;w<F;w++)T.y.data[w][q+1]=W[w],Y=Math.max(Y,W[w]);T.y.cols.push(Y),T.y.density[q]=this.meta.data.d.z[t][f[y]][this.smpIndices[b].toString()],R.push(q),q++}}}else{T.y.level.push(0),O.push(0);for(y=0;y<this.smpIndices.length;y++){U=0,Y=0;X.push(y),T.y.subLevel.push(y),T.y.smps.push(this.data.y.smps[this.smpIndices[y]]),N.push(this.data.y.smps[this.smpIndices[y]]);for(W=[],b=0;b<F;b++)W[b]=0;for(b=0;b<this.varIndices.length;b++){var $,Q;if(null!=($=this.getDataAtPos(this.varIndices[b],this.smpIndices[y]))&&""!==$&&!isNaN($))W[Q=this.histBin($,V)]++,T.y.histogram[Q]&&T.y.histogram[Q][y]&&(T.y.histogram[Q][y].push(this.varIndices[b]),T.y.values[Q][y].push($),U++)}B.push(U);for(b=0;b<F;b++)T.y.data[b][y+1]=W[b],Y=Math.max(Y,W[b]);T.y.cols.push(Y),T.y.density[y]=this.meta.data.d.s[this.smpIndices[y].toString()],R.push(y)}}for(y=0;y<B.length;y++)P.push(y);if(this.ridgeBy)if(this.showFilledHistogramDensity=!0,this.showHistogramDensity=!0,f.length!=P.length){var K=this.cloneObject(T.y.smps);K.shift(),P=P.sort((function(t,e){return K[t].split(":")[1].localeCompare(K[e].split(":")[1])||K[e].split(":")[0].localeCompare(K[t].split(":")[0])}))}else P.sort((function(t,e){return t-e}));(this.showHistogramDensity||"density"!=this.histogramStat)&&this.showHistogramDensity&&this.histogramStat;var J=!!i&&this.dataStndBy.l.histogram;this.data={},this.graphType="Scatter2D",this.isHistogram=!0,this.isCreateHistogram={min:H,max:G,rmin:H,rmax:G,size:_,transposed:J?J.transposed:d,groups:J?J.groups:h,smpIndices:P,n:R,factor:t,colorBy:this.colorBy,ridgeBy:J?J.ridgeBy:this.ridgeBy,isAnnt:c,transformed:J?J.transformed:l,level:O,maxLevel:f?f.length:1,subLevel:X,setMinX:null!=this.setMinX?this.setMinX-H:null,setMaxX:this.setMaxX,setMinY:this.setMinY,setMaxY:this.setMaxY},this.xAxis=["Bin"],this.xAxis2=[],this.yAxis=N,this.zAxis=[],this.resetRange(),this.xAxisExact=!0,this.initializeData(T),this.graphType="Scatter2D",this.isDOE||(this.removeMenus(),e||this.draw({func:"createHistogram",par:[t,e,i]}))}else setTimeout((function(){n.createHistogram(t)}),200)}},this.removeHistogram=function(t,e){if(!this.isTransition()){var i=this.isCreateHistogram.transposed,s=this.isCreateHistogram.groups,a=this.densityKernel,r=this.showHistogramDensity,n=this.hideHistogram,o=this.showHistogramPath,h=this.bandwidthAdjust,l=this.densityPosition,c=this.histogramBins,d=this.histogramBinWidth,p=this.histogramType,g=this.histogramStat,u=this.histogramDensityFillTransparency,m=this.histogramAsDotplot,f=this.histogramStackRatio,y=this.histogramStackDir,x=this.histogramRight,v=this.histogramLowest;this.removeMenus(),this.switchData(!1,!0,e),this.ridgeBy=!1;var b=this.segregateVariablesBy,A=this.segregateSamplesBy;if(this.densityKernel=a,this.showHistogramDensity=r,this.hideHistogram=n,this.showHistogramPath=o,this.bandwidthAdjust=h,this.densityPosition=l,this.histogramBins=c,this.histogramBinWidth=d,this.histogramType=p,this.histogramStat=g,this.histogramDensityFillTransparency=u,this.histogramAsDotplot=m,this.histogramStackRatio=f,this.histogramStackDir=y,this.histogramRight=x,this.histogramLowest=v,i){this.transpose(!1,!0,!0);var w=this.varDendrogramNewick;this.varDendrogramNewick=this.smpDendrogramNewick,this.smpDendrogramNewick=w}this.segregateVariablesAndOrSamples(b,A,!0),s&&s.length>0?this.groupSamples(s,!1,!1,!1,t):t||this.draw({func:"removeHistogram",par:[t]})}},this.createCorrelation=function(t){if(!this.isTransition()){var e=this.meta.data.c;if(this.scatterPlotMatrix)if(t&&this.data.z&&this.data.z.hasOwnProperty(t)){e.z[t]={};for(var i=this.getLevelsByAnnotation(t,this.varIndices,"z"),s=0;s<this.smpIndices.length;s++)for(var a=s+1;a<this.smpIndices.length;a++){var r=this.data.y.smps[this.smpIndices[s]]+"::"+this.data.y.smps[this.smpIndices[a]],n=this.data.y.smps[this.smpIndices[a]]+"::"+this.data.y.smps[this.smpIndices[s]];e.z[t][r]=[],e.z[t][n]=[];for(var o=0;o<i.length;o++){for(var h=this.getVariablesSamplesByAnnotationLevel(t,i[o],this.varIndices,"z"),l=!!(i[o]&&this.meta.data.z&&this.meta.data.z[t].colors)&&this.meta.data.z[t].order,c=l?this.meta.data.z[t].colors[l[i[o]]]:this.confidenceIntervalColor,d=[],p=[],g=0;g<h.length;g++){var u=this.data.y.data[h[g]][this.smpIndices[s]],m=this.data.y.data[h[g]][this.smpIndices[a]];null==u||""===u||isNaN(u)||null==m||""===m||isNaN(m)||(d.push(u),p.push(m))}var f={cor:this.correlation(d,p),lab:i[o],col:c,id:!!i[o]&&"Property:"+t+":"+i[o]+":z",n:d.length};e.z[t][r].push(f),e.z[t][n].push(f)}}}else for(s=0;s<this.smpIndices.length;s++)for(a=s+1;a<this.smpIndices.length;a++){for(r=this.data.y.smps[this.smpIndices[s]]+"::"+this.data.y.smps[this.smpIndices[a]],n=this.data.y.smps[this.smpIndices[a]]+"::"+this.data.y.smps[this.smpIndices[s]],d=[],p=[],o=0;o<this.varIndices.length;o++){u=this.data.y.data[this.varIndices[o]][this.smpIndices[s]],m=this.data.y.data[this.varIndices[o]][this.smpIndices[a]];null==u||""===u||isNaN(u)||null==m||""===m||isNaN(m)||(d.push(u),p.push(m))}f={cor:this.correlation(d,p),lab:"Correlation",col:this.foreground,id:!1,n:d.length};e.s[r]=[f],e.s[n]=[f]}}},this.correlateData=function(t,e,i,s){if(!this.isTransition()){if(this.graphType.match(/Scatter/i))this.isCorrelateS=!0,this.isCorrelateKeyS=e,this.isCorrelateColorS=i,this.addRegressionLine(e,i,s);else{this.dataStndBy=this.data,this.configStndBy=this.getConfig();var a=this.groupingFactors;e&&(t?this.switchAnnotationToVar(e):this.switchAnnotationToSmp(e));var r=t?this.data.y.vars:this.data.y.smps;this.graphType="Scatter2D",this.axesType="XY",a&&this.ungroupSamples(!0),t&&(this.transpose(!1,!0),this.graphType="Scatter2D"),this.xAxis=[r[0]],this.xAxisTitle=r[0],this.xAxisIndices=[0],this.yAxis=[r[1]||r[0]],this.yAxisTitle=r[1]||r[0],this.yAxisIndices=r[1]?[1]:[0],this.showAnimation=!1,this.addRegressionLine(!1,i,!0),this.isCorrelate=!0,this.isCorrelateTranspose=t,this.isCorrelateGroup=a,this.isCorrelateKey=e,this.isCorrelateColor=i,this.draw({noImages:!0,func:"correlateData",par:[t,e,i,s]})}this.removeMenus()}},this.removeCorrelation=function(t){if(this.removeMenus(),!this.isTransition())if(this.isCorrelate){this.decorations&&this.decorations.reg&&delete this.decorations.reg,this.data.l&&this.data.l.reg&&delete this.data.l.reg;var e=this.cloneObject(this.segregateVariablesBy),i=this.cloneObject(this.segregateSamplesBy),s=this.isCorrelateTranspose;this.switchData(!1,!0),this.isCorrelateTranspose&&this.transpose(!1,!1,!0),this.isCorrelateKey&&(this.isCorrelateTranspose?this.switchVarToAnnotation(this.isCorrelateKey):this.switchSmpToAnnotation(this.isCorrelateKey)),(e.length||i.length)&&(s?e.length?(this.segregateVariablesBy=i,this.segregate("Samples",e[0],!0)):(this.segregateSamplesBy=e,this.segregate("Variables",i[0],!0)):e.length?(this.segregateVariablesBy=e,this.segregate("Samples",i[0],!0)):(this.segregateSamplesBy=i,this.segregate("Variables",e[0],!0))),t||(this.isCorrelateGroup.length?this.groupSamples(this.isCorrelateGroup):this.draw({func:"removeCorrelation"})),this.isCorrelate=!1,this.isCorrelateTranspose=!1,this.isCorrelateGroup=!1,this.isCorrelateKey=!1,this.isCorrelateColor=!1}else this.isCorrelateS=!1,this.isCorrelateKeyS=!1,this.isCorrelateColorS=!1,this.decorations&&this.decorations.reg&&delete this.decorations.reg,this.data.l&&this.data.l.reg&&delete this.data.l.reg,t||this.draw({func:"removeCorrelation"})},this.resetCorrelation=function(){if(this.isCorrelateS){var t=this.isCorrelateKeyS,e=this.isCorrelateColorS;this.removeCorrelation(),this.correlateData(!1,t,e,!0)}else this.decorations&&this.decorations.reg&&this.updateCorrelation()},this.updateCorrelation=function(){if(!this.ridgeBy){var t=!1;this.decorations&&this.decorations.reg&&(t=this.decorations.reg[0].factor,delete this.decorations.reg),this.layoutValid||!this.meta.data.c.p.length?this.addRegressionLine(t,!1,!0):this.addRegressionLine(this.meta.data.c.p[0],this.meta.data.c.p[1],!0)}},this.addRegressionLine=function(t,e,i){if(!this.isTransition()&&!this.isCreateHistogram){var s,a,r,n,o,h,l,c,d,p,g,u=this;if(CanvasXpress.cacheImagesReady){if(this.graphType.match(/Scatter/)){if(this.isDOE);else{var m,f=[],y=[];if(t){y=this.getVarSmpAnnotations(t,this.varIndices,!1,!1,"z"),this.meta.data.z&&this.meta.data.z[t]&&this.meta.data.z[t].levels&&this.meta.data.z[t].levels.length==y.length&&(y=this.cloneObject(this.meta.data.z[t].levels));for(var x=0;x<y.length;x++)f.push(this.getVariablesSamplesByAnnotationLevel(t,y[x],this.varIndices,"z"))}else f=[this.varIndices];if(this.layoutValid)if(this.data.l.reg=[],this.data.l.smps)for(x=0;x<this.data.l.smps.length;x++)if(this.data.l.reg[x]=[],(d=this.data.l.smps[x]).xAxis&&d.yAxis){s=this.getSampleIndices(d.xAxis[0]),a=this.getSampleIndices(d.yAxis[0]),l=this.data.y.smps[s]+" vs "+this.data.y.smps[a];for(var v=0;v<f.length;v++)p=!!(y[v]&&this.meta.data.z&&this.meta.data.z[t].colors)&&this.meta.data.z[t].order,m=e||(p?this.meta.data.z[t].colors[p[y[v]]]:this.fitLineColor),c=e||(p?this.meta.data.z[t].colors[p[y[v]]]:this.confidenceIntervalColor),r=this.getDataForSmpGrpAtIndex(s,f[v]),n=this.getDataForSmpGrpAtIndex(a,f[v]),o=this.regression(r,n),h=this.correlation(r,n),this.data.l.reg[x][v]={reg:o,cor:h,lab:l,fit:m,col:c,id:!!y[v]&&"Property:"+t+":"+y[v]+":z",n:r.length,factor:t}}else this.data.l.reg[x]=!1;else for(x=0;x<this.data.l.comp.length;x++){this.data.l.reg[x]=[],s=this.xAxisIndices[0],a=this.yAxisIndices[0],l=this.data.y.smps[s]+" vs "+this.data.y.smps[a];for(v=0;v<f.length;v++){if(p=!!(y[v]&&this.meta.data.z&&this.meta.data.z[t].colors)&&this.meta.data.z[t].order,m=e||(p?this.meta.data.z[t].colors[p[y[v]]]:this.fitLineColor),c=e||(p?this.meta.data.z[t].colors[p[y[v]]]:this.confidenceIntervalColor),t){r=[],n=[];for(var b=0;b<this.data.l.comp[x].length;b++)g=this.data.l.comp[x][b],this.data.z[t][g]==y[v]&&(r.push(this.getDataAtPos(g,s)),n.push(this.getDataAtPos(g,a)))}else{r=[],n=[];for(b=0;b<this.data.l.comp[x].length;b++)g=this.data.l.comp[x][b],r.push(this.getDataAtPos(g,s)),n.push(this.getDataAtPos(g,a))}o=this.regression(r,n),h=this.correlation(r,n),this.data.l.reg[x][v]={reg:o,cor:h,lab:l,fit:m,col:c,id:!!y[v]&&"Property:"+t+":"+y[v]+":z",n:r.length,factor:t}}}else{this.meta.data.c.p=[t,e],this.xAxisIndices||(this.xAxisIndices=this.getSampleIndices(this.xAxis)),this.yAxisIndices||(this.yAxisIndices=this.getSampleIndices(this.yAxis));var A="Y"==this.axesType?[this.xAxisIndices[this.xAxisCurrent]]:this.xAxisIndices,w="X"==this.axesType?[this.yAxisIndices[this.yAxisCurrent]]:this.yAxisIndices,C=Math.max(A.length,w.length);for(x=0;x<f.length;x++){p=!!(y[x]&&this.meta.data.z&&this.meta.data.z[t].colors)&&this.meta.data.z[t].order;for(v=0;v<C;v++)m=e||(p?this.meta.data.z[t].colors[p[y[x]]]:this.fitLineColor),c=e||(p?this.meta.data.z[t].colors[p[y[x]]]:this.confidenceIntervalColor),s=A[v]?A[v]:A[0],a=w[v]?w[v]:w[0],l=y[x]?y[x]:this.data.y.smps[s]+" vs "+this.data.y.smps[a],r=this.getDataForSmpGrpAtIndex(s,f[x],!1,this.xAxisTransform),n=this.getDataForSmpGrpAtIndex(a,f[x],!1,this.yAxisTransform),o=this.regression(r,n),h=this.correlation(r,n),this.addRegressionDecoration(o,h,l,c,m,!!y[x]&&"Property:"+t+":"+y[x]+":z",r.length,t)}}}i||this.draw({func:"addRegressionLine",par:[t,e,i]}),this.removeMenus()}}else setTimeout((function(){u.addRegressionLine(t,e,i)}),100)}},this.addRegressionDecoration=function(t,e,i,s,a,r,n,o){this.showDecorations=!0,this.decorations||(this.decorations={}),this.decorations.reg||(this.decorations.reg=[]),this.decorations.reg.push({slope:t[0],intercept:t[1],cor:t[2],ci:t[3],label:i,color:s,fit:a,id:r,n:n,factor:o,r:e})},this.addNormalDistributionLine=function(t,e){if(!this.isTransition()){var i,s,a,r,n,o,h,l,c,d,p,g=this;if(CanvasXpress.cacheImagesReady){if(this.graphType.match(/Scatter/)){if("XYZ"==this.axesType)a="y"==t?this.yAxisIndices[this.yAxisCurrent]:this.xAxisIndices[this.xAxisCurrent],r="y"==t?this.xAxisIndices[this.xAxisCurrent]:this.yAxisIndices[this.yAxisCurrent],n=this.getDataForSmpGrpAtIndex(a),o=this.getDataForSmpGrpAtIndex(r),h=this.max(o),c=this.data.y.smps[a],l=this.meanStandardDeviationN(n),this.addNormalDistributionDecoration(l,h,c,this.foreground,t);else{i="y"==t?this.yAxisIndices:this.xAxisIndices,s="y"==t?this.xAxisIndices:this.yAxisIndices,p="y"==t?this.xAxisCurrent:this.yAxisCurrent;for(var u=0;u<i.length;u++)d=u%this.colors.length,a=i[u],r=s[u]?s[u]:s[p],n=this.getDataForSmpGrpAtIndex(a),o=this.getDataForSmpGrpAtIndex(r),h=this.max(o),c=this.data.y.smps[a],l=this.meanStandardDeviationN(n),this.addNormalDistributionDecoration(l,h,c,this.colors[d],t)}e||this.draw({func:"addNormalDistributionLine",par:[t,e]})}}else setTimeout((function(){g.addNormalDistributionLine(t)}),100)}},this.addNormalDistributionDecoration=function(t,e,i,s,a){this.showDecorations=!0,this.decorations||(this.decorations={}),this.decorations.nor||(this.decorations.nor=[]),a&&"y"==a?this.decorations.nor.push({mu:t[0],sigma:t[1],yAxis:!0,max:e,label:i,color:s}):this.decorations.nor.push({mu:t[0],sigma:t[1],max:e,label:i,color:s})},this.addQQPlot=function(t){if(!this.isTransition()){var e,i,s,a,r,n;this.isQQ=!0,this.scatterType="qq";var o={g:[],l:[],i:[]};if(this.colorBy&&this.meta.data.z[this.colorBy]&&this.meta.data.z[this.colorBy].colors){var h=this.getVariableLevelsByAnnotation(this.colorBy),l=this.meta.data.z[this.colorBy];if(this.layoutValid){var c=this.data.y.smps;for(p=0;p<c.length;p++){e=p;for(var d=0;d<h.length;d++)i=this.getVariablesByAnnotationLevel(this.colorBy,h[d]),s=l.colors[l.order[h[d]]],a=this.qqnorm(this.getDataForSmpGrpAtIndex(e,i),i),r=c[e]+":"+h[d],n="Property:"+this.colorBy+":"+h[d]+":z",o.l[p]||(o.l[p]=[]),o.l[p].push({color:s,data:a,label:r,id:n}),o.i.push(r)}}else{e=this.yAxisIndices[0];for(var p=0;p<h.length;p++)i=this.getVariablesByAnnotationLevel(this.colorBy,h[p]),s=l.colors[l.order[h[p]]],a=this.qqnorm(this.getDataForSmpGrpAtIndex(e,i),i),r=this.data.y.smps[e]+":"+h[p],n="Property:"+this.colorBy+":"+h[p]+":z",o.g.push({color:s,data:a,label:r,id:n}),o.i.push(r)}}else if(this.layoutValid)for(c=this.data.y.smps,p=0;p<c.length;p++)e=p,s=this.colors[0],a=this.qqnorm(this.getDataForSmpGrpAtIndex(e),this.varIndices),r=this.data.y.smps[e],n=this.data.y.smps[e],o.l[p]||(o.l[p]=[]),o.l[p].push({color:s,data:a,label:r,id:n}),o.i.push(r);else e=this.yAxisIndices[0],s=this.colors[0],a=this.qqnorm(this.getDataForSmpGrpAtIndex(e),this.varIndices),r=this.data.y.smps[e],n=this.data.y.smps[e],o.g.push({color:s,data:a,label:r,id:n}),o.i.push(r);this.meta.data.p=o,t||(this.removeMenus(),this.draw({func:"addQQPlot",par:[t]}))}},this.checkQQPlot=function(){if(this.isQQ){var t=[];if(this.colorBy){var e=this.getVariableLevelsByAnnotation(this.colorBy);if(this.layoutValid){var i=this.data.y.smps;for(r=0;r<i.length;r++){a=r;for(var s=0;s<e.length;s++)t.push(i[a]+":"+e[s])}}else for(var a=this.yAxisIndices[0],r=0;r<e.length;r++)t.push(this.data.y.smps[a]+":"+e[r])}else if(this.layoutValid)for(i=this.data.y.smps,r=0;r<i.length;r++)t.push(this.data.y.smps[r]);else t.push(this.data.y.smps[0]);this.isSameObject(t,this.meta.data.p.i)||this.addQQPlot(!0)}},this.removeQQPlot=function(t){this.isQQ=!1,this.scatterType=!1,t||(this.removeMenus(),this.draw({func:"removeQQPlot",par:[t]}))},this.addCDFPlot=function(t){if(!this.isTransition()){var e,i,s,a,r,n;this.isCDF=!0,this.scatterType="cdf";var o={g:[],l:[],i:[]};if(this.colorBy&&this.meta.data.z[this.colorBy]&&this.meta.data.z[this.colorBy].colors){var h=this.getVariableLevelsByAnnotation(this.colorBy),l=this.meta.data.z[this.colorBy];if(this.layoutValid){var c=this.data.y.smps;for(p=0;p<c.length;p++){e=p;for(var d=0;d<h.length;d++)i=this.getVariablesByAnnotationLevel(this.colorBy,h[d]),s=l.colors[l.order[h[d]]],a=this.cdf(this.getDataForSmpGrpAtIndex(e,i),i),r=c[e]+":"+h[d],n="Property:"+this.colorBy+":"+h[d]+":z",o.l[p]||(o.l[p]=[]),o.l[p].push({color:s,data:a,label:r,id:n}),o.i.push(r)}}else{e=this.xAxisIndices[0];for(var p=0;p<h.length;p++)i=this.getVariablesByAnnotationLevel(this.colorBy,h[p]),s=l.colors[l.order[h[p]]],a=this.cdf(this.getDataForSmpGrpAtIndex(e,i),i),r=this.data.y.smps[e]+":"+h[p],n="Property:"+this.colorBy+":"+h[p]+":z",o.g.push({color:s,data:a,label:r,id:n}),o.i.push(r)}}else if(this.layoutValid)for(c=this.data.y.smps,p=0;p<c.length;p++)e=p,s=this.colors[0],a=this.cdf(this.getDataForSmpGrpAtIndex(e),this.varIndices),r=this.data.y.smps[e],n=this.data.y.smps[e],o.l[p]||(o.l[p]=[]),o.l[p].push({color:s,data:a,label:r,id:n}),o.i.push(r);else e=this.xAxisIndices[0],s=this.colors[0],a=this.cdf(this.getDataForSmpGrpAtIndex(e),this.varIndices),r=this.data.y.smps[e],n=this.data.y.smps[e],o.g.push({color:s,data:a,label:r,id:n}),o.i.push(r);this.meta.data.p=o,t||(this.removeMenus(),this.draw({func:"addCDFPlot",par:[t]}))}},this.checkCDFPlot=function(){if(this.isCDF){var t=[];if(this.colorBy){var e=this.getVariableLevelsByAnnotation(this.colorBy);if(this.layoutValid){var i=this.data.y.smps;for(r=0;r<i.length;r++){a=r;for(var s=0;s<e.length;s++)t.push(i[a]+":"+e[s])}}else for(var a=this.xAxisIndices[0],r=0;r<e.length;r++)t.push(this.data.y.smps[a]+":"+e[r])}else if(this.layoutValid)for(i=this.data.y.smps,r=0;r<i.length;r++)t.push(this.data.y.smps[r]);else t.push(this.data.y.smps[0]);this.isSameObject(t,this.meta.data.p.i)||this.addCDFPlot(!0)}},this.removeCDFPlot=function(t){this.isCDF=!1,this.scatterType=!1,t||(this.removeMenus(),this.draw({func:"removeCDFPlot",par:[t]}))},this.addKMPlot=function(t){if(!this.isTransition()){var e,i,s,a,r,n,o;this.isKM=!0,this.scatterType="km";for(var h=":"+this.confidenceLevel+":"+this.confidenceIntervalType+":"+this.invertCensored+":"+this.showConfidenceIntervals,l=this.data.y.smps,c={g:[],l:[],i:[]},d=[],p=0;p<this.yAxisIndices.length;p++)this.xAxisIndices.length==this.yAxisIndices.length?d.push([this.xAxisIndices[p],this.yAxisIndices[p]]):d.push([this.xAxisIndices[0],this.yAxisIndices[p]]);var g=!!this.isDOE&&this.data.l.doe;if(this.colorBy){var u=this.getVariableLevelsByAnnotation(this.colorBy),m=this.meta.data.z[this.colorBy];if(!this.layoutValid||this.isDOE)for(p=0;p<d.length;p++){e=d[p][0],i=d[p][1];for(var f=0;f<u.length;f++)(s=this.getVariablesByAnnotationLevel(this.colorBy,u[f],g)).length&&(a=m.colors[m.order[u[f]]],r=this.kaplanMeier(this.getDataForSmpGrpAtIndex(e,s),this.getDataForSmpGrpAtIndex(i,s)),n=l[e]+":"+l[i]+":"+u[f]+h,o="Property:"+this.colorBy+":"+u[f]+":z",c.g.push({color:a,data:r,label:n,id:o})),c.i.push(n)}else for(p=0;p<d.length;p++){e=d[p][0],i=d[p][1];for(f=0;f<u.length;f++)(s=this.getVariablesByAnnotationLevel(this.colorBy,u[f])).length&&(a=m.colors[m.order[u[f]]],r=this.kaplanMeier(this.getDataForSmpGrpAtIndex(e,s),this.getDataForSmpGrpAtIndex(i,s)),n=l[e]+":"+l[i]+":"+u[f]+h,o="Property:"+this.colorBy+":"+u[f]+":z",c.l[p]||(c.l[p]=[]),c.l[p].push({color:a,data:r,label:n,id:o})),c.i.push(n)}}else if(!this.layoutValid||this.isDOE)for(p=0;p<d.length;p++)e=d[p][0],i=d[p][1],a=this.colors[p],r=this.kaplanMeier(this.getDataForSmpGrpAtIndex(e,g),this.getDataForSmpGrpAtIndex(i,g)),n=l[e]+":"+l[i]+":"+h,o="Series:"+d[p][0]+":"+d[p][1],c.g.push({color:a,data:r,label:n,id:o}),c.i.push(n);else for(p=0;p<d.length;p++)e=d[p][0],i=d[p][1],a=this.colors[p],r=this.kaplanMeier(this.getDataForSmpGrpAtIndex(e),this.getDataForSmpGrpAtIndex(i)),n=l[e]+":"+l[i]+":"+h,o="Series:"+d[p][0]+":"+d[p][1],c.l[p]||(c.l[p]=[]),c.l[p].push({color:a,data:r,label:n,id:o}),c.i.push(n);this.meta.data.p=c,t||(this.removeMenus(),this.draw({func:"addQQPlot",par:[t]}))}},this.checkKMPlot=function(){if(this.isKM){for(var t,e,i=[],s=":"+this.confidenceLevel+":"+this.confidenceIntervalType+":"+this.invertCensored+":"+this.showConfidenceIntervals,a=this.data.y.smps,r=!!(this.isDOE&&this.data.l.doe.length!=this.varIndices.length||!this.isDOE&&this.varIndices.length!=this.data.y.vars.length),n=[],o=0;o<this.yAxisIndices.length;o++)this.xAxisIndices.length==this.yAxisIndices.length?n.push([this.xAxisIndices[o],this.yAxisIndices[o]]):n.push([this.xAxisIndices[0],this.yAxisIndices[o]]);if(this.colorBy){var h=this.getVariableLevelsByAnnotation(this.colorBy);if(!this.layoutValid||this.isDOE)for(o=0;o<n.length;o++){t=n[o][0],e=n[o][1];for(var l=0;l<h.length;l++)i.push(a[t]+":"+a[e]+":"+h[l]+s)}else for(o=0;o<n.length;o++){t=n[o][0],e=n[o][1];for(l=0;l<h.length;l++)i.push(a[t]+":"+a[e]+":"+h[l]+s)}}else if(!this.layoutValid||this.isDOE)for(o=0;o<n.length;o++)t=n[o][0],e=n[o][1],i.push(a[t]+":"+a[e]+":"+s);else for(o=0;o<n.length;o++)t=n[o][0],e=n[o][1],i.push(a[t]+":"+a[e]+":"+s);if(!this.isSameObject(i,this.meta.data.p.i)||r)return this.addKMPlot(!0),!0}},this.removeKMPlot=function(t){this.isKM=!1,this.scatterType=!1,t||(this.removeMenus(),this.draw({func:"removeKMPlot",par:[t]}))},this.modifyKaplanMeier=function(){this.isKM?this.removeKMPlot():this.isValidLayout&&this.isKM?this.addKMPlot():alert("Ooops. No, no can't do!")},this.updateKaplanMeier=function(){this.isKM&&this.checkKMPlot()&&(this.removeMenus(),this.draw({func:"updateKaplanMeier",prop:{isKM:this.isKM}}))},this.addMeanLine=function(t,e,i,s){for(var a=0,r=0,n=0;n<this.varIndices.length;n++)for(var o=this.varIndices[n],h=0;h<this.smpIndices.length;h++){var l=this.smpIndices[h],c=this.data.y.data[o][l];isNaN(c)||(a+=c,r++)}this.addLineDecoration(!1,!1,!1,!1,t,e,a/r,"Mean",i,s),this.draw({func:"addMeanLine",par:[t,e,i]})},this.addLineDecoration=function(t,e,i,s,a,r,n,o,h,l){this.graphType.match(/Scatter|Network|Genome|Correlation|Venn|Circular/)?this.graphType.match(/Scatter/)&&this.decorations.line.push({x:t,y:e,x2:i,y2:s,type:a||"line",color:r||this.foreground,label:o||!1,align:h||"left",width:l||1}):(this.decorations||(this.decorations={}),this.decorations.lines||(this.decorations.line=[]),a&&"solid"==a&&(a="line"),this.decorations.line.push({type:a||"line",color:r||this.foreground,value:n||0,label:o||!1,align:h||"left",width:l||1}))},this.binDataByPercentile=function(t,e){var i=this.range(this.data.y.data[t]);this.data.x||(this.data.x={});var s=this.data.y.vars[t]+" Percentile"+(e?"":" Category");this.data.x[s]=[];for(var a=0;a<this.data.y.data[t].length;a++){var r=this.data.y.data[t][a];if(isNaN(r)||""===r||null==r)this.data.x[s][a]="";else{var n=this.parseInt(this.percentile(i[0],i[1],r)/10);10==n&&n--,this.data.x[s][a]=e?n+1:10*n+"-"+10*(n+1)+"%"}}this.isGroupedData&&this.ungroupSamples(!0),this.updateData(this.data,!1,!0),this.groupSamples([s]),this.sortSamplesByCategory([s]),this.removeMenus()},this.binDataByQuantile=function(t,e){var i=this.quantile(this.data.y.data[t],[.25,.5,.75]);this.data.x||(this.data.x={});var s=this.data.y.vars[t]+" Quantile"+(e?"":" Category");this.data.x[s]=[];for(var a=0;a<this.data.y.data[t].length;a++){var r=this.data.y.data[t][a];if(isNaN(r)||""===r||null==r)this.data.x[s][a]="";else{var n=this.quantileBin(i,r);this.data.x[s][a]=e?n+1:0==n?"1st Quantile":1==n?"2nd Quantile":2==n?"3rd Quantile":"4th Quantile"}}this.isGroupedData&&this.ungroupSamples(!0),this.updateData(this.data,!1,!0),this.groupSamples([s]),this.sortSamplesByCategory([s]),this.removeMenus()},this.binDataCustom=function(t,e){this.addBinConfigurator(t,e),this.removeMenus()},this.switchData=function(t,e,i){this.dataStndBy&&this.configStndBy&&(this.data=this.dataStndBy,this.scatterPlotMatrix||(i?i.push("colorScheme"):i=["colorScheme"],this.resetConfig(i)),this.setTheme(),this.updateConfig(this.configStndBy),this.updateData(this.data,t,e),this.layoutComb=this.isLayoutComb())},this.updateData=function(t,e,i,s){if(delete this.data.initialVarIndices,delete this.data.initialSmpIndices,s)for(var a in s)this.meta.config.user[a]=s[a],this[a]=s[a];if(this.isObject(t))if(-1==("string"==typeof t.data&&"URL"==this.isValidString(t.data).type||t.config&&"Map"==t.config.graphType?t.data:-1))this.initializeData(t,!this.scatterPlotMatrix);else{for(var r=this.$("container-"+this.target),n=1;!r;)r=this.$("container-"+this.target+"-"+n),n++;var o,h=r.id;if(h.match(/\d*$/)){var l=Number(h.split("-").pop())+1;o=h.replace(/\d*$/,l).replace("container-","")}else o=this.newId(h);this.target!=o&&(CanvasXpress.chain[this.target]=o);var c=r.parentNode,d=this.$cX("canvas",{id:o,width:this.originalWidth,height:this.originalHeight});this.castCanvasAttributes(d),c.appendChild(d),t&&t.data?n=new CanvasXpress({renderTo:o,data:t.data,config:s||t.config}):(t.renderTo=o,n=new CanvasXpress(t)),n.destroy(h.replace("container-",""))}else this.initializeData(t,!this.scatterPlotMatrix);i||this.initializeGraph(e)},this.appendMetaData=function(t,e){if(t.y){if(t.y.smps&&t.y.smps.length&&t.x){for(var i in t.x){this.data.x||(this.data.x={}),this.data.x.hasOwnProperty(i)||(this.data.x[i]=[]);for(var s=0;s<t.y.smps.length;s++){(a=this.getSampleIndices(t.y.smps[s]))>-1&&(this.data.x[i][a]=t.x[i][s])}}this.updateMetaData("x",!1,!1,!0)}if(t.y.vars&&t.y.vars.length&&t.z){for(var i in t.z){this.data.z||(this.data.z={}),this.data.z.hasOwnProperty(i)||(this.data.z[i]=[]);for(s=0;s<t.y.vars.length;s++){var a;(a=this.getVariableIndices(t.y.vars[s]))>-1&&(this.data.z[i][a]=t.z[i][s])}}this.updateMetaData("z",!1,!1,!0)}CanvasXpress.stack[this.target].data=this.parseJSON(this.stringifyJSON(this.data))}else if(e){for(var r=2;this.data.y.hasOwnProperty("data"+r);)r++;this.data.y["data"+r]=t,CanvasXpress.stack[this.target].data=this.parseJSON(this.stringifyJSON(this.data))}},this.modifyDOE=function(t,e){if(!this.isTransition()){var i=!0;if(e)this[t]=e,i=!1;else{var s=!1;if(this.getObjectArray(this.includeDOE).hasOwnProperty(t)){for(var a=[],r=0;r<this.includeDOE.length;r++)this.includeDOE[r]!=t&&a.push(this.includeDOE[r]);this.includeDOE=a}else this.includeDOE.push(t),s=!0;this.includeDOE.length>=this.maxDOENumber+1&&s?(this.layout="1X1",this.layoutTopology=!1,this.maxDOENumber++):this.includeDOE.length<this.maxDOENumber+1&&(this.layout="1X1",this.layoutTopology=!1,this.maxDOENumber--)}this.createDOE(!1,i,!0),this.draw({func:"modifyDOE",par:[t,e]})}},this.updateDOEGraphType=function(t,e){e||(e=this.layoutCurrent),this.layoutConfig[e]||(this.layoutConfig[e]={}),this.layoutConfig[e].graphType=t,this.removeMenus(),this.draw({func:"updateDOEGraphType",par:[t,e],prop:{layoutCurrent:e}})},this.updateDOEAxis=function(t,e){var i=this.layoutCurrent;this.layoutConfig[i]||(this.layoutConfig[i]={}),this.layoutConfig[i][t+"Axis"]=e,"x"==t&&null==this.layoutConfig[i].yAxis?this.layoutConfig[i].yAxis=this.data.l.smps[i][0]:"y"==t&&null==this.layoutConfig[i].xAxis&&(this.layoutConfig[i].xAxis=this.data.l.smps[i][0]),this.removeMenus(),this.draw({func:"updateDOEAxis",par:[t,e],prop:{layoutCurrent:this.layoutCurrent}})},this.updateDOEGraphSize=function(t,e,i){if(e||(e=this.layoutCurrent),i)for(var s in i)this[s]=i[s];var a=e||0;this.layoutConfig[a]||(this.layoutConfig[a]={}),this.layoutConfig[a].size=t,this.createDOE(!1,!1,!0),this.draw({func:"updateDOEGraphSize",par:[t,e,i],prop:{layoutCurrent:a}}),this.layoutCurrent=a},this.modifyHistogram=function(){if(this.isHistogram){var t=this.isCreateHistogram.factor;this.removeHistogram(!0),this.createHistogram(t)}},this.modifySampleSegregation=function(t){var e={},i=this.segregateSamplesBy,s=this.segregateVariablesBy;this.layoutTopology&&(this.layoutTopologyCurrent=this.layoutTopology.split(/X/i)),this.layoutTopology=!1;for(var a=0;a<this.segregateSamplesBy.length;a++)e[this.segregateSamplesBy[a]]=!0;e[t]?delete e[t]:e[t]=!0,this.segregateSamplesBy=this.getKeys(e),s.length&&this.segregateSamplesBy.length&&this.isHistogram?(this.removeMenus(),this.segregateSamplesBy=i,alert("Only one segregation factor is allowed while Histogram is set")):this.validateSegregation()?(e=this.segregateSamplesBy,this.segregateSamplesBy=[],this.segregateSamples(e,!1,!0)):this.segregateSamplesBy=i},this.modifyVariableSegregation=function(t){var e={},i=this.segregateVariablesBy,s=this.segregateSamplesBy;this.layoutValid&&!this.isDOE&&this.isOneDimensionalGraph()&&this.meta.config.user.graphType&&this.meta.config.user.graphType!=this.graphType&&(this.graphType=this.meta.config.user.graphType),this.layoutTopology&&(this.layoutTopologyCurrent=this.layoutTopology.split(/X/i)),this.layoutTopology=!1;for(var a=0;a<this.segregateVariablesBy.length;a++)e[this.segregateVariablesBy[a]]=!0;e[t]?delete e[t]:e[t]=!0,this.segregateVariablesBy=this.getKeys(e),s.length&&this.segregateVariablesBy&&this.isHistogram?(this.removeMenus(),this.segregateVariablesBy=i,alert("Only one segregation factor is allowed while Histogram is set")):this.validateSegregation()?(e=this.segregateVariablesBy,this.segregateVariablesBy=[],this.segregateVariables(e,!1,!0)):this.segregateVariablesBy=i},this.modifyLayoutType=function(t){var e=this.scatterPlotMatrix;this.removeMenus(),this.showScatterPlotMatrixLabels=!0,this.unsetScatterPlotMatrix(),this.scatterPlotMatrixType=t,this.scatterPlotMatrix=!0!==e?e:!this.colorBy||this.colorBy,this.draw({func:"modifyLayoutType",par:[t]})},this.modifySummaryType=function(t){if(this.summaryType!=t)if(this.isGroupedData){var e=this.groupingFactors;this.ungroupSamples(!0),this.summaryType=t,this.meta.config.user.summaryType=t,this.groupSamples(e)}else this.summaryType=t,this.draw({func:"modifySummaryType",par:[t]})},this.modifyTransform=function(e){v=e.shift(),t=e[0],this.transform(t)},this.modifyTransformRatio=function(t,e){"sample"==t?this.ratioSampleReference==e?(this.ratioSampleReference=!1,this.transform("reset")):(this.ratioSampleReference=e,this.transform("ratio")):"group"==t?(this.ratioGroupReference==e?(this.ratioLevelReference=!1,this.ratioGroupReference=!1,this.transform("reset")):(this.ratioGroupReference=e,this.ratioLevelReference=!1,this.transform("ratio")),this.removeMenus()):"level"==t&&(this.transform("reset"),this.ratioLevelReference==e?this.ratioLevelReference=!1:this.ratioLevelReference=e,this.transform("ratio"))},this.modifySampleGroups=function(t){var e={};if(this.data.x){for(var i=0;i<this.groupingFactors.length;i++)e[this.groupingFactors[i]]=!0;e[t]?delete e[t]:e[t]=!0,this.groupSamples(this.getKeys(e))}},this.modifyTreemapGroups=function(t){if(!this.isTransition()){for(var e={},i=0;i<this.treemapBy.length;i++)e[this.treemapBy[i]]=!0;e[t]?delete e[t]:e[t]=!0,this.treemapBy=this.getKeys(e),this.draw({func:"modifyTreemapGroups",par:[t]})}},this.modifyNetworkDecorations=function(t){var e={};if(this.meta.data.nodes){for(var i=0;i<this.decorations.length;i++)e[this.decorations[i]]=!0;e[t]?delete e[t]:e[t]=!0,e=this.getKeys(e).sort(),this.isSameObject(this.decorations,e)||(this.decorations=e,this.draw({func:"modifyNetworkDecorations",par:[t]}))}},this.modifyVariableOverlays=function(t){if(!this.isTransition()){var e={};if("Heatmap"==this.graphType&&this.data.z){for(var i=0;i<this.varOverlays.length;i++)e[this.varOverlays[i]]=!0;e[t]?delete e[t]:e[t]=!0,this.varOverlays=this.getKeys(e),this.draw({func:"modifyVariableOverlays",par:[t]})}}},this.modifySampleOverlays=function(t){if(!this.isTransition()){var e={};if(this.data.x){for(var i=0;i<this.smpOverlays.length;i++)e[this.smpOverlays[i]]=!0;e[t]?delete e[t]:e[t]=!0,this.smpOverlays=this.getKeys(e),this.draw({func:"modifySampleOverlays",par:[t]})}}},this.resetDendrograms=function(){delete this.varDendrogram,delete this.smpDendrogram},this.showHideDendrogram=function(t){this.isTransition()||(this[t]?this[t]=!1:this[t]=!0,this.draw({func:"showHideDendrogram",par:[t]}))},this.changeDendrogramPosition=function(t){"left"==this[t]?this[t]="right":"right"==this[t]?this[t]="left":"top"==this[t]?this[t]="bottom":"bottom"==this[t]&&(this[t]="top")},this.resetLegendPosition=function(t){this.isTransition()||(this.resetLegends(!0),t||this.draw({func:"resetLegendPosition",par:[t]}))},this.modifyColorScheme=function(){this.isTransition()||(this.setColorScheme(),this.resetMetaData(),this.draw({func:"modifyColorScheme",prop:{colorScheme:this.colorScheme}}))},this.modifyColorSpectrumZeroValue=function(t){this.isTransition()||(this.colorSpectrumZeroValue=parseFloat(t[0]),this.setColorBrew(!0),this.resetMetaData(),this.draw({func:"modifyColorSpectrumZeroValue",par:[t]}))},this.modifyColorSpectrum=function(t){if(this.removeMenus(),!this.isTransition()){if(this.colorSpectrum.includes(t)){if(2==this.colorSpectrum.length)return void alert("Ooops... Can't do... Need at least two colors!");this.colorSpectrum=this.removeFromArray(t,this.colorSpectrum)}else this.colorSpectrum.push(t);this.setColorBrew(!0),this.resetMetaData(),this.draw({func:"modifyColorSpectrum",par:[t]})}},this.modifyColorSpectrumByScheme=function(t){if(this.removeMenus(),!this.isTransition()){var e=this.colorSpectrumTarget;if(CanvasXpress.colorSchemes[t][e])this.colorSpectrum=CanvasXpress.colorSchemes[t][e];else{var i=this.getKeys(CanvasXpress.colorSchemes[t]);if(i.sort((function(t,e){return t-e})),e>i[i.length-1])for(e--;!CanvasXpress.colorSchemes[t][e];)e--;else for(e++;!CanvasXpress.colorSchemes[t][e];)e++;this.colorSpectrum=CanvasXpress.colorSchemes[t][e]}this.setColorBrew(!0),this.resetMetaData(),this.draw({func:"modifyColorSpectrumByScheme",par:[t]})}},this.changeTheme=function(t,e){this.isTransition()||t&&(CanvasXpress.themes.hasOwnProperty(t)||t.match(/lastAirBender|gameOfThrones/))&&(delete this.layoutRestore,t.match(/lastAirBender/)?(this.colorScheme=this.capitalize(t),this.updateTheme(CanvasXpress.themes.lastAirBender)):t.match(/gameOfThrones/)?(this.colorScheme=this.capitalize(t),this.updateTheme(CanvasXpress.themes.gameOfThrones)):this.updateTheme(CanvasXpress.themes[t]),this.theme=t,this.setColorScheme(),this.resetMetaData(!0),this.updateDecorationScheme(),e||this.draw({func:"changeTheme",par:[t,e]}))},this.updateDecorationScheme=function(){if(this.graphType.match(/Scatter/))if(this.layoutValid){if(this.data.l)if(this.data.l.reg)for(var t=0;t<this.data.l.reg.length;t++)for(var e=0;e<this.data.l.reg[t].length;e++){var i=(o=this.data.l.reg[t][e].id.split(":"))[1],s=o[2],a=o[3],r=this.meta.data[a][i].order,n=this.meta.data[a][i].colors[r[s]];this.data.l.reg[t][e].fit!=this.fitLineColor&&(this.data.l.reg[t][e].fit=n),this.data.l.reg[t][e].col!=this.confidenceIntervalColor&&(this.data.l.reg[t][e].col=n)}else if(this.decorations&&this.decorations.kaplanMeier)for(t=0;t<this.decorations.kaplanMeier.length;t++)this.decorations.kaplanMeier[t].color=this.colors[t%this.colors.length]}else if(this.decorations)if(this.decorations.reg){for(t=0;t<this.decorations.reg.length;t++)if(this.decorations.reg[t].id){var o;i=(o=this.decorations.reg[t].id.split(":"))[1],s=o[2],a=o[3],r=this.meta.data[a][i].order,n=this.meta.data[a][i].colors[r[s]];this.decorations.reg[t].fit!=this.fitLineColor&&(this.decorations.reg[t].fit=n),this.decorations.reg[t].color!=this.confidenceIntervalColor&&(this.decorations.reg[t].color=n)}}else if(this.decorations.kaplanMeier)for(t=0;t<this.decorations.kaplanMeier.length;t++)this.decorations.kaplanMeier[t].color=this.colors[t%this.colors.length]},this.modifyColorProperties=function(t,e,i,s){if(!this.isTransition()){this.modifyColorPropertiesOverlays(t,e,i);var a=this.meta.data[i][e];if("Numeric"==a.type){var r=a.colorBrew.spectrum;this.validateColor(t)&&r.push(t),a.colorBrew=this.getColorBrew(r,a.rmin,a.rmax)}else{var n=a.levels.length;if(CanvasXpress.colorSchemes[t][n])a.colors=CanvasXpress.colorSchemes[t][n];else{var o=this.getKeys(CanvasXpress.colorSchemes[t]);if(o.sort((function(t,e){return t-e})),n>o[o.length-1])for(n--;!CanvasXpress.colorSchemes[t][n];)n--;else for(n++;!CanvasXpress.colorSchemes[t][n];)n++;a.colors=CanvasXpress.colorSchemes[t][n]}}s||this.draw({func:"modifyColorProperties",par:[t,e,i,s]})}},this.modifyColorPropertiesOverlays=function(t,e,i){if(this.isOneDimensionalGraph()){var s=this.meta.data[i][e];if("Numeric"==s.type){var a=s.colorBrew.spectrum;this.validateColor(t)&&a.push(t),"x"==i?(this.smpOverlayProperties||(this.smpOverlayProperties={}),this.smpOverlayProperties.hasOwnProperty(e)||(this.smpOverlayProperties[e]={}),this.smpOverlayProperties[e].spectrum=a):"z"==i&&(this.varOverlayProperties||(this.varOverlayProperties={}),this.varOverlayProperties.hasOwnProperty(e)||(this.varOverlayProperties[e]={}),this.varOverlayProperties[e].spectrum=a)}else CanvasXpress.colorSchemes.hasOwnProperty(t)&&("x"==i?(this.smpOverlayProperties||(this.smpOverlayProperties={}),this.smpOverlayProperties.hasOwnProperty(e)||(this.smpOverlayProperties[e]={}),this.smpOverlayProperties[e].scheme=t):"z"==i&&(this.varOverlayProperties||(this.varOverlayProperties={}),this.varOverlayProperties.hasOwnProperty(e)||(this.varOverlayProperties[e]={}),this.varOverlayProperties[e].scheme=t))}},this.setFont=function(t){var e=this;t=this.isArray(t)?t:[t],CanvasXpress.loadFonts(t,(function(){e.fontName=t[0],e.draw({func:"setFont",par:[t],prop:{layoutCurrent:e.iSDOE?e.layoutCurrent:0}})}))},this.toggleAttribute=function(t,e,i,s){if(!this.isTransition()){if(this.isDOE)return this.layoutConfig[this.layoutCurrent][t]=!this[t],void(s||this.draw({func:"toggleAttribute",par:[t,e,i,s]}));this[t]=!this[t],this.layoutValid&&this.layoutRestore.hasOwnProperty(t)&&(this.layoutRestore[t]=this[t]),e?(this.stack({func:"toggleAttribute",par:[t]}),this[e](i)):this.draw({func:"toggleAttribute",par:[t,e,i,s]})}},this.increaseDecreaseAttribute=function(t,e,i){t&&e&&(this[t]="decrease"==e?this[t]-i:this[t]+i,this.draw({func:"increaseDecreaseAttribute",par:[t,e,i]}))},this.changeAttributeNoDraw=function(t,e){t&&e&&(this[t]=e,this.noDraw({func:"changeAttributeNoDraw",par:[t,e]}))},this.changeAttribute=function(t,e,i,s,a,r){if(!this.isTransition()){var n=e;if(CanvasXpress.doc.P[t]&&CanvasXpress.doc.P[t].O&&"false"!=CanvasXpress.doc.P[t].O[0]?n=e:"boolean"==typeof e||this.hasOwnProperty(t)?n=!(this[t]&&this[t]==e&&!i)&&(this[t]&&this[t]==e&&i?i:e):t&&e&&(n=e),this.layoutValid&&"graphType"==t&&!this.isDOE)for(var o=0;o<this.data.l.type.length;o++)this.data.l.type[o]=n;if(this.layoutValid&&this.layoutRestore&&!this.isDOE&&delete this.layoutRestore,(this.layoutValid||{graphType:!0}.hasOwnProperty(t))&&this.removeMenus(),this.isDOE)return this.layoutConfig[this.layoutCurrent][t]=n,"sortType"==t&&(this.layoutConfig[this.layoutCurrent].sortDir?this.layoutConfig[this.layoutCurrent].sortDir="ascending"==this.layoutConfig[this.layoutCurrent].sortDir?"descending":"ascending":this.layoutConfig[this.layoutCurrent].sortDir=this.sortDir),void(r||this.draw({func:"changeAttribute",par:[t,e,i,s,a,r],prop:{layoutCurrent:this.iSDOE?this.layoutCurrent:0}}));if(t&&"fontName"==t&&!CanvasXpress.fonts.hasOwnProperty(e))return this.setFont(e);t&&"ridgeBy"==t&&this.resetRidgeBy(),this[t]=n,"summaryType"==t&&this.isGroupedData&&this.regroupSamples(),s?(this.stack({func:"changeAttribute",par:[t,e,i]}),this[s](a)):this.draw({func:"changeAttribute",par:[t,e,i,s,a,r],prop:{layoutCurrent:this.iSDOE?this.layoutCurrent:0}})}},this.changeTextColorAttribute=function(t,e){this.updateTextColorAttribute(t,this.$(e).value)},this.updateTextColorAttribute=function(t,e){if(!this.isTransition()){var i=t[0],s=t[1],a=t[2];i?CanvasXpress.doc.P[i]&&"integer"==CanvasXpress.doc.P[i].T?this[i]=""!==e?parseInt(e):null:CanvasXpress.doc.P[i]&&"float"==CanvasXpress.doc.P[i].T?this[i]=""!==e?parseFloat(e):null:"height"==t||"width"==t?(e=Number(e)+18,a||(a=[e])):(this[i]=e,i.match(/[xyz]AxisTitle$/)&&(this[i+"Dynamic"]=!1)):a.unshift(e),this.layoutValid&&this.layoutRestore.hasOwnProperty(i)&&(this.layoutRestore[i]=this[i]),s?this[s](a):(this.setColorBrew(!0),this.ridgeBy||this.isContour||this.resetMetaData(),this.draw({func:"updateTextColorAttribute",par:[t,e]}))}},this.setFontAttributeStyle=function(t,e){if(!this.isTransition()){var i=this[t];"bold"==e?this[t].match(e)?this[t]=this[t].replace("bold",""):this[t]="italic"==i?"bold italic":"bold":"italic"==e?this[t].match(e)?this[t]=this[t].replace("italic",""):this[t]="bold"==i?"bold italic":"italic":(this[t]=this[t].replace("bold italic",""),this[t]=this[t].replace("bold",""),this[t]=this[t].replace("italic","")),this.draw({func:"setFontAttributeStyle",par:[t,e]})}},this.setFontAttributeSize=function(t,e){this.isTransition()||(this[t]="increase"==e?1.1*this[t]:this[t]/1.1,this.draw({func:"setFontAttributeSize",par:[t,e]}))},this.changeVariableInAxis=function(t,e){if(!this.isTransition()){if(this.xAxis&&this.xAxis2){var i=this.getObjectArray(this.xAxis),s=this.getObjectArray(this.xAxis2);if("xAxis"==e)if(s[t]){if(!(this.xAxis2.length>1))return alert("Cannot remove "+t+" from X-Axis 2"),void this.removeMenus();this.removeVariablesFromAxis([t],"xAxis2"),this.addVariablesToAxis([t],e)}else if(i[t]){if(!(this.xAxis.length>1))return alert("Cannot remove "+t+" from X-Axis"),void this.removeMenus();this.removeVariablesFromAxis([t],e)}else this.addVariablesToAxis([t],e);else if("xAxis2"==e)if(i[t]){if(!(this.xAxis.length>1))return alert("Cannot remove "+t+" from X-Axis"),void this.removeMenus();this.removeVariablesFromAxis([t],"xAxis"),this.addVariablesToAxis([t],e)}else if(s[t]){if(!(this.xAxis2.length>1))return alert("Cannot remove "+t+" from X-Axis 2"),void this.removeMenus();this.removeVariablesFromAxis([t],e)}else this.addVariablesToAxis([t],e)}this.draw({func:"changeVariableInAxis",par:[t,e]})}},this.changeSampleInAxis=function(t,e,i){if(!this.isTransition()&&this.graphType.match(/Scatter/)){var s,a,r,n;if(s=this.getObjectArray(this.xAxis),a=this.getObjectArray(this.yAxis),"ScatterBubble2D"!=this.graphType&&"Scatter3D"!=this.graphType||(r=this.getObjectArray(this.zAxis),n=!0),"xAxis"==e)if(i)this.switchSampleInAxis([t],e);else if(a[t]&&!n){if(!(this.yAxis.length>1))return alert("Cannot remove "+t+" from Y-Axis"),void this.removeMenus();this.removeSamplesFromAxis([t],"yAxis"),this.addSamplesToAxis([t],e)}else if(r&&r[t]&&!n){if(!(this.zAxis.length>1))return alert("Cannot remove "+t+" from Z-Axis"),void this.removeMenus();this.removeSamplesFromAxis([t],"zAxis")}else if(s[t]&&!n){if(!(this.xAxis.length>1))return alert("Cannot remove "+t+" from X-Axis"),void this.removeMenus();this.removeSamplesFromAxis([t],e)}else n?(this[e]=[],this.addSamplesToAxis([t],e)):this.addSamplesToAxis([t],e);else if("yAxis"==e)if(i)this.switchSampleInAxis([t],e);else if(s[t]&&!n){if(!(this.xAxis.length>1))return alert("Cannot remove "+t+" from X-Axis"),void this.removeMenus();this.removeSamplesFromAxis([t],"xAxis"),this.addSamplesToAxis([t],e)}else if(r&&r[t]&&!n){if(!(this.zAxis.length>1))return alert("Cannot remove "+t+" from Z-Axis"),void this.removeMenus();this.removeSamplesFromAxis([t],"zAxis")}else if(a[t]&&!n){if(!(this.yAxis.length>1))return alert("Cannot remove "+t+" from Y-Axis"),void this.removeMenus();this.removeSamplesFromAxis([t],e)}else n?(this[e]=[],this.addSamplesToAxis([t],e)):this.addSamplesToAxis([t],e);else if("zAxis"==e)if(i)this.switchSampleInAxis([t],e);else if(s[t]&&!n){if(!(this.xAxis.length>1))return alert("Cannot remove "+t+" from X-Axis"),void this.removeMenus();this.removeSamplesFromAxis([t],"xAxis"),this.addSamplesToAxis([t],e)}else if(a[t]&&!n){if(!(this.yAxis.length>1))return alert("Cannot remove "+t+" from Y-Axis"),void this.removeMenus();this.removeSamplesFromAxis([t],"yAxis")}else if(r[t]&&!n){if(!(this.zAxis.length>1))return alert("Cannot remove "+t+" from Z-Axis"),void this.removeMenus();this.removeSamplesFromAxis([t],e)}else n?(this[e]=[],this.addSamplesToAxis([t],e)):this.addSamplesToAxis([t],e);this.draw({func:"changeSampleInAxis",par:[t,e,i]})}},this.modifyOncoprintNoAlterations=function(){this.oncoprintNoAlterations?(this.resetDataFilter(!1,!1,!1,this.oncoprintVarIndices,this.oncoprintSmpIndices),this.hideUnhideDataTable(!0),this.oncoprintVarIndices=!1,this.oncoprintSmpIndices=!1):(this.oncoprintVarIndices=this.cloneObject(this.varIndices),this.oncoprintSmpIndices=this.cloneObject(this.smpIndices),this.toDoFilter={sample:{"Altered-Smps":{min:1}},variable:{"Altered-Vars":{min:1}}},this.updateDataFilter(!0,!0))},this.modifySort=function(t,e,i,s,a,r){var n=this;if(this.isDOE&&!r)return this.layoutConfig[this.layoutCurrent].sortData=[[t,e,i]],void this.draw({func:"modifySort",par:[t,e,i,s,a,r]});var o="smp"==e?["sortingSampleCategories","sortingVariables"]:["sortingVariableCategories","sortingSamples"];o="cat"==t?[o[0]]:[o[1]],this.sortingSampleCategories||(this.sortingSampleCategories=[]),this.sortingVariableCategories||(this.sortingVariableCategories=[]);var h=function(t){for(var e=[],s=0;s<n[t].length;s++)n[t][s]!=i&&e.push(n[t][s]);n[t]=e},l=function(t){n[t].length<3?n[t].push(i):(n.removeMenus(),alert("Maximum of three sorting levels reached"))};if("samples"!=i&&"variables"!=i&&"both"!=t)for(var c=0;c<o.length;c++){this[o[c]]||(this[o[c]]=[]);var d=this.getObjectArray(this[o[c]]);"sortingVariables"==o[c]?this.getVariableIndices(i):"sortingSamples"==o[c]&&this.getSampleIndices(i),d.hasOwnProperty(i)?h(o[c]):l(o[c])}"both"==t?this.sortingSampleCategories&&this.sortingSampleCategories.length&&this.sortingVariableCategories&&this.sortingVariableCategories.length?(this.sortSamplesByCategory(this.sortingSampleCategories,!0),this.sortVariablesByCategory(this.sortingVariableCategories,s)):this.sortingSampleCategories&&this.sortingSampleCategories.length?this.sortSamplesByCategory(this.sortingSampleCategories,!1,s):this.sortingVariableCategories&&this.sortingVariableCategories.length?this.sortVariablesByCategory(this.sortingVariableCategories,s):(this.sortSamples(!1,!1,!1,!1,!0),this.sortVariables(!1,!1,!1,!1,s)):"smp"==e?"cat"==t?this.sortSamplesByCategory(this.sortingSampleCategories,s):"var"==t?this.sortSamplesByVariable(this.sortingVariables,!1,s):"samples"==i&&this.sortSamples(!1,!1,!1,!1,s):"var"==e?"cat"==t?this.sortVariablesByCategory(this.sortingVariableCategories,s):"smp"==t?this.sortVariablesBySample(this.sortingSamples,s):"variables"==i&&this.sortVariables(!1,!1,!1,!1,s):"varIndex"!=t[0]&&"smpIndex"!=t[0]&&"grpIndex"!=t[0]||(this.sortDir="ascending"==this.sortDir?"descending":"ascending","varIndex"==t?this.sortVariables(this.sortDir,!1,!1,t[0],s):this.sortSamples(this.sortDir,!1,!1,t[0],s));a&&this.resortData()},this.sortSamples=function(t,e,i,s,a){this.isTransition()||(this.sortIndices("smps",t,e,!1,i,s),this.setOriginalIndices(!1,!1,!1,!0),a||this.draw({func:"sortSamples",par:[t,e,i,s,a],prop:{sortDir:this.sortDir}}))},this.sortSamplesByCategory=function(t,e){this.isTransition()||(this.sortIndices("smps",!1,t),this.setOriginalIndices(!1,!1,!1,!0),e||this.draw({func:"sortSamplesByCategory",par:[t,e],prop:{sortDir:this.sortDir}}))},this.sortSamplesByVariable=function(t,e,i){if(!this.isTransition()){var s=parseInt(this.getVariableIndices(t));this.sortIndices("smps",!1,!1,!1,s+1,e),this.setOriginalIndices(!1,!1,!1,!0),i||this.draw({func:"sortSamplesByVariable",par:[t,e,i],prop:{sortDir:this.sortDir}})}},this.sortVariables=function(t,e,i,s,a){this.isTransition()||(this.sortIndices("vars",t,e,i,!1,s,a),this.setOriginalIndices(!1,!1,!1,!0),a||this.draw({func:"sortVariables",par:[t,e,i,s,a],prop:{sortDir:this.sortDir}}))},this.sortVariablesByCategory=function(t,e){this.isTransition()||(this.sortIndices("vars",!1,t),this.setOriginalIndices(!1,!1,!1,!0),e||this.draw({func:"sortVariablesByCategory",par:[t,e],prop:{sortDir:this.sortDir}}))},this.sortVariablesBySample=function(t,e){if(!this.isTransition()){var i=parseInt(this.getSampleIndices(t));this.sortIndices("vars",!1,!1,i+1),this.setOriginalIndices(!1,!1,!1,!0),e||this.draw({func:"sortVariablesBySample",par:[t,e],prop:{sortDir:this.sortDir}})}},this.rebuildDataTableFilter=function(t){if(!this.graphType.match(/Scatter/)||!this.showLoessFit&&!this.isContour){if(!t){r=this;var e=this.$(this.target+"-cX-DataFilter"),i=!(!e||"block"!=e.style.display),s=this.dataTableLastState,a=this.appLayout;return a?this.clickLayout():(i&&this.hideDataFilter(),s&&this.hideTable()),setTimeout((function(){s&&r.rebuildDataTable(),i&&r.rebuildDataFilter()}),500),[a,i,s]}var r=this;setTimeout((function(){t[0]?r.clickLayout(!1,(function(){r.activeAccordion=!1,r.activateAccordion(!1,r.$(r.target+"-cX-DataFilterVariableHeader"))})):(t[1]&&r.clickDataFilters(),t[2]&&r.clickDataTable())}),2e3)}}},CanvasXpress.prototype.initRandom=function(){this.round=function(t,e){return Number(Math.round(t+"e"+e)+"e-"+e)},this.createRandomData=function(t,e){var i=this,s={},a={},r=[],n=[],o=[],h=[];if("Network"==this.graphType)s=this.createRandomNetwork();else if("Venn"==this.graphType)s=this.createRandomVenn();else if("Genome"==this.graphType)s=this.createRandomGenome();else{var l=function(t,e){var n=[];if(t){for(var o=0;o<t;o++)n.push(i.randomBetween(i.randomDataMin,i.randomDataMax));return n}switch(i.randomDataDistribution){case"biased":for(o=0;o<i.randomDataVariables;o++)for(var h=s.z?s.z.Annt1[o].split(":")[1]-1:0,l=0;l<i.randomDataSamples;l++){var c=s.x?s.x.Factor1[l].split(":")[1]-1:0,d=r[a[h+":"+c]];e?n.push(i.randomIntBetween(d[0],d[1])):n.push(i.round(i.randomBetween(d[0],d[1]),2))}return n;case"range":for(o=0;o<i.randomDataVariables;o++)for(l=0;l<i.randomDataSamples;l++)e?n.push(i.randomIntBetween(i.randomDataMin,i.randomDataMax)):n.push(i.round(i.randomBetween(i.randomDataMin,i.randomDataMax),2));return n;case"normal":return i.rnorm(i.randomDataVariables*i.randomDataSamples,i.randomDataMean,i.randomDataSigma);case"uniform":for(o=0;o<i.randomDataVariables;o++)for(l=0;l<i.randomDataSamples;l++)n.push(100);return n;case"symmetrical":for(o=0;o<i.randomDataVariables;o++)for(l=0;l<i.randomDataSamples;l++)n.push(10*o+5*(l+1));return n}};!function(){for(var t=(i.randomDataMax-i.randomDataMin)/4,e=[],s=0,n=0;n<4;n++)e.push(n*t),r.push([i.round(Math.max(i.randomDataMin,s-.15*t),0),i.round(Math.min(s+1.15*t,i.randomDataMax),0)]),s+=t;var o=0;for(n=0;n<2;n++)for(var h=0;h<2;h++)a[n+":"+h]=o,o++}(),this.randomDataVariableAnnotations>0&&(s.z={});for(var c=0;c<this.randomDataVariableAnnotations;c++){var d=l(this.randomDataVariables,c%2);s.z["Annt"+(c+1)]=[],s.z["VCov"+(c+1)]=[];for(var p=0;p<this.randomDataVariables;p++)s.z["Annt"+(c+1)][p]="Desc:"+this.randomIntBetween(1,c+2),s.z["VCov"+(c+1)][p]=d[p]}this.randomDataSampleAnnotations>0&&(s.x={});for(c=0;c<this.randomDataSampleAnnotations;c++){d=l(this.randomDataSamples,c%2);s.x["Factor"+(c+1)]=[],s.x["SCovar"+(c+1)]=[];for(p=0;p<this.randomDataSamples;p++)s.x["Factor"+(c+1)][p]="Lev:"+this.randomIntBetween(1,c+2),s.x["SCovar"+(c+1)][p]=d[p]}s.y={},s.y.data=[],s.y.vars=[],s.y.smps=[];for(c=0;c<this.randomDataSamples;c++)this.randomDataTime?s.y.smps[c]=new Date(this.meta.time.start+c*this.times.day):s.y.smps[c]="S"+(c+1);var g=l(),u=!!t&&l(),m=["A","B","C","D","E","F"],f=0;for(c=0;c<this.randomDataVariables;c++){s.y.data[c]=[],s.y.vars[c]="V"+(c+1),n[c]=[],o[c]=[],h[c]=[];for(p=0;p<this.randomDataSamples;p++)s.y.data[c][p]=this.round(g[f],2),t&&(n[c][p]=this.round(u[f],2),o[c][p]=m[parseInt(5*this.random())],h[c][p]=m[parseInt(2*this.random())]),f++}if(t&&(s.y.data2=n,s.y.data3=o,s.y.data4=h),this.randomMissingDataPercentage>0&&this.randomMissingDataPercentage<1)for(var y=0,x=this.randomDataVariables*this.randomDataSamples*this.randomMissingDataPercentage;y<x;){c=Math.floor(this.random()*this.randomDataVariables),p=Math.floor(this.random()*this.randomDataSamples);null!=s.y.data[c][p]&&(s.y.data[c][p]=null,y++)}}if(e)return s;"Network"==this.graphType&&(this.calculateLayout=!0,this.isLayoutDone=!1),this.randomData=!0,this.data&&!this.dataStndBy&&(this.dataStndBy=this.data,this.configStndBy=this.getConfig(),this.data={}),s&&(this.resetConfig(["graphType"]),this.updateData(s,!0))},this.restoreRandomData=function(){this.switchData(!0)},this.createRandomFunction=function(){return{fx:"sin(2y) * cos(3x) / sec(xy)"}},this.createRandomSankey=function(){return{y:{vars:["Weight"],smps:["S1","S2","S3","S4","S5","S6"],data:[[5,7,6,2,9,4]]},x:{Source:["A","A","A","B","B","B"],Target:["X","Y","Z","X","Y","Z"],Source2:["B","A","A","A","B","B"],Target2:["Y","Y","Z","X","X","Z"],Weight:[1,2,3,4,5,6]}}},this.createRandomCircular=function(t){var e=this.getDataSet(t.replace(/RandomCircular2/,"Random").replace(/RandomCircular/,"Random"));e.z||(e.z={}),e.z.Ring=[];for(var i=0;i<e.y.vars.length;i++)e.z.Ring.push(this.randomIntBetween(1,3));if(t.match(/RandomCircular2/)){e.z.Ring.push(-1),e.y.vars.push("Number");var s=[];for(i=0;i<e.y.smps.length;i++)s.push(i+1);e.y.data.push(s)}return e},this.createRandomChord=function(){return{y:{vars:["A","B","C","D"],smps:["A","B","C","D"],data:[[11975,5871,8916,2868],[1951,10048,2060,6171],[8010,16145,8090,8045],[1013,990,940,6907]]}}},this.createRandomIdeogram=function(t){var e=CanvasXpress.chromosomes.hg19,i=t?this.getDataSet(t.replace(/RandomIdeogram/,"Random")):this.getDataSet("Random:200:10:4:4");i.z||(i.z={}),i.z.chr=[],i.z.pos=[];for(var s=0;s<e.order.length;s++)for(var a=e.order[s],r=e.data[a][e.data[a].length-1][1],n=(t=Math.ceil(r/2e7),0);n<t&&i.z.chr.length<i.y.vars.length;n++)i.z.chr.push(a),i.z.pos.push(this.randomIntBetween(1,r));for(;i.z.chr.length<i.y.vars.length;){a=e.order[this.randomIntBetween(0,23)],r=e.data[a][e.data[a].length-1][1];i.z.chr.push(a),i.z.pos.push(this.randomIntBetween(1,r))}return i},this.createRandomNonLinearFit=function(){return{y:{vars:["S1","S2","S3","S4","S5","S6","S7","S8","S9","S10","S11","S12"],smps:["Concentration","V1"],data:[[9e-4,172],[.0018,177],[.0037,160],[.0073,166],[.0146,211],[.0293,248],[.0586,269],[.117,283],[.234,298],[.469,314],[.938,328],[1.88,316]]}}},this.createRandomKaplanMeier=function(){return{y:{vars:["p1","p2","p3","p4","p5","p6","p7","p8","p9","p10","p11","p12","p13","p14","p15","p16","p17","p18","p19","p20"],smps:["Time","Censored-1","Censored-2"],data:[[1,0,1],[2,0,1],[3,0,1],[3,0,1],[1,1,1],[2,1,1],[2,1,2],[3,1,1],[3,1,1],[4,0,0],[5,0,0],[6,0,0],[6,0,0],[7,1,0],[8,0,1],[9,0,0],[9,0],[9,0],[10,1],[11,1]]},z:{grp:["A","B","A","B","A","B","A","B","A","B","A","B","A","B","A","B","A","B","A","B"],cls:["A","A","A","A","A","A","A","A","A","B","B","B","B","B","B","B","B","B","B","B"]}}},this.createRandomVenn=function(){return{venn:{data:{A:340,B:562,C:620,D:592,AB:639,AC:456,AD:257,BC:915,BD:354,CD:143,ABC:552,ABD:578,ACD:298,BCD:613,ABCD:148},legend:{A:"List1",B:"List2",C:"List3",D:"List4"}}}},this.createRandomNetwork=function(){for(var t=this,e=function(){for(var e=0;e<t.randomNetworkNodes;e++){var i=Math.floor(t.random()*t.randomNetworkNodeEdgesMax);if(r.hasOwnProperty(e)||(r[e]=0),r[e]>3||!t.randomNetworkReduce)for(;r[e]<i;){var s=Math.floor(t.random()*t.randomNetworkNodes);s==e||n[s+":"+e]||n[e+":"+s]||(r.hasOwnProperty(s)||(r[s]=0),h.push([s,e]),r.hasOwnProperty(s)||(r[s]=0),r.hasOwnProperty(e)||(r[e]=0),r[s]++,r[e]++,n[s+":"+e]=!0,n[e+":"+s]=!0)}}},i=function(e,i){var s=t.randomNetworkAll&&!f?Math.floor(t.random()*t.shapes.length):0;"image"==t.shapes[s]&&(s=0),e.shape=t.shapes[s],e.color=t.randomNetworkAll&&!f?t.colors[Math.floor(t.random()*t.colors.length)]:"lightblue",e.size=1,f?i&&(e.label=i):(e.type="Type"+Math.ceil(3*t.random()),e.D1=Math.floor(4*t.random()),e.D2=Math.floor(6*t.random()),e.D3=Math.floor(8*t.random()),e.D4={Da:Math.floor(1*t.random()),Db:Math.floor(5*t.random()),Dc:Math.floor(10*t.random())},e.D5={Da:Math.floor(10*t.random()),Db:Math.floor(1*t.random()),Dc:Math.floor(5*t.random())})},s=function(e){if(e.color=t.randomNetworkAll&&!f?t.colors[Math.floor(t.random()*t.colors.length)]:"black",e.width=1,e.type="line",f||(e.kind="Type"+Math.ceil(3*t.random())),t.randomNetworkAll&&!f){e.type=t.lines[Math.floor(t.random()*t.lines.length)];var i=Math.floor(6*t.random()),s=Math.floor(6*t.random());i<3&&(e.startArrow=t.arrows[i]),s<3&&(e.endArrow=t.arrows[s])}},a={nodes:[],edges:[]},r={},n={},o=[],h=[],l=["Myriel","Napoleon","MlleBaptistine","MmeMagloire","CountessDeLo","Geborand","Champtercier","Cravatte","Count","OldMan","Labarre","Valjean","Marguerite","MmeDeR","Isabeau","Gervais","Tholomyes","Listolier","Fameuil","Blacheville","Favourite","Dahlia","Zephine","Fantine","MmeThenardier","Thenardier","Cosette","Javert","Fauchelevent","Bamatabois","Perpetue","Simplice","Scaufflaire","Woman1","Judge","Champmathieu","Brevet","Chenildieu","Cochepaille","Pontmercy","Boulatruelle","Eponine","Anzelma","Woman2","MotherInnocent","Gribier","Jondrette","MmeBurgon","Gavroche","Gillenormand","Magnon","MlleGillenormand","MmePontmercy","MlleVaubois","LtGillenormand","Marius","BaronessT","Mabeuf","Enjolras","Combeferre","Prouvaire","Feuilly","Courfeyrac","Bahorel","Bossuet","Joly","Grantaire","MotherPlutarch","Gueulemer","Babet","Claquesous","Montparnasse","Toussaint","Child1","Child2","Brujon","MmeHucheloup"],c={duo:[],trio:[0],pentagon:[0,0,0,0],hexagon:[0,0,0,0,0],octagon:[0,0,0,0,0,0],star:[1,0,2,0,3,0,4,0,5],small:[3,3,3,4],medium:[0,1,0,2,2,4],large:[3,2,3,4,5,6,2,2,5,5,5,1,4,1,0,7,7],huge:[0,1,4,1,1,1,5,0,6,7,9,9,2,2,15,5,5,11,14,1,0,7,7,1,1,3,5,8,18,7,6,11,10,3,1,18,10,8,8,6]},d=Math.ceil(Math.sqrt(this.randomNetworkNodes))+1,p=d,g=d;(g-1)*p>=this.randomNetworkNodes;)g--;var u=this.x/p,m=this.y/g,f=!1;if("lesmiserables"==this.randomNetworkLayout?(f=!0,h=[[1,0],[2,0],[3,0],[3,2],[4,0],[5,0],[6,0],[7,0],[8,0],[9,0],[11,10],[11,3],[11,2],[11,0],[12,11],[13,11],[14,11],[15,11],[17,16],[18,16],[18,17],[19,16],[19,17],[19,18],[20,16],[20,17],[20,18],[20,19],[21,16],[21,17],[21,18],[21,19],[21,20],[22,16],[22,17],[22,18],[22,19],[22,20],[22,21],[23,16],[23,17],[23,18],[23,19],[23,20],[23,21],[23,22],[23,12],[23,11],[24,23],[24,11],[25,24],[25,23],[25,11],[26,24],[26,11],[26,16],[26,25],[27,11],[27,23],[27,25],[27,24],[27,26],[28,11],[28,27],[29,23],[29,27],[29,11],[30,23],[31,30],[31,11],[31,23],[31,27],[32,11],[33,11],[33,27],[34,11],[34,29],[35,11],[35,34],[35,29],[36,34],[36,35],[36,11],[36,29],[37,34],[37,35],[37,36],[37,11],[37,29],[38,34],[38,35],[38,36],[38,37],[38,11],[38,29],[39,25],[40,25],[41,24],[41,25],[42,41],[42,25],[42,24],[43,11],[43,26],[43,27],[44,28],[44,11],[45,28],[47,46],[48,47],[48,25],[48,27],[48,11],[49,26],[49,11],[50,49],[50,24],[51,49],[51,26],[51,11],[52,51],[52,39],[53,51],[54,51],[54,49],[54,26],[55,51],[55,49],[55,39],[55,54],[55,26],[55,11],[55,16],[55,25],[55,41],[55,48],[56,49],[56,55],[57,55],[57,41],[57,48],[58,55],[58,48],[58,27],[58,57],[58,11],[59,58],[59,55],[59,48],[59,57],[60,48],[60,58],[60,59],[61,48],[61,58],[61,60],[61,59],[61,57],[61,55],[62,55],[62,58],[62,59],[62,48],[62,57],[62,41],[62,61],[62,60],[63,59],[63,48],[63,62],[63,57],[63,58],[63,61],[63,60],[63,55],[64,55],[64,62],[64,48],[64,63],[64,58],[64,61],[64,60],[64,59],[64,57],[64,11],[65,63],[65,64],[65,48],[65,62],[65,58],[65,61],[65,60],[65,59],[65,57],[65,55],[66,64],[66,58],[66,59],[66,62],[66,65],[66,48],[66,63],[66,61],[66,60],[67,57],[68,25],[68,11],[68,24],[68,27],[68,48],[68,41],[69,25],[69,68],[69,11],[69,24],[69,27],[69,48],[69,41],[70,25],[70,69],[70,68],[70,11],[70,24],[70,27],[70,41],[70,58],[71,27],[71,69],[71,68],[71,70],[71,11],[71,48],[71,41],[71,25],[72,26],[72,27],[72,11],[73,48],[74,48],[74,73],[75,69],[75,68],[75,25],[75,48],[75,41],[75,70],[75,71],[76,64],[76,65],[76,66],[76,63],[76,62],[76,48],[76,58]]):"karate"==this.randomNetworkLayout&&(f=!0,h=[[1,0],[2,0],[2,1],[3,0],[3,1],[3,2],[4,0],[5,0],[6,0],[6,4],[6,5],[7,0],[7,1],[7,2],[7,3],[8,0],[8,2],[9,2],[10,0],[10,4],[10,5],[11,0],[12,0],[12,3],[13,0],[13,1],[13,2],[13,3],[16,5],[16,6],[17,0],[17,1],[19,0],[19,1],[21,0],[21,1],[25,23],[25,24],[27,2],[27,23],[27,24],[28,2],[29,23],[29,26],[30,1],[30,8],[31,0],[31,24],[31,25],[31,28],[32,2],[32,8],[32,14],[32,15],[32,18],[32,20],[32,22],[32,23],[32,29],[32,30],[32,31],[33,8],[33,9],[33,13],[33,14],[33,15],[33,18],[33,19],[33,20],[33,22],[33,23],[33,26],[33,27],[33,28],[33,29],[33,30],[33,31],[33,32]]),this.randomNetworkReduce||f){if(!f)if(c.hasOwnProperty(this.randomNetworkLayout))h=this.prufer(c[this.randomNetworkLayout]);else{for(var y=this.randomNetworkNodes-2,x=0;x<y;x++)h.push(Math.floor(this.random()*(y-x)));h=this.prufer(h)}for(x=0;x<h.length;x++)r.hasOwnProperty(h[x][0])||(r[h[x][0]]=0),r.hasOwnProperty(h[x][1])||(r[h[x][1]]=0),r[h[x][0]]++,r[h[x][1]]++,n[h[x][0]+":"+h[x][1]]=!0,n[h[x][1]+":"+h[x][0]]=!0;c.hasOwnProperty(this.randomNetworkLayout)||"radial"==this.randomNetworkLayout||f||e(),o=this.sortObject(r)}else{for(y=Math.ceil(this.random()*this.randomNetworkNodes),x=0;x<y;x++)o.push(x);e()}o=o.sort((function(t,e){return r[e]-r[t]}));for(x=0;x<o.length;x++){var v=o[x],b=parseInt(x/p)+1,A=parseInt(x%p)+1,w="lesmiserables"==this.randomNetworkLayout&&l[v],C={id:"ND"+v,x:10*parseInt(A*u),y:10*parseInt(b*m),z:(parseInt(A*u)+parseInt(b*m))/2,n:r[v]};if(1==r[v])for(var T in n){var S=T.split(":");if(S[0]==v){C.parentNode="ND"+S[1];break}}i(C,w),a.nodes.push(C)}for(x=0;x<h.length;x++){var M={id1:"ND"+h[x][0],id2:"ND"+h[x][1]};s(M),a.edges.push(M)}return a},this.createRandomGenome=function(){return{tracks:[{name:"Affymetrix Probes",type:"box",connect:!0,data:[{id:"123456_at",fill:"rgb(255,255,51)",outline:"rgb(0,0,0)",dir:"right",data:[[10,20],[30,40],[50,60],[70,80],[90,100],[110,120]],sequences:["GTTTTACGTAC","TACGTACGTAC","GGTTTACGTAC","GGTTTACGTAC","GGTTTACGTAC","GGTTTACGTAC"]},{id:"345678_at",fill:"rgb(255,255,51)",outline:"rgb(0,0,0)",dir:"right",data:[[100,110],[120,130],[140,150],[160,170],[180,190]]}]},{name:"Sanger Sequencing (Multiple sequeneces)",highlight:[{offset:80,width:1,color:"rgb(120,120,180)"},{offset:185,width:1,color:"rgb(180,20,180)"}],subtype:"DNA",type:"sequence",data:[{id:"Reference Sequence",fill:"rgb(51,255,255)",outline:"rgb(0,0,0)",dir:"right",offset:1,sequence:"AAAACCCGGGTTTTACGTACGTACGTACGTACGTACGTACGTAAACCCGGGTTTACGTACGTAAACCCGGGTTTACGTACGTAAACCCGGGTTTACGTACGTAAACCCGGGTTTACGTACGTAAACCCGGGTTTACGTACGTAAACCCGGGTTTACGTACGTAAACCCGGGTTTACGTACGTAAACCCGGGTTTAAACC",translate:[-3,-2,-1,1,2,3]},{id:"R1-0000-1234",fill:"rgb(255,255,51)",outline:"rgb(0,0,0)",dir:"right",offset:1,gaps:[[18,1],[22,1]],sequence:"AAAACCCGGGTTTTACGTCGTAGTACGTACGTACGTACGTAAACCCGGGTTTACGTACGTAAACCCGGGTTTACGTACGTAA",coordinate:50,trace:{A:[57,127,237,371,486,531,486,371,237,127,57,54,117,217,339,442,484,442,339,217,117,54,10,24,60,130,240,375,490,535,490,375,240,130,60,24,10,56,121,222,346,452,494,452,346,222,121,56,7,14,27,48,74,95,104,95,74,48,27,14,7,6,8,14,27,46,69,90,98,90,69,46,27,14,8,6,4,5,7,14,27,47,72,93,101,93,72,47,27,14,7,5,4,5,11,23,42,65,85,92,85,65,42,23,11,5,7,14,27,48,74,95,104,95,74,48,27,14,7,1,2,4,10,22,42,65,85,93,85,65,42,22,10,4,2,1,5,12,24,44,68,88,97,88,68,44,24,12,5,4,5,7,14,27,47,72,94,102,94,72,47,27,14,7,5,4,2,4,10,22,41,64,83,91,83,64,41,22,10,4,2,12,24,43,67,87,95,87,67,43,24,12,21,52,113,210,328,429,469,429,328,210,113,52,21,4,6,13,26,47,72,93,102,93,72,47,26,13,6,4,4,6,13,26,46,71,92,100,92,71,46,26,13,6,4,6,8,14,27,46,69,89,97,89,69,46,27,14,8,6,4,5,8,14,28,49,76,98,107,98,76,49,28,14,8,5,4,7,13,25,45,68,88,96,88,68,45,25,13,7,5,11,24,43,67,88,96,88,67,43,24,11,5,22,54,118,219,342,447,489,447,342,219,118,54,22,5,12,25,46,71,93,102,93,71,46,25,12,5,5,12,24,44,68,89,97,89,68,44,24,12,5,20,54,121,226,355,465,508,465,355,226,121,54,20,3,4,6,13,25,45,70,91,99,91,70,45,25,13,6,4,3,6,8,15,27,47,71,91,99,91,71,47,27,15,8,6,1,2,4,11,24,44,69,90,98,90,69,44,24,11,4,2,1,6,11,25,60,128,237,369,482,527,482,369,237,128,60,25,11,6,2,5,12,25,47,74,97,106,97,74,47,25,12,5,2,5,8,15,29,51,78,101,110,101,78,51,29,15,8,5,5,12,26,48,75,98,107,98,75,48,26,12,5,6,18,48,107,201,315,412,451,412,315,201,107,48,18,6,9,16,31,53,81,105,114,105,81,53,31,16,9,6,8,15,28,48,73,94,103,94,73,48,28,15,8,6,11,23,42,65,85,92,85,65,42,23,11,19,51,113,212,332,434,475,434,332,212,113,51,19,8,15,28,49,74,95,104,95,74,49,28,15,8,12,26,49,76,99,109,99,76,49,26,12,12,24,43,67,86,94,86,67,43,24,12,22,54,118,218,341,445,487,445,341,218,118,54,22,21,52,112,208,324,423,462,423,324,208,112,52,21,10,23,54,115,212,330,430,471,430,330,212,115,54,23,10,2,3,5,12,25,45,69,91,99,91,69,45,25,12,5,3,2,2,3,5,12,24,44,68,88,97,88,68,44,24,12,5,3,2,8,15,28,50,77,100,109,100,77,50,28,15,8,12,26,48,74,96,105,96,74,48,26,12,13,27,48,74,96,105,96,74,48,27,13,13,25,45,70,91,99,91,70,45,25,13,7,14,28,49,75,97,105,97,75,49,28,14,7,2,5,12,26,48,74,97,106,97,74,48,26,12,5,2,16,30,53,80,103,113,103,80,53,30,16,25,61,133,246,384,501,548,501,384,246,133,61,25,6,13,25,45,69,90,98,90,69,45,25,13,6,5,6,9,15,29,50,77,99,108,99,77,50,29,15,9,6,5,10,23,42,65,86,94,86,65,42,23,10,9,23,55,120,223,348,454,497,454,348,223,120,55,23,9,2,4,11,23,43,67,88,96,88,67,43,23,11,4,2,2,3,6,12,26,48,74,96,105,96,74,48,26,12,6,3,2,15,28,49,74,96,104,96,74,49,28,15,22,55,120,223,348,455,498,455,348,223,120,55,22,22,53,115,213,332,434,474,434,332,213,115,53,22,7,20,53,118,221,346,454,496,454,346,221,118,53,20,7,2,3,5,11,24,44,67,88,96,88,67,44,24,11,5,3,2,15,28,50,75,97,106,97,75,50,28,15,1,2,5,12,25,47,74,96,105,96,74,47,25,12,5,2,1,6,8,15,28,49,74,96,104,96,74,49,28,15,8,6,5,12,26,47,72,94,103,94,72,47,26,12,5,8,15,27,47,71,92,100,92,71,47,27,15,8,3,5,11,23,42,65,84,92,84,65,42,23,11,5,3,5,12,25,45,70,91,100,91,70,45,25,12,5,1,2,4,10,22,41,64,84,92,84,64,41,22,10,4,2,1,7,20,51,113,212,331,433,474,433,331,212,113,51,20,7,2,3,5,12,25,46,72,94,102,94,72,46,25,12,5,3,2,2,4,11,25,46,72,94,102,94,72,46,25,11,4,2,2,3,6,12,26,48,74,97,106,97,74,48,26,12,6,3,2,10,25,61,133,247,386,504,551,504,386,247,133,61,25,10,15,27,47,71,92,100,92,71,47,27,15,5,8,15,28,50,76,99,108,99,76,50,28,15,8,5,2,3,6,13,26,48,75,98,107,98,75,48,26,13,6,3,2,8,22,57,127,238,372,487,532,487,372,238,127,57,22,8,60,129,237,370,483,528,483,370,237,129,60],C:[6,13,23,34,45,49,45,34,23,13,6,9,16,28,41,53,58,53,41,28,16,9,4,5,9,15,26,39,49,54,49,39,26,15,9,5,4,10,17,28,41,52,57,52,41,28,17,10,21,51,111,206,321,419,459,419,321,206,111,51,21,11,26,62,134,248,387,505,552,505,387,248,134,62,26,11,5,10,24,58,126,233,364,475,520,475,364,233,126,58,24,10,5,3,7,13,23,35,46,50,46,35,23,13,7,3,6,9,16,27,41,52,57,52,41,27,16,9,6,1,1,3,6,13,24,38,49,54,49,38,24,13,6,3,1,1,3,6,13,22,34,45,49,45,34,22,13,6,3,4,4,5,8,14,24,36,46,50,46,36,24,14,8,5,4,4,1,2,6,12,23,36,47,51,47,36,23,12,6,2,1,7,13,23,34,44,48,44,34,23,13,7,5,8,15,27,41,52,57,52,41,27,15,8,5,8,21,52,113,211,329,431,471,431,329,211,113,52,21,8,3,4,8,14,24,37,47,51,47,37,24,14,8,4,3,5,6,10,16,27,39,50,54,50,39,27,16,10,6,5,5,9,22,52,114,210,328,428,468,428,328,210,114,52,22,9,5,6,9,16,27,41,53,57,53,41,27,16,9,6,3,7,13,24,36,47,51,47,36,24,13,7,3,4,8,15,25,38,49,54,49,38,25,15,8,4,4,7,14,25,38,49,54,49,38,25,14,7,4,3,7,14,24,37,48,52,48,37,24,14,7,3,2,6,13,23,36,47,51,47,36,23,13,6,2,4,8,21,52,114,212,331,433,474,433,331,212,114,52,21,8,4,5,6,10,16,27,39,50,54,50,39,27,16,10,6,5,1,1,3,6,13,24,38,49,54,49,38,24,13,6,3,1,1,5,5,7,10,17,29,43,54,59,54,43,29,17,10,7,5,5,6,18,49,109,203,319,417,457,417,319,203,109,49,18,6,4,6,9,16,27,41,52,57,52,41,27,16,9,6,4,2,5,12,21,33,43,47,43,33,21,12,5,2,1,2,6,12,22,34,45,49,45,34,22,12,6,2,1,25,61,131,242,376,492,538,492,376,242,131,61,25,5,6,9,15,25,36,46,50,46,36,25,15,9,6,5,7,14,26,39,51,56,51,39,26,14,7,3,6,13,24,38,50,54,50,38,24,13,6,3,24,56,121,224,348,454,497,454,348,224,121,56,24,6,12,22,35,45,49,45,35,22,12,6,8,14,24,36,47,51,47,36,24,14,8,5,9,15,25,38,48,53,48,38,25,15,9,5,5,9,15,25,37,47,51,47,37,25,15,9,5,5,7,10,17,29,42,54,59,54,42,29,17,10,7,5,3,7,20,52,116,217,339,443,485,443,339,217,116,52,20,7,3,3,8,22,55,123,229,358,469,513,469,358,229,123,55,22,8,3,22,52,114,210,328,428,468,428,328,210,114,52,22,7,14,25,38,49,54,49,38,25,14,7,7,13,23,35,45,49,45,35,23,13,7,8,14,24,36,47,51,47,36,24,14,8,6,9,16,27,41,52,57,52,41,27,16,9,6,1,2,6,12,22,34,45,49,45,34,22,12,6,2,1,10,16,26,39,49,54,49,39,26,16,10,5,8,14,24,36,46,49,46,36,24,14,8,5,22,54,119,222,346,453,495,453,346,222,119,54,22,5,5,6,10,16,26,38,49,53,49,38,26,16,10,6,5,5,6,13,24,37,48,53,48,37,24,13,6,4,5,9,15,26,38,49,53,49,38,26,15,9,5,4,7,20,53,119,223,349,457,500,457,349,223,119,53,20,7,2,2,4,7,14,25,38,50,54,50,38,25,14,7,4,2,2,10,16,27,39,50,55,50,39,27,16,10,5,8,15,27,41,52,57,52,41,27,15,8,5,6,9,16,27,40,51,56,51,40,27,16,9,6,1,2,6,12,22,35,45,49,45,35,22,12,6,2,1,3,8,22,56,124,232,362,474,519,474,362,232,124,56,22,8,3,56,120,221,345,450,492,450,345,221,120,56,2,7,21,55,122,229,358,469,513,469,358,229,122,55,21,7,2,5,7,10,17,27,40,51,56,51,40,27,17,10,7,5,3,7,13,23,35,45,50,45,35,23,13,7,3,6,9,15,25,36,46,50,46,36,25,15,9,6,2,3,7,13,24,37,48,52,48,37,24,13,7,3,2,4,7,14,25,39,50,55,50,39,25,14,7,4,1,1,2,6,12,22,34,44,49,44,34,22,12,6,2,1,1,2,3,7,13,23,35,46,50,46,35,23,13,7,3,2,3,8,23,58,129,240,376,492,539,492,376,240,129,58,23,8,3,1,2,6,13,23,36,47,51,47,36,23,13,6,2,1,2,2,3,6,12,22,34,44,48,44,34,22,12,6,3,2,2,4,5,8,14,24,36,46,50,46,36,24,14,8,5,4,57,122,225,350,457,500,457,350,225,122,57,4,6,9,16,27,41,52,57,52,41,27,16,9,6,4,2,2,3,6,13,22,34,45,49,45,34,22,13,6,3,2,2,2,3,7,13,24,36,47,51,47,36,24,13,7,3,2,10,16,26,38,48,52,48,38,26,16,10],G:[4,8,14,20,26,29,26,20,14,8,4,6,9,14,20,26,28,26,20,14,9,6,4,5,6,10,15,22,27,29,27,22,15,10,6,5,4,7,10,15,20,25,27,25,20,15,10,7,4,6,9,14,20,25,27,25,20,14,9,6,4,5,5,7,10,16,22,27,30,27,22,16,10,7,5,5,4,4,5,6,10,15,22,28,30,28,22,15,10,6,5,4,4,22,57,127,237,370,485,530,485,370,237,127,57,22,24,60,130,242,377,493,539,493,377,242,130,60,24,2,7,21,55,123,230,361,472,517,472,361,230,123,55,21,7,2,2,4,7,12,18,23,25,23,18,12,7,4,2,4,4,4,6,9,14,20,25,27,25,20,14,9,6,4,4,4,1,2,3,7,12,19,25,27,25,19,12,7,3,2,1,5,8,13,19,24,26,24,19,13,8,5,3,5,8,13,19,24,26,24,19,13,8,5,3,3,3,5,8,14,20,25,28,25,20,14,8,5,3,3,9,22,55,120,224,349,457,499,457,349,224,120,55,22,9,5,6,7,11,17,24,30,32,30,24,17,11,7,6,5,4,4,4,6,9,14,20,25,27,25,20,14,9,6,4,4,4,22,54,116,215,335,438,479,438,335,215,116,54,22,2,4,7,12,18,23,25,23,18,12,7,4,2,3,5,8,14,20,25,27,25,20,14,8,5,3,22,57,127,237,371,485,530,485,371,237,127,57,22,3,4,8,13,20,26,28,26,20,13,8,4,3,2,3,7,12,18,24,26,24,18,12,7,3,2,3,3,3,5,8,13,20,25,27,25,20,13,8,5,3,3,3,11,25,59,127,234,364,476,520,476,364,234,127,59,25,11,1,1,1,3,6,11,17,22,24,22,17,11,6,3,1,1,1,5,5,5,7,11,16,22,28,30,28,22,16,11,7,5,5,5,1,1,3,6,11,17,22,24,22,17,11,6,3,1,1,10,23,56,121,223,348,455,498,455,348,223,121,56,23,10,1,3,6,12,18,23,25,23,18,12,6,3,1,1,1,3,6,11,16,21,23,21,16,11,6,3,1,1,5,7,10,15,21,26,28,26,21,15,10,7,5,11,25,61,131,243,378,494,540,494,378,243,131,61,25,11,4,8,14,20,26,29,26,20,14,8,4,1,3,6,11,16,21,23,21,16,11,6,3,1,5,7,10,15,20,25,27,25,20,15,10,7,5,50,112,211,330,432,473,432,330,211,112,50,5,8,13,20,25,27,25,20,13,8,5,5,6,10,16,22,28,31,28,22,16,10,6,5,4,6,9,14,19,24,26,24,19,14,9,6,4,5,5,7,11,16,22,28,30,28,22,16,11,7,5,5,2,2,2,4,7,12,17,22,24,22,17,12,7,4,2,2,2,2,2,3,4,8,13,20,25,27,25,20,13,8,4,3,2,2,5,6,10,15,22,28,30,28,22,15,10,6,5,59,130,243,381,498,545,498,381,243,130,59,54,118,218,341,446,488,446,341,218,118,54,57,126,234,365,477,522,477,365,234,126,57,4,6,9,14,21,26,28,26,21,14,9,6,4,1,1,3,6,11,17,22,24,22,17,11,6,3,1,1,7,10,15,21,26,28,26,21,15,10,7,4,6,10,15,21,27,29,27,21,15,10,6,4,4,5,9,14,21,27,29,27,21,14,9,5,4,6,10,24,56,121,223,347,453,495,453,347,223,121,56,24,10,6,3,6,12,18,23,25,23,18,12,6,3,4,4,6,9,14,20,25,27,25,20,14,9,6,4,4,1,2,3,7,12,18,24,26,24,18,12,7,3,2,1,3,8,23,59,131,244,382,500,547,500,382,244,131,59,23,8,3,7,11,16,22,28,30,28,22,16,11,7,3,5,8,13,19,24,27,24,19,13,8,5,3,5,6,10,15,21,27,29,27,21,15,10,6,5,1,2,3,7,13,20,25,28,25,20,13,7,3,2,1,2,2,2,4,7,12,18,23,25,23,18,12,7,4,2,2,2,7,10,16,22,27,30,27,22,16,10,7,1,1,1,3,6,11,17,22,24,22,17,11,6,3,1,1,1,11,24,57,122,225,350,457,500,457,350,225,122,57,24,11,23,58,129,241,377,494,540,494,377,241,129,58,23,26,62,133,246,384,501,548,501,384,246,133,62,26,2,2,4,7,12,18,23,25,23,18,12,7,4,2,2,2,4,7,12,18,23,25,23,18,12,7,4,2,1,1,1,3,6,11,17,22,24,22,17,11,6,3,1,1,1,2,2,4,7,12,18,23,25,23,18,12,7,4,2,2,2,2,2,4,8,13,19,25,27,25,19,13,8,4,2,2,2,7,20,54,120,224,351,460,503,460,351,224,120,54,20,7,2,2,3,4,8,13,20,26,28,26,20,13,8,4,3,2,2,4,5,6,10,16,22,28,31,28,22,16,10,6,5,4,7,10,16,22,27,29,27,22,16,10,7,10,23,57,124,230,359,469,513,469,359,230,124,57,23,10,2,2,3,4,8,14,21,27,29,27,21,14,8,4,3,2,2,2,2,4,7,12,19,24,26,24,19,12,7,4,2,2,7,11,17,24,29,32,29,24,17,11,7],T:[3,4,6,8,10,11,10,8,6,4,3,5,6,8,11,13,14,13,11,8,6,5,4,4,5,6,8,11,13,14,13,11,8,6,5,4,4,5,7,9,11,13,14,13,11,9,7,5,4,5,6,8,11,13,14,13,11,8,6,5,4,5,5,6,7,9,12,14,15,14,12,9,7,6,5,5,4,4,4,5,6,8,10,13,14,13,10,8,6,5,4,4,4,2,3,4,6,8,11,11,11,8,6,4,3,2,4,5,6,8,10,12,13,12,10,8,6,5,4,1,1,1,2,3,5,7,9,10,9,7,5,3,2,1,1,1,23,59,131,244,382,501,548,501,382,244,131,59,23,5,10,24,59,129,239,373,488,534,488,373,239,129,59,24,10,5,6,19,50,112,210,329,431,472,431,329,210,112,50,19,6,54,118,219,342,447,488,447,342,219,118,54,3,4,5,7,9,11,12,11,9,7,5,4,3,3,3,4,5,7,10,12,13,12,10,7,5,4,3,3,3,3,4,5,7,10,12,13,12,10,7,5,4,3,3,10,23,54,115,213,331,433,473,433,331,213,115,54,23,10,4,4,4,5,6,8,11,13,14,13,11,8,6,5,4,4,4,4,4,6,8,10,12,13,12,10,8,6,4,4,21,54,119,223,348,456,498,456,348,223,119,54,21,3,3,5,7,9,11,12,11,9,7,5,3,3,2,3,4,6,8,11,12,11,8,6,4,3,2,23,58,129,242,378,495,541,495,378,242,129,58,23,1,2,3,5,8,10,11,10,8,5,3,2,1,3,3,3,4,5,7,10,12,13,12,10,7,5,4,3,3,3,5,5,5,7,9,11,13,14,13,11,9,7,5,5,5,2,6,19,51,113,212,332,435,476,435,332,212,113,51,19,6,2,5,5,5,6,7,9,12,14,15,14,12,9,7,6,5,5,5,1,1,2,3,5,8,10,11,10,8,5,3,2,1,1,4,4,4,6,8,10,12,13,12,10,8,6,4,4,4,20,53,119,222,349,456,499,456,349,222,119,53,20,1,1,1,3,5,7,9,10,9,7,5,3,1,1,1,5,6,7,9,12,15,15,15,12,9,7,6,5,5,5,6,7,9,12,14,15,14,12,9,7,6,5,5,57,126,235,367,481,526,481,367,235,126,57,1,2,3,5,8,10,11,10,8,5,3,2,1,5,6,7,9,12,14,15,14,12,9,7,6,5,2,3,5,7,9,10,9,7,5,3,2,58,128,237,371,485,530,485,371,237,128,58,4,4,6,8,10,12,13,12,10,8,6,4,4,4,4,6,8,10,12,13,12,10,8,6,4,4,5,5,6,7,9,11,14,15,14,11,9,7,6,5,5,2,2,2,2,4,6,8,10,11,10,8,6,4,2,2,2,2,2,2,2,3,4,6,9,11,12,11,9,6,4,3,2,2,2,4,5,6,8,11,13,14,13,11,8,6,5,4,2,4,6,8,10,11,10,8,6,4,2,4,5,7,9,12,12,12,9,7,5,4,4,5,7,10,12,13,12,10,7,5,4,23,55,119,221,345,451,493,451,345,221,119,55,23,7,22,58,130,243,381,499,546,499,381,243,130,58,22,7,61,133,245,381,498,545,498,381,245,133,61,4,4,6,8,10,12,13,12,10,8,6,4,4,3,4,5,7,10,12,13,12,10,7,5,4,3,5,5,5,6,7,9,12,14,15,14,12,9,7,6,5,5,5,50,111,207,325,426,466,426,325,207,111,50,4,4,5,6,8,11,13,14,13,11,8,6,5,4,4,1,1,2,3,5,8,10,11,10,8,5,3,2,1,1,2,2,2,2,4,6,8,10,11,10,8,6,4,2,2,2,2,56,119,220,342,447,489,447,342,220,119,56,3,4,5,7,9,11,12,11,9,7,5,4,3,4,5,6,8,11,14,14,14,11,8,6,5,4,1,1,2,3,5,8,10,11,10,8,5,3,2,1,1,2,2,2,3,4,6,8,10,11,10,8,6,4,3,2,2,2,5,7,9,11,13,14,13,11,9,7,5,1,1,1,2,3,5,8,10,11,10,8,5,3,2,1,1,1,5,5,6,7,9,12,14,15,14,12,9,7,6,5,5,2,2,4,6,8,10,11,10,8,6,4,2,2,5,6,7,9,12,14,15,14,12,9,7,6,5,7,21,53,117,219,343,449,491,449,343,219,117,53,21,7,21,55,122,228,356,466,510,466,356,228,122,55,21,2,6,18,48,108,202,316,414,452,414,316,202,108,48,18,6,2,2,2,2,4,6,8,10,11,10,8,6,4,2,2,2,2,2,2,3,4,6,8,10,11,10,8,6,4,3,2,2,2,1,1,1,3,5,7,9,10,9,7,5,3,1,1,1,3,8,23,59,132,246,385,504,551,504,385,246,132,59,23,8,3,4,4,5,6,8,10,12,13,12,10,8,6,5,4,4,6,7,9,11,13,14,13,11,9,7,6,4,4,5,6,8,10,12,13,12,10,8,6,5,4,4,3,7,21,53,117,219,343,448,491,448,343,219,117,53,21,7,3,2,2,2,4,6,8,10,11,10,8,6,4,2,2,2,5,7,9,11,13,14,13,11,9,7,5],peak:[5,16,29,42,54,68,84,99,112,127,142,157,173,186,198,212,227,242,258,273,286,299,312,325,338,353,369,385,402,418,433,447,461,475,489,502,514,527,539,550,562,575,589,605,622,637,649,660,671,683,697,710,722,735,750,764,777,792,808,822,834,847,861,877,891,905,921,935,948,962,976,991,1007,1023,1039,1055,1071,1084,1097,1113,1129,1142]}}]},{name:"Copy Number Variation",type:"heatmap",autowidth:!0,height:20,data:[{id:"Cell Line-123",offset:10,data:[7,5,5,5,6,7,9,8,8,8,8,5,7,9,15,15,16,9,9,7,8,10,9,21,22,22,24,20,24,26,24,25,24,31,29,33,33,33,33,33,20,17,19,18,18,18,27,23,31,26,31,31,31,34,32,31,30,30,30,30,30,24,24,20,21,17,17,27,29,25,31,31,31]}]},{name:"Tissue Distribution (Heart, Liver, Kidney)",type:"heatmap",height:20,data:[{id:"123456_at",offset:100,data:[25,35,46]},{id:"345678_at",offset:181,data:[65,46,29]}]},{name:"Another CNV",type:"line",autowidth:!0,height:20,fill:["rgb(255,0,0)","rgb(0,255,0)"],outline:["rgb(255,0,0)","rgb(0,255,0)"],data:[{id:"Cell Line-124",offset:10,data:[30,31,31,33,29,29,30,31,32,33,33,31,31,29,30,30,27,32,31,31,28,31,31,29,31,31,31,26,25,29,26,26,21,26,21,31,31,28,28,23,25,28,28,31,33,33,32,31,31,31,24,28,28,28,31,32,32,31,31,28,24,28,24,29,31,29,31]}]},{type:"bar",height:20,fill:["rgb(255,0,0)","rgb(0,0,255)","rgb(255,255,0)"],outline:["rgb(255,0,0)","rgb(0,0,255)","rgb(255,255,0)"],data:[{id:"123456_at",offset:100,data:[25,35,46]},{id:"345678_at",offset:181,data:[65,46,29]}]},{name:"Clones",type:"box",data:[{id:"clone-1234567",fill:"rgb(255,255,51)",outline:"rgb(0,0,0)",dir:"left",data:[[121,196]]},{id:"clone-2345678",fill:"rgb(255,255,51)",outline:"rgb(0,0,0)",dir:"right",data:[[371,400]],landmarks:[{offset:157,text:"Gap "},{offset:137,text:"Insertion "}]}]},{name:"SNP Location",type:"triangle",data:[{id:"SNP123",fill:"rgb(100,0,0)",outline:"rgb(0,0,0)",offset:23},{id:"SNP789",fill:"rgb(100,0,0)",outline:"rgb(0,0,0)",offset:195}]},{name:"SNP Sequences",type:"sequence",subtype:"DNA",data:[{id:"SNP123",offset:19,sequence:"CACA[AT]GCACCTTGTA"},{id:"SNP234",offset:41,sequence:"ATCG[TG]AATA"},{id:"SNP789",offset:116,sequence:"GCCC[CT]AGGG"}]}]}},this.createMesh=function(){for(var t={nodes:[],edges:[]},e=this,i=0;i<49;i++){var s={},a=Math.floor(this.random()*this.shapes.length),r=Math.floor(this.random()*this.colors.length);s.id="ND"+i,s.shape=this.shapes[a],s.color=this.colors[r],s.size=1,t.nodes.push(s)}var n=function(i,s){var a={},r=Math.floor(e.random()*e.lines.length),n=Math.floor(e.random()*e.colors.length);return a.id1=t.nodes[i].id,a.id2=t.nodes[s].id,a.width=1,a.type=e.lines[r],a.color=e.colors[n],a};for(i=0;i<t.nodes.length;i++)0!=Math.floor(7*this.random())&&(i+1<t.nodes.length&&(i+1)%7!=0&&t.edges.push(n(i,i+1)),i+7<t.nodes.length&&t.edges.push(n(i,i+7)));return t}},CanvasXpress.prototype.FunctionData=function(t){this.add=function(t,e){return new Number(e)+new Number(t)},this.sub=function(t,e){return e-t},this.mul=function(t,e){return e*t},this.div=function(t,e){return e/t},this.sin=function(t){return Math.sin(t)},this.cos=function(t){return Math.cos(t)},this.tan=function(t){return Math.tan(t)},this.sec=function(t){return 1/Math.cos(t)},this.csc=function(t){return 1/Math.sin(t)},this.cot=function(t){return 1/Math.tan(t)},this.asin=function(t){return Math.asin(t)},this.acos=function(t){return Math.acos(t)},this.atan=function(t){return Math.atan(t)},this.asec=function(t){return Math.acos(1/t)},this.acsc=function(t){return Math.asin(1/t)},this.acot=function(t){return Math.atan(1/t)},this.sinh=function(t){return.5*(Math.exp(t)-Math.exp(-t))},this.cosh=function(t){return.5*(Math.exp(t)+Math.exp(-t))},this.tanh=function(t){return(Math.exp(t)-Math.exp(-t))/(Math.exp(t)+Math.exp(-t))},this.sech=function(t){return 1/cosh(t)},this.csch=function(t){return 1/sinh(t)},this.coth=function(t){return 1/tanh(t)},this.asinh=function(t){return Math.log(t+Math.sqrt(t*t+1))},this.acosh=function(t){return Math.log(t+Math.sqrt(t*t-1))},this.atanh=function(t){return.5*Math.log((1+t)/(1-t))},this.asech=function(t){return acosh(1/t)},this.acsch=function(t){return asinh(1/t)},this.acoth=function(t){return atanh(1/t)},this.exp=function(t){return Math.exp(t)},this.ln=function(t){return Math.log(t)},this.log=function(t){return Math.log(t)/Math.LN10},this.logb=function(t,e){return Math.log(e)/Math.log(t)},this.pow=function(t,e){return Math.pow(e,t)},this.pow10=function(t){return Math.pow(10,t)},this.sq=function(t){return t*t},this.sqrt=function(t){return Math.sqrt(t)},this.abs=function(t){return t>=0?t:-t},this.sgn=function(t){return 0==t?0:t>0?1:-1},this.chs=function(t){return-t},this.neg=function(t){return-t},this.floor=function(t){return Math.floor(t)},this.ceil=function(t){return Math.ceil(t)},this.ip=function(t){return parseInt(t)},this.fp=function(t){return abs(t)-ip(abs(t))},this.inv=function(t){return 1/t},this.idiv=function(t,e){return parseInt(e/t)},this.mod=function(t,e){return e%t},this.and=function(t,e){return e&t},this.or=function(t,e){return e|t},this.xor=function(t,e){return e^t},this.not=function(t){return~t},this.lt=function(t,e){return e<t?1:0},this.le=function(t,e){return e<=t?1:0},this.eq=function(t,e){return e==t?1:0},this.ne=function(t,e){return e!=t?1:0},this.ge=function(t,e){return e>=t?1:0},this.gt=function(t,e){return e>t?1:0},this.Min=function(t,e){return Math.min(e,t)},this.Max=function(t,e){return Math.max(e,t)},this.pc=function(t,e){return e*t/100},this.pcch=function(t,e){return 100*t/e},this.gammaLn=function(t){var e=new Array(76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18),i=new Number(t),s=new Number(t+5.5),a=new Number(1.000000000190015);for(var r in s-=(t+.5)*Math.log(s),e)a+=e[r]/++i;return Math.log(2.5066282746310007*a/t)-s},this.gammaLn2=function(t){var e,i,s,a=0,r=[76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],n=1.000000000190015;for(s=(i=e=t)+5.5,s-=(e+.5)*Math.log(s);a<6;a++)n+=r[a]/++i;return Math.log(2.5066282746310007*n/e)-s},this.betaCf=function(t,e,i){var s,a,r,n,o=1e-30,h=1,l=e+i,c=e+1,d=e-1,p=1,g=1-l*t/c;for(Math.abs(g)<o&&(g=o),n=g=1/g;h<=100&&(g=1+(a=h*(i-h)*t/((d+(s=2*h))*(e+s)))*g,Math.abs(g)<o&&(g=o),p=1+a/p,Math.abs(p)<o&&(p=o),n*=(g=1/g)*p,g=1+(a=-(e+h)*(l+h)*t/((e+s)*(c+s)))*g,Math.abs(g)<o&&(g=o),p=1+a/p,Math.abs(p)<o&&(p=o),n*=r=(g=1/g)*p,!(Math.abs(r-1)<3e-7));h++);return n},this.beta=function(t,e,i){var s=0===t||1===t?0:Math.exp(this.gammaLn2(e+i)-this.gammaLn2(e)-this.gammaLn2(i)+e*Math.log(t)+i*Math.log(1-t));return!(t<0||t>1)&&(t<(e+1)/(e+i+2)?s*this.betaCf(t,e,i)/e:1-s*this.betaCf(1-t,i,e)/i)},this.betaInv=function(t,e,i){var s,a,r,n,o,h,l,c,d,p,g=e-1,u=i-1,m=0;if(t<=0)return 0;if(t>=1)return 1;for(e>=1&&i>=1?(r=t<.5?t:1-t,h=(2.30753+.27061*(n=Math.sqrt(-2*Math.log(r))))/(1+n*(.99229+.04481*n))-n,t<.5&&(h=-h),l=(h*h-3)/6,c=2/(1/(2*e-1)+1/(2*i-1)),d=h*Math.sqrt(l+c)/c-(1/(2*i-1)-1/(2*e-1))*(l+5/6-2/(3*c)),h=e/(e+i*Math.exp(2*d))):(s=Math.log(e/(e+i)),a=Math.log(i/(e+i)),h=t<(n=Math.exp(e*s)/e)/(d=n+(o=Math.exp(i*a)/i))?Math.pow(e*d*t,1/e):1-Math.pow(i*d*(1-t),1/i)),p=-this.gammaLn2(e)-this.gammaLn2(i)+this.gammaLn2(e+i);m<10;m++){if(0===h||1===h)return h;if((h-=n=(o=(this.beta(h,e,i)-t)/(n=Math.exp(g*Math.log(h)+u*Math.log(1-h)+p)))/(1-.5*Math.min(1,o*(g/h-u/(1-h)))))<=0&&(h=.5*(h+n)),h>=1&&(h=.5*(h+n+1)),Math.abs(n)<1e-8*h&&m>0)break}return h},this.lowRegGamma=function(t,e){var i,s=this.gammaLn(t),a=t,r=1/t,n=r,o=e+1-t,h=1/1e-30,l=1/o,c=l,d=1,p=-~(8.5*Math.log(t>=1?t:1/t)+.4*t+17);if(e<0||t<=0)return Number.NaN;if(e<t+1){for(;d<=p;d++)r+=n*=e/++a;return r*Math.exp(-e+t*Math.log(e)-s)}for(;d<=p;d++)c*=(l=1/(l=(i=-d*(d-t))*l+(o+=2)))*(h=o+i/h);return 1-c*Math.exp(-e+t*Math.log(e)-s)},this.gammaPinv=function(t,e){var i,s,a,r,n,o,h=0,l=e-1,c=this.gammaLn(e);if(t>=1)return Math.max(100,e+100*Math.sqrt(e));if(t<=0)return 0;for(e>1?(n=Math.log(l),o=Math.exp(l*(n-1)-c),r=t<.5?t:1-t,i=(2.30753+.27061*(s=Math.sqrt(-2*Math.log(r))))/(1+s*(.99229+.04481*s))-s,t<.5&&(i=-i),i=Math.max(.001,e*Math.pow(1-1/(9*e)-i/(3*Math.sqrt(e)),3))):i=t<(s=1-e*(.253+.12*e))?Math.pow(t/s,1/e):1-Math.log(1-(t-s)/(1-s));h<12;h++){if(i<=0)return 0;if((i-=s=(a=(this.lowRegGamma(e,i)-t)/(s=e>1?o*Math.exp(-(i-l)+l*(Math.log(i)-n)):Math.exp(-i+l*Math.log(i)-c)))/(1-.5*Math.min(1,a*((e-1)/i-1))))<=0&&(i=.5*(i+s)),Math.abs(s)<1e-8*i)break}return i},this.tinv=function(t,e,i){i&&(t/=2);var s=this.betaInv(2*Math.min(t,1-t),.5*e,.5);return s=Math.sqrt(e*(1-s)/s),t>.5?s:-s},this.gamma=function(t){return Math.exp(this.gammaLn(t))},this.fact=function(t){var e=new Number(t);if(t<=1)return 1;if(t>100||t%1)return Math.exp(this.gammaLn(t+1));for(;--t;)e*=t;return e},this.comb=function(t,e){return Math.floor(.5+Math.exp(this.gammaLn(e+1)-this.gammaLn(t+1)-this.gammaLn(e-t+1)))},this.perm=function(t,e){return Math.floor(.5+Math.exp(this.gammaLn(e+1)-this.gammaLn(e-t+1)))},this.gcd=function(t,e){return 0==t?e||1:e?this.gcd(e,t%e):t},this.lcm=function(t,e){return t/this.gcd(t,e)*e},this.prime=function(t){var e=new Number(5),i=new Number(4),s=parseInt(t/e);if(2==t||3==t||5==t)return 1;if(t<5||0==(1&t)||t%3==0)return 0;for(;e*s<t&&e<s;)s=parseInt(t/(e+=i=6-i));return e*s==t?0:1},this.implied=function(t){return"neg"!=t&&/^(\d+\.\d+|\d+\.?|\.\d+)(e[-+]?\d+)?|\w+$/.test(t)},this.tokenize=function(t){var e,i=[],s=new String(""),a=/(\d+\.\d+|\d+\.?|\.\d+)(e[-+]?\d+)?|[xy]|[a-z]+|[-+*\/(),^]|<=?|>=?|==|!=|&&|\|\|/g;for(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.toLowerCase()).replace(/\s/g,"")).replace(/\+\+/g,"+")).replace(/\+-/g,"-")).replace(/-\+/g,"-")).replace(/--/g,"+")).replace(/^\+/,"")).replace(/([(*\/&\|<>=])\+/g,"$1")).replace(/^-/,"neg ")).replace(/([(*\/&\|<>=])-/g,"$1neg ")).replace(/\)(\(|\w)/g,")*$1")).replace(/(\d)\(/g,"$1*(");e=a.exec(t);)this.implied(s)&&this.implied(e[0].toString())&&i.push("*"),i.push(s=e[0]);return i},this.isValidEnd=function(t){return/^(\d+\.\d+|\d+\.?|\.\d+)(e[-+]?\d+)?|[)xye]|pi|rand$/.test(t)},this.toPostFx=function(t){for(var e={sin:16,cos:16,tan:16,sec:16,csc:16,cot:16,asin:16,acos:16,atan:16,asec:16,acsc:16,acot:16,sinh:16,cosh:16,tanh:16,sech:16,csch:16,coth:16,asinh:16,acosh:16,atanh:16,asech:16,acsch:16,acoth:16,exp:16,ln:16,log:16,logb:16,pow:16,sq:16,sqrt:16,abs:16,sgn:16,chs:16,floor:16,ceil:16,ip:16,fp:16,inv:16,min:16,max:16,gamma:16,fact:16,comb:16,perm:16,rand:16,gcd:16,lcm:16,prime:16,and:16,or:16,xor:16,x:16,y:16,pi:16,e:16,neg:15,not:15,"^":14,"*":13,"/":13,mod:13,div:13,"+":12,"-":12,"<":10,"<=":10,"==":10,"!=":10,">=":10,">":10,"&&":5,"||":4,",":1},i=new String,s=new String(""),a=new Array,r=new Array;i=t.shift();){if("("==i)a.push(i);else if(e[i]){for(;a.length&&"("!=a[a.length-1]&&e[a[a.length-1]]>=e[i];)r.push(a.pop());","!=i||this.isValidEnd(s)||r.push("Unexpected: "+s),","!=i&&a.push(i)}else if(")"==i){for(this.isValidEnd(s)||r.push("Unexpected: "+s);a.length&&"("!=a[a.length-1];)r.push(a.pop());0==a.length&&r.push("Unmatched: )"),a.pop()}else/^[-+]?(\d+\.?|\d*\.\d+)(e[-+]?\d+)?$/.test(i)?r.push(i):r.push("Unknown: "+i);s=i}for(this.isValidEnd(s)||r.push("Unexpected: "+s);i=a.pop();)"("==i&&r.push("Unmatched: ("),r.push(i);return r},this.syntaxCheck=function(t){for(var e={sin:1,cos:1,tan:1,sec:1,csc:1,cot:1,asin:1,acos:1,atan:1,asec:1,acsc:1,acot:1,sinh:1,cosh:1,tanh:1,sech:1,csch:1,coth:1,asinh:1,acosh:1,atanh:1,asech:1,acsch:1,acoth:1,exp:1,ln:1,log:1,logb:2,pow:2,sq:1,sqrt:1,abs:1,sgn:1,chs:1,floor:1,ceil:1,ip:1,fp:1,inv:1,min:2,max:2,gamma:1,fact:1,comb:2,perm:2,gcd:2,lcm:2,prime:1,and:2,or:2,xor:2,neg:1,not:1,"^":2,"*":2,"/":2,mod:2,div:2,"+":2,"-":2,"<":2,"<=":2,"==":2,"!=":2,">=":2,">":2,"&&":2,"||":2},i=new Number(0),s=new String,a=0;a<t.length;a++,i++){if(/^Un(matched|known|expected).*/.test(s=t[a]))return s;if(e[s]){if(i<e[s])return"Invalid use of: "+s;i-=e[s]}}return 1!=i&&(t.length?"Unused arguments":"No function")},this.evaluate=function(t,e,i){alias={"+":"add","-":"sub","*":"mul","/":"div","!":"fact","x^y":"pow","^":"pow","10^":"pow10",div:"idiv","<":"lt","<=":"le","==":"eq","!=":"ne",">=":"ge",">":"gt","%":"pc","%ch":"pcch"};for(var s=new Array,a=new String,r=0;r<t.length;r++)if("x"==(a=t[r])?s.push(e):"y"==a?s.push(i):"pi"==a?s.push(Math.PI):"e"==a?s.push(Math.E):"rand"==a?s.push(Math.random()):this[alias[a]||a]?s.push(this[alias[a]||a](s.pop(),this[alias[a]||a].length>1?s.pop():0)):s.push(a),isNaN(s[s.length-1]))return Number.NaN;return parseFloat(s.pop())},this.set2DPlot=function(t,e){var i={vars:[],smps:["X","Y"],data:[]},s=256,a=this.setMinX?this.setMinX:-1,r=this.setMaxX?this.setMaxX:1,n=this.setMinY?this.setMinY:-1,o=(r-a)/s,h=((this.setMaxY?this.setMaxY:1)-n)/s,l=1;if(1==e)for(var c=a,d=0;d<s;d++){var p=this.evaluate(t,c,0);isNaN(p)&&(p=""),c+=o,i.vars.push("v"+l),i.data.push([c,p]),l++}else for(p=n,d=0;d<s;d++){c=this.evaluate(t,0,p);isNaN(c)&&(c=""),p+=h,i.vars.push("v"+l),i.data.push([c,p]),l++}return i},this.set3DPlot=function(t){for(var e={vars:[],smps:["X","Y","Z"],data:[]},i=[],s=[],a=[],r=this.setMinX?this.setMinX:-Math.PI/2,n=this.setMaxX?this.setMaxX:Math.PI/2,o=this.setMinY?this.setMinY:-Math.PI/2,h=this.setMaxY?this.setMaxY:Math.PI/2,l=1,c=0;c<=25;c++)for(var d=o+(h-o)*c/25,p=0;p<=25;p++){var g=r+(n-r)*p/25,u=this.evaluate(t,g,d);isFinite(u)||(u=0),e.vars.push("v"+l),e.data.push([g,u,d]),i.push(g),s.push(d),a.push(u),l++}return e},this.initializeFunctionData=function(){var t=this.toPostFx(this.tokenize(this.data.fx)),e=this.syntaxCheck(t);if(e)alert(e);else{var i=0;for(var s in t)"x"==t[s]?i|=1:"y"==t[s]&&(i|=2);0==i&&(i=1),3==i?(this.data.y=this.set3DPlot(t),this.graphType="Scatter3D"):(this.data.y=this.set2DPlot(t,i),this.graphType="Scatter2D",this.lineType="spline"),this.scatterType="function"}},t&&this.initializeFunctionData()},CanvasXpress.prototype.initRemote=function(){this.ajaxRequest=function(url,params,callback,format,method){var http=this.getHttpRequest(),pars="";for(var p in params)pars+=p+"="+escape(params[p])+"&";pars+="uid="+(new Date).getTime(),method="POST"==method?"POST":"GET",http&&url&&("GET"==method?(url.match(/\?/)?url+="&"+pars:url+="?"+pars,http.open(method,url,!0),http.overrideMimeType&&http.overrideMimeType("text/xml"),"blob"==format?http.responseType="blob":"arraybuffer"==format?http.responseType="arraybuffer":"binary"==format&&(http.responseType="blob"),pars=null):(http.open(method,url,!0),http.setRequestHeader("Content-type","application/x-www-form-urlencoded")),http.onreadystatechange=function(){if(4==http.readyState&&(200==http.status||0==http.status&&http.responseURL.match(/^file:/))){var result="";if(format&&""!=format&&"text"!=format&&"json"!=format||!http.responseText||(result=http.responseText),"binary"==format){var reader=new FileReader;reader.onload=function(){callback&&callback(this.result)},reader.readAsBinaryString(http.response)}else"json"==format?(result=result.replace(/[\n\r]/g,""),result=eval("("+result+")")):("blob"==format||"arraybuffer"==format)&&(result=http.response),callback&&callback(result)}},http.send(pars))},this.getHttpRequest=function(){var t;if(window.XMLHttpRequest)try{t=new XMLHttpRequest}catch(e){t=!1}else if("undefined"!=typeof ActiveXObject)try{t=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{t=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){t=!1}}return t},this.requestRemoteData=function(t){var e=this.cloneObject(this.remoteParams);e.index=this.remoteDataIndex,e.dir=this.remoteDirection,t&&(e.records=!0),"file"==this.remoteServiceType?this.ajaxRequest(this.remoteData[this.remoteDataIndex][1],e,this.updateRemoteData,"json","GET"):this.ajaxRequest(this.remoteService,e,this.updateRemoteData,"json","GET")},this.updateGenomeData=function(t,e,i){var s=this;this.ajaxRequest(t,e,(function(t){e.gene&&(s.setMinX=null,s.setMaxX=null),s.updateData(t),s.hideMask(),i&&i()}),"json","GET")},this.getGeneFromGenomeObject=function(t){return!!(t&&t[0]&&t[0].data&&t[0].data[0]&&t[0].data[0].id)&&t[0].data[0].id},this.saveRemote=function(t,e,i){var s=this.cloneObject(this.remoteParams);s.index=this.remoteDataIndex,s.save=t,e&&(s.name=this.stringifyJSON(e));var a=i||this.getConfig();"Network"==this.graphType&&(a.calculateLayout=!1),s.params=this.stringifyJSON(a),s.afterRender=this.stringifyJSON(CanvasXpress.stack[this.target].afterRender),s.cxdata=this.stringifyJSON(this.cloneObject(this.data)),this.ajaxRequest(this.remoteService,s,(function(){alert("CanvasXpress data saved "+t+" in the server")}),"json","POST")},this.clearRemote=function(){params.clear=!0,this.ajaxRequest(this.remoteService,params,(function(){alert("CanvasXpress data parameters clear from the server")}),"json","POST")},this.castRemoteParameters=function(t){for(var e in t.remoteParentId=this.remoteParentId,t.remoteService=this.remoteService,t.remoteDirection=this.remoteDirection,t.remoteDataIndex=this.remoteDataIndex,t.remoteAutoPlay=this.remoteAutoPlay,t.remoteAutoPlayDelay=this.remoteAutoPlayDelay,t.remoteData=this.remoteData,t.remoteIds=this.remoteIds,t.remoteServiceType=this.remoteServiceType,this.remoteTransitionEffect=t.remoteTransitionEffect,this.remoteParams)t.remoteParams[e]=this.remoteParams[e];t.addRemoveNavigationListeners("addEvtListener")},this.getOriginalDimensions=function(){return[this.originalWidth,this.originalHeight]},this.fitCanvasToCurrent=function(t){if(this.remoteAutoSize){for(var e=["resizable","responsive","aspectratio"],i=!1,s=0;s<e.length;s++){var a=this.meta.canvas.ctx.canvas.getAttribute(e[s]);a&&(t.meta.canvas.ctx.canvas.setAttribute(e[s],a),i=!0)}(i||t.width!=this.width||t.height!=this.height)&&(t.setDimensions(this.width,this.height),t.resizable=this.resizable,t.resizableX=this.resizableX,t.resizableY=this.resizableY)}},this.hideRemoteData=function(t){for(var e=t.childNodes,i=[],s=0;s<e.length;s++)"DIV"==e[s].nodeName.toUpperCase()&&(i[s]=e[s]);i[i.length-2].style.left="-5000px",i[i.length-1].style.left="-5000px"},this.updateRemoteData=function(t){return function(e,i){if(e&&e.data||e&&e.config&&e.config.graphType&&"Map"==e.config.graphType||e&&e.config&&e.config.graphType&&"Genome"==e.config.graphType&&e.tracks){var s;if("file"==t.remoteServiceType){(s=e.config?e:e.data).renderTo=e.renderTo||t.remoteData[t.remoteDataIndex][0];for(var a=s.renderTo,r=0,n=t.$(s.renderTo);n;)s.renderTo.match(/-\d*$/)?(r=Number(s.renderTo.split("-").pop())+1,s.renderTo=s.renderTo.replace(/\d*$/,r)):(r++,s.renderTo=a+"-"+r),n=t.$(s.renderTo);a!=s.renderTo&&(CanvasXpress.chain[a]=s.renderTo)}else s=t.appendUserConfig(e.data);var o=!s.uploadFile&&!e.uploadFile&&"next"==t.remoteDirection,h=t.$("container-"+t.target);if(h){var l=h.parentNode,c=t.getOriginalDimensions(),d=t.target,p=[],g=e.config||e.data&&e.data.config,u=s.renderTo||t.newId("-cX-data-"),m=s.config&&s.config.width?s.config.width:c[0],f=s.config&&s.config.height?s.config.height:c[1];if(t.insertTarget(u,h,m,f,o),s.hidden=!s.uploadFile,t.isUpdateRemoteData=!0,s.config.skipRender=t.isOneTimeFunctionInConfig(s.config),s.uploadFile&&(h.style.display="none"),e.afterRender){for(var y=0;y<e.afterRender.length;y++)"segregate"==e.afterRender[y][0]?"Variables"==e.afterRender[y][1][0]?p.push(["segregateVariables",e.afterRender[y][1][1]]):"Samples"==e.afterRender[y][1][0]&&p.push(["segregateSamples",e.afterRender[y][1][1]]):p.push(t.cloneObject(e.afterRender[y]));delete s.afterRender}s.data&&t.cleanData(s.data),s.data&&(delete s.data.l,delete s.data.w);var x=new CanvasXpress(s);if(t.hideRemoteData(l),x.isUpdateRemoteData=!0,x.target0=t.target0?t.target0:t.target,t.castRemoteParameters(x),t.addSelectOptionsRemoteData(e.ids),t.resetInfoSpan(!1,!0),"Map"==x.graphType&&x.mapId&&!t.isObject(window[x.mapId]))return t.destroy(t.target),void(p.length&&(CanvasXpress.stack[x.target].afterRender=p));if(t.animateTransition(l,d,s.uploadFile,t.isExample),g&&!x.dataURL){if(x.imagesToLoad.length)return void x.loadImages(x.imagesToLoad,p);x.afterRender(p),x.skipRender=!1,t.fitCanvasToCurrent(x)}else if(e.postprocess){for(y=0;y<e.postprocess.length;y++){var v=e.postprocess[y].func,b=e.postprocess[y].param;if(v){if("groupSamples"==v&&x.isGroupedData)continue;b?x[v].apply(x,b):x[v]()}}t.fitCanvasToCurrent(x)}e.info&&x.updateInfoDiv(e.info),t.showCode&&x.updateCodeDiv(),i&&i(x),t.userEvents.remoteupdate&&t.userEvents.remoteupdate.call(x,x)}}else t.remoteDataIndex="next"==t.remoteDirection?Math.max(0,t.remoteDataIndex-1):Number(t.remoteDataIndex)+1,t.remoteUpdating=!1}}(this),this.appendUserConfig=function(t){if(t.config)for(var e in this.meta.config.user)e.match(/decrease|remote|^calculateLayout$|layoutComb/)||t.config[e]||(t.config[e]=this.meta.config.user[e]);return t},this.updateCurrentRemoteData=function(){var t=this.$(this.remoteParentId+"-canvasXpressRemoteWindowBarSelect");if(t){if(t.selectedIndex=this.remoteDataIndex,0==this.remoteIds.length)for(var e=0;e<t.childNodes.length;e++)this.remoteIds.push(t.childNodes[e].text);this.resetSelectOptionsRemoteData()}},this.resetSelectOptionsRemoteData=function(){var t=this.$(this.remoteParentId+"-canvasXpressRemoteWindowBarSelect");if(t){if(0==this.remoteIds.length)for(var e=0;e<t.childNodes.length;e++)this.remoteIds.push(t.childNodes[e].text);this.clearSelectOptionsRemoteData(),this.addSelectOptionsRemoteData(this.remoteIds)}},this.clearSelectOptionsRemoteData=function(){var t=this.$(this.remoteParentId+"-canvasXpressRemoteWindowBarSelect"),e=this.$(this.remoteParentId+"-canvasXpressRemoteWindowBarDotsDiv");if(t&&t.hasChildNodes()&&e){for(;t.childNodes.length>=1;)t.removeChild(t.firstChild);for(;e.childNodes.length>=1;)e.removeChild(e.firstChild)}},this.addSelectOptionsRemoteData=function(t){if(t&&t.length>0){this.remoteIds=t;var e=this.$(this.remoteParentId+"-canvasXpressRemoteWindowBarDiv"),i=this.$(this.remoteParentId+"-canvasXpressRemoteWindowBarSelect"),s=this.$(this.remoteParentId+"-canvasXpressRemoteWindowBarDotsDiv"),a=this.$(this.remoteParentId+"-canvasXpressRemoteWindowBarButtonsDiv"),r=this.meta.canvas.canvasPixelRatio;if(e&&i&&s&&a){this.clearSelectOptionsRemoteData();for(var n=0;n<this.remoteIds.length;n++){var o=this.$cX("option",{text:this.remoteIds[n],value:n});this.remoteDataIndex==n&&(o.selected="selected",i.selectedIndex=this.remoteDataIndex);try{i.add(o,null)}catch(t){i.add(o)}}var h=Math.min(this.remoteIds.length,8),l=Number(this.remoteDataIndex);for(n=0;n<h;n++){var c=(l+n)%this.remoteIds.length,d=this.$cX("div",{id:this.remoteParentId+"-canvasXpressRemoteWindowBarDotsIndex"+n,className:"CanvasXpressSlider CanvasXpressSliderDots",alt:this.remoteIds[c],title:this.remoteIds[c]},{cssFloat:"left",position:"relative",border:"1px solid rgba(35, 82, 124, 0.5)"});d.dataset.index=c,s.appendChild(d)}this.remoteIds.length<=8&&(a.style.display="none"),1==this.remoteIds.length?this.hideNavigation():this.showNavigation();var p=(this.meta.canvas.ctx.canvas.width/r-s.clientWidth)/2+16;e.style.left=p+"px"}}else if(!this.remoteIds||1==this.remoteIds.length){var g=this.$(this.remoteParentId+"-canvasXpressRemoteWindow");g&&(g.style.height=this.meta.canvas.ctx.canvas.height/r+"px")}},this.updateRemoteDots=function(){if(this.$(this.remoteParentId+"-canvasXpressRemoteWindowBarDotsDiv"))for(var t=Math.min(this.remoteIds.length,8),e=this.remoteDataIndex,i=0;i<t;i++){var s=(e+i)%this.remoteIds.length,a=this.$(this.remoteParentId+"-canvasXpressRemoteWindowBarDotsIndex"+i);a&&(a.dataIndex=s,a.alt=this.remoteIds[s],a.title=this.remoteIds[s])}},this.animateTransition=function(t,e,i,s){if(t){for(var a=t.childNodes,r=[],n=0;n<a.length;n++)"DIV"==a[n].nodeName.toUpperCase()&&(r[n]=a[n]);var o=r[r.length-2];o.className="CanvasXpressContainerNT";var h=r[r.length-1];if(h.className="CanvasXpressContainerNT",t.id.match("canvasXpressRemoteWindowBuffer")){var l=this,c=this.transitionStep,d=0,p=o.clientWidth?o.clientWidth:t.clientWidth,g=o.clientHeight?o.clientHeight:t.clientHeight;if(t.parentNode.style.overflow="hidden",s&&(o.style.display="none"),"fade"==this.remoteTransitionEffect){var u="next"!=this.remoteDirection||i?0:1,m="next"!=this.remoteDirection||i?1:0;o.style.opacity=u,o.style.filter="alpha(opacity = "+100*u+")",o.style.position="absolute",o.style.display="block",h.style.opacity=m,h.style.filter="alpha(opacity = "+100*m+")",h.style.position="absolute",h.style.display="block",function(){var t=1/c;this.update=function(){var a,r;if("next"!=l.remoteDirection||i?(r=1-t*d,a=0+t*d):(a=1-t*d,r=0+t*d),d>=c){clearInterval(s);var n=o.id.replace("container-",""),p=h.id.replace("container-","");l.destroy(e);var g=CanvasXpress.$(n)||CanvasXpress.$(p);o.style.position="",h.style.position="",l.remoteUpdating=!1,l.updateCurrentRemoteData(),l.isUpdateRemoteData=!1,l.triggerDataLoaded("animateTransition",g)}else o.style.opacity=a,o.style.filter="alpha(opacity = "+100*a+")",h.style.opacity=r,h.style.filter="alpha(opacity = "+100*r+")";d++};var s=l.setInterval(this.update,100)}.call()}else{(function(){this.update=function(){var a=2*p,r=Math.max(o.clientHeight,h.clientHeight);t.style.width=(a>0?a:p)+"px",t.style.height=(r>0?r:g)+"px";var n="slide"==l.remoteTransitionEffect?.5*Math.atan(d/c*10-5)/Math.atan(5)+.5:1,u=p*n;if(d>=c){clearInterval(s);var m=o.id.replace("container-",""),f=h.id.replace("container-","");l.destroy(e);var y=CanvasXpress.$(m)||CanvasXpress.$(f);return"next"!=l.remoteDirection||i?o.style.left="0px":h.style.left="0px",t.parentNode.style.overflow="visible",t.style.width=p+"px",t.style.height=g+"px",l.remoteUpdating=!1,l.updateCurrentRemoteData(),l.isUpdateRemoteData=!1,void l.triggerDataLoaded("animateTransition",y)}"next"!=l.remoteDirection||i?(o.style.left=-p+u+"px",h.style.left=-p+u+"px"):(o.style.left=-1*u+"px",h.style.left=-1*u+"px"),o.style.display="block",h.style.display="block",d++};var s=l.setInterval(this.update,100)}).call()}}else i?(t.removeChild(h),o.style.left=""):(t.removeChild(o),h.style.left=""),this.remoteUpdating=!1}},this.handleRemoteSelect=function(t){return function(e){var i=t.getTargetEvent(e),s=i.children[i.selectedIndex].value,a=t.$(t.remoteParentId+"-canvasXpressRemoteWindowBarCurrent"),r=t.$(t.remoteParentId+"-canvasXpressRemoteWindowBarSelectContainerDiv");t.remoteDirection=s>Number(t.remoteDataIndex)?"next":"previous",t.remoteDataIndex=Number(s),a&&i&&r&&(t.resetSelectOptionsRemoteData(),a.value="",r.style.display="none"),t.requestRemoteData()}}(this),this.swapRemotePlayStop=function(t){var e=this.$(this.remoteParentId+"-canvasXpressRemoteWindowBarPlayDiv"),i=this.$(this.remoteParentId+"-canvasXpressRemoteWindowBarStopDiv");e&&i&&(e.style.display=t?"block":"none",i.style.display=t?"none":"block")},this.handleRemoteClickStop=function(t){return function(e){t.remoteStop=!0,t.swapRemotePlayStop(!0)}}(this),this.handleRemoteClickDot=function(t){return function(e){var i=t.getTargetEvent(e);i.hasAttribute("data-index")&&(t.remoteDirection=t.remoteDirection>Number(i.dataset.index)?"next":"previous",t.remoteDataIndex=Number(i.dataset.index),t.requestRemoteData())}}(this),this.handleRemoteClickPlay=function(t){return function(e){var i=t.getTargetEvent(e).parentNode.parentNode.parentNode.parentNode.lastChild.firstChild.lastChild;t.remoteDirection="next",t.remoteStop=!1,t.handleRemoteClickDown(e,!0),t.playRemoteData(i),t.swapRemotePlayStop()}}(this),this.playRemoteData=function(t){var e=function(t){for(var e=0;e<CanvasXpress.instances.length;e++)if(t==CanvasXpress.instances[e].target0)return CanvasXpress.instances[e];for(e=0;e<CanvasXpress.instances.length;e++)if(t==CanvasXpress.instances[e].target)return CanvasXpress.instances[e];return CanvasXpress.instances[0]},i=this.target0||this.target;(function(){var s=e(i);s&&(s.remoteUpdating||s.remoteStop||(s.remoteUpdating=!0,s.showInfoSpan(!1,"Updating ...",!0),t&&t.tagName.match(/select/i)&&Number(s.remoteDataIndex)>=t.length-1?s.remoteDataIndex=0:s.remoteDataIndex++,s.requestRemoteData())),this.update=function(){var s=e(i);s?(s.remoteUpdating||s.remoteStop||(s.remoteUpdating=!0,s.showInfoSpan(!1,"Updating ...",!0),t&&t.tagName.match(/select/i)&&Number(s.remoteDataIndex)>=t.length-1?s.remoteDataIndex=0:s.remoteDataIndex++,s.requestRemoteData()),s.remoteStop&&clearInterval(a)):clearInterval(a)};var a=s.setInterval(this.update,s.remoteAutoPlayDelay)}).call()},this.handleRemoteClickPrev=function(t){return function(e){t.remoteUpdating||(t.remoteUpdating=!0,t.showInfoSpan(!1,"Updating ...",!0),t.remoteDirection="previous",0==t.remoteDataIndex?t.remoteDataIndex=t.remoteIds.length-1:t.remoteDataIndex--,t.requestRemoteData())}}(this),this.handleRemoteClickNext=function(t){return function(e){t.remoteUpdating||(t.remoteUpdating=!0,t.showInfoSpan(!1,"Updating ...",!0),t.remoteDirection="next",t.remoteDataIndex==t.remoteIds.length-1?t.remoteDataIndex=0:t.remoteDataIndex++,t.requestRemoteData())}}(this),this.handleRemoteClickDown=function(t){return function(e,i){if(!t.remoteUpdating){var s=t.$(t.remoteParentId+"-canvasXpressRemoteWindowBarSelectContainerDiv"),a=t.$(t.remoteParentId+"-canvasXpressRemoteWindowBarSelect");s&&a&&("none"!=s.style.display||i?t.transitionMagic(s,"holeOut",(function(){s.style.display="none"}),1e3):(a.options[a.selectedIndex].selected=!0,s.style.display="block",t.transitionMagic(s,"holeIn")),i||t.handleRemoteClickStop(e))}}}(this),this.addRemoteNavigation=function(t){var e=this.meta.canvas.ctx.canvas.height/2-25,i=this.$cX("div",{id:this.remoteParentId+"-canvasXpressRemoteWindowBar"},{width:this.meta.canvas.ctx.canvas.width+"px",position:"absolute",zIndex:2147483647,display:"none"}),s=this.$cX("div",{id:this.remoteParentId+"-canvasXpressRemoteWindowBarPrevDiv",className:"CanvasXpressSliderRemote CanvasXpressSliderLeft"},{top:e+"px"}),a=this.$cXI("v_previous",{id:this.remoteParentId+"-canvasXpressRemoteWindowBarPrev",src:"v_previous",title:"Previous graph"});s.appendChild(a),i.appendChild(s);var r=this.$cX("div",{id:this.remoteParentId+"-canvasXpressRemoteWindowBarDiv"},{height:"36px",top:this.meta.canvas.ctx.canvas.height+8+"px",position:"absolute"}),n=this.$cX("div",{id:this.remoteParentId+"-canvasXpressRemoteWindowBarDotsDiv",className:"CanvasXpressSliderDotsContainer"},{cssFloat:"left",position:"relative"});r.appendChild(n);var o=this.$cX("div",{id:this.remoteParentId+"-canvasXpressRemoteWindowBarButtonsDiv"},{cssFloat:"left",position:"relative"}),h=this.$cX("div",{id:this.remoteParentId+"-canvasXpressRemoteWindowBarPlayDiv",className:"CanvasXpressSliderRemote"},{cssFloat:"left",position:"relative",width:"24px",height:"24px",marginLeft:"5px"}),l=this.$cXI("v_play",{id:this.remoteParentId+"-canvasXpressRemoteWindowBarPlay",src:"v_play",title:"Iterate over graphs"},{margin:"2px 5px",width:"16px"});h.appendChild(l),o.appendChild(h);var c=this.$cX("div",{id:this.remoteParentId+"-canvasXpressRemoteWindowBarStopDiv",className:"CanvasXpressSliderRemote"},{cssFloat:"left",position:"relative",width:"24px",height:"24px",marginLeft:"5px",display:"none"}),d=this.$cXI("v_pause",{id:this.remoteParentId+"-canvasXpressRemoteWindowBarStop",src:"v_pause",title:"Stop iteration"},{margin:"3px",width:"16px"});c.appendChild(d),o.appendChild(c);var p=this.$cX("div",{id:this.remoteParentId+"-canvasXpressRemoteWindowBarSearchDiv",className:"CanvasXpressSliderRemote"},{cssFloat:"left",position:"relative",width:"24px",height:"24px"}),g=this.$cXI("z_zoom",{id:this.remoteParentId+"-canvasXpressRemoteWindowBarSearch",src:"z_zoom",title:"Search datasets"},{margin:"3px",width:"16px"});p.appendChild(g),o.appendChild(p),r.appendChild(o),i.appendChild(r);var u=this.$cX("div",{id:this.remoteParentId+"-canvasXpressRemoteWindowBarNextDiv",className:"CanvasXpressSliderRemote CanvasXpressSliderRight"},{top:e+"px"}),m=this.$cXI("v_next",{id:this.remoteParentId+"-canvasXpressRemoteWindowBarNext",src:"v_next",title:"Next graph"});u.appendChild(m),i.appendChild(u);var f=.85*this.meta.canvas.ctx.canvas.width,y=(this.meta.canvas.ctx.canvas.width-f)/2,x=this.$cX("div",{id:this.remoteParentId+"-canvasXpressRemoteWindowBarSelectContainerDiv"},{width:f+"px",top:e+"px",left:y+"px",position:"absolute",border:"1px solid rgb(51,122,183)",borderRadius:"5px",padding:"5px",background:"rgba(245, 245, 245, 0.95)",display:"none"}),v=this.$cX("div",{id:this.remoteParentId+"-canvasXpressRemoteWindowBarSelectDiv"},{border:"1px solid rgb(51,122,183)",borderRadius:"5px",background:"rgba(245, 245, 245, 0.95)"}),b=this.$cX("input",{id:this.remoteParentId+"-canvasXpressRemoteWindowBarCurrent",className:"CanvasXpressSlider",type:"text",autocomplete:"off",placeholder:"Search"});v.appendChild(b);var A=this.$cX("select",{id:this.remoteParentId+"-canvasXpressRemoteWindowBarSelect",className:"CanvasXpressSlider",size:4},{border:"none"});return v.appendChild(A),x.appendChild(v),i.appendChild(x),i},this.addRemoveNavigationListeners=function(t){var e=this.$(this.remoteParentId+"-canvasXpressRemoteWindowBarPrev"),i=this.$(this.remoteParentId+"-canvasXpressRemoteWindowBarPlay"),s=this.$(this.remoteParentId+"-canvasXpressRemoteWindowBarStop"),a=this.$(this.remoteParentId+"-canvasXpressRemoteWindowBarNext"),r=this.$(this.remoteParentId+"-canvasXpressRemoteWindowBarSearch"),n=this.$(this.remoteParentId+"-canvasXpressRemoteWindowBarSelect"),o=this.$(this.remoteParentId+"-canvasXpressRemoteWindowBarDotsDiv");e&&this[t](e,"click",this.handleRemoteClickPrev,!1),i&&this[t](i,"click",this.handleRemoteClickPlay,!1),s&&this[t](s,"click",this.handleRemoteClickStop,!1),a&&this[t](a,"click",this.handleRemoteClickNext,!1),r&&this[t](r,"click",this.handleRemoteClickDown,!1),n&&this[t](n,"change",this.handleRemoteSelect,!1),o&&this[t](o,"click",this.handleRemoteClickDot,!1)},this.selectDataSet=function(t){var e=window.document.activeElement;if(e.id==this.remoteParentId+"-canvasXpressRemoteWindowBarCurrent"){var i=this.$(this.remoteParentId+"-canvasXpressRemoteWindowBarSelect"),s=[];if(i&&e.value.length>0){if(0==this.remoteIds.length)for(var a=0;a<i.childNodes.length;a++)this.remoteIds.push(i.childNodes[a].text);this.clearSelectOptionsRemoteData();for(a=0;a<this.remoteIds.length;a++)this.remoteIds[a].toLowerCase().indexOf(e.value.toLowerCase())>=0&&s.push(a);for(a=0;a<s.length;a++){var r=this.$cX("option",{text:this.remoteIds[s[a]],value:s[a]});try{i.add(r,null)}catch(t){i.add(r)}}}}},this.updateRemoteNavigationWindow=function(t){var e=this.$(this.target),i=this.$(this.remoteParentId+"-canvasXpressRemoteWindowBuffer");e&&i&&(this.updateRemoteNavigationWindowBar(),i.style.width=2*parseInt(e.parentNode.parentNode.clientWidth)+"px",t&&t())},this.updateRemoteNavigationWindowBar=function(){var t=this.meta.canvas.ctx.canvas.height/2-25,e=.85*this.meta.canvas.ctx.canvas.width,i=(this.meta.canvas.ctx.canvas.width-e)/2,s=this.$(this.remoteParentId+"-canvasXpressRemoteWindowBar"),a=this.$(this.remoteParentId+"-canvasXpressRemoteWindowBarPrevDiv"),r=this.$(this.remoteParentId+"-canvasXpressRemoteWindowBarDiv"),n=this.$(this.remoteParentId+"-canvasXpressRemoteWindowBarDotsDiv"),o=this.$(this.remoteParentId+"-canvasXpressRemoteWindowBarNextDiv"),h=this.$(this.remoteParentId+"-canvasXpressRemoteWindowBarSelectContainerDiv");s&&a&&r&&n&&o&&h&&(s.style.width=this.meta.canvas.ctx.canvas.width+"px",a.style.top=t+"px",r.style.top=this.meta.canvas.ctx.canvas.height+8+"px",r.style.left=(this.meta.canvas.ctx.canvas.width-n.clientWidth)/2+16+"px",o.style.left=this.meta.canvas.ctx.canvas.width+10+"px",o.style.top=t+"px",h.style.width=e+"px",h.style.top=t+"px",h.style.left=i+"px")},this.addRemoteWindow=function(){var t=this.$("container-"+this.target),e=this.$(this.target),i=t.parentNode,s=this.topoJSONURL?0:44;if(i.id&&!i.id.match(/canvasXpressRemoteWindow/)){this.remoteParentId=i.id+(i.id.match("-"+this.target)?"":"-"+this.target);var a=this.$cX("div",{id:this.remoteParentId+"-canvasXpressRemoteWindow"},{height:s+e.height+"px",width:e.width+"px",position:"relative"}),r=this.addRemoteNavigation(),n=this.$cX("div",{id:this.remoteParentId+"-canvasXpressRemoteWindowBuffer"},{position:"absolute"});a.appendChild(r),a.appendChild(n),i.insertBefore(a,t),n.appendChild(t.parentNode.appendChild(t)),this.addRemoveNavigationListeners("addEvtListener"),this.requestRemoteData(!0),this.initialRemoteDataRequest=!0,this.remoteAutoPlay&&(this.remoteUpdating=!0,this.remoteDirection="next",this.remoteStop=!1,this.playRemoteData(r.lastChild))}else this.initialRemoteDataRequest=!1},this.hideNavigation=function(t){var e=this.$(this.remoteParentId+"-canvasXpressRemoteWindowBar");e&&(e.style.display="none")},this.showNavigation=function(){var t=this.$(this.remoteParentId+"-canvasXpressRemoteWindowBar");t&&(t.style.display="block")},this.initializeRemote=function(){(this.remoteService||this.dataURL||this.dataString||this.topoJSONURL)&&this.addRemoteWindow()}},CanvasXpress.prototype.initGraph=function(){this.draw=function(t){var e=!(!t||!t.width)&&t.width,i=!(!t||!t.height)&&t.height,s=!(!t||!t.network)&&t.network,a=!(!t||!t.noImages)&&t.noImages;this.meta.time.start=(new Date).getTime(),this.removeDOETables(),this.setUserEvents(),this.validateUserColors(),this.stack(t),this.initializeGraph(!0,e,i,!1,s,a,!1,t),this.meta.time.end=(new Date).getTime(),this.meta.time.elapsed=this.meta.time.end-this.meta.time.start,this.hideMask()},this.redraw=function(t){t&&(t.shiftKey||t.ctrlKey||t.altKey||t.metaKey)&&this.resetRender(!1,!0);var e=!!this.isCorrelate&&{transpose:this.isCorrelateTranspose,key:this.isCorrelateKey,color:this.isCorrelateColor};e&&this.removeCorrelation(!0);var i=!!this.isHistogram&&{histogram:this.isCreateHistogram,xAxis:this.xAxis,yAxis:this.yAxis},s=this.cloneObject(this.varIndices),a=this.cloneObject(this.smpIndices),r=this.cloneObject(this.grpIndices),n=this.cloneObject(this.backgroundImage),o=this.getConfig(["widthFactor"]);this.hardReset(t),this.sorting&&(this.varIndices=s,this.smpIndices=a,this.grpIndices=r),this.isCxplot&&this.setConfig(o),(this.isQQ||this.isCDF||this.isCxplot)&&(this.setMinX=null,this.setMaxX=null,this.setMinY=null,this.setMaxY=null),i&&(this.graphType="Scatter2D",this.isHistogram=!0,this.isCreateHistogram=i.histogram,this.xAxis=i.xAxis,this.yAxis=i.yAxis),e&&this.correlateData(e.transpose,e.key,e.color,!0),(this.data.y&&this.data.y.pie||"Pie"==this.graphType)&&(this.xAxis=!1,this.yAxis=!1,this.graphType="Pie"),this.data.y&&this.data.y.treemap&&(this.xAxis=!1,this.yAxis=!1,this.graphType="Treemap"),"Scatter2D"==this.graphType&&"visium"==this.scatterType&&(this.backgroundImage=n,this.isVisiumFlipped=!1,this.flipVisiumRanges(CanvasXpress.cacheImages[this.getFileName(n)])),this.draw({func:"redraw",par:[t]})},this.noDraw=function(t){this.stack(t)},this.isValidGraphType=function(t){switch(t){case"Bar":case"Line":case"Area":case"AreaLine":case"Dotplot":case"Heatmap":case"Stacked":case"StackedPercent":case"Boxplot":case"Correlation":case"Treemap":case"TagCloud":case"ParallelCoordinates":case"Sankey":case"Tree":case"Pie":case"Circular":case"Map":case"BarLine":case"DotLine":case"StackedLine":case"StackedPercentLine":return!!this.data.y;case"Scatter2D":return!!(this.data.y&&this.data.y.smps&&this.data.y.smps.length>1);case"ScatterBubble2D":case"Scatter3D":return!!(this.data.y&&this.data.y.smps&&this.data.y.smps.length>2);case"Venn":return!!this.data.venn;case"Network":return!!this.data.nodes;case"Genome":return!!this.data.tracks}return!1},this.reinitializeGraph=function(t){if("Tree"==this.graphType)this.setHierarchyData("tree");else if("Circular"==this.graphType&&"bubble"==this.circularType)this.setHierarchyData("bubble");else if("Sankey"!=this.graphType||this.moveSankeyId)this.aes.weight&&!this.data.y.vars.includes(this.aes.weight)?(this.switchAnnotationToVar(this.aes.weight,!0),this.switchVarToAnnotation("counts",!0)):this.isCxplot&&(this.stringSampleFactors.length||this.stringVariableFactors.length)?(this.switchNumericToString(this.stringSampleFactors[0],!0,!0),this.switchNumericToString(this.stringVariableFactors[0],!1,!0),this.stringSampleFactors=[],this.stringVariableFactors=[]):this.isCxplot&&t&&t.par&&(t.par.stringSampleFactors||t.par.stringVariableFactors)?(t.par.stringSampleFactors.length&&this.switchNumericToString(t.par.stringSampleFactors[0],!0,!0),t.par.stringVariableFactors.length&&this.switchNumericToString(t.par.stringVariableFactors[0],!1,!0)):this.graphType.match(/Scatter/)&&this.scatterPlotMatrix&&!this.isDOE?this.data.l||this.setScatterPlotMatrix():this.graphType.match(/Pie/)&&this.xAxis.length>1&&!this.isDOE&&this.setMultiplePies();else{if((!this.sankeySource||!this.sankeyTarget)&&this.data.x){!this.sankeySource&&this.data.x.hasOwnProperty("Source")&&(this.sankeySource="Source"),!this.sankeyTarget&&this.data.x.hasOwnProperty("Target")&&(this.sankeyTarget="Target");for(var e=this.meta.data.x,i=this.sortObject(this.data.x),s=[],a=0;a<i.length;a++)"String"==e[i[a]].type&&s.push(i[a]);s.length>0&&(this.sankeySource||(this.sankeySource=s.shift()),this.sankeyTarget||(s.length>0?this.sankeyTarget=s.shift():this.sankeyTarget=this.sankeySource))}a=this.hierarchyVar?this.getVariableIndices(this.hierarchyVar):0;this.hierarchyVarIndex=a>=0?a:0,this.setSankeyData()}},this.getNetworkImages=function(){var t=[];if("Network"==this.graphType&&this.isObject(this.data))for(var e=0;e<this.data.nodes.length;e++){var i=this.data.nodes[e];i.imagePath&&t.push(i.imagePath)}return t},this.loadImages=function(t,e){for(var i=this,s=this.imageTimeOut/this.imageMaxTries,a=function(t,e){var s=e?i.backgroundImageMD5:i.getFileName(t);return!!CanvasXpress.images[s]||CanvasXpress.cacheImages.hasOwnProperty(s)&&"object"==typeof CanvasXpress.cacheImages[s]},r=0;r<t.length;r++)if(!a(t[r],t[r]==this.backgroundImageMD5)&&this.imageTries<this.imageMaxTries)return this.imageTries++,void setTimeout((function(){i.loadImages(t,e)}),s);this.afterRender(e)},this.initializeGraph=function(t,e,i,s,a,r,n,o){var h=this,l=0,c=[],d=[],p=this.imageTimeOut/this.imageMaxTries,g=function(t,e){var i=e?h.backgroundImageMD5:h.getFileName(t);return!!CanvasXpress.images[i]||CanvasXpress.cacheImages.hasOwnProperty(i)&&"object"==typeof CanvasXpress.cacheImages[i]},u=function(t,e){var i,s=h.$(t.split("//")[1]);s?("IMG"!=s.tagName.toUpperCase()&&(s=s.getElementsByTagName("img")[0]),s?s.src?((i=new Image).id=t,CanvasXpress.stack[h.target].config.backgroundImageSrc=btoa(s.src.replace("data:image/png;base64,","")),h.isVisiumFlipped=!1,i.onload=e,i.src=s.src):h.imageTries>h.imageMaxTries?((i=new Image).id=t,i.onload=e,i.src=CanvasXpress.png):(h.imageTries++,setTimeout((function(){u(t,e)}),p)):h.imageTries<h.imageMaxTries?(h.imageTries++,setTimeout((function(){u(t,e)}),p)):((i=new Image).id=t,i.onload=e,i.src=CanvasXpress.png)):h.backgroundImageSrc?((i=new Image).id=t,h.isVisiumFlipped=!1,i.onload=e,i.src="data:image/png;base64,"+atob(h.backgroundImageSrc)):e&&("Scatter2D"==h.graphType&&"visium"==h.scatterType&&(h.scatterType=!1,h.backgroundType="solid"),e())};if(this.showMask(),this.createPatterns(),"Network"==this.graphType&&(c=this.getNetworkImages()),this.images.length)for(var m=0;m<this.images.length;m++)c.push(this.images[m]);if(this.backgroundImage&&(Array.isArray(this.backgroundImage)?(this.backgroundImageMD5=this.md5(this.backgroundImage),c.push(this.backgroundImageMD5)):c.push(this.backgroundImage)),c.length>0?"Network"==this.graphType?this.Network(!0):"Scatter3D"==this.graphType?this.Scatter3D(!0):"Scatter2D"!=this.graphType&&"ScatterBubble2D"!=this.graphType||this.Scatter2D(!0):CanvasXpress.cacheImagesReady=!0,this.imagesToLoad=this.cloneObject(c),c.length>0&&!function(){for(var t=0;t<c.length;t++)if(!CanvasXpress.images[c[t]]&&!g(c[t],c[t]==h.backgroundImageMD5))return!1;return!0}()&&!r){for(m=0;m<c.length;m++)g(c[m],c[m]==this.backgroundImageMD5)||d.push(c[m]);for(m=0;m<c.length;m++)if(!g(c[m],c[m]==this.backgroundImageMD5)){var f=new Image;f.id=c[m],c[m]==this.backgroundImageMD5&&Array.isArray(this.backgroundImage)?(f.onload=function(){CanvasXpress.cacheImages[h.backgroundImageMD5]=this,l++,CanvasXpress.cacheImagesReady=l==d.length,CanvasXpress.cacheImagesReady&&(n||(h.renderGraph(t,e,i,s,a,o),h.triggerDataLoaded("initializeGraph")))},(CanvasXpress.system.isR&&!CanvasXpress.system.isInIframe||!CanvasXpress.system.isR)&&(f.crossOrigin="anonymous"),f.src=this.createImage(this.backgroundImage)):(f.onload=function(){this.src?(h.backgroundImage&&this.id==h.backgroundImage&&(h.backgroundImage=this.src),CanvasXpress.cacheImages[h.getFileName(this.src)]=this,l++,CanvasXpress.cacheImagesReady=l==d.length,"Kegg"==h.networkVendor&&(h.networkFreeze=!1),"Scatter2D"!=h.graphType||"visium"!=h.scatterType||h.visiumFlip||h.visiumSetMinMaxYFlip||h.flipVisiumRanges(this),CanvasXpress.cacheImagesReady&&(n||(h.renderGraph(t,e,i,s,a,o),h.triggerDataLoaded("initializeGraph")))):n||(h.renderGraph(t,e,i,s,a,o),h.triggerDataLoaded("initializeGraph"))},(CanvasXpress.system.isR&&!CanvasXpress.system.isInIframe||!CanvasXpress.system.isR)&&(f.crossOrigin="anonymous"),c[m].match(/^javascript:\/\//)?h.isVisiumFlipped||u(c[m],f.onload):f.src=c[m])}}else n||this.renderGraph(t,e,i,s,a,o)},this.flipVisiumRanges=function(t){if(t&&"Scatter2D"==this.graphType&&"visium"==this.scatterType&&!this.visiumFlip&&!this.isVisiumFlipped){var e=!(!this.meta.config.user||null==this.meta.config.user.setMinY)&&this.meta.config.user.setMinY,i=!(!this.meta.config.user||null==this.meta.config.user.setMaxY)&&this.meta.config.user.setMaxY;if(null!=e&&null!=i&&e==this.setMinY&&i==this.setMaxY){var s=this.setMaxY;null!=this.setMinY&&(this.setMaxY=t.height-this.setMinY),null!=this.setMaxY&&(this.setMinY=t.height-s)}this.isVisiumFlipped=[this.setMinY,this.setMaxY]}},this.renderGraph=function(t,e,i,s,a,r){if(this.data){if(this.skipRender&&"Map"!=this.graphType)return;if(this.meta.time.draw.push((new Date).getTime()),this.debug&&(this.showTransition=!1),this.initialRemoteDataRequest||this.dataURL)return;if("Map"==this.graphType&&this.mapId&&!this.isObject(window[this.mapId]))return;this.setColorScheme(),this.reinitializeGraph(r),s||"Network"==this.graphType||(this.reproducing?this.initializeAxis(e,i,!0):this.motionOn||this.initializeAxis(e,i,!0),this.setColorBrew((this.isContour,!0),t)),this.resizeCanvas(t,e,i),r&&r.preRender&&this.afterRender(r.preRender,!0),this.setAspectRatioProperties();var n=!!this.layoutComb;switch(this.graphType){case"Bar":case"Dotplot":this.isBoxplotCalc&&this.isGroupedData&&this.groupSamples(this.groupingFactors,!1,!1,!1,!0),this.is3DPlot?(this.showTransition=!1,this.Scatter3D()):this.oneDPlot();break;case"Line":case"Area":case"AreaLine":case"BarLine":case"DotLine":case"Heatmap":case"Treemap":case"ParallelCoordinates":case"Stacked":case"StackedLine":case"StackedPercent":case"StackedPercentLine":this.isBoxplotCalc&&this.isGroupedData&&this.groupSamples(this.groupingFactors,!1,!1,!1,!0),this.oneDPlot();break;case"Boxplot":this.isBoxplotCalc||!this.isGroupedData&&!this.groupingFactors.length||this.groupSamples(this.groupingFactors,!1,!1,!1,!0),this.oneDPlot();break;case"TagCloud":case"Sankey":case"Tree":case"Gantt":case"Meter":this.oneDPlot();break;case"Scatter2D":case"ScatterBubble2D":case"Fish":this.Scatter2D();break;case"Scatter3D":this.showTransition=!1,this.Scatter3D();break;case"Correlation":this.Correlation();break;case"Venn":this.Venn();break;case"Pie":this.Pie();break;case"Circular":this.Circular();break;case"Network":if(this.showTransition=!1,a){var o=this.calculateLayout;n=this.randomNetwork;this.calculateLayout=!1,this.randomNetwork=!1,this.Network(),this.calculateLayout=o,this.randomNetwork=n}else this.Network();break;case"Genome":this.showTransition=!1,this.Genome();break;case"Map":this.showTransition=!1,this.Map()}this.drawCanvasBox(),this.showCode&&this.updateCodeDiv(),this.showDataTable?this.updateDataTable():this.dataTableLastState||this.hideUnhideDataTable(!0),"Network"!=this.graphType&&this.drawCitation(),window.navigator.onLine&&!this.Rdatasets&&this.loadRDatasets&&this.getRDatasets(),this.resetAspectRatioProperties(),this.resetGradientTransparencyShadow(),"Network"!=this.graphType&&this.render(),this.debug&&this.drawArea(),this.userEvents.enddraw&&this.userEvents.enddraw.call(this,this),this.logConsole("canvasXpress render ready"),this.monitorInstances(),this.showTransition&&!this.skipTransition&&this.transition(),this.meta.vals.histogram=!(!this.data.y||!this.data.y.histogram)&&this.cloneObject(this.data.y.histogram),this.layoutValid?this.meta.vals.layout={l:this.cloneObject(this.data.l),g:!!this.data.w&&this.cloneObject(this.data.w.grps),v:this.cloneObject(this.segregateVariablesBy),s:this.cloneObject(this.segregateSamplesBy)}:this.meta.vals.layout=!1}}},CanvasXpress.prototype.initAxes=function(){this.getValidAxes=function(t){var e=[];if("Scatter2D"==this.graphType)e.push("xAxis"),e.push("yAxis");else if("ScatterBubble2D"==this.graphType||"Scatter3D"==this.graphType)e.push("xAxis"),e.push("yAxis"),e.push("zAxis");else if(this.graphType.match(/Network|Genome|Correlation|Venn|Heatmap|Pie/)){if(!t)return!1;e.push("xAxis")}else this.graphType.match(/BarLine|DotLine|AreaLine|StackedLine|StackedPercentLine/)?(e.push("xAxis"),e.push("xAxis2")):"Circular"==this.graphType?(e.push("xAxis"),e.push("rAxis")):e.push("xAxis");return e},this.addRemoveSamplesInAxis=function(t,e,i){return"Scatter2D"==this.graphType||"ScatterBubble2D"==this.graphType?i?this.removeSamplesFromAxis(t,e):this.addSamplesToAxis(t,e):"Scatter3D"==this.graphType||"Pie"==this.graphType?this.switchSampleInAxis(t,e):void 0},this.addSamplesToAxis=function(t,e){if(this[e]){if(this.isArray(t))for(var i=this.getObjectArray(this[e]),s=0;s<t.length;s++)i.hasOwnProperty(t[s])||this[e].push(t[s]);else this[e].push(t);return!1}return"Not a valid axis"},this.removeSamplesFromAxis=function(t,e){if(this[e]){if(this[e].length>1){var i={},s=[];if(this.isArray(t))for(var a=0;a<t.length;a++)i[t[a]]=1;else i[t]=1;for(a=0;a<this[e].length;a++)i.hasOwnProperty(this[e][a])||s.push(this[e][a]);return this[e]=s,!1}return e+" cannot be null"}return"Not a valid axis"},this.switchSampleInAxis=function(t,e){return this[e]?(this[e][0]=this.isArray(t)?t[0]:t,!1):"Not a valid axis"},this.addRemoveVariablesInAxis=function(t,e,i){return i?this.removeVariablesFromAxis(t,e):this.addVariablesToAxis(t,e)},this.addVariablesToAxis=function(t,e){if(this[e])if(this.isArray(t))for(var i=0;i<t.length;i++)this[e].push(t[i]);else this[e].push(t);return!1},this.removeVariablesFromAxis=function(t,e){if(!this[e])return"Not a valid axis";var i={},s=[];if(this.isArray(t))for(var a=0;a<t.length;a++)i[t[a]]=1;else i[t]=1;for(a=0;a<this[e].length;a++)i.hasOwnProperty(this[e][a])||s.push(this[e][a]);return this[e]=s,!1},this.formatAxisValue=function(val,axis){var s="yAxis"==axis&&this.isCreateHistogram;if(this[axis+"TickFormat"]&&!s){var frmt=this[axis+"TickFormat"];return this.isArray(this[axis+"TickFormat"])&&(frmt=this[axis+"TickFormat"][0],val=eval(val+this[axis+"TickFormat"][1])),val?this.sprintf(frmt,val):val.toString()}var d=Math.min(this[axis+"Decs"],20);return this.formatNumber(val,d)},this.getAxisDataBySample=function(t,e,i){var s=[],a=!1,r=!1,n=!1;if(e&&(a=this[e+"AxisTransform"],n=this[e+"AxisFloorValue"],r=this[e+"AxisCeilValue"]),i||(i=this.varIndices),this.isArray(t))for(var o=0;o<i.length;o++)for(var h=i[o],l=0;l<t.length;l++)s.push(this.getDataAtPos(h,t[l],!1,a,r,n));else for(o=0;o<i.length;o++){h=i[o];s.push(this.getDataAtPos(h,t,!1,a,r,n))}return s},this.getAxisRangeBySample=function(t){return this.range(this.getAxisDataBySample(t))},this.getAxisIncrements=function(t,e,i,s,a){var r,n,o=0;if(t==e)return.1;if(s){for(r=parseFloat(this.formatNumber((e-t)/i,o));0==r;)o++,r=parseFloat(this.formatNumber((e-t)/i,o));return r}if(e-t<=Number.MIN_VALUE)return.1;var h=((a||e)-t)*this.axisExtension,l=(a||e)+h-(t-h),c=-Math.floor(Math.log(l/i)/Math.LN10),d=Math.pow(10,-c),p=(o=this.getNumberDecimals(d),l/i/d);return p<1.5?r=d:p<2?r=2*d:p<2.5?r=2.5*d:p<5?(r=5*d,n=2.5*d):p<7.5?r=7.5*d:(r=10*d,n=5*d),this.getAxisMin(t,r)+r*i<e?this.getAxisIncrements(t,e,i,s,(a||e)+r):n&&this.getAxisMin(t,n)+n*i>=e?n:r},this.getAxisMin=function(t,e){var i=e*Math.floor(t/e);return isNaN(i)||i<0&&this.minData>=0?0:i},this.setAxis=function(t,e){var i=this.isGroupedData?this.data.w:this.data.y,s=e?this.getVariableIndices(this[t]):this.getSampleIndices(this[t]);if((this.isArray(s)&&0==s.length||!this.isArray(s)&&-1==s)&&(this[t]=[]),"manhattan"==this.scatterType)"xAxis"==t?this[t]=["Manhattan"]:"yAxis"==t&&(this[t]=[this.manhattanMarkerLogPValue]);else if(0==this[t].length)if(this.isQQ||this.isCDF)for(var a=0;a<this.smpIndices.length;a++)this[t].push(this.data.y.smps[this.smpIndices[a]]);else if(this.isKM)"xAxis"==t?this[t].push(this.data.y.smps[this.smpIndices[0]]):this[t].push(this.data.y.smps[this.smpIndices[1]]);else if("xAxis"==t)if(e)for(a=0;a<this.varIndices.length;a++)this[t].push(this.data.y.vars[this.varIndices[a]]);else this[t].push(i.smps[this.smpIndices[0]]);else"xAxis2"==t?this[t].push(this.data.y.vars[this.varIndices[this.varIndices.length-1]]):"yAxis"==t?i.smps.length>1?this.isHistogram?(this[t]=this.cloneObject(this.data.y.smps),this[t].shift()):this[t].push(i.smps[this.smpIndices[1]]):this[t].push(i.smps[this.smpIndices[0]]):"zAxis"==t&&(i.smps.length>2?this[t].push(i.smps[this.smpIndices[2]]):i.smps.length>1?this[t].push(i.smps[this.smpIndices[1]]):this[t].push(i.smps[this.smpIndices[0]]));else"Scatter3D"==this.graphType&&this[t].length>1?this[t]=[this[t][0]]:this.isHistogram&&"yAxis"==t&&"Bin"==this[t][0]&&this[t].shift()},this.setAxisValues=function(t,e){var i,s,a,r,n,o,h={},l=t+"MinorValues",c=t+"Values",d=t+"ValuesRaw",p=t+"Ticks",g=t+"TickFormat",u=t+"Incr",m=t+"Decs",f=t+"Min",y=t+"Max",x=t+"Transform",v=t+"TransformTicks",b=t+"TransformTicksValues",A=t+"MaxStrLength";if("Gantt"==this.graphType){this[m]=0,this[c]=[],this[d]=[],this[l]=[],a=this[u]/5,i=this[f]-this[u];for(var w=0;w<5;w++)o=i+a*w,this[l].push(new Date(o));i=this[f];for(var C=0;C<=this[p]+1;C++){for(w=0;w<5;w++)o=i+a*w,this[l].push(new Date(o));if(i>this[y])break;this[c].push(new Date(i)),this[d].push(i),i+=this[u]}}else if("percentile"==this[x]){this[m]=0,this[c]=[],this[d]=[],this[l]=[];var T=[0,25,50,75,100];for(C=0;C<T.length;C++)this[c].push(T[C]),this[d].push(T[C]);for(C=5;C<100;C+=5)this[l].push(C)}else{this[c]=[],this[l]=[],this[d]=[],a=this[u]/5,i=this[f]-this[u];for(w=0;w<5;w++)o=i+a*w,this[l].push(o);i=this[f];for(C=0;C<=(e?e.length+1:this[p]+1);C++){for(w=0;w<5;w++)o=i+a*w,this[l].push(o);0==this[m]&&i.toString().match(/\.5$/)&&(this[m]=1),s=this.formatAxisValue(i,t),h.hasOwnProperty(s)&&!this[g]?r=!0:h[s]=1,this[y],this[c].push(s),this[d].push(i),i+=this[u]}if(this[x]&&this[v]){this[b]=[];for(C=0;C<this[d].length;C++)s=(i=this.transformValue(this[x],this[d][C],!0)).toString().split(".")[1]||0,this[b].push(s.length>4?"":i.toString().length>5?this.sprintf("%.4g",i):i)}}if(r&&this[m]<20)if(this[m]++,this[c]=[],this[l]=[],this[d]=[],this[m]>10){this[m]=0,a=this[u]/5,i=this[f]-this[u];for(w=0;w<5;w++)o=i+a*w,this[l].push(o);i=this[f];for(C=0;C<=this[p]+1;C++){for(w=0;w<5;w++)o=i+a*w,this[l].push(o);if(i>this[y])break;this[c].push(i.toString()),this[d].push(i),this[m]=Math.max(this[m],i.toString().split(".").length-1),i+=this[u]}}else this.setAxisValues(t,e);else if(n=this.getMaxText(this[c]),this[g]?this[A]=n:this[A]=this.formatNumber(n,this[m]),this[l].unshift(this[l][0]-a),this.layoutValid&&this.layoutParams&&this.layoutParams[this.layoutCurrent]){var S=t+"MaxStrTick";this.layoutParams[this.layoutCurrent][S]=n,this.layoutParams[this.layoutCurrent][S+"Length"]=this.measureText(n,this.axisTickFont),this[t+"LayoutMaxTickStrLength"]?this.layoutParams[this.layoutCurrent][S+"Length"]>this[t+"LayoutMaxTickStrLength"]&&(this[t+"LayoutMaxTickStr"]=n,this[t+"LayoutMaxTickStrLength"]=this.layoutParams[this.layoutCurrent][S+"Length"]):(this[t+"LayoutMaxTickStr"]=n,this[t+"LayoutMaxTickStrLength"]=this.layoutParams[this.layoutCurrent][S+"Length"])}},this.setAxisAttributes=function(t,e,i,s,a,r){var n=this,o=!(!s||!s.match(/log/)),h=t+"Ticks",l=t+"Incr",c=t+"AbsMin",d=t+"AbsMax",p=t+"Min",g=t+"Max",u=t+"FloorValue",m=t+"CeilValue",f=t+"Range",y=t+"Decs",x=t+"ExtensionMin",v=t+"ExtensionMax";this.setRangeData(e,i,o,a,"fish"==e?t:"qq"==e||"cdf"==e||"km"==e?t.replace("Axis",""):t);this.minData==this.maxData&&(0==this.minData?(this.minData=-1,this.maxData=1):(this.minData-=Math.abs(.1*this.minData),this.maxData+=Math.abs(.1*this.maxData))),s&&("log2"==s?(this.minData=Math.log(this.minData)/Math.LN2,this.maxData=Math.log(this.maxData)/Math.LN2):"log10"==s?(this.minData=Math.log(this.minData)/Math.LN10,this.maxData=Math.log(this.maxData)/Math.LN10):"exp2"==s?(this.minData=Math.pow(2,this.minData),this.maxData=Math.pow(2,this.maxData)):"exp10"==s?(this.minData=Math.pow(10,this.minData),this.maxData=Math.pow(10,this.maxData)):"percentile"==s&&(this.minData=this.minData<0?-100:0,this.maxData=100)),this[u]&&(this.minData=Math.max(this.minData,this[u])),this[m]&&(this.maxData=Math.min(this.maxData,this[m])),this.isHistogram&&!this.isOneDimensionalGraph()&&(this.histogramAsDotplot&&"yAxis"==t?(this.minData=-.5,this.maxData=.5):this.minData=0),this.isCreateHistogram&&!this.ridgeBy&&("xAxis"==t?(this.isCreateHistogram.setMinX&&(this.minData=this.isCreateHistogram.setMinX),this.isCreateHistogram.setMaxX&&(this.maxData=this.isCreateHistogram.setMaxX)):"yAxis"==t&&(this.isCreateHistogram.setMinY&&(this.minData=this.isCreateHistogram.setMinY),this.isCreateHistogram.setMaxY&&(this.maxData=this.isCreateHistogram.setMaxY))),this.setMin&&(this.minData=this.setMin),this.setMax&&(this.maxData=this.setMax),this[c]=null==this.setMin?this.minData:this[c],this[d]=null==this.setMax?this.maxData:this[d];var b=!!(this.isHistogram||this.graphType.match(/Stacked|Area/)||s&&"percentile"==s||r||this.stackBy),A=this[this.axisAlgorithm](this.minData,this.maxData,this[h],this.axisWilkinsonLoose),w=(this.maxData-this.minData)*this.axisExtension,C=function(){if(n.graphType.match(/Scatter|Dot/i)||n.graphType.match(/Boxplot/i)&&n.showBoxplotOriginalData){var e=n.dataPointSize*this.dataPointSizeScaleFactor,i=("x"==t.substring(0,1)?n.width:n.height)/(n.maxData-n.minData);return n.layoutComb?Math.ceil(e/i/n.layoutRows):e/i}return 0}(),T=!this.isOneDimensionalGraph()&&this.isHistogram&&"xAxis"==t;this[l]=A[1]-A[0],this[y]=this.getNumberDecimals(this[l]),this[p]="Scatter2D"==this.graphType&&"visium"==this.scatterType?this.minData:A[0],"Scatter2D"==this.graphType&&"manhattan"==this.scatterType?this[g]=this.maxData*("xAxis"==t?1.025:1.05):"Scatter2D"==this.graphType&&"visium"==this.scatterType?this[g]=this.maxData:this[g]=T?Math.min(this.isCreateHistogram.max-this.isCreateHistogram.min,A[A.length-1]):A[A.length-1],this.setAxisValues(t,A),"Scatter2D"==this.graphType&&"visium"==this.scatterType||(this[x]=!1,A[0]<this.minData-C||b?this[p]=A[0]:("Scatter2D"==this.graphType&&"manhattan"==this.scatterType&&"yAxis"==t||(this[p]=this.minData-("Meter"==this.graphType?0:"Scatter2D"==this.graphType&&"manhattan"==this.scatterType?w/3:w)),this[x]=!0),this[x]||(this.isHistogram&&!this.isOneDimensionalGraph()&&"yAxis"==t||this.scatterMatrixPlot&&this.scatterMatrixPlotType.match(/Histogram|Density|all/)?this.histogramAsDotplot&&"yAxis"==t&&this.histogramStackDir.match(/center/)?this[p]=this.minData-this.axisExtension/1.2:this[p]=0-(this.maxData-this.minData)*this.axisExtension/3:(this.isHistogram&&!this.isOneDimensionalGraph()&&"xAxis"==t||this.scatterMatrixPlot&&this.scatterMatrixPlotType.match(/Histogram|Density|all/))&&(this[p]-=this.maxData*this.axisExtension/(this.ridgeBy?.5:3))),this[v]=!1,A[A.length-1]>this.maxData+C||b?"Scatter2D"!=this.graphType&&(this[g]="Scatter2D"!=this.graphType||"manhattan"!=this.scatterType||this.layoutValid?T?Math.max(this.isCreateHistogram.max-this.isCreateHistogram.min,A[A.length-1]):A[A.length-1]:this.maxData):(this[g]=this.maxData+("Meter"==this.graphType?0:w),this[v]=!0),this[v]||(this.isHistogram&&!this.isOneDimensionalGraph()||this.scatterMatrixPlot&&this.scatterMatrixPlotType.match(/Histogram|Density|all/)||"Scatter2D"==this.graphType&&"manhattan"==this.scatterType&&!this.layoutValid)&&(this.histogramAsDotplot&&"yAxis"==t&&this.histogramStackDir.match(/center/)?this[g]=this.maxData+this.axisExtension/1.2:this[g]+=this.maxData*this.axisExtension/(this.ridgeBy&&"xAxis"==t?.5:3)),this.layoutComb&&this.isOneDimensionalGraph()&&"percentile"!=s&&!this.graphType.match(/Percent/)&&this.maxData>this[g]-.2*this[l]&&(this[g]+=this[l]),null!=this.setMin&&(this[p]=this.setMin),null!=this.setMax&&(this[g]=this.setMax),this.ridgeBy&&"yAxis"===t&&(this[g]=this.maxData)),this[f]=this[g]-this[p]},this.setAxesType=function(){"Scatter2D"==this.graphType&&"km"==this.scatterType?this.axesType="KM":"Scatter2D"==this.graphType&&"cdf"==this.scatterType?this.axesType="CDF":"Scatter2D"==this.graphType&&"qq"==this.scatterType?this.axesType="QQ":"ScatterBubble2D"==this.graphType&&this.xAxisIndices.length>1&&this.xAxisIndices.length==this.yAxisIndices.length&&this.xAxisIndices.length==this.zAxisIndices.length?this.axesType="XYZ":this.xAxisIndices.length>1&&this.xAxisIndices.length==this.yAxisIndices.length?this.axesType="XY":this.xAxisIndices.length>this.yAxisIndices.length?this.axesType="X":this.axesType="Y"},this.getMarkerVariableIndices=function(){var t=[];if(this.decorations&&this.decorations.marker)for(var e=this.decorations.marker,i=0;i<e.length;i++)if(e[i].variable){var s=this.getVariableIndices(e[i].variable);s>=0&&(t[s]=!0)}return t},this.getScatterVisibleVariables=function(){if(null==this.setMinX||null==this.setMaxX||null==this.setMinY||null==this.setMaxY||this.xAxisHistogramShow||this.yAxisHistogramShow)return this.varIndices;for(var t={},e="XYZ"==this.axesType?1:Math.max(this.xAxisIndices.length,this.yAxisIndices.length),i=0;i<e;i++)for(var s="Y"==this.axesType||"XYZ"==this.axesType?this.xAxisIndices[this.xAxisCurrent]:this.xAxisIndices[i],a="X"==this.axesType||"XYZ"==this.axesType?this.yAxisIndices[this.yAxisCurrent]:this.yAxisIndices[i],r=0;r<this.varIndices.length;r++){var n=this.getDataAtPos(this.varIndices[r],s,!1,this.xAxisTransform,this.xAxisFloorValue,this.xAxisCeilValue),o=this.getDataAtPos(this.varIndices[r],a,!1,this.yAxisTransform,this.yAxisFloorValue,this.yAxisCeilValue);n>=this.setMinX&&n<=this.setMaxX&&o>=this.setMinY&&o<=this.setMaxY&&(t[this.varIndices[r]]=!0)}return this.getKeys(t).sort((function(t,e){return t-e}))},this.setAxesDensityScatterLayout=function(t,e){this.setAxesType();for(var i,s=this,a=this.meta.data.d,r=this.getMarkerVariableIndices(),n=this.data.l&&this.data.l.comp?this.data.l.comp.length:0,o=parseInt(Math.min(1e3,Math.max(10,(t||this.width)*(e||this.height)*this.densityPixels*("visium"==this.scatterType?100:1)/(1e6*Math.min(this.layoutRows,this.layoutCols)*2)))),h=o/this.xAxisRange,l=o/this.yAxisRange,c={},d=!1,p=!1,g=0;g<n;g++){var u=[],m=[],f=[],y=[];if(i=g,s.segregateVariablesBy.length&&s.segregateSamplesBy.length?(f=s.data.l.comp[i][0],y=s.data.l.comp[i][1]):s.data.l.smps&&s.data.l.smps[i].xAxis&&s.data.l.smps[i].yAxis?(f=s.varIndices,y=[s.getSampleIndices(s.data.l.smps[i].xAxis[0]),s.getSampleIndices(s.data.l.smps[i].yAxis[0])]):!s.scatterPlotMatrix&&s.data.l.smps&&s.data.l.smps[i]?(f=s.varIndices,y=[s.data.l.smps[i][0],s.data.l.smps[i][1]||s.data.l.smps[i][0]]):s.data.l.vars&&s.data.l.vars[i]?(d||(d=s.data.y.vars,p=s.getObjectArrayOrder(d)),f=s.getVariableIndices(s.data.l.vars[i],!1,d,p),y=s.smpIndices):(f=[],y=[]),f.length&&y.length){if(!("visium"==this.scatterType||this.varIndices.length<500)){var x="manhattan"==this.scatterType?this.getSampleIndices("Manhattan"):y[0],v="manhattan"==this.scatterType?this.manhattanMarkerLogPValueIndex:y[1]||y[0],b=x+":"+v;if(this.showHistogramDensity||this.xAxisHistogramShow||this.yAxisHistogramShow){if(!a.s.hasOwnProperty(x.toString())&&a.l[g]&&this.xAxisHistogramShow){for(var A=[],w=0;w<f.length;w++)A.push(this.getDataAtPos(f[w],x,!1,this.xAxisTransform,this.xAxisFloorValue,this.xAxisCeilValue));u.push(A),a.s[x.toString()]=this.density(A,this.data.y.smps[x])}if(!a.s.hasOwnProperty(v.toString())&&a.a.hasOwnProperty(b)&&this.yAxisHistogramShow){for(A=[],w=0;w<f.length;w++)A.push(this.getDataAtPos(f[w],v,!1,this.yAxisTransform,this.yAxisFloorValue,this.yAxisCeilValue));m.push(A),a.s[v.toString()]=this.density(A,this.data.y.smps[v])}}if(!a.l[g]){a.l[g]={vars:[],skip:{},density:{},max:1,n:0,colorBrew:!1};var C={},T=[],S=[];for(w=0;w<f.length;w++){var M=this.getDataAtPos(f[w],x,!1,this.xAxisTransform,this.xAxisFloorValue,this.xAxisCeilValue),D=this.getDataAtPos(f[w],v,!1,this.yAxisTransform,this.yAxisFloorValue,this.yAxisCeilValue),k=parseInt((M-this.xAxisMin)*h),L=parseInt((D-this.yAxisMin)*l),I=k+":"+L+":0";this.isNumeric([k,L])&&(C.hasOwnProperty(I)||(C[I]=[]),C[I].push(f[w]),r[f[w]]&&(c[I]=!0)),T.push(M),S.push(D)}(this.showHistogramDensity||this.xAxisHistogramShow||this.yAxisHistogramShow)&&(!a.s.hasOwnProperty(x.toString())&&T.length>0&&this.xAxisHistogramShow&&(a.s[x.toString()]=this.density(T,this.data.y.smps[x]),u.push(T)),!a.s.hasOwnProperty(v.toString())&&S.length>0&&this.yAxisHistogramShow&&(a.s[v.toString()]=this.density(S,this.data.y.smps[v]),m.push(S)));var z=this.getKeys(C).sort((function(t,e){return C[t].length-C[e].length||C[t][0]-C[e][0]}));for(w=0;w<z.length;w++){I=z[w];var N=C[I].pop();if(a.l[g].vars.push(N),C[I].length>0&&!c[I]){a.l[g].max=Math.max(a.l[g].max,C[I].length+1),a.l[g].density[N.toString()]=C[I].length+1,a.l[g].n++;for(var B=0;B<C[I].length;B++)!this.lineBy&&f.length>500&&(a.l[g].skip[C[I][B].toString()]=N)}}a.l[g].colorBrew=this.getColorBrew(!1,1,a.l[g].max)}}}else a.l[g]={vars:[],skip:{},density:{},max:1,n:0,colorBrew:!1}}},this.setAxesDensityScatter=function(t,e){this.setAxesType();var i=this.meta.data.d,s=this.getMarkerVariableIndices(),a=this.getScatterVisibleVariables(),r=a.length>5e4?.5:1,n=null!=this.setMinX&&null!=this.setMaxX&&null!=this.setMinY&&null!=this.setMaxY||this.resizingCanvasOn,o=n?t||this.width:t?Math.min(t,this.width):this.width,h=n?e||this.height:e?Math.min(e,this.height):this.height,l="XYZ"==this.axesType?1:Math.max(this.xAxisIndices.length,this.yAxisIndices.length),c=parseInt(Math.min(1e3,Math.max(10,o*h*this.densityPixels*r/1e6)));null==i.q||n||(c=i.q);var d=c/this.xAxisRange,p=c/this.yAxisRange,g=[],u=[],m={};null==i.q&&(i.q=c),i.a={},i.s={};for(var f=0;f<l;f++){var y="Y"==this.axesType||"XYZ"==this.axesType?this.xAxisIndices[this.xAxisCurrent]:this.xAxisIndices[f],x="X"==this.axesType||"XYZ"==this.axesType?this.yAxisIndices[this.yAxisCurrent]:this.yAxisIndices[f],v=("ScatterBubble2D"==this.graphType&&!this.sizeBy&&this.zAxisIndices.length>0||"XYZ"==this.axesType)&&this.zAxisIndices[this.zAxisCurrent],b=!1!==v?y+":"+x+":"+v:y+":"+x;if(this.showHistogramDensity||this.xAxisHistogramShow||this.yAxisHistogramShow){if(!i.s.hasOwnProperty(y.toString())&&i.a.hasOwnProperty(b)&&this.xAxisHistogramShow){for(var A=[],w=0;w<a.length;w++)A.push(this.getDataAtPos(a[w],y,!1,this.xAxisTransform,this.xAxisFloorValue,this.xAxisCeilValue));g.push(A),i.s[y.toString()]=this.density(A,this.data.y.smps[y])}if(!i.s.hasOwnProperty(x.toString())&&i.a.hasOwnProperty(b)&&this.yAxisHistogramShow){for(A=[],w=0;w<a.length;w++)A.push(this.getDataAtPos(a[w],x,!1,this.yAxisTransform,this.yAxisFloorValue,this.yAxisCeilValue));u.push(A),i.s[x.toString()]=this.density(A,this.data.y.smps[x])}}if(!i.a.hasOwnProperty(b)){if(i.a[b]={vars:[],skip:{},density:{},max:1,n:0,colorBrew:!1},"visium"==this.scatterType)continue;var C={},T=[],S=[];for(w=0;w<a.length;w++){var M=this.getDataAtPos(a[w],y,!1,this.xAxisTransform,this.xAxisFloorValue,this.xAxisCeilValue),D=this.getDataAtPos(a[w],x,!1,this.yAxisTransform,this.yAxisFloorValue,this.yAxisCeilValue),k=!1!==v?this.getDataAtPos(a[w],v,!1,this.zAxisTransform,this.zAxisFloorValue,this.zAxisCeilValue):null,L=parseInt((M-this.xAxisMin)*d),I=parseInt((D-this.yAxisMin)*p),z=this.sizeBy?parseInt(this.getPropertyValue(a[w],null,"sizeBy")):!1!==v?this.sizes[Math.floor(this.percentile(this.zAxisMin,this.zAxisMax,k)/10)+1]:this.dataPointSize*this.dataPointSizeScaleFactor,N=L+":"+I+":"+parseInt(z);this.isNumeric([L,I,z])&&(C.hasOwnProperty(N)||(C[N]=[]),C[N].push(a[w]),s[a[w]]&&(m[N]=!0)),T.push(M),S.push(D)}(this.showHistogramDensity||this.xAxisHistogramShow||this.yAxisHistogramShow)&&(!i.s.hasOwnProperty(y.toString())&&T.length>0&&this.xAxisHistogramShow&&(i.s[y.toString()]=this.density(T,this.data.y.smps[y]),g.push(T)),!i.s.hasOwnProperty(x.toString())&&S.length>0&&this.yAxisHistogramShow&&(i.s[x.toString()]=this.density(S,this.data.y.smps[x]),u.push(S)));var B=this.getKeys(C).sort((function(t,e){return C[t].length-C[e].length||C[t][0]-C[e][0]}));for(w=0;w<B.length;w++){N=B[w];var P=C[N].pop();if(i.a[b].vars.push(P),C[N].length>0&&!m[N]&&(i.a[b].max=Math.max(i.a[b].max,C[N].length+1),i.a[b].density[P.toString()]=C[N].length+1,i.a[b].n++,this.varIndices.length>500))for(var R=0;R<C[N].length;R++)this.lineBy||(i.a[b].skip[C[N][R].toString()]=P)}i.a[b].colorBrew=this.getColorBrew(!1,1,i.a[b].max)}}(this.showHistogramDensity||this.xAxisHistogramShow||this.yAxisHistogramShow)&&(g.length>0&&this.xAxisHistogramShow&&(i.x=this.histN(g,this.xAxisIndices,"xAxis")),u.length>0&&this.yAxisHistogramShow&&(i.y=this.histN(u,this.yAxisIndices,"yAxis")))},this.setAxesDensity1DGraphs=function(){var t=this.showViolinBoxplot&&"Boxplot"==this.graphType,e=this.binned&&("Boxplot"==this.graphType||"Dotplot"==this.graphType),i=this.segregateSamplesBy.length&&this.isGroupedData&&this.groupingFactors.includes(this.segregateSamplesBy[0]);if(this.isGroupedData&&!this.data.w&&this.groupSamples(this.groupingFactors,!1,!1,!1,!0),t||e)for(var s=this.isGroupedData?this.grpIndices:this.smpIndices,a=this.meta.data.d,r=0;r<this.varIndices.length;r++){for(var n=[],o=[],h=0;h<s.length;h++)if(this.isGroupedData&&this.data.w)for(var l=this.isTransformedData&&this.data.y.trans||this.showBoxplotOriginalData&&this.data.y.trans?this.data.y.trans:this.data.y.data,c=0;c<this.data.w.grps[s[h]].length;c++)n.push(l[this.varIndices[r]][this.data.w.grps[s[h]][c]]),o.push(this.data.w.grps[s[h]][c]);else n.push(this.getDataAtPos(this.varIndices[r],s[h],!1,this.xAxisTransform,this.xAxisFloorValue,this.xAxisCeilValue)),o.push(s[h]);var d=this.density(n,this.data.y.vars[this.varIndices[r]]),p=[];for(a.v[this.varIndices[r]]={density:d,area:d.sumY,scale:d.maxY,indices:o,max:d.maxY},h=0;h<d.histogram.idxs.length;h++)for(c=0;c<d.histogram.idxs[h].length;c++){p[y=d.histogram.idxs[h][c]]=d.histogram.mids[h]}if(a.v[this.varIndices[r]].mids=p,this.isGroupedData){a.g[this.varIndices[r]]=[];var g=0,u=0,m=0;if(!this.layoutValid||this.isDOE||i||this.segregateVariablesBy.length||!this.data.l){var f=0;for(h=0;h<s.length;h++){for(n=[],v=[],c=0;c<this.data.w.grps[s[h]].length;c++){var y=this.data.w.grps[s[h]][c];n.push(l[this.varIndices[r]][y]),v.push(p[f++])}A=this.density(n,this.data.w.labs[s[h]]);a.g[this.varIndices[r]][s[h]]={density:A,indices:this.data.w.grps[s[h]],global:v},g=Math.max(g,A.sumY),u=Math.max(u,A.maxY),m=Math.max(m,A.n)}for(h=0;h<s.length;h++)a.g[this.varIndices[r]][s[h]].area=g,a.g[this.varIndices[r]][s[h]].scale=u,a.g[this.varIndices[r]][s[h]].max=m,a.g[this.varIndices[r]][s[h]].total=d.n}else{for(var h=0;h<this.data.l.comp.length;h++)for(var c=0;c<this.data.w.grps.length;c++){var x=this.intersectArray(this.data.l.comp[h],this.data.w.grps[c]);if(x.length){for(var n=[],v=[],b=0;b<x.length;b++)n.push(l[this.varIndices[r]][x[b]]),v.push(p[x[b]]);var A=this.density(n,[this.data.l.name[h],this.data.w.glab[c]].join("::"));a.g[this.varIndices[r]].push({density:A,indices:x,global:v}),g=Math.max(g,A.sumY),u=Math.max(u,A.maxY),m=Math.max(m,A.n)}}for(var h=0;h<a.g[this.varIndices[r]].length;h++)a.g[this.varIndices[r]][h].area=g,a.g[this.varIndices[r]][h].scale=u,a.g[this.varIndices[r]][h].max=m,a.g[this.varIndices[r]][h].total=d.n}}}},this.setAxes=function(t,e,i,s,a){if(!(this.smpIndices&&this.smpIndices.length<1||this.graphType.match(/Venn|Network|Sankey|Tree/)))if(this.graphType.match(/Correlation/)){var r=this.isGroupedData?this.data.w:this.data.y;this.setMin=null,this.setMax=null,this.correlationAnchorLegend&&this.setAxisAttributes("xAxis"),r.cor&&0!=r.cor.length||this.summarize("cor"),this.summaryType="cor",this.setRangeData("cor"),this.yAxisTitle||(this.yAxisTitle="Correlation")}else if(this.graphType.match(/Gantt/))this.summaryType="gantt",this.setAxisAttributes("xAxis","gantt");else if(this.graphType.match(/Fish/))this.summaryType="fish",this.setAxisAttributes("xAxis","fish"),this.setAxisAttributes("yAxis","fish");else if(this.graphType.match(/Scatter|Pie/)){var n=this.smpIndices,o=[],h=["xAxis"],l=["X"];if(this.graphType.match(/Scatter/)&&(h.push("yAxis"),l.push("Y")),this.graphType.match(/ScatterBubble2D|Scatter3D/)&&(h.push("zAxis"),l.push("Z")),"Scatter3D"==this.graphType&&(this.xAxisTicks=10,this.yAxisTicks=10,this.zAxisTicks=10),this.scatterAxesEqual)for(var c=0;c<h.length;c++)this.setAxis(h[c]),o=o.concat(this.getSampleIndices(this[h[c]]));for(c=0;c<h.length;c++){var d=h[c]+"Indices",p="setMin"+l[c],g="setMax"+l[c];this.setMin=null,this.setMax=null,this.setAxis(h[c]),this[d]=this.toArray(this.getSampleIndices(this[h[c]])),this.scatterAxesEqual?this.setSamplesVisible(o):this.setSamplesVisible(this[d]),null!=this[p]&&(this.setMin=this[p]),null!=this[g]&&(this.setMax=this[g]),this.isQQ||this.isCDF||this.isKM?this.setAxisAttributes(h[c],t):this.isHistogram&&("density"==this.histogramStat||"stacked"==this.histogramType||"normal"!=this.densityPosition||this.histogramAsDotplot)?this.setAxisAttributes(h[c],c>0&&"density"):this.setAxisAttributes(h[c],c>0&&t,!1,this[h[c]+"Transform"]),this.setSamplesVisible(n)}this.isQQ||this.isCDF||this.isKM||this.scatterPlotMatrix||(this.xAxisTitleDynamic&&!this.ridgeBy||!this.xAxisTitle?this.xAxisTitle=(this.layoutValid&&this.graphType.match(/Scatter/)&&1==this.xAxis.length||1==this.xAxis.length)&&this.xAxis[0]:this.ridgeBy,this.graphType.match(/Scatter/)&&(!this.yAxisTitleDynamic&&this.yAxisTitle||(this.yAxisTitle=(this.layoutValid&&1==this.xAxis.length||1==this.yAxis.length)&&this.yAxis[0]),this.graphType.match(/ScatterBubble2D|Scatter3D/)&&this.zAxisTitleDynamic&&(this.zAxisTitle=1==this.zAxis.length&&this.zAxis[0]))),this.graphType.match(/Scatter/)&&(this.layoutValid&&!this.isDOE?this.scattterPlotMatrix||this.isHistogram||this.setAxesDensityScatterLayout(s,a):this.setAxesDensityScatter(s,a))}else if(this.graphType.match(/Genome/))this.setMax=null!=this.setMaxX?this.setMaxX:null,this.setMin=null!=this.setMinX?this.setMinX:null,this.setRangeData("genome"),this.xAxisExact=!0,this.xAxisTransform=!1,this.xAxisAbsMin=this.minData,this.xAxisAbsMax=this.maxData,this.xAxisMin=this.minData-1,this.xAxisMax=this.maxData+1,this.xAxisDecs=0,this.xAxisRange=this.xAxisMax-this.xAxisMin,this.xAxisTicks=this.genomeTicks,this.xAxisIncr=this.xAxisRange/this.xAxisTicks,this.setAxisValues("xAxis");else if("ParallelCoordinates"==this.graphType){this.parallelCoordinates=[];r=this.isGroupedData?this.data.w:this.data.y;var u=this.isGroupedData?this.grpIndices:this.smpIndices;for(c=0;c<u.length;c++){for(var m=u[c],f=this.measureText(r.smps[m],this.smpLabelFont),y=this.range(this.getDataForSmpGrpAtIndex(m)),x=this[this.axisAlgorithm](y[0],y[1],this.xAxisTicks,this.axisWilkinsonLoose),v=[],b=0;b<x.length;b++)x[b]>=y[0]&&x[b]<=y[1]&&v.push(x[b]);var A=this.getMaxText(v),w=this.measureText(A,this.axisTickFont),C={smp:r.smps[m],lenSmp:f,range:y,min:y[0],max:y[1],vals:v,maxText:A,len:w};if(this.meta.data.modified&&this.meta.data.modified.z&&this.meta.data.modified.z[r.smps[m]]){var T=this.meta.data.modified.z[r.smps[m]],S=this.getMaxText(T),M=this.measureText(S,this.axisTickFont);C.levs=T,C.maxTextLev=S,C.lenLev=M,C.type="String"}else C.type="Numeric";this.parallelCoordinates.push(C)}}else{if(this.graphType.match(/Heatmap|Correlation/)&&this.minData&&this.maxData&&!this.heatmapAutoAdjust)return;var D=this,k=!1,L=this.smpIndices,I=this.varIndices,z=this.grpIndices,N=this.varIndices,B=!(!("Dotplot"==this.graphType||"DotLine"==this.graphType||"Line"==this.graphType&&this.lineBy)||!this.isGroupedData),P=this.graphType.match(/Percent/)||this.graphType.match(/Area/)&&this.areaType.match(/percent/)?"percentile":this.xAxisTransform,R=!!("Stacked"==D.graphType||D.graphType.match(/Stacked/)&&!D.segregateVariablesBy.length||D.graphType.match(/Area/)&&D.areaType.match(/stacked/)&&!D.segregateVariablesBy.length||i||D.stackBy||D.dodgeBy)||!(!D.layoutValid||!D.graphType.match(/Stacked/)),O=P||!1,X=this.graphType.match(/BarLine|DotLine|AreaLine|StackedLine|StackedPercentLine/);this.is3DPlot||(this.setAxis("xAxis",!0),this.xAxisVarIndices=this.getVariableIndices(this.xAxis),X&&(this.setAxis("xAxis2",!0),this.xAxis2VarIndices=this.getVariableIndices(this.xAxis2),k=this.cloneObject(this.xAxisVarIndices).concat(this.cloneObject(this.xAxis2VarIndices)))),this.varIndicesStart>-1||this.smpIndicesStart>-1||this.grpIndicesStart>-1?"Heatmap"==this.graphType&&(this.graphOrientation="horizontal"):"StackedPercent"==this.graphType||"StackedPercentLine"==this.graphType||this.graphType.match(/Area/)&&this.areaType.match(/percent/)?(this.setMinX=null,this.setMaxX=null,this.xAxisExact=!0):("Boxplot"==this.graphType&&!this.isGroupedData&&0==this.groupingFactors.length||this.summarizeBoxplot)&&(this.summarize("iqr"),delete this.summarizeBoxplot),this.xAxis2Ticks=this.xAxisTicks,X&&this.setVariablesVisible(this.axisCoordinate?k:this.getVariablesVisibleByAxis("xAxis")),"Meter"==this.graphType?(null!=this.meterMin?this.setMin=this.meterMin:this.setMin=null,null!=this.meterMax?this.setMax=this.meterMax:this.setMax=null):(this.setMax=null!=this.setMaxX?this.setMaxX:null,this.setMin=null!=this.setMinX?this.setMinX:null),this.setAxesDensity1DGraphs(),this.setAxisAttributes("xAxis",O,B,P,R,e),X&&(O=!1,X&&this.setVariablesVisible(this.axisCoordinate?k:this.getVariablesVisibleByAxis("xAxis2")),this.setMax=null!=this.setMaxX2?this.setMaxX2:null,this.setMin=null!=this.setMinX2?this.setMinX2:null,this.setAxisAttributes("xAxis2",O,B,P,R)),this.setMax=null!=this.setMaxR?this.setMaxR:this.setMax,this.setMin=null!=this.setMinR?this.setMinR:this.setMin,"Circular"!=this.graphType||!this.rAxis&&"chord"!=this.circularType||this.setAxisAttributes("rAxis","circular",B,P,!1,!0),this.setVariablesVisible(N),this.smpIndices=L,this.varIndices=I,this.grpIndices=z}},this.resetAxes=function(t){this.xAxis=this.meta.config.user&&this.meta.config.user.xAxis&&!t?this.meta.config.user.xAxis:[],this.yAxis=this.meta.config.user&&this.meta.config.user.yAxis&&!t?this.meta.config.user.yAxis:[],this.zAxis=this.meta.config.user&&this.meta.config.user.zAxis&&!t?this.meta.config.user.zAxis:[],t&&(this.varIndices=[],this.smpIndices=[]),this.setAxes()},this.setAxisUnits=function(t,e){var i=t+"Unit",s=t+"Range",a=e||t.substring(0,1);this[i]=this[a]/this[s]},this.setAxisFont=function(t,e){this.autoScaleFont?(this.setPropertyFontSize(e,"decorationsTextFont"),this.setPropertyFontSize(e,"axisTickFont"),this.setPropertyFontSize(e,"axisTitleFont"),this.adjustFont(t,"axisTitleFont",e)):(this.decorationsTextFont=this.decorationsTextFontStyle+" "+parseInt(this.decorationsTextFontSize)+"px "+this.fontName,this.axisTickFont=this.axisTickFontStyle+" "+parseInt(this.axisTickFontSize)+"px "+this.fontName,this.axisTitleFont=this.axisTitleFontStyle+" "+parseInt(this.axisTitleFontSize)+"px "+this.fontName)},this.initializeAxis=function(t,e,i){this.graphType.match(/Venn|Network/)||(this.setAxes(!1,!1,!1,t,e),i||this.setColorBrew())}},CanvasXpress.prototype.initCxplot=function(){this.aes_data=function(t,e){for(var i=null,s=[],a=0;a<t[0].length;a++)if(t[0][a]==e){i=a;for(var r=1;r<t.length;r++)s.push(t[r][i]);return s}if(null==i)for(a=0;a<t.length;a++)if(t[a][0]==e){for(r=1;r<t[a].length;r++)s.push(t[a][r]);return s}return s},this.geom_transpose=function(t){var e=this.meta.config.user.aes,i={};if(t){var s="xz"==t?"xz":"x"==t?"z":"x";if(!this.data[t]&&this.data[s]){if(this.transpose(!1,!0),e.stringSampleFactors&&e.stringSampleFactors.length){e.stringSampleFactors=this.toArray(e.stringSampleFactors);var a=e.stringSampleFactors[0];"z"==t?"String"!=this.meta.data.z[a].type&&this.switchNumericToString(a,!1,!0):"String"!=this.meta.data.x[a].type&&this.switchNumericToString(a,!0,!0)}}else if("xz"==t&&!this.aes.x)return this.geom_transpose()}else e.x&&e.y?this.data.y.vars.includes(e.x)&&this.meta.data.x&&this.meta.data.x.hasOwnProperty(e.y)&&("String"!=this.meta.data.x[e.y].type||this.meta.data.x[e.y].date)?(this.transpose(!1,!0),this.switchAnnotationToSmp(e.y,!0)):this.data.y.vars.includes(e.y)&&this.meta.data.x&&this.meta.data.x.hasOwnProperty(e.x)&&("String"!=this.meta.data.x[e.x].type||this.meta.data.x[e.x].date)?(this.transpose(!1,!0),this.switchAnnotationToSmp(e.x,!0)):(this.meta.data.x&&this.meta.data.x.hasOwnProperty(e.x)&&("String"!=this.meta.data.x[e.x].type||this.meta.data.x[e.x].date)&&this.meta.data.x&&this.meta.data.x.hasOwnProperty(e.y)&&("String"!=this.meta.data.x[e.y].type||this.meta.data.x[e.y].date)||this.data.y.vars.includes(e.x)&&this.data.y.vars.includes(e.y))&&(this.transpose(!1,!0),this.switchAnnotationToSmp([e.x,e.y],!0)):e.x?this.data.y.vars.includes(e.x)&&this.transpose(!1,!0):e.y&&this.data.y.vars.includes(e.y)&&this.transpose(!1,!0);return e.x&&(i.xAxis=[e.x]),e.y&&(i.yAxis=[e.y]),e.z&&(i.zAxis=[e.z]),i},this.geom_attrs=function(t,e){var i=Object.keys(e.meta.data.x).length?e.meta.data.x:Object.keys(e.meta.data.z).length?e.meta.data.z:{},s=!1,a=!1,r=!1,n=!1,o=!1,h=!1,l=!1,c=!1;t&&t.color&&(a=(s=t.color)&&i[s]),t&&t.fill&&(n=(r=t.fill)&&i[r]),t&&t.shape&&(h=(o=t.shape)&&i[o]),t&&t.size&&!(c=(l=t.size)&&i[l])&&e.data.y.smps.includes(l)&&(c=l),s&&!r?a?(e.colorBy=s,e.useOpenShapes=!1):(e.boxplotColor=s,e.violinColor=s):!s&&r?n?(e.colorBy=r,e.useOpenShapes=!1):(e.boxplotColor=r,e.violinColor=r):s&&r&&(e.useOpenShapes=!1,a&&n?e.colorBy=r:a&&!n?(e.colorBy=s,e.boxplotColor=r,e.violinColor=r,e.useOpenShapes=!0):!a&&n?(e.colorBy=r,e.boxplotBorderColor=s,e.violinBorderColor=s):(e.boxplotColor=r,e.violinColor=r,e.boxplotBorderColor=s,e.violinBorderColor=s)),o&&(h?e.shapeBy=o:e.shapes.unshift(o)),l&&(c?e.sizeBy=l:e.sizes.unshift(l))},this.geom_group=function(t,e,i,s){var a,r=e.meta.data.x,n=s?["x","y","color","fill"]:["x","y"];if(r){t=Object.assign(e.aes,t);for(var o=0;o<n.length;o++){var h=n[o];(t&&t[h]&&r[t[h]]||e.aes[h]&&r[e.aes[h]])&&((a=t&&t[h]&&r[t[h]]?t[h]:!!e.aes[h]&&e.aes[h])&&(e.groupingFactors.includes(a)||e.groupingFactors.push(a),t&&t.stringSampleFactors&&(t&&t[h]&&r[t[h]]&&"Numeric"==r[t[h]].type||t&&e.aes[h]&&r[e.aes[h]]&&"Numeric"==r[e.aes[h]].type)&&(e.stringSampleFactors.includes(a)||e.stringSampleFactors.push(a))),e.graphOrientation="x"==h?"vertical":"y"==h?"horizontal":e.graphOrientation)}}e.smpLabelRotate="vertical"==e.graphOrientation?90:0,e.sortOnGrouping="ascending",i&&(e.summaryType=i)},this.geom_factor=function(t,e){var i,s=e.meta.data.z,a=["color","fill","shape","size"];if(s)for(var r=0;r<a.length;r++){var n=a[r];(t&&t[n]&&s[t[n]]||e.aes[n]&&s[e.aes[n]])&&(i=t&&t[n]&&s[t[n]]?t[n]:!!e.aes[n]&&e.aes[n])&&t&&t.stringVariableFactors&&(t&&t[n]&&s[t[n]]&&"Numeric"==s[t[n]].type||t&&e.aes[n]&&s[e.aes[n]]&&"Numeric"==s[e.aes[n]].type)&&(e.stringVariableFactors.includes(i)||e.stringVariableFactors.push(i))}},this.geom_plot=function(t,e){var i=this;if(i.blocked)setTimeout((function(){i.geom_plot(t,e)}),30);else if(i.blocked=!0,i.dataURL&&!CanvasXpress.chain.hasOwnProperty(i.target)){var s=i.imageTimeOut/i.imageMaxTries,a=function(){i.imageTries<i.imageMaxTries&&(i.imageTries++,setTimeout((function(){CanvasXpress.chain.hasOwnProperty(i.target)?(i=CanvasXpress.getObject(CanvasXpress.chain[i.target]),t.call(i,i,i.geom_transpose(e))):a()}),s))};a()}else i.dataURL&&CanvasXpress.chain.hasOwnProperty(i.target)?(i=CanvasXpress.getObject(CanvasXpress.chain[i.target]),t.call(i,i,i.geom_transpose(e))):t.call(i,i,i.geom_transpose(e))},this.geom_arguments=function(t){for(var e=(t=Array.from(t)).shift(),i=0;i<t.length;i++)for(var s in t[i])e[s]=t[i][s];return e},this.geom_decs=function(t,e,i){if(e&&e.data)switch(t){case"point":for(var s=null,a=null,r=0;r<e.data[0].length;r++)"x"==e.data[0][r]?s=r:"y"==e.data[0][r]&&(a=r);if(null!=s&&null!=a){i.decorations||(i.decorations={});var n=i.decorations;n.point||(n.point=[]);for(r=1;r<e.data.length;r++)n.point.push({x:e.data[r][s],y:e.data[r][a]})}}},this.geom_xline=function(t,e,i){var s=this;this.geom_plot((function(a){var r=a.decorations||{},n=!1;"GeomAbline"==i?r.reg||(r.reg=[]):r.line||(r.line=[]);var o="GeomHline"==i?t.yintercept:"GeomVline"==i?t.xintercept:!!t.intercept&&t.intercept,h="GeomAbline"==i&&a.isArray(t.slope)?t.slope:"GeomAbline"==i&&[t.slope],l=[],c=[];t.data?(o&&(c=this.aes_data(t.data,o)),h&&(h=this.aes_data(t.data,h))):c=a.isArray(o)?o:[o],a.meta.data.l.includes("FacetWrap")&&t.data&&(n=a.segregateSamplesBy.length?a.segregateSamplesBy[0]:a.segregateVariablesBy[0],l=this.aes_data(t.data,n));for(var d=0;d<c.length;d++)switch(i){case"GeomHline":r.line.push({y:c[d],color:t.color||"black",width:t.size||1,scope:!!l.length&&l[d],data:t.data,column:n});break;case"GeomVline":r.line.push({x:c[d],color:t.color||"black",width:t.size||1,scope:!!l.length&&l[d],data:t.data,column:n});break;case"GeomAbline":r.reg.push({intercept:c[d],slope:h[d],color:t.color||"black",width:t.size||1,scope:!!l.length&&l[d],data:t.data})}a.decorations=r,a.meta.data.l.push(i),a.draw({func:"geom_xline",par:[t,e,i]}),a.blocked=!1,s.blocked=!1}))},this.geom_abline=function(t){this.geom_xline(t,"geom_abline","GeomAbline")},this.geom_hline=function(t){this.geom_xline(t,"geom_hline","GeomHline")},this.geom_vline=function(t){this.geom_xline(t,"geom_vline","GeomVline")},this.geom_bar=function(t,e,i){var s=this;this.geom_plot((function(a,r){for(var n in a.graphOrientation=t&&t.y||a.aes.y||e?"horizontal":"vertical",a.smpLabelRotate="vertical"==a.graphOrientation?90:0,r)a[n]=r[n];t&&t.weight&&(a.aes.weight=t.weight),s.geom_group(t,a,a.aes.weight?"sum":!a.data.y.vars.includes(a.aes.x)&&"count"),t&&(t.fill||t.fill)&&(t&&"dodge"==t.position?a.dodgeBy=t.fill||t.fill:a.stackBy=t.fill||t.fill),t&&(t.color||t.color)&&(t&&"dodge"==t.position?a.dodgeBy=t.color||t.color:a.stackBy=t.color||t.color),a.graphType=t&&"fill"==t.position?"StackedPercent":"Bar",a.meta.data.l.push(i||"GeomBar"),a.draw({func:"geom_bar",par:[t,e,i]}),a.blocked=!1,s.blocked=!1}),"x")},this.geom_col=function(t){this.geom_bar(t,"geom_col","GeomCol")},this.stat_count=this.geom_bar,this.geom_bin_2d=function(t,e,i){var s=this;this.geom_plot((function(a,r){a.graphType="Scatter2D",a.scatterType="bin2d",t&&t.bins&&(a.binplotBins=t.bins),t&&t.binwidth&&(a.binplotBinWidth=t.binwidth),a.binplotShape=i?"hexagon":"rectangle",a.meta.data.l.push(i||"GeomBin2d"),a.draw({func:"geom_bin_2d",par:[t,e,i]}),a.blocked=!1,s.blocked=!1}),"z")},this.geom_boxplot=function(t,e,i){var s=this,a=!!(t&&t.hasOwnProperty("group")&&t.group.hasOwnProperty("cut_width"))&&Object.keys(t.group.cut_width);this.geom_plot((function(r,n){var o=r.meta.data.l;for(var h in s.geom_group(t,r,!1,!0),s.geom_attrs(t,r),o.includes("GeomPoint")&&(r.showBoxplotOriginalData=!0),t&&t.notch&&(r.boxplotNotched=t.notch),n)r[h]=n[h];r.graphType="Boxplot",a&&(r.groupingFactors=a[0],r.groupingFactorWindow=t.group.cut_width[a[0]],r.boxplotVarWidth=!0,r.boxplotWhiskersType="single",r.graphType="Scatter2D",r.scatterType="boxplot"),r.meta.data.l.push(i||"GeomBoxplot"),r.draw({func:"geom_boxplot",par:[t,e,i]}),r.blocked=!1,s.blocked=!1}),a?"z":"x")},this.stat_boxplot=this.geom_boxplot,this.geom_contour=function(t,e,i){var s=this;this.geom_plot((function(a,r){var n=a.meta.data.z,o=a.meta.data.l;s.geom_factor(t,a),a.graphType=!i||i&&"GeomContourFilled"==i?"ScatterBubble2D":"Scatter2D",a.legendColumns=1,a.contourFilled=!(!i||"GeomContourFilled"!=i&&"GeomDensity2dFilled"!=i);var h={bins:"contourLevelNumber",binwidth:"contourLevelWidth",breaks:"contourLevels",contour_var:"contourStat"};for(var l in t)h.hasOwnProperty(l)?a[h[l]]=t[l]:a[l]=t[l];i&&"GeomRaster"==i?(a.showContourBands=!1,a.contourType="raster"):o.includes("GeomPoint")&&(a.showContourDataPoints=!0),!i||"GeomContourFilled"!=i&&"GeomDensity2dFilled"!=i||(a.showContourBands=!1);var c=!1;for(var l in t&&(t.fill||t.fill)?t.fill&&n.hasOwnProperty(t.fill)||t.fill&&n.hasOwnProperty(t.fill)?c=t.fill:a.contourBandsColor=t.fill||t.fill:t&&(t.color||t.color)?t.color&&n.hasOwnProperty(t.color)||t.color&&n.hasOwnProperty(t.color)?c=t.color:a.contourBandsColor=t.color||t.color:o.includes("FacetWrap")&&(c=a.segregateSamplesBy.length?a.segregateSamplesBy[0]:a.segregateVariablesBy[0]),t&&t.alpha&&(a.contourFilledTransparency=t.alpha),r)a[l]=r[l];a.isContour=c||!0,a.meta.data.l.push(i||"GeomContour"),a.draw({func:"geom_contour",par:[t,e,i]}),a.blocked=!1,s.blocked=!1}))},this.stat_contour=this.geom_contour,this.geom_contour_filled=function(t){this.geom_contour(t,"geom_contour_filled","GeomContourFilled")},this.stat_contour_filled=this.geom_contour_filled,this.geom_density=function(t){var e=this;this.geom_plot((function(i,s){var a=i.meta.data.z;e.geom_factor(t,i),i.hideHistogram=!0,i.showHistogramDensity=!0,i.histogramStat=t&&t.after_stat?t.after_stat:i.aes.after_stat?i.aes.after_stat:"density",i.showFilledHistogramDensity=!!(t&&t.fill||i.aes.fill);var r={alpha:"histogramDensityFillTransparency",bw:"bandwidthRule",adjust:"bandwidthAdjust",kernel:"densityKernel",position:"densityPosition"};for(var n in t)r.hasOwnProperty(n)?i[r[n]]=t[n]+("position"==n?"ed":""):i[n]=t[n];"filled"==i.densityPosition&&delete t.fill;var o=!0;for(var n in t&&t.color?t.color&&a.hasOwnProperty(t.color)&&(o=t.color):i.aes.color&&(o=i.aes.color),t&&(t.fill||i.aes.fill)&&1==o&&(t&&t.fill?t.fill&&a.hasOwnProperty(t.fill)&&(o=t.fill):i.aes.fill&&(o=i.aes.fill)),s)i[n]=s[n];i.histogramData=o,i.graphType="Scatter2D",i.legendColumns=1,i.meta.data.l.push("GeomDensity"),i.draw({func:"geom_density",par:[t]}),i.blocked=!1,e.blocked=!1}))},this.stat_density=this.geom_density,this.geom_density_2d=function(t){this.geom_contour(t,"geom_density_2d","GeomDensity2d")},this.stat_density_2d=this.geom_density_2d,this.geom_density_2d_filled=function(t){this.geom_contour(t,"geom_density_2d_filled","GeomDensity2dFilled")},this.stat_density_2d_filled=this.geom_density_2d_filled,this.geom_dotplot=function(t){var e=this;this.geom_plot((function(i,s){var a={stackdir:"histogramStackDir",stackratio:"histogramStackRatio",binwidth:"histogramBinWidth",bins:"histogramBins"},r=(s=!1,[]);for(var n in t)a.hasOwnProperty(n)?i[a[n]]=t[n]:i[n]=t[n];(i.aes.color||i.aes.fill)&&(i.colorBy=i.aes.color||i.aes.fill),i.aes.x&&i.aes.y?(i.graphType="Dotplot",i.aes.asSampleFactors&&i.aes.asSampleFactors.includes(i.aes.x)&&(r.push(i.aes.x),i.graphOrientation="vertical",i.smpLabelRotate=90,i.widthFactor=1,i.binned=!0,i.binAlignment=t.stackdir||"center"),i.colorBy&&r.push(i.colorBy),r.length&&(i.groupingFactors=r,s=[["sortSamplesByCategory",[r]]])):(i.graphType="Scatter2D",i.histogramAsDotplot=!0,i.histogramData=!0),i.histogramRight=!1,i.histogramBins||(i.histogramBins=30),i.meta.data.l.push("GeomDotplot"),i.draw({func:"geom_dotplot",par:[t],preRender:s}),i.blocked=!1,e.blocked=!1}),"xz")},this.geom_hex=function(t){this.geom_bin_2d(t,"geom_hex","GeomHex")},this.geom_histogram=function(t,e,i){var s=this;this.geom_plot((function(a,r){var n=a.meta.data.z;s.geom_factor(t,a),a.hideHistogram=!!(i||t&&(t.color||t.color)||a.aes.color),a.showHistogramPath=!!(i||t&&(t.color||t.color)||a.aes.color),a.showHistogramDensity=!1,a.histogramType=i?"dodged":"stacked",a.histogramStat=t&&t.after_stat?t.after_stat:a.aes.after_stat?a.aes.after_stat:"count";var o={bw:"bandwidthRule",adjust:"bandwidthAdjust",kernel:"densityKernel",bins:"histogramBins",binwidth:"histogramBinWidth"};for(var h in t)o.hasOwnProperty(h)?a[o[h]]=t[h]:a[h]=t[h];var l=!0;for(var h in t&&(t.fill||t.fill)?(t.fill&&n.hasOwnProperty(t.fill)||t.fill&&n.hasOwnProperty(t.fill))&&(l=t.fill):t&&(t.color||t.color)?(t.color&&n.hasOwnProperty(t.color)||t.color&&n.hasOwnProperty(t.color))&&(l=t.color):(a.aes.fill||a.aes.color)&&(l=a.aes.fill||a.aes.color),r)a[h]=r[h];a.histogramRight=!1,a.histogramBins||(a.histogramBins=30),a.histogramData=l,a.graphType="Scatter2D",a.legendColumns=1,a.meta.data.l.push(i||"GeomHistogram"),a.draw({func:"geom_histogram",par:[t,e,i]}),a.blocked=!1,s.blocked=!1}))},this.stat_bin=this.geom_histogram,this.geom_line=function(t,e,i){var s=this;this.geom_plot((function(a,r){var n=a.aes.x&&a.aes.y&&a.data.y.smps.includes(a.aes.x)&&a.data.y.smps.includes(a.aes.y),o=a.meta.data.x;for(var h in t&&t.linetype&&(a.patternBy=t.linetype),r)a[h]=r[h];if(t&&t.linetype){var l=t.linetype;!n&&o&&o.hasOwnProperty(l)&&(a.lineBy=l)}a.graphType=n?"Scatter2D":"Line",a.scatterType=n&&i&&"GeomStep"==i?"lineStep":!!n&&"line",a.meta.data.l.push(i||"GeomLine"),a.draw({func:"geom_line",par:[t,e,i]}),a.blocked=!1,s.blocked=!1}))},this.geom_path=function(t,e,i){var s=this;this.geom_plot((function(a,r){a.graphType="Scatter2D",a.scatterType="line",a.meta.data.l.push(i||"GeomPath"),a.draw({func:"geom_path",par:[t,e,i]}),a.blocked=!1,s.blocked=!1}))},this.geom_jitter=function(t){this.geom_point(t,"geom_jiter","GeomJitter")},this.geom_point=function(t,e,i){var s=this;this.geom_plot((function(a,r){var n=a.meta.config.user.aes,o=a.meta.data.x,h=a.meta.data.l;for(var l in h.includes("GeomBoxplot")||h.includes("GeomViolin")||i&&"GeomJitter"==i?a.showBoxplotOriginalData=!0:(h.includes("GeomContour")||h.includes("GeomContourFilled")||h.includes("GeomDensity2d")||h.includes("GeomDensity2dFilled"))&&(a.showContourDataPoints=!t||!t.data),a.graphOrientation="vertical",r)a[l]=r[l];i&&"GeomJitter"==i&&(a.jitter=!0,t&&t.width&&(a.jitterFactor=t.width)),s.geom_factor(t,a),s.geom_group(t,a,!1,!0),s.geom_attrs(t,a),s.geom_decs("point",t,a),i&&"GeomJitter"==i||(a.graphType=h.includes("GeomBoxplot")||h.includes("GeomViolin")?"Boxplot":n.x&&n.y?"Scatter2D":"Dotplot",o&&(o.hasOwnProperty(n.x)&&"String"==o[n.x].type||o.hasOwnProperty(n.y)&&"String"==o[n.y].type)&&(a.graphType="Dotplot")),"Scatter2D"==a.graphType&&(a.legendColumns=1),a.meta.data.l.push(i||"GeomPoint"),a.draw({func:"geom_point",par:[t,e,i]}),a.blocked=!1,s.blocked=!1}))},this.geom_qq=function(t,e,i){var s=this;this.geom_plot((function(a,r){a.meta.data.l.includes("GeomQq")&&!t||(a.graphType="Scatter2D",a.scatterType="qq",a.aes&&a.aes.hasOwnProperty("color")&&(a.colorBy=a.aes.color),a.meta.data.l.push(i||"GeomQq"),a.draw({func:"geom_qq",par:[t,e,i]}),a.blocked=!1,s.blocked=!1)}),"z")},this.geom_qq_line=function(t){this.geom_qq(t,"geom_qq_line","GeomQqLine")},this.geom_quantile=function(t){var e=this;this.geom_plot((function(i,s){e.geom_factor(t,i),i.showQuantileRegressionFit=!0;var a={quantiles:"quantiles",color:"fitLineColor",alpha:"fitLineTransparency"};for(var r in t)a.hasOwnProperty(r)?i[a[r]]=t[r]:i[r]=t[r];for(var r in t&&t.size&&(i.fitLineWidth=2*t.size),s)i[r]=s[r];i.graphType="Scatter2D",i.legendColumns=1,i.meta.data.l.push("GeomQuantile"),i.draw({func:"geom_quantile",par:[t]}),i.blocked=!1,e.blocked=!1}))},this.stat_quantile=this.geom_quantile,this.geom_ribbon=function(){var t=this.geom_arguments(arguments),e=this,i=function(i,s){i.graphType="Scatter2D",i.scatterType="line",i.ribbonBy=[t.ymin,t.ymax],t.fill&&(i.confidenceIntervalColor=t.fill),i.meta.data.l.push("GeomRibbon"),i.draw({func:"geom_ribbon",par:[t]}),i.blocked=!1,e.blocked=!1};this.geom_plot(i)},this.geom_rug=function(t){var e=this;this.geom_plot((function(i,s){e.geom_factor(t,i);var a=t&&t.sides?t.sides:"bl",r=a.match("b"),n=a.match("t"),o=a.match("l"),h=a.match("r");for(var l in r&&n?(i.xAxisRugShow=!0,i.xAxisRugPosition="both"):r?(i.xAxisRugShow=!0,i.xAxisRugPosition="bottom"):n&&(i.xAxisRugShow=!0,i.xAxisRugPosition="top"),o&&h?(i.yAxisRugShow=!0,i.yAxisRugPosition="both"):o?(i.yAxisRugShow=!0,i.yAxisRugPosition="left"):h&&(i.yAxisRugShow=!0,i.yAxisRugPosition="right"),s)i[l]=s[l];i.graphType="Scatter2D",i.legendColumns=1,i.meta.data.l.push("GeomRug"),i.draw({func:"geom_rug",par:[t]}),i.blocked=!1,e.blocked=!1}))},this.geom_smooth=function(t){var e=this;this.geom_plot((function(i,s){for(var a in e.geom_factor(t,i),s)i[a]=s[a];i.showLoessFit=!0,i.graphType="Scatter2D",i.legendColumns=1,i.meta.data.l.push("GeomSmooth"),i.draw({func:"geom_smooth",par:[t]}),i.blocked=!1,e.blocked=!1}))},this.stat_smooth=this.geom_smooth,this.geom_violin=function(t){var e=this;this.geom_plot((function(i,s){var a=i.meta.data.l;a.includes("GeomPoint")&&(i.showBoxplotOriginalData=!0),i.showBoxplotIfViolin=!!a.includes("GeomBoxplot");var r={bw:"bandwidthRule",adjust:"bandwidthAdjust",kernel:"densityKernel",scale:"violinScale",trim:"violinTrim"};for(var n in t)r.hasOwnProperty(n)?i[r[n]]=t[n]:i[n]=t[n];for(var n in s)i[n]=s[n];e.geom_group(t,i,!1,!0),e.geom_attrs(t,i),t&&t.draw_quantiles&&(i.showViolinQuantiles=!0,i.quantiles=t.draw_quantiles),i.graphType="Boxplot",i.showViolinBoxplot=!0,i.widthFactor=1,i.meta.data.l.push("GeomViolin"),i.draw({func:"geom_violin",par:[t]}),i.blocked=!1,e.blocked=!1}),"x")},this.stat_ydensity=this.geom_violin,this.geom_raster=function(t){this.geom_contour(t,"geom_raster","GeomRaster")},this.geom_step=function(t){this.geom_line(t,"geom_step","GeomStep")},this.geom_text=function(t){var e=this;this.geom_plot((function(i,s){for(var a in s)i[a]=s[a];i.showDataValues=!0,i.meta.data.l.push("GeomText"),i.draw({func:"geom_text",par:[t]}),i.blocked=!1,e.blocked=!1}))},this.stat_ecdf=function(t){var e=this;this.geom_plot((function(i,s){for(var a in s)i[a]=s[a];i.graphType="Scatter2D",i.scatterType="cdf",i.aes&&i.aes.hasOwnProperty("color")&&(i.colorBy=i.aes.color),i.meta.data.l.push("StatEcdf"),i.draw({func:"stat_ecdf",par:[t]}),i.blocked=!1,e.blocked=!1}),"z")},this.stat_ellipse=function(t){var e=this;this.geom_plot((function(i,s){for(var a in s)i[a]=s[a];i.graphType="Scatter2D",i.aes&&i.aes.hasOwnProperty("color")&&(i.ellipseBy=i.aes.color),i.meta.data.l.push("StatEllipse"),i.draw({func:"stat_ellipse",par:[t]}),i.blocked=!1,e.blocked=!1}),"z")},this.gg_facet=function(t){this.getKeys(t).length&&t.facet&&this.facet_wrap(t.facet)},this.facet_wrap=function(t){var e=this;this.geom_plot((function(i){var s;if("Scatter2D"==i.graphType?(s=i.unique(i.data.z[t]),i.segregateVariablesBy.push(t)):(s=i.unique(i.data.x[t]),i.segregateSamplesBy.push(t)),s.length<=3&&(i.layoutTopology="1X"+s.length),i.meta.data.l.push("FacetWrap"),i.meta.data.l.includes("GeomVline")||i.meta.data.l.includes("GeomHline"))for(var a=0;a<i.decorations.line.length;a++){var r=i.decorations.line[a];if(r.data){var n=this.aes_data(r.data,t);if(n)for(var o=0;o<n.length;o++)n[a]==n[o]&&(r.scope=n[a])}}i.draw({func:"facet_wrap",par:[t]}),i.blocked=!1,e.blocked=!1}))},this.gg_labels=function(t){if(this.getKeys(t).length){for(var e in t)this[e]=t[e];this.draw({func:"gg_labels",par:[t]})}},this.labs=function(t){var e=this;if(this.getKeys(t).length){this.geom_plot((function(i){for(var s in t)switch(s){case"x":i.xAxisTitle=t[s];break;case"y":i.yAxisTitle=t[s];break;case"title":case"subtitle":i[s]=t[s];break;case"caption":i.citation=t[s]}i.draw({func:"labs",par:[t]}),i.blocked=!1,e.blocked=!1}))}},this.xlabs=function(t){this.labs({x:t})},this.ylabs=function(t){this.labs({y:t})},this.ggtitle=function(){var t=this.geom_arguments(arguments),e={title:t.shift()};for(var i in t)e[i]=t[i];this.labs(e)},this.gg_scales=function(t){if(this.getKeys(t).length){for(var e in t)this[e]=t[e];this.draw({func:"gg_scales",par:[t]})}},this.xlim=function(t,e){var i=this;this.geom_plot((function(s){s.setMinX=t,s.setMaxX=e,s.blocked=!1,i.blocked=!1}))},this.ylim=function(t,e){var i=this;this.geom_plot((function(s){s.setMinY=t,s.setMaxY=e,s.blocked=!1,i.blocked=!1}))},this.gg_theme=function(t){var e=this;if(this.getKeys(t).length){for(var i in t)if(this.isObject(t[i]))for(var s in t[i])t[i+"."+s]=t[i][s];this.geom_plot((function(i){i.gg_theme_axis(t),i.gg_theme_legend(t),i.gg_theme_panel(t),i.gg_theme_plot(t),i.gg_theme_strip(t),i.draw({func:"gg_theme",par:[t]}),i.blocked=!1,e.blocked=!1}))}},this.gg_theme_axis=function(t){t.hasOwnProperty("axis.title.face")&&(this.axisTitleFontStyle=t["axis.title.face"]),(t.hasOwnProperty("axis.title.color")||t.hasOwnProperty("axis.title.colour"))&&(this.axisTitleColor=t["axis.title.color"]||t["axis.title.colour"]),t.hasOwnProperty("axis.title.size")&&(t["axis.title.size"]<=4?this.axisTitleScaleFontFactor=t["axis.title.size"]:t["axis.title.size"]>4&&(this.axisTitleScaleFontFactor=t["axis.title.size"]/12)),t.hasOwnProperty("axis.title.x.top"),t.hasOwnProperty("axis.title.x.bottom"),t.hasOwnProperty("axis.title.y.left"),t.hasOwnProperty("axis.title.y.right"),t.hasOwnProperty("axis.text.face")&&(this.axisTickFontStyle=t["axis.text.face"]),(t.hasOwnProperty("axis.text.color")||t.hasOwnProperty("axis.text.colour"))&&(this.axisTickColor=t["axis.text.color"]||t["axis.text.colour"]),t.hasOwnProperty("axis.text.size")&&(t["axis.text.size"]<=4?this.axisTickScaleFontFactor=t["axis.text.size"]:t["axis.text.size"]>4&&(this.axisTickScaleFontFactor=t["axis.text.size"]/12)),(t.hasOwnProperty("axis.ticks.color")||t["axis.ticks.colour"])&&(this.axisTickColor=t["axis.ticks.color"]||t["axis.ticks.colour"]),t.hasOwnProperty("axis.ticks.size")&&(this.xAxisTickSize=t["axis.ticks.size"],this.yAxisTickSize=t["axis.ticks.size"]),t.hasOwnProperty("axis.ticks.x.top.size")&&(this.yAxisTickTopSize=t["axis.ticks.x.top.size"]),t.hasOwnProperty("axis.ticks.x.bottom.size")&&(this.yAxisTickBottomSize=t["axis.ticks.x.bottom.size"]),t.hasOwnProperty("axis.ticks.y.left.size")&&(this.xAxisTickLeftSize=t["axis.ticks.y.left.size"]),t.hasOwnProperty("axis.ticks.y.right.size")&&(this.xAxisTickRightSize=t["axis.ticks.y.right.size"]),t.hasOwnProperty("axis.line.x.linetype")&&(this.xAxisTickLineType=t["axis.line.x.linetype"]),(t.hasOwnProperty("axis.line.x.color")||t["axis.line.x.colour"])&&(this.xAxisTickColor=t["axis.line.x.color"]||t["axis.line.x.colour"]),t.hasOwnProperty("axis.line.y.linetype")&&(this.yAxisTickLineType=t["axis.line.y.linetype"]),(t.hasOwnProperty("axis.line.y.color")||t["axis.line.y.colour"])&&(this.yAxisTickColor=t["axis.line.y.color"]||t["axis.line.y.colour"]),(t.hasOwnProperty("axis.line.x.top.color")||t.hasOwnProperty("axis.line.x.top.colour"))&&(this.yAxisTickTopColor=t["axis.line.x.top.color"]||t["axis.line.x.top.colour"]),(t.hasOwnProperty("axis.line.x.bottom.color")||t.hasOwnProperty("axis.line.x.bottom.colour"))&&(this.yAxisTickBottomColor=t["axis.line.x.bottom.color"]||t["axis.line.x.bottom.colour"]),(t.hasOwnProperty("axis.line.y.left.color")||t.hasOwnProperty("axis.line.y.left.colour"))&&(this.xAxisTickLeftColor=t["axis.line.y.left.color"]||t["axis.line.y.left.colour"]),(t.hasOwnProperty("axis.line.y.right.color")||t.hasOwnProperty("axis.line.y.right.colour"))&&(this.xAxisTickRightColor=t["axis.line.y.right.color"]||t["axis.line.y.right.colour"])},this.gg_theme_legend=function(t){if(t.hasOwnProperty("legend.background")&&(this.legendBackgroundColor=t["legend.background"]),t.hasOwnProperty("legend.text.face")&&(this.legendTextFontStyle=t["legend.text.face"]),(t.hasOwnProperty("legend.text.color")||t.hasOwnProperty("legend.text.colour"))&&(this.legendColor=t["legend.text.color"]||t["legend.text.colour"]),t.hasOwnProperty("legend.text.size")&&(t["legend.text.size"]<=4?this.legendTextScaleFontFactor=t["legend.text.size"]:t["legend.text.size"]>4&&(this.legendTextScaleFontFactor=t["legend.text.size"]/12)),t.hasOwnProperty("legend.title.face")&&(this.legendTitleFontStyle=t["legend.title.face"]),(t.hasOwnProperty("legend.title.color")||t.hasOwnProperty("legend.title.colour"))&&(this.legendTitleColor=t["legend.title.color"]||t["legend.title.colour"]),t.hasOwnProperty("legend.title.size")&&(t["legend.title.size"]<=4?this.legendTextScaleFontFactor=t["legend.title.size"]:t["legend.title.size"]>4&&(this.legendTextScaleFontFactor=t["legend.title.size"]/12)),t.hasOwnProperty("legend.position")){var e,i,s,a=t["legend.position"],r=t["legend.justification"];this.isArray(a)?(e=Number(a[0])>.67?"Right":Number(a[0]<.33)?"Left":"",""==(i=Number(a[1])>.67?"top":Number(a[1]<.33)?"bottom":"")?this.legendPostion=e.toLowerCase():this.legendPosition=i+e,this.legendInside=!0):("none"==a?this.showLegend=!1:r?this.isArray(r)?"bottomleft"==(s=r.sort().join(""))?this.legendPosition="bottomLeft":"bottomright"==s?this.legendPosition="bottomRight":(s="topleft")?this.legendPosition="topLeft":this.legendPosition="topRight":this.legendPosition="right"!=a&&"left"!=a||"top"!=r&&"bottom"!=r?"top"!=a&&"bottom"!=a||"right"!=r&&"left"!=r?a:a+this.capitalize(r):r+this.capitalize(a):this.legendPosition=a,this.legendInside=!1)}},this.gg_theme_panel=function(t){t.hasOwnProperty("panel.ontop")&&t["panel.ontop"]&&(this.backgroundType="solid"),t.hasOwnProperty("panel.background.fill")&&(this.backgroundWindow=t["panel.background.fill"]),(t.hasOwnProperty("panel.background.color")||t.hasOwnProperty("panel.background.colour"))&&(this.foreground=t["panel.background.color"]||t["panel.background.colour"]),(t.hasOwnProperty("panel.border.fill")||t.hasOwnProperty("panel.border.color")||t.hasOwnProperty("panel.border.colour"))&&(this.plotBox=!0,this.plotBoxColor=t["panel.border.fill"]||t["panel.border.color"]||t["panel.border.colour"])},this.gg_theme_plot=function(t){t.hasOwnProperty("plot.background.fill")&&(this.background=t["plot.background.fill"]),t.hasOwnProperty("plot.margin")&&(this.margin=t["plot.margin"]),t.hasOwnProperty("plot.title.face")&&(this.titleFontStyle=t["plot.title.face"]),(t.hasOwnProperty("plot.title.color")||t.hasOwnProperty("plot.title.colour"))&&(this.titleColor=t["plot.title.color"]||t["plot.title.colour"]),t.hasOwnProperty("plot.title.size")&&(t["plot.title.size"]<=4?this.titleScaleFontFactor=t["plot.title.size"]:t["plot.title.size"]>4&&(this.titleScaleFontFactor=t["plot.title.size"]/12)),t.hasOwnProperty("plot.title.position")&&(this.titleAlign=t["plot.title.position"]),t.hasOwnProperty("plot.subtitle.face")&&(this.subtitleFontStyle=t["plot.subtitle.face"]),(t.hasOwnProperty("plot.subtitle.color")||t.hasOwnProperty("plot.subtitle.colour"))&&(this.subtitleColor=t["plot.subtitle.color"]||t["plot.subtitle.colour"]),t.hasOwnProperty("plot.subtitle.size")&&(t["plot.subtitle.size"]<=4?this.subtitleScaleFontFactor=t["plot.subtitle.size"]:t["plot.subtitle.size"]>4&&(this.subtitleScaleFontFactor=t["plot.subtitle.size"]/12)),t.hasOwnProperty("plot.subtitle.position")&&(this.subtitleAlign=t["plot.subtitle.position"]),t.hasOwnProperty("plot.citation.face")&&(this.citationFontStyle=t["plot.citation.face"]),(t.hasOwnProperty("plot.citation.color")||t.hasOwnProperty("plot.citation.colour"))&&(this.citationColor=t["plot.citation.color"]||t["plot.citation.colour"]),t.hasOwnProperty("plot.citation.size")&&(t["plot.citation.size"]<=4?this.citationScaleFontFactor=t["plot.citation.size"]:t["plot.citation.size"]>4&&(this.citationScaleFontFactor=t["plot.citation.size"]/12)),t.hasOwnProperty("plot.citation.position")&&(this.citationAlign=t["plot.citation.position"])},this.gg_theme_strip=function(t){(t.hasOwnProperty("strip.text.color")||t.hasOwnProperty("strip.text.colour"))&&(this.layoutLabelColor=t["strip.text.color"]||t["strip.text.colour"]),t.hasOwnProperty("strip.background.fill")&&(this.layoutBoxLabelColors=[t["strip.background.fill"]])}},CanvasXpress.prototype.Pie=function(t){this.setVarPie=function(){var t=[],e=this.smpIndices[0];if(this.varIndices.length>=this.maxPieSectors-1){var i=this;this.varIndices.sort((function(t,s){return i.data.y.data[s][e]-i.data.y.data[t][e]}))}for(var s=0;s<this.varIndices.length;s++){var a=this.varIndices[s];t.push(this.getDataAtPos(a,e))}this.varPie=this.setPieData(t,!0)},this.setPieFont=function(){if(this.autoScaleFont){var t=this.layoutComb&&this.isDOE?this.layoutWidth:this.width,e=this.layoutComb&&this.isDOE?this.layoutHeight:this.height,i=Math.min(t,e)*(1-this.percentAspectRatioPlotArea);this.setAxisFont("Pie",i)}},this.setPieXYDimensions=function(){this.showLegend&&("right"==this.legendPosition?this.right=this.layoutComb&&!this.isDOE?this.layoutRight:this.layoutComb?Math.min(this.layoutWidth/3,this.legend.variable.width):Math.min(this.width/3,this.legend.variable.width):"left"==this.legendPosition?this.left=this.layoutComb&&!this.isDOE?this.layoutRight:this.layoutComb?Math.min(this.layoutWidth/3,this.legend.variable.width):Math.min(this.width/3,this.legend.variable.width):"top"==this.legendPosition?this.top+=this.layoutComb&&!this.isDOE?this.layoutBottom:this.layoutComb?Math.min(this.layoutHeight/3,this.legend.variable.height):Math.min(this.height/3,this.legend.variable.height):"bottom"==this.legendPosition&&(this.bottom=this.layoutComb&&!this.isDOE?this.layoutBottom:this.layoutComb?Math.min(this.layoutHeight/3,this.legend.variable.height):Math.min(this.height/3,this.legend.variable.height))),this.x=this.layoutComb&&!this.isDOE?this.layoutWidth:this.layoutComb?this.layoutWidth-(this.left+this.right):this.width-(this.marginLeft+this.left+this.right+this.marginRight),this.y=this.layoutComb&&!this.isDOE?this.layoutHeight:this.layoutComb?this.layoutHeight-(this.top+this.bottom):this.height-(this.marginTop+this.top+this.bottom+this.marginBottom)},this.drawPieDataPoints=function(){this.isDOE||this.toRender({p:["setClipArea",this.setClipBoundaries()],t:"Data"});var t=Math.min(this.x,this.y),e=(t-t/5)/2,i=this.marginLeft+this.offsetX+this.left+this.x/2,s=this.marginTop+this.offsetY+this.top+this.y/2;this.setVarPie(),this.drawPie(this.varPie,i,s,e,!0),this.isDOE||this.toRender({p:["resetClipArea"],t:"Data"})},this.drawPiePlot=function(){this.setPieFont(),this.setLegends(),this.setPieXYDimensions(),this.drawPieDataPoints(),this.drawLegend(),this.drawTitle()},this.initializePiePlot=function(){!this.data.y.pie&&this.xAxisMin<0?alert("Dude you can't draw a pie chart with negative numbers!"):(this.setPropertyFontSize(Math.min(this.width,this.height),"smpLabelFont"),this.layoutValid?this.drawLayoutCompartments(this.drawPiePlot):this.drawPiePlot())},t||this.initializePiePlot()},CanvasXpress.prototype.Venn=function(){this.setVennXYDimensions=function(){if(this.vennMarginLeft=0,this.vennMarginTop=0,this.setAxisFont("Venn",this.width),this.showLegend&&(this.bottom=this.legend.height),this.width<=this.height?this.x=this.width-(this.marginLeft+this.left+this.right+this.marginRight):this.x=this.height-(this.marginTop+this.top+this.bottom+this.marginBottom),this.y=4==this.vennGroups?.8*this.x:3==this.vennGroups?.95*this.x:2==this.vennGroups?.65*this.x:this.x,this.vennMarginTop=(this.height-(this.marginTop+this.top+this.y+this.bottom+this.marginBottom))/2,this.vennMarginLeft=(this.width-(this.marginLeft+this.left+this.x+this.right+this.marginRight))/2,this.x<400){var t=this.getFontPt(this.axisTickFont)-2;this.x<200&&(t-=1),this.axisTickFont=t+"px "+this.fontName}this.resizeCanvas()},this.drawVennBubble=function(t,e,i,s,a,r){var n=this.marginLeft+this.left+this.x/2,o=this.marginTop+this.top+this.y/2;this.toRender({p:["drawShape",i,t,e,s,s,this.getFillColor(a),this.getOutlineColor(a),"closed",r],b:[n,o,0,0],t:"Data"})},this.drawVennLayoutBubbles=function(){var t,e,i,s,a=[];for(var r in this.data.venn.legend)a.push(r);this.toRender({p:["rectangleClear",0,0,this.width,this.height],t:"Data"}),this.toRender({p:["setGlobalCompositionOperation","lighter"],t:"Data"}),4==this.vennGroups?(t=this.vennMarginLeft+this.marginLeft+this.margin,e=this.vennMarginTop+this.marginTop+this.top,this.drawVennBubble(t+this.x/4.94,e+this.x/13,"ellipse2",this.x/1.4,this.vennColors.length>0&&this.validateColor(this.vennColors[0])?this.validateColor(this.vennColors[0]):"rgb(255,0,0)",Math.PI/4),this.drawVennBubble(t+this.x/2.72,e+this.x/-40.31,"ellipse2",this.x/1.4,this.vennColors.length>1&&this.validateColor(this.vennColors[1])?this.validateColor(this.vennColors[1]):"rgb(0,153,51)",Math.PI/4),this.drawVennBubble(t+this.x/3.43,e+this.x/1.72,"ellipse2",this.x/1.4,this.vennColors.length>2&&this.validateColor(this.vennColors[2])?this.validateColor(this.vennColors[2]):"rgb(0,0,255)",-Math.PI/4),this.drawVennBubble(t+this.x/7.96,e+this.x/2.07,"ellipse2",this.x/1.4,this.vennColors.length>3&&this.validateColor(this.vennColors[3])?this.validateColor(this.vennColors[3]):"rgb(153,204,0)",-Math.PI/4),i=[11.2,3.05,1.46,1.08],s=[7,42,42,7]):3==this.vennGroups?(t=this.vennMarginLeft+this.marginLeft+this.left+this.x/2,e=this.vennMarginTop+this.marginTop+this.top+this.x/2.86,this.drawVennBubble(t,e,"circle",this.x/2,this.vennColors.length>0&&this.validateColor(this.vennColors[0])?this.validateColor(this.vennColors[0]):"rgb(255,0,0)"),e+=this.x/3.33,t=this.vennMarginLeft+this.marginLeft+this.left+this.x/3,this.drawVennBubble(t,e,"circle",this.x/2,this.vennColors.length>1&&this.validateColor(this.vennColors[1])?this.validateColor(this.vennColors[1]):"rgb(0,255,0)"),t=this.vennMarginLeft+this.marginLeft+this.left+this.x/1.5,this.drawVennBubble(t,e,"circle",this.x/2,this.vennColors.length>2&&this.validateColor(this.vennColors[2])?this.validateColor(this.vennColors[2]):"rgb(0,0,255)"),i=[2,8.66,1.13],s=[20,2.3,2.3]):2==this.vennGroups?(t=this.vennMarginLeft+this.marginLeft+this.left+this.x/3,e=this.vennMarginTop+this.marginTop+this.top+this.x/2.67,this.drawVennBubble(t,e,"circle",this.x/2,this.vennColors.length>0&&this.validateColor(this.vennColors[0])?this.validateColor(this.vennColors[0]):"rgb(0,0,255)"),t=this.vennMarginLeft+this.marginLeft+this.left+this.x/1.5,e=this.vennMarginTop+this.marginTop+this.top+this.x/2.67,this.drawVennBubble(t,e,"circle",this.x/2,this.vennColors.length>1&&this.validateColor(this.vennColors[1])?this.validateColor(this.vennColors[1]):"rgb(255,0,0)"),i=[3,1.5],s=[16,16]):1==this.vennGroups&&(t=this.vennMarginLeft+this.marginLeft+this.left+this.x/2,e=this.vennMarginTop+this.marginTop+this.top+this.x/2,this.toRender({p:["drawShape","circle",t,e,this.x,this.x,this.vennColors.length>0&&this.validateColor(this.vennColors[0])?this.validateColor(this.vennColors[0]):"rgb(255,0,0)",this.foreground,"closed"],t:"Data"}),i=[100],s=[100]),this.toRender({p:["setGlobalCompositionOperation","source-over"],t:"Data"}),this.drawVennLayout(i,s,a)},this.drawVennLayout=function(t,e,i){if(!this.vennLegendColors)for(var s=0;s<this.vennGroups;s++){var a=this.vennMarginLeft+this.marginLeft+this.left+this.x/t[s],r=this.vennMarginTop+this.marginTop+this.top+this.x/e[s];this.toRender({p:["drawText",i[s],a,r,this.axisTickFont,this.axisTickColor,"center","middle"],t:"Labels"})}},this.drawVennDataPoints=function(){var t,e,i;this.vennCompartments=this.vennCompartments.sort(),4==this.vennGroups?(i=[0,8,1,12,5,9,2,14,7,11,13,4,6,10,3],t=[5.6,2.94,3.5,1.54,3.29,2,2.59,1.212,2,1.442,1.4,1.757,2.31,1.624,2],e=[2.94,7,3.92,7,1.89,4.06,2.66,2.94,1.54,1.89,3.92,1.729,1.729,2.66,2.03],this.y=1.1*this.x/1.4):3==this.vennGroups?(i=[0,4,1,6,3,5,2],t=[2,3.5,2.55,1.4,1.6,2,2],e=[3.6,1.54,2.07,1.54,2.07,1.54,1.83],this.y=.95*this.x):2==this.vennGroups?(i=[0,2,1],t=[3.5,1.4,2],e=[2.66,2.66,2.66],this.y=.65*this.x):1==this.vennGroups&&(i=[0],t=[2],e=[2]);for(var s=0;s<i.length;s++){var a=this.vennMarginLeft+this.marginLeft+this.left+this.x/t[s],r=this.vennMarginTop+this.marginTop+this.top+this.x/e[s],n=(this.getFontPt(this.axisTickFont),this.data.venn.data[this.vennCompartments[i[s]]]?this.data.venn.data[this.vennCompartments[i[s]]]:0);this.isArray(n)&&(n=n[0]),this.toRender({p:["drawText",n,a,r,this.axisTickFont,this.axisTickColor,"center","middle"],i:[i[s]],t:"Labels"})}},this.validateVennCompartments=function(){var t="";4==this.vennGroups&&15!=this.vennCompartments.length?(this.vennCompartments=["A","B","AB","C","AC","BC","ABC","D","AD","BD","CD","ABD","ACD","BCD","ABCD"],t="Unless there are exactly 15 vennCompartments the Venn data should be mapped to 'A', 'B', 'AB', 'C', 'AC', 'BC', 'ABC', 'D', 'AD', 'BD', 'CD', 'ABD', 'ACD', 'BCD', 'ABCD'"):3==this.vennGroups&&7!=this.vennCompartments.length?(this.vennCompartments=["A","B","AB","C","AC","BC","ABC"],t="Unless there are exactly 7 vennCompartments the Venn data should be mapped to 'A', 'B', 'AB', 'C', 'AC', 'BC', 'ABC'"):2==this.vennGroups&&3!=this.vennCompartments.length?(this.vennCompartments=["A","B","AB"],t="Unless there are exactly 3 vennCompartments the Venn data should be mapped to 'A', 'B', 'AB'"):1==this.vennGroups&&1!=this.vennCompartments.length&&(this.vennCompartments=["A"],t="Unless there are exactly 1 vennCompartments the Venn data should be mapped to 'A'  ");for(var e=0;e<this.vennCompartments.length;e++)if(!this.data.venn.data.hasOwnProperty(this.vennCompartments[e])){alert("Data for Venn diagram do not conform to specifications. "+t);break}},this.drawVennPlot=function(){this.validateVennCompartments(),this.setLegends(),this.setVennXYDimensions(),this.showShadow=!1,this.drawVennLayoutBubbles(),this.showShadow=this.tmpshowShadow,this.drawVennDataPoints(),this.drawLegend(),this.drawTitle()},this.initializeVennPlot=function(){this.transparency=null,this.tmpshowShadow=this.showShadow,this.background="rgb(255,255,255)",this.foreground="rgb(0,0,0)",this.drawVennPlot()},this.initializeVennPlot()},CanvasXpress.prototype.Correlation=function(){this.setCorrelationVarSmpLabelFont=function(t){this.setPropertyFontSize(.5*Math.min(this.width,this.height),"varLabelFont"),this.setPropertyFontSize(.5*Math.min(this.width,this.height),"smpLabelFont")},this.getCorrelationLabelsHeight=function(){var t=0;return"samples"==this.correlationAxis?this.meta.data.y.maxSmpChr>this.maxSmpStringLen?t+=this.measureText(this.meta.data.y.maxSmpStr.substring(0,this.maxSmpStringLen),this.smpLabelFont):t+=this.measureText(this.meta.data.y.maxSmpStr,this.smpLabelFont):this.meta.data.y.maxVarChr>this.maxVarStringLen?t+=this.measureText(this.meta.data.y.maxVarStr.substring(0,this.maxVarStringLen),this.varLabelFont):t+=this.measureText(this.meta.data.y.maxVarStr,this.varLabelFont),this.correlationAnchorLegend&&(t+=this.correlationAnchorLegendAlignWidth+this.margin),t},this.setCorrelationXYDimensions=function(){this.corMarginLeft=0,this.corMarginTop=0,this.yAxisShow&&(this.setAxisFont(this.yAxisTitle,Math.min(this.width,this.height)),this.left=this.margin+this.getFontPt(this.axisTitleFont)+this.margin),this.width<=this.height?this.x=this.width-(this.marginLeft+this.left+this.right+this.marginRight):this.x=this.height-(this.marginTop+this.top+this.bottom+this.marginBottom);var t="variables"==this.correlationAxis?this.varIndices.length:this.isGroupedData?this.grpIndices.length:this.smpIndices.length;"circle"!=this.correlationType&&(this.correlationType="diamond"),this.diamondSize=this.x/t,this.diamondScale=1,"circle"==this.correlationType&&(this.diamondScale=.6),this.setCorrelationVarSmpLabelFont(t),this.setLegends(),this.y=this.x/2+this.diamondSize/2,this.xAxisShow&&(this.top+=this.margin+this.getCorrelationLabelsHeight()+this.margin),this.autoAdjust?(this.height=this.marginTop+this.top+this.y+this.bottom+this.marginBottom,this.width=this.marginLeft+this.left+this.x+this.right+this.marginRight):(this.corMarginTop=(this.height-(this.marginTop+this.top+this.y+this.bottom+this.marginBottom))/2,this.corMarginLeft=(this.width-(this.marginLeft+this.left+this.x+this.right+this.marginRight))/2),this.resizeCanvas()},this.drawCorrelationLayout=function(){if(this.yAxisShow&&this.toRender({p:["drawText",this.yAxisTitle,this.corMarginLeft+this.marginLeft+this.left/2,this.marginTop+this.top+this.y/2,this.axisTitleFont,this.axisTitleColor,"center","middle",-Math.PI/2],t:"Labels"}),this.xAxisShow){var t,e,i,s=this.corMarginLeft+this.marginLeft+this.left+this.diamondSize/2,a=this.corMarginTop+this.marginTop+this.top-this.margin,r=this.corMarginTop+this.marginTop+this.top-(this.getCorrelationLabelsHeight()+this.margin),n=r+this.correlationAnchorLegendAlignWidth,o=this.isGroupedData?this.data.w:this.data.y,h=(this.diamondSize,this.diamondScale,"variables"==this.correlationAxis?this.varIndices:this.isGroupedData?this.grpIndices:this.smpIndices),l="samples"==this.correlationAxis?this.maxSmpStringLen:this.maxVarStringLen;this.correlationAnchorLegend&&(i="samples"==this.correlationAxis?o.data[0]:this.getDataForSmpAtPosition(0),(this.smpIndicesStart<0&&"samples"==this.correlationAxis||this.varIndicesStart<0&&"variables"==this.correlationAxis)&&h.sort((function(t,e){return i[t]-i[e]})),this.setAxisUnits("xAxis")),"samples"==this.correlationAxis?(t=o.smps,e=this.smpLabelFont):(t=o.vars,e=this.varLabelFont);for(var c=0;c<h.length;c++){var d=h[c],p=this.shortenText(t[d],l),g="samples"==this.correlationAxis?this.getSmpColor(t[d]):this.getVarColor(t[d]),u=c/this.correlationLabelInterval;if(parseInt(u)==parseFloat(u)&&this.toRender({p:["drawText",p,s,a,e,g,"left","middle",-Math.PI/2],t:"Labels"}),this.correlationAnchorLegend){var m;m=this.smpIndicesStart<0&&"samples"==this.correlationAxis||this.varIndicesStart<0&&"variables"==this.correlationAxis?i[d]:i[c];var f=this.corMarginLeft+this.marginLeft+this.left+(m-this.xAxisMin)*this.xAxisUnit;this.toRender({p:["drawLine","line",f,r-this.margin,f,r,g],t:"Labels"}),this.toRender({p:["drawLine","line",f,r,s,n,g],t:"Labels"})}s+=this.diamondSize}}s=this.corMarginLeft+this.marginLeft+this.left,a=this.marginTop+this.top+this.y-2*this.heatmapIndicatorHeight,this.correlationAnchorLegend&&this.setRangeData("cor"),null!=this.minData&&null!=this.maxData||this.setRangeData("cor"),this.showLegend&&this.drawColorIndicator(s,a,this.getDefaultMetaDataObject(),"Correlation",!0)},this.drawCorrelationDataPoints=function(){for(var t,e,i=this.diamondSize/2,s=this.isGroupedData?this.data.w.cor:this.data.y.cor,a=this.diamondSize*this.diamondScale,r="variables"==this.correlationAxis?this.varIndices:this.isGroupedData?this.grpIndices:this.smpIndices,n=this.corMarginLeft+this.marginLeft+this.left+i,o=this.corMarginTop+this.marginTop+this.top+i,h=[this.corMarginLeft+this.marginLeft+this.left+this.x/2,this.corMarginTop+this.marginTop+this.top+this.y],l=0;l<Math.ceil(r.length/2);l++){var c=r[l];t=n+this.diamondSize*l,e=o;for(var d=l;d<r.length-l;d++){var p=r[d],g=s[c][p],u=this.getFillColor(this.getColorForValue(!1,g)),m="circle"==this.correlationType?Math.round(Math.abs(g)*a*10)/10:a;isNaN(g)?this.toRender({p:["drawShape",this.correlationType,t,e,a,a,this.getFillColor(this.missingDataColor),this.getFillColor(this.missingDataColor),"closed"],i:[c,p],b:h,t:"Data"}):this.toRender({p:["drawShape",this.correlationType,t,e,m,m,u,u,"closed"],i:[c,p],b:h,t:"Data"}),t+=i,e+=i}e-=this.diamondSize;for(var f=d-2;f>=l;f--){var y=r[r.length-f-1];g=s[y][p],u=this.getFillColor(this.getColorForValue(!1,g)),m="circle"==this.correlationType?Math.round(Math.abs(g)*a*10)/10:a;isNaN(g)?this.toRender({p:["drawShape",this.correlationType,t,e,a,a,this.getFillColor(this.missingDataColor),this.getFillColor(this.missingDataColor),"closed"],i:[y,p],b:h,t:"Data"}):this.toRender({p:["drawShape",this.correlationType,t,e,m,m,u,u,"closed"],i:[y,p],b:h,t:"Data"}),t+=i,e-=i}}if(!(a<8)){this.toRender({p:["drawLine","line",this.corMarginLeft+this.marginLeft+this.left,this.corMarginTop+this.marginTop+this.top+i,this.corMarginLeft+this.marginLeft+this.left+this.x/2,this.corMarginTop+this.marginTop+this.top+this.y,this.foreground,!1,"butt"],s:!0,t:"Data"}),this.toRender({p:["drawLine","line",this.corMarginLeft+this.marginLeft+this.left+this.x,this.corMarginTop+this.marginTop+this.top+i,this.corMarginLeft+this.marginLeft+this.left+this.x/2,this.corMarginTop+this.marginTop+this.top+this.y,this.foreground,!1,"butt"],s:!0,t:"Data"}),n=this.corMarginLeft+this.marginLeft+this.left+i,o=this.corMarginTop+this.marginTop+this.top,t=n+this.x/2,e=this.corMarginTop+this.marginTop+this.top+this.y-i;for(l=0;l<r.length;l++)this.toRender({p:["drawLine","line",n,o,t,e,this.foreground,!1,"butt"],s:!0,t:"Data"}),n+=this.diamondSize,t+=i,e-=i;n=this.corMarginLeft+this.marginLeft+this.left+this.x-i,o=this.corMarginTop+this.marginTop+this.top,t=this.corMarginLeft+this.marginLeft+this.left+this.x/2-i,e=this.corMarginTop+this.marginTop+this.top+this.y-i;for(l=0;l<r.length;l++)this.toRender({p:["drawLine","line",n,o,t,e,this.foreground,!1,"butt"],s:!0,t:"Data"}),n-=this.diamondSize,t-=i,e-=i}},this.drawCorrelationPlot=function(){this.setCorrelationXYDimensions(),this.drawCorrelationLayout(),this.drawTitle(),this.drawCorrelationDataPoints()},this.initializeCorrelationPlot=function(){this.drawCorrelationPlot()},this.initializeCorrelationPlot()},CanvasXpress.prototype.Scatter2D=function(t){this.isScatterPlotMatrixAdjust=function(){return!this.layoutAdjust||this.scatterPlotMatrixType.match(/correlation|all/)},this.get2DYAxisWidth=function(t){if(this.scatterPlotMatrix&&this.isScatterPlotMatrixAdjust())return(t?this.yAxis2Show:this.yAxisShow)?this.margin+this.measureText(this.yAxisMaxStrLength,this.axisTickFont)+this.axisTickMargin+this.yAxisTickGuideLength:this.margin;var e;this.layoutValid&&this.layoutAdjust&&this.yAxisLayoutMaxTickStrLength?e=this.yAxisLayoutMaxTickStrLength+this.axisTickMargin+this.yAxisTickGuideLength:this.ridgeBy&&this.isCreateHistogram?(e=this.getMaxText(this.data.y.smps),e=this.measureText(e,this.axisTickFont)+this.axisTickMargin+this.yAxisTickGuideLength):this.yAxisTransform&&this.yAxisTransformTicks?(e=this.getMaxText(this.yAxisTransformTicksValues),e=this.measureText(e,this.axisTickFont)+this.axisTickMargin+this.yAxisTickGuideLength):(e="y"==this.isGraphTime?this.dateFormat(new Date(this.yAxisMax),this.timeFormat):this.yAxisMaxStrLength,e=this.measureText(this.formatAxisValue(parseFloat(e),"yAxis"),this.axisTickFont)+this.axisTickMargin+this.yAxisTickGuideLength);var i=0;t?this.yAxis2Title&&(i=this.getFontPt(this.axisTitleFont)+this.axisTitleMargin):this.yAxisTitle&&(i=this.getFontPt(this.axisTitleFont)+this.axisTitleMargin);var s=this.isDOE?this.margin:0;return(t?this.yAxis2Show:this.yAxisShow)||this.layoutValid?this.margin+i+e+s:this.margin+s},this.get2DXAxisHeight=function(t){if(this.scatterPlotMatrix&&this.isScatterPlotMatrixAdjust())return(t?this.xAxis2Show:this.xAxisShow)?this.margin+this.getFontPt(this.axisTickFont)+this.axisTickMargin+this.xAxisTickGuideLength:this.margin;var e=this.getFontPt(this.axisTickFont)+this.axisTickMargin+this.xAxisTickGuideLength,i=0;return t?this.xAxis2Title&&(i=this.getFontPt(this.axisTitleFont)+this.axisTitleMargin):this.xAxisTitle&&(i=this.getFontPt(this.axisTitleFont)+this.axisTitleMargin),(t?this.xAxis2Show:this.xAxisShow)?this.margin+i+e:this.margin},this.set2DFont=function(){var t=this.yAxisTitle||"",e=this.yAxis2Title||"",i=this.xAxisTitle||"",s=t.length>e.length?t:e,a=i.length>s.length?i:s,r=Math.min(this.layoutComb&&this.isDOE?this.layoutWidth:this.width,this.layoutComb&&this.isDOE?this.layoutHeight:this.height)*(1-this.percentAspectRatioPlotArea)*(this.scatterPlotMatrix?.5:1);this.setAxisFont(a,r),this.setPropertyFontSize(this.layoutComb&&this.isDOE?this.layoutWidth:this.width,"motionCurrentFont",80)},this.reRangeData=function(){this.isValidQQ()?this.setAxes("qq"):this.isValidCDF()?this.setAxes("cdf"):this.isValidKaplanMeier()&&this.setAxes("km")},this.set2DXYDimensions=function(){var t=this.isValidKaplanMeier()||this.isValidQQ()||this.isValidCDF(),e=this.xAxisTicksMajorShow||this.xAxisTicksMinorShow||this.xAxisShow,i=this.yAxisTicksMajorShow||this.yAxisTicksMinorShow||this.yAxisShow;this.setLegends(),t&&this.reRangeData();var s=this.measureText(this.getMaxText(this.yAxisValues),this.axisTickFont)/2;this.right=this.isDOE||"Fish"==this.graphType?5*this.margin:this.layoutComb||"visium"==this.scatterType&&!e?0:this.yAxis2Show?this.get2DYAxisWidth(!0):Math.max(s,this.margin),this.layoutComb||(this.legendInside||(this.showLegend&&this.legendPosition.match(/right/i)&&this.legend.width>0&&(this.right+=this.legend.width+this.margin),this.showDecorations&&this.showDecorationsLegend&&"right"==this.decorationsPosition&&this.legend.decoration.width>0&&(this.right+=this.legend.decoration.width+this.margin)),!this.yAxisHistogramShow||this.layoutComb||this.isCreateHistogram||"Fish"==this.graphType||t||(this.right+=this.yAxisHistogramHeight+2*this.margin),"ScatterBubble2D"==this.graphType&&this.zAxisShow?this.right+=this.getFontPt(this.axisTitleFont)+this.margin:this.right+=this.margin,"visium"==this.scatterType&&(this.right+=3*this.margin));s=this.measureText(this.getMaxText(this.yAxisValues),this.axisTickFont)/2;this.left="Fish"==this.graphType?5*this.margin:this.isDOE?this.get2DYAxisWidth()+1*this.margin:"visium"!=this.scatterType||e?this.layoutComb&&this.isScatterPlotMatrixAdjust()?this.margin:Math.max(s,this.get2DYAxisWidth()):0,(this.segregateVariablesBy.length||this.segregateSamplesBy.length||this.scatterPlotMatrix)&&this.layoutCollapse&&"Fish"!=this.graphType&&(this.left-=this.margin),this.legendInside||this.showLegend&&this.legendPosition.match(/left/i)&&this.legend.width>0&&!t&&(this.left+=this.legend.width+this.margin),this.top=this.isDOE||"Fish"==this.graphType?5*this.margin:this.layoutValid&&this.layoutCollapse?0:this.layoutValid?this.margin:this.marginTop+this.get2DXAxisHeight(!0),this.legendInside||this.layoutComb||t||this.showLegend&&"top"==this.legendPosition&&this.legend.height>0&&(this.top+=this.legend.height+this.margin),this.layoutComb?this.scatterPlotMatrix&&this.scatterPlotMatrixType.match(/first/)?this.top+=this.layoutLabelBoxThickness:this.layoutValid&&"wrap"==this.layoutType&&(this.segregateVariablesBy.length||this.segregateSamplesBy.length)&&(this.top+=this.layoutLabelBoxThickness*(this.segregateVariablesBy.length+this.segregateSamplesBy.length)-this.margin):(this.top+=this.getTitleSubtitleHeight(),!this.xAxisHistogramShow||this.layoutComb||this.isCreateHistogram||"Fish"==this.graphType||t?"Fish"==this.graphType&&(this.top+=this.get2DXAxisHeight()):this.top+=this.xAxisHistogramHeight+2*this.margin),this.bottom="Fish"==this.graphType?5*this.margin:this.isDOE?this.get2DXAxisHeight()+3*this.margin:"visium"!=this.scatterType||i?this.layoutComb&&this.isScatterPlotMatrixAdjust()?this.margin:this.get2DXAxisHeight():0,this.legendInside||this.layoutComb||this.isValidQQ()||this.isValidCDF()||(this.showLegend&&"bottom"==this.legendPosition&&this.legend.height>0&&(this.bottom+=this.legend.height+this.margin),this.showDecorations&&this.showDecorationsLegend&&"bottom"==this.decorationsPosition&&this.legend.decoration.height>0&&(this.bottom+=this.legend.decoration.height+this.margin)),this.layoutValid&&"Fish"!=this.graphType&&(this.segregateVariablesBy.length||this.segregateSamplesBy.length)&&!this.layoutCollapse&&"wrap"==this.layoutType&&(this.bottom+=this.margin),this.citation&&!this.layoutValid&&(this.bottom+=this.getCitationHeight());var a=this.width,r=this.motionBy&&"Fish"!=this.graphType?this.height-40:this.height;this.x=this.layoutComb?this.layoutWidth-(this.left+this.right):a-(this.marginLeft+this.left+this.right+this.marginRight),this.y=this.layoutComb?this.layoutHeight-(this.top+this.bottom):r-(this.marginTop+this.top+this.bottom+this.marginBottom);var n=!1;if(this.fixedAspectRatio||"visium"==this.scatterType&&this.visiumFixedAspectRatio){var o="visium"==this.scatterType&&CanvasXpress.cacheImages[this.backgroundImageMD5||this.getFileName(this.backgroundImage)],h="visium"==this.scatterType?o.height/o.width:Math.abs(this.fixedAspectRatio);if(n=(this.y-this.x*h)/2<=0,"visium"==this.scatterType)if(this.x>this.y){var l=(this.x-this.y/h)/2;this.left+=3*l,this.right+=3*l,this.x-=6*l}else if(n){l=(this.x-this.y/h)/2;this.top+=3*l,this.bottom+=3*l,this.y-=6*l}else{l=(this.y-this.x*h)/2;this.top+=3*l,this.bottom+=3*l,this.y-=6*l}else if(this.fixedAspectRatio)if(this.x>this.y){l=(this.x-this.y/h)/2;this.left+=l,this.right+=l,this.x-=2*l}else{l=(this.y-this.x*h)/2;this.top+=l,this.bottom+=l,this.y-=2*l}}this.layoutComb&&!this.isDOE||this.reRangeData(),this.motionBy&&!this.reproducing&&this.addMotionDiv(),"visium"==this.scatterType?(this.setAxes(),this.setAxisUnitsVisium(),this.checkVisium()):(this.setAxisUnits("xAxis"),this.setAxisUnits("yAxis"))},this.setAxisUnitsVisium=function(t){var e=CanvasXpress.cacheImages[this.backgroundImageMD5||this.getFileName(this.backgroundImage)],i=(this.target.split(/_/).pop(),this.setMinY,this.setMaxY,e.height/e.width),s=this.setMinX||0,a=(this.setMaxX||e.width)-s,r=this.setMinY||0,n=(this.setMaxY||e.height)-r;if(a*this.height/i*i>n*this.width*i||t){this.setAxisUnits("xAxis"),this.yAxisUnit=this.xAxisUnit*i;var o=n*this.yAxisUnit,h=this.y-o;this.y-=h,this.top+=h/2,this.bottom+=h/2}else{this.setAxisUnits("yAxis"),this.xAxisUnit=this.yAxisUnit/i;var l=a*this.xAxisUnit;h=this.x-l;this.x-=h,this.left+=h/2,this.right+=h/2}this.isVisiumFlipped&&(this.isVisiumFlipped=!1,this.flipVisiumRanges(e))},this.set2DLayout=function(){var t=this.xAxisTicksMajorShow||this.xAxisTicksMinorShow||this.xAxisShow||this.scatterPlotMatrix,e=this.yAxisTicksMajorShow||this.yAxisTicksMinorShow||this.yAxisShow||this.scatterPlotMatrix,i="visium"==this.scatterType,s=this.marginLeft+this.offsetX+this.left,a=s+this.x,r=this.marginTop+this.offsetY+this.top,n=r+this.y;if((t||e)&&!i){var o=this.xAxisTicksMajorShow,h=this.xAxisShow,l=this.xAxis2Show,c=this.xAxisTicksMajorShow,d=this.xAxisShow,p=this.xAxis2Show;"Fish"!=this.graphType&&e&&this.set2DLayoutY(s,a),t&&this.set2DLayoutX(r,n),this.xAxisTicksMajorShow=o,this.xAxisShow=h,this.xAxis2Show=l,this.xAxisTicksMajorShow=c,this.xAxisShow=d,this.xAxis2Show=p}},this.set2DLayoutY=function(t,e,i){this.toRender({p:["disableGradientTransparencyShadow"],t:"Axes2"});var s="visium"==this.scatterType&&!this.visiumFlip&&CanvasXpress.cacheImages[this.backgroundImageMD5||this.getFileName(this.backgroundImage)],a=!!this.meta.data.y.range[this.yAxis[0]]&&this.meta.data.y.range[this.yAxis[0]].time,r="dotted"==this.yAxisTickLineType?"dottedLine":"dashed"==this.yAxisTickLineType?"dashedLine":"line",n=this.marginTop+this.offsetY+this.top+this.y/2,o=this.getFontPt(this.axisTitleFont)/2,h=t-this.get2DYAxisWidth()+o+this.margin,l=e+this.get2DYAxisWidth(!0)-(o+this.margin);if(this.yAxisTitle&&this.yAxisShow&&!this.scatterPlotMatrix&&this.toRender({p:["drawText",this.yAxisTitle,h,n,this.axisTitleFont,this.axisTitleColor,"center","middle",-Math.PI/2],t:"Axes"}),this.yAxis2Title&&this.yAxis2Show&&!this.scatterPlotMatrix&&this.toRender({p:["drawText",this.yAxis2Title,l,n,this.axisTitleFont,this.axisTitleColor,"center","middle",Math.PI/2],t:"Axes"}),this.ridgeBy&&this.isCreateHistogram)for(var c=this.marginTop+this.offsetY+this.top+this.y+this.yAxisMin*this.yAxisUnit,d=this.ridgelineScale-1,p=Math.max(this.data.y.maxLevel,this.ridgelineScale),g=this.y/(this.ridgelineScale>1?p+d:p+.1),u=0;u<this.data.y.maxLevel;u++){var m=c-g*u,f=this.isCreateHistogram.maxLevel==this.isCreateHistogram.level.length?this.data.y.smps[u]:this.meta.data.z[this.ridgeBy].levels[u-1];if((this.yAxisShow||this.yAxis2Show)&&this.toRender({p:["drawLine",r,t,m,e,m,this.yAxisTickColor,this.yAxisTickSize,"butt"],i:["Ym"+this.layoutCurrent+u],t:"Axes2"}),this.yAxisShow){this.yAxisTickGuideShow&&this.toRender({p:["drawLine",this.yAxisTickGuideLineType,t-this.yAxisTickGuideLength,m,t,m,this.yAxisTickGuideColor,this.yAxisTickGuideSize,"butt"],i:["YMt"+this.layoutCurrent+u],t:"Axes2"});h=t-(this.yAxisTickGuideLength+this.axisTickMargin);this.toRender({p:["drawText",f,h,m,this.axisTickFont,this.axisTickColor,"right","middle"],t:"Axes"})}if(this.yAxis2Show){this.yAxisTickGuideShow&&this.toRender({p:["drawLine",this.yAxisTickGuideLineType,e,m,e+this.yAxisTickGuideLength,m,this.yAxisTickGuideColor,this.yAxisTickGuideSize,"butt"],i:["YMt"+this.layoutCurrent+u],t:"Axes2"});l=e+(this.yAxisTickGuideLength+this.axisTickMargin);this.toRender({p:["drawText",f,l,m,this.axisTickFont,this.axisTickColor,"left","middle"],t:"Axes"})}}else{if(this.yAxisTicksMinorShow)for(u=0;u<this.yAxisMinorValues.length;u++){if((y=this.yAxisMinorValues[u])>=this.yAxisMin&&y<=this.yAxisMax){m=this.marginTop+this.offsetY+this.top+this.y-(y-this.yAxisMin)*this.yAxisUnit;this.toRender({p:["drawLine",r,t,m,e,m,this.yAxisTickColor,this.yAxisTickSize,"butt"],i:["Ym"+this.layoutCurrent+u],t:"Axes2"})}}for(u=0;u<this.yAxisValuesRaw.length;u++){var y;if((y=this.yAxisValuesRaw[u])>=this.yAxisMin&&y<=this.yAxisMax){m=this.marginTop+this.offsetY+this.top+this.y-(y-this.yAxisMin)*this.yAxisUnit,f=this.yAxisTransform&&this.yAxisTransformTicks?this.yAxisTransformTicksValues[u]:a?this.dateFormat(new Date(y+864e5),this.timeFormat):"y"==this.isGraphTime?this.dateFormat(new Date(this.yAxisMin+y),this.timeFormat):this.formatAxisValue("visium"!=this.scatterType||this.visiumFlip?y:s.height-y,"yAxis");if(this.yAxisTicksMajorShow&&this.toRender({p:["drawLine",r,t,m,e,m,this.yAxisTickColor,this.yAxisTickSize,"butt"],i:["YM"+this.layoutCurrent+u],t:"Axes2"}),this.yAxisShow&&(this.yAxisTickGuideShow&&this.toRender({p:["drawLine",this.yAxisTickGuideLineType,t-this.yAxisTickGuideLength,m,t,m,this.yAxisTickGuideColor,this.yAxisTickGuideSize,"butt"],i:["YMt"+this.layoutCurrent+u],t:"Axes2"}),!i)){h=t-(this.yAxisTickGuideLength+this.axisTickMargin);this.toRender({p:["drawText",f,h,m,this.axisTickFont,this.axisTickColor,"right","middle"],t:"Axes"})}if(this.yAxis2Show){this.yAxisTickGuideShow&&this.toRender({p:["drawLine",this.yAxisTickGuideLineType,e,m,e+this.yAxisTickGuideLength,m,this.yAxisTickGuideColor,this.yAxisTickGuideSize,"butt"],i:["YMt"+this.layoutCurrent+u],t:"Axes2"});l=e+(this.yAxisTickGuideLength+this.axisTickMargin);this.toRender({p:["drawText",f,l,m,this.axisTickFont,this.axisTickColor,"left","middle"],t:"Axes"})}}}}if(i||this.scatterPlotMatrix){var x=(m=this.marginTop+this.offsetY+this.top)+this.y;this.xAxisTickLeftShow&&this.toRender({p:["drawLine",this.xAxisTickLeftType,t,m,e,m,this.xAxisTickLeftColor,this.xAxisTickLeftSize,"butt"],t:"Axes2"}),this.xAxisTickRightShow&&this.toRender({p:["drawLine",this.xAxisTickRightLineType,t,x,e,x,this.xAxisTickRightColor,this.xAxisTickRightSize,"butt"],t:"Axes2"}),this.yAxisTickTopShow&&this.toRender({p:["drawLine",this.yAxisTickTopLineType,e,m,e,x,this.yAxisTickTopColor,this.yAxisTickTopSize,"butt"],t:"Axes2"}),this.yAxisTickBottomShow&&this.toRender({p:["drawLine",this.yAxisTickBottomLineType,t,m,t,x,this.yAxisTickBottomColor,this.yAxisTickBottomSize,"butt"],t:"Axes2"})}else{if(this.yAxisTickTopShow){m=this.marginTop+this.offsetY+this.top;this.toRender({p:["drawLine",this.yAxisTickTopLineType,t,m,e,m,this.yAxisTickTopColor,this.yAxisTickTopSize,"butt"],i:["YT"+this.layoutCurrent],t:"Axes2"})}if(this.yAxisTickBottomShow){m=this.marginTop+this.offsetY+this.top+this.y;this.toRender({p:["drawLine",this.yAxisTickBottomLineType,t,m,e,m,this.yAxisTickBottomColor,this.yAxisTickBottomSize,"butt"],i:["YB"+this.layoutCurrent],t:"Axes2"})}}this.toRender({p:["enableGradientTransparencyShadow"],t:"Axes2"})},this.set2DLayoutX=function(t,e,i){this.toRender({p:["disableGradientTransparencyShadow"],t:"Axes"});var s=!!this.meta.data.y.range[this.xAxis[0]]&&this.meta.data.y.range[this.xAxis[0]].time,a="dotted"==this.xAxisTickLineType?"dottedLine":"dashed"==this.xAxisTickLineType?"dashedLine":"line",r=this.getFontPt(this.axisTitleFont)/2,n=this.marginLeft+this.offsetX+this.left+this.x/2,o=e+this.get2DXAxisHeight()-(r+this.margin),h=t-this.get2DXAxisHeight(!0)+r+this.margin;if(this.xAxisTitle&&this.xAxisShow&&!this.scatterPlotMatrix&&this.toRender({p:["drawText",this.xAxisTitle,n,o,this.axisTitleFont,this.axisTitleColor,"center","middle"],t:"Axes"}),this.xAxis2Title&&this.xAxis2Show&&!this.scatterPlotMatrix&&this.toRender({p:["drawText",this.xAxis2Title,n,h,this.axisTitleFont,this.axisTitleColor,"center","middle"],t:"Axes"}),"Fish"==this.graphType){for(var l=this.fishAxis.length?this.fishAxis:this.fishTimepoints,c=0;c<l.length;c++)if(l[c]>=this.fishTimepoints[0]&&l[c]<=this.fishTimepoints[this.fishTimepoints.length-1]){n=this.marginLeft+this.offsetX+this.left+(l[c]-this.xAxisMin)*this.xAxisUnit;this.toRender({p:["drawLine",a,n,t,n,e,this.xAxisTickColor,this.xAxisTickSize,"butt"],i:["Xm"+this.layoutCurrent+c],t:"Axes"}),this.xAxisTickGuideShow&&this.toRender({p:["drawLine",this.xAxisTickGuideLineType,n,t-this.xAxisTickGuideLength,n,t,this.xAxisTickGuideColor,this.xAxisTickGuideSize,"butt"],i:["X"+this.layoutCurrent+c],t:"Axes"});h=t-(this.yAxisTickGuideLength+this.axisTickMargin+r);var d=this.fishAxisLabels.length&&null!=this.fishAxisLabels[c]?this.fishAxisLabels[c]:l[c];this.toRender({p:["drawText",d,n,h,this.axisTickFont,this.axisTickColor,"center","middle"],t:"Axes"})}}else if("manhattan"==this.scatterType){var p=0;for(c=0;c<this.chromosomeLengths.length;c++){var g=this.chromosomeLengths[c]/2,u=(n=this.marginLeft+this.offsetX+this.left+(g+p-this.xAxisMin)*this.xAxisUnit,(x=this.chromosomeLengths[c]*this.xAxisUnit)+this.x),m=(d=c+1,this.measureText(d,this.axisTickFont));if(this.xAxisTicksMajorShow&&this.toRender({p:["drawLine",a,n,t,n,e,this.xAxisTickColor,this.xAxisTickSize,"butt"],i:["XM"+this.layoutCurrent+c],t:"Axes"}),this.colorBy&&c%2&&this.toRender({p:["drawShape","rectangle",n,e-this.y/2,x,this.y,this.manhattanContrastColor,this.manhattanContrastColor],t:"Axes"}),n-x>m&&n<u){if(this.xAxisShow){this.xAxisTickGuideShow&&this.toRender({p:["drawLine",this.xAxisTickGuideLineType,n,e+this.xAxisTickGuideLength,n,e,this.xAxisTickGuideColor,this.xAxisTickGuideSize,"butt"],i:["X"+this.layoutCurrent+c],t:"Axes"});o=e+(this.yAxisTickGuideLength+this.axisTickMargin+r);this.toRender({p:["drawText",d,n,o,this.axisTickFont,this.axisTickColor,"center","middle"],t:"Axes"})}if(this.xAxis2Show){this.xAxisTickGuideShow&&this.toRender({p:["drawLine",this.xAxisTickGuideLineType,n,t-this.xAxisTickGuideLength,n,t,this.xAxisTickGuideColor,this.xAxisTickGuideSize,"butt"],i:["X"+this.layoutCurrent+c],t:"Axes"});h=t-(this.yAxisTickGuideLength+this.axisTickMargin+r);this.toRender({p:["drawText",d,n,h,this.axisTickFont,this.axisTickColor,"center","middle"],t:"Axes"})}}p+=this.chromosomeLengths[c]}}else{if(this.xAxisTicksMinorShow)for(c=0;c<this.xAxisMinorValues.length;c++){if((g=this.xAxisMinorValues[c])>=this.xAxisMin&&g<=this.xAxisMax){n=this.marginLeft+this.offsetX+this.left+(g-this.xAxisMin)*this.xAxisUnit;this.toRender({p:["drawLine",a,n,t,n,e,this.xAxisTickColor,this.xAxisTickSize,"butt"],i:["Xm"+this.layoutCurrent+c],t:"Axes"})}}var f=0,y=0;for(c=0;c<this.xAxisValuesRaw.length;c++){if((g=this.xAxisValuesRaw[c])>=this.xAxisMin&&g<=this.xAxisMax){n=this.marginLeft+this.offsetX+this.left+(g-this.xAxisMin)*this.xAxisUnit,d=this.isCreateHistogram?this.formatAxisValue(g+this.isCreateHistogram.min,"xAxis"):this.xAxisTransform&&this.xAxisTransformTicks?this.xAxisTransformTicksValues[c]:s?this.dateFormat(new Date(g+864e5),this.timeFormat):"x"==this.isGraphTime?this.dateFormat(new Date(this.xAxisMin+g),this.timeFormat):this.formatAxisValue(g,"xAxis"),m=this.measureText(d,this.axisTickFont);if(this.xAxisTicksMajorShow&&"boxplot"!=this.scatterType&&this.toRender({p:["drawLine",a,n,t,n,e,this.xAxisTickColor,this.xAxisTickSize,"butt"],i:["XM"+this.layoutCurrent+c],t:"Axes"}),this.xAxisShow&&(this.xAxisTickGuideShow&&"boxplot"!=this.scatterType&&this.toRender({p:["drawLine",this.xAxisTickGuideLineType,n,e,n,e+this.xAxisTickGuideLength,this.xAxisTickGuideColor,this.xAxisTickGuideSize,"butt"],i:["XMt"+this.layoutCurrent+c],t:"Axes"}),"boxplot"!=this.scatterType&&!i&&n-m/1.5>f)){o=e+(this.yAxisTickGuideLength+this.axisTickMargin+r);this.toRender({p:["drawText",d,n,o,this.axisTickFont,this.axisTickColor,"center","middle"],t:"Axes"}),f=n+m/1.5}if(this.xAxis2Show&&(this.xAxis2TickGuideShow&&"boxplot"!=this.scatterType&&this.toRender({p:["drawLine",this.xAxisTickGuideLineType,n,t,n,t-this.xAxisTickGuideLength,this.xAxisTickGuideColor,this.xAxisTickGuideSize,"butt"],i:["XMt"+this.layoutCurrent+c],t:"Axes"}),"boxplot"!=this.scatterType&&n-m/1.5>y)){h=t-(this.yAxisTickGuideLength+this.axisTickMargin+r);this.toRender({p:["drawText",d,n,h,this.axisTickFont,this.axisTickColor,"center","middle"],t:"Axes"}),y=n+m/1.5}}}}if(i||this.scatterPlotMatrix){var x=(n=this.marginLeft+this.offsetX+this.left)+this.x;this.xAxisTickLeftShow&&this.toRender({p:["drawLine",this.xAxisTickLeftLineType,n,t,n,e,this.xAxisTickLeftColor,this.xAxisTickLeftSize,"butt"],t:"Axes"}),this.xAxisTickRightShow&&this.toRender({p:["drawLine",this.xAxisTickRightLineType,x,t,x,e,this.xAxisTickRightColor,this.xAxisTickRightSize,"butt"],t:"Axes"}),this.yAxisTickTopShow&&this.toRender({p:["drawLine",this.yAxisTickTopLineType,n,t,x,t,this.yAxisTickTopColor,this.yAxisTickTopSize,"butt"],t:"Axes"}),this.yAxisTickBottomShow&&this.toRender({p:["drawLine",this.yAxisTickBottomLineType,n,e,x,e,this.yAxisTickBottomColor,this.yAxisTickBottomSize,"butt"],t:"Axes"})}else{if(this.xAxisTickLeftShow){n=this.marginLeft+this.offsetX+this.left;this.toRender({p:["drawLine",this.xAxisTickLeftLineType,n,t,n,e,this.xAxisTickLeftColor,this.xAxisTickLeftSize,"butt"],i:["XL"+this.layoutCurrent],t:"Axes"})}if(this.xAxisTickRightShow){n=this.marginLeft+this.offsetX+this.left+this.x;this.toRender({p:["drawLine",this.xAxisTickRightLineType,n,t,n,e,this.xAxisTickRightColor,this.xAxisTickRightSize,"butt"],i:["XR"+this.layoutCurrent],t:"Axes"})}}this.plotBox&&this.toRender({p:["drawShape","rectangle",this.marginLeft+this.offsetX+this.left+this.x/2,this.marginTop+this.offsetY+this.top+this.y/2,this.x,this.y,this.plotBoxColor,this.plotBoxColor,"open",!1,this.outlineWidth],t:"Axes"}),this.toRender({p:["enableGradientTransparencyShadow"],t:"Axes"})},this.isIn2DViewport=function(t,e,i){return e>t[0]&&e<t[0]+t[2]&&i>t[1]&&i<t[1]+t[3]},this.get2DVariables=function(t,e,i){var s=!1!==i?t+":"+e+":"+i:t+":"+e,a=this.layoutValid&&this.meta.data.d.l[this.layoutCurrent]?this.meta.data.d.l[this.layoutCurrent]:this.meta.data.d.a[s],r=[];if(a)if(this.showScatterDensity)r=a.vars;else for(var n=0;n<this.varIndices.length;n++){var o=this.varIndices[n];if(a.skip.hasOwnProperty(o.toString())){if(!a.skip.hasOwnProperty(a.skip[o.toString()]))continue;r.push(o)}else r.push(o)}else r=this.varIndices;return r},this.get2DColor=function(t,e,i){var s,a=this,r=.3,n=!1;if(this.isCreateHistogram){var o,h=this.segregateVariablesBy.length||!this.segregateSamplesBy.length;if(this.isCreateHistogram.factor){o=a.isDOE&&!a.layoutCurrent?a.data.y.smps[e+1]:a.segregateVariablesBy.length||a.isCreateHistogram.factor?!a.layoutValid||a.segregateVariablesBy.length&&a.segregateVariablesBy[0]==a.isCreateHistogram.factor||a.scatterPlotMatrix?a.layoutValid&&a.segregateVariablesBy[0]==a.isCreateHistogram.factor&&!a.scatterPlotMatrix?(s=a.data.y.smps[e+1].toString().split(":"))[0]:a.data.y.smps[e+1]:(s=a.data.y.smps[e+1].toString().split(":"))[1]||s[0]:a.data.y.smps[e+1],this.cacheColors[this.colorScheme].hasOwnProperty(o)?n=this.cacheColors[this.colorScheme][o]:t.hasOwnProperty("z")&&(this.segregateVariablesBy.length||this.segregateSamplesBy.length)&&t.z.hasOwnProperty(this.isCreateHistogram.factor)&&t.z[this.isCreateHistogram.factor].order.hasOwnProperty(o)?(n=(t=t.z[this.isCreateHistogram.factor]).colors[t.order[o]],"staggered"==this.histogramType&&(n=this.addColorTransparency(n,r,!0))):t.hasOwnProperty("x")&&t.x.hasOwnProperty(this.isCreateHistogram.factor)&&t.x[this.isCreateHistogram.factor].order.hasOwnProperty(o)?(n=(t=t.x[this.isCreateHistogram.factor]).colors[t.order[o]],"staggered"==this.histogramType&&(n=this.addColorTransparency(n,r,!0))):(t=t.hasOwnProperty("z")&&t.z[this.isCreateHistogram.factor]?t.z[this.isCreateHistogram.factor]:!(!t.hasOwnProperty("x")||!t.x[this.isCreateHistogram.factor])&&t.x[this.isCreateHistogram.factor])&&t.colors&&t.colors[e]&&(!h||this.isCxplot)?(n=t.colors[e],"staggered"==this.histogramType&&(n=this.addColorTransparency(n,r,!0))):n=1==this.varIndices.length||"staggered"!=this.histogramType||this.scatterPlotMatrix?this.colors[e%this.colors.length]:this.addColorTransparency(this.colors[e%this.colors.length],r,!0)}else o=this.data.y.smps[e+1],n=this.cacheColors[this.colorScheme].hasOwnProperty(o)?this.cacheColors[this.colorScheme][o]:1==this.varIndices.length||"staggered"!=this.histogramType||this.scatterPlotMatrix?this.colors[e%this.colors.length]:this.addColorTransparency(this.colors[e%this.colors.length],r,!0);this.cacheColors[this.colorScheme][o]=n,this.isCreateHistogram.colors.push(n)}else if("manhattan"==this.scatterType)n=this.colorBy?this.getPropertyValue(e,null,"colorBy"):this.manhattanColors[this.data.y.data[e][this.manhattanMarkerChromosomeNumberIndex]%this.manhattanColors.length];else if(this.showScatterDensity){var l=t.density.hasOwnProperty(e.toString())?t.density[e.toString()]:1;n=this.getColorForValue(t.colorBrew,l)}else if(this.colorBy)if(this.meta.data.x&&this.meta.data.x.hasOwnProperty(this.colorBy))if(1==this.xAxisIndices.length){var c=this.yAxisIndices[i];n=this.getPropertyValue(null,c,"colorBy")}else if(1==this.yAxisIndices.length){c=this.xAxisIndices[i];n=this.getPropertyValue(null,c,"colorBy")}else n=this.colors[i%this.colors.length];else n=this.getPropertyValue(e,null,"colorBy");else n=this.isContour?this.contourDataPointsColor:this.colors[i%this.colors.length];return n},this.draw2DBoxplotData=function(){if("boxplot"==this.scatterType){var t=[],e=!(!this.data.z||!this.data.z.hasOwnProperty(this.scatterPlotMatrix))&&this.scatterPlotMatrix;if(e){for(var i=this.data.y.smps[1],s=this.getLevelsByAnnotation(e,this.varIndices,"z"),a=0;a<s.length;a++){for(var r=this.getVariablesSamplesByAnnotationLevel(e,s[a],this.varIndices,"z"),n=[],o=0;o<r.length;o++)n.push(this.getDataAtPos(r[o],1));var h=this.boxplot(n);q='<div style="max-width:300px;display:grid;grid-template-columns:1fr 1fr;grid-column-gap:5px;">',q+='<div style="text-align:right;"><b>'+i+'</b> - </div><div  style="text-align:left;"><b>'+s[a]+"</b></div>",q+='<div style="text-align:right;"><b>1st IQR:</b></div><div style="text-align:left;">'+this.formatNumber(h[4])+"</div>",q+='<div style="text-align:right;"><b>1st Qtl:</b></div><div style="text-align:left;">'+this.formatNumber(h[1])+"</div>",q+='<div style="text-align:right;"><b>Median:</b></div><div style="text-align:left;">'+this.formatNumber(h[2])+"</div>",q+='<div style="text-align:right;"><b>3rd Qtl:</b></div><div style="text-align:left;">'+this.formatNumber(h[5])+"</div>",q+='<div style="text-align:right;"><b>3rd IQR:</b></div><div style="text-align:left;">'+this.formatNumber(h[3])+"</div>",q+='<div style="text-align:right;"><b>Outliers:</b></div><div style="text-align:left;">'+h[6].length+"</div>",q+='<div style="text-align:right;"><b>N-Data:</b></div><div style="text-align:left;">'+h[7]+"</div>",q+="</div>",t.push({data:n,boxplot:[h[4],h[5],h[1],h[3],h[2],h[6],h[0],h[8]],tooltip:q})}var l=this.marginLeft+this.offsetX+this.left+.4*this.xAxisUnit,c=this.marginTop+this.offsetY+this.top+this.y;for(a=0;a<t.length;a++){var d=this.colors[a%this.colors.length],p=e?"Property:"+e+":"+s[a]+":z":"Property:"+i+":NA:y";this.drawBoxPlot([t[a].boxplot],l,c,.5*this.xAxisUnit,.5*this.xAxisUnit,this.yAxisUnit,this.yAxisMin,"vertical",[d],[["open"]],[["ScatterBoxplot:::"+t[a].tooltip,p]]),l+=this.xAxisUnit}}else{n=[],i=[];var g=[],u=[],m=this.getDataForSmpGrpAtIndex(this.yAxisIndices[0]),f=this.getDataForSmpGrpAtIndex(this.xAxisIndices[0]),y=this.range(f),x=this.groupingFactors.length?this.groupingFactorWindow||Math.ceil((y[1]-y[0])/5):y[1]-y[0];if(this.groupingFactors.length){var v=this.groupingFactorWindow?-.5*x:y[0],b=0,A=0;for(y[1]++;v<y[1];){n[b]=[];var w=v+x;for(a=0;a<m.length;a++)f[a]>=v&&f[a]<w&&n[b].push(m[a]);A=Math.max(A,n[b].length),i.push(this.data.y.smps[this.xAxisIndices[0]]+" "+this.formatNumber(v)+" - "+this.formatNumber(w)),g.push(v-this.xAxisMin+.5*x),u.push(x),v+=x,b++}if(this.boxplotVarWidth)for(a=0;a<n.length;a++){var C=Math.sqrt(Math.log(n[a].length))/Math.sqrt(Math.log(A));u[a]*=C,g[a]+=(x-u[a])/2}}else i.push(this.data.y.smps[this.yAxisIndices[0]]),n.push(m),g.push(x/2-this.xAxisMin),u.push(x);for(a=0;a<n.length;a++){h=this.boxplot(n[a]);q='<div style="max-width:300px;display:grid;grid-template-columns:1fr 1fr;grid-column-gap:5px;">',q+='<div style="text-align:right;"><b>'+i[a]+"</b></div><div> </div>",q+='<div style="text-align:right;"><b>1st IQR:</b></div><div style="text-align:left;">'+this.formatNumber(h[4])+"</div>",q+='<div style="text-align:right;"><b>1st Qtl:</b></div><div style="text-align:left;">'+this.formatNumber(h[1])+"</div>",q+='<div style="text-align:right;"><b>Median:</b></div><div style="text-align:left;">'+this.formatNumber(h[2])+"</div>",q+='<div style="text-align:right;"><b>3rd Qtl:</b></div><div style="text-align:left;">'+this.formatNumber(h[5])+"</div>",q+='<div style="text-align:right;"><b>3rd IQR:</b></div><div style="text-align:left;">'+this.formatNumber(h[3])+"</div>",q+='<div style="text-align:right;"><b>Outliers:</b></div><div style="text-align:left;">'+h[6].length+"</div>",q+='<div style="text-align:right;"><b>N-Data:</b></div><div style="text-align:left;">'+h[7]+"</div>",q+="</div>",t.push({data:n,boxplot:[h[4],h[5],h[1],h[3],h[2],h[6],h[0],h[8]],tooltip:q})}for(l=this.marginLeft+this.offsetX+this.left-.5*x*this.xAxisUnit,c=this.marginTop+this.offsetY+this.top+this.y,d=this.colors[0],a=0;a<t.length;a++){p=e?"Property:"+e+"::z":"Property:"+i+":NA:y";this.drawBoxPlot([t[a].boxplot],l+this.xAxisUnit*g[a],c,this.xAxisUnit*u[a],this.xAxisUnit*u[a],this.yAxisUnit,this.yAxisMin,"vertical",[d],[["open"]],[["ScatterBoxplot:::"+t[a].tooltip,p]])}}}},this.draw2DDataPoints=function(){var t,e,i,s,a,r,n,o,h,l,c,d,p,g,u,m,f,y,x,v,b,A=[],w=[],C=this.marginLeft+this.offsetX+this.left,T=this.marginTop+this.offsetY+this.top+this.y,S=this.setClipBoundaries();if(this.toRender({p:["setClipArea",S],t:"Data"}),this.isContour&&!this.showContourDataPoints);else if("boxplot"==this.scatterType)this.draw2DBoxplotData();else if("qq"==this.scatterType)this.draw2DQQPlot(C,T);else if("cdf"==this.scatterType)this.draw2DCDFPlot(C,T);else if("km"==this.scatterType&&(!this.isDOE||this.isDOE&&0==this.layoutCurrent))this.draw2DKMPlot(C,T);else if("bin2d"==this.scatterType)this.draw2DBin(C,T,this.xAxisIndices[this.xAxisCurrent],this.yAxisIndices[this.yAxisCurrent]);else if(this.isHistogram)this.set2DDensityData();else{for(var M="XYZ"==this.axesType?1:Math.max(this.xAxisIndices.length,this.yAxisIndices.length),D=!!(this.lineBy&&this.data.z&&this.data.z.hasOwnProperty(this.lineBy))&&{},k=!("line"!=this.scatterType||!this.ribbonBy)&&[[],[]],L=0;L<M;L++){for(var I="Y"==this.axesType||"XYZ"==this.axesType?this.xAxisIndices[this.xAxisCurrent]:this.xAxisIndices[L],z="X"==this.axesType||"XYZ"==this.axesType?this.yAxisIndices[this.yAxisCurrent]:this.yAxisIndices[L],N=("ScatterBubble2D"==this.graphType&&!this.sizeBy&&this.zAxisIndices.length>0||"XYZ"==this.axesType)&&this.zAxisIndices[this.zAxisCurrent],B=this.scatterType&&this.scatterType.match(/line|functio/i)?this.varIndices:this.get2DVariables(I,z,N),P=(this.isHistogram,{}),R=this.meta.data.d.a[!1!==N?I+":"+z+":"+N:I+":"+z],O="ScatterBubble2D"==this.graphType?"Series:"+I+":"+z+":"+N:"Series:"+I+":"+z,X="visium"==this.scatterType&&CanvasXpress.cacheImages[this.backgroundImageMD5||this.getFileName(this.backgroundImage)],F=!!this.jitter&&this.jitterData(this.rep(0,B.length),!1,this.jitterFactor*this.xAxisUnit*.5),_=null,E=0;E<B.length;E++){"percentile"==this.xAxisTransform&&(this.axesType.match(/Y|Z/)&&0==E||"X"==this.axesType)&&(l="XYZ"==this.axesType||"percentile"!=this.xAxisTransform?this.getAxisDataBySample(this.xAxisIndices):this.getAxisDataBySample(I),p=(c=this.range(l))[0],d=c[1]),"percentile"==this.yAxisTransform&&(this.axesType.match(/X|Z/)&&0==E||"Y"==this.axesType)&&(g="XYZ"==this.axesType||"percentile"!=this.yAxisTransform?this.getAxisDataBySample(this.yAxisIndices):this.getAxisDataBySample(z),f=(u=this.range(g))[0],m=u[1]),!1!==N&&0==E&&(y="XYZ"==this.axesType?this.getAxisDataBySample(this.zAxisIndices,"z"):this.getAxisDataBySample(N,"z"),b=(x=this.range(y))[0],v=x[1]);var V=B[E],H=this.getDataAtPos(V,I,!1,this.xAxisTransform,null!=this.xAxisFloorValue?this.xAxisFloorValue:p,null!=this.xAxisCeilValue?this.xAxisCeilValue:d),G=this.getDataAtPos(V,z,!1,this.yAxisTransform,null!=this.yAxisFloorValue?this.yAxisFloorValue:f,null!=this.yAxisCeilValue?this.yAxisCeilValue:m,!1,!(!X||this.visiumFlip)&&X.height),q=!1!==N?this.getDataAtPos(V,N,!1,this.zAxisTransform,null!=this.zAxisFloorValue?this.zAxisFloorValue:b,null!=this.zAxisCeilValue?this.zAxisCeilValue:v):null,j=this.getDataAtPos(V,I,"stdev"),U=this.getDataAtPos(V,z,"stdev"),Y=this.scatterType&&this.scatterType.match(/functio/)?this.functionColor:this.getFillColor(this.get2DColor(R,V,L),[V,I,z]),W=this.getOutlineColor(Y,[V,I,z]),$=this.getPropertyValue(V,null,"shapeBy"),Q="visium"==this.scatterType?this.dataPointSize:this.sizeBy?parseInt(this.getPropertyValue(V,null,"sizeBy")):!1!==N?this.sizes[Math.round(this.percentile(b,v,q)/10)]:"manhattan"==this.scatterType||this.isContour?this.dataPointSize*this.dataPointSizeScaleFactor*.5:this.dataPointSize*this.dataPointSizeScaleFactor,K=.5*Q,J=this.patternBy?this.getPropertyValue(V,null,"patternBy"):this.getPropertyValue(L,null,"patternBy"),Z=!(!this.scatterType||!this.scatterType.match(/image/i))&&this.images[E],tt=Z?"image":$,et=this.ellipseBy&&this.data.z&&this.data.z.hasOwnProperty(this.ellipseBy)?this.data.z[this.ellipseBy][V]:!(!this.ellipseBy||"variable"!=this.ellipseBy)&&"variable",it=!!(this.lineBy&&this.data.z&&this.data.z.hasOwnProperty(this.lineBy))&&this.data.z[this.lineBy][V],st=this.isHidden(V)||this.isHidden(!1,!1,O),at=!!(this.colorBy&&this.meta.data.x&&this.meta.data.x.hasOwnProperty(this.colorBy))&&(this.isHidden(!1,!1,"Property:"+this.colorBy+":"+this.data.x[this.colorBy][I]+":x")||this.isHidden(!1,!1,"Property:"+this.colorBy+":"+this.data.x[this.colorBy][z]+":x")),rt="manhattan"==this.scatterType?[V,this.manhattanMarkerChromosomeNumberIndex,this.manhattanMarkerPositionIndex,this.manhattanMarkerLogPValueIndex]:[V,I,z,N],nt=this.addColorTransparency(Y,0);if((this.varIndices.length>this.scatterOutlineThreshold||Q<4)&&(W=Y),t=C+(H-this.xAxisMin)*this.xAxisUnit+(this.jitter?F[E]:0),e=T-(G-this.yAxisMin)*this.yAxisUnit,a=C+(0-this.xAxisMin)*this.xAxisUnit,r=T-(0-this.yAxisMin)*this.yAxisUnit,this.ellipseBy&&et&&(P.hasOwnProperty(et)||(P[et]=[[],[]]),P[et][0].push(H),P[et][1].push(G)),this.scatterType&&"bar"==this.scatterType&&"XYZ"!=this.axesType){var ot=this.histogramBarWidth;s=this.marginTop+this.offsetY+this.top+this.y-e,G>0&&(this.toRender({p:["drawShape","rectangle",t,e+s/2,2*ot,s,Y,W,J],i:[V,I,z],t:"Data",h:st}),this.drawSelectedLabel([V,I,z],t,e))}else{if(!this.scatterType||!this.scatterType.match(/functio|lineStep/)){if(!this.isIn2DViewport(S,t,e))continue;if(j&&!isNaN(j)&&(i=j/2*this.xAxisUnit,this.toRender({p:["drawLine","error",t,e,t+i,e,Y,this.margin],t:"Data",h:st}),this.toRender({p:["drawLine","error",t,e,t-i,e,Y,this.margin],t:"Data",h:st})),U&&!isNaN(U)&&(s=U/2*this.yAxisUnit,this.toRender({p:["drawLine","error",t,e,t,e+s,Y,-this.margin],t:"Data",h:st}),this.toRender({p:["drawLine","error",t,e,t,e-s,Y,-this.margin],t:"Data",h:st})),this.lineBy&&this.ribbonBy&&this.colorBy==this.lineBy||"line"==this.scatterType?this.toRender({p:["drawShape",tt,t,e,K,K,nt,nt,!1,!1,!1,!1,!1,!1,Z],i:rt,b:[a,r,0,0],t:"Data",h:st||at}):this.toRender({p:["drawShape",tt,t,e,Q,Q,Y,W,J,!1,!1,!1,!1,!1,Z],i:rt,b:[a,r,0,0],t:"Data",h:st}),it&&(D.hasOwnProperty(it)||(D[it]={data:[],ribbon:[[],[]],color:Y}),D[it].data.push([t,e])),this.ribbonBy){var ht=this.meta.data.z,lt=this.isArray(this.ribbonBy)&&ht&&ht.hasOwnProperty(this.ribbonBy[0])&&"Numeric"==ht[this.ribbonBy[0]].type&&ht.hasOwnProperty(this.ribbonBy[1])&&"Numeric"==ht[this.ribbonBy[1]].type,ct=this.getSampleIndices(this.ribbonBy);lt||this.isArray(ct)?(lt?(o=this.data.z[this.ribbonBy[0]][V],h=this.data.z[this.ribbonBy[1]][V]):(o=this.getDataAtPos(V,ct[0],!1,this.xAxisTransform,null!=this.xAxisFloorValue?this.xAxisFloorValue:p,null!=this.xAxisCeilValue?this.xAxisCeilValue:d),h=this.getDataAtPos(V,ct[1],!1,this.yAxisTransform,null!=this.yAxisFloorValue?this.yAxisFloorValue:f,null!=this.yAxisCeilValue?this.yAxisCeilValue:m)),o=T-(o-this.yAxisMin)*this.yAxisUnit,h=T-(h-this.yAxisMin)*this.yAxisUnit):this.isArray(ct)||(h=T-(G-(o=T-(G+(o=ht&&ht.hasOwnProperty(this.ribbonBy)&&"Numeric"==ht[this.ribbonBy].type?this.data.z[this.ribbonBy][V]:this.getDataAtPos(V,ct,!1,this.xAxisTransform,null!=this.xAxisFloorValue?this.xAxisFloorValue:p,null!=this.xAxisCeilValue?this.xAxisCeilValue:d))-this.yAxisMin)*this.yAxisUnit)-this.yAxisMin)*this.yAxisUnit),it?(D[it].ribbon[0].push([t,t]),D[it].ribbon[1].push([o,h])):k&&(k[0].push([t,t]),k[1].push([o,h]))}this.drawSelectedLabel([V,I,z],t,e),this.xAxisRugShow&&(this.xAxisRugPosition.match(/top|both/)&&this.toRender({p:["drawLine","line",t,T-this.y,t,T-this.y+this.xAxisRugHeight,Y],t:"Data",h:st}),this.xAxisRugPosition.match(/bottom|both/)&&this.toRender({p:["drawLine","line",t,T-this.xAxisRugHeight,t,T,Y],t:"Data",h:st})),this.yAxisRugShow&&(this.yAxisRugPosition.match(/left|both/)&&this.toRender({p:["drawLine","line",C,e,C+this.yAxisRugHeight,e,Y],t:"Data",h:st}),this.yAxisRugPosition.match(/right|both/)&&this.toRender({p:["drawLine","line",C+this.x-this.yAxisRugHeight,e,C+this.x,e,Y],t:"Data",h:st}))}this.scatterType&&this.scatterType.match(/line|functio/i)&&E<this.varIndices.length-1&&(V=this.varIndices[E+1],H=this.getDataAtPos(V,I,!1,this.xAxisTransform,null!=this.xAxisFloorValue?this.xAxisFloorValue:p,null!=this.xAxisCeilValue?this.xAxisCeilValue:d),G=this.getDataAtPos(V,z,!1,this.yAxisTransform,null!=this.yAxisFloorValue?this.yAxisFloorValue:f,null!=this.yAxisCeilValue?this.yAxisCeilValue:m),i=C+(H-this.xAxisMin)*this.xAxisUnit,s=T-(G-this.yAxisMin)*this.yAxisUnit,"lineStep"==this.scatterType?(n=this.toRender({p:["drawLine","line",t,e,i,e,Y],i:["Line-"+V+"-"+I+"-"+z+":"+this.data.y.vars[V]],g:_,t:"Data",h:st||at}),this.toRender({p:["drawLine","line",i,e,i,s,Y],i:["Line-v-"+V+"-"+I+"-"+z+":"+this.data.y.vars[V]],g:_,t:"Data",h:st||at}),null==_&&(_=n)):(A.push(t),w.push(e)))}}if(this.draw2DLoess(C,T,I,z),this.draw2DQuantileRegression(C,T,I,z),this.scatterType&&this.scatterType.match(/line|functio/i)){if("spline"==this.lineType)A.push(i),w.push(s),this.toRender({p:["drawLine","spline",A,w,!1,!1,Y],t:"Data"});else for(var dt=1;dt<A.length;dt++)n=this.toRender({p:["drawLine","line",A[dt-1],w[dt-1],A[dt],w[dt],Y],i:["Line-"+I+"-"+z+":"+this.data.y.smps[I]+"-"+this.data.y.smps[z]],g:_,t:"Data",h:st||at}),null==_&&(_=n);if(this.ribbonBy&&!D){var pt=this.addColorTransparency(this.confidenceIntervalColor,.3);this.toRender({p:["drawShape","confidence",k[0],k[1],!1,!1,pt,pt,"closed"],b:[a,r],t:"Data",h:st||at})}A=[],w=[]}if(this.ellipseBy){var gt=!!(this.ellipseBy&&this.data.z&&this.data.z.hasOwnProperty(this.ellipseBy))&&this.meta.data.z[this.ellipseBy];for(var et in P){var ut=this.errorEllipse(P[et][0],P[et][1]),mt=(Y=gt&&gt.colors?gt.colors[gt.order[et]]:this.colors[L%this.colors.length],C+(ut.cx-this.xAxisMin)*this.xAxisUnit),ft=T-(ut.cy-this.yAxisMin)*this.yAxisUnit,yt=2*ut.rx*this.xAxisUnit,xt=2*ut.ry*this.yAxisUnit;this.toRender({p:["drawShape","oval",mt,ft,yt,xt,!1,Y,"open",ut.rot],t:"Data"})}}if(this.lineBy&&this.data.z&&this.data.z.hasOwnProperty(this.lineBy))for(var it in D){at=this.isHidden(!1,!1,"Property:"+this.lineBy+":"+it+":z")||!!this.colorBy&&this.isHidden(!1,!1,"Property:"+this.colorBy+":"+it+":z");_=null;for(var vt=1;vt<D[it].data.length;vt++)n=this.toRender({p:["drawLine","line",D[it].data[vt-1][0],D[it].data[vt-1][1],D[it].data[vt][0],D[it].data[vt][1],D[it].color,2],i:["Line:"+this.lineBy+" - "+it],b:[a,r],t:"Data",g:_,h:at}),null==_&&(_=n);if(this.ribbonBy){pt=this.addColorTransparency(D[it].color,.3);this.toRender({p:["drawShape","confidence",D[it].ribbon[0],D[it].ribbon[1],!1,!1,pt,pt,"closed"],b:[a,r],t:"Data",h:at})}}}this.decorations&&this.decorations.marker&&this.drawMarkers(),this.motionBy&&(t=this.left+this.x,e=this.top+this.y+2*this.margin,this.toRender({p:["drawText",this.motionObject.current,t,e,this.motionCurrentFont,this.motionCurrentColor,"right","bottom"],t:"Data"}))}this.toRender({p:["resetClipArea"],t:"Data"})},this.draw2DLoess=function(t,e,i,s){if(this.showLoessFit){if(this.isTransformedData&&this.isTransformedData.match(/exp/))return alert("Loess not shown for exp transformed data"),void(this.showLoessFit=!1);var a,r,n,o,h,l,c,d=this.getAxisDataBySample(i,"x"),p=this.getAxisDataBySample(s,"y"),g=1==this.fitLineTransparency?this.fitLineColor:this.addColorTransparency(this.fitLineColor,this.fitLineTransparency);if(!(d.length>5))return alert("Loess not shown for data sets that have less than 5 x,y pair values."),void(this.showLoessFit=!1);try{c=this.loess([d,p],[i,s])}catch(t){return alert("Loess not available for dataset!"),void(this.showLoessFit=!1)}if(c){var u=(0-this.xAxisMin)*this.xAxisUnit,m=(0-this.yAxisMin)*this.yAxisUnit,f=[[],[]],y=[[],[]];d=c.x,p=c.y,l=c.confidence;for(var x=0;x<d.length-0;x++)a=t+(d[x]-this.xAxisMin)*this.xAxisUnit,n=e-(p[x]-this.yAxisMin)*this.yAxisUnit,r=t+(d[x+1]-this.xAxisMin)*this.xAxisUnit,o=e-(p[x+1]-this.yAxisMin)*this.yAxisUnit,f[0].push(a),f[1].push(n),h=l[x]*this.yAxisUnit,y[0].push([a,a]),y[1].push([n+h,n-h]),a==r&&n==o||(x0=a,y0=n);if(this.showConfidenceIntervals){var v=this.addColorTransparency(this.confidenceIntervalColor,.3,!0);this.toRender({p:["drawShape","confidence",y[0],y[1],!1,!1,v,v,"closed"],i:["LoessConf-"+x,c.summary],t:"Decorations"})}this.toRender({p:["drawLine","spline",f[0],f[1],!1,!1,g,this.fitLineWidth],i:["Loess-"+x,c.summary],b:[u,m],t:"Decorations"})}}},this.draw2DQuantileRegression=function(t,e,i,s){if(this.showQuantileRegressionFit){var a,r=this.getAxisDataBySample(i,"x"),n=this.getAxisDataBySample(s,"y");if(!(r.length>5))return alert("Quantile Regression not shown for data sets that have less than 5 x,y pair values."),void(this.showQuantileRegressionFit=!1);try{a=this.setRqfnb(r,n,this.quantiles)}catch(t){return alert("Quantile Regression not available for dataset!"),void(this.showQuantileRegressionFit=!1)}if(!this.isObject(a))return alert("Quantile Regression not available for dataset!"),void(this.showQuantileRegressionFit=!1);for(var o=(0-this.xAxisMin)*this.xAxisUnit,h=(0-this.yAxisMin)*this.yAxisUnit,l=1==this.fitLineTransparency?this.fitLineColor:this.addColorTransparency(this.fitLineColor,this.fitLineTransparency),c=this.range(r),d=c[0],p=c[c.length-1],g=0;g<a.length;g++){var u=a[g].slope,m=a[g].intercept,f="<b>Quantile: </b> "+a[g].tau+"<br><b>Slope: </b>"+this.formatNumber(u,4)+"<br><b>Intercept: </b>"+this.formatNumber(m,4),y=t+d*this.xAxisUnit-this.xAxisMin*this.xAxisUnit,x=e-(u*d+m)*this.yAxisUnit+this.yAxisMin*this.yAxisUnit,v=t+p*this.xAxisUnit-this.xAxisMin*this.xAxisUnit,b=e-(u*p+m)*this.yAxisUnit+this.yAxisMin*this.yAxisUnit;this.toRender({p:["drawLine",this.fitLineStyle,y,x,v,b,l,this.fitLineWidth],i:["QuantileRegression:"+g,f],b:[o,h],t:"Decorations"})}}},this.draw2DBin=function(t,e,i,s){this.removeMenus();var a=this.meta.data.b,r=this.getAxisDataBySample(i,"x"),n=this.getAxisDataBySample(s,"y"),o=this.hist2d(r,n,!0),h=o.x*this.xAxisUnit*("hexagon"==this.binplotShape?2:1),l=o.y*this.yAxisUnit*("hexagon"==this.binplotShape?2:1);for(var c in this.layoutValid?a.l[this.layoutCurrent]=o:(a.g=o,a.c=o.brew),o.data){var d="<b>"+c+"</b><br>"+o.data[c].idx.length,p=t+(o.data[c].x-this.xAxisMin)*this.xAxisUnit,g=e-(o.data[c].y-this.yAxisMin)*this.yAxisUnit,u=this.layoutValid?this.getColorForValue(a.c,o.data[c].idx.length):o.data[c].color;this.toRender({p:["drawShape",this.binplotShape,p,g,h,l,u,this.foreground],i:["Bin2d:"+c,d],b:[p,g],t:"Data"})}},this.draw2DQQPlot=function(t,e){for(var i,s,a,r,n,o,h,l=this.layoutValid&&!this.isDOE?this.meta.data.p.l[this.layoutCurrent]:this.meta.data.p.g,c=0;c<l.length;c++){i=l[c].data,s=l[c].color,a=l[c].id,r=Number(i.l.slope),n=Number(i.l.intercept),o=.5*this.dataPointSize,h="y ~ "+this.formatNumber(r)+"x + "+this.formatNumber(n);for(var d=0;d<i.x.length;d++){var p=t+i.x[d]*this.xAxisUnit-this.xAxisMin*this.xAxisUnit,g=e-i.y[d]*this.yAxisUnit+this.yAxisMin*this.yAxisUnit;this.toRender({p:["drawShape","circle",p,g,o,o,!1,s,"open"],i:[i.i[d],this.yAxisIndices[0]],t:"Decorations",h:this.isHidden(!1,!1,a)})}g=r*(p=i.x[0])+n;var u=i.x[i.x.length-1],m=r*u+n;p=t+p*this.xAxisUnit-this.xAxisMin*this.xAxisUnit,g=e-g*this.yAxisUnit+this.yAxisMin*this.yAxisUnit,u=t+u*this.xAxisUnit-this.xAxisMin*this.xAxisUnit,m=e-m*this.yAxisUnit+this.yAxisMin*this.yAxisUnit,this.toRender({p:["drawLine","line",p,g,u,m,s,2],i:[h+":QQ-Line"+c],t:"Decorations",h:this.isHidden(!1,!1,a)})}},this.draw2DCDFPlot=function(t,e){for(var i,s,a,r,n=this.layoutValid?this.meta.data.p.l[this.layoutCurrent]:this.meta.data.p.g,o=0;o<n.length;o++){i=n[o].data,s=n[o].color,a=n[o].id,r=.5*this.dataPointSize;for(var h=0;h<i.x.length;h++){var l=t+i.x[h]*this.xAxisUnit-this.xAxisMin*this.xAxisUnit,c=e-i.y[h]*this.yAxisUnit+this.yAxisMin*this.yAxisUnit;this.toRender({p:["drawShape","circle",l,c,r,r,!1,s,"open"],i:[i.i[h],this.xAxisIndices[0]],t:"Decorations",h:this.isHidden(!1,!1,a)})}}},this.draw2DKMPlot=function(t,e){var i,s,a,r,n,o,h,l,c,d,p,g,u,m,f,y,x,v=this.layoutValid?this.meta.data.p.l[this.layoutCurrent]:this.meta.data.p.g;this.layoutValid&&!v&&(v=this.isDOE&&this.colorBy?this.meta.data.p.g:[this.meta.data.p.g[this.layoutCurrent]]);for(var b=0;b<v.length;b++){var A=[[],[]],w=[[],[]],C=[[],[]];u=v[b].color,m=this.addColorTransparency(u,.3,!0),f=v[b].data,y=v[b].id,i=t,s=e-this.yAxisUnit+this.yAxisMin*this.yAxisUnit,a=t+Number(f.time[0])*this.xAxisUnit-this.xAxisMin*this.xAxisUnit,r=e-f.kaplanMeier[1]*this.yAxisUnit+this.yAxisMin*this.yAxisUnit,o=e-f.upperLimit[0]*this.yAxisUnit+this.yAxisMin*this.yAxisUnit,l=e-f.lowerLimit[0]*this.yAxisUnit+this.yAxisMin*this.yAxisUnit,c=i,d=s,p=r-this.margin,g=r+this.margin,x=this.toRender({p:["drawLine","line",i,s,a,s,u],i:["Decor-KM-h-0-"+b],b:[c,d,c,d],t:"Decorations",h:this.isHidden(!1,!1,y)}),this.toRender({p:["drawShape","circle",a,r,1,1,u],i:["Decor-KM-x-0-"+b],g:x,b:[c,d],t:"Decorations",h:this.isHidden(!1,!1,y)}),this.toRender({p:["drawLine","line",a,s,a,r,u],i:["Decor-KM-v-0-"+b],g:x,b:[c,d,c,d],t:"Decorations",h:this.isHidden(!1,!1,y)}),f.nCensored[0]&&this.toRender({p:["drawLine","line",a,p,a,g,u,2],i:["Decor-KM-c-0-"+b],g:x,b:[c,d,c,d],t:"Decorations",h:this.isHidden(!1,!1,y)}),A[0].push(i,a),A[1].push(o,o),w[0].push(i,a),w[1].push(l,l);for(var T=1;T<f.time.length-1;T++)i=t+Number(f.time[T-1])*this.xAxisUnit-this.xAxisMin*this.xAxisUnit,s=e-f.kaplanMeier[T]*this.yAxisUnit+this.yAxisMin*this.yAxisUnit,n=e-f.upperLimit[T]*this.yAxisUnit+this.yAxisMin*this.yAxisUnit,h=e-f.lowerLimit[T]*this.yAxisUnit+this.yAxisMin*this.yAxisUnit,a=t+Number(f.time[T])*this.xAxisUnit-this.xAxisMin*this.xAxisUnit,r=e-f.kaplanMeier[T+1]*this.yAxisUnit+this.yAxisMin*this.yAxisUnit,o=e-f.upperLimit[T+1]*this.yAxisUnit+this.yAxisMin*this.yAxisUnit,l=e-f.lowerLimit[T+1]*this.yAxisUnit+this.yAxisMin*this.yAxisUnit,p=r-this.margin,g=r+this.margin,this.toRender({p:["drawLine","line",i,s,a,s,u],i:["Decor-KM-h-"+T+"-"+b],g:x,b:[c,d,c,d],t:"Decorations",h:this.isHidden(!1,!1,y)}),this.toRender({p:["drawShape","circle",a,r,1,1,u],i:["Decor-KM-x-"+T+"-"+b],g:x,b:[c,d],t:"Decorations",h:this.isHidden(!1,!1,y)}),this.toRender({p:["drawLine","line",a,s,a,r,u],i:["Decor-KM-v-"+T+"-"+b],g:x,b:[c,d,c,d],t:"Decorations",h:this.isHidden(!1,!1,y)}),f.nCensored[T]&&this.toRender({p:["drawLine","line",a,p,a,g,u,2],i:["Decor-KM-c-"+T+"-"+b],g:x,b:[c,d,c,d],t:"Decorations",h:this.isHidden(!1,!1,y)}),A[0].push(i,a,a),A[1].push(n,n,o),w[0].push(i,a,a),w[1].push(h,h,l);i=a,a=t+Number(f.time[T])*this.xAxisUnit-this.xAxisMin*this.xAxisUnit,this.toRender({p:["drawLine","line",i,r,a,r,u],i:["Decor-KM-h-"+T+"-"+b],g:x,b:[c,d,c,d],t:"Decorations",h:this.isHidden(!1,!1,y)}),A[0].push(a,a),A[1].push(o,o),w[0].push(a,a),w[1].push(l,l),this.showConfidenceIntervals&&(C[0]=A[0].concat(w[0].reverse()),C[1]=A[1].concat(w[1].reverse()),this.toRender({p:["drawShape","polygon",C[0],C[1],!1,!1,m,m,"closed"],i:["Decor-KM-Conf"+b],t:"Decorations",h:this.isHidden(!1,!1,y)}))}},this.draw2DContour=function(){if(!this.isSkipContour()){this.toRender({p:["setClipArea",this.setClipBoundaries()],t:"Data"});var t=this.marginLeft+this.offsetX+this.left,e=this.marginTop+this.offsetY+this.top+this.y,i=this.getSetContour();if(i&&i.length)for(var s=0;s<i.length;s++){var a=i[s];if(this.contourFilled&&a&&a.data&&a.data.filled&&a.data.filled.length&&"normal"==this.contourType)for(var r=a.data.filled,n=0;n<r.length;n++)for(var o=null,h=a.data.colorBrew,l="density"==this.contourStat?r[n].value:"ndensity"==this.contourStat?r[n].value/a.data.range[1]:r[n].value*a.data.n,c=this.contourFilledTransparency<1?this.addColorTransparency(this.getColorForValue(h,l),this.contourFilledTransparency):this.getColorForValue(h,l),d=0;d<r[n].coordinates.length;d++)for(var p=0;p<r[n].coordinates[d].length;p++){for(var g=[],u=[],m=0;m<r[n].coordinates[d][p].length;m++){var f=this.xAxisTransform?this.transformValue(this.xAxisTransform,r[n].coordinates[d][p][m][0]):r[n].coordinates[d][p][m][0],y=this.yAxisTransform?this.transformValue(this.yAxisTransform,r[n].coordinates[d][p][m][1]):r[n].coordinates[d][p][m][1];g.push(t+(f-this.xAxisMin)*this.xAxisUnit),u.push(e-(y-this.yAxisMin)*this.yAxisUnit)}var x=[n,d,p].join("-"),v=this.toRender({p:["drawShape","spline"==this.lineType?"spline":"path",g,u,!1,!1,c,c,"close"],g:o,i:["Contour:"+x,[a.name,r[n].value]],t:"Data"});null==o&&(o=v)}else if(a&&a.data&&a.data.kde2d&&("raster"==this.contourType||"point"==this.contourType)){r=a.data.kde2d,h=a.data.colorBrew;var b=(r.x[1]-r.x[0])*this.xAxisUnit*("raster"==this.contourType?1.1:1),A=(r.y[1]-r.y[0])*this.yAxisUnit*("raster"==this.contourType?1.1:1),w=Math.min(b,A);for(n=0;n<r.x.length;n++)for(f=t+((this.xAxisTransform?this.transformValue(this.xAxisTransform,r.x[n]):r.x[n])-this.xAxisMin)*this.xAxisUnit,d=0;d<r.y.length;d++){y=e-((this.yAxisTransform?this.transformValue(this.yAxisTransform,r.y[d]):r.y[d])-this.yAxisMin)*this.yAxisUnit,l="density"==this.contourStat?r.z[n+d*r.x.length]:"ndensity"==this.contourStat?r.z[n+d*r.x.length]/a.data.range[1]:r.z[n+d*r.x.length]*a.data.n,c="point"==this.contourType?this.foreground:this.contourFilledTransparency<1?this.addColorTransparency(this.getColorForValue(h,l),this.contourFilledTransparency):this.getColorForValue(h,l);var C=Math.max(2,Math.ceil(l*w/h.rmax));x=n+d*r.x.length;"point"==this.contourType?this.toRender({p:["drawShape","circle",f,y,C,C,c,c],i:["Contour:"+x,[this.formatNumber(r.x[n],2),this.formatNumber(r.y[d],2),this.formatNumber(l,2)]],t:"Data"}):this.toRender({p:["drawShape","rectangle",f,y,b,A,c,c],i:["Contour:"+x,[this.formatNumber(r.x[n],2),this.formatNumber(r.y[d],2),this.formatNumber(l,2)]],t:"Data"})}}if(a&&a.data&&a.data.lines&&a.data.lines.length&&(this.showContourBands||this.showContourLevel))for(r=a.data.lines,n=0;n<r.length;n++)for(o=null,c=!0===this.isContour?this.contourBandsColor:this.meta.data.z[this.isContour].colors[this.meta.data.z[this.isContour].order[a.name]],d=0;d<r[n].coordinates.length;d++)for(p=0;p<r[n].coordinates[d].length;p++){for(g=[],u=[],m=0;m<r[n].coordinates[d][p].length;m++){f=this.xAxisTransform?this.transformValue(this.xAxisTransform,r[n].coordinates[d][p][m][0]):r[n].coordinates[d][p][m][0],y=this.yAxisTransform?this.transformValue(this.yAxisTransform,r[n].coordinates[d][p][m][1]):r[n].coordinates[d][p][m][1];g.push(t+(f-this.xAxisMin)*this.xAxisUnit),u.push(e-(y-this.yAxisMin)*this.yAxisUnit)}x=[n,d,p,0].join("-");if(this.showContourBands){v=this.toRender({p:["drawShape","spline"==this.lineType?"spline":"path",g,u,!1,!1,!1,c,"open"],g:o,i:["Contour:"+x,[a.name,r[n].value]],t:"Data"});null==o&&(o=v)}if(this.showContourLevel)for(var T=[.1,.2,.3,.4,.5,.6,.7,.8,.9],S=!1,M=0;!S&&M<18;){g[m=parseInt(g.length*T[Math.round(this.randomBetween(0,9))])]>t&&g[m]<t+this.x&&u[m]>e-this.y&&u[m]<e&&(this.toRender({p:["drawText",r[n].value,g[m],u[m],this.legendTextFont],t:"Data"}),S=!0),M++}}}this.toRender({p:["resetClipArea"],t:"Data"})}},this.drawFishData=function(){var t=this.setClipBoundaries();this.toRender({p:["setClipArea",t],t:"Data"});for(var e=this.createFish(),i=this.marginLeft+this.offsetX+this.left,s=this.marginTop+this.offsetY+this.top+this.y,a=(this.fishTimepoints[this.fishTimepoints.length-1]-this.fishTimepoints[0])/5,r=0;r<this.data.y.vars.length;r++){var n="polygon"==this.fishShape?"violin":"fish",o=s-((e.ytop[r][0]+e.ybtm[r][0])/2-this.yAxisMin)*this.yAxisUnit,h=i+(e.xpos[r][0]-(0==r?a:e.nestLevel[r]<=1?.3*a:.1*a)-this.xAxisMin)*this.xAxisUnit,l=i+((e.xpos[r][0]-(0==r?a:e.nestLevel[r]<=1?.3*a:.1*a))/2-this.xAxisMin)*this.xAxisUnit,c=[h],d=[o],p=[o];"polygon"==this.fishShape&&(c.push(l),d.push(s-(e.ytop[r][0]-this.yAxisMin)*this.yAxisUnit),p.push(s-(e.ybtm[r][0]-this.yAxisMin)*this.yAxisUnit));for(var g=0;g<e.xpos[r].length;g++)c.push(i+(e.xpos[r][g]-this.xAxisMin)*this.xAxisUnit),d.push(s-(e.ytop[r][g]-this.yAxisMin)*this.yAxisUnit),p.push(s-(e.ybtm[r][g]-this.yAxisMin)*this.yAxisUnit);var u=this.isHidden(r),m=this.toRender({p:["drawShape",n,[c,c],[d,p],!1,!1,this.colors[r],this.colors[r]],i:["fish-"+r],b:[h,o],t:"Data",h:u});this.fishCloneLabels.length&&this.fishCloneLabels[r]&&""!=this.fishCloneLabels[r]&&this.toRender({p:["drawText",this.fishCloneLabels[r],h,o,this.varLabelFont,this.varLabelFontColor,"left","bottom",this.varLabelRotate],i:["fish-Label-"+r],g:m,t:"Labels",h:u})}this.toRender({p:["resetClipArea"],t:"Data"})},this.setHistogram=function(t){var e=t+"AxisHistogram",i=this.meta.data.d[t],s="count"==this.histogramStat?this.max(i.cols):i.density[0].globalMaxY;this[e]=i,this[e].min=i.global.breaks[0],this[e].size=i.global.size,this[e].len=i.density.length,this[e].axis=this[this.axisAlgorithm](0,s,4,this.axisWilkinsonLoose),this[e].axisMin=this[e].axis[0],this[e].axisMax=this[e].axis[this[e].axis.length-1],this[e].cntx=[]},this.set2DDensityData=function(){this.setCacheColors(),this.isCreateHistogram.colors=[];var t={n:[],m:[]},e=!(!this.data.y.global||!this.data.y.global.count)&&[];if(e)for(var i=0;i<this.data.y.global.count.length;i++)e[i]=0;if(this.layoutValid&&this.data.l&&this.data.l.axes){if(!this.data.l.axes[this.layoutCurrent])return;var s=this.getSampleIndices(this.data.l.axes[this.layoutCurrent].yAxis);for(i=0;i<s.length;i++)t.n.push([this.isCreateHistogram.smpIndices[s[i]-1]]),t.m.push([this.isCreateHistogram.n[s[i]-1]])}else if("filled"==this.densityPosition)for(i=this.isCreateHistogram.smpIndices.length-1;i>=0;i--)t.n.push([this.isCreateHistogram.smpIndices[i]]),t.m.push([this.isCreateHistogram.n[i]]);else for(i=0;i<this.isCreateHistogram.smpIndices.length;i++)t.n.push([this.isCreateHistogram.smpIndices[i]]),t.m.push([this.isCreateHistogram.n[i]]);var a=this.isCreateHistogram.smpIndices.length;for(i=0;i<t.n.length;i++)for(var r=0;r<t.n[i].length;r++)this.draw2DDensityData(t.n[i][r],this.isCreateHistogram.level[a-1],e,t.n.length,i,this.isCreateHistogram.subLevel[a-1]),a--},this.draw2DDensityData=function(t,e,i,s,a,r){this.histogramBarWidth=this.isCreateHistogram.size*this.xAxisUnit-3;var n=this,o=this.marginLeft+this.offsetX+this.left,h=this.marginTop+this.offsetY+this.top+this.y+this.yAxisMin*this.yAxisUnit,l=this.data,c=!!l.y.density&&function(e){if(n.scatterPlotMatrix){var i=[];if(3==e.y.density.length)for(var s=0;s<e.y.density.length;s++)i.push(n.meta.data.d.z[e.y.density[t][0]][e.y.density[t][1]][e.y.density[t][2]]);else i=[n.meta.data.d.s[e.y.density[t]]];return i}return e.y.density}(l),d=this.get2DColor(this.meta.data,this.ridgeBy&&!this.colorBy?r:t),p=this.darkenLightenColor(d,50),g=l.y.cols[t],u=this.histogramType.match(/staggered|stacked/)?Math.floor(this.histogramBarWidth):Math.floor(this.histogramBarWidth/(this.ridgeBy&&this.isCreateHistogram?1:s)),m=this.isCreateHistogram.min,f=this.isCreateHistogram.rmin,y=[];if(c&&c[t]&&this.histogramAsDotplot){u=this.histogramBarWidth;if(this.colorBy)for(var x=this.meta.data.z[this.colorBy],v=0;v<this.data.y.histogram.length;v++){y[v]=[];for(var b=0;b<this.data.y.histogram[v].length;b++){y[v][b]=[];for(var A=[],w=0;w<this.data.y.histogram[v][b].length;w++){var C=this.data.y.histogram[v][b][w],T=this.dataStndBy.z[this.colorBy][C];A.push(x.order[T])}A.sort((function(t,e){return t-e}));for(w=0;w<A.length;w++)"String"==x.type?y[v][b].push(x.colors[A[w]]):y[v][b].push(this.getColorForValue(x.colorBrew,A[w]))}}for(v=0;v<this.varIndices.length;v++){b=this.varIndices[v];var S=this.getDataAtPos(b,0)-this.xAxisMin+(f-m),M=this.getDataAtPos(b,t+1),D=Math.floor(o+S*this.xAxisUnit+u*a-this.histogramBarWidth),k=this.getFillColor(d,[b,t+1,0]),L=this.getOutlineColor(d,[b,t+1,0]);for(C=0;C<M;C++){var I=[b,t+1,C],z=this.isHidden(!1,I[1]),N="up"==this.histogramStackDir||"down"==this.histogramStackDir?0:"center"==this.histogramStackDir?.5*M*u*this.histogramStackRatio:Math.floor(.5*M)*u*this.histogramStackRatio-.5*u+(M>1?0:u),B=h-C*u*this.histogramStackRatio+N;this.colorBy?this.useOpenShapes?(L=y[v][0][C],this.toRender({p:["drawShape","circle",D+u/2,B-u/2,u,u,!1,L,"open"],i:I,b:[D+u/2,h,u],t:"Data",h:z})):(k=y[v][0][C],this.toRender({p:["drawShape","circle",D+u/2,B-u/2,u,u,k,L],i:I,b:[D+u/2,h,u],t:"Data",h:z})):this.toRender({p:["drawShape","circle",D+u/2,B-u/2,u,u,k,L],i:I,b:[D+u/2,h,u],t:"Data",h:z})}}}else if(c&&c[t]&&(this.showHistogramDensity||this.showHistogramMedian||!this.hideHistogram||this.showHistogramPath||this.xAxisRugShow||this.showHistogramDataPoints||this.showHistogramQuantiles)){var P=this.yAxisUnit;if(this.ridgeBy&&this.isCreateHistogram){var R=this.ridgelineScale-1,O=Math.max(this.data.y.maxLevel,this.ridgelineScale),X=this.y/(this.ridgelineScale>1?O+R:O+.1);P/=(this.ridgelineScale>1?O+R+.16:O+.16)/this.ridgelineScale,h-=X*(this.layoutValid&&!this.isDOE?this.data.l.axes.length-1-this.layoutCurrent:e)}if(this.showHistogramDensity||this.showHistogramDataPoints||this.showHistogramQuantiles){for(var F="normal"!=this.densityPosition&&"count"==this.histogramStat?c[t].position.factor*("stacked"==this.densityPosition?1:c[t].position.max):"count"==this.histogramStat?g/c[t].maxY:1,_=[],E=[],V=(C="stacked"==this.densityPosition?c[t].stacked:"filled"==this.densityPosition?c[t].filled:c[t].xy,0);V<C.length;V++){S=C[V][0],M=this.ridgeBy&&this.isCreateHistogram?Math.max(0,C[V][1]*F):C[V][1]*F;_.push(o+(S-this.xAxisMin-m)*this.xAxisUnit),E.push(h-M*P)}I=this.scatterPlotMatrix&&!0!==this.scatterPlotMatrix&&this.scatterPlotMatrix.match(/\w/)?["Density:"+c[t].name+":"+(t+1),"Property:"+this.scatterPlotMatrix+":"+this.data.y.smps[t+1]+":z"]:["Density:"+c[t].name+":"+(t+1)],z=this.ridgeBy?this.isHidden(!1,!1,"Series:0:"+r):this.scatterPlotMatrix&&!0!==this.scatterPlotMatrix&&this.scatterPlotMatrix.match(/\w/)?this.isHidden(!1,!1,I[1]):this.isHidden(I[0]);if(this.showFilledHistogramDensity)if(this.ridgeBy&&this.isCreateHistogram&&"data"==this.colorBy){var H=this.mean(_),G=this.getLinearGradient(o-H,0,o+this.x-H,0);this.toRender({p:["drawShape","spline",_,E,!1,!1,G],i:I,t:"Data",h:z})}else this.toRender({p:["drawShape","spline",_,E,!1,!1,this.addColorTransparency(p,this.histogramDensityFillTransparency,!0),p],i:I,t:"Data",h:z||this.isHidden(!1,t+1)});else this.showHistogramDensity&&this.toRender({p:["drawLine","spline",_,E,!1,!1,p,2,!1,!1,!1,!0],i:I,t:"Data",h:z||this.isHidden(!1,t+1)});if(this.showHistogramDataPoints){var q=this.data.y.values,j=h;for(v=0;v<q.length;v++)for(b=0;b<q[v][t].length;b++){D=o+((S=q[v][t][b]-this.xAxisMin)-m)*this.xAxisUnit;for(var U=0;U<_.length;U++){B=E[U];if(_[U]>D){B=this.randomBetween(j,B);var Y=this.ridgeBy&&this.isCreateHistogram&&"data"==this.colorBy;this.toRender({p:["drawShape","sphere",D,B,u/4,u/4,!Y&&p,this.foreground,Y?"open":"closed"],t:"Decorations"});break}}}}if(this.showHistogramQuantiles){q=this.data.y.values;var W=[];for(v=0;v<q.length;v++)for(b=0;b<q[v][t].length;b++)W.push(q[v][t][b]);j=h;var $=o+(c[t].quantilesX[1]-this.xAxisMin-m)*this.xAxisUnit,Q=o+(c[t].quantilesX[2]-this.xAxisMin-m)*this.xAxisUnit,K=o+(c[t].quantilesX[3]-this.xAxisMin-m)*this.xAxisUnit;for(U=0;U<_.length;U++){B=E[U];if(_[U]>$){this.toRender({p:["drawLine","line",$,j,$,B,p,2],t:"Decorations"});break}}for(U=0;U<_.length;U++){B=E[U];if(_[U]>Q){this.toRender({p:["drawLine","line",Q,j,Q,B,p,2],t:"Decorations"});break}}for(U=0;U<_.length;U++){B=E[U];if(_[U]>K){this.toRender({p:["drawLine","line",K,j,K,B,p,2],t:"Decorations"});break}}}}if(!this.hideHistogram||this.showHistogramPath){F="density"==this.histogramStat?c[t].maxY/g:1;var J=[[o-this.xAxisMin*this.xAxisUnit],[h]];for(v=0;v<this.varIndices.length;v++){b=this.varIndices[v],S=this.getDataAtPos(b,0)-this.xAxisMin+(f-m),M=this.getDataAtPos(b,t+1)*F,D=Math.floor(o+S*this.xAxisUnit+(this.histogramType.match(/staggered|stacked/)?0:this.ridgeBy&&this.isCreateHistogram?u-this.histogramBarWidth:u*a)-this.histogramBarWidth);var Z="stacked"==this.histogramType&&i?i[b]:0,tt=h-((B=h-(M*P+Z))+Z);k=this.getFillColor(d,[b,t+1,0]),L=this.getOutlineColor(d,[b,t+1,0]),I=this.scatterPlotMatrix&&!0!==this.scatterPlotMatrix&&this.scatterPlotMatrix.match(/\w/)?[b,t+1,0,"Property:"+this.scatterPlotMatrix+":"+this.data.y.smps[t+1]+":z"]:[b,t+1,0],z=this.scatterPlotMatrix&&!0!==this.scatterPlotMatrix&&this.scatterPlotMatrix.match(/\w/)?this.isHidden(!1,!1,I[3]):this.isHidden(!1,I[1]);this.hideHistogram||M>0&&tt>.5&&(this.toRender({p:["drawShape","rectangle",D+u/2,B+tt/2,u,tt,k,L],i:I,b:[D+u/2,h,u,0],t:"Data",h:z}),this.drawSelectedLabel([b,t+1],D,B)),J[0].push(D+u/2),J[1].push(h-(tt+Z)),i&&(i[b]+=M*P)}if(this.showHistogramPath){I=this.scatterPlotMatrix&&!0!==this.scatterPlotMatrix&&this.scatterPlotMatrix.match(/\w/)?["Path:"+c[t].name+":"+(t+1),"Property:"+this.scatterPlotMatrix+":"+this.data.y.smps[t+1]+":z"]:["Path:"+c[t].name+":"+(t+1)],z=this.ridgeBy?this.isHidden(!1,!1,"Series:0:"+r):this.scatterPlotMatrix&&!0!==this.scatterPlotMatrix&&this.scatterPlotMatrix.match(/\w/)?this.isHidden(!1,!1,I[1]):this.isHidden(I[0]);var et=this.histogramPathColor||p;this.toRender({p:["drawShape","path",J[0],J[1],!1,!1,et,et,"open",!1,this.histogramPathWidth],i:I,t:"Data",h:z||this.isHidden(!1,t+1)})}}if(this.showHistogramMedian){F="count"==this.histogramStat?g/c[t].maxY:1,S=o+(c[t].median[0]-this.xAxisMin-m)*this.xAxisUnit,M=c[t].maxY*F,tt=h;var it=h+this.fontSize-(M-this.yAxisMin)*P,st=h-this.y;this.toRender({p:["drawLine",this.histogramMedianLineStyle,S,tt,S,st,p,2,!1],i:["DensityMedian:"+c[t].name+":"+(t+1)],t:"Decorations",h:this.isHidden(!1,t+1)}),this.toRender({p:["drawText",this.formatNumber(c[t].median[0],this.xAxisDecs),S,it,!1,this.foreground],i:["DensityMedianValue:"+c[t].name+":"+(t+1)],t:"Decorations",h:this.isHidden(!1,t+1)})}if(this.xAxisRugShow&&!this.isDOE){H={},q=this.data.y.values;var at=this.xAxisUnit/10;for(v=0;v<q.length;v++)for(C=0;C<q[v][t].length;C++){_=(S=q[v][t][C]-this.xAxisMin).toFixed(1).toString();H.hasOwnProperty(_)||(H[_]=0),H[_]++;D=o+(S-this.isCreateHistogram.min)*this.xAxisUnit;H[_]>1&&(D=this.randomBetween(D-at,D+at));B=h-this.yAxisMin*P;this.xAxisRugPosition.match(/top|both/)&&this.toRender({p:["drawLine","line",D,B-this.y,D,B-this.y+this.xAxisRugHeight,d],t:"Decorations",h:this.isHidden(!1,t+1)}),this.xAxisRugPosition.match(/bottom|both/)&&this.toRender({p:["drawLine","line",D,B-this.xAxisRugHeight,D,B,d],t:"Decorations",h:this.isHidden(!1,t+1)})}}}},this.set2DHistograms=function(){if(!this.layoutComb&&(this.xAxisHistogramShow||this.yAxisHistogramShow)&&!this.isCreateHistogram&&!this.isValidQQ()&&!this.isValidCDF()&&!this.isDOE){this.xAxisHistogramShow&&this.setHistogram("x"),this.yAxisHistogramShow&&this.setHistogram("y");for(var t="XYZ"==this.axesType?1:Math.max(this.xAxisIndices.length,this.yAxisIndices.length),e=0;e<t;e++){var i="Y"==this.axesType||"XYZ"==this.axesType?this.xAxisIndices[this.xAxisCurrent]:this.xAxisIndices[e],s="X"==this.axesType||"XYZ"==this.axesType?this.yAxisIndices[this.yAxisCurrent]:this.yAxisIndices[e];this.xAxisHistogramShow&&this.xAxisHistogram.cntx.push([i,s]),this.yAxisHistogramShow&&this.yAxisHistogram.cntx.push([i,s])}}},this.draw2DHistogramsLayout=function(){var t,e,i=["x","y"];this.toRender({p:["disableGradientTransparencyShadow"],t:"Axes"});for(var s=0;s<i.length;s++)if(this[i[s]+"AxisHistogramShow"]){var a="x"==i[s]?this.marginLeft+this.offsetX+this.left:this.marginLeft+this.offsetX+this.left+this.x+2*this.margin,r="x"==i[s]?this.marginTop+this.offsetY+this.top-2*this.margin:this.marginTop+this.offsetY+this.top+this.y,n="x"==i[s]?[a,r-this.xAxisHistogramHeight,this.x,this.xAxisHistogramHeight]:[a,r-this.y,this.yAxisHistogramHeight,this.y];if("image"==this.backgroundType||"windowImage"==this.backgroundType)this.drawImage(CanvasXpress.cacheImages[this.getFileName(this.backgroundImage)],n[0],n[1],n[2],n[3]);else if("solid"==this.backgroundType);else if("window"==this.backgroundType||"windowSolidGradient"==this.backgroundType)this.toRender({p:["drawShape","rectangle",n[0]+n[2]/2,n[1]+n[3]/2,n[2],n[3],this.backgroundWindow,this.backgroundWindow],t:"Axes"});else{var o=this.getLinearGradient(n[0],n[1],n[2],n[3]);this.toRender({p:["drawShape","rectangle",n[0]+n[2]/2,n[1]+n[3]/2,n[2],n[3],o,this.foreground],t:"Axes"})}if("x"==i[s]){this.xAxisHistogram.axisUnit=this.xAxisHistogramHeight/(this.xAxisHistogram.axisMax-this.xAxisHistogram.axisMin);for(var h=0;h<this.xAxisHistogram.axis.length;h++)e=r-this.xAxisHistogram.axis[h]*this.xAxisHistogram.axisUnit,this.xAxisTicksMajorShow&&this.toRender({p:["drawLine","line",a,e,a+this.x,e,this.xAxisTickColor,this.xAxisTickGuideSize,"butt"],t:"Axes"}),this.xAxisTickGuideShow&&this.toRender({p:["drawLine",this.xAxisTickGuideLineType,a+this.x,e,a+this.x+this.yAxisTickGuideLength,e,this.yAxisTickGuideColor,this.yAxisTickGuideSize,"butt"],t:"Axes"}),this.toRender({p:["drawText",this.xAxisHistogram.axis[h],a+this.x+this.yAxisTickGuideLength+this.axisTickMargin,e,this.axisTickFont,this.axisTickColor,"left","middle"],t:"Axes"});this.set2DLayoutX(r-this.xAxisHistogramHeight,r,!0)}else{this.yAxisHistogram.axisUnit=this.yAxisHistogramHeight/(this.yAxisHistogram.axisMax-this.yAxisHistogram.axisMin);for(h=0;h<this.yAxisHistogram.axis.length;h++)t=a+this.yAxisHistogram.axis[h]*this.yAxisHistogram.axisUnit,this.yAxisTicksMajorShow&&this.toRender({p:["drawLine",this.yAxisTickLineType,t,r-this.y,t,r,this.yAxisTickColor,this.yAxisTickGuideSize,"butt"],t:"Axes"}),this.yAxisTickGuideShow&&this.toRender({p:["drawLine",this.yAxisTickGuideLineType,t,r,t,r+this.yAxisTickGuideLength,this.yAxisTickGuideColor,this.yAxisTickGuideSize,"butt"],t:"Axes"}),this.toRender({p:["drawText",this.yAxisHistogram.axis[h],t,r+this.yAxisTickGuideLength+this.axisTickMargin,this.axisTickFont,this.axisTickColor,"center","top"],t:"Axes"});this.set2DLayoutY(a,a+this.xAxisHistogramHeight,!0)}this.plotBox&&this.toRender({p:["drawShape","rectangle",n[0]+n[2]/2,n[1]+n[3]/2,n[2],n[3],!1,this.plotBoxColor,"open"],t:"Axes"})}this.toRender({p:["enableGradientTransparencyShadow"],t:"Axes"})},this.draw2DHistogramsData=function(){for(var t,e,i=["x","y"],s=0;s<i.length;s++)if(this[i[s]+"AxisHistogramShow"]){var a="x"==i[s]?this.xAxisHistogram:this.yAxisHistogram,r="x"==i[s]?this.marginLeft+this.offsetX+this.left:this.marginLeft+this.offsetX+this.left+this.x+2*this.margin,n="x"==i[s]?this.marginTop+this.offsetY+this.top-2*this.margin:this.marginTop+this.offsetY+this.top+this.y,o="x"==i[s]?Math.floor(a.size*this.xAxisUnit):Math.floor(a.size*this.yAxisUnit),h=this.histogramType.match(/staggered|stacked/)?Math.floor(o):Math.floor(o/a.len),l="x"==i[s]?[r,n-this.xAxisHistogramHeight,this.x+1,this.xAxisHistogramHeight+1]:[r,n-this.y,this.yAxisHistogramHeight+1,this.y+1],c=this[i[s]+"AxisIndices"];if(this.toRender({p:["setClipArea",l],t:"Decorations"}),this.showHistogramDensity)for(var d=0;d<c.length;d++){for(var p=a.density[d],g="count"==this.histogramStat?a.cols[d]/p.maxY:1,u=this.addColorTransparency(this.colors[d%this.colors.length],.3,!0),m="x"==i[s]?this.xAxisHistogram.axisUnit:this.yAxisHistogram.axisUnit,f=[],y=[],x=0;x<p.xy.length;x++){var v=p.xy[x][0],b=p.xy[x][1]*g;"x"==i[s]?(f.push(r+(v-this.xAxisMin)*this.xAxisUnit),y.push(n-b*m)):(f.push(r+b*m),y.push(n-(v-this.yAxisMin)*this.yAxisUnit))}this.showFilledHistogramDensity?this.toRender({p:["drawShape","spline",f,y,!1,!1,this.addColorTransparency(u,this.histogramDensityFillTransparency,!0),u],i:["Density:"+i[s].toUpperCase()+":"+c[d]],t:"Decorations"}):this.toRender({p:["drawLine","spline",f,y,!1,!1,u,2,!1,!1,!1,!0],i:["Density:"+i[s].toUpperCase()+":"+c[d]],t:"Decorations"})}if(!this.hideHistogram)for(d=0;d<a.vars.length;d++){if("staggered"==this.histogramType){var A=[],w=[];for(x=0;x<a.len;x++)A.push(a.data[d][x+1]),w.push(x);w.sort((function(t,e){return A[e]-A[t]}))}for(x=0;x<a.len;x++){var C="staggered"==this.histogramType?w[x]:x,T="x"==i[s]?[i[s]+"AxisHistogram-"+d+"-"+(C+1)+"-"+x,"DensityHistogram:X:"+C]:[i[s]+"AxisHistogram-"+d+"-"+(C+1)+"-"+x,"DensityHistogram:Y:"+C],S=this.getFillColor(this.colors[C%this.colors.length],T),M=this.getOutlineColor(S,T),D=this.getPropertyValue(x,!1,"patternBy"),k=(g="density"==this.histogramStat?a.density[C].maxY/a.cols[C]:1,v=a.data[d][0],b=a.data[d][C+1]*g,this[i[s]+"AxisMin"]-a.min);b&&(h<8&&(M=S),"x"==i[s]?(t="staggered"==this.histogramType?Math.floor(r+(v-k)*this.xAxisUnit-o):Math.floor(r+(v-k)*this.xAxisUnit+h*C-o),e=b*this.xAxisHistogram.axisUnit,this.toRender({p:["drawShape","rectangle",t+(h-2.5)/2,n-e/2,h-2.5,e,S,M,D],i:T,t:"Decorations"})):(t=b*this.yAxisHistogram.axisUnit,e="staggered"==this.histogramType?Math.floor(n-(v-k)*this.yAxisUnit):Math.floor(n-(v-k)*this.yAxisUnit+h*C),this.toRender({p:["drawShape","rectangle",r+t/2,e+(h-2.5)/2,t,h-2.5,S,M,D],i:T,t:"Decorations"})))}}if(this.showHistogramMedian)for(d=0;d<c.length;d++){p=a.density[d],g="count"==this.histogramStat?a.cols[d]/p.maxY:1,u=this.addColorTransparency(this.colors[d%this.colors.length],.7,!0),m="x"==i[s]?this.xAxisHistogram.axisUnit:this.yAxisHistogram.axisUnit;if("x"==i[s]){v=r+(p.median[0]-this.xAxisMin)*this.xAxisUnit;var L=n,I=n-p.maxY*m*g,z=n-this.xAxisHistogramHeight;this.toRender({p:["drawLine",this.histogramMedianLineStyle,v,L,v,z,u,2,!1],i:["DensityMedian:X:"+c[d]],t:"Decorations"}),this.toRender({p:["drawText",this.formatNumber(p.median[0],this[i[s]+"AxisDecs"]),v,I],i:["DensityMedianValue:X:"+c[d]],t:"Decorations"})}else{b=n-(p.median[0]-this.yAxisMin)*this.yAxisUnit;var N=r,B=r+p.maxY*m*g,P=r+this.yAxisHistogramHeight;this.toRender({p:["drawLine",this.histogramMedianLineStyle,N,b,P,b,u,2,!1],i:["DensityMedian:Y:"+c[d]],t:"Decorations"}),this.toRender({p:["drawText",this.formatNumber(p.median[0],this[i[s]+"AxisDecs"]),B,b],i:["DensityMedianValue:Y:"+c[d]],t:"Decorations"})}}this.toRender({p:["resetClipArea"],t:"Decorations"})}},this.set2DprivateParams=function(){this.set2DFont()},this.resetRidgeBy=function(){this.ridgeBy?(this.hideHistogram=this.hideHistogramRidgeBy,this.showFilledHistogramDensity=this.showFilledHistogramDensityRidgeBy,this.showHistogramDensity=this.showHistogramDensityRidgeBy,this.isCreateHistogramRidge?this.factorRidgeBy||(this.removeHistogram(!0),this.createHistogram(!1,!0)):this.removeHistogram(!0)):(this.hideHistogramRidgeBy=this.hideHistogram,this.showFilledHistogramDensityRidgeBy=this.showFilledHistogramDensity,this.showHistogramDensityRidgeBy=this.showHistogramDensity,this.isCreateHistogram?(this.factorRidgeBy=this.isCreateHistogram.factor,this.isCreateHistogramRidge=!0):this.isCreateHistogramRidge=!1)},this.isValidKaplanMeier=function(){return"km"==this.scatterType},this.isValidQQ=function(){return"qq"==this.scatterType},this.isValidCDF=function(){return"cdf"==this.scatterType},this.checkRidgeEllipse=function(){this.ridgeBy&&this.meta.data.z&&this.meta.data.z[this.ridgeBy]&&"Numeric"==this.meta.data.z[this.ridgeBy].type&&(this.ridgeBy=!1,this.flashInfoSpan(100,100,"Not allowed to ridge by a numeric value",5e3)),this.ellipseBy&&this.meta.data.z&&this.meta.data.z[this.ellipseBy]&&"Numeric"==this.meta.data.z[this.ellipseBy].type&&(this.ellipseBy=!1,this.flashInfoSpan(100,100,"Not allowed to ellipse by a numeric value",5e3))},this.checkHistogram=function(){if(this.histogramData&&!this.isCreateHistogram){var t=this.histogramData;this.histogramData=!1,this.removeCorrelation(!0),this.desegregateVariablesSamples(!0),this.createHistogram(t,!0),this.initializeAxis()}else if(this.ridgeBy&&!this.isCreateHistogram)this.removeCorrelation(!0),this.desegregateVariablesSamples(!0),this.createHistogram(this.ridgeBy,!0),this.initializeAxis();else if(this.ridgeBy&&this.isCreateHistogram&&this.isCreateHistogram.factor!=this.ridgeBy){var e=this.ridgeBy;this.removeHistogram(!0,["ridgeBy"]),this.ridgeBy=e,this.checkHistogram()}else if(this.isCreateHistogram){var i=this.isCreateHistogram.transformed!=this.isTransformedData,s=this.segregateVariablesBy.length&&this.isCreateHistogram.factor!=this.segregateVariablesBy[0],a=this.isCreateHistogram.colorBy!=this.colorBy&&!this.histogramAsDotplot,r=this.isCreateHistogram.isAnnt;if(i||s||a){t=!s&&(a?this.colorBy:this.ridgeBy&&this.isCreateHistogram?this.ridgeBy:i?this.isCreateHistogram.factor:r||!1);var n=this.isTransformedData,o=this.colorBy,h=this.segregateVariablesBy,l=this.segregateSamplesBy,c=this.ridgeBy;this.removeHistogram(!0,["colorBy"]),this.isTransformedData=n,this.colorBy=o,this.segregateVariablesBy=h,this.segregateSamplesBy=l,this.ridgeBy=c,this.createHistogram(t||c,!0),this.initializeAxis()}this.densityPosition.match(/stacked|filled/)&&(this.showHistogramDensity=!0,this.showFilledHistogramDensity=!0,this.hideHistogram=!0,this.showHistogramDataPoints=!1,this.showHistogramQuantiles=!1,this.showHistogramMedian=!1)}},this.checkQQCDF=function(){"qq"==this.scatterType?this.setQQData():"cdf"==this.scatterType&&this.setCDFData()},this.checkContour=function(){this.isContour&&(this.xAxisIndices.length>1||this.yAxisIndices.length>1)&&(this.isContour=!1,alert("Contour not implemented for multiple data series in Scatter plots"))},this.checkScatterMatrix=function(){if(this.scatterPlotMatrix){this.histogramStat="count";var t=!(!this.data.z||!this.data.z.hasOwnProperty(this.scatterPlotMatrix))&&this.scatterPlotMatrix;this.scatterPlotMatrixType.match(/both|upper|lower/)?this.showScatterPlotMatrixLabels=!1:this.scatterPlotMatrixType.match(/correlation|all/)&&(this.showScatterPlotMatrixLabels="correlation"!=this.scatterPlotMatrixType,this.data.l.reg||this.createCorrelation(t),this.scatterPlotMatrixType.match(/Histogram|Density|all/)&&this.createHistogram(t))}},this.checkVisium=function(){if("visium"==this.scatterType){var t=this.xAxisRange,e=this.yAxisRange;this.dataPointSize=5*Math.max(this.x,this.y)/Math.max(t,e)*this.dataPointSizeScaleFactor}},this.validate2DPropertyDefaults=function(){this.checkRidgeEllipse(),this.checkHistogram(),this.checkSegregation(),this.checkScatterMatrix(),this.checkQQCDF(),this.checkContour()},this.draw2DHistograms=function(){this.layoutComb||this.isCreateHistogram||this.isValidQQ()||this.isValidCDF()||(this.draw2DHistogramsLayout(),this.draw2DHistogramsData())},this.draw2DXYPlot=function(){this.draw2DContour(),this.drawDecorationData(),this.draw2DDataPoints(),this.draw2DHistograms()},this.draw2DPlot=function(){this.xAxis&&this.yAxis&&this.validatePropertyValues(),this.set2DprivateParams(),this.set2DXYDimensions(),this.xAxis&&this.yAxis&&(this.drawPlotWindow(),"Fish"==this.graphType&&this.drawFishData(),this.set2DLayout(),"Fish"!=this.graphType&&(this.set2DHistograms(),this.draw2DXYPlot()),this.drawLegend(),this.drawTitle())},this.initializeScatter2D=function(){this.validate2DPropertyDefaults(),this.layoutValid&&(this.scatterPlotMatrix||this.isDOE||this.segregateVariablesBy.length>0||this.segregateSamplesBy.length>0)?this.drawLayoutCompartments(this.draw2DPlot):(this.scatterPlotMatrix||this.unsetScatterPlotMatrix(),this.draw2DPlot())},t||this.initializeScatter2D()},CanvasXpress.prototype.Scatter3D=function(t){this.set3DText=function(){this.setAxisFont(!1,this.x)},this.set3DXYDimensions=function(){var t=this.width-(this.marginLeft+this.marginRight),e=this.height-(this.marginTop+this.marginBottom);this.showLegend&&(this.setLegends(),!this.legendInside&&this.legend.layout.length>0&&((this.legendPosition.match(/right/i)||this.legendPosition.match(/left/i))&&(t-=this.legend.width),"bottom"==this.legendPosition&&(e-=this.legend.height)));var i=Math.min(t,e),s=0;t>e?(s=t-e,this.left=s/2,this.right=s/2,this.top=0,this.bottom=0,this.funcX=s/2,this.funcY=0):(s=e-t,this.left=0,this.right=0,this.top=s/2,this.bottom=s/2,this.funcX=0,this.funcY=s/2),this.x=i,this.y=i},this.draw3DLayout=function(t,e,i,s,a,r,n,o){var h,l,c,d,p,g=this.marginLeft+this.left+this.offsetX,u=this.marginTop+this.top+this.offsetY;if(this.show3DGrid){this.toRender({p:["disableGradientTransparencyShadow"],t:"Axes"});for(var m=0;m<t.length;m++)h=(p=this.get3DTransfrom(t[m],e[m],i[m]))[0]+g,l=p[1]+u,c=(p=this.get3DTransfrom(s[m],a[m],r[m]))[0]+g,d=p[1]+u,"dotted"==o?this.toRender({p:["drawLine","dottedLine",h,l,c,d,n[m],!1,"butt"],t:"Axes"}):this.toRender({p:["drawLine","line",h,l,c,d,n[m],!1,"butt"],t:"Axes"});this.toRender({p:["enableGradientTransparencyShadow"],t:"Axes"})}},this.draw3DBar=function(t,e,i,s,a){for(var r=this.marginLeft+this.left+this.offsetX,n=this.marginTop+this.top+this.offsetY,o=(this.x,this.y,.25*this.dataPointSize*this.dataPointSizeScaleFactor*this.widthFactor/this.xAxisUnit),h=.25*this.dataPointSize*this.dataPointSizeScaleFactor*this.widthFactor/this.zAxisUnit,l=this.yAxisMin<0?0:this.yAxisMin,c=[[[t-o,e,i-h],[t+o,e,i-h],[t+o,l,i-h],[t-o,l,i-h]],[[t+o,e,i-h],[t+o,e,i+h],[t+o,l,i+h],[t+o,l,i-h]],[[t-o,e,i+h],[t+o,e,i+h],[t+o,l,i+h],[t-o,l,i+h]],[[t-o,e,i-h],[t-o,e,i+h],[t-o,l,i+h],[t-o,l,i-h]],[[t-o,e,i-h],[t+o,e,i-h],[t+o,e,i+h],[t-o,e,i+h]]],d=[],p=[],g=[],u=0;u<c.length;u++){d[u]=[];for(var m=0;m<c[u].length;m++){var f=this.xAxisMin<0?0:this.xAxisMin,y=this.yAxisMin<0?0:this.yAxisMin,x=this.zAxisMin<0?0:this.zAxisMin,v=(c[u][m][0]-f)*this.xAxisUnit-this.xAxisOffset,b=this.yAxisOffset-(c[u][m][1]-y)*this.yAxisUnit,A=(c[u][m][2]-x)*this.zAxisUnit-this.zAxisOffset;d[u].push(this.get3DTransfrom(v,b,A))}g.push(u),p.push(this.euclidianDistance([(d[u][0][0]+d[u][2][0])/2,(d[u][0][1]+d[u][2][1])/2,(d[u][0][2]+d[u][2][2])/2],[this.zero3DPoint[0],this.zero3DPoint[1],-this.x]))}g.sort((function(t,e){return p[e]-p[t]}));for(var w=1;w<d.length;w++){u=g[w];var C=w<3?this.darkenLightenColor(s,15*-w):s,T=[],S=[];for(m=0;m<d[u].length;m++)T.push(d[u][m][0]+r),S.push(d[u][m][1]+n);this.toRender({p:["drawShape","polygon",T,S,!1,!1,C,this.getOutlineColor(C),"closed"],i:a,t:"Data",h:this.isHidden(a[0])})}},this.set3DXLayout=function(){var t,e,i,s,a,r,n,o,h=[],l=[],c=[],d=[],p=[],g=[],u=[],m=this.lenX/15,f=15*-m+m,y=this.xAxisTitle?this.xAxisTitle:this.is3DPlot&&0==this.xAxis.length?"Samples":this.xAxisIndex?this.data.y.smps[this.xAxisIndex]:this.xAxis[0],x=this.marginLeft+this.left+this.offsetX,v=this.marginTop+this.top+this.offsetY;if(this.show3DGrid){for(i=f,t=0,e=0;i<this.lenX;)(t+1)%3&&("continuous"==this.xAxisType&&(h[e]=i,l[e]=-this.lenY,c[e]=this.lenZ,d[e]=i,p[e]=this.lenY,g[e]=this.lenZ,u.push(this.xAxisTickColor),e++),h[e]=-this.lenX,l[e]=i*this.lenY/this.lenX,c[e]=this.lenZ,d[e]=this.lenX,p[e]=i*this.lenY/this.lenX,g[e]=this.lenZ,u.push(this.xAxisTickColor),e++),i+=m,t++;for(this.draw3DLayout(h,l,c,d,p,g,u,this.xAxisTickLineType),h=[],l=[],c=[],d=[],p=[],g=[],u=[],i=f,t=0,e=0,a=this.xAxisIncr;i<this.lenX;)(t+1)%3||("continuous"==this.xAxisType&&(h[e]=i,l[e]=-this.lenY,c[e]=this.lenZ,d[e]=i,p[e]=this.lenY,g[e]=this.lenZ,u.push(this.foreground),e++),h[e]=-this.lenX,l[e]=i*this.lenY/this.lenX,c[e]=this.lenZ,d[e]=this.lenX,p[e]=i*this.lenY/this.lenX,g[e]=this.lenZ,u.push(this.foreground),n=(s=this.get3DTransfrom(i,this.lenY,-this.lenZ))[0]+x,o=s[1]+v,r=this.xAxisTime?this.dateFormat(new Date(this.xAxisMin+a),this.timeFormat):this.formatAxisValue(this.xAxisMin+a,"xAxis"),a+=this.xAxisIncr,this.xAxisShow&&"continuous"==this.xAxisType&&this.toRender({p:["drawText",r,n,o+5,this.axisTickFont,this.axisTickColor,"right",!1,-Math.PI/2],t:"Axes"}),e++),i+=m,t++;this.draw3DLayout(h,l,c,d,p,g,u,this.xAxisTickLineType)}this.xAxisShow&&!this.is3DPlot&&this.show3DGrid&&this.draw3DAxisTitle(f-2*m,this.lenX+m,this.lenY+4*m,this.lenY+4*m,-this.lenZ-4*m,-this.lenZ-4*m,y,"x"),h=[-this.lenX,-this.lenX,this.lenX,-this.lenX],l=[-this.lenY,-this.lenY,-this.lenY,this.lenY],c=[this.lenZ,this.lenZ,this.lenZ,this.lenZ],d=[-this.lenX,this.lenX,this.lenX,this.lenX],p=[this.lenY,-this.lenY,this.lenY,this.lenY],g=[this.lenZ,this.lenZ,this.lenZ,this.lenZ],u=[this.foreground,this.foreground,this.foreground,this.foreground],this.draw3DLayout(h,l,c,d,p,g,u,this.xAxisTickLineType)},this.set3DYLayout=function(){var t,e,i,s,a,r,n,o,h=[],l=[],c=[],d=[],p=[],g=[],u=[],m=this.lenY/15,f=15*-m+m,y=this.yAxisTitle?this.yAxisTitle:this.is3DPlot&&0==this.yAxis.length?"Value":this.yAxisIndex?this.data.y.smps[this.yAxisIndex]:this.yAxis[0],x=this.marginLeft+this.left+this.offsetX,v=this.marginTop+this.top+this.offsetY;if(this.show3DGrid){for(i=f,t=0,e=0;i<this.lenY;)(t+1)%3&&("continuous"==this.zAxisType&&(h[e]=-this.lenX,l[e]=-this.lenY,c[e]=i*this.lenZ/this.lenY,d[e]=-this.lenX,p[e]=this.lenY,g[e]=i*this.lenZ/this.lenY,u.push(this.yAxisTickColor),e++),h[e]=-this.lenX,l[e]=i,c[e]=-this.lenZ,d[e]=-this.lenX,p[e]=i,g[e]=this.lenZ,u.push(this.yAxisTickColor),e++),i+=m,t++;for(this.draw3DLayout(h,l,c,d,p,g,u,this.yAxisTickLineType),h=[],l=[],c=[],d=[],p=[],g=[],u=[],i=f,t=0,e=0,a=9*this.yAxisIncr;i<this.lenY;)(t+1)%3||("continuous"==this.zAxisType&&(h[e]=-this.lenX,l[e]=-this.lenY,c[e]=i*this.lenZ/this.lenY,d[e]=-this.lenX,p[e]=this.lenY,g[e]=i*this.lenZ/this.lenY,u.push(this.foreground),e++),h[e]=-this.lenX,l[e]=i,c[e]=-this.lenZ,d[e]=-this.lenX,p[e]=i,g[e]=this.lenZ,u.push(this.foreground),n=(s=this.get3DTransfrom(-this.lenX,i,-this.lenZ))[0]+x,o=s[1]+v,r=this.formatAxisValue(this.yAxisMin+a,"yAxis"),a-=this.yAxisIncr,this.yAxisShow&&(this.yRotate>=45&&this.xRotate>=45?this.toRender({p:["drawText",r,n,o+5,this.axisTickFont,this.axisTickColor,"right",!1,-Math.PI/2],t:"Axes2"}):this.toRender({p:["drawText",r,n-5,o,this.axisTickFont,this.axisTickColor,"right"],t:"Axes2"})),e++),i+=m,t++;this.draw3DLayout(h,l,c,d,p,g,u,this.yAxisTickLineType)}this.yAxisShow&&this.show3DGrid&&this.draw3DAxisTitle(-this.lenX-4*m,-this.lenX-4*m,f-2*m,this.lenY+m,-this.lenZ-4*m,-this.lenZ-4*m,y,"y"),h=[-this.lenX,-this.lenX,-this.lenX,-this.lenX],l=[-this.lenY,-this.lenY,-this.lenY,this.lenY],c=[-this.lenZ,this.lenZ,this.lenZ,this.lenZ],d=[-this.lenX,-this.lenX,-this.lenX,-this.lenX],p=[this.lenY,-this.lenY,this.lenY,this.lenY],g=[-this.lenZ,-this.lenZ,this.lenZ,-this.lenZ],u=[this.foreground,this.foreground,this.foreground,this.foreground],this.draw3DLayout(h,l,c,d,p,g,u,this.yAxisTickLineType)},this.set3DZLayout=function(){var t,e,i,s,a,r,n,o,h,l,c,d,p,g,u,m=this,f=[],y=[],x=[],v=[],b=[],A=[],w=[],C=this.zAxisTitle?this.zAxisTitle:this.is3DPlot&&0==this.zAxis.length?"Variables":this.zAxisIndex?this.data.y.smps[this.zAxisIndex]:this.zAxis[0],T=this.marginLeft+this.left+this.offsetX,S=this.marginTop+this.top+this.offsetY,M=function(t){var e=t/m.varLabelInterval;if(parseInt(e)==parseFloat(e)){var s=m.get3DTransfrom(m.lenX,m.lenY,i-l/2),a=s[0]+T,r=s[1]+S,n=0==m.zAxis.length?m.data.y.vars[m.varIndices[t]]:p[t];m.xRotate>=45?m.yRotate>=45?m.toRender({p:["drawText",n,a+5,r,m.axisTickFont,m.axisTickColor,"left"],t:"Axes3"}):m.toRender({p:["drawText",n,a,r+5,m.axisTickFont,m.axisTickColor,"right",!1,-Math.PI/2],t:"Axes3"}):m.toRender({p:["drawText",n,a+5,r,m.axisTickFont,m.axisTickColor,"left"],t:"Axes3"})}},D=function(t,e){var i=t/m.smpLabelInterval;if(parseInt(i)==parseFloat(i)){var s=m.get3DTransfrom(e*m.lenX/m.lenZ-c/2*m.x3DRatio,m.lenY,-m.lenZ),a=s[0]+T,r=s[1]+S,n=0==m.xAxis.length?m.isGroupedData&&"dot"==m.scatterType?m.data.w.smps[m.grpIndices[t]]:m.data.y.smps[m.smpIndices[t]]:d[t];m.toRender({p:["drawText",n,a,r+5,m.axisTickFont,m.axisTickColor,"right",!1,-Math.PI/2],t:"Axes3"})}};if(this.is3DPlot?(this.zAxis.length>0?"continuous"==this.zAxisType?g=15*-(l=this.lenZ/15)+l:(p=this.getVariableLevelsByAnnotation(this.zAxis[0]),l=this.lenZ/(.5*p.length),g=.5*p.length*-l+l):(l=this.lenZ/(.5*this.varIndices.length),g=.5*this.varIndices.length*-l+l),this.xAxis.length>0?"continuous"==this.xAxisType?u=15*-(c=this.lenX/15)+c:(d=this.getVariableLevelsByAnnotation(this.xAxis[0]),c=this.lenX/(.5*d.length),u=.5*d.length*-c+c):this.isGroupedData&&"dot"==this.scatterType?(c=this.lenZ/(.5*this.grpIndices.length),u=.5*this.grpIndices.length*-c+c):(c=this.lenZ/(.5*this.smpIndices.length),u=.5*this.smpIndices.length*-c+c)):(l=this.lenZ/15,c=!1,g=15*-l+l,u=!1),this.show3DGrid){if("continuous"==this.zAxisType){for(f=[],y=[],x=[],v=[],b=[],A=[],w=[],i=g,t=0,e=0;i<this.lenZ;)(t+1)%3&&(f[e]=-this.lenX,y[e]=this.lenY,x[e]=i,v[e]=this.lenX,b[e]=this.lenY,A[e]=i,w.push(this.zAxisTickColor),e++),i+=l,t++;this.draw3DLayout(f,y,x,v,b,A,w,this.zAxisTickLineType)}if("continuous"==this.xAxisType){for(f=[],y=[],x=[],v=[],b=[],A=[],w=[],i=u||g,t=0,e=0;i<this.lenZ;)(t+1)%3&&(f[e]=i*this.lenX/this.lenZ,y[e]=this.lenY,x[e]=-this.lenZ,v[e]=i*this.lenX/this.lenZ,b[e]=this.lenY,A[e]=this.lenZ,w.push(this.zAxisTickColor),e++),i+=c||l,t++;this.draw3DLayout(f,y,x,v,b,A,w,this.zAxisTickLineType)}if("continuous"==this.zAxisType){for(f=[],y=[],x=[],v=[],b=[],A=[],w=[],i=g,t=0,e=0,r=this.zAxisIncr;i<this.lenZ;)(t+1)%3||(f[e]=-this.lenX,y[e]=this.lenY,x[e]=i,v[e]=this.lenX,b[e]=this.lenY,A[e]=i,w.push(this.foreground),e++),i+=l,t++;this.draw3DLayout(f,y,x,v,b,A,w,this.zAxisTickLineType)}if("continuous"==this.xAxisType||"continuous"==this.zAxisType){for(f=[],y=[],x=[],v=[],b=[],A=[],w=[],i="continuous"==this.xAxisType&&u||g,t=0,e=0,r=this.zAxisIncr;i<this.lenZ;)(t+1)%3||(f[e]=i*this.lenX/this.lenZ,y[e]=this.lenY,x[e]=-this.lenZ,v[e]=i*this.lenX/this.lenZ,b[e]=this.lenY,A[e]=this.lenZ,w.push(this.foreground),e++,o=(a=this.get3DTransfrom(this.lenX,this.lenY,i))[0]+T,h=a[1]+S,n=this.zAxisTime?this.dateFormat(new Date(this.zAxisMin+r),this.timeFormat):this.formatAxisValue(this.zAxisMin+r,"zAxis"),r+=this.zAxisIncr,this.zAxisShow&&"continuous"==this.zAxisType&&(this.xRotate>=45?this.yRotate>=45?this.toRender({p:["drawText",n,o+5,h,this.axisTickFont,this.axisTickColor,"left"],t:"Axes3"}):this.toRender({p:["drawText",n,o,h+5,this.axisTickFont,this.axisTickColor,"right",!1,-Math.PI/2],t:"Axes3"}):this.toRender({p:["drawText",n,o+5,h,this.axisTickFont,this.axisTickColor,"left"],t:"Axes3"}))),"continuous"==this.xAxisType?i+=c||l:i+=l,t++;"continuous"==this.xAxisType&&this.draw3DLayout(f,y,x,v,b,A,w,this.zAxisTickLineType)}if("categorical"==this.zAxisType){for(i=g,t=0,e=0;i<this.lenZ;)f[e]=-this.lenX,y[e]=this.lenY,x[e]=i,v[e]=this.lenX,b[e]=this.lenY,A[e]=i,w.push(this.zAxisTickColor),M(t),e++,t++,i+=l;this.draw3DLayout(f,y,x,v,b,A,w,this.zAxisTickLineType),M(t)}if("categorical"==this.xAxisType){for(t=0,s=u;s<this.lenZ;)f[e]=s*this.lenX/this.lenZ,y[e]=this.lenY,x[e]=-this.lenZ,v[e]=s*this.lenX/this.lenZ,b[e]=this.lenY,A[e]=this.lenZ,w.push(this.zAxisTickColor),D(t,s),e++,t++,s+=c;this.draw3DLayout(f,y,x,v,b,A,w,this.zAxisTickLineType),D(t,s)}}this.zAxisShow&&!this.is3DPlot&&this.show3DGrid&&this.draw3DAxisTitle(this.lenX+6*l,this.lenX+6*l,this.lenY+6*l,this.lenY+6*l,g-2*l,this.lenZ+l,C,"z"),f=[-this.lenX,-this.lenX,this.lenX,-this.lenX],y=[this.lenY,this.lenY,this.lenY,this.lenY],x=[-this.lenZ,this.lenZ,-this.lenZ,-this.lenZ],v=[-this.lenX,this.lenX,this.lenX,this.lenX],b=[this.lenY,this.lenY,this.lenY,this.lenY],A=[this.lenZ,this.lenZ,this.lenZ,-this.lenZ],w=[this.foreground,this.foreground,this.foreground,this.foreground],this.draw3DLayout(f,y,x,v,b,A,w,this.zAxisTickLineType)},this.draw3DAxisTitle=function(t,e,i,s,a,r,n,o){var h=this.measureText(n),l=h/2,c=n.split(""),d=(t+e)/2,p=(i+s)/2,g=(a+r)/2,u=this.marginLeft+this.left+this.offsetX,m=this.marginTop+this.top+this.offsetY,f=this.xRotate>=45||this.yRotate>=45?4:0;if((this.xRotate>=45||this.yRotate>=45)&&(l=(h+=4*c.length)/2),"x"==o){d-=l;for(var y=0;y<c.length;y++){var x=this.get3DTransfrom(d,p,g);this.toRender({p:["drawText",c[y],u+x[0],m+x[1],this.axisTitleFont,this.axisTitleColor,"left","top"],t:"AxesTitle"}),d+=this.measureText(c[y])+f}}else if("y"==o){p+=l;for(y=0;y<c.length;y++){x=this.get3DTransfrom(d,p,g);this.toRender({p:["drawText",c[y],u+x[0],m+x[1],this.axisTitleFont,this.axisTitleColor,"left","bottom",-Math.PI/2],t:"AxesTitle"}),p-=this.measureText(c[y])+f}}else if("z"==o){g-=l;for(y=0;y<c.length;y++){x=this.get3DTransfrom(d,p,g);this.toRender({p:["drawText",c[y],u+x[0],m+x[1],this.axisTitleFont,this.axisTitleColor,"left","bottom"],t:"AxesTitle"}),g+=this.measureText(c[y])+f}}},this.set3DLayout=function(t){t&&(this.layoutSet={x:!1,y:!1,z:!1});for(var e=0;e<this.layoutOrder.ord.length;e++){var i=this.layoutOrder.ord[e],s=t&&this.layoutOrder[i],a=!t&&!this.layoutOrder[i],r=t&&this.layoutOrder[i+"1"];this.layoutSet[i]||(s||a||!s&&!a&&r)&&(this["set3D"+i.toUpperCase()+"Layout"](),this.layoutSet[i]=!0)}t||delete this.layoutSet},this.set3DAxes=function(){var t=["x","y","z"];if(this.setMin=null,this.setMax=null,this.is3DPlot){if(0==this.yAxis.length){if(this.xAxisTitle){var e=this.yAxisTitle;this.yAxisTitle=this.xAxisTitle,this.xAxisTitle=e}this.yAxisMin=this.xAxisMin,this.yAxisMax=this.xAxisMax,this.yAxisIncr=this.getAxisIncrements(this.yAxisMin,this.yAxisMax,10,this.yAxisExact),this.yAxisDecs=this.getNumberDecimals(this.yAxisIncr),this.yAxisRange=this.xAxisRange}else{var i=this.smpIndices;this.yAxisIndex=this.getSampleIndices([this.yAxis[0]]),this.setSamplesVisible([this.yAxisIndex]),this.setRangeData(),this.yAxisMin=null!=this.setMinY?this.setMinY:this.minData,this.yAxisMax=null!=this.setMaxY?this.setMaxY:this.maxData,this.yAxisIncr=this.getAxisIncrements(this.yAxisMin,this.yAxisMax,10,this.yAxisExact),this.yAxisDecs=this.getNumberDecimals(this.yAxisIncr),this.yAxisExact||(this.yAxisMin=this.getAxisMin(this.yAxisMin,this.yAxisIncr),this.yAxisMax=this.yAxisMin+10*this.yAxisIncr),this.yAxisRange=this.yAxisMax-this.yAxisMin,this.yAxisUnit=2*this.lenY/this.yAxisRange,this.yAxisOffset=Math.min(this.lenY,(this.yAxisMin+this.yAxisRange/2)*this.yAxisUnit),this.AxisType="continuous",this.setSamplesVisible(i)}if(this.yAxisUnit=2*this.lenY/(10*this.yAxisIncr),this.yAxisOffset=Math.min(this.lenY,(this.yAxisMin+10*this.yAxisIncr/2)*this.yAxisUnit),this.yAxisType="continuous",this.xAxis.length>0){if(this.data.z&&this.data.z.hasOwnProperty(this.xAxis[0])&&!this.isNumeric(this.data.z[this.xAxis[0]])){var s=this.getVariableLevelsByAnnotation(this.xAxis[0]);this.xAxisMin=0,this.xAxisMax=10,this.xAxisIncr=10/s.length,this.xAxisDecs=0,this.xAxisRange=this.xAxisMax-this.xAxisMin,this.xAxisUnit=2*this.lenX/this.xAxisRange,this.xAxisOffset=Math.min(this.lenX,(this.xAxisMin+this.xAxisRange/2)*this.xAxisUnit),this.xAxisType="categorical"}else if(this.getSampleIndices(this.xAxis[0])>=0){i=this.smpIndices;this.xAxisIndex=this.getSampleIndices([this.xAxis[0]]),this.setSamplesVisible([this.xAxisIndex]),this.setRangeData(),this.xAxisMin=null!=this.setMinX?this.setMinX:this.minData,this.xAxisMax=null!=this.setMaxX?this.setMaxX:this.maxData,this.xAxisIncr=this.getAxisIncrements(this.xAxisMin,this.xAxisMax,10,this.xAxisExact),this.xAxisDecs=this.getNumberDecimals(this.xAxisIncr),this.xAxisExact||(this.xAxisMin=this.getAxisMin(this.xAxisMin,this.xAxisIncr),this.xAxisMax=this.xAxisMin+10*this.xAxisIncr),this.xAxisRange=this.xAxisMax-this.xAxisMin,this.xAxisUnit=2*this.lenX/this.xAxisRange,this.xAxisOffset=Math.min(this.lenX,(this.xAxisMin+this.xAxisRange/2)*this.xAxisUnit),this.xAxisType="continuous",this.setSamplesVisible(i)}}else this.xAxisMin=0,this.xAxisMax=10,this.xAxisIncr=this.isGroupedData?10/this.grpIndices.length:10/this.smpIndices.length,this.xAxisDecs=0,this.xAxisRange=this.xAxisMax-this.xAxisMin,this.xAxisUnit=2*this.lenX/this.xAxisRange,this.xAxisOffset=Math.min(this.lenX,(this.xAxisMin+this.xAxisRange/2)*this.xAxisUnit),this.xAxisType="categorical";if(this.zAxis.length>0){if(this.data.z&&this.data.z.hasOwnProperty(this.zAxis[0])&&!this.isNumeric(this.data.z[this.zAxis[0]])){s=this.getVariableLevelsByAnnotation(this.zAxis[0]);this.zAxisMin=0,this.zAxisMax=10,this.zAxisIncr=10/s.length,this.zAxisDecs=0,this.zAxisRange=this.zAxisMax-this.zAxisMin,this.zAxisUnit=2*this.lenZ/this.zAxisRange,this.zAxisOffset=Math.min(this.lenZ,(this.zAxisMin+this.zAxisRange/2)*this.zAxisUnit),this.zAxisType="categorical"}else if(this.getSampleIndices(this.zAxis[0])>=0){i=this.smpIndices;this.zAxisIndex=this.getSampleIndices([this.zAxis[0]]),this.setSamplesVisible([this.zAxisIndex]),this.setRangeData(),this.zAxisMin=null!=this.setMinZ?this.setMinZ:this.minData,this.zAxisMax=null!=this.setMaxZ?this.setMaxZ:this.maxData,this.zAxisIncr=this.getAxisIncrements(this.zAxisMin,this.zAxisMax,10,this.zAxisExact),this.zAxisDecs=this.getNumberDecimals(this.zAxisIncr),this.zAxisExact||(this.zAxisMin=this.getAxisMin(this.zAxisMin,this.zAxisIncr),this.zAxisMax=this.zAxisMin+10*this.zAxisIncr),this.zAxisRange=this.zAxisMax-this.zAxisMin,this.zAxisUnit=2*this.lenZ/this.zAxisRange,this.zAxisOffset=Math.min(this.lenZ,(this.zAxisMin+this.zAxisRange/2)*this.zAxisUnit),this.zAxisType="continuous",this.setSamplesVisible(i)}}else this.zAxisMin=0,this.zAxisMax=10,this.zAxisIncr=10/this.varIndices.length,this.zAxisDecs=0,this.zAxisRange=this.zAxisMax-this.zAxisMin,this.zAxisUnit=2*this.lenZ/this.zAxisRange,this.zAxisOffset=Math.min(this.lenZ,(this.zAxisMin+this.zAxisRange/2)*this.zAxisUnit),this.zAxisType="categorical"}else for(var a=0;a<t.length;a++){i=this.smpIndices;var r=t[a].toUpperCase();this[t[a]+"AxisIndex"]=this.getSampleIndices(this[t[a]+"Axis"])[0],this.setSamplesVisible([this[t[a]+"AxisIndex"]]),this.setRangeData(),this.minData==this.maxData&&(this.maxData+=.5),this[t[a]+"AxisMin"]=null!=this["setMin"+r]?this["setMin"+r]:this.minData,this[t[a]+"AxisMax"]=null!=this["setMax"+r]?this["setMax"+r]:this.maxData,this[t[a]+"AxisIncr"]=this.getAxisIncrements(this[t[a]+"AxisMin"],this[t[a]+"AxisMax"],10,this[t[a]+"AxisExact"]),this[t[a]+"AxisDecs"]=this.getNumberDecimals(this[t[a]+"AxisIncr"]),this[t[a]+"AxisExact"]||(this[t[a]+"AxisMin"]=this.getAxisMin(this[t[a]+"AxisMin"],this[t[a]+"AxisIncr"]),this[t[a]+"AxisMax"]=this[t[a]+"AxisMin"]+10*this[t[a]+"AxisIncr"]),this[t[a]+"AxisRange"]=this[t[a]+"AxisMax"]-this[t[a]+"AxisMin"],this[t[a]+"AxisUnit"]=2*this["len"+r]/this[t[a]+"AxisRange"],this[t[a]+"AxisOffset"]=Math.min(this["len"+r],(this[t[a]+"AxisMin"]+this[t[a]+"AxisRange"]/2)*this[t[a]+"AxisUnit"]),this[t[a]+"AxisType"]="continuous",this[t[a]+"AxisTime"]=this.isGraphTime==t[a],this.setSamplesVisible(i)}this.set3DCenter()},this.set3DCenter=function(){var t=this.xAxisMin<0?0:this.xAxisMin,e=this.yAxisMin<0?0:this.yAxisMin,i=this.zAxisMin<0?0:this.zAxisMin,s=((this.xAxisMin+this.xAxisMax)/2-t)*this.xAxisUnit-this.xAxisOffset,a=this.yAxisOffset-((this.yAxisMin+this.yAxisMax)/2-e)*this.yAxisUnit,r=((this.zAxisMin+this.zAxisMax)/2-i)*this.zAxisUnit-this.zAxisOffset;this.zero3DPoint=this.get3DTransfrom(s,a,r);var n=this.get3DTransfrom((this.xAxisMin-t)*this.xAxisUnit-this.xAxisOffset,a,r),o=this.get3DTransfrom((this.xAxisMax-t)*this.xAxisUnit-this.xAxisOffset,a,r),h=this.get3DTransfrom(s,this.yAxisOffset-(this.yAxisMin-e)*this.yAxisUnit,r),l=this.get3DTransfrom(s,this.yAxisOffset-(this.yAxisMax-e)*this.yAxisUnit,r),c=this.get3DTransfrom(s,a,(this.zAxisMax-i)*this.zAxisUnit-this.zAxisOffset),d=this.get3DTransfrom(s,a,(this.zAxisMin-i)*this.zAxisUnit-this.zAxisOffset),p=this.euclidianDistance([n[0],n[1],n[2]],[this.zero3DPoint[0],this.zero3DPoint[1],-this.x]),g=this.euclidianDistance([o[0],o[1],o[2]],[this.zero3DPoint[0],this.zero3DPoint[1],-this.x]),u=this.euclidianDistance([h[0],h[1],h[2]],[this.zero3DPoint[0],this.zero3DPoint[1],-this.x]),m=this.euclidianDistance([l[0],l[1],l[2]],[this.zero3DPoint[0],this.zero3DPoint[1],-this.x]),f=this.euclidianDistance([c[0],c[1],c[2]],[this.zero3DPoint[0],this.zero3DPoint[1],-this.x]),y=this.euclidianDistance([d[0],d[1],d[2]],[this.zero3DPoint[0],this.zero3DPoint[1],-this.x]),x=this.euclidianDistance([this.zero3DPoint[0],this.zero3DPoint[1],this.zero3DPoint[2]],[this.zero3DPoint[0],this.zero3DPoint[1],-this.x]),v=[Math.min(p,g),Math.min(u,m),Math.min(f,y)],b={0:"x",1:"y",2:"z"},A=[0,1,2];A=A.sort((function(t,e){return v[t]-v[e]}));for(var w=[],C=0;C<A.length;C++)w.push(b[A[C]]);this.layoutOrder={x0:f,x1:y,y0:p,y1:g,z0:u,z1:m,md:x,x:f>=y,y:p>=g,z:u>=m,x1:Math.min(f,y)>x,y1:Math.min(p,g)>x,z1:Math.min(u,m)>x,ord:w}},this.is3DVisibleDataPoint=function(t,e,i){return t>=this.xAxisMin&&t<=this.xAxisMax&&e>=this.yAxisMin&&e<=this.yAxisMax&&i>=this.zAxisMin&&i<=this.zAxisMax},this.draw3DDataPoints=function(){var t=this.marginLeft+this.left+this.offsetX,e=this.marginTop+this.top+this.offsetY,i=(this.xAxisIndex,this.yAxisIndex,this.zAxisIndex,{data:{},ellp:{},sphr:{}}),s=[],a=[],r=[],n=[],o=[],h=[],l=[],c=[];if(this.connectByData={},this.is3DPlot)if(this.xAxis.length>0&&this.yAxis.length>0&&this.zAxis.length>0){var d,p,g,u={},m={},f=this.getSampleIndices(this.yAxis[0]);if(this.data.z&&this.data.z.hasOwnProperty(this.xAxis[0])&&!this.isNumeric(this.data.z[this.xAxis[0]])){d=this.getVariableLevelsByAnnotation(this.xAxis[0]);for(var y=0;y<d.length;y++)u[d[y]]=y;p=!1}else p=this.getSampleIndices(this.xAxis[0]);if(this.data.z&&this.data.z.hasOwnProperty(this.zAxis[0])&&!this.isNumeric(this.data.z[this.zAxis[0]])){d=this.getVariableLevelsByAnnotation(this.zAxis[0]);for(y=0;y<d.length;y++)m[d[y]]=y;g=!1}else g=this.getSampleIndices(this.zAxis[0]);L=0;for(y=0;y<this.varIndices.length;y++){var x=this.varIndices[y],v=!1===p?u[this.data.z[this.xAxis[0]][x]]*this.xAxisIncr+this.xAxisIncr/2:this.getDataAtPos(x,p),b=this.getDataAtPos(x,f),A=!1===g?m[this.data.z[this.zAxis[0]][x]]*this.zAxisIncr+this.zAxisIncr/2:this.getDataAtPos(x,g),w=this.xAxisMin<0?0:this.xAxisMin,C=this.yAxisMin<0?0:this.yAxisMin,T=this.zAxisMin<0?0:this.zAxisMin,S=(v-w)*this.xAxisUnit-this.xAxisOffset,M=this.yAxisOffset-(b-C)*this.yAxisUnit,D=(A-T)*this.zAxisUnit-this.zAxisOffset;l.push(!0),s.push([v,b,A]);var k=this.get3DTransfrom(S,M,D);a.push(k),r.push(k[2]),h.push(this.euclidianDistance([a[L][0],a[L][1],a[L][2]],[this.zero3DPoint[0],this.zero3DPoint[1],-this.x])),c.push([x,f]),o.push(L++)}}else if(this.isGroupedData&&"dot"==this.scatterType){this.isGroupedData=!1;var L=0;for(y=0;y<this.varIndices.length;y++){x=this.varIndices[y];for(var I=0;I<this.grpIndices.length;I++)for(var z=0;z<this.data.w.grps[this.grpIndices[I]].length;z++){var N=this.data.w.grps[this.grpIndices[I]][z];v=I*this.xAxisIncr+this.xAxisIncr/2,b=this.getDataAtPos(x,N),A=y*this.zAxisIncr+this.zAxisIncr/2,w=0,C=this.yAxisMin<0?0:this.yAxisMin,T=0,S=(v-w)*this.xAxisUnit-this.xAxisOffset,M=this.yAxisOffset-(b-C)*this.yAxisUnit,D=(A-T)*this.zAxisUnit-this.zAxisOffset;l.push(!0),s.push([v,b,A]);k=this.get3DTransfrom(S,M,D);a.push(k),r.push(k[2]),h.push(this.euclidianDistance([a[L][0],a[L][1],a[L][2]],[this.zero3DPoint[0],this.zero3DPoint[1],-this.x])),c.push([x,this.grpIndices[I]]),o.push(L++)}}this.isGroupedData=!0}else for(L=0,y=0;y<this.varIndices.length;y++)for(x=this.varIndices[y],I=0;I<this.smpIndices.length;I++){N=this.smpIndices[I],v=I*this.xAxisIncr+this.xAxisIncr/2,b=this.getDataAtPos(x,N),A=y*this.zAxisIncr+this.zAxisIncr/2,w=0,C=this.yAxisMin<0?0:this.yAxisMin,T=0,S=(v-w)*this.xAxisUnit-this.xAxisOffset,M=this.scatterType&&this.scatterType.match(/bar/)?0:this.yAxisOffset-(b-C)*this.yAxisUnit,D=(A-T)*this.zAxisUnit-this.zAxisOffset;l.push(!0),s.push([v,b,A]);k=this.get3DTransfrom(S,M,D);a.push(k),r.push(k[2]),h.push(this.euclidianDistance([a[L][0],a[L][1],a[L][2]],[this.zero3DPoint[0],this.zero3DPoint[1],-this.x])),c.push([x,N]),o.push(L++)}else{for(y=0;y<this.varIndices.length;y++){x=this.varIndices[y],v=this.getDataAtPos(x,this.xAxisIndex),b=this.getDataAtPos(x,this.yAxisIndex),A=this.getDataAtPos(x,this.zAxisIndex),w=this.xAxisMin<0?0:this.xAxisMin,C=this.yAxisMin<0?0:this.yAxisMin,T=this.zAxisMin<0?0:this.zAxisMin,S=(v-w)*this.xAxisUnit-this.xAxisOffset,M=this.scatterType&&this.scatterType.match(/bar/)?0:this.yAxisOffset-(b-C)*this.yAxisUnit,D=(A-T)*this.zAxisUnit-this.zAxisOffset;var B=this.ellipseBy&&this.data.z&&this.data.z.hasOwnProperty(this.ellipseBy)?this.getMetadataValue(x,"z",this.ellipseBy):!(!this.ellipseBy||"variable"!=this.ellipseBy)&&"variable";l.push(this.is3DVisibleDataPoint(v,b,A)),s.push([v,b,A]);k=this.get3DTransfrom(S,M,D);a.push(k),r.push(k[2]),"function"!=this.scatterType&&(o.push(y),h.push(this.euclidianDistance([a[y][0],a[y][1],a[y][2]],[this.zero3DPoint[0],this.zero3DPoint[1],-this.x]))),this.ellipseBy&&B&&(i.data.hasOwnProperty(B)||(i.data[B]=[[],[],[]]),i.data[B][0].push(v),i.data[B][1].push(b),i.data[B][2].push(A))}if(this.ellipseBy){!!(this.ellipseBy&&this.data.z&&this.data.z.hasOwnProperty(this.ellipseBy))&&this.meta.data.z[this.ellipseBy],y=this.varIndices.length;for(var B in i.data){i.ellp[B]=this.errorEllipse(i.data[B][0],i.data[B][1],i.data[B][2]);var P=i.ellp[B];if(P){i.sphr[B]=this.sphere(P.cx,P.cy,P.cz,P.rx[0],P.ry[0],P.rz[0],P.rot[0],P.rot[1],P.rot[2]);for(I=0;I<i.sphr[B].length;I++)S=(i.sphr[B][I][0]-w)*this.xAxisUnit-this.xAxisOffset,M=this.yAxisOffset-(i.sphr[B][I][1]-C)*this.yAxisUnit,D=(i.sphr[B][I][2]-T)*this.zAxisUnit-this.zAxisOffset,k=this.get3DTransfrom(S,M,D),a.push(k),r.push(k[2]),o.push(y+I),h.push(this.euclidianDistance([a[y+I][0],a[y+I][1],a[y+I][2]],[this.zero3DPoint[0],this.zero3DPoint[1],-this.x]));y+=i.sphr[B].length}}}}var R=this.range(r);if(this.showLoessFit)if(this.varIndices.length>18){v=this.getAxisDataBySample(this.xAxisIndex),b=this.getAxisDataBySample(this.yAxisIndex),A=this.getAxisDataBySample(this.zAxisIndex);var O=this.loess([A,b,v],[this.xAxisIndex,this.yAxisIndex,this.zAxisIndex]),X=[];for(w=this.xAxisMin<0?0:this.xAxisMin,C=this.yAxisMin<0?0:this.yAxisMin,T=this.zAxisMin,y=0;y<O.x.length;y++)for(I=0;I<O.y.length;I++){S=(O.x[y]-T)*this.zAxisUnit-this.zAxisOffset,M=this.yAxisOffset-(O.z[y][I]-C)*this.yAxisUnit,D=(O.y[I]-w)*this.xAxisUnit-this.xAxisOffset,k=this.get3DTransfrom(S,M,D);X.push(k)}var F=O.x.length,_=[],E=[],V=[];for(y=1;y<F;y++)for(I=0;I<F-1;I++){var H=y*F+I,G=(y-1)*F+I+1,q=y*F+I+1,j=[X[Z=(y-1)*F+I][0]+t,X[H][0]+t,X[q][0]+t,X[G][0]+t],U=[X[Z][1]+e,X[H][1]+e,X[q][1]+e,X[G][1]+e],Y=[X[Z][2],X[H][2],X[q][2],X[G][2]];_.push(x++),E.push(this.euclidianDistance([this.mean(j),this.mean(U),this.mean(Y)],[this.zero3DPoint[0],this.zero3DPoint[1],-this.x])),V.push([j,U])}_.sort((function(t,e){return E[e]-E[t]}));var W=this.addColorTransparency("black",.1,!0),$=this.addColorTransparency(this.confidenceIntervalColor,.3,!0);for(x=0;x<V.length;x++){(y=_[x])<V.length&&this.toRender({p:["drawShape","polygon",V[y][0],V[y][1],!1,!1,$,W,"closed"],t:"Decorations"})}}else this.showLoessFit=!1,alert("Minimum 18 variables to show Loess Fit");if(this.scatterType&&"function"==this.scatterType){F=Math.sqrt(a.length),x=0;var Q=[],K=!!this.colorBy&&this.meta.data.y.range[this.colorBy],J=!!this.colorBy&&this.getColorBrew(this.colorSpectrum,K.min,K.max,this.colorSpectrumZeroValue,this.colorSpectrumBreaks);for(y=1;y<F;y++)for(I=0;I<F-1;I++){H=y*F+I,G=(y-1)*F+I+1,q=y*F+I+1,j=[a[Z=(y-1)*F+I][0]+this.funcX,a[H][0]+this.funcX,a[q][0]+this.funcX,a[G][0]+this.funcX],U=[a[Z][1]+this.funcY,a[H][1]+this.funcY,a[q][1]+this.funcY,a[G][1]+this.funcY],Y=[a[Z][2],a[H][2],a[q][2],a[G][2]];var Z,tt=!!this.colorBy&&this.getColorForValue(J,this.mean([s[Z][1],s[H][1],s[q][1],s[G][1]]));o.push(x++),h.push(this.euclidianDistance([this.mean(j),this.mean(U),this.mean(Y)],[this.zero3DPoint[0],this.zero3DPoint[1],-this.x])),Q.push([j,U,tt])}o.sort((function(t,e){return h[e]-h[t]}));for(x=0;x<Q.length;x++){if(l[y=o[x]]){var et=[y,this.xAxisIndex,this.yAxisIndex,this.zAxisIndex];if(this.colorBy)this.toRender({p:["drawShape","polygon",Q[y][0],Q[y][1],!1,!1,Q[y][2],this.outline3DColor,"closed"],i:et,t:"Data",h:this.isHidden(et[0])});else{var it="rgba(0,0,0,0)"==this.outline3DColor?this.foreground:this.outline3DColor;this.toRender({p:["drawShape","polygon",Q[y][0],Q[y][1],!1,!1,!1,it,"open"],i:et,t:"Data",h:this.isHidden(et[0])})}}}}else{"Firefox"==CanvasXpress.system.browser?o=this.radixSort(o):o.sort((function(t,e){return h[e]-h[t]}));for(x=0;x<a.length;x++){y=o[x];if(this.ellipseBy&&y>=this.varIndices.length){var st=y+1,at=y+25,rt=(dt=y-this.varIndices.length)%25,nt=parseInt(dt/350),ot=350*nt+175,ht=ot-24,lt=["Property:"+this.ellipseBy+":"+this.meta.data.z[this.ellipseBy].levels[nt]+":z"],ct=this.isHidden(!1,!1,lt[0]);!rt&&y+1<a.length?this.toRender({p:["drawLine","line",t+a[y][0],e+a[y][1],t+a[y+1][0],e+a[y+1][1],this.colors[nt%this.colors.length]],i:lt,t:"Data",h:ct}):parseInt(dt/25)==parseInt((dt-1)/25)&&parseInt(dt/350)==parseInt((dt+1)/350)&&st<a.length&&(this.toRender({p:["drawLine","line",t+a[y][0],e+a[y][1],t+a[st][0],e+a[st][1],this.colors[nt%this.colors.length]],i:lt,t:"Data",h:ct}),parseInt(dt/350)==parseInt((dt+25)/350)&&at<a.length&&(dt<ht||dt>ot)&&this.toRender({p:["drawLine","line",t+a[y][0],e+a[y][1],t+a[at][0],e+a[at][1],this.colors[nt%this.colors.length]],i:lt,t:"Data",h:ct}))}else{var dt=this.is3DPlot?c[y][0]:y,pt=(et=this.is3DPlot?[c[y][0],c[y][1]]:[this.varIndices[y],this.xAxisIndex,this.yAxisIndex,this.zAxisIndex],this.getFillColor(this.colorBy?this.getPropertyValue(this.varIndices[dt],null,"colorBy"):this.is3DPlot?this.colors[dt%this.colors.length]:this.colors[0],et)),gt=a.length>this.scatterOutlineThreshold?pt:this.scatterType&&this.scatterType.match(/dot/)?this.getOutlineColor(this.foreground,et):this.getOutlineColor(pt,et),ut=this.getPropertyValue(this.varIndices[dt],null,"shapeBy"),mt=this.getPropertyValue(this.varIndices[dt],null,"sizeBy"),ft=(L=this.patternBy?this.getPropertyValue(this.varIndices[dt],null,"patternBy"):this.patterns[0],!(!this.scatterType||!this.scatterType.match(/image/i))&&this.images[y]);if(l[y])if(this.scatterType&&this.scatterType.match(/bar/))this.draw3DBar(s[y][0],s[y][1],s[y][2],pt,et);else if(this.scatterType&&this.scatterType.match(/dot/)){var yt=ft?"image":ut;v=t+a[y][0],b=e+a[y][1],A=Math.floor(this.percentile(R[0],R[1],a[y][2]));this.toRender({p:["drawShape",yt,v,b,mt,mt,pt,gt,L,!1,!1,!1,!1,!1,!1,ft],i:et,t:"Data",h:this.isHidden(et[0])}),this.drawSelectedLabel([et[1]],v,b)}else{yt=ft?"image":ut,v=t+a[y][0],b=e+a[y][1],A=Math.floor(this.percentile(R[0],R[1],a[y][2]));this.toRender({p:["drawShape",yt,v,b,mt,mt,pt,gt,L,!1,!1,!1,!1,!1,!1,ft],i:et,t:"Data",h:this.isHidden(et[0])}),this.drawSelectedLabel([this.varIndices[y]],v,b),this.scatterType&&this.scatterType.match(/line/)?n[y]=[a[y][0],a[y][1]]:this.connectBy&&(this.connectByData[this.data.z[this.connectBy][y]]||(this.connectByData[this.data.z[this.connectBy][y]]=[]),this.connectByData[this.data.z[this.connectBy][y]].push([a[y][0],a[y][1]]))}}}if(this.scatterType&&this.scatterType.match(/line/)&&n.length>0){for(y=0;y<n.length-1;y++)if(l[y]&&l[y+1]){var xt=t+n[y][0],vt=e+n[y][1],bt=t+n[y+1][0],At=e+n[y+1][1];this.toRender({p:["drawLine","line",xt,vt,bt,At,this.colors[0]],t:"Data"})}}else if(this.connectBy)for(x in this.connectByData)if(this.connectByData[x].length>1)for(y=0;y<this.connectByData[x].length-1;y++){xt=t+this.connectByData[x][y][0],vt=e+this.connectByData[x][y][1],bt=t+this.connectByData[x][y+1][0],At=e+this.connectByData[x][y+1][1];this.toRender({p:["drawLine","line",xt,vt,bt,At,this.connectByColor,this.connectByWidth],t:"Data"})}this.decorations&&this.decorations.marker&&this.drawMarkers()}},this.set3DprivateParams=function(){this.set3DText(),this.set3DParams()},this.draw3DPlot=function(){this.validatePropertyValues(),this.set3DXYDimensions(),this.set3DprivateParams(),this.set3DRotation(),this.set3DAxes(),this.set3DLayout(!0),this.draw3DDataPoints(),this.set3DLayout(),this.drawLegend(),this.drawTitle()},this.initializeScatter3D=function(){this.layoutValid?this.drawLayoutCompartments(this.draw3DPlot):this.draw3DPlot()},t||this.initializeScatter3D()},CanvasXpress.prototype.oneDPlot=function(t){this.get1DLeft=function(t){var e=this.marginLeft+this.offsetX+this.left;return this.isOncoprint&&this.showHeatmapOncoprint&&t&&this.oncoprintHeatmapPosition.match(/right|left/)&&(e+=this.x/2+1*this.margin),e},this.get1DTop=function(t){var e=this.marginTop+this.offsetY+this.top;return this.isOncoprint&&this.showHeatmapOncoprint&&t&&this.oncoprintHeatmapPosition.match(/top|bottom/)&&(e+=this.y/2+1*this.margin),e},this.get1DIndices=function(){return this.isGraphTime?this.timeValueIndices:this.isGroupedData?this.grpIndices:this.smpIndices},this.get1DSamples=function(){return this.isGraphTime?this.timeValues:this.isGroupedData?this.data.w.smps:this.data.y.smps},this.get1DLabels=function(){return this.isGraphTime?this.timeValues:!!this.isGroupedData&&this.data.w.smps},this.get1DCompBlockMax=function(){if("BarLine"==this.graphType||"DotLine"==this.graphType){var t=this.getVariablesVisibleByAxis("xAxis"),e=this.getVariablesVisibleByAxis("xAxis2");return Math.max(t.length,e.length)}return this.graphType.match(/Stacked|Line|Area|ParallelCoordinates|Gantt/)?1:this.plotByVariable?this.get1DIndices().length:this.varIndices.length},this.setVariableBlock=function(){this.variableBlock=this.varIndices.length},this.setRowColBlocks=function(){this.setVariableBlock();var t=this.isGraphTime?this.timeValueIndices.length:this.isGroupedData&&this.grpIndices?this.grpIndices.length:this.smpIndices.length,e=0,i=0;"Meter"==this.graphType?(e=1,i=1):this.isOncoprint&&this.showHeatmapOncoprint?(e=t*(this.oncoprintHeatmapPosition.match(/top|bottom/)?2:1),i=this.varIndices.length*(this.oncoprintHeatmapPosition.match(/right|left/)?2:1)):["Area","AreaLine","Heatmap","Line","ParallelCoordinates","Sankey","Stacked","StackedLine","StackedPercent","StackedPercentLine","Tree"].includes(this.graphType)?(e=t,i="Heatmap"==this.graphType?this.varIndices.length:1):"BarLine"==this.graphType||"DotLine"==this.graphType?(e=Math.max(this.xAxis.length,this.xAxis2.length)*t,i=1):"Treemap"==this.graphType||"TagCloud"==this.graphType?(e=1,i=1):"Gantt"==this.graphType?(e=t,i=1):(e=this.varIndices.length*t,i=1),this.rowBlocks=e,this.colBlocks=i},this.set1DFont=function(){if(this.autoScaleFont){var t=1-this.percentAspectRatioPlotArea,e=this.layoutComb&&this.isDOE?this.layoutWidth*t:this.width*t,i=this.layoutComb&&this.isDOE?this.layoutHeight*t:this.height*t,s="Heatmap"==this.graphType?Math.ceil(this.width/this.colBlocks):this.maxTextSize,a="Heatmap"==this.graphType?Math.ceil(this.height/this.rowBlocks):Math.ceil(this.width/this.colBlocks),r=this.getAxisDescription(),n=this.getAxisDescription(!0);this.setAxisFont(r.length>n.length?r:n,"vertical"==this.graphOrientation?i:e),this.setPropertyFontSize("Heatmap"==this.graphType?i:e,"varTitleFont"),this.setPropertyFontSize("Heatmap"==this.graphType?i:e,"varLabelFont",s),this.setPropertyFontSize("Heatmap"==this.graphType||"vertical"==this.graphOrientation?e:i,"smpTitleFont"),this.setPropertyFontSize("Heatmap"==this.graphType||"vertical"==this.graphOrientation?e:i,"smpLabelFont",a),this.setPropertyFontSize((1-this.percentAspectRatioPlotArea)*("vertical"==this.graphOrientation?this.width:this.height),"overlayFont",this.overlaysThickness),"Tree"==this.graphType&&(this.smpLabelFont=this.smpLabelFontStyle+" "+parseInt(Math.min(this.treeNodeSize+3,this.smpLabelFontSize)*this.smpLabelScaleFontFactor)+"px "+this.fontName)}},this.setOverlays=function(t){var e=this,i={},s=this[t+"Overlays"],a=this[t+"OverlayProperties"],r="smp"==t?this.data.x:this.data.z,n="smp"==t?this.meta.data.x:this.meta.data.z,o="var"==t||"smp"==t&&"vertical"==this.graphOrientation?["Bottom","Top"]:["Left","Right"];this.isDOE||(function(){for(var i=0;i<s.length;i++)"-"!=s[i]&&r.hasOwnProperty(s[i])&&(a[s[i]]||(a[s[i]]={}),a[s[i]].type||(a[s[i]].type=n[s[i]].boolean?"Boolean":"Default"),a[s[i]].color||(a[s[i]].color=e.colors[i]),a[s[i]].spectrum||(a[s[i]].spectrum=e.colorSpectrum),"Numeric"!=n[s[i]].type||e.isSameObject(a[s[i]].spectrum,n[s[i]].colorBrew.spectrum)||(n[s[i]].colorBrew=e.getColorBrew(a[s[i]].spectrum,n[s[i]].rmin,n[s[i]].rmax)),a[s[i]].scheme||(a[s[i]].scheme=e.colorScheme),a[s[i]].hasOwnProperty("showLegend")||(a[s[i]].showLegend=!0),a[s[i]].hasOwnProperty("showName")||(a[s[i]].showName=!0),a[s[i]].hasOwnProperty("showBox")||(a[s[i]].showBox=!0),a[s[i]].hasOwnProperty("rotate")||(a[s[i]].rotate=!1),a[s[i]].scheme!=e.colorScheme&&CanvasXpress.colorSchemes.hasOwnProperty(a[s[i]].scheme)&&e.modifyColorProperties(a[s[i]].scheme,s[i],"smp"==t?"x":"z",!0),a[s[i]].position?"var"==t||"smp"==t&&"vertical"==e.graphOrientation?a[s[i]].position.match(/top|bottom/)||(a[s[i]].position="rigth"==a[s[i]].position?"top":"bottom"):a[s[i]].position.match(/left|right/)||(a[s[i]].position="top"==a[s[i]].position?"right":"left"):"Heatmap"==e.graphType||"horizontal"==e.graphOrientation?a[s[i]].position="smp"==t?"left":"bottom":a[s[i]].position="bottom")}(),function(){for(var i=[],r=[],n={},o=!1,h=!1,l=0;l<s.length;l++)"-"!=s[l]&&(o=s[l],h||(h=s[l])),"-"==s[l]&&o&&(n.hasOwnProperty(o)||(n[o]=[]),n[o].push(s[l]));for(l=0;l<s.length;l++)"-"!=s[l]&&a[s[l]].position.match(/left|bottom/)&&i.push(s[l]);for(l=0;l<s.length;l++)"-"!=s[l]&&a[s[l]].position.match(/right|top/)&&i.push(s[l]);for(l=0;l<i.length;l++)if(o=i[l],r.push(o),n.hasOwnProperty(o))for(var c=0;c<n[o].length;c++)r.push(n[o][c]);if("-"==(o=s.shift()))for(l=0;l<r.length;l++)if(r[l]==h){for(;"-"==o;)r.splice(l,0,o),o=s.shift();break}s=r,e[t+"Overlays"]=r}()),this[t+"OverlaysStrLength"]=0;for(var h=0;h<o.length;h++){var l=o[h].toLowerCase(),c=!1;if(this[t+"OverlaysThickness"+o[h]]=0,this.showOverlays&&s.length>0){if("smp"==t){if("Treemap"==this.graphType||"TagCloud"==this.graphType)continue}else{if("var"!=t)continue;if("Heatmap"!=this.graphType)continue}for(var d=0;d<s.length;d++)if("-"==s[d])d>0&&c==l&&(this[t+"OverlaysThickness"+o[h]]+=this.margin);else if(!i.hasOwnProperty(s[d])&&(c=a[s[d]].position)==l){var p=this.getOverlaysForTypePosition(t,a[s[d]].type,l,s[d]);this[t+"OverlaysThickness"+o[h]]+=a[s[d]].thickness||this.overlaysThickness;for(var g=0;g<p.length;g++)this[t+"OverlaysStrLength"]=Math.max(this[t+"OverlaysStrLength"],this.measureText(this.shortenText(p[g],this.maxOverlayStringLen),this.overlayFont)+this.margin),i[p[g]]=!0}this[t+"OverlaysThickness"+o[h]]>0&&(this[t+"OverlaysThickness"+o[h]]+=this.margin)}}},this.getOverlaysForTypePosition=function(t,e,i,s){for(var a=[],r="smp"==t?this.smpOverlayProperties:this.varOverlayProperties,n="smp"==t?this.smpOverlays:this.varOverlays,o=0;o<n.length;o++){var h=n[o];if("-"!=h&&r.hasOwnProperty(h)){var l=r[h].type,c=r[h].position;if(i.match(/left|bottom/)&&!c.match(/left|bottom/))continue;if(i.match(/top|right/)&&!c.match(/top|right/))continue;if(e.match(/Area|AreaLine/)&&l.match(/Area|AreaLine/))a.push(h);else if(e.match(/Bar|BarLine/)&&l.match(/Bar|BarLine/))a.push(h);else if(e.match(/Dotplot|DotLine/)&&l.match(/Dotplot|DotLine/))a.push(h);else if("Line"==e&&"Line"==l)a.push(h);else{if(e.match(/Heatmap|Default|Text|Boolean/))return[s];"Pie"==e&&"Pie"==l||"Treemap"==e&&"Treemap"==l?a.push(h):("StackedPercent"!=e&&"StackedPercentLine"!=e||"StackedPercent"!=l&&"StackedPercentLine"!=l)&&("Stacked"!=e&&"StackedLine"!=e||"Stacked"!=l&&"StackedLine"!=l)||a.push(h)}}}return a},this.getVariableTitleHeight=function(){return this.varTitle&&"Treemap"!=this.graphType&&"TagCloud"!=this.graphType?this.varTitleFontSize+this.margin:0},this.getVariableLabelLength=function(){if(this.showVariableNames&&"Treemap"!=this.graphType&&"TagCloud"!=this.graphType){if(this.varLabelRotate){if(90==Math.abs(this.varLabelRotate))return this.varLabelFontSize+this.margin;var t=this.measureText(this.shortenText(this.meta.data.y.maxVarStr,this.maxVarStringLen),this.varLabelFont)+this.margin;return Math.cos(this.radians(this.varLabelRotate))*t}return this.isOncoprint&&this.varLabelFontSize<5?0:this.measureText(this.shortenText(this.meta.data.y.maxVarStr,this.maxVarStringLen),this.varLabelFont)+this.margin}return 0},this.getSampleTitleHeight=function(){return this.smpTitle&&"Treemap"!=this.graphType&&"TagCloud"!=this.graphType&&"Sankey"!=this.graphType&&"Tree"!=this.graphType?this.smpTitleFontSize+this.margin:0},this.getSampleLabelLength=function(){var t=this;if(this.showSampleNames&&"Treemap"!=this.graphType&&"TagCloud"!=this.graphType&&"Sankey"!=this.graphType){var e;return this.smpLabelRotate&&90==Math.abs(this.smpLabelRotate)?this.isGroupedData?(e=this.isArray(this.meta.data.w.maxSmpStr)?this.meta.data.w.maxSmpStr.toString()[0].split(" :: ").length:this.meta.data.w.maxSmpStr.toString().split(" :: ").length)*(this.smpLabelFontSize+this.margin):this.smpLabelFontSize+this.margin:(e=(e=this.layoutValid&&!this.layoutAdjust?this.isDOE&&this.isGroupedData&&!this.meta.data.g&&this.data.w.smps?this.getMaxText(this.data.w.smps):this.isGroupedData&&this.meta.data.g?this.getMaxText(this.meta.data.g.smps):this.meta.data.y.maxSmpStr:this.isGraphTime?this.getMaxText(this.timeValues):this.isGroupedData?this.meta.data.w.maxSmpStr:this.meta.data.y.maxSmpStr).length>this.maxSmpStringLen?this.measureText(e.substring(0,this.maxSmpStringLen),this.smpLabelFont)+2*this.margin:this.measureText(e,this.smpLabelFont)+2*this.margin,(e=this.smpLabelRotate?e*Math.cos(this.radians(this.smpLabelRotate))*(t.smpLabelScaleFontFactor<=1.5?1:t.smpLabelScaleFontFactor<=2.5?1.2:t.smpLabelScaleFontFactor<=4.5?1.5:1.6):e)+this.margin+(this.smpLabelRotate?this.smpLabelFontSize:0))}return 0},this.getAxisTitleLayoutLength=function(t){var e=t?"xAxis2Title":"xAxisTitle";return this.layoutConfig&&this.layoutConfig[this.layoutCurrent]&&this.layoutConfig[this.layoutCurrent][e]?this.axisTitleFontSize:0},this.getAxisTitleTickLength=function(t,e){if("Treemap"==this.graphType||"TagCloud"==this.graphType||"Sankey"==this.graphType||"Tree"==this.graphType)return 0;if("vertical"==this.graphOrientation){var i,s,a,r;if((this.xAxisTransform&&this.xAxisTransform.match(/log|exp/)||this.isTransformedData&&this.isTransformedData.match(/log|exp/))&&!this.xAxisTransformTicks){for(var n=this.xAxisValues,o=this.xAxis2Values,h=[],l=0;l<n.length;l++){var c=n[l];h.push(this.formatNumber(this.transformValue(this.xAxisTransform||this.isTransformedData,c,!0)))}a=this.getMaxText(h);var d=[];for(l=0;l<o.length;l++){c=o[l];d.push(this.transformValue(this.xAxis2Transform||this.isTransformedData,c,!0))}r=this.getMaxText(d)}else a=this.xAxisMaxStrLength,r=this.xAxis2MaxStrLength;return this.layoutValid&&(this.xAxisLayoutMaxTickStr&&(a=this.xAxisLayoutMaxTickStr),this.xAxis2LayoutMaxTickStrLength&&(r=this.xAxis2LayoutMaxTickStr)),i="ParallelCoordinates"==this.graphType?this.smpLabelRotate?90==this.smpLabelRotate?Math.max(this.parallelCoordinates[0].len,this.parallelCoordinates[0].lenSmp/2):Math.max(this.parallelCoordinates[0].len,this.parallelCoordinates[0].lenSmp*Math.sin(this.radians(this.smpLabelRotate))):this.parallelCoordinates[0].len:("BarLine"==this.graphType||"DotLine"==this.graphType)&&t?this.measureText(r,this.axisTickFont):this.measureText(a,this.axisTickFont),s=t?this.getAxisDescription(!0):this.getAxisDescription(),s=this.layoutValid?this.getAxisTitleLayoutLength(t):""!=s?this.axisTitleFontSize:0,e&&(s=0),t?"ParallelCoordinates"==this.graphType?this.smpLabelRotate&&90==this.smpLabelRotate?this.parallelCoordinates[this.parallelCoordinates.length-1].lenSmp/2:0:this.xAxis2Show?s+i+4*this.margin:0:"ParallelCoordinates"==this.graphType?s+i+this.margin*(this.isDOE?0:4):this.xAxisShow?s+i+4*this.margin:0}return s=t?this.getAxisDescription(!0):this.getAxisDescription(),s=this.layoutValid?this.getAxisTitleLayoutLength(t):""!=s?this.axisTitleFontSize:0,e&&(s=0),t?this.xAxis2Show?s+(this.axisTickFontSize+4*this.margin*("Gantt"==this.graphType?2:1)):0:this.xAxisShow?s+(this.axisTickFontSize+4*this.margin*("Gantt"==this.graphType?2:1)):0},this.getHeatmapIndicatorWidth=function(){if(this.showHeatmapIndicator){var t=this.getDefaultMetaDataObject(),e=this.xAxisTitle?this.measureText(this.xAxisTitle,this.legendTextFont):0;return"right"==this.heatmapIndicatorPosition?Math.max(e,this.heatmapIndicatorHeight+2*this.legendTextMargin+t.maxLevLen):Math.max(e,this.heatmapIndicatorWidth+t.maxLevLen)}return 0},this.getHeatmapIndicatorHeight=function(t){if(this.showHeatmapIndicator){var e=2*this.legendTextMargin+this.getFontPt(this.legendTextFont),i=this.xAxisTitle?2*this.legendTextMargin+this.getFontPt(this.legendTextFont):0;return t&&this.isMultidimensionalData&&"bottom"==this.heatmapIndicatorPosition&&this.legendInside?0:this.heatmapIndicatorHeight+i+e}return 0},this.getLegendHeight=function(t){var e=this.isOncoprint&&"bottom"==t?this.legend.oncoprint.height:0,i=this.showLegend&&this.legendPosition==t&&!this.legendInside,s=(this.showVarOverlaysLegend||this.showSmpOverlaysLegend)&&this.overlaysLegendPosition.match(/bottom/i);return"Heatmap"!=this.graphType||this.isMultidimensionalData||this.isAttributedGraph()?this.isMultidimensionalData||this.isAttributedGraph()&&CanvasXpress.graphTypes.AttGraphs.includes(this.graphType)?(i&&(e+=this.legend.height),s&&(e+=this.legend.overlays.height)):"Treemap"==this.graphType||(i&&(e+=this.legend.variable.height+this.margin),s&&(e+=this.legend.overlays.height)):(i&&(e+=this.legend.height),s&&(e+=this.legend.overlays.height)),e},this.getLegendWidth=function(t){var e=0,i=this.showLegend&&this.legendPosition.toLowerCase().match(t?t.toLowerCase():"")&&!this.legendInside,s=(this.showVarOverlaysLegend||this.showSmpOverlaysLegend)&&this.overlaysLegendPosition.toLowerCase().match(t?t.toLowerCase():"");return"Heatmap"!=this.graphType||this.isMultidimensionalData||this.isAttributedGraph()?this.isMultidimensionalData||this.isAttributedGraph()&&CanvasXpress.graphTypes.AttGraphs.includes(this.graphType)?(i&&(e+=this.legend.width),s&&(e+=this.legend.overlays.width)):"Treemap"==this.graphType||(i&&(e+=this.legend.variable.width+this.margin),s&&(e+=this.legend.overlays.width)):(i&&(e+=this.legend.width),s&&(e+=this.legend.overlays.width)),e},this.getVarTreeHeight=function(){var t=0;return"Heatmap"==this.graphType&&this.showVarDendrogram&&this.varDendrogram&&(t=this.dendrogramHeight+this.margin),t},this.getSmpTreeWidthHeight=function(){var t=0;return this.showSmpDendrogram&&this.smpDendrogram&&!this.isGroupedData&&"Treemap"!=this.graphType&&"TagCloud"!=this.graphType&&(t=this.dendrogramHeight+this.margin),t},this.getOverlaysTickLabelsLength=function(){var t=0;if(this.smpOverlays.length>0&&!this.isDOE){for(var e=this.meta.data.x,i=[],s=0;s<this.smpOverlays.length;s++){var a=this.smpOverlays[s];if("-"!=a){var r=this.smpOverlayProperties[a].position,n=this.smpOverlayProperties[a].type;r.match(/left|right/i)&&!n.match(/text|default|increase|decrease/i)&&(i.push(e[a].min),i.push(e[a].max))}}t=this.measureText(this.getMaxText(i),this.overlayFont)}return t?t+3*this.margin:0},this.getTreeRootLabelLength=function(){return this.measureText(this.hierarchy[0],this.smpLabelFont)},this.set1DXYDimensionsLeft=function(){var t=0;"Tree"!=this.graphType||this.treeInverted||this.treeCircular?"vertical"==this.graphOrientation?(t=this.getAxisTitleTickLength(!1,this.layoutValid),this.isDOE&&(t+=this.margin),this.isGraphTime&&(t+=this.getSampleLabelLength()+3*this.margin)):(this.isDOE&&(t+=2*this.margin),this.smpOverlaysThicknessLeft&&(t+=this.smpOverlaysThicknessLeft),"left"==this.smpTitleLabelPosition&&(t+=this.getSampleTitleHeight()+this.getSampleLabelLength()),"left"==this.smpDendrogramPosition&&(t+=this.getSmpTreeWidthHeight())):t=this.measureText(this.data.tree.data.name,this.smpTitleFont)+(this.data.tree.data.size||10)+this.margin,t+=this.margin+this.getLegendWidth("left"),this.layoutValid&&this.layoutCollapse&&(t-=this.margin),this.left=Math.max(t,this.getOverlaysTickLabelsLength())},this.set1DXYDimensionsRight=function(){var t=0;"vertical"==this.graphOrientation?(t=this.getAxisTitleTickLength(!0,this.layoutValid),this.isDOE&&(t=3*this.margin),this.isGraphTime&&(t+=this.getSampleLabelLength()+3*this.margin)):this.isDOE?t=2*this.margin:(this.smpOverlaysThicknessRight&&(t+=this.smpOverlaysThicknessRight),"Tree"!=this.graphType&&"right"!=this.smpTitleLabelPosition||(t+=this.getSampleTitleHeight()+this.getSampleLabelLength()),"right"==this.smpDendrogramPosition&&(t+=this.getSmpTreeWidthHeight())),this.isDOE||(t+=this.margin+this.getLegendWidth("right")),this.layoutValid&&this.layoutCollapse&&(t-=this.margin),"Heatmap"!=this.graphType||"right"!=this.heatmapIndicatorPosition||this.isDOE||(t+=this.getHeatmapIndicatorWidth()),"Heatmap"==this.graphType&&this.showOverlays&&this.varOverlays.length&&!this.isOncoprint?t=Math.max(t,this.varOverlaysStrLength):"vertical"==this.graphOrientation&&this.smpOverlays.length&&this.showOverlays&&(t=Math.max(t,this.smpOverlaysStrLength)),this.right=t},this.set1DXYDimensionsTop=function(){var t=this.getTitleSubtitleHeight();if(t+=this.margin+this.getLegendHeight("top"),this.isDOE?t=5*this.margin:this.layoutValid&&"wrap"==this.layoutType&&(t+=this.layoutLabelBoxThickness*(this.segregateVariablesBy.length+this.segregateSamplesBy.length)-this.margin),"vertical"==this.graphOrientation)t+=this.smpOverlaysThicknessTop,"top"!=this.smpDendrogramPosition&&"left"!=this.smpDendrogramPosition||(t+=this.getSmpTreeWidthHeight()),"Tree"==this.graphType&&(t+=this.smpLabelFontSize);else if("Heatmap"==this.graphType){var e=this.layoutValid||this.isOncoprint?this.margin:this.getHeatmapIndicatorHeight(),i=this.varOverlaysThicknessTop;"top"==this.varTitleLabelPosition&&(i+=this.getVariableTitleHeight()+this.getVariableLabelLength()),"top"==this.varDendrogramPosition&&(i+=this.getVarTreeHeight()),this.heatmapIndicatorY=t+i,this.heatmapIndicatorOverlap=!1,this.isOncoprint||("right"==this.heatmapIndicatorPosition?t+=i:"top"==this.heatmapIndicatorPosition?t+=i+e:"topLeft"==this.heatmapIndicatorPosition?this.left>this.heatmapIndicatorWidth+12*this.margin?t+=i+(this.heatmapIndicatorHeight-t/2.5):(this.heatmapIndicatorY=i+e-(this.heatmapIndicatorHeight-t/2.5),this.heatmapIndicatorOverlap=!0,t+=i+e):"topRight"==this.heatmapIndicatorPosition&&(this.right>this.heatmapIndicatorWidth+6*this.margin?t+=i:(this.heatmapIndicatorY=i+(this.heatmapIndicatorHeight-t/2.5),this.heatmapIndicatorOverlap=!0,t+=i+e)))}else t+=this.getAxisTitleTickLength();this.layoutValid&&this.layoutCollapse&&"wrap"!=this.layoutType&&(t-=1*this.margin),this.top=Math.max(t,this.getOverlaysTickLabelsLength())},this.set1DXYDimensionsBottom=function(){var t=0;this.isDOE&&(t+=3*this.margin),"vertical"==this.graphOrientation?(t+=this.getSampleTitleHeight()+this.getSampleLabelLength()+this.smpOverlaysThicknessBottom,"bottom"==this.smpDendrogramPosition&&(t+=this.getSmpTreeWidthHeight())):"Heatmap"==this.graphType?(t+=this.varOverlaysThicknessBottom,"bottom"==this.varTitleLabelPosition&&(t+=this.getVariableLabelLength()+this.getVariableTitleHeight()),"bottom"==this.varDendrogramPosition&&(t+=this.getVarTreeHeight())):t+=this.getAxisTitleTickLength(!0),t+=this.margin+this.getLegendHeight("bottom"),this.layoutValid&&this.layoutCollapse&&(t-=this.margin),"horizontal"==this.graphOrientation&&this.showOverlays&&this.smpOverlays.length&&(t=Math.max(t,this.smpOverlaysStrLength)),!this.layoutValid&&this.citation&&(t+=this.getCitationHeight()),this.bottom=t},this.adjustlegendTextFontSize=function(){var t=this.meta.config.orig;!t.legendTextFontSize&&this.adjustAspectRatio&&(t.legendTextFontSize=this.legendTextFontSize),this.legendTextFontSize>3&&(this.legendTextFontSize-=2)},this.adjustSmpFontSize=function(){if(this.adjustAspectRatio){var t=this.meta.config.orig;this.smpLabelFontSize=parseInt(.8*this.smpLabelFontSize);var e=Math.min(Math.max(parseInt(this.smpLabelFontSize*this.smpLabelScaleFontFactor),this.minTextSize),this.maxTextSize);this.smpLabelFontSize<this.minTextSize&&("Heatmap"==this.graphType?this.rbs&&e>this.rbs&&(t.showSampleNames||(t.showSampleNames=this.showSampleNames,this.showSampleNames=!1)):t.showSampleNames||(t.showSampleNames=this.showSampleNames,this.showSampleNames=!1)),this.smpLabelFont=this.smpLabelFontStyle+" "+e+"px "+this.fontName}},this.adjustVarFontSize=function(){if(this.adjustAspectRatio){var t=this.meta.config.orig;this.varLabelFontSize=parseInt(.8*this.varLabelFontSize),this.varLabelFontSize<this.minTextSize&&(t.showVariableNames||(t.showVariableNames=this.showVariableNames,this.showVariableNames=!1)),this.varLabelFont=this.varLabelFontStyle+" "+Math.min(Math.max(parseInt(this.varLabelFontSize*this.varLabelScaleFontFactor),this.minTextSize),this.maxTextSize)+"px "+this.fontName}},this.adjust1DYDimension=function(){for(var t=this.layoutComb?this.layoutHeight*this.percentAspectRatioPlotArea:this.height*this.percentAspectRatioPlotArea,e=this.meta.config.orig;this.adjustAspectRatioYTries<=this.adjustAspectRatioMax&&this.y<t;)this.adjustlegendTextFontSize(),this.layoutComb||this.setLegends(),this.adjustVarFontSize(),"Heatmap"!=this.graphType&&this.adjustSmpFontSize(),this.set1DXYDimensionsTop(),this.set1DXYDimensionsBottom(),this.y=this.layoutComb?this.layoutHeight-(this.top+this.bottom):this.height-(this.marginTop+this.top+this.bottom+this.marginBottom),this.adjustAspectRatioYTries==this.adjustAspectRatioMax&&this.y<t&&(!this.showLegend||"top"!=this.legendPosition&&"bottom"!=this.legendPosition||this.legendInside||(e.showLegend=this.showLegend,this.showLegend=!1,this.set1DFont()),this.set1DXYDimensionsTop(),this.set1DXYDimensionsBottom(),this.y=this.layoutComb?this.layoutHeight-(this.top+this.bottom):this.height-(this.marginTop+this.top+this.bottom+this.marginBottom),this.y<t&&this.errors.push("The text size doesn't fit in the graph. Either make it smaller or make the graph bigger!\nYou can also reduce the maximum length for the text string!")),this.adjustAspectRatioYTries++},this.adjust1DXDimension=function(){for(var t=this.layoutComb?this.layoutWidth*this.percentAspectRatioPlotArea:this.width*this.percentAspectRatioPlotArea,e=this.meta.config.orig;this.adjustAspectRatioXTries<=this.adjustAspectRatioMax&&this.x<t;)this.adjustlegendTextFontSize(),this.layoutComb||this.setLegends(),"Heatmap"!=this.graphType&&this.adjustVarFontSize(),this.adjustSmpFontSize(),this.set1DXYDimensionsLeft(),this.set1DXYDimensionsRight(),this.x=this.layoutComb?this.layoutWidth-(this.left+this.right):this.width-(this.marginLeft+this.left+this.right+this.marginRight),this.adjustAspectRatioXTries==this.adjustAspectRatioMax&&this.x<t&&(this.showLegend&&(this.legendPosition.toLowerCase().match("right")||this.legendPosition.toLowerCase().match("left"))&&!this.legendInside&&(e.showLegend=this.showLegend,this.showLegend=!1,this.set1DFont()),this.set1DXYDimensionsLeft(),this.set1DXYDimensionsRight(),this.x=this.layoutComb?this.layoutWidth-(this.left+this.right):this.width-(this.marginLeft+this.left+this.right+this.marginRight),this.x<t&&this.errors.push("The text size doesn't fit in the graph. Either make it smaller or make the graph bigger!\nYou can also reduce the maximum length for the text string!")),this.adjustAspectRatioXTries++},this.set1DXYDimensions=function(){var t=this.layoutComb?this.layoutWidth*this.percentAspectRatioPlotArea:this.width*this.percentAspectRatioPlotArea,e=this.layoutComb?this.layoutHeight*this.percentAspectRatioPlotArea:this.height*this.percentAspectRatioPlotArea;if(this.isGraphTime&&this.setTimeAxis(),this.layoutComb||this.setLegends(),this.setRowColBlocks(),this.set1DFont(),"Meter"==this.graphType){var i=this.getAxisTitleTickLength()+2*this.margin,s=(this.layoutComb?this.layoutHeight:this.width)-(2*i+this.meterThickness),a="state"==this.meterType?4*this.meterThickness:s;switch(this.top=this.layoutValid?(this.segregateVariablesBy.length+this.segregateSamplesBy.length)*this.layoutLabelBoxThickness+2*this.margin:this.getTitleSubtitleHeight()+2*this.margin,this.bottom=2*this.margin,this.meterType){case"gauge":case"speedometer":this.left=i,this.right=i;break;case"horizontal":this.left=2*this.margin*6,this.right=2*this.margin*6,this.top*=24,this.bottom=this.top;break;case"vertical":this.left=s/2,this.right=s/2,this.top+=2*this.margin*6,this.bottom+=2*this.margin*6;break;case"state":this.left=s/2,this.right=s/2,this.top+=a/4,this.bottom+=a/4;break;case"digital":this.left=2*this.margin,this.right=2*this.margin;break;case"number":this.left=this.margin,this.right=this.margin}this.y=this.layoutComb?this.layoutHeight-(this.top+this.bottom):this.height-(this.marginTop+this.top+this.bottom+this.marginBottom),this.x=this.layoutComb?this.layoutWidth-(this.left+this.right):this.width-(this.marginLeft+this.left+this.right+this.marginRight)}else"vertical"==this.graphOrientation?(this.set1DXYDimensionsTop(),this.set1DXYDimensionsBottom(),this.adjustAspectRatio&&(this.y=this.layoutComb?this.layoutHeight-(this.top+this.bottom):this.height-(this.marginTop+this.top+this.bottom+this.marginBottom),this.y<e&&this.adjust1DYDimension()),this.set1DXYDimensionsLeft(),this.set1DXYDimensionsRight(),this.adjustAspectRatio&&(this.x=this.layoutComb?this.layoutWidth-(this.left+this.right):this.width-(this.marginLeft+this.left+this.right+this.marginRight),this.x<t&&this.adjust1DXDimension())):(this.set1DXYDimensionsLeft(),this.set1DXYDimensionsRight(),this.adjustAspectRatio&&(this.x=this.layoutComb?this.layoutWidth-(this.left+this.right):this.width-(this.marginLeft+this.left+this.right+this.marginRight),this.x<t&&this.adjust1DXDimension()),this.set1DXYDimensionsTop(),this.set1DXYDimensionsBottom(),this.adjustAspectRatio&&(this.y=this.layoutComb?this.layoutHeight-(this.top+this.bottom):this.height-(this.marginTop+this.top+this.bottom+this.marginBottom),this.y<e&&this.adjust1DYDimension()))},this.set1DPrivateParamsManual=function(){var t=this.isGraphTime?this.timeValueIndices.length:this.isGroupedData?this.grpIndices.length:this.smpIndices.length;this.rbs=("Boxplot"==this.graphType?1:this.widthFactor)*(this.scaleTextToSize(this.rowBlocks)+this.scaleTextConstantAdd),"Heatmap"==this.graphType?(this.colBlocks<20?this.cbs=this.scaleTextToSize(this.colBlocks)+4*this.scaleTextConstantAdd:this.cbs=parseInt(1/Math.sqrt(this.colBlocks)*this.scaleTextConstantMult)+1,this.cbs*="Boxplot"==this.graphType?1:this.widthFactor,this.blockSeparation=this.rbs/2,this.y=this.rbs*this.rowBlocks+(this.isOncoprint&&this.showHeatmapOncoprint&&this.oncoprintHeatmapPosition.match(/top|bottom/)?3*this.margin:0),this.x=this.cbs*this.colBlocks+(this.isOncoprint&&this.showHeatmapOncoprint&&this.oncoprintHeatmapPosition.match(/right|left/)?3*this.margin:0)):(this.blockSeparation=this.rbs*this.sampleSpaceFactor,"vertical"==this.graphOrientation?(this.graphType.match(/Area|ParallelCoordinates/)?this.x=this.rbs*(this.rowBlocks-1)+this.blockSeparation*(t-1):this.plotByVariable?this.x=this.rbs*this.rowBlocks+this.blockSeparation*this.variableBlock+this.blockSeparation:this.x=this.rbs*this.rowBlocks+this.blockSeparation*t+this.blockSeparation,this.y=this.height-(this.marginTop+this.top+this.bottom+this.marginBottom)):(this.graphType.match(/Area|ParallelCoordinates/)?this.y=this.rbs*(this.rowBlocks-1)+this.blockSeparation*(t-1):this.plotByVariable?this.y=this.rbs*this.rowBlocks+this.blockSeparation*this.varIndices.length+this.blockSeparation:this.y=this.rbs*this.rowBlocks+this.blockSeparation*t+this.blockSeparation,this.x=this.width-(this.marginLeft+this.left+this.right+this.marginRight)),this.cbs=1),this.width=this.marginLeft+(this.left+this.x+this.right)*this.layoutCols+this.marginRight,this.height=this.marginTop+(this.top+this.y+this.bottom)*this.layoutRows+this.marginBottom,this.resizeCanvas()},this.set1DPrivateParamsAuto=function(){var t=this.isGraphTime?this.timeValueIndices.length:this.isGroupedData&&this.grpIndices?this.grpIndices.length:this.smpIndices.length;if("Heatmap"==this.graphType){var e=this.margin;this.isOncoprint&&this.showHeatmapOncoprint&&this.oncoprintHeatmapPosition.match(/right|left/)&&(e=6*this.margin);var i=this.margin;this.isOncoprint&&this.showHeatmapOncoprint&&this.oncoprintHeatmapPosition.match(/top|bottom/)&&(i=6*this.margin),this.rbs=(this.y-i)/this.rowBlocks,this.blockSeparation=this.rbs,this.cbs=(this.x-e)/this.colBlocks}else{this.graphType.match(/Area|ParallelCoordinates/)?this.rbs="vertical"==this.graphOrientation?this.x/(this.rowBlocks+t-2):this.y/(this.rowBlocks+t-2):this.plotByVariable?this.rbs="vertical"==this.graphOrientation?this.x/(this.rowBlocks+this.varIndices.length):this.y/(this.rowBlocks+this.varIndices.length):this.rbs="vertical"==this.graphOrientation?this.x/(this.rowBlocks+t):this.y/(this.rowBlocks+t);var s="Boxplot"==this.graphType?1:this.widthFactor,a=s+this.sampleSpaceFactor,r=this.graphType.match(/Stacked|Gantt/)?1:this.varIndices.length;s>this.sampleSpaceFactor?(this.blockSeparation=this.rbs*(this.sampleSpaceFactor/a),this.rbs*=1+s/(a*r)):this.sampleSpaceFactor>s?(this.blockSeparation=this.rbs*(1+this.sampleSpaceFactor/a),this.rbs-=(this.blockSeparation-this.rbs)/r):this.blockSeparation=this.rbs,this.cbs=1}},this.set1DPrivateParams=function(){var t=100;this.adjustAspectRatio?this.set1DPrivateParamsAuto():this.set1DPrivateParamsManual(),this.rbs=Math.max(1,Math.floor(this.rbs*t))/t,this.cbs=Math.max(1,Math.floor(this.cbs*t))/t,this.blockSeparation=Math.floor(this.blockSeparation*t)/t},this.getTreemapOverlay=function(t,e,i,s,a,r){var n=[];for(var o in t)n.push({area:t[o],index:-1,label:o,color:"Numeric"==e.type?this.getColorForValue(e.colorBrew,t[o]):e.colors[e.order[o]]});return this.processTreemap(n,{width:i,height:s,left:a,top:r})},this.getTreemapVariable=function(t,e){var i,s,a=this,r=function(e,n,o,h){if(e.length>1)if(n+1<a.treemapBy.length){n++,s=a.getSampleLevelsByAnnotation(a.treemapBy[n],e);for(var l=0;l<s.length;l++){i=l;var c=a.getSamplesByAnnotationLevel(a.treemapBy[n],s[i],e),d=r(c,n,o,[]);o+=isNaN(d[1])?0:d[1],h.push({area:o,index:-1,label:s[i],outline:2,children:d[0]})}}else for(l=0;l<e.length;l++){var p=e[l],g=a.getDataAtPos(t,p,"sum",a.xAxisTransform,a.xAxisFloorValue,a.xAxisCeilValue),u=a.data.y.smps[p];o+=g=isNaN(g)?0:g,h.push({area:g,color:a.getPropertyValue(t,p,"colorBy"),pattern:a.getPropertyValue(t,p,"patternBy"),label:u,index:[t,p]})}else{p=e[0],g=a.getDataAtPos(t,p,"sum",a.xAxisTransform,a.xAxisFloorValue,a.xAxisCeilValue);o+=g=isNaN(g)?0:g,h.push({area:g,color:a.getPropertyValue(t,p,"colorBy"),pattern:a.getPropertyValue(t,p,"patternBy"),label:a.data.y.smps[p],index:[t,p]})}return[h,o]},n=[];this.isGroupedData=!1;var o=this.groupingFactors;this.groupingFactors=[];for(var h=this.getSampleLevelsByAnnotation(this.treemapBy[0],e),l=0;l<h.length;l++){0,i=l;var c=a.getSamplesByAnnotationLevel(a.treemapBy[0],h[i],e),d=r(c,0,0,[]);n.push({area:d[1],index:-1,label:a.treemapBy[0]+":"+h[l],children:d[0]})}return this.isGroupedData=!0,this.groupingFactors=o,n},this.getTreemap=function(){var t,e,i=this,s=function(){var s=i.isDOE&&i.layoutCurrent>0,a=[];if(n)for(var r=0;r<i.data.w.grps[e].length;r++){var o=i.data.w.grps[e][r],h=i.getDataAtPos(t,o);a.push({area:isNaN(h)?0:h,label:i.data.y.smps[o],color:i.colorBy&&!s?i.getPropertyValue(t,o,"colorBy"):i.colors[o%i.colors.length],index:[t,o]})}else for(r=0;r<i.smpIndices.length;r++){o=i.smpIndices[r],h=i.getDataAtPos(t,o);a.push({area:isNaN(h)?0:h,label:i.data.y.smps[o],color:i.colorBy&&!s?i.getPropertyValue(t,o,"colorBy"):i.colors[o%i.colors.length],index:[t,o]})}return a},a=[],r=[],n=!!(this.isGroupedData&&this.groupingFactors&&this.groupingFactors.length>0)&&this.groupingFactors;this.isGroupedData=!1;for(var o=0;o<this.varIndices.length;o++)if(t=this.varIndices[o],n)for(var h=0;h<this.data.w.grps.length;h++){for(var l=0,c=0;c<this.data.w.grps[h].length;c++){var d=this.data.w.grps[h][c],p=this.getDataAtPos(t,d);l+=isNaN(p)?0:p}r.push(l)}else{for(l=0,h=0;h<this.smpIndices.length;h++){d=this.smpIndices[o],p=this.getDataAtPos(t,d);l+=isNaN(p)?0:p}r.push(l)}for(o=0;o<this.varIndices.length;o++)if(t=this.varIndices[o],n){var g=0;for(h=0;h<this.data.w.grps.length;h++)e=h,a.push({area:r[g++],title:this.varIndices.length>1?this.data.y.vars[t]+":"+this.data.w.smps[h]:this.data.w.smps[h],index:-1,children:s()})}else a.push({area:r[o],title:this.data.y.vars[t],index:-1,children:s()});return n&&(this.isGroupedData=!0),this.isDOE?this.processTreemap(a,{width:this.x-20,height:this.y-20,left:10,top:10}):this.processTreemap(a,{width:this.x,height:this.y,left:0,top:0})},this.set1DXAxis=function(){if("Sankey"!=this.graphType&&"Tree"!=this.graphType)if("ParallelCoordinates"==this.graphType)for(var t="vertical"==this.graphOrientation?this.y-.5:this.x-.5,e=this.get1DIndices(),i=0;i<e.length;i++){var s=this.parallelCoordinates[i];s.units=t/(s.max-s.min)}else{t="vertical"==this.graphOrientation?"y":"x";this.setAxisUnits("xAxis",t),["BarLine","DotLine","AreaLine","StackedLine","StackedPercentLine"].includes(this.graphType)&&this.setAxisUnits("xAxis2",t)}},this.draw1DWireFrame=function(){"Treemap"!=this.graphType&&"TagCloud"!=this.graphType&&"Sankey"!=this.graphType&&"Tree"!=this.graphType&&(this.toRender({p:["disableGradientTransparencyShadow"],t:"Axes"}),"Heatmap"==this.graphType?this.draw1DWireFrameHeatmap():"ParallelCoordinates"==this.graphType?this.draw1DWireFrameParallelCoordinates():this.isGraphTime?(this.draw1DWireFrameGraphTime(),this.draw1DAxisScale()):(this.plotByVariable||this.draw1DWireFrameOther(),this.draw1DAxisScale()),this.toRender({p:["enableGradientTransparencyShadow"],t:"Axes"}))},this.draw1DWireFrameHeatmap=function(){if(this.guides&&this.isMultidimensionalData&&!this.isGraphTime){for(var t=this.get1DLeft(),e=this.get1DTop(),i="dotted"==this.guides?"dottedLine":"line",s=t,a=t+this.x,r=e+this.blockSeparation/2,n=e+this.y,o=this.get1DIndices(),h=0;h<o.length;h++){var l=h/this.smpLabelInterval;parseInt(l)==parseFloat(l)&&this.toRender({p:["drawLine",i,s,r,a,r,this.guidesColor,this.guidesWidth,"butt"],b:n,t:"Axes"}),r+=this.rbs}s=t+this.cbs/2,r=e,n=e+this.y;for(h=0;h<this.varIndices.length;h++){l=h/this.varLabelInterval;parseInt(l)==parseFloat(l)&&this.toRender({p:["drawLine",i,s,r,s,n,this.guidesColor,this.guidesWidth,"butt"],b:t,t:"Axes"}),s+=this.cbs}}},this.draw1DWireFrameParallelCoordinates=function(){var t=this.get1DLeft(),e=this.get1DTop(),i=this.get1DIndices();if("vertical"==this.graphOrientation)for(var s=t,a=t,r=e,n=this.y,o=0;o<i.length;o++){this.toRender({p:["drawLine","line",s,r,s,r+n,this.xAxisTickColor],t:"Axes"}),this.toRender({p:["drawLine","line",s-this.margin,r,s,r,this.xAxisTickColor],t:"Axes"}),this.toRender({p:["drawLine","line",s-this.margin,r+n,s,r+n,this.xAxisTickColor],t:"Axes"});for(var h=this.parallelCoordinates[o],l=0;l<h.vals.length;l++){var c=r+n-(h.vals[l]-h.min)*h.units;this.toRender({p:["drawLine","line",s-this.margin,c,s,c,this.xAxisTickColor],t:"Axes"}),this.toRender({p:["drawText",h.vals[l],s-2*this.margin,c,this.axisTickFont,this.axisTickColor,"right","middle"],t:"Axes"})}s+=this.blockSeparation+this.rbs}else for(s=t,a=this.x,r=e,n=e,c=e+this.blockSeparation+this.rbs,o=0;o<i.length;o++){this.toRender({p:["drawLine","line",s,r,t+a,r,this.xAxisTickColor],t:"Axes"}),this.toRender({p:["drawLine","line",s,r-this.margin,s,r,this.xAxisTickColor],t:"Axes"}),this.toRender({p:["drawLine","line",t+a,r-this.margin,t+a,r,this.xAxisTickColor],t:"Axes"});for(h=this.parallelCoordinates[o],l=0;l<h.vals.length;l++){var d=s+(h.vals[l]-h.min)*h.units;this.toRender({p:["drawLine","line",d,r-this.margin,d,r,this.xAxisTickColor],t:"Axes"}),this.toRender({p:["drawText",h.vals[l],d,r-2*this.margin,this.axisTickFont,this.axisTickColor,"center","bottom"],t:"Axes"})}r+=this.blockSeparation+this.rbs}},this.draw1DWireFrameGraphTime=function(){var t,e=this.get1DLeft(),i=this.get1DTop(),s="dotted"==this.guides?"dottedLine":"line";if("BarLine"!=this.graphType&&"DotLine"!=this.graphType||!this.xAxis2Title)t=this.graphType.match(/Stacked|Line|Area|Gantt/)?1:this.varIndices.length;else{var a=this.getVariablesVisibleByAxis("xAxis"),r=this.getVariablesVisibleByAxis("xAxis2");t=Math.max(a.length,r.length)}var n=t*this.rbs,o=this.get1DIndices();if("vertical"==this.graphOrientation)for(var h=this.x/o.length,l=this.graphType.match(/Area/)?0:e+(this.blockSeparation+n)/2,c=i,d=i+this.y,p=0;p<this.timeValueIndices.length;p++){var g=p*h+l;this.guides&&this.toRender({p:["drawLine",s,g,c,g,d,this.guidesColor,this.guidesWidth,"butt"],b:d,t:"Axes"})}else{h=this.y/o.length,l=this.graphType.match(/Area/)?0:i+(this.blockSeparation+n)/2,g=e;var u=this.x;for(p=0;p<this.timeValueIndices.length;p++){c=p*h+l;this.guides&&this.toRender({p:["drawLine",s,g,c,u,c,this.guidesColor,this.guidesWidth,"butt"],b:e,t:"Axes"})}}},this.draw1DWireFrameOther=function(){var t,e=this.get1DLeft(),i=this.get1DTop(),s="dotted"==this.guides?"dottedLine":"line";if("BarLine"!=this.graphType&&"DotLine"!=this.graphType||!this.xAxis2Title)t=this.graphType.match(/Stacked|Line|Area|Gantt|Meter/)?1:this.varIndices.length;else{var a=this.getVariablesVisibleByAxis("xAxis"),r=this.getVariablesVisibleByAxis("xAxis2");t=Math.max(a.length,r.length)}var n=t*this.rbs,o=(this.blockSeparation+n)/2,h=this.get1DIndices();if("vertical"==this.graphOrientation)for(var l=this.graphType.match(/Area/)?e:e+this.blockSeparation+n,c=e,d=this.blockSeparation+n,p=i,g=this.y,u=0;u<h.length;u++){if(this.blockContrast){var m=u%2?this.evenColor:this.oddColor;this.toRender({p:["drawShape","rectangle",c+o,p+g/2,d,g,m,m],t:"Axes"}),c+=d}if(this.guides){if(this.graphType.match(/Area/)&&(0==u||u==h.length-1)){l+=this.blockSeparation+n;continue}this.toRender({p:["drawLine",s,l-o,p,l-o,p+g,this.guidesColor,this.guidesWidth,"butt"],t:"Axes"})}l+=this.blockSeparation+n}else if(h){l=e,c=this.x,p=this.graphType.match(/Area/)?i:i+this.blockSeparation+n,g=i;var f=this.blockSeparation+n;for(u=0;u<h.length;u++){if(this.blockContrast){m=u%2?this.evenColor:this.oddColor;this.toRender({p:["drawShape","rectangle",l+c/2,g+o,c,f,m,m],t:"Axes"}),g+=f}if(this.guides){if(this.graphType.match(/Area/)&&(0==u||u==h.length-1)){p+=this.blockSeparation+n;continue}this.toRender({p:["drawLine",s,l,p-o,e+c,p-o,this.guidesColor,this.guidesWidth,"butt"],t:"Axes"})}p+=this.blockSeparation+n}}},this.draw1DAxisScale=function(){var t=this.get1DLeft(),e=this.get1DTop(),i="dotted"==this.xAxisTickLineType||"dotted"==this.yAxisTickLineType?"dottedLine":"dashed"==this.xAxisTickLineType||"dashed"==this.yAxisTickLineType?"dashedLine":"line";if("Meter"==this.graphType){var s=Math.min(this.x,this.y)*("digital"==this.meterType&&this.layoutValid?.7:"digital"==this.meterType?.9:"gauge"==this.meterType?1:1.1),a=(S=s*("gauge"==this.meterType?.15:.1))*("speedometer"==this.meterType?.5:.55),r=s-S,n=r/2,o=this.getMeterSummaryValue(),h=this.meterType.match(/gauge|speedometer/)?this.scaleTextToFont(o.toString(),r/8,r/4):this.scaleTextToFont(o.toString(),r/2.4,r/1.2),l=Math.PI*("gauge"==this.meterType?1:"speedometer"==this.meterType?1.5:2)/this.xAxisRange,c="gauge"==this.meterType?Math.PI:"speedometer"==this.meterType?1.25*Math.PI:Math.PI/2,d=this.getMeterVariable();if(this.meterType.match(/gauge|speedometer/)){for(var p=t+this.x/2,g=e+this.y/2+("gauge"==this.meterType?this.y/6:"speedometer"==this.meterType?this.y/24:0),u=this.meterSegments.length?this.meterSegments:this.xAxisValuesRaw,m=0;m<u.length;m++){var f=this.meterColors[m]||this.colors[m%this.colors.length],y=m>0?u[m-1]:0,x=m<u.length-1?u[m]:this.xAxisMax;this.toRender({p:["drawLine","arc",p,g,n,n,f,S,!1,y*l-c,x*l-c],t:"Axes"})}if(this.xAxisTicksMinorShow)for(m=0;m<this.xAxisMinorValues.length-1;m++)if(this.xAxisMinorValues[m]>this.xAxisMin&&this.xAxisMinorValues[m]<=this.xAxisMax){x=this.xAxisMinorValues[m]*l-c;var v=n*Math.cos(x)+p,b=n*Math.sin(x)+g,A=(n+a)*Math.cos(x)+p,w=(n+a)*Math.sin(x)+g;this.toRender({p:["drawLine","line",v,b,A,w,this.xAxisTickColor],t:"Axes"})}for(m=0;m<this.xAxisValuesRaw.length-1;m++)if(this.xAxisValuesRaw[m]<=this.xAxisMax){x=this.xAxisValuesRaw[m]*l-c,f="gauge"==this.meterType?this.background:this.xAxisTickColor,v=(n-(a+("gauge"==this.meterType?0:2*this.margin)))*Math.cos(x)+p,b=(n-(a+("gauge"==this.meterType?0:2*this.margin)))*Math.sin(x)+g,A=(n+a)*Math.cos(x)+p,w=(n+a)*Math.sin(x)+g;var C="gauge"==this.meterType?(n+(a+4*this.margin))*Math.cos(x)+p:(n-(a+6*this.margin))*Math.cos(x)+p,T="gauge"==this.meterType?(n+(a+4*this.margin))*Math.sin(x)+g:(n-(a+6*this.margin))*Math.sin(x)+g;this.toRender({p:["drawLine","line",v,b,A,w,f,"gauge"==this.meterType&&this.margin],t:"Axes"}),this.toRender({p:["drawText",this.xAxisValuesRaw[m],C,T,this.axisTickFont,this.axisTickColor,"center","middle"],t:"Axes"})}this.toRender({p:["drawText",d,p,g-2*this.getFontPt(h),this.smpTitleFont,this.smpTitleColor,"center","middle"],t:"Axes"})}else if("state"==this.meterType){d=(a=(S=Math.min(this.x,this.y))/1.4)/1.5;this.toRender({p:["drawShape","roundrect",t+this.x/2,e+this.y/2,S,2.5*S,"black","black"],t:"Axes"}),this.toRender({p:["drawShape","pie4",t+this.x/2,e+this.y/2-(a+S/2),S/2,S/2,"black","black",!1,Math.PI],t:"Axes"}),this.toRender({p:["drawShape","pie4",t+this.x/2-d,e+this.y/2-(a+S/4),S/1.5,S/1.5,"black","black"],t:"Axes"}),this.toRender({p:["drawShape","pie4",t+this.x/2+d,e+this.y/2-(a+S/4),S/1.5,S/1.5,"black","black"],t:"Axes"}),this.toRender({p:["drawShape","circle",t+this.x/2,e+this.y/2-a,S/2,S/2,this.meterBackgroundColor,this.meterBackgroundColor],t:"Axes"}),this.toRender({p:["drawShape","pie4",t+this.x/2-d,e+this.y/2-(0+S/4),S/1.5,S/1.5,"black","black"],t:"Axes"}),this.toRender({p:["drawShape","pie4",t+this.x/2+d,e+this.y/2-(0+S/4),S/1.5,S/1.5,"black","black"],t:"Axes"}),this.toRender({p:["drawShape","circle",t+this.x/2,e+this.y/2,S/2,S/2,this.meterBackgroundColor,this.meterBackgroundColor],t:"Axes"}),this.toRender({p:["drawShape","pie4",t+this.x/2-d,e+this.y/2-(S/4-a),S/1.5,S/1.5,"black","black"],t:"Axes"}),this.toRender({p:["drawShape","pie4",t+this.x/2+d,e+this.y/2-(S/4-a),S/1.5,S/1.5,"black","black"],t:"Axes"}),this.toRender({p:["drawShape","circle",t+this.x/2,e+this.y/2+a,S/2,S/2,this.meterBackgroundColor,this.meterBackgroundColor],t:"Axes"}),this.toRender({p:["drawShape","rectangle",t+this.x/2,e+this.y/2+(a+S/2),S/2,S/2,"black","black"],t:"Axes"})}else if("digital"==this.meterType){p=t+this.x/2,g=e+this.y/2,u=this.meterSegments.length?this.meterSegments:this.xAxisValuesRaw;this.toRender({p:["drawLine","arc",p,g,n,n,this.meterBackgroundColor,S,!1,0,2*Math.PI],t:"Axes"});for(m=0;m<u.length;m++){f=this.meterColors[m]||this.colors[m%this.colors.length],y=m>0?u[m-1]:0,x=m<u.length-1?Math.min(o,u[m]):Math.min(o,this.xAxisMax);y>o||this.toRender({p:["drawLine","arc",p,g,n,n,f,S,!1,y*l-c,x*l-c],t:"Axes"})}for(m=0;m<this.xAxisValuesRaw.length-1;m++)if(this.xAxisValuesRaw[m]<this.xAxisMax){x=this.xAxisValuesRaw[m]*l-c,v=(n-a)*Math.cos(x)+p,b=(n-a)*Math.sin(x)+g,A=(n+a)*Math.cos(x)+p,w=(n+a)*Math.sin(x)+g,C=(n+a+4*this.margin)*Math.cos(x)+p,T=(n+a+4*this.margin)*Math.sin(x)+g;this.toRender({p:["drawLine","line",v,b,A,w,this.background,.3*S],t:"Axes"}),this.toRender({p:["drawText",this.xAxisValuesRaw[m],C,T,this.axisTickFont,this.axisTickColor,"center","middle"],t:"Axes"})}this.toRender({p:["drawText",d,p,g+10+this.getFontPt(h)/2,this.smpTitleFont,this.smpTitleColor,"center","middle"],t:"Axes"})}else if("number"==this.meterType){p=t+this.x/2,g=e+this.y/2;this.toRender({p:["drawText",d,p,g+10+this.getFontPt(h)/2,this.smpTitleFont,this.smpTitleColor,"center","middle"],t:"Axes"})}else{var S=Math.min(this.x,this.y);l=("horizontal"==this.meterType?this.x:this.y)/this.xAxisRange,u=this.meterSegments.length?this.meterSegments:this.xAxisValuesRaw;this.toRender({p:["drawShape","rectangle",t+this.x/2,e+this.y/2,this.x,this.y,this.meterBackgroundColor,this.meterBackgroundColor],t:"Axes"});for(c=0,m=0;m<u.length;m++){f=this.meterColors[m]||this.colors[m%this.colors.length],y=(m>0?u[m-1]:0)*l;var M=(x=(m<u.length-1?Math.min(o,u[m]):Math.min(o,this.xAxisMax))*l)-y;y/l>o||("horizontal"==this.meterType?this.toRender({p:["drawShape","rectangle",t+M/2+c,e+this.y/2,M,this.y,f,f],t:"Axes"}):this.toRender({p:["drawShape","rectangle",t+this.x/2,e+this.y-(M/2+c),this.x,M,f,f],t:"Axes"}),c+=M)}"vertical"==this.meterType?this.toRender({p:["drawText",d,t-this.x/2,e+this.y/2,this.smpTitleFont,this.smpTitleColor,"center","middle",-Math.PI/2],t:"Axes"}):this.toRender({p:["drawText",d,t+this.x/2,e-this.y/4,this.smpTitleFont,this.smpTitleColor,"center","middle"],t:"Axes"})}if(!this.meterType.match(this.graphOrientation))return}if("vertical"==this.graphOrientation){var D=this.xAxisMin<0?e+this.y-(0-this.xAxisMin)*this.xAxisUnit:e+this.y;if(this.xAxisTicksMinorShow)for(m=0;m<this.xAxisMinorValues.length;m++){if((z=this.xAxisMinorValues[m])>=this.xAxisMin&&z<=this.xAxisMax){var k=this.get1DTop()+this.y-(z-this.xAxisMin)*this.xAxisUnit;this.toRender({p:["drawLine",i,t,k,t+("Meter"==this.graphType?this.margin:this.x),k,this.xAxisTickColor,this.outlineWidth/3,"butt"],b:D,t:"Axes"})}}var L=this.get1DLeft()-2*this.margin;for(v=t,A=t+("Meter"==this.graphType?this.margin:this.x),m=0;m<this.xAxisValuesRaw.length;m++){if((z=this.xAxisValuesRaw[m])>=this.xAxisMin&&z<=this.xAxisMax){k=this.get1DTop()+this.y-(z-this.xAxisMin)*this.xAxisUnit;this.xAxisTicksMajorShow&&this.toRender({p:["drawLine",i,v,k,A,k,this.xAxisTickColor,this.outlineWidth/2,"butt"],b:D,t:"Axes"}),(this.xAxisShow||this.xAxisShowLayout)&&this.toRender({p:["drawLine",i,v-this.margin,k,v,k,this.xAxisTickColor,this.outlineWidth/2,"butt"],b:D,t:"Axes"}),(this.xAxis2Show||this.xAxis2ShowLayout)&&this.toRender({p:["drawLine",i,A,k,A+this.margin,k,this.xAxisTickColor,this.outlineWidth/2,"butt"],b:D,t:"Axes"})}}}else{D=this.xAxisMin<0?t+this.x-(0-this.xAxisMin)*this.xAxisUnit:t;if(this.xAxisTicksMinorShow)for(m=0;m<this.xAxisMinorValues.length;m++){if((z=this.xAxisMinorValues[m])>=this.xAxisMin&&z<=this.xAxisMax){L=this.graphInverted?t+this.x-(z-this.xAxisMin)*this.xAxisUnit:t+(z-this.xAxisMin)*this.xAxisUnit;this.toRender({p:["drawLine",i,L,e,L,e+("Meter"==this.graphType?this.margin:this.y),this.xAxisTickColor,this.outlineWidth/3,"butt"],b:D,t:"Axes"})}}k=this.get1DTop()-(2*this.margin+this.axisTickFontSize/2),b=e,w=e+("Meter"==this.graphType?this.margin:this.y),T=b-((this.layoutValid&&"wrap"==this.layoutType?(this.segregateVariablesBy.length+this.segregateSamplesBy.length)*this.layoutLabelBoxThickness:0)+this.margin);var I="vertical"!=this.graphOrientation&&("cols"==this.layoutType||"rows"==this.layoutType&&this.segregateVariablesBy.length+this.segregateSamplesBy.length>1);for(m=0;m<this.xAxisValuesRaw.length;m++){var z;if((z=this.xAxisValuesRaw[m])>=this.xAxisMin&&z<=this.xAxisMax){L=this.graphInverted?t+this.x-(z-this.xAxisMin)*this.xAxisUnit:t+(z-this.xAxisMin)*this.xAxisUnit;this.xAxisTicksMajorShow&&this.toRender({p:["drawLine",i,L,b,L,w,this.xAxisTickColor,this.outlineWidth/2,"butt"],b:t,t:"Axes"}),(this.xAxisShow||this.xAxisShowLayout)&&(this.layoutValid?this.layoutAdjust?this.toRender({p:["drawLine",i,L,b-this.margin,L,b,this.xAxisTickColor,this.outlineWidth/2,"butt"],b:D,t:"Axes"}):I||this.toRender({p:["drawLine",i,L,T,L,T+this.margin,this.xAxisTickColor,this.outlineWidth/2,"butt"],b:D,t:"Axes"}):this.toRender({p:["drawLine",i,L,b-this.margin,L,b,this.xAxisTickColor,this.outlineWidth/2,"butt"],b:D,t:"Axes"})),(this.xAxis2Show||this.xAxis2ShowLayout)&&this.toRender({p:["drawLine",i,L,w,L,w+this.margin,this.xAxisTickColor,this.outlineWidth/2,"butt"],b:D,t:"Axes"})}}}},this.drawDendrograms=function(){if("Treemap"!=this.graphType&&"TagCloud"!=this.graphType&&"Sankey"!=this.graphType&&"Tree"!=this.graphType&&"Meter"!=this.graphType&&!this.isGroupedData){if(this.showSmpDendrogram){var t=!1;this.isOncoprint&&this.showHeatmapOncoprint&&"bottom"==this.oncoprintHeatmapPosition&&(t=!0),this.drawDendrogram("smpDendrogram",t)}if("Heatmap"==this.graphType&&this.showVarDendrogram){t=!1;this.isOncoprint&&this.showHeatmapOncoprint&&"right"==this.oncoprintHeatmapPosition&&(t=!0),this.drawDendrogram("varDendrogram",t)}}},this.getDendrogramClipArea=function(t){var e=this.get1DLeft(),i=this.get1DTop();return"varDendrogram"==t?"bottom"==this.varDendrogramPosition?[e,i+this.y,e+this.x+1,i+this.y+this.bottom]:[e,0,e+this.x+1,i]:"vertical"==this.graphOrientation?"bottom"==this.smpDendrogramPosition?[e,i+this.y,e+this.x+1,i+this.y+this.bottom]:"top"==this.smpDendrogramPosition?[e,this.margin,e+this.x+1,i]:[e,this.marginTop+this.offsetY,e+this.x+1,i]:"right"==this.smpDendrogramPosition?[e+this.x,i,e+this.x+this.right,i+this.y+1]:"left"==this.smpDendrogramPosition?[this.margin,i,e,i+this.y+1]:[this.marginLeft+this.offsetX,i,e,i+this.y+1]},this.getDendrogramBlockSize=function(t){if("Heatmap"!=this.graphType){var e;if("BarLine"!=this.graphType&&"DotLine"!=this.graphType||!this.xAxis2Title)e=this.graphType.match(/Stacked|Line|Area/)?1:this.varIndices.length;else{t=this.getVariablesVisibleByAxis("xAxis");var i=this.getVariablesVisibleByAxis("xAxis2");e=Math.max(t.length,i.length)}return e*this.rbs+this.blockSeparation}return"varDendrogram"==t?this.cbs:this.rbs},this.getDendrogramTopOffset=function(t,e){var i=this.get1DTop(e),s="varDendrogram"==t?"showVarDendrogram":"showSmpDendrogram",a=0,r=this.getDendrogramBlockSize(t),n=this.getDendrogramInverse(t);return this[s]&&this[t]&&("varDendrogram"==t?"bottom"==this.varDendrogramPosition?(a=i+this.y+this.bottom-(this.dendrogramHeight+this.margin),"bottom"==this.varTitleLabelPosition&&(a-=this.getVariableTitleHeight()),this.isOncoprint&&(a-=this.legend.oncoprint.height),this.legendInside||"bottom"!=this.legendPosition||(a-=this.legend.height),a=n<0?a+this.dendrogramHeight:a):(a="bottom"!=this.varTitleLabelPosition?i-(this.varOverlaysThicknessTop+this.getVariableLabelLength()+this.getVarTreeHeight()):i-(this.margin+this.varOverlaysThicknessTop+this.getVarTreeHeight()),this.legendInside||"top"!=this.legendPosition||(a+=this.legend.height)):"vertical"==this.graphOrientation?(a="bottom"==this.smpDendrogramPosition?i+this.y+this.bottom-(this.getSampleTitleHeight()+this.getLegendHeight("bottom")+this.getSmpTreeWidthHeight()):i-(this.getSmpTreeWidthHeight()+this.smpOverlaysThicknessTop),a=n<0?a+this.dendrogramHeight:a):(a=this.graphType.match(/Area/)?i:i+r/2,this.isGroupedData?this.grpIndicesStart>-1&&(a-=r*this.grpIndicesStart):this.smpIndicesStart>-1&&(a-=r*this.smpIndicesStart))),a},this.getDendrogramLeftOffset=function(t,e){var i=this.get1DLeft(e),s="varDendrogram"==t?"showVarDendrogram":"showSmpDendrogram",a=0,r=this.getDendrogramBlockSize(t),n=this.getDendrogramInverse(t);return this[s]&&this[t]&&("varDendrogram"==t?(a=i+r/2,this.varIndicesStart>-1&&(a-=r*this.varIndicesStart)):"vertical"==this.graphOrientation?(a=this.graphType.match(/Area/)?i:i+r/2,this.isGroupedData?this.grpIndicesStart>-1&&(a-=r*this.grpIndicesStart):this.smpIndicesStart>-1&&(a-=r*this.smpIndicesStart)):"right"==this.smpDendrogramPosition?(a=i+this.x+this.smpOverlaysThicknessRight+("right"==this.smpTitleLabelPosition?this.getSampleLabelLength():0)+this.margin,a=n<0?a+this.dendrogramHeight:a):a=this.marginLeft+this.offsetX+this.margin+this.getSampleTitleHeight()),a},this.getDendrogramInverse=function(t){return"varDendrogram"==t?"top"==this.varDendrogramPosition?1:-1:"vertical"==this.graphOrientation?(this.smpDendrogramPosition.match(/top|bottom/)||(this.smpDendrogramPosition="top"),"top"==this.smpDendrogramPosition?1:-1):(this.smpDendrogramPosition.match(/left|right/)||(this.smpDendrogramPosition="left"),"left"==this.smpDendrogramPosition?1:-1)},this.drawDendrogram=function(t,e){if("TagCloud"!=this.graphType&&"Sankey"!=this.graphType&&"Tree"!=this.graphType&&"Meter"!=this.graphType&&this[t]){var i=this,s=this[t],a=this.getDendrogramBlockSize(t),r=this.getDendrogramInverse(t),n=this.getDendrogramClipArea(t),o=this.getDendrogramTopOffset(t,e),h=this.getDendrogramLeftOffset(t,e),l=s.useHeight?this.dendrogramHeight/s.height:this.dendrogramHeight/s.max,c="varDendrogram"!=t&&"vertical"!=this.graphOrientation,d=0,p=function(e){if(e.children)for(var n=0;n<e.children.length;n++)p(e.children[n]),e.children[n].children&&(e.children[n].color=e.children[n].children[0].color);else e.color="varDendrogram"==t?i.getDendrogramColor(e.name):i.getDendrogramColor(!1,e.name);var d;null!=e.mid&&(d=s.useHeight?e.height?l*(s.height-e.height)*r:i.dendrogramHeight*r:l*e.depth*r,c?(e.x=h+d,e.y=o+a*e.mid):(e.x=h+a*e.mid,e.y=o+d))},g=function(e){if(e.children){for(var a=e.x,r=e.y,l=(e.color,0);l<e.children.length;l++){var c,p=e.children[l].x,u=e.children[l].y,m=e.children[l].color;"vertical"==i.graphOrientation||"varDendrogram"==t?(c=i.toRender({p:["drawLine","line",a,r,p,r,m,!1,"butt",!1,!1,!0,n],i:[t+":"+d+++":"+e.nodeId],b:[a,o,p,o],t:t}),i.toRender({p:["drawLine","line",p,r,p,u,m,!1,"butt",!1,!1,!0,n],i:[t+":"+d+++":"+e.nodeId],g:c,b:[p,o,p,o],t:t})):(c=i.toRender({p:["drawLine","line",a,r,a,u,m,!1,"butt",!1,!1,!0,n],i:[t+":"+d+++":"+e.nodeId],b:[h,r,h,u],t:t}),i.toRender({p:["drawLine","line",a,u,p,u,m,!1,"butt",!1,!1,!0,n],i:[t+":"+d+++":"+e.nodeId],b:[h,u,h,u],t:t})),g(e.children[l])}if(null!=e.nodeId&&e.children.length>1){var f=e.name?e.name:"",y=s.useHeight?e.height:e.depth;i.toRender({p:["drawShape","circle",e.x,e.y,2*i.margin,2*i.margin,"rgba(0,0,0,0)","rgba(0,0,0,0)"],i:[e.nodeId+"-"+y+"-"+t+"-"+f],t:t})}}};this.toRender({p:["disableGradientTransparencyShadow"],t:t}),p(s),g(s),this.toRender({p:["enableGradientTransparencyShadow"],t:t})}},this.draw1DYLayout=function(){this.smpInfo=[],this.varInfo=[],"Treemap"!=this.graphType&&"TagCloud"!=this.graphType&&"Sankey"!=this.graphType&&"Tree"!=this.graphType&&"Meter"!=this.graphType&&(this.smpTitle&&this.draw1DYLayoutSampleTitle(),"Heatmap"==this.graphType?(this.draw1DYLayoutHeatmap(),this.isOncoprint&&this.showHeatmapOncoprint&&this.draw1DYLayoutHeatmap(!0),this.varTitle&&this.draw1DYLayoutVariableTitle()):this.draw1DYLayoutNoHeatmap())},this.draw1DYLayoutSampleTitle=function(){var t,e,i=this.get1DLeft()+this.margin,s=this.get1DTop();"vertical"==this.graphOrientation?(s-=this.margin,t=i+this.x/2,e=this.segregateVariablesBy.length>0?s+this.y+this.bottom+this.getSampleLabelLength()+2*this.margin-(this.margin+this.smpTitleFontSize/2):s+this.y+this.bottom-(this.smpTitleFontSize/2-this.margin/2),e-=this.getLegendHeight("bottom"),this.toRender({p:["drawText",this.smpTitle,t,e,this.smpTitleFont,this.smpTitleColor,"center","middle"],t:"Axes"})):(t=this.segregateVariablesBy.length>1?this.marginLeft+this.getFontHeight()+2*this.margin+this.smpTitleFontSize/2:this.segregateVariablesBy.length>0?this.marginLeft+this.margin*(this.segregateSamplesBy.length>0?5:0)+this.smpTitleFontSize/2:this.marginLeft+this.offsetX+this.smpTitleFontSize/2-this.margin/2,e=s+this.y/2,this.toRender({p:["drawText",this.smpTitle,t,e,this.smpTitleFont,this.smpTitleColor,"center","middle",-Math.PI/2],t:"Axes"}))},this.draw1DYLayoutVariableTitle=function(){var t,e,i=this.get1DLeft()+this.margin,s=this.get1DTop();t=i+this.x/2,"bottom"!=this.varTitleLabelPosition?(e=this.offsetY+2*this.margin+this.top,e-=this.getVariableLabelLength(),e-=this.varOverlaysThicknessTop,"top"==this.varDendrogramPosition&&(e-=this.getVarTreeHeight())):e=s+this.y+this.bottom,this.toRender({p:["drawText",this.varTitle,t,e,this.varTitleFont,this.varTitleFontColor,"center","bottom"],t:"Axes"})},this.draw1DYLayoutHeatmap=function(t){var e,i,s=this.get1DLeft(t)+this.margin,a=this.get1DTop(t),r=this.get1DIndices(),n=this.get1DSamples(),o=this.get1DLabels(),h=this.adjustAspectRatio?0:.3*this.rbs;if(this.showSampleNames&&(!t||t&&this.oncoprintHeatmapPosition.match(/top|bottom/))){var l=90==Math.abs(this.smpLabelRotate)?"center":"right";if(this.isGraphTime){var c=this.y/r.length,d=a+(v=c/2);e=s-2*this.margin,s+this.x+this.margin,a+this.y;for(var p=0;p<this.timeValueIndices.length;p++)i=p*c+d+h,this.smpInfo[p]=i,this.smpLabelRotate?this.toRender({p:["drawText",this.timeValues[p],e-this.margin,i+h,this.smpLabelFont,x,l,"middle",this.smpLabelRotate*Math.PI/180],i:["Smp-"+p],t:"Labels",h:this.isHidden(!1,p)}):this.toRender({p:["drawText",this.timeValues[p],e,i+h,this.smpLabelFont,x,"right","middle"],i:["Smp-"+p],t:"Labels",h:this.isHidden(!1,p)})}else{e=s+("right"==this.smpTitleLabelPosition?this.x:0),s+this.x+this.margin,i=a+this.blockSeparation/2,a+this.y;var g="right"==this.smpTitleLabelPosition?this.smpOverlaysThicknessRight:this.smpOverlaysThicknessLeft;for(p=0;p<r.length;p++){var u=p/this.smpLabelInterval;if(parseInt(u)==parseFloat(u)){var m=r[p],f=this.shortenText(o?o[m]:n[m],this.maxSmpStringLen),y=(2*this.margin+g)*("right"==this.smpTitleLabelPosition?-1:1),x=this.getSmpColor(n[m]);this.smpInfo[p]=i,this.smpLabelImage||(this.smpLabelRotate?this.toRender({p:["drawText",f,e-(y+this.margin),i+h,this.smpLabelFont,x,l,"middle",this.smpLabelRotate*Math.PI/180],i:["Smp-"+m],t:"Labels",h:this.isHidden(!1,m)}):this.toRender({p:["drawText",f,e-y,i+h,this.smpLabelFont,x,"right"==this.smpTitleLabelPosition?"left":"right","middle"],i:["Smp-"+m],t:"Labels",h:this.isHidden(!1,m)}))}i+=this.rbs}}}if(this.showVariableNames&&(!t||t&&this.oncoprintHeatmapPosition.match(/right|left/))){var v=this.cbs/2,b=90==Math.abs(this.varLabelRotate)?"center":"bottom"!=this.varTitleLabelPosition?"left":"right",A="bottom"!=this.varTitleLabelPosition?"left":"right";this.varTitleLabelPosition;s-=this.margin,i="bottom"!=this.varTitleLabelPosition?a-(this.margin+this.varOverlaysThicknessTop):i=a+this.y+this.margin,"top"!=this.varTitleLabelPosition&&this.varOverlays.length>0&&this.showOverlays&&"Heatmap"==this.graphType&&(i+=this.varOverlaysThicknessBottom),"bottom"!=this.varTitleLabelPosition?a+this.y+this.margin:a-this.margin;for(p=0;p<this.varIndices.length;p++){e=s+p*this.cbs+v;u=p/this.varLabelInterval;if(parseInt(u)==parseFloat(u)){m=this.varIndices[p];var w=this.shortenText(this.data.y.vars[m],this.maxVarStringLen);x=this.getVarColor(this.data.y.vars[m]);this.varInfo[p]=e,this.varLabelRotate?this.toRender({p:["drawText",w,e,i,this.varLabelFont,x,b,"middle",-Math.PI/2+this.varLabelRotate*Math.PI/180],i:["Var-"+m],t:"Labels",h:this.isHidden(m)}):this.toRender({p:["drawText",w,e,i,this.varLabelFont,x,A,"middle",-Math.PI/2],i:["Var-"+m],t:"Labels",h:this.isHidden(m)})}}}},this.draw1DYLayoutNoHeatmap=function(){var t,e,i,s,a,r=this.get1DLeft()+this.margin,n=this.get1DTop(),o=this.get1DIndices(),h=this.get1DSamples(),l=this.get1DLabels(),c={},d=this,p=function(t,e,i,s,a){var r=t+1,n=i,c=l?l[o[t]]:h[o[t]],p=l?l[o[r]]:h[o[r]],u=0;if(90!=d.smpLabelRotate&&d.isGroupedData)return i+d.margin;for(c&&(c=d.isArray(c)?c:c.toString().split(" :: ")[e]),p&&(p=d.isArray(p)?p:p.toString().split(" :: ")[e]);d.isSameObject(c,p);)u+=d.blockSeparation+g,n+=d.blockSeparation+g,r++,(p=l?l[o[r]]:h[o[r]])&&(p=d.isArray(p)?p:p.toString().split(" :: ")[e]);return i==n?i:("vertical"==d.graphOrientation?d.toRender({p:["drawLine","line",i,s-d.margin,i+u,s-d.margin,a],t:"Labels"}):d.toRender({p:["drawLine","line",s+d.margin,i,s+d.margin,i+u,a],t:"Labels"}),i+u/2)};if(this.showSampleNames){var g=this.get1DCompBlockMax()*this.rbs;if("Gantt"==this.graphType&&function(){var t=o.length;o=[];for(var e=0;e<t;e++)o.push(e)}(),"vertical"==this.graphOrientation){var u=this.smpLabelRotate>0?-2:2,m=90==Math.abs(this.smpLabelRotate)?"center":u>0?"left":"right";if(this.isGraphTime){var f=this.plotByVariable?this.x/this.varIndices.length/(o.length+1):this.x/o.length,y=this.graphType.match(/Area/)?0:this.plotByVariable?r-this.margin:r+(this.blockSeparation+g)/2;if(e=n+this.y+this.smpOverlaysThicknessBottom+1.5*this.margin,this.plotByVariable)for(var x=0;x<this.varIndices.length;x++){for(var v=0;v<this.timeValueIndices.length;v++){var b=v/this.smpLabelInterval;parseInt(b)==parseFloat(b)&&(t=v*f+y+f,this.smpInfo[v]=t,this.smpLabelRotate?this.toRender({p:["drawText",this.timeValues[v],t,e+this.smpLabelFontSize/2,this.smpLabelFont,C,m,"middle",Math.PI/u+this.smpLabelRotate*Math.PI/180],i:["Smp-"+v],t:"Labels"}):this.toRender({p:["drawText",this.timeValues[v],t,e,this.smpLabelFont,C,"right","middle",-Math.PI/2],i:["Smp-"+v],t:"Labels"}))}y+=this.blockSeparation+g}else for(x=0;x<this.timeValueIndices.length;x++){b=x/this.smpLabelInterval;t=x*f+y,this.smpInfo[x]=t,parseInt(b)==parseFloat(b)&&(this.smpLabelRotate?this.toRender({p:["drawText",this.timeValues[x],t,e+this.smpLabelFontSize/2,this.smpLabelFont,C,m,"middle",Math.PI/u+this.smpLabelRotate*Math.PI/180],i:["Smp-"+x],t:"Labels"}):this.toRender({p:["drawText",this.timeValues[x],t,e,this.smpLabelFont,C,"right","middle",-Math.PI/2],i:["Smp-"+x],t:"Labels"}))}}else if(t=this.plotByVariable?r+(this.blockSeparation+this.rbs)/2:this.graphType.match(/Area|ParallelCoordinates/)?r:r+(this.blockSeparation+g)/2-(this.margin*(!this.smpLabelRotate||90==this.smpLabelRotate)?1:4),e=n,a=(i=n+this.y)+this.smpOverlaysThicknessBottom+.5*this.margin+this.margin*(this.layoutValid?1:2),this.plotByVariable)for(x=0;x<this.varIndices.length;x++){for(v=0;v<o.length;v++){b=v/this.smpLabelInterval;if(parseInt(b)==parseFloat(b)){var A=o[v],w=this.shortenText(h[A],this.maxSmpStringLen),C=this.getSmpColor(h[A]);this.smpInfo[v]=t,this.smpLabelImage&&CanvasXpress.cacheImages.hasOwnProperty(h[A]+".png")||(this.smpLabelRotate?this.toRender({p:["drawText",w,t,a+this.smpLabelFontSize/2,this.smpLabelFont,C,m,"middle",Math.PI/u+this.smpLabelRotate*Math.PI/180],i:["Smp-"+A],t:"Labels"}):this.toRender({p:["drawText",w,t-this.margin,a,this.smpLabelFont,C,"right","middle",-Math.PI/2],i:["Smp-"+A],t:"Labels"}))}t+=this.rbs}t+=this.blockSeparation}else{var T=0;for(x=0;x<o.length;x++){var S=o[x];b=x/this.smpLabelInterval,w=l?l[S]:h[S],C=this.getSmpColor(h[S]);if(parseInt(b)==parseFloat(b)){this.smpInfo[x]=t;var M=l?l[o[T]]:h[o[T]],D=this.isArray(M)?M:M.toString().split(" :: ");if(x>0&&this.parseInt(this.smpInfo[x])<this.parseInt(this.smpInfo[T]+this.smpLabelFontSize)){if(this.isGroupedData&&90==this.smpLabelRotate){w=this.isArray(w)?w:w.toString().split(" :: ");for(v=0;v<w.length;v++)p(x,v,t,a+v*(this.smpLabelFontSize+this.margin),C)}t+=this.blockSeparation+g;continue}if(this.isGroupedData&&90==this.smpLabelRotate){var k=this.isArray(w)?w:w.toString().split(" :: ");for(v=0;v<k.length;v++){x>0&&D[v]!=k[v]&&delete c[k[v]];var L=k[v],I=p(x,v,t,z=a+v*(this.smpLabelFontSize+this.margin),C);c.hasOwnProperty(L)||(this.toRender({p:["drawText",L,I,z+this.smpLabelFontSize/2,this.smpLabelFont,C,m,"middle",Math.PI/u+this.smpLabelRotate*Math.PI/180],i:["Smp-"+S],t:"Labels"}),this.toRender({p:["drawLine","line",I,i,I,i+this.margin,this.xAxisTickColor],t:"Labels"}),c[L]=!0)}}else{w=this.shortenText(w,this.maxSmpStringLen),x>0&&M!=w&&(c={});I=p(x,0,t,a,C);if(!c.hasOwnProperty(w)){if(this.smpLabelImage&&CanvasXpress.cacheImages.hasOwnProperty(w+".png")){var z,N=a+(z=this.getSampleLabelLength())/2-this.margin;this.toRender({p:["drawShape","image",I-this.smpLabelFontSize/2,N,z,z,!1,!1,!!this.smpLabelImageRound&&"round",!1,!1,!1,!1,!1,!1,w+".png"],i:["Smp-"+S],t:"Labels"})}else this.smpLabelRotate?this.toRender({p:["drawText",w,I,a+this.smpLabelFontSize/2,this.smpLabelFont,C,m,"middle",Math.PI/u+this.smpLabelRotate*Math.PI/180],i:["Smp-"+S],t:"Labels"}):this.toRender({p:["drawText",w,I-this.margin,a,this.smpLabelFont,C,"right","middle",-Math.PI/2],i:["Smp-"+S],t:"Labels"});this.toRender({p:["drawLine","line",I-this.margin,i,I-this.margin,i+this.margin,this.xAxisTickColor],t:"Labels"}),c[w]=!0}}T=x}t+=this.blockSeparation+g}}}else{m=90==Math.abs(this.smpLabelRotate)?"center":"right";if(this.isGraphTime){f=this.plotByVariable?this.y/this.varIndices.length/(o.length+1):this.y/o.length,y=this.graphType.match(/Area/)?0:this.plotByVariable?n:n+(this.blockSeparation+g)/2;if(t=r-2*this.margin,this.plotByVariable)for(x=0;x<this.varIndices.length;x++){for(v=0;v<this.timeValueIndices.length;v++){b=v/this.smpLabelInterval;parseInt(b)==parseFloat(b)&&(e=v*f+y+f,this.smpInfo[v]=e,this.smpLabelRotate?this.toRender({p:["drawText",this.timeValues[v],t-this.smpLabelFontSize/2,e,this.smpLabelFont,C,m,"middle",this.smpLabelRotate*Math.PI/180],i:["Smp-"+v],t:"Labels"}):this.toRender({p:["drawText",this.timeValues[v],t,e,this.smpLabelFont,C,"right","middle"],i:["Smp-"+v],t:"Labels"}))}y+=this.blockSeparation+g}else for(x=0;x<this.timeValueIndices.length;x++){b=x/this.smpLabelInterval;e=x*f+y,this.smpInfo[x]=e,parseInt(b)==parseFloat(b)&&(this.smpLabelRotate?this.toRender({p:["drawText",this.timeValues[x],t-this.smpLabelFontSize/2,e,this.smpLabelFont,C,m,"middle",this.smpLabelRotate*Math.PI/180],i:["Smp-"+x],t:"Labels"}):this.toRender({p:["drawText",this.timeValues[x],t,e,this.smpLabelFont,C,"right","middle"],i:["Smp-"+x],t:"Labels"}))}}else if(e=this.plotByVariable?n+(this.blockSeparation+this.rbs)/2:this.graphType.match(/Area|ParallelCoordinates/)?n:n+(this.blockSeparation+g)/2,t=r,r+this.x,s=t-(this.smpOverlaysThicknessLeft+2*this.margin)+this.margin*(this.layoutValid?-1:-2),this.plotByVariable)for(x=0;x<this.varIndices.length;x++){for(v=0;v<o.length;v++){b=v/this.smpLabelInterval;if(parseInt(b)==parseFloat(b)){A=o[v],w=this.shortenText(h[A],this.maxSmpStringLen),C=this.getSmpColor(h[A]);this.smpInfo[v]=e,this.smpLabelImage&&CanvasXpress.cacheImages.hasOwnProperty(h[A]+".png")||(this.smpLabelRotate?this.toRender({p:["drawText",w,s-this.smpLabelFontSize/2,e,this.smpLabelFont,C,m,"middle",this.smpLabelRotate*Math.PI/180],i:["Smp-"+S],t:"Labels"}):this.toRender({p:["drawText",w,s,e,this.smpLabelFont,C,"right","middle"],i:["Smp-"+S],t:"Labels"}))}e+=this.rbs}e+=this.blockSeparation}else if(o)for(T=0,x=0;x<o.length;x++){S=o[x],b=x/this.smpLabelInterval,w=l?l[S]:h[S],C=this.getSmpColor(h[S]);if(parseInt(b)==parseFloat(b)){this.smpInfo[x]=e;M=l?l[o[T]]:h[o[T]],D=this.isArray(M)?M:M.toString().split(" :: ");if(x>0&&this.parseInt(this.smpInfo[x])<this.parseInt(this.smpInfo[T]+this.smpLabelFontSize)){if(this.isGroupedData&&90==this.smpLabelRotate){w=this.isArray(w)?w:w.toString().split(" :: ");for(v=0;v<w.length;v++)p(x,v,e,s-v*(this.smpLabelFontSize+this.margin),C)}e+=this.blockSeparation+g;continue}if(this.isGroupedData&&90==this.smpLabelRotate)for(k=this.isArray(w)?w:w.toString().split(" :: "),v=0;v<k.length;v++){x>0&&D[v]!=k[v]&&delete c[k[v]];L=k[v];var B=p(x,v,e,P=s-v*(this.smpLabelFontSize+this.margin),C);c.hasOwnProperty(L)||(this.toRender({p:["drawText",L,P-this.smpLabelFontSize/2,B,this.smpLabelFont,C,m,"middle",this.smpLabelRotate*Math.PI/180],i:["Smp-"+S],t:"Labels"}),this.toRender({p:["drawLine","line",t-2*this.margin,B,t-this.margin,B,this.xAxisTickColor],t:"Labels"}),c[L]=!0)}else{w=this.shortenText(w,this.maxSmpStringLen),x>0&&M!=w&&(c={});B=p(x,0,e,s,C);if(!c.hasOwnProperty(w)){if(this.smpLabelImage&&CanvasXpress.cacheImages.hasOwnProperty(w+".png")){var P=this.getSampleLabelLength(),R=s+this.margin-P/2;this.toRender({p:["drawShape","image",R,B-this.smpLabelFontSize/2,P,P,!1,!1,!!this.smpLabelImageRound&&"round",!1,!1,!1,!1,!1,!1,w+".png"],i:["Smp-"+S],t:"Labels"})}else this.smpLabelRotate?this.toRender({p:["drawText",w,s-this.smpLabelFontSize/2,B,this.smpLabelFont,C,m,"middle",this.smpLabelRotate*Math.PI/180],i:["Smp-"+S],t:"Labels"}):this.toRender({p:["drawText",w,s,B,this.smpLabelFont,C,"right","middle"],i:["Smp-"+S],t:"Labels"});this.toRender({p:["drawLine","line",t-2*this.margin,B-this.margin,t-this.margin,B-this.margin,this.xAxisTickColor],t:"Labels"}),c[w]=!0}}T=x}e+=this.blockSeparation+g}}}},this.draw1DOverlaysDataPoints=function(t,e,i,s,a,r,n,o,h,l,c,d,p,g,u,m){for(var f,y,x,v,b,A,w,C,T=c,S=d,M=[],D=[],k=[],L={},I=h>=10?Math.min(.2*h,2*this.margin):h>=5?1:0,z=2*I,N=0,B=0;B<n.length;B++)L[n[B]]=N,N++;if("vertical"==l?this.toRender({p:["setClipArea",[c,d-o,this.x,o]],t:"Overlays"}):this.toRender({p:["setClipArea",[c,d,o,this.y]],t:"Overlays"}),"Pie"!=a){if(!g){g=[];var P=[];if(a.match(/Stacked/)){for(var R=!1,O=0;O<s.length;O++){var X=0,F=0;for(B=0;B<e.length;B++){var _=this.getMetadataValue(s[O],"smp"==t?"x":"z",e[B]);r[e[B]].type.match(/Line/)?M.push(_):_>0?X+=_:_<0&&(R=!0,F+=_)}g.push(X),P.push(F)}a.match(/StackedPercent/)?g=R?[-100,100]:[0,100]:(R?g=g.concat(P):g.push(0),M.length>0&&(C=(f=this.range(M))[1]))}else for(B=0;B<e.length;B++)for(O=0;O<s.length;O++){_=this.getMetadataValue(s[O],"smp"==t?"x":"z",e[B]);g.push(_)}}if("Treemap"!=a)if(C>(f=this.range(g))[1]&&(f[1]=C),y=this[this.axisAlgorithm](f[0],f[1],3,this.axisWilkinsonLoose),x=Math.min(f[0],y[0]),b=(o-2)/((v=Math.max(f[1],y[y.length-1]))-x),A=x<0?Math.abs(x)*b:0,u)w=h/u;else{N=0;for(B=0;B<e.length;B++)"Line"!=r[e[B]].type?r[e[B]].type==a&&N++:N++;w=h/N}}var E=w>=10?Math.min(.2*w,2*this.margin):w>=5?1:0,V=2*E;switch(a){case"Area":case"AreaLine":var H=[],G=[],q=[],j=[];for(B=0;B<e.length;B++)if(r[e[B]].type.match(/Line/))D.push(e[B]);else{var U=[];for(O=0;O<s.length;O++){_=this.getMetadataValue(s[O],"smp"==t?"x":"z",e[B]);U.push(_)}H.push(U),G.push(r[e[B]].color),q.push("closed"),j.push([this.capitalize(t)+"Ovr-"+L[e[B]]])}"vertical"==l?this.drawAreaPlot(H,c+h/2,d,this.x-h,o,h,!1,!1,b,x,v,l,!1,G,q,j,!1,p,!1,!0):"Area"==this.graphType?this.drawAreaPlot(H,c,d,o,(s.length-1)*h,h,!1,!1,b,x,v,l,!1,G,q,j,!1,p,!1,!0):this.drawAreaPlot(H,c,d+h/2,o,(s.length-1)*h,h,!1,!1,b,x,v,l,!1,G,q,j,!1,p,!1,!0),D.length>0&&this.draw1DOverlaysDataPoints(t,D,i,s,"Line",r,n,o,h,l,T,S,p,g,D.length,m);break;case"Bar":case"BarLine":case"Dotplot":case"DotLine":case"Line":var Y=this.jitter;this.jitter=!1;for(B=0;B<e.length;B++)if(r[e[B]].type.match(/BarLine|DotLine/)&&"Line"!=a)D.push(e[B]);else{H=[],G=[];var W=[],$=(j=[],[]);q=[];if("Dotplot"==a)for(O=0;O<s.length;O++){_=this.getMetadataValue(s[O],"smp"==t?"x":"z",e[B]);H.push([_]),G.push([r[e[B]].color]),W.push([!1]),j.push([[this.capitalize(t)+"Ovr-"+s[O]+"-"+L[e[B]]]]),$.push([this.margin]),q.push(["circle"])}else for(O=0;O<s.length;O++){_=this.getMetadataValue(s[O],"smp"==t?"x":"z",e[B]);H.push(_),G.push(r[e[B]].color),W.push(!1),j.push([this.capitalize(t)+"Ovr-"+s[O]+"-"+L[e[B]]])}if("Bar"==a)"vertical"==l?this.drawBarPlot(H,!1,c+E,d-A,w-V,h,b,A,x,l,G,W,j,!1,!1,p,!1,!0):this.drawBarPlot(H,!1,c,d+E,w-V,h,b,A,x,l,G,W,j,!1,!1,p,!1,!0);else if("Line"==a)"vertical"==l?this.drawLinePlot(H,!1,c+h/2,d,w,h,b,x,l,G[0],W,!1,j,!1,!1,p,e[B],!0):this.drawLinePlot(H,!1,c,d+h/2,w,h,b,x,l,G[0],W,!1,j,!1,!1,p,e[B],!0);else if("Dotplot"==a){var Q=this.graphType;this.graphType="Dotplot","vertical"==l?this.drawDotPlot(H,!1,c+h/2,d,w,h,b,x,$,l,G,W,q,j,!1,!1,p,e[B],!1,!0):this.drawDotPlot(H,!1,c,d+h/2,w,h,b,x,$,l,G,W,q,j,!1,!1,p,e[B],!1,!0),this.graphType=Q}"vertical"==l&&"Line"!=a&&"Dotplot"!=a?c+=w:"horizontal"==l&&"Line"!=a&&"Dotplot"!=a&&(d+=w)}D.length>0&&this.draw1DOverlaysDataPoints(t,D,i,s,"Line",r,n,o,h,l,T,S,p,g,D.length,m),this.jitter=Y;break;case"Pie":this.showPieValues=!1;for(O=0;O<s.length;O++){this.pieColors=[];for(H=[],j=[],B=0;B<e.length;B++){_=this.getMetadataValue(s[O],"smp"==t?"x":"z",e[B]);this.pieColors.push(r[e[B]].color),H.push(_),j.push([this.capitalize(t)+"Ovr-"+s[O]+"-"+L[e[B]]])}q=this.setPieData(H);"vertical"==l?(this.drawPie(q,c+h/2,d-o/2,Math.min(o/2,h/2)-2,j),c+=h):"horizontal"==l&&(this.drawPie(q,c+o/2,d+h/2,Math.min(o/2,h/2)-2,j),d+=h)}break;case"Stacked":case"StackedLine":case"StackedPercent":case"StackedPercentLine":for(B=0;B<e.length;B++)r[e[B]].type.match(/Line/)?D.push(e[B]):k.push(e[B]);for(O=0;O<s.length;O++){for(H=[],G=[],j=[],q=[],X=0,F=0,B=0;B<k.length;B++){(_=this.getMetadataValue(s[O],"smp"==t?"x":"z",k[B]))>0?X+=_:F+=_}for(B=0;B<k.length;B++){_=this.getMetadataValue(s[O],"smp"==t?"x":"z",k[B]);H.push(_),G.push(r[k[B]].color),q.push(!1),j.push([this.capitalize(t)+"Ovr-"+s[O]+"-"+L[e[B]]])}this.drawStackedPlot(H,c+("vertical"==l?I:0),d+("horizontal"==l?I:0),h-z,!1,!!a.match(/Percent/),[X,F],b,x<0?-x*b:0,l,G,q,j,!1,p,!1,!0),"vertical"==l?c+=h:"horizontal"==l&&(d+=h)}if(D.length>0)if(a.match(/Percent/)){var K={};for(B=0;B<D.length;B++){_=this.getMetadataValue(s[O],"smp"==t?"x":"z",D[B]);K[D[B]]=[],f=this.range(i[D[B]]);for(O=0;O<s.length;O++)K[D[B]][s[O]]=this.percentile(f[0],f[1],_)}this.draw1DOverlaysDataPoints(t,D,K,s,"Line",r,n,o,h,l,T,S,p,g,D.length,m)}else this.draw1DOverlaysDataPoints(t,D,i,s,"Line",r,n,o,h,l,T,S,p,g,D.length,m);break;case"Treemap":K={};var J,Z=this.meta.data["smp"==t?"x":"z"][e[0]];if("String"==Z.type)for(B=0;B<g.length;B++)K.hasOwnProperty(g[B])?K[g[B]]++:K[g[B]]=1;else{var tt=this.isGroupedData?this.data.w:this.data.y;for(B=0;B<s.length;B++)K[tt.smps[s[B]]]=g[B]}"vertical"==l?(J=this.getTreemapOverlay(K,Z,this.x,o,c,d-o),this.drawTreemap(J,0,0)):"horizontal"==l&&(J=this.getTreemapOverlay(K,Z,o,this.y,c,d),this.drawTreemap(J,0,0))}if(this.toRender({p:["resetClipArea"],t:"Overlays"}),"Pie"!=a&&"Treemap"!=a){if(this.disableGradientTransparencyShadow(),"vertical"!=l||u){if("horizontal"==l&&!u){for(st=S-1.5*this.margin,B=0;B<y.length;B++){it=(y[B]-x)*b,et=p?T+p-it:T+it;this.toRender({p:["drawLine","line",et,S-this.margin,et,S,this.plotBoxColor],t:"Overlays"}),this.toRender({p:["drawText",y[B].toString(),et,st,this.overlayFont,this.overlayColor,p?"left":"right","middle",p?-Math.PI/2:Math.PI/2],t:"Overlays"})}m?this.toRender({p:["drawShape","rectangle",T+o/2,S+this.y/2,o,this.y,!1,this.plotBoxColor,"open",!1,1],t:"Overlays"}):this.toRender({p:["drawLine","line",T,S,T+o,S,this.plotBoxColor],t:"Overlays"})}}else{for(var et=T-1.5*this.margin,B=0;B<y.length;B++){var it,st=S-(it=(y[B]-x)*b);this.toRender({p:["drawLine","line",T-this.margin,st,T,st,this.plotBoxColor],t:"Overlays"}),this.toRender({p:["drawText",y[B].toString(),et,st,this.overlayFont,this.overlayColor,"right","middle"],t:"Overlays"})}m?this.toRender({p:["drawShape","rectangle",T+this.x/2,S+1-o/2,this.x,o,!1,this.plotBoxColor,"open",!1,1],t:"Overlays"}):this.toRender({p:["drawLine","line",T,S-o,T,S,this.plotBoxColor],t:"Overlays"})}this.enableGradientTransparencyShadow()}},this.getOverlayClipArea=function(t){var e=this.get1DLeft(),i=this.get1DTop();switch(t){case"top":return[e,this.marginTop+this.offsetY,e+this.x+1,i];case"bottom":return[e,i+this.y,e+this.x+1,i+this.y+this.bottom];case"right":return[e+this.x,i,e+this.x+this.right,i+this.y+1];case"left":return[this.marginLeft+this.offsetX,i,e,i+this.y+1];default:return!1}},this.isDrawOverlayNames=function(){return!this.layoutValid},this.draw1DOverlays=function(){var t,e,i,s,a,r,n,o,h,l,c,d,p={},g={},u=this.get1DLeft(),m=this.get1DTop(),f=this.get1DIndices(),y=this.meta.data;this.smpOverlayInfo={},this.varOverlayInfo={};var x=this,v=function(t,e){return"Numeric"==t.type?x.getColorForValue(t.colorBrew,e):t.colorBy?t.colorBy[e]:t.colors?t.colors[t.order[e]]:void 0};if("Treemap"!=this.graphType&&"TagCloud"!=this.graphType&&"Sankey"!=this.graphType&&"Tree"!=this.graphType&&"Meter"!=this.graphType){if("BarLine"!=this.graphType&&"DotLine"!=this.graphType||!this.xAxis2Title)o=this.graphType.match(/Stacked|Line|Area|Heatmap/)?1:this.plotByVariable?f.length:this.variableBlock;else{var b=this.getVariablesVisibleByAxis("xAxis"),A=this.getVariablesVisibleByAxis("xAxis2");o=Math.max(b.length,A.length)}if(this.showOverlays){if(this.smpOverlays.length>0){l=0;for(var w=0;w<this.smpOverlays.length;w++)g[this.smpOverlays[w]]=l,l++;if(n=o*this.rbs*("BarLine"==this.graphType||"DotLine"==this.graphType?2:1),h=this.isGroupedData?this.data.w.factors:this.data.x,"vertical"==this.graphOrientation){e=m+this.y+(this.layoutValid?0:this.margin);for(w=0;w<this.smpOverlays.length;w++){var C=this.smpOverlays[w],T=this.shortenText(C,this.maxOverlayStringLen);if("-"!=C){if(d=this.getOverlayClipArea(this.smpOverlayProperties[C].position),"top"!=this.smpOverlayProperties[C].position||c||(e=m-this.smpOverlaysThicknessTop+(this.layoutValid?this.margin:0),c=!0),t=this.graphType.match(/Area/)?u-(n+this.blockSeparation)/2:u,i=n+this.blockSeparation,a=0,s=this.smpOverlayProperties[C].thickness||this.overlaysThickness,this.smpOverlayProperties[C].type.match(/Heatmap|Text|Default|Increase|Decrease|Boolean/)){N=this.smpOverlayProperties[C].type,R=this.smpOverlayProperties[C].showName;var S=this.smpOverlayProperties[C].rotate;for(F=0;F<f.length;F++){var M=null!=(E=this.getMetadataValue(f[F],this.isGroupedData?"w":"x",C))?v(y.x[C],E):this.missingDataColor,D=!1;if(F<f.length-1&&(D=this.getMetadataValue(f[F+1],this.isGroupedData?"w":"x",C)),E!==D||"Text"==N||"Boolean"==N){if("Text"!=N&&"Boolean"!=N){var k=t,L=t+i+a,I=e,z=e+s;"Increase"==N?this.toRender({p:["drawShape","path",[k,L,L,k],[z,I,z,z],!1,!1,this.colors[2],!1,!1,!1,!1,!0,d],i:["SmpOvr-"+f[F]+"-"+w],h:this.isHidden(!1,!1,"Property:"+C+":"+E+":x"),t:"Overlays"}):"Decrease"==N?this.toRender({p:["drawShape","path",[k,L,k,k],[I,z,z,I],!1,!1,this.colors[2],!1,!1,!1,!1,!0,d],i:["SmpOvr-"+f[F]+"-"+w],h:this.isHidden(!1,!1,"Property:"+C+":"+E+":x"),t:"Overlays"}):this.toRender({p:["drawShape","rectangle",t+(i+a)/2,e+s/2,i+a,s,M,!1,!1,!1,!1,!0,d],i:["SmpOvr-"+f[F]+"-"+w],h:this.isHidden(!1,!1,"Property:"+C+":"+E+":x"),t:"Overlays"})}!this.showLevelOverlays&&"Text"!=N||"Boolean"==N||("Increase"==N?this.toRender({p:["drawText",this.shortenText(E,this.overlayFontSize,i+a),t+3*this.margin,e+3*this.margin,this.overlayFont,this.overlayColor,"left","middle",!1,i+a-2],t:"Overlays"}):"Decrease"==N?this.toRender({p:["drawText",this.shortenText(E,this.overlayFontSize,i+a),t+i+a-3*this.margin,e+3*this.margin,this.overlayFont,this.overlayColor,"right","middle",!1,i+a-2],t:"Overlays"}):i+a>s&&!S?this.toRender({p:["drawText",this.shortenText(E,this.overlayFontSize,i+a),t+(i+a)/2,e+s/2,this.overlayFont,this.overlayColor,"center","middle",!1,i+a-2],t:"Overlays"}):this.overlayFontSize<i+a&&this.toRender({p:["drawText",this.shortenText(E,this.overlayFontSize,s),t+(i+a)/2,e+s/2,this.overlayFont,this.overlayColor,"center","middle",-Math.PI/2,s-2],t:"Overlays"})),"Boolean"==N&&E&&this.toRender({p:["drawShape","rectangle",t+(i+a)/2,e+s/2,s/2,s/2,"black",!1,!1,!1,!1,!0,d],i:["SmpOvr-"+f[F]+"-"+w],h:this.isHidden(!1,!1,"Property:"+C+":"+E+":x"),t:"Overlays"}),t+=i+a,a=0}else a+=i}this.isDrawOverlayNames()&&(t=this.graphType.match(/Area/)?u+this.x+this.margin+(n+this.blockSeparation)/2:u+this.x+this.margin,this.smpOverlayInfo[C]=e+s/2,R&&this.toRender({p:["drawText",T,t,e+s/2,this.overlayFont,this.overlayColor,"left","middle",!1,this.measureText(T,this.overlayFont)],i:["SmpOverlay-"+w],t:"Overlays"}))}else{if(p.hasOwnProperty(C))continue;for(var N=this.smpOverlayProperties[C].type,B=this.smpOverlayProperties[C].position,P=this.getOverlaysForTypePosition("smp",N,B),R=this.smpOverlayProperties[C].showName,O=this.smpOverlayProperties[C].showBox,X=[],F=0;F<P.length;F++)X.unshift(P[F]);if(this.draw1DOverlaysDataPoints("smp",P,h,f,N,this.smpOverlayProperties,this.smpOverlays,s,i,"vertical",t,e+s,!1,!1,!1,O),this.isDrawOverlayNames()){t=this.graphType.match(/Area/)?u+this.x+this.margin+(n+this.blockSeparation)/2:u+this.x+this.margin,r=s/(P.length+1);for(var F=0;F<P.length;F++){p[H=X[F]]=!0,this.smpOverlayInfo[H]=e+r*(F+1),R&&this.toRender({p:["drawText",T,t,e+r*(F+1),this.overlayFont,this.smpOverlayProperties[H].color,"left","middle",!1,this.measureText(T,this.overlayFont)],i:["SmpOverlay-"+g[H]],t:"Overlays"})}}}e+=s}else"-"==C&&(e+=this.margin)}}else{t=u-this.smpOverlaysThicknessLeft+(this.layoutValid?this.margin:0);for(w=0;w<this.smpOverlays.length;w++){C=this.smpOverlays[w],T=this.shortenText(C,this.maxOverlayStringLen);if("-"!=C){if(d=this.getOverlayClipArea(this.smpOverlayProperties[C].position),"right"!=this.smpOverlayProperties[C].position||c||(t=u+this.x+(this.layoutValid?0:this.margin),c=!0),i=this.smpOverlayProperties[C].thickness||this.overlaysThickness,e=this.graphType.match(/Area/)?m-(n+this.blockSeparation)/2:m,s="Heatmap"!=this.graphType?n+this.blockSeparation:n,r=0,this.smpOverlayProperties[C].type.match(/Heatmap|Text|Default|Increase|Decrease|Boolean/)){for(N=this.smpOverlayProperties[C].type,B=this.smpOverlayProperties[C].position,R=this.smpOverlayProperties[C].showName,S=this.smpOverlayProperties[C].rotate,F=0;F<f.length;F++){M=null!=(E=this.getMetadataValue(f[F],this.isGroupedData?"w":"x",C))?v(y.x[C],E):this.missingDataColor,D=!1;if(F<f.length-1&&(D=this.getMetadataValue(f[F+1],this.isGroupedData?"w":"x",C)),E!==D||"Text"==N||"Boolean"==N){if("Text"!=N&&"Boolean"!=N){k="left"==B?t:t+i,L="left"==B?t+i:t,I=e,z=e+s+r;"Increase"==N?this.toRender({p:["drawShape","path",[L,L,k,L],[I,z,z,I],!1,!1,M,!1,!1,!1,!1,!0,d],i:["SmpOvr-"+f[F]+"-"+w],h:this.isHidden(!1,!1,"Property:"+C+":"+E+":x"),t:"Overlays"}):"Decrease"==N?this.toRender({p:["drawShape","path",[k,L,L,k],[I,I,z,I],!1,!1,M,!1,!1,!1,!1,!0,d],i:["SmpOvr-"+f[F]+"-"+w],h:this.isHidden(!1,!1,"Property:"+C+":"+E+":x"),t:"Overlays"}):this.toRender({p:["drawShape","rectangle",t+i/2,e+(s+r)/2,i,s+r,M,!1,!1,!1,!1,!0,d],i:["SmpOvr-"+f[F]+"-"+w],h:this.isHidden(!1,!1,"Property:"+C+":"+E+":x"),t:"Overlays"})}if("Heatmap"==this.graphType&&this.heatmapSmpSeparateBy&&this.heatmapSmpSeparateBy==C){var _=(I=e+s+r)-(this.heatmapSeparatorThickness-this.heatmapCellBoxWidth);I+(this.heatmapSeparatorThickness-this.heatmapCellBoxWidth)<m+this.y-this.margin&&this.toRender({p:["drawShape","rectangle",u-1+(this.x+1)/2,_+this.heatmapSeparatorThickness/2,this.x+1,this.heatmapSeparatorThickness,this.background,this.background],t:"Overlays"})}!this.showLevelOverlays&&"Text"!=N||"Boolean"==N||("Increase"==N?this.toRender({p:["drawText",this.shortenText(E,this.overlayFontSize,s+r),t+("left"==B?0:i)+3*this.margin*("left"==B?1:-1),e+3*this.margin,this.overlayFont,this.overlayColor,"left","middle","left"==B?-Math.PI/2:Math.PI/2,s+r-2],t:"Overlays"}):"Decrease"==N?this.toRender({p:["drawText",this.shortenText(E,this.overlayFontSize,s+r),t+("left"==B?0:i)+3*this.margin*("left"==B?1:-1),e+s+r-3*this.margin,this.overlayFont,this.overlayColor,"right","middle","left"==B?-Math.PI/2:Math.PI/2,s+r-2],t:"Overlays"}):s+r>i&&!S?this.toRender({p:["drawText",this.shortenText(E,this.overlayFontSize,s+r),t+i/2,e+(s+r)/2,this.overlayFont,this.overlayColor,"center","middle","left"==B?-Math.PI/2:Math.PI/2,s+r-2],t:"Overlays"}):this.overlayFontSize<s+r&&this.toRender({p:["drawText",this.shortenText(E,this.overlayFontSize,i),t+i/2,e+(s+r)/2,this.overlayFont,this.overlayColor,"center","middle",!1,i-2],t:"Overlays"})),"Boolean"==N&&E&&this.toRender({p:["drawShape","rectangle",t+i/2,e+(s+r)/2,i/2,i/2,"black",!1,!1,!1,!1,!0,d],i:["SmpOvr-"+f[F]+"-"+w],h:this.isHidden(!1,!1,"Property:"+C+":"+E+":x"),t:"Overlays"}),e+=s+r,r=0}else r+=s}this.isDrawOverlayNames()&&(e=this.graphType.match(/Area/)?m+this.y+this.margin+(n+this.blockSeparation)/2:m+this.y+this.margin,this.smpOverlayInfo[C]=t+i/2,R&&this.toRender({p:["drawText",T,t+i/2,e,this.overlayFont,this.overlayColor,"left"==B?"right":"left","middle","left"==B?-Math.PI/2:Math.PI/2],i:["SmpOverlay-"+g[T]],t:"Overlays"}))}else{if(p.hasOwnProperty(C))continue;var N=this.smpOverlayProperties[C].type,B=this.smpOverlayProperties[C].position,R=(P=this.getOverlaysForTypePosition("smp",N,B),this.smpOverlayProperties[C].showName);for(O=this.smpOverlayProperties[C].showBox,X=[],F=0;F<P.length;F++)X.unshift(P[F]);if(this.draw1DOverlaysDataPoints("smp",P,h,f,N,this.smpOverlayProperties,this.smpOverlays,i,s,"horizontal",t,e,"left"==B&&i,!1,!1,O),this.isDrawOverlayNames()){e=this.graphType.match(/Area/)?m+this.y+this.margin+(n+this.blockSeparation)/2:m+this.y+this.margin,a=i/(P.length+1);for(F=0;F<P.length;F++){p[H=X[F]]=!0,this.smpOverlayInfo[H]=t+a*(F+1),R&&this.toRender({p:["drawText",this.shortenText(H,this.maxOverlayStringLen),t+a*(F+1),e,this.overlayFont,this.smpOverlayProperties[H].color,"left"==B?"right":"left","middle","left"==B?-Math.PI/2:Math.PI/2],i:["SmpOverlay-"+g[H]],t:"Overlays"})}}}t+=i}else"-"==C&&(t+=this.margin)}}}if(p={},c=!1,this.varOverlays.length>0&&"Heatmap"==this.graphType){l=0;for(w=0;w<this.varOverlays.length;w++)g[this.varOverlays[w]]=l,l++;e=m+this.y+this.margin;for(w=0;w<this.varOverlays.length;w++){C=this.varOverlays[w],T=this.shortenText(C,this.maxOverlayStringLen);if("-"!=C){if(d=this.getOverlayClipArea(this.varOverlayProperties[C].position),"top"!=this.varOverlayProperties[C].position||c||(e=m-this.varOverlaysThicknessTop,c=!0),t=u+this.cbs/2,i=0,s=this.varOverlayProperties[C].thickness||this.overlaysThickness,this.varOverlayProperties[C].type.match(/Heatmap|Text|Default|Increase|Decrease|Boolean/)){for(N=this.varOverlayProperties[C].type,R=this.varOverlayProperties[C].showName,S=this.varOverlayProperties[C].rotate,F=0;F<this.varIndices.length;F++){var E;M=null!=(E=this.getMetadataValue(this.varIndices[F],"z",C))?v(y.z[C],E):this.missingDataColor;if(E!=(D=F<this.varIndices.length-1&&this.getMetadataValue(this.varIndices[F+1],"z",C))||"Text"==N||"Boolean"==N){if("Text"!=N&&"Boolean"!=N){L=(k=t-this.cbs/2)+this.cbs+i,I=e,z=e+s;"Increase"==N?this.toRender({p:["drawShape","path",[k,L,L,k],[z,I,z,z],!1,!1,M,!1,!1,!1,!1,!0,d],i:["VarOvr-"+this.varIndices[F]+"-"+w],h:this.isHidden(!1,!1,"Property:"+C+":"+E+":z"),t:"Overlays"}):"Decrease"==N?this.toRender({p:["drawShape","path",[k,L,k,k],[I,z,z,I],!1,!1,M,!1,!1,!1,!1,!0,d],i:["VarOvr-"+this.varIndices[F]+"-"+w],h:this.isHidden(!1,!1,"Property:"+C+":"+E+":z"),t:"Overlays"}):this.toRender({p:["drawShape","rectangle",t-this.cbs/2+(this.cbs+i)/2,e+s/2,this.cbs+i,s,M,!1,!1,!1,!1,!0,d],i:["VarOvr-"+this.varIndices[F]+"-"+w],h:this.isHidden(!1,!1,"Property:"+C+":"+E+":z"),t:"Overlays"})}if("Heatmap"==this.graphType&&this.heatmapVarSeparateBy&&this.heatmapVarSeparateBy==C){var V=(k=t-this.cbs/2+this.cbs+i)-(this.heatmapSeparatorThickness-this.heatmapCellBoxWidth);k+(this.heatmapSeparatorThickness-this.heatmapCellBoxWidth)<u+this.x-this.margin&&this.toRender({p:["drawShape","rectangle",V+this.heatmapSeparatorThickness/2,m-1+(this.y+1)/2,this.heatmapSeparatorThickness,this.y+1,this.background,this.background],t:"Overlays"})}!this.showLevelOverlays&&"Text"!=N||"Boolean"==N||("Increase"==N?this.toRender({p:["drawText",this.shortenText(E,this.overlayFontSize,this.cbs+i),t+this.margin,e+this.margin,this.overlayFont,this.overlayColor,"left","middle",!1,this.cbs+i-2],t:"Overlays"}):"Decrease"==N?this.toRender({p:["drawText",this.shortenText(E,this.overlayFontSize,this.cbs+i),t+i-this.margin,e+this.margin,this.overlayFont,this.overlayColor,"right","middle",!1,this.cbs+i-2],t:"Overlays"}):this.cbs+i>s&&!S?this.toRender({p:["drawText",this.shortenText(E,this.overlayFontSize,this.cbs+i),t+i/2,e+s/2,this.overlayFont,this.overlayColor,"center","middle",!1,this.cbs+i-2],t:"Overlays"}):this.overlayFontSize<this.cbs+i&&this.toRender({p:["drawText",this.shortenText(E,this.overlayFontSize,s),t+i/2,e+s/2,this.overlayFont,this.overlayColor,"center","middle",-Math.PI/2,s-2],t:"Overlays"})),"Boolean"==N&&E&&this.toRender({p:["drawShape","rectangle",t-this.cbs/2+(this.cbs+i)/2,e+s/2,s/2,s/2,"black",!1,!1,!1,!1,!0,d],i:["VarOvr-"+this.varIndices[F]+"-"+w],h:this.isHidden(!1,!1,"Property:"+C+":"+E+":z"),t:"Overlays"}),t+=this.cbs+i,i=0}else i+=this.cbs}t=u+this.cbs*this.varIndices.length+this.margin,this.varOverlayInfo[C]=e+s/2,R&&this.toRender({p:["drawText",T,t,e+s/2,this.overlayFont,this.overlayColor,"left","middle",!1,this.measureText(T,this.overlayFont)],i:["VarOverlay-"+g[T]],t:"Overlays"})}else{if(p.hasOwnProperty(C))continue;for(N=this.varOverlayProperties[C].type,B=this.varOverlayProperties[C].position,P=this.getOverlaysForTypePosition("var",N,B),R=this.varOverlayProperties[C].showName,O=this.varOverlayProperties[C].showBox,X=[],F=0;F<P.length;F++)X.unshift(P[F]);this.draw1DOverlaysDataPoints("var",P,this.data.z,this.varIndices,N,this.varOverlayProperties,this.varOverlays,s,this.cbs,"vertical",t-this.cbs/2,e+s,!1,!1,!1,O),t=u+this.cbs*this.varIndices.length+this.margin,r=s/(P.length+1);for(F=0;F<P.length;F++){var H=X[F];T=this.shortenText(H,this.maxOverlayStringLen);p[H]=!0,this.varOverlayInfo[H]=e+r*(F+1),R&&this.toRender({p:["drawText",T,t,e+r*(F+1),this.overlayFont,this.varOverlayProperties[H].color,"left","middle",!1,this.measureText(T,this.overlayFont)],i:["VarOverlay-"+g[H]],t:"Overlays"})}}e+=s}else"-"==C&&(e+=this.margin)}}}}},this.getAxisDescription=function(t,e){var i,s={standardDeviation:"Std Dev.",standardErrorMean:"Std Error of Mean",confidenceInterval95:"95% CI"},a="Boxplot"!=this.graphType&&!this.graphType.match(/stacked/i)&&"Treemap"!=this.graphType;if(t){if(this.getLayoutConfig("xAxis2Title")&&!e)return this.getLayoutConfig("xAxis2Title");this.graphType.match(/BarLine|DotLine|AreaLine|StackedLine|StackedPercentLine/)&&this.xAxis2Values.length>0&&"swimmer"!=this.barType||e?(i=this.xAxis2Title?this.xAxis2Title+" (Lines)":e?"":"(Lines)",this.showErrorBars&&this.isGroupedData&&a&&(i=""!=i?i+"; Error bars are the "+s[this.errorBarsType]:"Error bars are the "+s[this.errorBarsType])):i=this.xAxis2Title?this.xAxis2Title:""}else{if(this.getLayoutConfig("xAxisTitle")&&!e)return this.getLayoutConfig("xAxisTitle");i=this.xAxisTitle?this.xAxisTitle:"",this.graphType.match(/BarLine|DotLine|AreaLine|StackedLine|StackedPercentLine/)&&this.xAxisValues.length>0&&"swimmer"!=this.barType&&(this.graphType.match(/BarLine|StackedLine|StackedPercentLine/)?i+=" (Bars)":this.graphType.match(/DotLine/)?i+=" (Dots)":"AreaLine"==this.graphType&&(i+=" (Area)")),this.showErrorBars&&(this.isGroupedData||this.layoutValid&&this.data.l&&this.data.l.group&&a)&&a&&"swimmer"!=this.barType&&(i=""!=i?i+"; Error bars are the "+s[this.errorBarsType]:"Error bars are the "+s[this.errorBarsType])}return this.transformData?this.transformData+" "+i:i},this.draw1DXLayout=function(){var t,e,i,s,a,r,n,o=this.get1DLeft(),h=this.get1DTop(),l="Gantt"==this.graphType?1:(this.layoutComb,0),c="Gantt"==this.graphType||this.layoutComb?1:0,d=this,p=function(t,e){return"Gantt"==d.graphType?d.dateFormat(t,":yyyy:mmm dd").replace(/:/g,"\n"):d.xAxisTransform&&d.xAxisTransform.match(/log|exp/)&&!d.xAxisTransformTicks?d.formatAxisValue(d.transformValue(d.xAxisTransform,t,!0),e||"xAxis"):d.isTransformedData&&d.isTransformedData.match(/log|exp/)&&!d.xAxisTransformTicks?d.formatAxisValue(d.transformValue(d.isTransformedData,t,!0),e||"xAxis"):d.formatAxisValue(t,e||"xAxis")};if("Treemap"!=this.graphType&&"TagCloud"!=this.graphType&&"ParallelCoordinates"!=this.graphType&&"Sankey"!=this.graphType&&"Tree"!=this.graphType&&("Meter"!=this.graphType||this.meterType.match(this.graphOrientation)))if(this.layoutValid||(this.layoutAxis=3),"Heatmap"==this.graphType){this.getHeatmapIndicatorHeight();if(this.showHeatmapIndicator&&(this.layoutValid?(a=this.width/2-this.heatmapIndicatorWidth/2,r=this.height-this.layoutBottom):("right"==this.heatmapIndicatorPosition?(this.heatmapIndicatorY=h,a=this.width-(this.marginRight+this.getHeatmapIndicatorWidth())):a="top"==this.heatmapIndicatorPosition?o+this.x/2-this.heatmapIndicatorWidth/2:"topLeft"==this.heatmapIndicatorPosition?this.left>this.heatmapIndicatorWidth+12*this.margin?o-(this.heatmapIndicatorWidth+4*this.margin):this.marginLeft+this.offsetX+6*this.margin:this.right>this.heatmapIndicatorWidth+6*this.margin?o+this.x+2*this.margin:this.width-(this.marginRight+(this.heatmapIndicatorWidth+6*this.margin)),r=this.heatmapIndicatorY),this.layoutValid||"right"==this.heatmapIndicatorPosition||("top"==this.varDendrogramPosition&&(r-=this.getVarTreeHeight()),r-=this.varOverlaysThicknessTop,"bottom"!=this.varTitleLabelPosition&&(r-=this.getVariableTitleHeight(),r-=this.getVariableLabelLength()),r-=this.margin),!this.isOncoprint)){var g=this.colorBy,u=this.outlineBy;this.colorBy=!1,this.outlineBy=!1,this.drawColorIndicator(a,r,this.getDefaultMetaDataObject(),!!this.xAxisTitle&&this.xAxisTitle,!0),this.colorBy=g,this.outlineBy=u}}else{if((this.xAxisTransform&&this.xAxisTransform.match(/log/)&&!this.xAxisTransformTicks||this.isTransformedData&&this.isTransformedData.match(/log|exp/)&&!this.xAxisTransformTicks)&&(this.xAxisDecs=parseInt(Math.abs(this.xAxisMin))),"vertical"==this.graphOrientation){if(n=this.xAxisMin<0?h+this.y-(0-this.xAxisMin)*this.xAxisUnit:h+this.y,this.xAxisShow&&(1==this.layoutAxis||3==this.layoutAxis)){this.xAxisTitle&&""!=this.xAxisTitle&&(a=o+this.axisTitleFontSize/2-this.getAxisTitleTickLength(),r=h+this.y/2,t=this.getAxisDescription(),this.toRender({p:["drawText",t,a,r,this.axisTitleFont,this.axisTitleColor,"center","middle",-Math.PI/2],t:"Axes"})),"right",e=this.xAxisValuesRaw,a=o-2*this.margin;for(var m=l;m<e.length-c;m++)i=this.xAxisValuesRaw[m],(this.layoutValid&&this.layoutCollapse&&this.layoutAdjust?i>this.xAxisMin:i>=this.xAxisMin)&&("Meter"==this.graphType?i<=this.xAxisMax:i<this.xAxisMax)&&(s=p(i),r=h+this.y-(i-this.xAxisMin)*this.xAxisUnit,this.toRender({p:["drawText",s,a,r,this.axisTickFont,this.axisTickColor,"right","middle"],b:n,t:"Axes"}))}if(this.xAxis2Show&&(2==this.layoutAxis||3==this.layoutAxis)&&"Meter"!=this.graphType){if("left",a=o+this.x+2*this.margin,this.graphType.match(/BarLine|DotLine|AreaLine|StackedLine|StackedPercentLine/)&&this.xAxis2Values.length>0){n=this.xAxis2Min<0?h+this.y-(0-this.xAxis2Min)*this.xAxis2Unit:h+this.y;for(m=l;m<this.xAxis2Values.length-c;m++)i=this.xAxis2ValuesRaw[m],(this.layoutValid&&this.layoutCollapse&&this.layoutAdjust?i>this.xAxis2Min:i>=this.xAxis2Min)&&i<this.xAxis2Max&&(s=p(i,"xAxis2"),r=h+this.y-(i-this.xAxis2Min)*this.xAxis2Unit,this.toRender({p:["drawText",s,a,r,this.axisTickFont,this.axisTickColor,"left","middle"],b:n,t:"Axes"}))}else{n=this.xAxisMin<0?h+this.y-(0-this.xAxisMin)*this.xAxisUnit:h+this.y,e=this.xAxisValuesRaw;for(m=l;m<e.length-c;m++)i=e[m],(this.layoutValid&&this.layoutCollapse&&this.layoutAdjust?i>this.xAxisMin:i>=this.xAxisMin)&&i<this.xAxisMax&&(s=p(i),r=h+this.y-(i-this.xAxisMin)*this.xAxisUnit,this.toRender({p:["drawText",s,a,r,this.axisTickFont,this.axisTickColor,"left","middle"],b:n,t:"Axes"}))}""!=this.xAxis2Title&&(a=o+this.x+this.getAxisTitleTickLength(!0)-this.axisTitleFontSize/2,r=h+this.y/2,t=this.getAxisDescription(!0),this.toRender({p:["drawText",t,a,r,this.axisTitleFont,this.axisTitleColor,"center","middle",-Math.PI/2],t:"Axes"}))}}else{if(n=this.xAxisMin<0?o+this.x-(0-this.xAxisMin)*this.xAxisUnit:o,this.xAxisShow&&(1==this.layoutAxis||3==this.layoutAxis)){this.xAxisTitle&&""!=this.xAxisTitle&&(a=o+this.x/2,r=h-(4*this.margin+this.axisTickFontSize+this.axisTitleFontSize/2),t=this.getAxisDescription(),this.toRender({p:["drawText",t,a,r,this.axisTitleFont,this.axisTitleColor,"center","middle"],t:"Axes"})),e=this.xAxisValuesRaw,r=h-(2*this.margin+this.axisTickFontSize/2),this.layoutValid&&"wrap"==this.layoutType&&(r-=(this.segregateVariablesBy.length+this.segregateSamplesBy.length)*this.layoutLabelBoxThickness);for(m=l;m<e.length-c;m++)i=e[m],(this.layoutValid&&this.layoutCollapse&&this.layoutAdjust?i>this.xAxisMin:i>=this.xAxisMin)&&("Meter"==this.graphType?i<=this.xAxisMax:i<this.xAxisMax)&&(s=p(i),a=this.invertGraph?o+this.x-(i-this.xAxisMin)*this.xAxisUnit:o+(i-this.xAxisMin)*this.xAxisUnit,this.toRender({p:["drawText",s,a,r,this.axisTickFont,this.axisTickColor,"center","middle"],b:n,t:"Axes"}))}if(this.xAxis2Show&&(2==this.layoutAxis||3==this.layoutAxis)&&"Meter"!=this.graphType){if(r=h+this.y+2*this.margin+this.axisTickFontSize/2,this.graphType.match(/BarLine|DotLine|AreaLine|StackedLine|StackedPercentLine/)&&this.xAxis2Values.length>0){n=this.xAxis2Min<0?o+this.x-(0-this.xAxis2Min)*this.xAxis2Unit:o;for(m=l;m<this.xAxis2Values.length-c;m++)i=this.xAxis2ValuesRaw[m],(this.layoutValid&&this.layoutCollapse&&this.layoutAdjust?i>this.xAxis2Min:i>=this.xAxis2Min)&&i<this.xAxis2Max&&(s=p(i,"xAxis2"),a=this.invertGraph?o+this.x-(i-this.xAxis2Min)*this.xAxis2Unit:o+(i-this.xAxis2Min)*this.xAxis2Unit,this.toRender({p:["drawText",s,a,r,this.axisTickFont,this.axisTickColor,"center","middle"],b:n,t:"Axes"}))}else{n=this.xAxisMin<0?o+this.x-(0-this.xAxisMin)*this.xAxisUnit:o,e=this.xAxisValuesRaw;for(m=l;m<e.length-c;m++)i=e[m],(this.layoutValid&&this.layoutCollapse&&this.layoutAdjust?i>this.xAxisMin:i>=this.xAxisMin)&&i<this.xAxisMax&&(s=p(i),a=this.invertGraph?o+this.x-(i-this.xAxisMin)*this.xAxisUnit:o+(i-this.xAxisMin)*this.xAxisUnit,this.toRender({p:["drawText",s,a,r,this.axisTickFont,this.axisTickColor,"center","middle"],b:n,t:"Axes"}))}""!=this.xAxis2Title&&(a=o+this.x/2,r=h+this.y+3*this.margin+this.axisTickFontSize+this.axisTitleFontSize/2,t=this.getAxisDescription(!0),this.toRender({p:["drawText",t,a,r,this.axisTitleFont,this.axisTitleColor,"center","middle"],t:"Axes"}))}}this.plotBox&&(this.disableGradientTransparencyShadow(),this.toRender({p:["drawShape","rectangle",o+this.x/2,h+this.y/2,this.x,this.y,this.plotBoxColor,this.plotBoxColor,"open",!1,this.outlineWidth],t:"Axes"}),this.enableGradientTransparencyShadow())}},this.draw1DDataPoints=function(){if(!(this.smpIndices&&this.smpIndices.length<1)){switch(this.currentErrorBarsType||(this.currentErrorBarsType=this.errorBarsType),this.currentErrorBarsType!=this.errorBarsType&&this.isGroupedData&&(this.regroupSamples(),this.currentErrorBarsType=this.errorBarsType),this.toRender({p:["setClipArea",this.setClipBoundaries()],t:"Data"}),this.graphType){case"Bar":this.stackBy||this.dodgeBy?this.draw1DStackedDataPoints():(this.draw1DBarDataPoints(this.varIndices,"xAxis",this.varIndices.length),"lollipop"==this.barType&&this.draw1DDotplotDataPoints(!1,!1,this.varIndices.length));break;case"Line":case"ParallelCoordinates":this.draw1DLineDataPoints(this.varIndices,"xAxis");break;case"BarLine":this.draw1DBarDataPoints(this.xAxisVarIndices,"xAxis",Math.max(this.xAxisVarIndices.length,this.xAxis2VarIndices.length)),this.draw1DLineDataPoints(this.xAxis2VarIndices,"xAxis2",Math.max(this.xAxisVarIndices.length,this.xAxis2VarIndices.length));break;case"Stacked":case"StackedPercent":this.draw1DStackedDataPoints();break;case"StackedLine":case"StackedPercentLine":this.draw1DStackedDataPoints(),this.draw1DLineDataPoints(this.xAxis2VarIndices,"xAxis2");break;case"Area":this.draw1DAreaDataPoints(this.varIndices,"xAxis");break;case"AreaLine":this.draw1DAreaDataPoints(this.xAxisVarIndices,"xAxis"),this.draw1DAreaDataPoints(this.xAxis2VarIndices,"xAxis2",!0);break;case"Boxplot":this.showBoxplotOriginalData?(this.draw1DBoxplotDataPoints(!0,!1),this.draw1DDotplotDataPoints(!0,!0,this.varIndices.length)):this.showViolinBoxplot?(this.draw1DDotplotDataPoints(!0,!0,this.varIndices.length),this.draw1DBoxplotDataPoints(!0)):this.draw1DBoxplotDataPoints();break;case"Gantt":this.draw1DGanttDataPoints();break;case"Meter":this.draw1DMeterDataPoints();break;case"Dotplot":this.draw1DDotplotDataPoints(!1,!1,this.varIndices.length);break;case"DotLine":this.draw1DDotplotDataPoints(!1,!1,Math.max(this.xAxisVarIndices.length,this.xAxis2VarIndices.length)),this.draw1DLineDataPoints(this.xAxis2VarIndices,"xAxis2",Math.max(this.xAxisVarIndices.length,this.xAxis2VarIndices.length));break;case"Heatmap":if(this.isContour)this.draw1DHeatmapDataPoints(),this.draw1DContour();else if(this.isOncoprint&&this.showHeatmapOncoprint)switch(this.oncoprintHeatmapPosition){case"top":this.draw1DHeatmapDataPoints(!0),this.draw1DHeatmapDataPoints(!1,!0);break;case"right":case"bottom":this.draw1DHeatmapDataPoints(),this.draw1DHeatmapDataPoints(!0,!0);break;case"left":this.draw1DHeatmapDataPoints(!0),this.draw1DHeatmapDataPoints(!1,!0)}else this.draw1DHeatmapDataPoints();break;case"Treemap":this.draw1DTreemapDataPoints();break;case"TagCloud":this.draw1DTagCloudDataPoints();break;case"Sankey":this.draw1DSankeyDataPoints();break;case"Tree":this.draw1DTreeDataPoints()}return this.toRender({p:["resetClipArea"],t:"Data"}),!0}},this.draw1DBarDataPoints=function(t,e,i){var s=this,a=this.get1DIndices(),r=function(t){if(s.graphType.match(/Line/)){for(var e=[],i=0;i<t.length;i++)s.varIndices.includes(t[i])&&e.push(t[i]);return e}return t}(t),n=a.length,o=this.xAxisMin<0?Math.abs(this.xAxisMin)*this.xAxisUnit:0,h=this.get1DLeft(),l=this.get1DTop(),c=this.plotByVariable?this.rbs:this.blockSeparation+this.rbs*i,d="swimmer"==this.barType?this.rbs*(r.length-1):this.rbs;this.xAxisTransform&&"percentile"==this.xAxisTransform&&this.setRangeData(this.summaryType),"vertical"==this.graphOrientation?(h+=this.blockSeparation/2+("swimmer"==this.barType?this.rbs/2:0),l=l+this.y-o):(h+=o,l+=this.blockSeparation/2+("swimmer"==this.barType?this.rbs/2:0));for(var p=0;p<r.length;p++){for(var g=[],u=[],m=[],f=[],y=[],x=0;x<n;x++)m.push(this.getPropertyValue(r[p],a[x],"colorBy")),y.push(this.getPropertyValue(r[p],a[x],"patternBy")),g.push(this.getDataAtPos(r[p],a[x],!1,this.xAxisTransform,this.xAxisFloorValue,this.xAxisCeilValue)),(this.isGroupedData||this.data.y.hasOwnProperty("stdev"))&&"swimmer"!=this.barType&&u.push(this.getDataAtPos(r[p],a[x],"stdev",this.xAxisTransform,this.xAxisFloorValue,this.xAxisCeilValue)),f.push([r[p],a[x]]);if(this.drawBarPlot(g,u,h,l,d,c,this[e+"Unit"],o,this[e+"Min"],this.graphOrientation,m,y,f,!1,!1,!!this.invertGraph&&this.x-o,this.isSwimmerSumarized),"vertical"==this.graphOrientation?h=this.plotByVariable?h+(this.blockSeparation+this.rbs*n):h+this.rbs:l=this.plotByVariable?l+(this.blockSeparation+this.rbs*n):l+this.rbs,"swimmer"==this.barType)return}},this.draw1DLineDataPoints=function(t,e,i){var s=this,a=function(e){return s.layoutValid?s.linePatterns[t[e]%s.linePatterns.length]:s.linePatterns[e%s.linePatterns.length]},r=function(e){if(s.layoutValid&&s.graphType.match(/Bar|Stacked|Dot/))for(x=0;x<t.length;x++)if(t[x]==h[e])return s.colors[x%s.colors.length];return s.colors[e%s.colors.length]},n=function(t,e){for(var i=[],a=0;a<e.length;a++)i.push(s.getDataAtPos(t,e[a],!1,s.xAxisTransform,s.xAxisFloorValue,s.xAxisCeilValue));return i.length>1?s.meanStandardDeviationN(i):[i[0],NaN,1]},o=this.get1DIndices(),h=function(){if(s.graphType.match(/Bar|Stacked|Dot/)){for(var e=[],i=0;i<t.length;i++)s.varIndices.includes(t[i])&&e.push(t[i]);return e}return t}(),l=o.length,c=this.get1DLeft(),d=this.get1DTop(),p="BarLine"==this.graphType||"DotLine"==this.graphType,g=p?this.blockSeparation+i*this.rbs:this.blockSeparation+this.rbs,u="ParallelCoordinates"==this.graphType?0:(this.blockSeparation+this.rbs)/2,m=!!this.colorBy&&this.getSampleIndices(this.colorBy),f=!(!this.isGroupedData||!this.lineBy)&&this.getLevelsByAnnotation(this.lineBy,this.smpIndices,"x",!0);this.xAxisTransform&&"percentile"==this.xAxisTransform&&this.setRangeData(this.summaryType),"vertical"==this.graphOrientation?(c+=u,d+=this.y):d+=u;for(var y=0;y<h.length;y++)if(this.isGroupedData&&this.lineBy){this.isGroupedData=!1;for(var x=0;x<f.length;x++){for(var v=[],b=[],A=this.meta.data.x[this.lineBy].colors[this.meta.data.x[this.lineBy].order[f[x]]],w="DotLine"!=this.graphType&&("symbol"==this.lineDecoration?this.shapes[y%this.shapes.length]:"sphere"),C=[],T=[],S=0;S<l;S++){var M=this.getVariablesSamplesByAnnotationLevel(this.lineBy,f[x],this.data.w.grps[S],"x"),D=n(h[y],M);v.push(D[0]),C.push(a(x)),T.push([h[y],o[S],f[x]])}this.drawLinePlot(v,b,c,d,this.rbs/2,g,"ParallelCoordinates"==this.graphType?this.parallelCoordinates:this[e+"Unit"],this[e+"Min"],this.graphOrientation,A,C,w,T,!1,!1,!!this.invertGraph&&this.x,this.data.y.vars[h[y]])}p&&this.xAxisVarIndices.length==this.xAxis2VarIndices.length&&("vertical"==this.graphOrientation?c+=this.rbs:d+=this.rbs),this.isGroupedData=!0}else{for(v=[],b=[],A="blackAndWhite"==this.theme?"rgb(0,0,0)":this.colorBy?this.getPropertyValue(h[y],m,"colorBy"):this.coordinateLineColor?r(y):this.getVariableColor(this.data.y.vars[h[y]]),w="DotLine"!=this.graphType&&("symbol"==this.lineDecoration?this.shapes[y%this.shapes.length]:"sphere"),C=[],T=[],x=0;x<l;x++)v.push(this.getDataAtPos(h[y],o[x],!1,this.xAxisTransform,this.xAxisFloorValue,this.xAxisCeilValue)),this.isGroupedData||this.data.y.hasOwnProperty("stdev")?(b.push(this.getDataAtPos(h[y],o[x],"stdev",this.xAxisTransform,this.xAxisFloorValue,this.xAxisCeilValue)),C.push("pattern"==this.lineDecoration||this.patternBy?a(y):this.getPropertyValue(h[y],o[x],"patternBy"))):("pattern"==this.lineDecoration||this.patternBy)&&C.push(a(y)),T.push([h[y],o[x]]);this.drawLinePlot(v,b,c,d,this.rbs/2,g,"ParallelCoordinates"==this.graphType?this.parallelCoordinates:this[e+"Unit"],this[e+"Min"],this.graphOrientation,A,C,w,T,!1,!1,!!this.invertGraph&&this.x,this.data.y.vars[h[y]]),p&&this.xAxisVarIndices.length==this.xAxis2VarIndices.length&&("vertical"==this.graphOrientation?c+=this.rbs:d+=this.rbs)}},this.draw1DStackedDataPoints=function(){var t=this,e=this.get1DIndices(),i=e.length,s=this.get1DLeft(),a=this.get1DTop(),r=this.blockSeparation+this.rbs,n=function(){if(t.graphType.match(/Line/)){for(var e=[],i=0;i<t.xAxisVarIndices.length;i++)t.varIndices.includes(t.xAxisVarIndices[i])&&e.push(t.xAxisVarIndices[i]);return e}return t.varIndices}(),o="StackedPercentLine"==this.graphType&&!this.layoutValid&&this.xAxisVarIndices,h=!!this.graphType.match(/Percent/),l=this.xAxisMin<0?Math.abs(this.xAxisMin)*this.xAxisUnit:0,c=!!this.invertGraph&&this.x,d="vertical"==this.graphOrientation?this.get1DTop()+this.y:this.get1DLeft(),p=this.isDOE?this.configStndBy.groupingFactors:this.groupingFactors;this.xAxisTransform&&"percentile"==this.xAxisTransform&&this.setRangeData("sum"),"vertical"==this.graphOrientation?(s+=this.blockSeparation/2,a+=this.y):a+=this.blockSeparation/2;for(var g=0;g<i;g++){var u=this.sum(this.getDataForSmpGrpAtIndex(e[g],o),!1,!1,!0),m=this.sum(this.getDataForSmpGrpAtIndex(e[g],o),!1,!1,!1,!0),f=[],y=[],x=[],v=[],b=[];if(this.isGroupedData&&this.treemapBy.length>0)if("vertical"==this.graphOrientation)for(var A=n.length-1;A>=0;A--)f.push(this.getDataAtPos(n[A],e[g],"sum",this.xAxisTransform,this.xAxisFloorValue,this.xAxisCeilValue)),b.push(this.getTreemapVariable(n[A],this.data.w.grps[e[g]]));else for(A=0;A<n.length;A++)f.push(this.getDataAtPos(n[A],e[g],"sum",this.xAxisTransform,this.xAxisFloorValue,this.xAxisCeilValue)),b.push(this.getTreemapVariable(n[A],this.data.w.grps[e[g]]));else if(this.isGroupedData&&(this.stackBy.length>0||this.dodgeBy.length>0)){var w=this.stackBy||this.dodgeBy;this.isGroupedData=!1,b=!1;var C=this.getLevelsByAnnotation(w,this.smpIndices,"x").sort();for(A=0;A<n.length;A++)if("vertical"==this.graphOrientation)for(var T=C.length-1;T>=0;T--){var S=this.getVariablesSamplesByAnnotationLevel(w,C[T],this.data.w.grps[g],"x");f.push(S.length),y.push(this.meta.data.x[w].colors[T]),x.push("solid"),v.push([n[A],e[g],"<b>"+this.data.y.vars[A]+"</b><br><b>"+w+"</b>: "+C[T].toString().replace("u0000","")+"<br><b>"+p.join("::")+"</b> : "+S.length,S,C[T]])}else for(T=0;T<C.length;T++){S=this.getVariablesSamplesByAnnotationLevel(w,C[T],this.data.w.grps[g],"x");f.push(S.length),y.push(this.meta.data.x[w].colors[T]),x.push("solid"),v.push([n[A],e[g],"<b>"+this.data.y.vars[A]+"</b><br><b>"+w+"</b>: "+C[T].toString().replace("u0000","")+"<br><b>"+p.join("::")+"</b> : "+S.length,S,C[T]])}this.isGroupedData=!0}else if(b=!1,"vertical"==this.graphOrientation)for(A=n.length-1;A>=0;A--)f.push(this.getDataAtPos(n[A],e[g],"sum",this.xAxisTransform,this.xAxisFloorValue,this.xAxisCeilValue)),y.push(this.getPropertyValue(n[A],e[g],"colorBy")),x.push(this.getPropertyValue(n[A],e[g],"patternBy")),v.push([n[A],e[g]]);else for(A=0;A<n.length;A++)f.push(this.getDataAtPos(n[A],e[g],"sum",this.xAxisTransform,this.xAxisFloorValue,this.xAxisCeilValue)),y.push(this.getPropertyValue(n[A],e[g],"colorBy")),x.push(this.getPropertyValue(n[A],e[g],"patternBy")),v.push([n[A],e[g]]);this.drawStackedPlot(f,s,a,this.rbs,b,h,[u,m],this.xAxisUnit,l,this.graphOrientation,y,x,v,!1,c,d),"vertical"==this.graphOrientation?s+=r:a+=r}},this.draw1DAreaDataPoints=function(t,e,i){var s,a=this.get1DIndices(),r=a.length,n=this.get1DLeft(),o=this.get1DTop(),h=this.rbs+this.blockSeparation,l=[],c=[],d=[],p=[],g=[],u=this;if(this.xAxisTransform&&"percentile"==this.xAxisTransform&&this.setRangeData(this.summaryType),"vertical"==this.graphOrientation&&(o+=this.y),"stacked"!=this.areaType&&"percent"!=this.areaType){for(var m=[],f=[],y=0;y<t.length;y++)m[y]=this.getDataAtPos(t[y],a[0],!1,this.xAxisTransform,this.xAxisFloorValue,this.xAxisCeilValue),f[y]=y;t.sort((function(t,e){return m[t]-m[e]}))}for(var x=0;x<r;x++)g.push(0);for(y=0;y<t.length;y++){var v=[],b=this.coordinateLineColor?(s=y,"xAxis"==e?u.colors[t[s]%u.colors.length]:u.colors[s%u.colors.length]):this.getVariableColor(this.data.y.vars[t[y]]);for(x=0;x<r;x++)this.isGraphTime&&a[x]<0?v.push(0):v.push(this.getDataAtPos(t[y],a[x],!1,this.xAxisTransform)),g[x]+=v[x];l.push(v),c.push(b),d.push("closed"),p.push([t[y]])}l.length&&(l.length>1&&l[0].length>1||"percent"!=this.areaType?this.drawAreaPlot(l,n,o,this.x,this.y,h,this.areaType,g,this[e+"Unit"],this[e+"Min"],this[e+"Max"],this.graphOrientation,i,c,d,p,!1,!!this.invertGraph&&this.x,a):this.flashInfoSpan(100,100,"Area graphs require at least 2 variables",5e3)),"stacked"!=this.areaType&&"percent"!=this.areaType&&t.sort((function(t,e){return f[t]-f[e]}))},this.draw1DBoxplotDataPoints=function(t,e){var i=this.get1DIndices(),s=i.length,a=this.varIndices,r=this.get1DLeft(),n=this.get1DTop(),o=this.plotByVariable?this.rbs:this.blockSeparation+this.rbs*a.length;if(!this.isRawData||this.data.hasOwnProperty("w")){this.xAxisTransform&&"percentile"==this.xAxisTransform&&this.setRangeData(this.summaryType),"vertical"==this.graphOrientation?(r+=this.blockSeparation/2,n+=this.y):n+=this.blockSeparation/2,this.isRawData||(t=!1);for(var h=0;h<a.length;h++){for(var l=[],c=[],d=[],p=[],g=[],u=[],m=0;m<s;m++){for(var f=["iqr1","iqr3","qtl1","qtl3","median","out","mean","conf","nfac"],y=[],x=this.getGroupColor(a[h],i[m]),v=0;v<f.length;v++)y.push(this.getDataAtPos(a[h],i[m],f[v],this.xAxisTransform,this.xAxisFloorValue,this.xAxisCeilValue));e&&this.isRawData&&(y[5]=!1),l.push(y),c.push(x),p.push(t&&!this.boxplotColor?"open":this.getPropertyValue(a[h],i[m],"patternBy")),g.push(e?[a[h],i[m],"box"]:[a[h],i[m]]),d.push(x),u.push(this.getPropertyValue(a[h],i[m],"patternBy"))}this.showViolinBoxplot&&this.isRawData,this.drawBoxPlot(l,r,n,this.rbs,o,this.xAxisUnit,this.xAxisMin,this.graphOrientation,c,p,g,d,u,this.data.y.vars[a[h]]),"vertical"==this.graphOrientation?r=this.plotByVariable?r+(this.blockSeparation+this.rbs*s):r+this.rbs:n=this.plotByVariable?n+(this.blockSeparation+this.rbs*s):n+this.rbs}}},this.draw1DGanttDataPoints=function(){for(var t=this.get1DIndices(),e=this.getVariableIndices(this.ganttStart),i=this.getVariableIndices(this.ganttEnd),s=this.get1DLeft(),a=this.get1DTop()+this.blockSeparation/4,r=this.blockSeparation+this.rbs,n={},o=0;o<t.length;o++){var h=[],l=[],c=[],d=[],p=[],g=[],u=[];if(this.isGroupedData)for(var m=0;m<this.data.w.grps[t[o]].length;m++){var f=this.data.w.grps[t[o]][m];h.push([this.data.gantt[e][f],this.data.gantt[i][f]]),c.push(this.ganttCompletion?this.data.x[this.ganttCompletion][f]:0),l.push([f,e,i]),d.push(this.getPropertyValue(e,f,"colorBy")),p.push(this.getPropertyValue(e,f,"patternBy"));for(var y=0;y<this.data.gantt.length;y++)y!=e&&y!=i&&null!=this.data.gantt[y][f]&&u.push([this.data.gantt[y][f],y]);if(n[f]=[this.data.gantt[e][f],this.data.gantt[i][f],a],this.ganttDependency&&this.data.x[this.ganttDependency][f])n[x=this.getSampleIndices(this.data.x[this.ganttDependency][f],!0)]||(n[x]=[]),n[x].push(this.ganttDependencyEnd&&this.data.x[this.ganttDependencyEnd][f]?this.data.x[this.ganttDependencyEnd][f]:"arrow"),n[x].push(this.ganttDependencyColor&&this.data.x[this.ganttDependencyColor][f]?this.data.x[this.ganttDependencyColor][f]:"rgb(0,0,0)"),n[x].push(this.ganttDependencyThickness&&this.data.x[this.ganttDependencyThickness][f]?this.data.x[this.ganttDependencyThickness][f]:1),x>-1?g.push(n[x]):g.push(!1);else g.push(!1)}else{h.push([this.data.gantt[e][o],this.data.gantt[i][o]]),c.push(this.ganttCompletion?this.data.x[this.ganttCompletion][o]:0),l.push([o,e,i]),d.push(this.getPropertyValue(e,o,"colorBy")),p.push(this.getPropertyValue(e,o,"patternBy"));for(m=0;m<this.data.gantt.length;m++)m!=e&&m!=i&&null!=this.data.gantt[m][o]&&u.push([this.data.gantt[m][o],m]);var x;if(n[o]=[this.data.gantt[e][o],this.data.gantt[i][o],a],this.ganttDependency&&this.data.x[this.ganttDependency][o])n[x=this.getSampleIndices(this.data.x[this.ganttDependency][o])]||(n[x]=[]),n[x].push(this.ganttDependencyEnd&&this.data.x[this.ganttDependencyEnd][o]?this.data.x[this.ganttDependencyEnd][o]:"arrow"),n[x].push(this.ganttDependencyColor&&this.data.x[this.ganttDependencyColor][o]?this.data.x[this.ganttDependencyColor][o]:"rgb(0,0,0)"),n[x].push(this.ganttDependencyThickness&&this.data.x[this.ganttDependencyThickness][o]?this.data.x[this.ganttDependencyThickness][o]:1),x>-1?g.push(n[x]):g.push(!1);else g.push(!1)}this.drawGanttPlot(h,c,g,u,s,a,1.5*this.rbs,this.xAxisUnit,this.xAxisMin,p,d,l),a+=r}},this.draw1DMeterDataPoints=function(){var t=function(t){var i=e.meterSegments.length?e.meterSegments:e.xAxisValuesRaw;if(i.length){for(var s=0;s<i.length;s++)if(i[s]>t)return e.meterColors[s]||e.colors[s%e.colors.length];return e.meterColors.length?e.meterColors[e.meterColors.length-1]:e.colors[e.colors.length-1]}return e.meterBackgroundColor},e=this,i=this.get1DLeft(),s=this.get1DTop(),a=.05*Math.min(this.x,this.y),r=Math.min(this.x,this.y)-a,n=r/2,o=this.getMeterSummaryValue(),h=this.meterType.match(/gauge|speedometer/)?this.scaleTextToFont(o.toString(),r/6,r/3):this.meterType.match(/digital/)&&this.layoutValid?this.scaleTextToFont(o.toString(),r/4,r/2):this.meterType.match(/digital/)?this.scaleTextToFont(o.toString(),r/3,r/1.5):this.scaleTextToFont(o.toString(),r/2,r),l=Math.PI*("gauge"==this.meterType?1:"speedometer"==this.meterType?1.5:2)/this.xAxisRange,c="gauge"==this.meterType?Math.PI:"speedometer"==this.meterType?1.25*Math.PI:Math.PI/2,d=i+this.x/2,p=s+this.y/2+("gauge"==this.meterType?this.y/6:"speedometer"==this.meterType?this.y/24:0);switch(this.meterType){case"gauge":case"speedometer":var g=o*l-c,u=n*Math.cos(g)+d,m=n*Math.sin(g)+p;this.toRender({p:["drawLine","needle",d,p,u,m,this.meterNeedleColor,this.margin],t:"Data"}),this.toRender({p:["drawText",o,d,p+2*a,h,t(o),"center","top"],t:"Data"});break;case"horizontal":case"vertical":break;case"state":for(var f=(a=Math.min(this.x,this.y))/1.4,y=s+this.y/2+f,x=["rgb(0,255,0)","rgb(255,255,0)","rgb(255,0,0)"],v=[33,66],b=0;b<x.length;b++){g=b<x.length-1?v[b]:100;var A=o>=(b>0?v[b-1]:0)&&o<=g?x[b]:this.addColorTransparency(x[b],.2);this.toRender({p:["drawShape","circle",i+this.x/2,y,a/2,a/2,A,A],t:"Axes"}),y-=f}break;case"digital":case"number":this.toRender({p:["drawText",o,d,p+10,h,t(o),"center","middle"],t:"Data"})}},this.setConnectData=function(t,e){if(this.connectBy&&this.data.x&&this.data.x.hasOwnProperty(this.connectBy)){this.connectByDataVar=[],this.connectByData={};for(var i=0,s=0;s<t.length;s++)if(this.isGroupedData){if(this.isGraphTime&&t[s]<0)continue;for(var a=0;a<this.data.w.grps[t[s]].length;a++)n=this.data.w.grps[t[s]][a],r=this.getMetadataValue(n,"x",this.connectBy,!0),this.connectByData.hasOwnProperty(r)||(this.connectByData[r]=[]),this.connectByData[r].push(i),i++}else{if(n=t[s],this.isGraphTime&&t[s]<0)continue;r=this.getMetadataValue(n,"x",this.connectBy),this.connectByData.hasOwnProperty(r)||(this.connectByData[r]=[]),this.connectByData[r].push(s)}}else if(this.connectBy&&this.data.z&&this.data.z.hasOwnProperty(this.connectBy)){var r,n;this.connectByDataVar=[],this.connectByData={};for(i=0,s=0;s<e.length;s++)n=e[s],r=this.getMetadataValue(n,"z",this.connectBy),this.connectByData.hasOwnProperty(r)||(this.connectByData[r]=[]),this.connectByData[r].push(s)}},this.draw1DDotplotDataPoints=function(t,e,i){var s=this,a=function(t,e,i,a){if(a)for(var r=s.segregateSamplesBy.length&&s.groupingFactors.includes(s.segregateSamplesBy[0])?s.data.w.glab[e]:[s.data.l.name[s.layoutCurrent],s.data.w.glab[e]].join("::"),n=0;n<m[t].length;n++)if(m[t][n].density.name==r){e=n;break}var o=m[t][e].indices,h=m[t][e].global;for(n=0;n<o.length;n++)if(o[n]==i)return h[n]},r=function(t,e,i){var a=s.data.y.smps.length>s.dotplotOutlineThreshold?2*t:2*t/e;return Math.max(1.01,s.dataPointSize*s.dataPointSizeScaleFactor*(i?.3:.5)*a)},n=this.get1DIndices(),o=n.length,h=function(){if(s.graphType.match(/Line/)){for(var t=[],e=0;e<s.xAxisVarIndices.length;e++)s.varIndices.includes(s.xAxisVarIndices[e])&&t.push(s.xAxisVarIndices[e]);return t}return s.varIndices}(),l=this.get1DLeft(),c=this.get1DTop(),d="stacked"==this.dotplotType?(this.blockSeparation+this.rbs)/2+this.blockSeparation:(this.blockSeparation+this.rbs)/2,p=this.plotByVariable?this.rbs:this.blockSeparation+this.rbs*i,g=this.jitter,u=this.binned,m=this.meta.data.d.g,f=this.layoutValid?Math.max(this.layoutRows,this.layoutCols):1;this.setConnectData(n,this.varIndices),this.xAxisTransform&&"percentile"==this.xAxisTransform&&this.setRangeData(this.summaryType),"lollipop"==this.barType&&(this.jitter=!1,this.binned=!1),"vertical"==this.graphOrientation?(l+=d,c+=this.y):c+=d,e=e?1:this.widthFactor;for(var y=0;y<h.length;y++){for(var x,v=[],b=[],A=[],w=[],C=[],T=[],S=[],M=0;M<o;M++)if(this.isGroupedData){var D=this.isGraphTime&&n[M]<0?0:this.data.w.grps[n[M]].length>1,k=[],L=[],I=[],z=[],N=[],B=[],P=this.isTransformedData||this.showBoxplotOriginalData&&this.data.y.trans&&this.data.y.trans[0].length?this.data.y.trans:this.data.y.data;if(this.isGroupedData=!1,this.isGraphTime&&n[M]<0)k.push(null),N.push(null),L.push(null),I.push(null),z.push(null),B.push([null]);else for(var R=0;R<this.data.w.grps[n[M]].length;R++)x=this.getPropertyValue(h[y],this.data.w.grps[n[M]][R],"colorBy"),k.push(this.binned&&D?a(h[y],n[M],this.data.w.grps[n[M]][R],this.layoutValid&&!this.isDOE):P[h[y]][this.data.w.grps[n[M]][R]]),N.push(this.getPropertyValue(h[y],this.data.w.grps[n[M]][R],"shapeBy")),L.push(this.sizeBy?this.getPropertyValue(h[y],this.data.w.grps[n[M]][R],"sizeBy")*e:r(e,f,t)),I.push(t?this.addColorTransparency(x,this.boxplotDataPointTransparency,!0):x),z.push(this.getPropertyValue(h[y],this.data.w.grps[n[M]][R],"patternBy")),B.push([h[y],n[M],this.data.w.grps[n[M]][R]]);this.isGroupedData=!0,this.data.w.hasOwnProperty("stdev")&&b.push(!1),v.push(k),C.push(N),T.push(L),A.push(I),w.push(z),S.push(B)}else this.isGraphTime&&n[M]<0?(v.push([null]),this.data.y.hasOwnProperty("stdev")&&b.push([null]),C.push([null]),T.push([null]),A.push([null]),w.push([null]),S.push([null])):(x=this.getPropertyValue(h[y],n[M],"colorBy"),v.push([this.getDataAtPos(h[y],n[M],!1,this.xAxisTransform,this.xAxisFloorValue,this.xAxisCeilValue)]),this.data.y.hasOwnProperty("stdev")&&b.push([this.getDataAtPos(h[y],n[M],"stdev",this.xAxisTransform,this.xAxisFloorValue,this.xAxisCeilValue)]),C.push([this.getPropertyValue(h[y],n[M],"shapeBy")]),T.push(["lollipop"==this.barType?this.rbs*this.barLollipopFactor:this.sizeBy?this.getPropertyValue(h[y],n[M],"sizeBy"):r(e,f,t)]),A.push([t?this.addColorTransparency(x,this.boxplotDataPointTransparency,!0):x]),w.push([this.getPropertyValue(h[y],n[M],"patternBy")]),S.push([[h[y],n[M]]]));this.plotByVariable?this.drawDotPlot(v,b,l,c,this.rbs,p,this.xAxisUnit,this.xAxisMin,T,this.graphOrientation,A,w,C,S,!1,!1,!!this.invertGraph&&this.x,this.data.y.vars[h[y]],y==h.length-1):this.drawDotPlot(v,b,l,c,this.blockSeparation,p,this.xAxisUnit,this.xAxisMin,T,this.graphOrientation,A,w,C,S,!1,!1,!!this.invertGraph&&this.x,this.data.y.vars[h[y]],y==h.length-1),"vertical"==this.graphOrientation?"stacked"!=this.dotplotType&&(l=this.plotByVariable?l+(this.blockSeparation+this.rbs*o):l+this.rbs):"stacked"!=this.dotplotType&&(c=this.plotByVariable?c+(this.blockSeparation+this.rbs*o):c+this.rbs)}this.jitter=g,this.binned=u},this.draw1DHeatmapDataPoints=function(t,e){var i=this.get1DIndices(),s=this.isGroupedData?this.data.w:this.data.y,a=i.length,r=this.get1DLeft(e),n=this.get1DTop(e),o=!(!(this.isContour||this.cbs<4||this.rbs<4)&&this.heatmapCellBox),h=Math.max(Math.min(this.cbs,this.rbs)-10,3),l=(this.dataSizes&&this.dataSizes.length>0&&this.max(this.dataSizes),this.outlineWidth);if(this.xAxisTransform&&"percentile"==this.xAxisTransform&&this.setRangeData(this.summaryType),this.heatmapType.match(/circle|hexagon/)){n+=this.rbs/2;for(var c=0;c<this.varIndices.length;c++)for(var d=0;d<a;d++){var p=r+c*this.cbs+this.cbs/2,g=n+d*this.rbs+this.rbs/4*(c%2?1:-1),u=this.getDataAtPos(this.varIndices[c],i[d],!1,this.xAxisTransform,this.xAxisFloorValue,this.xAxisCeilValue),m=isNaN(u)?this.missingDataColor:this.getColorForValue(!1,u),f=this.heatmapCollapse?m:this.objectBorderColor,y="circle"==this.heatmapType?"oval":"hexagon",x="circle"==this.heatmapType?1.2:1.5;this.toRender({p:["drawShape",y,p,g,this.cbs*x,this.rbs,m,f],i:[this.varIndices[c],i[d]],b:this.left,t:"Data",h:this.isHidden(this.varIndices[c],i[d])})}}else if(!this.isMultidimensionalData&&!this.isOncoprint||this.oncoprintHeatmapSwitch||t){for(y=0,c=0;c<a;c++){var v=[],b=[];for(x=[],d=0;d<this.varIndices.length;d++)v.push(this.getDataAtPos(this.varIndices[d],i[c],!1,this.xAxisTransform,this.xAxisFloorValue,this.xAxisCeilValue)),b.push([this.varIndices[d],i[c]]),this.patternBy?x.push(this.getPropertyValue(this.varIndices[d],i[c],"patternBy")):x.push("solid");c>0&&c<a-1?y>=.8&&(this.drawHeatmap(v,r,n,this.cbs,this.rbs,o,b,!1,x,this.meta.def.colorBrew),this.heatmapCellBox&&!this.isOncoprint&&this.rbs>1&&this.toRender({p:["drawLine","line",r,n-1,r+this.cbs*this.varIndices.length,n-1,this.heatmapCellBoxColor,this.heatmapCellBoxWidth],s:!0,t:"Data"}),y=0):(this.drawHeatmap(v,r,n,this.cbs,this.rbs,o,b,!1,x,this.meta.def.colorBrew),this.heatmapCellBox&&!this.isOncoprint&&this.rbs>1&&this.cbs>1&&(c==a-1?(this.toRender({p:["drawLine","line",r,n-.5,r+this.cbs*this.varIndices.length,n-.5,this.heatmapCellBoxColor,this.heatmapCellBoxWidth],s:!0,t:"Data"}),this.toRender({p:["drawLine","line",r,n+this.rbs,r+this.cbs*this.varIndices.length,n+this.rbs,this.heatmapCellBoxColor,this.heatmapCellBoxWidth],s:!0,t:"Data"})):this.toRender({p:["drawLine","line",r,n-.5,r+this.cbs*this.varIndices.length,n-.5,this.heatmapCellBoxColor,this.heatmapCellBoxWidth],s:!0,t:"Data"}))),n+=this.rbs,y+=this.rbs}if(!o&&!this.isOncoprint&&this.rbs>1&&this.cbs>1){r=this.get1DLeft(e),n=this.get1DTop(e),this.toRender({p:["drawLine","line",r,n-1,r,n+this.y-(this.margin+.5),this.heatmapCellBoxColor,this.heatmapCellBoxWidth],s:!0,t:"Data"}),r+=this.cbs;for(c=1;c<=this.varIndices.length;c++)this.toRender({p:["drawLine","line",r-.5,n-1,r-.5,n+this.y-(this.margin+.5),this.heatmapCellBoxColor,this.heatmapCellBoxWidth],s:!0,t:"Data"}),r+=this.cbs;this.toRender({p:["drawLine","line",r-(this.cbs+.5),n-1,r-(this.cbs+.5),n+this.y-(this.margin+.5),this.heatmapCellBoxColor,this.heatmapCellBoxWidth],s:!0,t:"Data"}),r=this.get1DLeft()}if(this.highlightSmp.length>0||this.highlightVar.length>0){n=this.get1DTop(e),r=this.get1DLeft(e);var A=this.getObjectArray(this.highlightVar),w=this.getObjectArray(this.highlightSmp),C=(L=this.heatmapCellBoxWidth+this.heatmapCellBoxHighlightWidth)/2;if(0==this.highlightSmp.length)for(c=0;c<this.varIndices.length;c++)A.hasOwnProperty(s.vars[this.varIndices[c]])&&this.toRender({p:["drawShape","rectangle",r+C+(this.cbs-L)/2,n+C+(this.y-L)/2,this.cbs-L,this.y-L,!1,this.heatmapCellBoxColorHighlight,"open",!1,L],s:!0,t:"Data"}),r+=this.cbs;else if(0==this.highlightVar.length)for(c=0;c<a;c++)w.hasOwnProperty(s.smps[i[c]])&&this.toRender({p:["drawShape","rectangle",r+C+(this.x-L)/2,n+C+(this.rbs-L)/2,this.x-L,this.rbs-L,!1,this.heatmapCellBoxColorHighlight,"open",!1,L],s:!0,t:"Data"}),n+=this.rbs;else for(c=0;c<a;c++){r=this.get1DLeft();for(d=0;d<=this.varIndices.length;d++)w.hasOwnProperty(s.smps[i[c]])&&A.hasOwnProperty(s.vars[this.varIndices[d]])&&this.toRender({p:["drawShape","rectangle",r+C+(this.cbs-L)/2,n+C+(this.rbs-L)/2,this.cbs-L,this.rbs-L,!1,this.heatmapCellBoxColorHighlight,"open",!1,L],s:!0,t:"Data"}),r+=this.cbs;n+=this.rbs}}}else{if(this.isOncoprint)for(var T="rgb(220,220,220)",S=.9*this.cbs,M=.9*this.rbs,D=.3*this.rbs,c=0;c<this.varIndices.length;c++)for(var d=0;d<a;d++){p=r+c*this.cbs+this.cbs/2,g=n+d*this.rbs+this.rbs/2,u=this.getDataAtPos(this.varIndices[c],i[d],!1,this.xAxisTransform,this.xAxisFloorValue,this.xAxisCeilValue,this.oncoprintCNA),h=this.getDataAtPos(this.varIndices[c],i[d],!1,this.xAxisTransform,this.xAxisFloorValue,this.xAxisCeilValue,this.oncoprintMUT);var x=this.getPropertyValue(this.varIndices[c],i[d],"patternByData"),k=(m=isNaN(u)?this.missingDataColor:this.getColorForValue(!1,u),!this.isOncoprint&&this.isHidden(this.varIndices[c],i[d]));""!=u?this.toRender({p:["drawShape","rect",p,g,S,M,this.legend.oncoprint.colors[u],this.legend.oncoprint.colors[u],x],i:[this.varIndices[c],i[d]],b:[this.left,g,0,M],t:"Data",h:k}):this.toRender({p:["drawShape","rect",p,g,S,M,T,T,x],i:[this.varIndices[c],i[d]],b:[this.left,g,0,M],t:"Data",h:k}),""!=h&&this.toRender({p:["drawShape","rect",p,g,S,D,this.legend.oncoprint.colors[h],this.legend.oncoprint.colors[h],x],i:[this.varIndices[c],i[d]],b:[this.left,g,0,M],t:"Data",h:k})}else for(var c=0;c<this.varIndices.length;c++)for(var d=0;d<a;d++){p=r+c*this.cbs+this.cbs/2,g=n+d*this.rbs+this.rbs/2,u=this.getDataAtPos(this.varIndices[c],i[d],!1,this.xAxisTransform,this.xAxisFloorValue,this.xAxisCeilValue),m=isNaN(u)?this.missingDataColor:this.getColorForValue(!1,u),f=this.outlineBy?this.getPropertyValue(this.varIndices[c],i[d],"outlineByData"):this.objectBorderColor;var y=this.getPropertyValue(this.varIndices[c],i[d],"shapeByData"),L=this.getPropertyValue(this.varIndices[c],i[d],"sizeByData");x=this.getPropertyValue(this.varIndices[c],i[d],"patternByData");this.toRender({p:["drawShape",y,p,g,L,L,m,f,x],i:[this.varIndices[c],i[d]],b:this.left,t:"Data",h:this.isHidden(this.varIndices[c],i[d])}),this.showDataValues&&this.toRender({p:["drawText",this.formatNumber(u),p+this.cbs/2-2,g+this.rbs/2-2,this.overlayFont,this.foreground,"right","bottom"],b:this.left,t:"Data"})}this.outlineWidth=l}},this.draw1DTreemapDataPoints=function(){var t=this.get1DLeft(),e=this.get1DTop(),i=this.getTreemap();this.drawTreemap(i,t,e)},this.draw1DTagCloudDataPoints=function(){switch(this.tagCloudShape){case"circle":default:this.tagCloudShapeFunction="circle";break;case"cardioid":this.tagCloudShapeFunction=function(t){return 1-Math.sin(t)};break;case"diamond":this.tagCloudShapeFunction=function(t){var e=t%(2*Math.PI/4);return 1/(Math.cos(e)+Math.sin(e))};break;case"square":this.tagCloudShapeFunction=function(t){return Math.min(1/Math.abs(Math.cos(t)),1/Math.abs(Math.sin(t)))};break;case"triangle2":this.tagCloudShapeFunction=function(t){var e=t%(2*Math.PI/3);return 1/(Math.cos(e)+Math.sqrt(3)*Math.sin(e))};break;case"triangle":this.tagCloudShapeFunction=function(t){var e=(t+3*Math.PI/2)%(2*Math.PI/3);return 1/(Math.cos(e)+Math.sqrt(3)*Math.sin(e))};break;case"pentagon":this.tagCloudShapeFunction=function(t){var e=(t+.955)%(2*Math.PI/5);return 1/(Math.cos(e)+.726543*Math.sin(e))};break;case"star":this.tagCloudShapeFunction=function(t){var e=(t+.955)%(2*Math.PI/10);return(t+.955)%(2*Math.PI/5)-2*Math.PI/10>=0?1/(Math.cos(2*Math.PI/10-e)+3.07768*Math.sin(2*Math.PI/10-e)):1/(Math.cos(e)+3.07768*Math.sin(e))}}if(this.renderTagCloud&&0!=this.renderTagCloud.length||this.tryRenderTagCloud(),this.renderTagCloud.length>0){for(var t=this.cloneObject(this.renderTagCloud),e=0;e<this.renderTagCloud.length;e++){var i=this.isR?this.cloneObject(this.renderTagCloud[e]):this.renderTagCloud[e];this.toRender({p:i[0],i:i[1],m:i[2],g:i[3],s:i[4],b:i[5],t:"Data",h:this.isHidden(i[1][0],i[1][1])})}this.renderTagCloud=t,this.showTransition=!1}},this.draw1DContour=function(){if(this.isContour){var t=this.getSetContour();if(t&&t.length)for(var e=0;e<t.length;e++){var i=t[e],s=this.varIndices.length-1,a=this.smpIndices.length-1,r=this.x/s,n=this.y/a,o=this.varIndices[0]*r+.67*this.cbs,h=this.smpIndices[0]*n+.67*this.rbs,l=this.get1DLeft()-o,c=this.get1DTop()-h,d={};if(i&&i.data&&i.data.filled&&i.data.filled.length)for(var p=i.data.filled,g=this.getColorBrew(this.colorSpectrum,p[0].value,p[p.length-1].value,this.colorSpectrumZeroValue,this.colorSpectrumBreaks,!0),u=0;u<p.length;u++)for(var m="density"==this.contourStat?p[u].value:"ndensity"==this.contourStat?p[u].value/i.data.range[1]:p[u].value*i.data.n,f=this.contourFilledTransparency<1?this.addColorTransparency(this.getColorForValue(g,m),this.contourFilledTransparency):this.getColorForValue(g,m),y=0;y<p[u].coordinates.length;y++)for(var x=0;x<p[u].coordinates[y].length;x++){for(var v=[],b=[],A=0;A<p[u].coordinates[y][x].length;A++)v.push(l+p[u].coordinates[y][x][A][0]*r),b.push(c+p[u].coordinates[y][x][A][1]*n);var w=this.toRender({p:["drawShape","spline"==this.lineType?"spline":"path",v,b,!1,!1,f,f,"close"],g:d.hasOwnProperty(p[u].value)?d[p[u].value]:null,t:"Data"});d.hasOwnProperty(p[u].value)||(d[p[u].value]=w)}if(i&&i.data&&i.data.lines&&i.data.lines.length&&(this.showContourBands||this.showContourLevel))for(p=i.data.lines,u=0;u<p.length;u++)for(f=!0===this.isContour?this.contourBandsColor:this.meta.data.z[this.isContour].colors[this.meta.data.z[this.isContour].order[i.name]],y=0;y<p[u].coordinates.length;y++)for(x=0;x<p[u].coordinates[y].length;x++){v=[],b=[];var C=!1;for(A=0;A<p[u].coordinates[y][x].length;A++)vx=l+p[u].coordinates[y][x][A][0]*r,vy=c+p[u].coordinates[y][x][A][1]*n,(vx<0||vy<0||vx>l+this.x||vy>c+this.y)&&(C=!0),v.push(vx),b.push(vy);if(this.showContourBands&&(C?this.toRender({p:["drawLine","spline"==this.lineType?"spline":"path",v,b,!1,!1,!1,f,"open"],t:"Data"}):this.toRender({p:["drawShape","spline"==this.lineType?"spline":"path",v,b,!1,!1,!1,f,"open"],t:"Data"})),this.showContourLevel)for(var T=[.1,.2,.3,.4,.5,.6,.7,.8,.9],S=!1,M=0;!S&&M<18;){v[A=parseInt(v.length*T[Math.round(this.randomBetween(0,9))])]>l&&v[A]<l+this.x&&b[A]>c&&b[A]<c+this.y&&(this.toRender({p:["drawText",p[u].value+this.minData,v[A],b[A],this.legendTextFont],t:"Data"}),S=!0),M++}}}}},this.draw1DSankeyDataPoints=function(){this.moveSankeyId||this.setSankey();for(var t=this.get1DLeft()+4*this.margin,e=this.get1DTop()+2*this.margin,i=this.data.sankey,s=i.links[0].target.x-i.links[0].source.x,a=0;a<i.nodes.length;a++){var r=i.nodes[a];r.plotX=r.x+t,r.plotY=r.y+e,r.color=this.addColorTransparency(this.colors[a%this.colors.length],.75,!0),r.tooltip=["Sankey:"+r.name+":"+a]}for(a=0;a<i.links.length;a++){var n=i.links[a],o=n.dy/2;n.plotX=[],n.plotY=[],n.tooltip=[this.hierarchyVarIndex,n.id];for(var h=0;h<4;h++)n.plotX.push(n.bezier[0][h]+t),n.plotY.push(n.bezier[1][h]+e-o);if(this.colorBy)n.color=this.addColorTransparency(this.getPropertyValue(this.hierarchyVarIndex,n.id,"colorBy"),.75,!0);else if(this.sankeyCoordinateColor){var l=this.addColorTransparency(n.source.color,.75,!0),c=this.addColorTransparency(n.target.color,.75,!0);n.color=this.getLinearGradient(0,0,s,0,[l,c]),n.colors=[l,c]}else n.color=this.sankeyColor}this.drawSankey(i)},this.draw1DTreeDataPoints=function(){if(this.setTree(),this.data.tree&&this.data.tree.plot){var t=this.data.tree.plot,e=this.get1DLeft()+(this.isDOE?3*this.margin:0),i=this.get1DTop(),s=this,a=(this.data.tree.plot.leaves().length,this.treeInverted?-1:1),r=function(n){if(n.children)for(var o=0;o<n.children.length;o++)r(n.children[o]);if(s.treeCircular&&function(t){var r=Math.PI-t.x/180*Math.PI,n=t.y;if(r<0&&(r+=2*Math.PI),t.angle=r,t.radius=n,t.xi=t.x,t.yi=t.y,t.y=a*n*Math.sin(r)+s.x/2,t.x=a*n*Math.cos(r)+s.y/2,t.parent){var o=Math.PI-t.xi/180*Math.PI,h=Math.PI-t.parent.x/180*Math.PI;n=(t.yi+t.parent.y)/2,t.mx=a*n*Math.sin(o)+s.x/2+e,t.my=a*n*Math.cos(o)+s.y/2+i,t.mx2=a*n*Math.sin(h)+s.x/2+e,t.my2=a*n*Math.cos(h)+s.y/2+i}}(n),"vertical"!=s.graphOrientation||s.treeCircular?"horizontal"!=s.graphOrientation||s.treeCircular?(n.y0=n.y+e,n.x0=n.x+i):(n.y0=s.treeInverted?t.size[1]-n.y+e:n.y+e,n.x0=s.treeInverted?t.size[0]-n.x+i:n.x+i):(n.y0=s.treeInverted?t.size[1]-n.y+i:n.y+i,n.x0=s.treeInverted?t.size[0]-n.x+e:n.x+e),s.colorBy?s.colorBy&&!n.data.color&&(n.data.color=null!=n.data.idx?s.getPropertyValue(!1,n.data.idx,"colorBy"):s.background):n.data.color=s.background,s.shapeBy?s.shapeBy&&!n.data.shape&&(n.data.shape=null!=n.data.idx?s.getPropertyValue(!1,n.data.idx,"shapeBy"):"sphere"):n.data.shape="sphere",s.sizeBy?s.sizeBy&&!n.data.size&&(n.data.size=null!=n.data.idx?s.getPropertyValue(!1,n.data.idx,"sizeBy"):s.treeNodeSize):n.data.size=s.isDOE?s.treeNodeSize/2:s.treeNodeSize,s.patternBy?s.patternBy&&!n.data.pattern&&(n.data.pattern=null!=n.data.idx?s.getPropertyValue(!1,n.data.idx,"patternBy"):"solid"):n.data.pattern="solid",n.data.tooltip="Tree:"+n.data.name+" ("+n.leaves().length+")",n.parent){var h=[],l=[],c=[],d=[];for(o=0;o<n.parent.children.length;o++)h.push(n.parent.children[o].data.color),l.push(n.parent.children[o].data.size),c.push(n.parent.children[o].data.shas),d.push(n.parent.children[o].data.pats);n.parent.data.color=s.combineColors(h),n.parent.data.size=s.mean(l),s.isUnique(c)&&(n.parent.data.shape=c[0]),s.isUnique(d)&&(n.parent.data.pattern=d[0])}};!function(t){for(var e=t.descendants(),i=0;i<e.length;i++)e[i]._children||(delete e[i].data.color,delete e[i].data.shape,delete e[i].data.size,delete e[i].data.pattern)}(this.data.tree.plot),r(this.data.tree.plot),this.drawTree(s.graphOrientation)}},this.checkOrientationLayout=function(){this.layoutValid&&this.segregateVariablesBy.length&&this.segregateSamplesBy.length&&("rows"==this.layoutType&&!this.layoutTypeVariablesFirst||"cols"==this.layoutType&&this.layoutTypeVariablesFirst?("vertical"==this.graphOrientation&&this.flashInfoSpan(100,100,"Graph orienation switched to horizontal",5e3),this.graphOrientation="horizontal"):("cols"==this.layoutType&&!this.layoutTypeVariablesFirst||"rows"==this.layoutType&&!this.layoutTypeVariablesFirst||"wrap"==this.layoutType&&this.segregateVariablesBy.length&&this.segregateSamplesBy.length)&&("horizontal"==this.graphOrientation&&this.flashInfoSpan(100,100,"Graph orienation switched to vertical",5e3),this.graphOrientation="vertical"))},this.checkOrientation=function(){"Meter"==this.graphType?"vertical"==this.meterType?this.graphOrientation="vertical":"horizontal"==this.meterType&&(this.graphOrientation="horizontal"):this.graphType.match(/Heatmap|Gantt/)?("vertical"==this.graphOrientation&&this.flashInfoSpan(100,100,"Graph orienation switched to horizontal",5e3),this.graphOrientation="horizontal"):"Sankey"==this.graphType&&("horizontal"==this.graphOrientation&&this.flashInfoSpan(100,100,"Graph orienation switched to vertical",5e3),this.graphOrientation="vertical"),this.checkOrientationLayout()},this.checkClustering=function(){this.samplesClustered&&this.clusterSamples(!1,!0),this.variablesClustered&&this.clusterVariables(!1,!0),this.samplesKmeaned&&this.kmeansSamples(!1,!0),this.variablesKmeaned&&this.kmeansVariables(!1,!0)},this.checkSamplesGrouping=function(){this.groupingFactors.length>0&&!this.isGroupedData&&(this.layoutComb&&this.data.l&&this.data.l.group&&this.isSameObject(this.data.l.group.sort(),this.groupingFactors.sort())||this.groupSamples(this.groupingFactors,!1,!1,!0,!0)),this.setGroupLabels()},this.checkDataTransform=function(){this.transformData!=this.isTransformedData&&(this.transform(this.transformData,this.transformAxis,!1,!0),this.initializeAxis(),this.setColorBrew(!0))},this.checkMultidimensional=function(){for(var t="Heatmap"==this.graphType?["outline","shape","size","pattern"]:["color","outline","shape","size","pattern"],e=0;e<t.length;e++){var i=t[e]+"ByData";this[i]&&this.data.y[this[i]]&&this.isArray(this.data.y[this[i]])&&(this.isMultidimensionalData=!0)}},this.checkTree=function(){this.treeNodeSize=Math.min(20,Math.max(4,Math.ceil(this.height/this.data.y.smps.length)))},this.checkTreemap=function(){"Treemap"==this.graphType&&(this.showVarDendrogram=!0)},this.checkStack=function(){this.stackBy&&this.meta.data.x&&this.meta.data.x[this.stackBy]&&"Numeric"==this.meta.data.x[this.stackBy].type&&this.switchNumericToString(this.stackBy,!0,!0)},this.checkDodge=function(){this.dodgeBy&&this.meta.data.x&&this.meta.data.x[this.dodgeBy]&&"Numeric"==this.meta.data.x[this.dodgeBy].type&&this.switchNumericToString(this.dodgeBy,!0,!0)},this.checkLine=function(){this.lineBy&&this.meta.data.x&&this.meta.data.x[this.lineBy]&&"Numeric"==this.meta.data.x[this.lineBy].type&&this.switchNumericToString(this.lineBy,!0,!0)},this.checkBoxplotWidthRatio=function(){this.boxplotWidthRatioIfViolin=Math.min(1,Math.max(.1,this.boxplotWidthRatioIfViolin))},this.checkOncoprint=function(){this.oncoprintCNA&&this.data.y.hasOwnProperty(this.oncoprintCNA)?this.summarizeOncoprint():(this.isOncoprint=!1,this.oncoprintCNA=!1)},this.checkSankey=function(){this.sankeyColor=this.addColorTransparency(this.sankeyColor,.5,!0)},this.checkSwimmer=function(){"swimmer"==this.barType&&(this.swimHigh&&-1==this.getVariableIndices(this.swimHigh)&&(this.swimHigh=this.data.y.vars[0]),this.swimStart&&-1==this.getVariableIndices(this.swimStart)&&(this.data.y.vars.length>1?this.swimStart=this.data.y.vars[1]:this.barType="normal"),this.swimEnd&&-1==this.getVariableIndices(this.swimEnd)&&(this.data.y.vars.length>2?this.swimEnd=this.data.y.vars[2]:this.barType="normal"),"swimmer"==this.barType&&this.summarizeSwimmer())},this.checkGantt=function(){"Gantt"==this.graphType&&(this.showOverlays=!1,this.showVarDendrogram=!1,this.showSmpDendrogram=!1,this.plotByVariable=!1,this.xAxisTicksMajorShow=!1,this.xAxisTicksMinorShow=!1,this.xAxisShow=!1)},this.checkAxes=function(){var t,e;if(this.xAxis.length&&(t=this.isSameObject(this.getVariableIndices(this.xAxis),this.xAxisVarIndices)),this.xAxis2.length&&(e=this.isSameObject(this.getVariableIndices(this.xAxis2),this.xAxis2VarIndices)),t&&e||(this.layoutAdjust?this.setAxes():(t||(this.xAxisVarIndices=this.getVariableIndices(this.xAxis)),e||(this.xAxis2VarIndices=this.getVariableIndices(this.xAxis2)))),this.graphType.match(/Line/)&&this.isGroupedData&&!this.isDOE){for(var i=[],s=0;s<this.xAxisVarIndices.length;s++)i.push(this.xAxisVarIndices[s]);for(s=0;s<this.xAxis2VarIndices.length;s++)i.push(this.xAxis2VarIndices[s]);this.setVariablesVisible(i),this.groupSamples(this.groupingFactors,!1,!1,!0,!0,!0)}},this.validate1DPropertyDefaults=function(){this.checkBoxplotWidthRatio(),this.checkOrientation(),this.checkSamplesGrouping(),this.checkDataTransform(),this.checkClustering(),this.checkSegregation(),this.checkMultidimensional(),this.checkTreemap(),this.checkTree(),this.checkStack(),this.checkDodge(),this.checkLine(),this.checkOncoprint(),this.checkSankey(),this.checkSwimmer(),this.checkGantt()},this.setOverlaysDendrogramVariable=function(){this.isDOE?(this.showOverlays=!1,this.showVarDendrogram=!1,this.showSmpDendrogram=!1,this.smpTitle=!1):this.plotByVariable&&(this.graphType.match(/^Bar$|Boxplot|Dotplot|Gantt/)?(this.showOverlays=!1,this.showVarDendrogram=!1,this.showSmpDendrogram=!1):this.plotByVariable=!1)},this.set1DAttributes=function(){this.checkOrientation(),this.checkAxes(),this.validatePropertyValues(),this.setGroupLabels(),this.setOverlaysDendrogramVariable(),this.setDendrograms(),this.set1DOverlays(),this.set1DXYDimensions(),this.set1DPrivateParams(),this.set1DXAxis()},this.set1DOverlays=function(){this.validateOverlays(),this.setOverlays("var"),this.setOverlays("smp")},this.draw1DLayout=function(){this.drawDendrograms(),this.draw1DXLayout(),this.draw1DYLayout()},this.draw1DData=function(){this.drawPlotWindow(),this.draw1DWireFrame(),this.draw1DDataPoints(),this.draw1DLayout(),this.draw1DOverlays(),this.drawDecorationData(),this.drawLegend(),this.drawTitle()},this.draw1DPlot=function(){this.set1DAttributes(),this.draw1DData()},this.restoreOriginalSettings=function(){for(var t=this.meta.config.orig,e=["varLabelScaleFontFactor","showVariableNames","showSampleNames","smpLabelScaleFontFactor","insideLegend","legendTextFontSize","showLegend","legendPosition"],i=0;i<e.length;i++){var s=e[i];t[s]&&(this[s]=t[s],delete t[s])}this.adjustAspectRatioXTries=0,this.adjustAspectRatioYTries=0},this.initialize1DPlot=function(){this.validate1DPropertyDefaults(),this.layoutValid&&this.data.l?this.drawLayoutCompartments(this.draw1DPlot):this.draw1DPlot(),this.restoreOriginalSettings(),this.resetInitialFontSize()},t||this.initialize1DPlot()},CanvasXpress.prototype.Network=function(t){this.findXYCoordinates=function(t){var e=this.adjustedCoordinates(t),i={};return i.x=(e.x/this.scaleFactorX||1)-this.offsetX,i.y=(e.y/this.scaleFactorY||1)-this.offsetY,i},this.addNode=function(t,e){if(t){if(!t.id){for(var i=0,s="id"+i;this.nodes.hasOwnProperty(s);)s="id"+ ++i;t.id=s}if(t.color||(t.color=this.colors[0]),t.shape||(t.shape=this.shapes[0]),t.size||(t.size=1),e){var a=this.findXYCoordinates(e);t.x=a.x,t.y=a.y}return this.data.nodeIndices[t.id]=this.data.nodes.length,this.data.nodes.push(t),this.nodes[t.id]=t,t}},this.getNodeConfigurableProperties=function(t){return null!=t?this.getKeys(this.data.nodes[t]):[]},this.getEdgeConfigurableProperties=function(t){return null!=t?this.getKeys(this.data.edges[t]):[]},this.removeNode=function(t,e){if(t&&t.id){var i=!!e&&this.getObjectArray(this.findChildrenNodeIndices(t.id)),s=[],a=0;if(t.hasOwnProperty("layout")&&t.layout.children.length)for(var r=0;r<t.layout.children.length;r++){var n=t.layout.children[r];null!=this.data.nodeIndices[n]&&this.data.nodes[this.data.nodeIndices[n]]&&delete this.data.nodes[this.data.nodeIndices[n]].parentNode}this.data.nodeIndices={};for(r=0;r<this.data.nodes.length;r++){var o=this.data.nodes[r];if(o.id!=t.id)if(i&&i.hasOwnProperty(r))for(var h=o.layout.edges,l=0;l<h.length;l++)this.removeEdge(h[l]);else s.push(o),this.data.nodeIndices[o.id]=a,a++;else for(h=o.layout.edges,l=0;l<h.length;l++)this.removeEdge(h[l]);o.layout.edges=this.edgesForNode(this.data.edges,o.id)}this.data.nodes=s}},this.addEdge=function(t){t&&t.id1&&t.id2&&(t.color||(t.color=this.colors[0]),t.width||(t.width=1),t.type||(t.type="line"),this.data.edges.push(t))},this.removeEdge=function(t){if(t&&t.id1&&t.id2){for(var e=[],i=0;i<this.data.edges.length;i++)this.data.edges[i].id1==t.id1&&this.data.edges[i].id2==t.id2||e.push(this.data.edges[i]);this.data.edges=e}},this.appendNodeData=function(t){for(var e in t)if(this.data.nodes[this.data.nodeIndices[e]]){var i=this.data.nodes[this.data.nodeIndices[e]];for(var s in t[e])i[s]=t[e][s]}this.updateNetworkMetaData("nodes"),CanvasXpress.stack[this.target].data=this.data,delete this.nodesData},this.appendEdgeData=function(t){for(var e=0;e<this.data.edges.length;e++){var i=this.data.edges[e],s=i.id1+":"+i.id2,a=i.id2+":"+i.id1,r=t.hasOwnProperty(s)?t[s]:!!t.hasOwnProperty(a)&&t[a];if(r)for(var n in r)i[n]=r[n]}this.updateNetworkMetaData("edges"),CanvasXpress.stack[this.target].data=this.data,delete this.edgesData},this.modifyXYEdgeElbow=function(t,e,i,s){var a=this.data.edges[t].elbows[e];a[0]-=i,a[1]-=s},this.getNodeWidth=function(t){return t.width?t.width:t.size?this.nodeSize*t.size:this.nodeSize},this.getNodeHeight=function(t){return t.height?t.height:t.size?this.nodeSize*t.size:this.nodeSize},this.modifyNodeSize=function(t,e,i){var s=this.data.nodes[this.data.nodeIndices[t]];delete s.size,s.width=e,s.height=i},this.modifyXYNode=function(t,e,i){var s=this.data.nodes[this.data.nodeIndices[t]];if(!s.fixed){s.x-=e,s.y-=i;var a=this.edgesForNode(this.data.edges,t);if(a.length>0)for(var r=0;r<a.length;r++){var n=a[r];if(n.elbows){var o=n.elbows.length-1;n.id1==t?(n.elbows[0][0]-=e,n.elbows[0][1]-=i):n.id2==t&&(n.elbows[o][0]-=e,n.elbows[o][1]-=i)}}if(null!=s.labelX&&null!=s.labelY&&this.modifyXYNodeLab(t,e,i),null!=s.decorationsX&&null!=s.decorationsY&&this.modifyXYNodeDec(t,e,i),"radial"!=this.networkLayoutType&&s.hasOwnProperty("layout")&&s.layout.children.length&&this.moveParentsWithChildren)for(r=0;r<s.layout.children.length;r++){var h=s.layout.children[r];this.modifyXYNode(h,e,i)}}},this.modifyXYNodeLab=function(t,e,i){var s=this.data.nodes[this.data.nodeIndices[t]];s.fixed||(s.labelX=null!=s.labelX?s.labelX-e:s.labelXi-e,s.labelY=null!=s.labelY?s.labelY-i:s.labelYi-i)},this.modifyXYNodeDec=function(t,e,i){var s=this.data.nodes[this.data.nodeIndices[t]];s.fixed||(s.decorationsX=null!=s.decorationsX?s.decorationsX-e:s.decorationsXi-e,s.decorationsY=null!=s.decorationsY?s.decorationsY-i:s.decorationsYi-i)},this.getHiddenNodes=function(){var t=[];if(this.data.nodes)for(var e=0;e<this.data.nodes.length;e++)this.data.nodes[e].hide&&t.push(this.data.nodes[e]);return t},this.orderNodes=function(t){for(var e in CanvasXpress.selector.nodes)this[t](this.data.nodes[this.data.nodeIndices[e]])},this.sendNodeToBack=function(t){for(var e=[t],i=0;i<this.data.nodes.length;i++)this.data.nodes[i].id!=t.id&&e.push(this.data.nodes[i]);this.data.nodes=e,this.setNodeIndices()},this.sendNodeBackward=function(t){var e=[],i=this.data.nodeIndices[t.id];if(i>0){for(var s=0;s<i-1;s++)e.push(this.data.nodes[s]);e.push(this.data.nodes[i]),e.push(this.data.nodes[i-1]);for(s=i+1;s<this.data.nodes.length;s++)e.push(this.data.nodes[s]);this.data.nodes=e,this.setNodeIndices()}},this.bringNodeToFront=function(t){for(var e=[],i=0;i<this.data.nodes.length;i++)this.data.nodes[i].id!=t.id&&e.push(this.data.nodes[i]);e.push(t),this.data.nodes=e,this.setNodeIndices()},this.bringNodeForward=function(t){var e=[],i=this.data.nodeIndices[t.id];if(this.data.nodes.length-1>i){for(var s=0;s<i;s++)e.push(this.data.nodes[s]);e.push(this.data.nodes[i+1]),e.push(this.data.nodes[i]);for(s=i+2;s<this.data.nodes.length;s++)e.push(this.data.nodes[s]);this.data.nodes=e,this.setNodeIndices()}},this.flashNode=function(t,e,i){t=this.toArray(t);for(var s=(this.maxX-this.minX)/this.scaleFactorX,a=(this.maxY-this.minY)/this.scaleFactorY,r=.015,n=0;n<t.length;n++){var o=t[n],h=this.data.nodes[this.data.nodeIndices[o]],l=h.width?h.width:h.size?h.size:this.nodeSize,c=h.height?h.height:h.size?h.size:this.nodeSize,d=1.35*(l<r*s?r*s:l),p=1.35*(c<r*a?r*a:c),g=this.adjustNetworkObjects(["circle",h.x,h.y,1]);this.flash(g[1],g[2],d*this.scaleFactorX,p*this.scaleFactorY,e||this.nodeHighlightColor,i)}},this.highlightNodes=function(t){this.isTransition()||(this.isArray(t)?this.highlightNode=this.highlightNode.concat(t):this.highlightNode.push(t),this.draw({func:"highlightNodes",par:[t]}))},this.unHighlightNodes=function(t){if(!this.isTransition()){var e=[];t=this.toArray(t);for(var i=0;i<this.highlightNode.length;i++){for(var s=!1,a=0;a<t.length;a++)if(this.highlightNode[i]==t[a]){s=!0;break}s||e.push(this.highlightNode[i])}this.highlightNode=e,this.draw({func:"unHighlightNodes",par:[t]})}},this.alignDistributeSelectedNodes=function(t,e){if(!this.isTransition()){var i,s,a,r,n=this.getSelectedNodeCoordinates();if(n||89==e||90==e){if(t&&(this.cancelEvent(t),this.stopEvent(t)),84==e)for(var o in i=this.min(n.y),CanvasXpress.selector.nodes){var h=this.data.nodes[this.data.nodeIndices[o]];this.modifyXYNode(h.id,0,h.y-i)}else if(82==e)for(var o in i=this.max(n.x),CanvasXpress.selector.nodes){h=this.data.nodes[this.data.nodeIndices[o]];this.modifyXYNode(h.id,h.x-i,0)}else if(66==e)for(var o in i=this.max(n.y),CanvasXpress.selector.nodes){h=this.data.nodes[this.data.nodeIndices[o]];this.modifyXYNode(h.id,0,h.y-i)}else if(76==e)for(var o in i=this.min(n.x),CanvasXpress.selector.nodes){h=this.data.nodes[this.data.nodeIndices[o]];this.modifyXYNode(h.id,h.x-i,0)}else if(86==e){s=this.range(n.y),a=this.rank(n.y),r=(s[1]-s[0])/(CanvasXpress.selector.selections-1),i=s[0];for(var l=0;l<a.length;l++){o=n.i[a[l]];h=this.data.nodes[this.data.nodeIndices[o]];this.modifyXYNode(h.id,0,h.y-(i+l*r))}}else if(72==e){s=this.range(n.x),a=this.rank(n.x),r=(s[1]-s[0])/(CanvasXpress.selector.selections-1),i=s[0];for(l=0;l<a.length;l++){o=n.i[a[l]];h=this.data.nodes[this.data.nodeIndices[o]];this.modifyXYNode(h.id,h.x-(i+l*r),0)}}this.draw({network:!0,func:"alignDistributeSelectedNodes",par:[t,e]})}return!1}},this.getSelectedNodeCoordinates=function(){var t={x:[],y:[],i:[]},e=!1;for(var i in CanvasXpress.selector.nodes){var s=this.data.nodes[this.data.nodeIndices[i]];t.x.push(s.x),t.y.push(s.y),t.i.push(i),e=!0}return!!e&&t},this.findNodesBy=function(t){var e=[],i=0;for(var s in t)t[s]=this.toArray(t[s]),i++;for(var a=0;a<this.data.nodes.length;a++){var r=this.data.nodes[a],n=0;for(var s in t)for(var o=t[s],h=0;h<o.length;h++)r[s]&&r[s]==o[h]&&n++;n==i&&e.push(r)}return e},this.setNetworkDimensions=function(){if(this.left=10,this.right=10,this.top=this.getTitleSubtitleHeight()+10,this.bottom=10,this.showLegend&&(this.legendInside||(this.legendPosition.match(/right/i)?this.right+=this.legend.width+this.margin:this.legendPosition.match(/left/i)?this.left+=this.legend.width+this.margin:this.legendPosition.match(/bottom/i)?this.bottom+=this.legend.height+this.margin:this.top+=this.legend.height+this.margin)),"circular"==this.networkLayoutType&&this.showNodeNameThreshold>=this.data.nodes.length){var t=this.meta.data.nodes.label?this.meta.data.nodes.label.maxLevStr:this.meta.data.nodes.name?this.meta.data.nodes.name.maxLevStr:this.meta.data.nodes.id.maxLevStr,e=this.zoomScale?1:this.zoom,i=this.nodeFontSize*this.nodeScaleFontFactor,s=this.nodeFontStyle+" "+Math.min(Math.max(parseInt(i/e),this.scaleFactorX>this.minTextSize?1:this.minTextSize),this.maxTextSize)+"px "+this.fontName,a=.3*this.measureText(t,s);this.left+=a,this.right+=a,this.top+=a,this.bottom+=a}this.x=this.width-(this.left+this.right),this.y=this.height-(this.top+this.bottom)},this.setNetworkPrivateParams=function(t,e){var i,s,a,r,n,o,h;if(t){var l=this.getSelectedNodeCoordinates();r=this.min(l.x),n=this.max(l.x),o=this.min(l.y),h=this.max(l.y),i=a=Math.max(n-r,h-o),s=a}else t=this.data.nodes,i=this.x,s=this.y;e||(e=this.networkLayoutType),t.length>0&&("radial"==e?(this.networkLevelSize=4*this.x/(2*this.networkDepth),this.networkAngleStep=360/this.networkDivisions,this.networkRadialRadius=this.networkLevelSize*(this.networkDepth-1),this.networkXCenter=this.x/2,this.networkYCenter=this.y/2):"circular"==e?(this.networkLevelSize=.5*i,this.networkAngleStep=360/t.length,this.networkRadialRadius=this.networkLevelSize,this.networkXCenter=i/2,this.networkYCenter=s/2):this.set3DParams())},this.networkContains=function(t,e){return null!=this.findNode(t,e)},this.findNode=function(t,e){for(var i in t){var s=t[i];if(e.call(s))return s}return null},this.filterEdges=function(t,e){var i=[];for(var s in t){var a=t[s];e.call(a)&&i.push(a)}return i},this.normalizeGraph=function(t){var e=[],i={},s=this;for(var a in t.nodes)if(!i.hasOwnProperty(t.nodes[a].id)){var r=t.nodes[a];if(i[r.id]=1,!this.networkContains([],(function(){return s.networkContains(this.nodes,(function(){return this.id=r.id}))}))){var n={nodes:[],edges:[]};this.addNodeToGraph(r,n,t),n.nodes.length>0&&e.push(n);for(var o=0;o<n.nodes.length;o++)i[n.nodes[o].id]=1}}return e},this.addNodeToGraph=function(t,e,i){if(null==this.findNodeForId(t.id,e)){e.nodes.push(t);var s=this.edgesForNode(i.edges,t.id);for(edgeIndex in s){var a=s[edgeIndex];e.edges.push(a),a.id1==t.id?this.addNodeToGraph(this.findNodeForId(a.id2,i),e,i):this.addNodeToGraph(this.findNodeForId(a.id1,i),e,i)}}},this.findNodeForId=function(t,e){return this.findNode(e.nodes,(function(){return t==this.id}))},this.edgesForNode=function(t,e){return this.filterEdges(t,(function(t){return this.id1==e||this.id2==e}))},this.translateScaleNetworkCanvas=function(t){t?(this.translateCanvas(-this.offsetX,-this.offsetY),this.scaleCanvas(1/this.scaleFactorX,1/this.scaleFactorY)):(this.scaleCanvas(this.scaleFactorX,this.scaleFactorY),this.translateCanvas(this.offsetX,this.offsetY))},this.disableEnablePreScaling=function(t){t?(this.preScaleNetwork=this.preScaleNetworkState,delete this.preScaleNetworkState):(this.preScaleNetworkState=this.preScaleNetwork,this.preScaleNetwork=!0)},this.renderNetwork=function(t){if(this.data.nodes.length>0){if(!this.isLayoutDone&&!this.showAnimation)return;var e=this,i=function(){e.ignoreEventlessOrder||e.drawNetworkNodes(!0),e.networkNodesOnTop?(e.toRender({p:["disableGradientTransparencyShadow"],t:"Size"}),e.drawNetworkEdges(),e.toRender({p:["enableGradientTransparencyShadow"],t:"Size"}),e.drawNetworkNodes()):(e.drawNetworkNodes(),e.toRender({p:["disableGradientTransparencyShadow"],t:"Size"}),e.drawNetworkEdges(),e.toRender({p:["enableGradientTransparencyShadow"],t:"Size"})),e.isLayoutDone&&(e.renderRadialLayout(),e.drawNetworkCommunities(),e.drawNetworkDecorations())},s=function(){e.disableEnablePreScaling(),e.drawCitation(),e.drawLegend(),e.drawTitle(),e.drawCanvasBox(!0),e.disableEnablePreScaling(!0)};this.updateCircularLayout(),this.setNetworkMinMaxRangeXY(),this.setNetworkScaleFactor(),this.resetRender(),this.resizeCanvas(),this.setNetworkRotation(),this.setNetworkCommunities(),this.scaleFactorX&&this.scaleFactorY&&(this.showAnimation?(this.preScaleNetwork?(this.centerNetwork(),i()):(this.toRender({p:["translateScaleNetworkCanvas",!1],t:"Size"}),i(),this.toRender({p:["translateScaleNetworkCanvas",!0],t:"Size"})),s()):(s(),this.preScaleNetwork?this.centerNetwork():this.toRender({p:["translateScaleNetworkCanvas",!1],t:"Size"}),i())),this.render(),t&&this.triggerDataLoaded(t)}},this.updateCircularLayout=function(){if("circular"==this.networkLayoutType){for(var t=this.data.nodes,e=this.x/2,i=this.y/2,s=Math.max(this.x,this.y),a=0,r=0;r<t.length;r++){(h=t[r]).hide||(a+=this.nodeSize*this.getNodeEdgePropertyValue(h,!1,"sizeNodeBy")*2+this.nodeSize)}var n=2*Math.PI/a,o=0;for(r=0;r<t.length;r++){var h=t[r];a=this.nodeSize*this.getNodeEdgePropertyValue(h,!1,"sizeNodeBy")*2+this.nodeSize;h.hide||(o+=n*a*.5,h.x=e+s+s*Math.sin(o),h.y=i+s+s*Math.cos(o),o+=n*a*.5)}}},this.renderRadialLayout=function(){if("radial"==this.networkLayoutType&&this.showNetworkRadialLayout)for(var t=this.data.nodes[this.data.nodeIndices[this.networkRoot]],e=1;e<this.networkDepth;e++)this.toRender({p:["drawShape","circle",t.x,t.y,e*this.networkLevelSize*2,e*this.networkLevelSize*2,this.background,this.infoAreaColor,"open"],t:"Axes"})},this.centerNetwork=function(){for(var t=0;t<this.data.nodes.length;t++){var e=this.data.nodes[t];e.hide||e.hiddenParent||(e.x=(this.offsetX+e.x)*this.scaleFactorX,e.y=(this.offsetY+e.y)*this.scaleFactorY)}this.scaleFactorX=.9,this.scaleFactorY=.9,this.offsetX=this.left+.05*this.x,this.offsetY=this.top+.05*this.y},this.getLengthToNodeBoundary=function(t,e,i,s,a,r){var n=this.networkLayoutType.match(/radial|circular/)?1:this.scaleFactorX,o=this.networkLayoutType.match(/radial|circular/)?1:this.scaleFactorY,h=this.margin/Math.max(n,o)*this.zoom,l=r&&!(t==i&&e==s)?4*h:a.height||a.width?0:1.5*h;if("circular"==this.networkLayoutType)return 0;if(a){var c=a.size?a.size:1,d=(r&&a.height?a.height:a.width?a.width:this.nodeSize/n*c)*this.zoom,p=(r&&a.width?a.width:a.height?a.height:this.nodeSize/o*c)*this.zoom;if(d==p)return d/2+l;var g=this.clip("line",[t,e,i,s],[t-d/2,e-p/2,d+(t-d/2),p+(e-p/2)]);return this.lineLength(g[0],g[1],g[2],g[3])+l}return l},this.getEdgeCoordinates=function(t,e,i){var s=e.x,a=e.y,r=i.x,n=i.y,o=!!(t.id1==t.id2?"curved":t.type?t.type:"line").match(/curved/i),h=0,l=0;if(t.exact)h=0,l=0;else if(t.elbows&&t.elbows.length>0){var c=t.elbows[0],d=t.elbows[t.elbows.length-1];h=this.getLengthToNodeBoundary(s,a,c[0],c[1],e,o),l=this.getLengthToNodeBoundary(r,n,d[0],d[1],i,o)}else{var p=null,g=null,u=null,m=null;if(t.exactStart)h=0;else if(null!=t.startX&&null!=t.startY){var f=t.startX,y=t.startY;e.size&&e.size;p=s+f*(e.width?e.width/this.zoom/2:this.nodeSize*siz/this.zoom/2),g=a+y*(e.height?e.height/this.zoom/2:this.nodeSize*siz/this.zoom/2),h=0}else h=this.getLengthToNodeBoundary(s,a,r,n,e,o);if(t.exactEnd)l=0;else if(null!=t.endX&&null!=t.endY){var x=t.endX||0,v=t.endY||0;i.size&&i.size;u=r+x*(i.width?i.width/this.zoom/2:this.nodeSize*siz/this.zoom/2),m=n+v*(i.height?i.height/this.zoom/2:this.nodeSize*siz/this.zoom/2),l=0}else l=this.getLengthToNodeBoundary(r,n,s,a,i,o);null!=p&&null!=g&&(s=p,a=g),null!=u&&null!=m&&(r=u,n=m)}return{startX:s,startY:a,startS:h,endX:r,endY:n,endS:l}},this.drawNetworkEdges=function(){if(this.data.nodes.length>1)for(var t=this.zoomScale?1:this.zoom,e=0;e<this.data.edges.length;e++){var i=null,s=this.data.edges[e],a=this.data.nodes[this.data.nodeIndices[s.id1]],r=this.data.nodes[this.data.nodeIndices[s.id2]],n=!(a.hide||a.hiddenParent||r.hide||r.hiddenParent);a.id,r.id;if(n&&!s.hide){var o=CanvasXpress.selector.nodes.hasOwnProperty(a.id)&&CanvasXpress.selector.nodes.hasOwnProperty(r.id)?this.nodeHighlightColor:this.getNodeEdgePropertyValue(!1,s,"colorEdgeBy"),h=this.getNodeEdgePropertyValue(!1,s,"sizeEdgeBy"),l=!!s.cap&&s.cap,c="forceDirected"==this.networkLayoutType?"R":"",d=s.id1==s.id2?"curved":s.type?s.type:"line"+c,p=this.getEdgeCoordinates(s,a,r),g=s.id1==s.id2&&s.self?s.self:{dir:!0,pos:"topLeft",size:40,end:"arrow"},u=!1;if(this.colorNodeBy&&!this.colorEdgeBy&&(o=this.monoColor(o,.33)),"circular"==this.networkLayoutType&&this.colorNodeBy&&(o=this.getNodeEdgePropertyValue(r,!1,"colorNodeBy")),s.elbows){u=[];var m="string"==typeof s.elbows?this.parseJSON(s.elbows):s.elbows;if("quadratic"==d&&2==m.length)u=s.angle||-1;else for(var f=0;f<m.length;f++){u[f]=[];for(var y=0;y<m[f].length-1;y+=2)u[f].push(m[f][y]),u[f].push(m[f][y+1])}}else"quadratic"==d&&(u=s.angle||-1);if(this.isLayoutDone&&!this.isAnimation){if("circular"==this.networkLayoutType)i=this.toRender({p:["drawLine","arch",[p.startX,this.adjustBackNetworkObjectX(this.left+this.x/2),p.endX],[p.startY,this.adjustBackNetworkObjectY(this.top+this.y/2),p.endY],!1,!1,o,h/t],i:[e+this.data.nodes.length],t:"Data",h:this.isHidden(!1,e+this.data.nodes.length)});else if(s.highlight&&this.toRender({p:["drawLine",d,p.startX,p.startY,p.endX,p.endY,s.highlight,h/t*3,l,Math.max(0,p.startS/t/1.25),Math.max(0,p.endS/t/1.25),!1,!1,u,!1,!1,g],i:[e+this.data.nodes.length],t:"Data",h:this.isHidden(!1,e+this.data.nodes.length)}),i=this.toRender({p:["drawLine",d,p.startX,p.startY,p.endX,p.endY,o,h/t,l,Math.max(0,p.startS/t/1.25),Math.max(0,p.endS/t/1.25),!1,!1,u,s.startArrow,s.endArrow,g],i:[e+this.data.nodes.length],t:"Data",h:this.isHidden(!1,e+this.data.nodes.length)}),u)for(f=1;f<u.length-1;f++)this.toRender({p:["drawShape","circle",u[f][0]+.5,u[f][1]+.5,2,2,this.addColorTransparency(o,.2,!0),this.addColorTransparency(o,.2,!0)],i:[e+this.data.nodes.length,f],m:"-elbow",t:"Data",h:this.isHidden(!1,e+this.data.nodes.length)})}else this.toRender({p:["drawLine",d,p.startX,p.startY,p.endX,p.endY,o,h/t,l,Math.max(0,p.startS/t/1.25),Math.max(0,p.endS/t/1.25),!1,!1,u,s.startArrow,s.endArrow,g],i:[e+this.data.nodes.length],t:"Data",h:this.isHidden(!1,e+this.data.nodes.length)});if(s.decoration){var x,v,b,A;for(f=0;f<s.decoration.length;f++){var w=s.decoration[f],C="Bold "+(w.fontSize||12)+"px "+this.fontName;w.color!=o&&(o=w.color),this.colorNodeBy&&!this.colorEdgeBy&&(o=this.monoColor(o,.33));var T=w.labelColor||"rgb(242,216,0)",S=1.8;if(this.colorNodeBy&&!this.colorEdgeBy&&(T=this.monoColor(T,.33)),s.id1==s.id2)switch(g.pos){case"top":v=[p.startX,p.startY-g.size*S];break;case"topRight":v=[p.startX+g.size*S,p.startY-g.size*S];break;case"right":v=[p.startX+g.size*S,p.startY];break;case"bottomRight":v=[p.startX+g.size*S,p.startY+g.size*S];break;case"bottom":v=[p.startX+g.size*S,p.startY];break;case"bottomLeft":v=[p.startX-g.size*S,p.startY+g.size*S];break;case"left":v=[p.startX-g.size*S,p.startY];break;case"topLeft":v=[p.startX-g.size*S,p.startY-g.size*S]}else"quadratic"==d&&w?(b=this.perpendicularLinePoints(p.startX,p.startY,p.endX,p.endY,!1,Math.min(1,this.arrowQuadraticFactor*Math.abs(u))*(u>0?-1:1)),A=this.shortenLine(p.startX,p.startY,p.endX,p.endY,Math.max(0,p.startS/t/1.25),Math.max(0,p.endS/t/1.25),d,u),v=this.traceQuadraticCurve(A[0],A[1],b[0],b[1],A[2],A[3],.1,!0)[Math.floor(10*w.pos)]):s.elbows?0==w.index?(x=this.lineLength(m[0][0],m[0][1],m[1][0],m[1][1]),v=this.getCoordinateAtDistance(m[0][0],m[0][1],m[1][0],m[1][1],w.pos*x)):"bezier"==d&&w?v=this.traceBezierCurve(m[0][0],m[0][1],m[1][0],m[1][1],m[2][0],m[2][1],m[3][0],m[3][1],.1,!0)[Math.floor(2*w.index/10)]:m[w.index+1]?(x=this.lineLength(m[w.index][0],m[w.index][1],m[w.index+1][0],m[w.index+1][1]),v=this.getCoordinateAtDistance(m[w.index][0],m[w.index][1],m[w.index+1][0],m[w.index+1][1],w.pos*x)):(x=this.lineLength(m[w.index][0],m[w.index][1],p.endX,p.endY),v=this.getCoordinateAtDistance(m[w.index][0],m[w.index][1],p.endX,p.endY,w.pos*x)):(x=this.lineLength(p.startX,p.startY,p.endX,p.endY),v=this.getCoordinateAtDistance(p.startX,p.startY,p.endX,p.endY,w.pos*x));v&&(this.toRender({p:["drawShape",w.shape,v[0],v[1]-1,22,20,o,o],i:[e+this.data.nodes.length],m:"-edgeDecoration-"+f,g:i,t:"Data",h:this.isHidden(!1,e+this.data.nodes.length)}),this.toRender({p:["drawText"," "+w.label,v[0],v[1],C,T,"center","middle"],i:[e+this.data.nodes.length],m:"-edgeDecorationLabel-"+f,g:i,t:"Data",h:this.isHidden(!1,e+this.data.nodes.length)}))}}}}},this.drawNetworkSelectionNodePoint=function(t,e,i,s,a,r,n){var o,h,l,c,d,p,g,u,m,f,y,x,v,b,A,w=10/this.scaleFactorX*1.5;this.toRender({p:["drawShape","rect",e,i,s,a,this.nodeHighlightColor,this.foreground,"open",r,!1,!1,!1,!1,!1,!1,n],t:"Size"}),r?(b=Math.cos(r),f=-(A=Math.sin(r))*(-a/2-w),y=b*(-a/2-w),x=-A*(-a/2),v=b*(-a/2),this.toRender({p:["drawLine","line",f+e,y+i,x+e,v+i,this.foreground],t:"Size"}),o=[e-A*(-a/2-w),i+b*(-a/2-w)],h=[e+b*(-s/2)-A*(-a/2),i+b*(-a/2)+A*(-s/2)],l=[e-A*(-a/2),i+b*(-a/2)],c=[e+b*(s/2)-A*(-a/2),i+b*(-a/2)+A*(s/2)],d=[e+b*(-s/2),i+A*(-s/2)],p=[e+b*(-s/2)-A*(a/2),i+b*(a/2)+A*(-s/2)],g=[e-A*(a/2),i+b*(a/2)],u=[e+b*(s/2)-A*(a/2),i+b*(a/2)+A*(s/2)],m=[e+b*(s/2),i+A*(s/2)]):(this.toRender({p:["drawLine","line",e,i-(a/2+w),e,i-a/2,this.foreground],t:"Size"}),o=[e,i-(a/2+w)],h=[e-s/2,i-a/2],l=[e,i-a/2],c=[e+s/2,i-a/2],d=[e-s/2,i],p=[e-s/2,i+a/2],g=[e,i+a/2],u=[e+s/2,i+a/2],m=[e+s/2,i]);for(var C=[o,h,l,c,d,p,g,u,m],T=["-resizeROT","-resizeTL","-resizeTM","-resizeTR","-resizeML","-resizeBL","-resizeBM","-resizeBR","-resizeMR"],S=this.margin/this.scaleFactorX*2,M=0;M<C.length;M++)this.toRender({p:["drawShape","rect",C[M][0],C[M][1],S,S,this.nodeHighlightColor,this.foreground,"closed",r,!1,!1,!1,!1,!1,!1,n],i:[t],m:T[M],t:"Size"})},this.drawNetworkNodeLabel=function(t,e,i,s,a,r){var n,o,h,l,c;switch(this.networkVendor){case"Metabase":break;case"Wikipathways":this.nodeFontSize=t.labelSize?1:this.nodeFontSize;break;case"Cytoscape":break;default:this.nodeFontSize=Math.min(this.nodeFontSize,Math.ceil(this.nodeSize))}var d="circular"==this.networkLayoutType?"radial":"auto"==this.labelNodePosition?"center":this.labelNodePosition,p=this.zoomScale?1:this.zoom,g=t.label?t.label:t.name?t.name:t.id,u=!!t.labelRotate&&t.labelRotate*Math.PI/180,m=this.getNodeColor(t.id,t.labelColor),f=t.labelSize?this.nodeFontSize*t.labelSize*this.nodeScaleFontFactor:this.nodeFontSize*this.nodeScaleFontFactor,y=(t.labelStyle?t.labelStyle:this.nodeFontStyle)+" "+Math.min(Math.max(parseInt(f/p),this.scaleFactorX>this.minTextSize?1:this.minTextSize),this.maxTextSize)+"px "+this.fontName,x=this.measureText(g,y),v=f;if(null!=t.labelX&&null!=t.labelY)n=t.labelX,o=t.labelY,this.toRender({p:["drawText",g,t.labelX,t.labelY,y,m,t.labelAlign||"center","middle",u],i:[r],m:"-lab",t:"Labels",h:this.isHidden(r)});else{var b=this.isMultipleLines(g),A=parseInt(f)+4;switch(b&&(b%2?i-=parseInt(b/2)*A+A/2:i=i-parseInt(b/2)*A-A),t.labelPosition&&(d=t.labelPosition),d){case"top":n=e-x/2,h=e,l=o=i-(a/2+this.margin+v/2),t.labelXi=e,t.labelYi=o;break;case"bottom":n=e-x/2,h=e,l=o=i+(a/2+this.margin+v/2),t.labelXi=e,t.labelYi=o;break;case"right":o=i-v/2,h=n=e+(s/2+this.margin+x/2),l=i,t.labelXi=n,t.labelYi=i;break;case"left":o=i-v/2,h=n=e-(s/2+this.margin+x/2),l=i,t.labelXi=n,t.labelYi=i;break;case"center":h=e,l=i,t.labelXi=e,t.labelYi=i;break;case"radial":return c=Math.PI/2-t.angle*Math.PI/180,h=e+(s+3*this.margin)*Math.cos(c)*.5,l=i+(s+3*this.margin)*Math.sin(c)*.5,t.labelXi=e,t.labelYi=i,void(c>=-Math.PI/2?this.toRender({p:["drawText",g,h,l,y,m,"left","middle",c],i:[r],m:"-lab",t:"Labels",h:this.isHidden(r)}):this.toRender({p:["drawText",g,h,l,y,m,"right","middle",c-Math.PI],i:[r],m:"-lab",t:"Labels",h:this.isHidden(r)}))}this.toRender({p:["drawText",g,h,l,y,m,"center","middle",u],i:[r],m:"-lab",t:"Labels",h:this.isHidden(r)})}},this.drawNetworkNodes=function(t){for(var e=this,i=function(t,i,s,a,r){if(e.colorNodeBy&&!t.immutable){var n=e.getNodeEdgePropertyValue(t,!1,"colorNodeBy");return"Kegg"==e.networkVendor?e.addColorTransparency(n,.6,!0):n}return t.communityColor&&e.coordinateNetworkConvexHullCommunityColor?t.communityColor:t.gradient&&t.color1&&t.color2?"linear"==t.gradient?e.colorNodeBy||e.colorEdgeBy?"vertical"==e.gradientOrientation?e.getLinearGradient(0,0,0,r,[e.monoColor(t.color1,.25),e.monoColor(t.color2,.25)]):e.getLinearGradient(0,0,a,0,[e.monoColor(t.color1,.25),e.monoColor(t.color2,.25)]):"vertical"==e.gradientOrientation?e.getLinearGradient(0,0,0,r,[t.color1,t.color2]):e.getLinearGradient(0,0,a,0,[t.color1,t.color2]):e.getRadialGradient(i,s,Math.max(a,r)/2,[t.color1,t.color2,t.color3]):e.colorNodeBy||e.colorEdgeBy?"image"==o.shape?"b&w":t.immutable?e.monoColor(t.color,.33):e.monoColor(e.getNodeEdgePropertyValue(t,!1,"colorNodeBy"),.33):"image"!=o.shape&&(t.immutable?t.color:e.getNodeEdgePropertyValue(t,!1,"colorNodeBy"))},s=this.zoomScale?1:this.zoom,a=this.data.nodes.length/s<this.showNodeNameThreshold,r=(this.foreground,this.shapes[0],6001),n=(this.rangeX,this.rangeY,0);n<this.data.nodes.length;n++){var o=this.data.nodes[n];if(!this.ignoreEventlessOrder)if(t){if(!o.eventless)continue}else if(o.eventless)continue;if(!o.hide&&!o.hiddenParent){var h=o.x,l=o.y,c=this.getNodeEdgePropertyValue(o,!1,"shapeNodeBy"),d=o.outline?o.outline:this.foreground,p=this.getNodeEdgePropertyValue(o,!1,"sizeNodeBy"),g=this.sizeNodeBy?this.nodeSize*p/s:o.width?o.width/s:this.nodeSize*p/s,u=this.sizeNodeBy?this.nodeSize*p/s:o.height?o.height/s:this.nodeSize*p/s,m=!!CanvasXpress.selector.nodes.hasOwnProperty(o.id),f=this.getNodeColor(o.id,i(o,h,l,g,u)),y=this.getNodeEdgePropertyValue(o,!1,"patternNodeBy"),x=!!o.rotate&&o.rotate*Math.PI/180,v=!!o.outlineWidth&&o.outlineWidth,b=!!o.imagePath&&o.imagePath,A=o.zIndex?o.zIndex:!!b&&r;this.isLayoutDone&&!this.isAnimation?(o.zoomX&&(g*=o.zoomX),o.zoomY&&(u*=o.zoomY),o.eventless?this.toRender({p:["drawShape",c,h,l,g,u,f,d,y,x,v,!1,!1,!1,!1,b,A],t:"Data"}):this.toRender({p:["drawShape",c,h,l,g,u,f,d,y,x,v,!1,!1,!1,!1,b,A],i:[n],t:"Data",h:this.isHidden(n)}),m&&!o.fixed?this.drawNetworkSelectionNodePoint(n,h,l,g,u,x,v):m&&o.fixed&&this.drawNetworkSelectionNodePoint(o,h,l,g,u,x,v),a&&!o.hideLabel&&!o.eventless&&(g>this.showNodeNameSizeThreshold||this.data.nodes.length<this.showNodeNameThreshold)&&this.drawNetworkNodeLabel(o,h,l,g,u,n)):this.toRender({p:["drawShape",c,h,l,g,u,f,d,y,x,v,!1,!1,!1,!1,b,A],t:"Data"}),r++}}},this.drawNetworkCommunities=function(){if(this.showNetworkCommunities&&!this.networkVendor)for(var t=0;t<this.networkCommunities;t++)if(this.networkConvexHulls[t].nodes){var e=[],i=[],s=this.addColorTransparency(this.colors[t%this.colors.length],.2,!0),a=this.getHull(this.networkConvexHulls[t].nodes);this.networkConvexHulls[t].convexHull=a[0];for(var r=0;r<a[0].length;r++)e.push(a[0][r][0]),i.push(a[0][r][1]);this.toRender({p:["drawShape","hull",e,i,a[2]-a[1],a[4]-a[3],s],t:"Decorations"})}},this.drawNetworkDecorations=function(){if(this.showDecorations&&this.decorations.length>0)for(var t=this,e=function(e,i,s){var a=t.getKeys(i.vals),r={vals:[],area:[],cols:[],col2:[],patt:[],shpe:[],shp2:[]};if("m"==i.type)if("heatmap"==t.decorationsType)for(var n=0;n<a.length;n++)r.vals[n]=[],r.area[n]=[],r.patt[n]=[];else for(n=0;n<t.decorations.length;n++)r.vals[n]=[],r.area[n]=[],r.patt[n]=[],r.cols[n]=[];for(n=0;n<t.decorations.length;n++){var o=t.decorations[n],h=t.decorationsProperties[o]&&t.decorationsProperties[o].color?t.decorationsProperties[o].color:t.decorationsColors[n],l=t.decorationsProperties[o]&&t.decorationsProperties[o].shape?t.decorationsProperties[o].shape:"circle";if("m"==i.type){for(var c=0;c<a.length;c++){var d=e[o]?e[o][a[c]]:e.decorations&&e.decorations[o]?e.decorations[o][a[c]]:"NA",p=t.decorationsProperties[a[c]]&&t.decorationsProperties[a[c]].color?t.decorationsProperties[a[c]].color:t.decorationsColors[t.decorations.length+c],g=t.decorationsProperties[a[c]]&&t.decorationsProperties[a[c]].shape?t.decorationsProperties[a[c]].shape:"rect";"heatmap"==t.decorationsType?(r.vals[c].push(d),r.area[c].push([s+"-"+n+"-"+a[c]]),r.patt[c].push("closed"),0==n&&(r.cols.push(p),r.shpe.push(g))):t.decorationsType.match(/stacked/)&&(r.vals[n].push(d),r.area[n].push([s+"-"+n+"-"+a[c]]),r.cols[n].push(p),r.patt[n].push("closed"))}r.col2.push(h),"heatmap"==t.decorationsType?r.shp2.push(l):r.shpe.push(l)}else{r.vals[0]||(r.vals[0]=[]);d=e[o]?e[o]:e.decorations&&e.decorations[o]?e.decorations[o]:"NA",h=t.decorationsProperties[o]&&t.decorationsProperties[o].color?t.decorationsProperties[o].color:t.decorationsColors[n],l=t.decorationsProperties[o]&&t.decorationsProperties[o].shape?t.decorationsProperties[o].shape:"circle";r.vals[0].push(d),r.area.push([s+"-"+n]),r.cols.push(h),r.patt.push("closed"),r.shpe.push(l)}}return r},i=function(){for(var e={},i=0;i<t.data.nodes.length;i++){var s=t.data.nodes[i];if(!s.hide&&!s.hiddenParent)for(var a=0;a<t.decorations.length;a++){var r=t.decorations[a];(s[r]||s.decorations&&s.decorations[r])&&(e[i]=!0)}}return t.getKeys(e).sort((function(t,e){return t-e}))}(),s=function(e){for(var i={vals:{}},s=0;s<e.length;s++)for(var a=t.data.nodes[e[s]],r=0;r<t.decorations.length;r++){var n=t.decorations[r],o=a[n]?a[n]:!!a.decorations&&a.decorations[n];if(t.isObject(o))for(var h in i.type="m",o)i.vals[h]=!0;else i.type="s"}return i}(i),a=this.decorations.length*this.decorationsWidth/2,r=.3*this.decorationsWidth,n=.6*r,o=this.decorationsHeight/2,h=this.getColorBrew(this.colorSpectrum,this.decorationsRange[0],this.decorationsRange[1],this.colorSpectrumZeroValue,this.colorSpectrumBreaks),l=0;l<i.length;l++){var c=this.data.nodes[i[l]],d=e(c,s,i[l]);if(!c.hide&&!c.hiddenParent){var p,g,u=c.x,m=c.y,f=(c.size?this.nodeSize*c.size:this.nodeSize)/2;if(null!=c.decorationsX&&null!=c.decorationsY)p=c.decorationsX,g=c.decorationsY;else{switch(this.decorationsPosition){case"top":p="pie"==this.decorationsType?u:u-a,g="pie"==this.decorationsType?m-(f+o+this.decorationsWidth):m-(f+this.decorationsHeight+this.decorationsWidth);break;case"bottom":p="pie"==this.decorationsType?u:u-a,g=m+(f+this.decorationsWidth),g="pie"==this.decorationsType?g+o:g;break;case"right":p=u+f+this.decorationsWidth,g="pie"==this.decorationsType?m:m-o,p="pie"==this.decorationsType?p+o:p;break;case"left":p="pie"==this.decorationsType?u-(f+this.decorationsHeight/2+this.decorationsWidth):u-(f+this.decorationsWidth*(this.decorations.length+1)),g="pie"==this.decorationsType?m:m-o;break;case"center":p="pie"==this.decorationsType||"heatmap"==this.decorationsType?u:u-a,g="pie"==this.decorationsType||"heatmap"==this.decorationsType?m:m-o}c.decorationsXi=p,c.decorationsYi=g}if("bar"==this.decorationsType){var y=this.decorationsRange[0]<0?Math.abs(this.decorationsRange[0])*this.decorationsUnits:0;this.drawBarPlot(d.vals[0],[],p,g+this.decorationsHeight-y,this.decorationsWidth,this.decorationsWidth,this.decorationsUnits,y,this.decorationsRange[0],"vertical",d.cols,d.patt,d.area,"-dec")}else if(this.decorationsType.match(/stacked/)){var x=!!this.decorationsType.match(/percent/);g+=this.decorationsHeight,"top"==this.decorationsPosition&&(g-=this.decorationsWidth);for(var v=0;v<this.decorations.length;v++)this.drawStackedPlot(d.vals[v],p,g,this.decorationsWidth,!1,x,[this.sum(d.vals[v],!1,!1,!0),this.sum(d.vals[v],!1,!1,!1,!0)],this.decorationsUnits,0,"vertical",d.cols[v],d.patt[v],d.area[v],"-dec"),this.toRender({p:["drawShape",d.shpe[v],p+this.decorationsWidth/2,g+this.decorationsWidth,r,r,d.col2[v],this.foreground,"closed"],t:"Decorations"}),p+=this.decorationsWidth}else if("heatmap"==this.decorationsType)if("m"==s.type){var b=this.decorationsHeight/d.vals.length;switch(this.decorationsPosition){case"top":g-=this.decorationsWidth;break;case"bottom":break;case"right":p+=this.decorationsWidth}if("center"==this.decorationsPosition){var A=this.zoomScale?1:this.zoom,w=this.sizeNodeBy?this.nodeSize*siz/A:c.width?c.width/A:this.nodeSize*siz/A,C=this.sizeNodeBy?this.nodeSize*siz/A:c.height?c.height/A:this.nodeSize*siz/A;u-=.5*c.width,m-=.5*c.height,w/=d.vals[0].length,C/=d.vals.length;for(v=0;v<d.vals.length;v++)this.drawHeatmap(d.vals[v],u,m,w,C,!1,d.area[v],"-dec",d.patt[v],h,.67),this.toRender({p:["drawLine","line",u+c.width-2,m-1,u+c.width-2,m+C-.5,d.cols[v],2],t:"Decorations"}),m+=C;m-=1.5;for(v=0;v<this.decorations.length;v++)this.toRender({p:["drawLine","line",u,m,u+w,m,d.col2[v],2],t:"Decorations"}),u+=w;this.toRender({p:["drawShape","rectangle",p,g,c.width,c.height,!1,this.foreground,"open"],t:"Decorations"})}else{for(v=0;v<d.vals.length;v++)this.drawHeatmap(d.vals[v],p,g,this.decorationsWidth,b,!1,d.area[v],"-dec",d.patt[v],h),this.toRender({p:["drawShape",d.shpe[v],p-n,g+b/2,r,b/2,d.cols[v],d.cols[v],"closed"],t:"Decorations"}),g+=b;for(v=0;v<this.decorations.length;v++)this.toRender({p:["drawShape",d.shp2[v],p+this.decorationsWidth/2,g+n,r,r,d.col2[v],d.col2[v],"closed"],t:"Decorations"}),p+=this.decorationsWidth}}else if("top"==this.decorationsPosition&&(g-=this.decorationsWidth),"center"==this.decorationsPosition){A=this.zoomScale?1:this.zoom,w=this.sizeNodeBy?this.nodeSize*siz/A:c.width?c.width/A:this.nodeSize*siz/A,C=this.sizeNodeBy?this.nodeSize*siz/A:c.height?c.height/A:this.nodeSize*siz/A;u-=.5*c.width,m-=.5*c.height,w/=this.decorations.length,this.drawHeatmap(d.vals[0],u,m,w,C,!1,d.area,"-dec",d.patt,h,.67),m+=c.height-1.5;for(v=0;v<this.decorations.length;v++)this.toRender({p:["drawLine","line",u,m,u+w,m,d.cols[v],2],t:"Decorations"}),u+=w;this.toRender({p:["drawShape","rectangle",p,g,c.width,c.height,!1,this.foreground,"open"],t:"Decorations"})}else{this.drawHeatmap(d.vals[0],p,g,this.decorationsWidth,this.decorationsHeight,!1,d.area,"-dec",d.patt,h);for(v=0;v<this.decorations.length;v++)this.toRender({p:["drawShape",d.shpe[v],p+this.decorationsWidth/2,g+this.decorationsHeight+n,r,r,d.cols[v],d.cols[v],"closed"],t:"Decorations"}),p+=this.decorationsWidth}else{var T=this.colors;this.colors=d.cols,this.drawPie(this.setPieData(d.vals[0],!1,d.cols),p,g,o,d.area,"-dec"),this.colors=T}}}},this.findNetworkXYRange=function(t){var e=Number.MAX_VALUE,i=-1*Number.MAX_VALUE,s=Number.MAX_VALUE,a=-1*Number.MAX_VALUE;if(t||(t=this.getKeys(this.data.nodeIndices)),t&&t.length>0)for(var r=0;r<t.length;r++){var n=this.data.nodes[this.data.nodeIndices[t[r]]];n.hide||n.hiddenParent||(e=Math.min(e,n.x),i=Math.max(i,n.x),s=Math.min(s,n.y),a=Math.max(a,n.y))}return{minX:e,maxX:i,minY:s,maxY:a}},this.packSubNetworks=function(){var t=this,e=function(e,i,s){for(var a=0;a<e.length;a++){var r=t.data.nodes[t.data.nodeIndices[e[a]]];r.hasOwnProperty("layout")&&(r.layout.lastPosition.x+=i,r.layout.lastPosition.y+=s)}},i=function(t,e,i,s){this.x=t,this.y=e,this.w=i,this.h=s};i.prototype.fits=function(t){return t.w>=this.w&&t.h>=this.h},i.prototype.sameSize=function(t){return t.w==this.w&&t.h==this.h};var s=function(){this.l=null,this.r=null,this.a=null,this.f=!1};s.prototype.insert=function(t){if(null!=this.l)return this.l.insert(t)||this.r.insert(t);if(this.f)return null;if(!t.fits(this.a))return null;if(t.sameSize(this.a))return this.f=!0,this;this.l=new s,this.r=new s;var e=this.a.w-t.w,a=this.a.h-t.h,r=this.a;return e>a?(this.l.a=new i(r.x,r.y,t.w,r.h),this.r.a=new i(r.x+t.w,r.y,r.w-t.w,r.h)):(this.l.a=new i(r.x,r.y,r.w,t.h),this.r.a=new i(r.x,r.y+t.h,r.w,r.h-t.h)),this.l.insert(t)};for(var a=0;a<this.subNetworks.length;a++){for(var r=0;r<this.subNetworks[a].nodes.length;r++){var n=this.data.nodes[this.data.nodeIndices[this.subNetworks[a].nodes[r]]];n.hasOwnProperty("layout")&&(n.layout.lastPosition.x=0,n.layout.lastPosition.y=0)}this.subNetworks[a].mnm=this.findNetworkXYRange(this.subNetworks[a].nodes),this.subNetworks[a].w=this.subNetworks[a].mnm.maxX-this.subNetworks[a].mnm.minX,this.subNetworks[a].h=this.subNetworks[a].mnm.maxY-this.subNetworks[a].mnm.minY,e(this.subNetworks[a].nodes,this.subNetworks[a].mnm.minX,this.subNetworks[a].mnm.minY)}var o=this.subNetworks[1];for(a=0;a<this.subNetworks.length;a++)this.subNetworks[a].w+=.5*o.w,this.subNetworks[a].h+=.5*o.h;var h=this.subNetworks[0],l=h.nodes.length/this.data.nodes.length,c=(2+l)*(this.x/this.y*h.w),d=(2+l)*(this.y/this.x*h.h),p=new s;p.a=new i(0,0,c,d);for(a=0;a<this.subNetworks.length;a++){var g=this.subNetworks[a],u=new i(0,0,g.w,g.h),m=p.insert(u);m&&e(this.subNetworks[a].nodes,-m.a.x,-m.a.y)}},this.setNetworkMinMaxRangeXY=function(t){if(!this.networkFreeze||null==this.rangeX||null==this.rangeY||t){this.minX=Number.MAX_VALUE,this.minY=Number.MAX_VALUE,this.maxX=0,this.maxY=0;for(var e=0;e<this.data.nodes.length;e++){var i=this.data.nodes[e],s=i.width?i.width:i.size?this.nodeSize*i.size:this.nodeSize,a=i.height?i.height:i.size?this.nodeSize*i.size:this.nodeSize;i.hide||(this.minX=Math.min(this.minX,i.x-s/2),this.minY=Math.min(this.minY,i.y-a/2),this.maxX=Math.max(this.maxX,i.x+s/2),this.maxY=Math.max(this.maxY,i.y+a/2))}this.rangeX=this.maxX-this.minX,this.rangeY=this.maxY-this.minY}},this.setNetworkRotation=function(){if(this.is3DNetwork&&this.isLayoutDone){var t=[],e=[],i=[];this.set3DRotation();for(var s=0;s<this.data.nodes.length;s++){e.push(s);var a=this.data.nodes[s],r=this.get3DTransfrom(a.x,a.y,a.z);a.x=r[0]-this.padX,a.y=r[1]-this.padY,a.z=r[2]-this.padZ,t.push(Math.sqrt(a.x*a.x+a.y*a.y+a.z*a.z))}e.sort((function(e,i){return t[i]-t[e]}));for(var n=0;n<this.data.nodes.length;n++){s=e[n],a=this.data.nodes[s];i.push(a)}this.data.nodes=i,this.setNodeIndices()}else{if(this.network2DRotate){this.network2DRotate>=Math.abs(360)&&(this.network2DRotate=0);var o=Math.PI*this.network2DRotate/360;for(s=0;s<this.data.nodes.length;s++){if(null!=(a=this.data.nodes[s]).x&&null!=a.y){var h=a.x,l=a.y;a.x=h*Math.cos(o)-l*Math.sin(o),a.y=l*Math.cos(o)+h*Math.sin(o)}}for(s=0;s<this.data.edges.length;s++){var c=this.data.edges[s];if(c.elbows&&c.elbows.length>0)for(var d=0;d<c.elbows.length;d++){h=c.elbows[d][0],l=c.elbows[d][1];c.elbows[d][0]=h*Math.cos(o)-l*Math.sin(o),c.elbows[d][1]=l*Math.cos(o)+h*Math.sin(o)}}}this.network2DRotate=0}},this.setNetworkScaleFactor=function(){var t=this.legend.width!=this.lastNetworkLegendWidth||this.legend.height!=this.lastNetworkLegendHeight;(!this.networkFreeze||null==this.scaleFactorX||null==this.scaleFactorY||isNaN(this.scaleFactorX)||isNaN(this.scaleFactorY)||t)&&(this.isLayoutDone||!this.isAnimation||"radial"!=this.networkLayoutType&&"circular"!=this.networkLayoutType?(this.scaleFactorX=this.x/(this.maxX-this.minX),this.scaleFactorY=this.y/(this.maxY-this.minY)):(this.scaleFactorX="radial"==this.networkLayoutType?.3:"circular"==this.networkLayoutType?1:this.x/(this.maxX-this.minX),this.scaleFactorY="radial"==this.networkLayoutType?.3:"circular"==this.networkLayoutType?1:this.y/(this.maxY-this.minY))),this.lastNetworkLegendWidth=this.legend.width,this.lastNetworkLegendHeight=this.legend.height,this.scaleFactorX=Math.min(this.scaleFactorX,this.scaleFactorY),this.scaleFactorY=this.scaleFactorX,this.scaleFactorX*=this.zoom,this.scaleFactorY*=this.zoom,this.networkFreeze&&(this.zoomGlobal*=this.zoom,this.zoom=1),this.widthBounds=this.x/this.scaleFactorX,this.heightBounds=this.y/this.scaleFactorY,this.offsetX=this.widthBounds/2-(this.minX+this.maxX)/2+this.panningX+this.panningGlobalX+this.left/this.scaleFactorX,this.offsetY=this.heightBounds/2-(this.minY+this.maxY)/2+this.panningY+this.panningGlobalY+this.top/this.scaleFactorY,this.nodeSize=15/this.scaleFactorX*this.zoom,this.edgeThickness=1/this.scaleFactorX*this.zoom,this.outlineWidth=1/this.scaleFactorX*this.zoom},this.recalculateLayoutSelectedNodes=function(){if(CanvasXpress.selector.selections>0&&"radial"!=this.networkLayoutType){this.randomSeed=8;var t=[];for(var e in CanvasXpress.selector.nodes)t.push(this.data.nodes[this.data.nodeIndices[e]]);this.fixNetworkNodes(),this.setNetworkPrivateParams(t),this.setNetworkLayout(t,!1,!0)}},this.fixNetworkNodes=function(){for(var t=0;t<this.data.nodes.length;t++){var e=this.data.nodes[t];CanvasXpress.selector.nodes.hasOwnProperty(e.id)||(!e.fixed||e.fixed&&1!=e.fixed)&&(e.fixed=1)}},this.unfixNetworkNodes=function(){for(var t=0;t<this.data.nodes.length;t++){var e=this.data.nodes[t];1==e.fixed&&delete e.fixed}},this.setNetworkLayout=function(t,e,i){t||(t=this.data.nodes),e||(e=this.networkRoot),this.isLayoutDone=!1,this.isAnimation=!0,this.iteration=0,this.randomSeed=8,"radial"==this.networkLayoutType?this.radialLayout(t,e):"circular"==this.networkLayoutType?this.circularLayout(t):this.forceDirectedLayout(t,i)},this.initializeNetworkLayout=function(){for(var t=0;t<this.data.nodes.length;t++)this.initializeNetworkNodes(this.data.nodes[t]);for(t=0;t<this.data.nodes.length;t++)this.initializeNodeNeighborhood(this.data.nodes[t]);if("radial"!=this.networkLayoutType&&"circular"!=this.networkLayoutType)for(t=0;t<this.data.nodes.length;t++)this.setInitialNodePosition(this.data.nodes[t]);for(t=0;t<this.data.edges.length;t++)this.initializeNetworkEdges(this.data.edges[t])},this.moveSubnetworks=function(t){var e=this;this.isLayoutDone=!1,this.isAnimation=!0,this.iteration=0,this.packSubNetworks();var i=function(){e.iteration++<e.networkMaxIterations?(e.showAnimation=!0,function(){for(var t=0;t<e.subNetworks.length;t++)for(var i=0;i<e.subNetworks[t].nodes.length;i++){var s=e.data.nodes[e.data.nodeIndices[e.subNetworks[t].nodes[i]]],a=s.layout.lastPosition.x/30,r=s.layout.lastPosition.y/30;e.modifyXYNode(s.id,a,r)}}(),e.renderNetwork(!1),e.drawNetworkProgressBar("Sorting ...",e.iteration/e.networkMaxIterations),setTimeout(i,80)):(e.subNetworks=!1,e.finalizeNetworkLayout(t))};i()},this.finalizeNetworkLayout=function(t){this.subNetworks&&!this.networkDisjoint?this.moveSubnetworks(t):(this.isLayoutDone=!0,this.isAnimation=!1,this.iteration=0,CanvasXpress.stack[this.target]&&(CanvasXpress.stack[this.target].data.nodes=this.parseJSON(this.stringifyJSON(this.data.nodes)),CanvasXpress.stack[this.target].config.calculateLayout=!1,this.renderNetwork(t),this.networkXCenter=this.x/2,this.networkYCenter=this.y/2,this.unfixNetworkNodes()))},this.summarizeNetworkNodes=function(){for(var t=0;t<this.data.nodes.length;t++){var e=this.data.nodes[t];e.nodeEdges=0;for(var i=0;i<this.data.edges.length;i++){var s=this.data.edges[i];s.id1!=e.id&&s.id2!=e.id||e.nodeEdges++}}this.updateNetworkMetaData("nodes","nodeEdges")},this.initializeNetworkNodes=function(t){t&&!t.layout&&(t.layout={angle:0,children:[],displacement:{x:0,y:0,z:0},edges:this.edgesForNode(this.data.edges,t.id),force:{x:0,y:0,z:0},hierarchy:!1,lastPosition:{x:0,y:0,z:0,r:0,a:0},level:0,mass:1,metrics:{betweenness:-1,closeness:-1,degree:-1,eccentricity:-1},neighbors:[],order:-1,parent:!1,position:{x:null,y:null,z:0},prevPosition:{x:0,y:0,z:0},radius:0,velocity:{x:0,y:0,z:0},subnetworks:{vx:0,vy:0,x:0,y:0,cnt:0,str:0,strX:0,strY:0,dis:0}})},this.initializeNodeNeighborhood=function(t){if(t&&t.layout&&t.layout.edges.length){t.layout.neighbors=[];for(var e=Math.min(t.layout.edges.length,2),i=this.nodeInitialCache,s=0;s<e;++s){var a=t.layout.edges[s],r=a.id1!==t.id?a.id1:a.id2;i[r]&&t.layout.neighbors.push(r)}i[t.id]=!0}},this.initializeNetworkEdges=function(t,e,i,s){if(t&&!t.layout){var a=this.data.nodes[this.data.nodeIndices[t.id1]],r=this.data.nodes[this.data.nodeIndices[t.id2]];a.layout.mass=a.layout.edges.length?1+a.layout.edges.length/3:1,r.layout.mass=r.layout.edges.length?1+r.layout.edges.length/3:1,t.layout={length:this.isNumber(e)&&void 0!==e?e:-1,weight:this.isNumber(i)&&void 0!==i?i:1,coeff:s>=0?s:-1,subnetworks:{bias:0,strn:0,dist:0}}}},this.setInitialNodePosition=function(t){if(t.layout&&t.layout.position&&(null==t.layout.position.x||null==t.layout.position.y)){var e=0,i=0,s=0,a=t.layout.neighbors;if(a.length){for(var r=0;r<a.length;++r){var n=this.nodes[a[r]];e+=n.layout.position.x,i+=n.layout.position.y,this.is3DNetwork&&(s+=n.layout.position.z)}e/=a.length,i/=a.length,this.is3DNetwork&&(s/=a.length)}var o=this.networkSpringLength;t.layout.position.x=e+this.randomBetween(0,o)-o/2,t.layout.position.y=i+this.randomBetween(0,o)-o/2,this.is3DNetwork&&(t.layout.position.z=s+this.randomBetween(0,o)-o/2),t.layout.prevPosition.x=t.layout.position.x,t.layout.prevPosition.y=t.layout.position.y,t.layout.prevPosition.z=t.layout.position.z,t.x=t.layout.position.x,t.y=t.layout.position.y,t.z=t.layout.position.z}},this.setNetworkCommunities=function(){if(null==this.networkCommunities&&!this.networkVendor){this.networkCommunities=0,this.networkConvexHulls=[];for(var t=[],e=0;e<this.data.nodes.length;e++)t.push(this.data.nodes[e].id);var i,s=0;if(this.calculateNetworkCommunities){if(i=this.jLouvain().nodes(t).edges(this.data.edges)())for(e=0;e<this.data.nodes.length;e++){var a=i[this.data.nodes[e].id];s=Math.max(s,a),this.data.nodes[e].community=a,this.data.nodes[e].communityColor=this.colors[this.data.nodes[e].community%this.colors.length]}}else for(e=0;e<this.data.nodes.length;e++){a=this.data.nodes[e].community||0;s=Math.max(s,a),this.data.nodes[e].community=a,this.data.nodes[e].communityColor=this.colors[this.data.nodes[e].community%this.colors.length]}this.networkCommunities=s+1;for(e=0;e<this.networkCommunities;e++){t=[];for(var r=0;r<this.data.nodes.length;r++)this.data.nodes[r].community==e&&t.push(r);this.networkConvexHulls[e]={nodes:t,drawn:!1}}}},this.getHull=function(t){for(var e,i,s,a,r=this,n=function(t,e,i){return(e[0]-t[0])*(i[1]-t[1])-(e[1]-t[1])*(i[0]-t[0])},o=function(t){var e=t.size?t.size:1,i=t.width?t.width:r.nodeSize*e,s=t.height?t.height:r.nodeSize*e;return[t.x,t.y,i,s]},h=[],l=0,c=0;c<t.length;c++){(g=o(this.data.nodes[t[c]])).x,g.y;(g[0]>e||!e)&&(e=g[0]),(g[0]<i||!i)&&(i=g[0]),(g[1]>s||!s)&&(s=g[1]),(g[1]<a||!a)&&(a=g[1]),l=Math.max(l,Math.max(g[2],g[3])),h.push([g[0],g[1]])}var d=(i+e)/2,p=(a+s)/2;if(1==h.length){var g=o(this.data.nodes[t[0]]);h.push([d-g[2],p]),h.push([d,p-g[3]]),h.push([d+g[2],p]),h.push([d,p+g[3]])}else if(2==h.length){g=o(this.data.nodes[t[0]]),o(this.data.nodes[t[1]]);h.push([d-l,p]),h.push([d,p-l]),h.push([d+l,p]),h.push([d,p+l])}h.sort((function(t,e){return t[0]-e[0]||t[1]-e[1]}));var u,m=[0,0],f=[],y=[];for(c=0,u=h.length;c<u;c++){for(var x=h[c],v=h[u-c-1];f.length>=2&&n(f[f.length-2],f[f.length-1],x)<=0;)f.pop();for(f.push(x);y.length>=2&&n(y[y.length-2],y[y.length-1],v)<=0;)y.pop();y.push(v),m[0]+=x[0],m[1]+=x[1]}return m[0]*=1/t.length,m[1]*=1/t.length,y.pop(),f.pop(),[this.expandPolygon(f.concat(y),l*this.hullScale),i,e,a,s]},this.setNodeHierarchy=function(t,e,i){e>this.networkDepth&&(this.networkDepth=e);var s=this.data.nodes[this.data.nodeIndices[t]],a=s.layout;if(!s.hide&&!s.hiddenParent)if(a.hierarchy){e<a.level&&(a.level=e);for(h=0;h<a.children.length;h++){var r=a.children[h],n=this.data.nodes[this.data.nodeIndices[r]].layout;n.hierarchy&&e+1<n.level&&(n.level=e+1,n.parent=t)}}else{var o=a.edges;if(1==o.length&&this.networkDivisions++,o.length>0)for(var h=0;h<o.length;h++)a.hierarchy||(a.angle=0,a.children=[],a.hierarchy="set",a.lastPosition={x:0,y:0,z:0,r:0,a:0},a.level=e,a.order=-1,a.parent=i,a.radius=0),e<a.level&&(a.level=e),o[h].id1==t?(a.children.push(o[h].id2),this.setNodeHierarchy(o[h].id2,e+1,t)):o[h].id2==t&&(a.children.push(o[h].id1),this.setNodeHierarchy(o[h].id1,e+1,t))}},this.setNetworkHierarchy=function(){var t=this,e=function(i){for(var s=t.data.nodes[t.data.nodeIndices[i]];s.parentNode;)i=s.parentNode,e(i);return i};if("radial"==this.networkLayoutType)this.networkRoot||(this.networkRoot=this.data.nodes[0].id),this.networkDepth=0,this.networkDivisions=0,this.networkCurrentAngle=0,this.setNodeHierarchy(this.networkRoot,0,!1);else if("circular"==this.networkLayoutType)this.networkDepth=1,this.networkDivisions=this.data.nodes.length,this.networkCurrentAngle=0;else for(var i=0;i<this.data.nodes.length;i++){var s=this.data.nodes[i];if(s.hasOwnProperty("layout")||(s.layout={children:[]}),s.parentNode){var a=this.data.nodes[this.data.nodeIndices[s.parentNode]];a.hasOwnProperty("layout")||(a.layout={children:[]}),a.layout.children.push(s.id);var r=e(a.id);this.data.nodes[this.data.nodeIndices[r]].hide?s.hiddenParent=!0:s.hiddenParent=!1}}},this.findParentNodes=function(t,e){if(this.data.nodes[this.data.nodeIndices[t]].parentNode){var i=this.data.nodes[this.data.nodeIndices[t]].parentNode;return e||(e=[]),e.push(i),e=this.findParentNodes(i,e)}return!!e&&e.reverse()},this.findChildrenNodeIndices=function(t,e){e||(e=[]);var i=this.data.nodes[this.data.nodeIndices[t]];if("radial"!=this.networkLayoutType&&i.hasOwnProperty("layout")&&i.layout.children.length)for(var s=0;s<i.layout.children.length;s++)e.push(this.data.nodeIndices[i.layout.children[s]]),e=this.findChildrenNodeIndices(i.layout.children[s],e);return e.length>0&&e},this.hasChildren=function(t){var e=this.data.nodes[this.data.nodeIndices[t]];return e.hasOwnProperty("layout")&&e.layout.children.length},this.findVisibleParentNode=function(t){var e=this.findParentNodes(t);if(e){e.reverse();for(var i=0;i<e.length;i++)if(!this.nodes[e[i]].hide&&!this.nodes[e[i]].hiddenParent)return this.nodes[e[i]]}return!1},this.collateNetworks=function(){if(this.data.nodes.length>0){var t=this.normalizeGraph({nodes:this.data.nodes,edges:this.data.edges});if(t.length>1){for(var e=Math.PI*(3-Math.sqrt(5)),i=0;i<this.data.nodes.length;i++){var s=10*Math.sqrt(i),a=i*e;(r=this.data.nodes[i].layout).subnetworks.x=s*Math.cos(a),r.subnetworks.y=s*Math.sin(a),r.subnetworks.cnt=r.edges.length,r.subnetworks.str=-30,r.subnetworks.strX=.1,r.subnetworks.strY=.1,r.subnetworks.index=i}for(i=0;i<this.data.edges.length;i++){var r,n=this.nodes[this.data.edges[i].id1],o=this.nodes[this.data.edges[i].id2];(r=this.data.edges[i].layout).subnetworks.bias=n.layout.subnetworks.cnt/(n.layout.subnetworks.cnt+o.layout.subnetworks.cnt),r.subnetworks.strn=1/Math.min(n.layout.subnetworks.cnt,o.layout.subnetworks.cnt),r.subnetworks.dist=30}var h=[];for(i=0;i<t.length;i++)h.push(i);h.sort((function(e,i){return t[i].nodes.length-t[e].nodes.length})),this.subNetworks=[];for(var l=0;l<t.length;l++){i=h[l];for(var c=[],d=[],p=t[i].nodes.length,g=(t[i].edges.length,{}),u=p/this.data.nodes.length,m=u*(this.x*Math.log(t.length)),f=u*(this.y*Math.log(t.length)),y=0;y<t[i].nodes.length;y++)c.push(t[i].nodes[y].id);for(y=0;y<t[i].edges.length;y++)if("function"!=typeof t[i].edges[y]){var x=t[i].edges[y].id1+"::"+t[i].edges[y].id2;g.hasOwnProperty(x)||(d.push(t[i].edges[y]),g[x]=!0)}this.subNetworks.push({nodes:c,edges:d,x:m,y:f,isLayoutDone:!1})}}}},this.resetObjectAttributes=function(){this.colorNodeBy=!1,this.shapeNodeBy=!1,this.sizeNodeBy=!1,this.patternNodeBy=!1,this.colorEdgeBy=!1,this.sizeEdgeBy=!1},this.setDecorationsRangeUnits=function(){this.decorationsRange=[];var t={},e={},i={size:[],shape:[],shapeColor:[],text:[]};if(this.showDecorations&&this.decorations&&this.decorations.length>0){for(var s=[],a=0;a<this.data.nodes.length;a++)for(var r=this.data.nodes[a],n=0;n<this.decorations.length;n++)if(r[this.decorations[n]]||r.decorations&&r.decorations[this.decorations[n]]){var o=r[this.decorations[n]]?r[this.decorations[n]]:r.decorations[this.decorations[n]];if(this.isObject(o))if("stacked"==this.decorationsType){var h=0;for(var l in o)isNaN(o[l])||(e[l]=!0,h+=o[l]);s.push(h)}else if("stackedpercent"==this.decorationsType){for(var l in o)isNaN(o[l])||(e[l]=!0);s=[0,100]}else{if("heatmap"!=this.decorationsType)return void alert("Ooops! canvasXpress does not support "+this.decorationsType+" for this multidimensional plotting");for(var l in o)isNaN(o[l])||(e[l]=!0,s.push(o[l]))}else(!isNaN(r[this.decorations[n]])||r.decorations&&!isNaN(r.decorations[this.decorations[n]]))&&s.push(r[this.decorations[n]]?r[this.decorations[n]]:r.decorations[this.decorations[n]])}this.decorationsRange=this.range(s),"stacked"==this.decorationsType&&(this.decorationsRange[0]=0);var c=this.decorationsRange[1]-this.decorationsRange[0];0==c&&(this.decorationsRange[1]=this.max(s)+1);var d=this.decorationsType.match(/stacked/)?this.decorationsRange[0]:this.decorationsRange[0]-.05*c;d>0&&(this.decorationsRange[0]=d,c=this.decorationsRange[1]-this.decorationsRange[0]),this.decorationsUnits=this.decorationsHeight/c;var p=this.legendTextFontSize*this.legendTextScaleFontFactor-2;for(a=0;a<this.decorations.length;a++)if(this.decorationsColors[a])t[this.decorationsColors[a]]=!0,i.shape.push(this.decorationsProperties[this.decorations[a]]&&this.decorationsProperties[this.decorations[a]].shape?this.decorationsProperties[this.decorations[a]].shape:"circle"),i.shapeColor.push(this.decorationsProperties[this.decorations[a]]&&this.decorationsProperties[this.decorations[a]].color?this.decorationsProperties[this.decorations[a]].color:this.decorationsColors[a]),i.text.push(this.decorations[a]),i.size.push(p);else for(n=0;n<this.colors.length;n++)if(!t.hasOwnProperty(this.colors[n])){var g=this.decorationsProperties[this.decorations[a]]&&this.decorationsProperties[this.decorations[a]].color?this.decorationsProperties[this.decorations[a]].color:this.colors[n],u=this.decorationsProperties[this.decorations[a]]&&this.decorationsProperties[this.decorations[a]].shape?this.decorationsProperties[this.decorations[a]].shape:"circle";this.decorationsColors[a]=g,t[g]=!0,i.shape.push(u),i.shapeColor.push(g),i.text.push(this.decorations[a]),i.size.push(p);break}a=this.decorations.length;for(var l in e){if(this.decorationsColors[a])t[this.decorationsColors[a]]=!0,i.shape.push(this.decorationsProperties[l]&&this.decorationsProperties[l].shape?this.decorationsProperties[l].shape:"square"),i.shapeColor.push(this.decorationsProperties[l]&&this.decorationsProperties[l].color?this.decorationsProperties[l].color:this.decorationsColors[a]),i.text.push(l),i.size.push(p);else for(n=0;n<this.colors.length;n++)if(!t.hasOwnProperty(this.colors[n])){g=this.decorationsProperties[l]&&this.decorationsProperties[l].color?this.decorationsProperties[l].color:this.colors[n],u=this.decorationsProperties[l]&&this.decorationsProperties[l].shape?this.decorationsProperties[l].shape:"square";this.decorationsColors[a]=g,t[g]=!0,i.shape.push(u),i.shapeColor.push(g),i.text.push(l),i.size.push(p);break}a++}this.customLegend=[i]}},this.validateNetworkLayout=function(){if(this.calculateLayout)this.initializeNetworkLayout();else for(var t=0;t<this.data.nodes.length;t++){var e=this.data.nodes[t];null==e.x&&(e.x=-1),null==e.y&&(e.y=-1),this.is3DNetwork&&null==e.z&&(e.z=-1)}},this.recalculateLayout=function(){this.calculateLayout&&(this.calculateLayout=!!(this.data.nodes&&Object.keys(this.data.nodes[0].layout).length>1),this.isLayoutDone=!1,this.isAnimation=!0,this.iteration=0,this.randomSeed=8,this.initializeNetwork())},this.setInitialConfigState=function(){this.initialNetworkConfigState||(CanvasXpress.stack[this.target].state[0]=this.getConfigState(),this.initialNetworkConfigState=!0)},this.drawNetworkPlot=function(){this.calculateLayout?(this.collateNetworks(),this.setNetworkPrivateParams(),this.setNetworkLayout(),this.calculateLayout=!1):(this.isLayoutDone=!0,this.renderNetwork(),this.setInitialConfigState()),this.networkFreezeOnLoad&&this.isLayoutDone&&(this.networkFreezeOnLoad=!1,this.networkFreeze=!0)},this.calculateNetworkMetrics=function(t){if((this.isNetworkMetrics||t)&&!this.isNetworkMetricsDone){var e=this.data.nodes;this.networkBetweenness(e),this.networkCloseness(e),this.networkEccentricity(e),this.networkDegree(e),this.exposeNetworkMetrics(),this.isNetsworkMetricsDone,this.resetMenus(),this.updateNetworkMetaData("nodes"),CanvasXpress.stack[this.target].data=this.data,delete this.nodesData}},this.drawNetworkProgressBar=function(t,e){if(!e)switch(this.networkLayoutType){case"forceDirected":e=this.iteration/this.maxIterations;break;case"circular":case"radial":e=this.iteration/15}t||(t="Optimizing ...");var i=Math.min(120*e,120),s=130-.5*i;this.isLayoutDone||(this.drawText(t,this.width-130,this.height-43,this.nodeFont,"rgba(0,0,0,0.5)","left","top"),this.drawShape("rectangle",this.width-s,this.height-18,i,15,"rgba(0,0,0,0.5)","rgba(0,0,0,0.5)","closed"),this.drawShape("rectangle",this.width-70,this.height-18,120,15,!1,"rgba(0,0,0,0.5)","open"))},this.initializeNetwork=function(){this.validateNetworkLayout(),this.setNetworkHierarchy(),this.setDecorationsRangeUnits(),this.summarizeNetworkNodes(),this.validateNetworkPropertyValues(),this.setLegends(),this.setNetworkDimensions(),!this.nodes&&this.data.nodes&&this.setNodes(),this.calculateNetworkMetrics(),this.drawNetworkPlot()},t||this.initializeNetwork()},CanvasXpress.prototype.Genome=function(){this.setGenomeSubtracks=function(){this.subtracks=[],this.subtracksInfo=[],this.y=this.margin;for(var t=this.marginTop+this.top,e=0,i=this.xAxisMin*this.xAxisUnit,s=this.xAxisMax*this.xAxisUnit,a=0;a<this.data.tracks.length;a++){var r,n,o,h,l,c=[],d=[],p=0,g=this.data.tracks[a],u=g.data,m=g.type?g.type:this.featureTypeDefault,f=g.height?g.height:this.featureHeightDefault,y=g.subtracksMax||this.subtracksMaxDefault,x=g.spacer?g.spacer:0;if(!g.hide){if(g.name&&!g.hideName&&(this.y+=this.trackNameFontSize+2*this.margin),g.startY=this.marginTop+this.top+this.y,this.subtracks[a]=[],this.featureStaggered){for(var v=0;v<u.length;v++){var b=u[v],A=this.shortenText(b.label||b.name||b.id,this.maxFeatureStringLen),w=b.hideName||g.hideFeatureNames?0:this.measureText(A,this.featureNameFont)+3*this.margin,C=b.data;if(!b.hide){if(b.index=v,b.counter=e++,"box"==m)l=b.showDir&&this.xAxisUnit>.001?1e4:0,n=((r=this.getGenomeDataRange(C))[0]+l)*this.xAxisUnit,o=(r[1]+x+l)*this.xAxisUnit,o=Math.max(n+w,o);else if("sequence"==m){var T=this.setGenomeGaps(b.gaps,b.sequence.length,b.dir);b.offsetLeft&&!b.offset&&(b.offset=b.offsetLeft-(b.sequence.length+T.total)+1),o=(n=b.offset*this.xAxisUnit)+(b.sequence.length+T.total+x)*this.xAxisUnit,o=Math.max(n+w,o)}else"dataframe"==m?(n=i,o=s):"marker"==m?(n=(r=this.getGenomeDataRange(C))[0]*this.xAxisUnit,o=r[1]*this.xAxisUnit,o=Math.max(n+w,o)):(n=(b.offset+x)*this.xAxisUnit,o=g.autowidth&&this.isArray(C)?n+C[0].length*this.xAxisUnit:n+g.width?g.width:this.featureWidthDefault,o=Math.max(n+w,o));h="dataframe"==m||(n>=i&&n<=s||(o>=i&&o<=s||n<=i&&o>=s)),c.push([n,o,h,v])}}if(c.length>0){c.sort((function(t,e){return t[0]-e[0]}));for(v=0;v<c.length;v++)if(c[v][2]){h=!1;for(var S=0;S<d.length;S++)if(o=Math.round(d[S][d[S].length-1][1]),Math.round(c[v][0])>=o){d[S].push(c[v]),h=!0;break}h||d.push([c[v]])}for(v=0;v<d.length;v++)if(v<y){this.subtracks[a][v]=[],p+=d[v].length;var M=0,D=0,k=0;for(S=0;S<d[v].length;S++)b=u[d[v][S][3]],this.subtracks[a][v].push(d[v][S][3]),this.subtracksInfo[b.counter]={track:a,subtrack:v,index:b.index,name:b.label||b.name||b.id,start:t+this.y},"box"==m?(M=Math.max(M,this.getBoxFeatureHeight(b)),D=Math.max(D,b.translatesTop||0),k=Math.max(k,b.translatesBottom||0)):"sequence"==m&&(M=Math.max(M,this.getSequenceFeatureHeight(b)));this.isNameInSubtrack(g,this.subtracks[a][v])||"dataframe"==m||"marker"==m||(this.y+=this.featureNameFontSize+this.margin),"dataframe"==m&&0!=v||(this.y+=f+this.margin),"box"!=m&&"sequence"!=m||(this.y+=M);for(S=0;S<d[v].length;S++)b=u[d[v][S][3]],this.subtracksInfo[b.counter].end=t+this.y,this.subtracksInfo[b.counter].maxHeight=M,this.subtracksInfo[b.counter].translateTop=D,this.subtracksInfo[b.counter].translateBottom=k}}}else for(v=0;v<u.length;v++){(b=u[v]).hide||(b.index=v,b.counter=e++,v<y&&(p++,this.subtracks[a][v]=[v],this.subtracksInfo[b.counter]={track:a,subtrack:v,index:b.index,name:b.label||b.name||b.id,start:t+this.y},"dataframe"==m&&0!=v||(this.y+=f+this.margin),"box"==m?(this.subtracksInfo[b.counter].maxHeight=this.getBoxFeatureHeight(b),this.subtracksInfo[b.counter].translateTop=b.translatesTop||0,this.subtracksInfo[b.counter].translateBottom=b.translatesBottom||0,this.y+=this.subtracksInfo[b.counter].maxHeight):"sequence"==m&&(this.subtracksInfo[b.counter].maxHeight=this.getSequenceFeatureHeight(b),this.y+=this.subtracksInfo[b.counter].maxHeight),this.subtracksInfo[b.counter].end=t+this.y))}g.endY=this.y,g.displayedFeatures=p,g.totalFeatures=u.length,this.y+=2*this.margin}}},this.isNameInSubtrack=function(t,e){for(var i=0;i<e.length;i++){var s=e[i];if(!t.data[s].hideName&&!t.hideFeatureNames)return!1}return!0},this.getGenomeRange=function(t){for(var e=[],i=[],s=0;s<t.length;s++)if(t[s].range)e.push(t[s].range[0]),i.push(t[s].range[1]);else{var a=[],r=t[s].data;if(this.isArray(r[0]))for(var n=0;n<r.length;n++)for(var o=0;o<r[n].length;o++)a=a.concat(r[n][o]);else for(n=0;n<r.length;n++)a=a.concat(r[n]);t[s].range=this.range(a),e.push(Number(t[s].range[0])),i.push(Number(t[s].range[1]))}return this.range([this.min(e),this.max(i)])},this.getGenomeDataRange=function(t){if(t){for(var e=[],i=0;i<t.length;i++)for(var s=0;s<t[i].length;s++)e.push(Number(t[i][s]));return e.sort((function(t,e){return t-e})),[e[0],e[e.length-1]]}return[0,1]},this.setGenomeGaps=function(t,e,i){var s=0,a={total:s};if(t&&this.isArray(t)&&t.length>0){for(var r=0;r<t.length;r++){a["left"==i?e-t[r][0]:t[r][0]]=t[r][1],s+=t[r][1]}a.total=s}return a},this.getBoxFeatureHeight=function(t){if("low"!=this.genomeResolution&&(t.translate||t.sequence)){if("left"!=t.dir||t.sequenceRC||(t.sequenceRC=this.getReverseComplement(t.sequence)),t.cds&&!t.translate){var e=t.cds[0]%3||3;t.translate="left"==t.dir?[-1*e]:[e]}if(t.translate&&!t.translateRC&&this.featureTranslateShow&&(t.translateRC=this.translate(t.translate,"left"==t.dir?t.sequenceRC:t.sequence)),t.translate&&"high"==this.genomeResolution)return this.featureTranslateHeight*t.translate.length}return 0},this.getSequenceFeatureHeight=function(t){var e=0;if("high"==this.genomeResolution){if(t.trace&&this.featureTracesShow&&(e+=this.featureTraceHeight),t.translate&&this.featureTranslateShow)for(var i=0;i<t.translate.length;i++)e+=this.featureTranslateHeight;t.quality&&this.featureQualityShow&&(e+=this.featureQualityHeight),t.signalToNoise&&this.featureSignalToNoiseShow&&(e+=this.featureSignalToNoiseHeight),t.coordinate&&this.featureCoordinateShow&&(e+=this.featureCoordinateHeight)}else"medium"==this.genomeResolution&&t.trace&&this.featureTracesShow&&(e+=this.featureTraceHeight);return e},this.getReverseComplement=function(t){for(var e=t.split(""),i=[],s=0;s<e.length;s++)i.unshift(CanvasXpress.reverseComplement[e[s]]||e[s]);return i.join("")},this.translate=function(t,e){for(var i={top:[],bottom:[]},s=e.split(""),a=CanvasXpress.codon,r=this.getReverseComplement(e).split("").reverse(),n=0;n<t.length;n++){var o=t[n],h={seq:[],off:0,rf:t[n]};if("-1"==o){h.off=r.length%3;for(var l=r.length-1;l>=0;l-=3){var c=a[(r[l]+r[l-1]+r[l-2]).toUpperCase()];h.seq.unshift(c?c[0]:"")}i.bottom.push(h)}else if("-2"==o){h.off=(r.length-1)%3;for(l=r.length-2;l>=0;l-=3){c=a[(r[l]+r[l-1]+r[l-2]).toUpperCase()];h.seq.unshift(c?c[0]:"")}i.bottom.push(h)}else if("-3"==o){h.off=(r.length-2)%3;for(l=r.length-3;l>=0;l-=3){c=a[(r[l]+r[l-1]+r[l-2]).toUpperCase()];h.seq.unshift(c?c[0]:"")}i.bottom.push(h)}else if("1"==o){h.off=0;for(l=0;l<s.length;l+=3){c=a[(s[l]+s[l+1]+s[l+2]).toUpperCase()];h.seq.push(c?c[0]:"")}i.top.push(h)}else if("2"==o){h.off=1;for(l=1;l<s.length;l+=3){c=a[(s[l]+s[l+1]+s[l+2]).toUpperCase()];h.seq.push(c?c[0]:"")}i.top.push(h)}else if("3"==o){h.off=2;for(l=2;l<s.length;l+=3){c=a[(s[l]+s[l+1]+s[l+2]).toUpperCase()];h.seq.push(c?c[0]:"")}i.top.push(h)}}return i},this.setReverseTrace=function(t){if(!t.reversed){for(var e=t.A.length,i=t.T.reverse(),s=t.G.reverse(),a=t.C.reverse(),r=t.A.reverse(),n=[],o=0;o<t.peak.length;o++)n.unshift(e-t.peak[o]);t.A=i,t.C=s,t.G=a,t.T=r,t.peak=n,t.reversed=!0}},this.getCoordinateStep=function(){var t=1;if(.2*this.xAxisUnit>this.sequenceFontSize?t=1:.5*this.xAxisUnit>this.sequenceFontSize?t=5:1*this.xAxisUnit>this.sequenceFontSize?t=10:200*this.xAxisUnit>this.sequenceFontSize?t=20:500*this.xAxisUnit>this.sequenceFontSize?t=50:1e3*this.xAxisUnit>this.sequenceFontSize?t=100:2500*this.xAxisUnit>this.sequenceFontSize?t=250:5e3*this.xAxisUnit>this.sequenceFontSize?t=500:2e3*this.xAxisUnit>this.sequenceFontSize?t=1e3:1e4*this.xAxisUnit>this.sequenceFontSize?t=5e3:2e4*this.xAxisUnit>this.sequenceFontSize?t=1e4:1e5*this.xAxisUnit>this.sequenceFontSize?t=5e4:2e5*this.xAxisUnit>this.sequenceFontSize?t=1e5:2e6*this.xAxisUnit>this.sequenceFontSize?t=1e6:2e7*this.xAxisUnit>this.sequenceFontSize?t=1e7:2e8*this.xAxisUnit>this.sequenceFontSize?t=1e8:2e9*this.xAxisUnit>this.sequenceFontSize?t=1e9:2e10*this.xAxisUnit>this.sequenceFontSize?t=1e10:2e11*this.xAxisUnit>this.sequenceFontSize&&(t=1e11),this.xAxisRange/t>10){for(t*=.1*t;10*t>this.xAxisRange;)t*=.1;return t}return 3*t>this.xAxisRange?.1*t:t},this.getGenomeObjectColor=function(t,e,i,s){return e[t]?e[t]:i[t]?i[t]:this[t]?this[t]:s||!1},this.drawBoxSequenceName=function(t,e,i,s,a,r,n,o,h){var l=this.getGenomeObjectColor("featureNameFontColor",o,h,this.foreground),c=o.counter,d=this.featureNameFontSize/2,p="right"==o.dir?e+" ⮕":"left"==o.dir?"⬅ "+e:e;r>=this.xAxisMin&&n<=this.xAxisMax?(i=a+i,this.toRender({p:["drawText",p,i,s+d,this.featureNameFont,l,"left","middle"],i:["track-"+t+":"+c],t:"Labels"})):r<=this.xAxisMin&&n>=this.xAxisMin?(i=a,this.toRender({p:["drawText",p,i,s+d,this.featureNameFont,l,"left","middle"],i:["track-"+t+":"+c],t:"Labels"})):r<=this.xAxisMax&&n>=this.xAxisMax?(i=a+i,this.toRender({p:["drawText",p,i,s+d,this.featureNameFont,l,"left","middle"],i:["track-"+t+":"+c],t:"Labels"})):i=a+i},this.drawGenomeLabels=function(){if(!this.featureStaggered){this.marginLeft;for(var t=this.marginTop+this.top+this.margin,e=(this.featureNameFontSize,0),i=0;i<this.data.tracks.length;i++){var s=this.data.tracks[i],a=s.type||this.featureTypeDefault,r=s.height||this.featureHeightDefault;if(!s.hide){s.name&&!s.hideName&&(t+=this.trackNameFontSize+2*this.margin);for(var n=0;n<this.subtracks[i].length;n++){var o=this.subtracks[i][n];if(o)for(var h=0;h<o.length;h++){var l=o[h],c=s.data[l],d=c.counter,p=this.getGenomeObjectColor("featureNameFontColor",c,s,this.foreground),g=this.shortenText(c.label||c.name||c.id,this.maxFeatureStringLen),u="right"==c.dir?g+" ⮕":"left"==c.dir?"⬅ "+g:g;if(c.hideName||s.hideFeatureNames||"dataframe"==a||this.toRender({p:["drawText",u,this.marginLeft,t+r/2-(this.trackNameFontSize-this.margin)/2,this.featureNameFont,p,"left","middle"],i:["track-"+i+":"+d],t:"Labels"}),"dataframe"==a);else if("box"==a||"sequence"==a){if(c.translate&&"high"==this.genomeResolution){var m=this.featureNameFontSize-2+"px "+this.fontName;if(e=-5,c.trace&&this.featureTracesShow&&(e+=this.featureTraceHeight),c.translate&&this.featureTranslateShow){for(var f=0;f<c.translate.length;f++){("+1"==(y="+"+c.translate[f])||"+2"==y||"+3"==y)&&(this.toRender({p:["drawText",y,this.marginLeft+this.left-15,t+e+r/2,m,p,"left","middle"],t:"Data"}),e+=this.featureTranslateHeight)}e+=this.sequenceFontSize+2;for(f=0;f<c.translate.length;f++){var y;("-1"==(y=c.translate[f])||"-2"==y||"-3"==y)&&(this.toRender({p:["drawText",y,this.marginLeft+this.left-15,t+e+r/2,m,p,"left","middle"],t:"Data"}),e+=this.featureTranslateHeight)}}}t+="box"==a?this.getBoxFeatureHeight(c):this.getSequenceFeatureHeight(c)}"dataframe"==a&&n!=this.subtracks[i].length-1||(t+=r+this.margin)}}t+=2*this.margin}}}},this.plotGenomeData=function(){var t,e,i=this.marginLeft+this.left,s=this.marginTop+this.top,a=this.xAxisUnit/2;this.toRender({p:["setClipArea",this.setClipBoundaries()],t:"Size"});for(var r=0;r<this.data.tracks.length;r++){var n=this.data.tracks[r],o=n.type||this.featureTypeDefault,h=n.height||this.featureHeightDefault,l=!(!o.match(/bar|box|dataframe/)||!n.fill)&&n.fill,c=o.match(/bar|box|dataframe/)&&n.outline?n.outline:this.foreground,d=!1;if(t=i,!n.hide){if(n.name&&!n.hideName){var p=n.name;n.displayedFeatures!=n.totalFeatures&&(p+=" (Showing "+n.displayedFeatures+" out of "+n.totalFeatures+")"),this.toRender({p:["drawText",p,t,s+this.trackNameFontSize/2+this.margin,this.trackNameFont,n.trackNameFontColor||this.trackNameFontColor,"left","middle"],i:["track-"+r],t:"Labels"}),s+=this.trackNameFontSize+2*this.margin}if(n.highlight&&"low"!=this.genomeResolution)for(var g=n.highlight,u=0;u<g.length;u++)if(g[u].offset){var m=g[u].color?g[u].color:this.colors[r%this.colors.length];t=this.marginLeft+this.left+(g[u].offset-.5-this.xAxisMin)*this.xAxisUnit,e=g[u].width?g[u].width*this.xAxisUnit:this.xAxisUnit,P=n.endY-n.startY+h,this.toRender({p:["drawShape","rectangle",t+e/2,n.startY+P/2,e,P,m,m,"closed"],t:"Data"})}for(u=0;u<this.subtracks[r].length;u++){var f=this.subtracks[r][u];if(f){this.featureStaggered&&(d=this.isNameInSubtrack(n,f));for(var y=0;y<f.length;y++){var x=f[y],v=n.data[x],b=v.data,A=(p=this.shortenText(v.label||v.name||v.id,this.maxFeatureStringLen),this.getGenomeObjectColor("featureNameFontColor",v,n,this.foreground));if("box"==o)b.length>0&&(this.setGenomeBoxExons(v),!this.featureStaggered||n.hideFeatureNames||v.hideName&&d||(v.hideName||(t=(v.start-this.xAxisMin)*this.xAxisUnit-a,this.drawBoxSequenceName(r,p,t,s,i,v.start,v.end,v,n)),s+=this.featureNameFontSize+this.margin),this.drawGenomeBox(s,h,v,n),"high"==this.genomeResolution&&v.translate&&this.featureTranslateShow&&(s+=this.featureTranslateHeight*v.translate.length));else if("sequence"==o){var w=this.setGenomeGaps(v.gaps,v.sequence.length,v.dir);if(v.offsetLeft&&!v.offset&&(v.offset=v.offsetLeft-(v.sequence.length+w.total)+1),!this.featureStaggered||n.hideFeatureNames||v.hideName&&d||(v.hideName||(t=(v.offset-this.xAxisMin)*this.xAxisUnit-a,this.drawBoxSequenceName(r,p,t,s,i,v.offset,v.offset+v.sequence.length+w.total,v,n)),s+=this.featureNameFontSize+this.margin),"high"==this.genomeResolution){if(v.trace&&this.featureTracesShow&&(this.drawGenomeTrace(s,v.counter,this.featureTraceHeight-1,v.offset,v.trace,w,v.dir),s+=this.featureTraceHeight),this.drawGenomeSequence(s,h,w,v,n),s+=h,v.translate&&this.featureTranslateShow)for(var C=0;C<v.translate.length;C++)s+=this.featureTranslateHeight;v.quality&&this.featureQualityShow&&(this.drawGenomeQuality(s,v.counter,this.featureQualityHeight-1,v.offset,v.quality,w,v.dir,n),s+=this.featureQualityHeight),v.signalToNoise&&this.featureSignalToNoiseShow&&(this.drawGenomeSignalToNoise(s,v.counter,this.featureSignalToNoiseHeight-1,v.offset,v.signalToNoise,w,v.dir,n),s+=this.featureSignalToNoiseHeight),v.coordinate&&this.featureCoordinateShow&&(this.drawGenomeCoordinate(s+1,v.counter,this.featureCoordinateHeight-1,v.offset,v.coordinate,v.sequence.length,w,v.dir,n),s+=this.featureCoordinateHeight),s-=h}else"medium"==this.genomeResolution?(v.trace&&this.featureTracesShow&&(this.drawGenomeTrace(s,v.counter,this.featureTraceHeight-1,v.offset,v.trace,w,v.dir),s+=this.featureTraceHeight),this.drawGenomeSequence(s,h,w,v,n),v.coordinate&&this.featureCoordinateShow&&this.drawGenomeCoordinate(s+1,v.counter,this.featureCoordinateHeight-1,v.offset,v.coordinate,v.sequence.length,w,v.dir,n)):(this.drawGenomeSequence(s,h,w,v,n),v.coordinate&&this.featureCoordinateShow&&this.drawGenomeCoordinate(s+1,v.counter,this.featureCoordinateHeight-1,v.offset,v.coordinate,v.sequence.length,w,v.dir,n))}else if("bar"==o){var T=(z="high"==this.genomeResolution?this.xAxisUnit/b.length:n.autowidth?this.xAxisUnit:v.width?v.width:n.width?n.width:this.featureWidthDefault)*b.length;t=this.marginLeft+this.left+(v.offset-this.xAxisMin)*this.xAxisUnit-(T/2+1),!this.featureStaggered||n.hideFeatureNames||v.hideName&&d||(v.hideName||this.toRender({p:["drawText",p,t,s+this.featureNameFontSize/2,this.featureNameFont,A,"left","middle"],i:["track-"+r+":"+v.counter],t:"Labels"}),s+=this.featureNameFontSize+this.margin),e=t;for(var S=n.range[1]<0?s:n.range[0]>=0?s+h:s+h-Math.abs(n.range[0]*n.units),M=0;M<b.length;M++){var D=v.fill||l,k=v.outline||c,L=this.isArray(D)&&D.length==b.length?D[M]:this.isArray(D)?D[0]:this.foreground,I=this.isArray(k)&&k.length==b.length?k[M]:this.isArray(k)?k[0]:this.foreground;g=b[M]*n.units;b[M]&&(g>0?this.toRender({p:["drawShape","rectangle",e+z/2,S-g/2,z,g,L,I,"closed"],i:[v.counter],t:"Data"}):this.toRender({p:["drawShape","rectangle",e+z/2,S-g/2,z,-g,L,I,"closed"],i:[v.counter],t:"Data"})),n.autowidth?e+=z:e+=z+2}}else if("heatmap"==o){var z;z="high"==this.genomeResolution||n.autowidth?this.xAxisUnit:v.width?v.width:n.width?n.width:this.featureWidthDefault,t=this.marginLeft+this.left+(v.offset-this.xAxisMin)*this.xAxisUnit-(z/2+1),!this.featureStaggered||n.hideFeatureNames||v.hideName&&d||(v.hideName||this.toRender({p:["drawText",p,t,s+this.featureNameFontSize/2,this.featureNameFont,A,"left","middle"],i:["track-"+r+":"+v.counter],t:"Labels"}),s+=this.featureNameFontSize+this.margin);g=n.autowidth?h:h/b.length;P=s;for(M=0;M<b.length;M++){var N=b[M],B=this.getColorForValue(n.brew,N);isNaN(N)?this.toRender({p:["drawShape","rectangle",t+z/2,P+g/2,z,g,this.missingDataColor,this.missingDataColor,"closed"],i:[v.counter],t:"Data"}):this.toRender({p:["drawShape","rectangle",t+z/2,P+g/2,z,g,B,B,"closed"],i:[v.counter],t:"Data"}),n.autowidth?t+=z:P+=g}}else if("dataframe"==o){if(t=this.marginLeft+this.left+3*this.margin,0==u&&this.drawGenomeBoxTrack(this.marginLeft+this.left,s,h,n),!(n.hideFeatureNames||v.hideName&&d||v.hideName))for(var P=(this.featureNameFontSize+this.margin)*u,R=0;R<b.length;R++)if(b[R].type){P+=.5*this.featureNameFontSize+this.margin;var O=!(!b[R].colorBy||!this.meta.data.tracks[r][b[R].colorBy])&&this.meta.data.tracks[r][b[R].colorBy],X=!!(b[R].colorBy&&n.dataframe[b[R].colorBy]&&b[R].meta&&b[R].meta.color)&&b[R].meta.color,F=!(!b[R].shapeBy||!this.meta.data.tracks[r][b[R].shapeBy])&&this.meta.data.tracks[r][b[R].shapeBy],_=!!(b[R].shapeBy&&n.dataframe[b[R].shapeBy]&&b[R].meta&&b[R].meta.shape)&&b[R].meta.shape,E=!(!b[R].sizeBy||!this.meta.data.tracks[r][b[R].sizeBy])&&this.meta.data.tracks[r][b[R].sizeBy],V=b[R].lineType||"line";if("line"==b[R].type&&!b[R].hideLegend){var H=0,G=(I=b[R].transparency&&b[R].fill?this.addColorTransparency(b[R].fill,b[R].transparency):b[R].fill||"grey",Math.max(0,this.measureText(b[R].yAxis,this.featureNameFont)));this.toRender({p:["drawLine",V,this.left+3*this.margin,s+this.featureNameFontSize/2+P+this.margin,this.left+3*this.margin+10,s+this.featureNameFontSize/2+P+this.margin,I,!1,"butt"],t:"Legend"}),this.toRender({p:["drawText",b[R].yAxis,this.left+10+4*this.margin,s+this.featureNameFontSize/2+P+this.margin,this.featureNameFont,this.forground,"left","middle"],t:"Legend"}),P+=this.featureNameFontSize+2*this.margin,H+=this.featureNameFontSize+2*this.margin,G+=10+4*this.margin,this.toRender({p:["drawShape","rectangle",t+G/2-2*this.margin,s+P-H/2,G,H,!1,this.plotBoxColor,"open"],t:"Legend"})}if(b[R].type.match(/scatter|lollipop/)&&!O&&!X&&!b[R].hideLegend){H=0,I=b[R].transparency&&b[R].fill?this.addColorTransparency(b[R].fill,b[R].transparency):b[R].fill||"grey";var q=b[R].shape||"circle";G=Math.max(0,this.measureText(b[R].yAxis,this.featureNameFont));this.toRender({p:["drawShape",q,this.left+3*this.margin+5,s+this.featureNameFontSize/2+P+this.margin,10,10,I,I,"closed"],t:"Legend"}),this.toRender({p:["drawText",b[R].yAxis,this.left+10+4*this.margin,s+this.featureNameFontSize/2+P+this.margin,this.featureNameFont,this.forground,"left","middle"],t:"Legend"}),P+=this.featureNameFontSize+2*this.margin,H+=this.featureNameFontSize+2*this.margin,G+=10+4*this.margin,this.toRender({p:["drawShape","rectangle",t+G/2-2*this.margin,s+P-H/2,G,H,!1,this.plotBoxColor,"open"],t:"Legend"})}if(b[R].type.match(/scatter|lollipop/)&&O&&X&&!b[R].hideLegend){G=0,H=0;for(var j in X){I=b[R].transparency?this.addColorTransparency(X[j],b[R].transparency):X[j],q=b[R].shape||"circle";G=Math.max(G,this.measureText(j,this.featureNameFont)),this.toRender({p:["drawShape",q,this.left+3*this.margin+5,s+this.featureNameFontSize/2+P+this.margin,10,10,I,I,"closed"],t:"Legend"}),this.toRender({p:["drawText",j,this.left+10+4*this.margin,s+this.featureNameFontSize/2+P+this.margin,this.featureNameFont,this.foreground,"left","middle"],t:"Legend"}),P+=this.featureNameFontSize+this.margin,H+=this.featureNameFontSize+this.margin}P+=this.margin,H+=this.margin,G+=10+4*this.margin,this.toRender({p:["drawShape","rectangle",t+G/2-2*this.margin,s+P-H/2,G,H,!1,this.plotBoxColor,"open"],t:"Legend"})}if(b[R].type.match(/scatter|lollipop/)&&O&&!X&&!b[R].hideLegend){G=0,H=0;if(O.levels){for(j=0;j<O.levels.length;j++){I=b[R].transparency?this.addColorTransparency(O.colors[j],b[R].transparency):O.colors[j],q=b[R].shape||"circle";G=Math.max(G,this.measureText(O.levels[j],this.featureNameFont)),this.toRender({p:["drawShape",q,this.left+3*this.margin+5,s+this.featureNameFontSize/2+P+this.margin,10,10,I,I,"closed"],t:"Legend"}),this.toRender({p:["drawText",O.levels[j],this.left+10+4*this.margin,s+this.featureNameFontSize/2+P+this.margin,this.featureNameFont,this.foreground,"left","middle"],t:"Legend"}),P+=this.featureNameFontSize+this.margin,H+=this.featureNameFontSize+this.margin}P+=this.margin,H+=this.margin,G+=10+4*this.margin,this.toRender({p:["drawShape","rectangle",t+G/2-2*this.margin,s+P-H/2,G,H,!1,this.plotBoxColor,"open"],t:"Legend"})}else this.heatmapIndicatorWidth=100,this.drawColorIndicator(t,s+P,O),P+=100+this.margin}if(b[R].type.match(/scatter|lollipop/)&&F&&_&&!b[R].hideLegend){P+=.5*this.featureNameFontSize+this.margin;G=0,H=0,I=b[R].transparency&&b[R].fill?this.addColorTransparency(b[R].fill,b[R].transparency):b[R].fill||"grey";for(var j in _){q=_[j];G=Math.max(G,this.measureText(j,this.featureNameFont)),this.toRender({p:["drawShape",q,this.left+3*this.margin+5,s+this.featureNameFontSize/2+P+this.margin,10,10,I,I,"closed"],t:"Legend"}),this.toRender({p:["drawText",j,this.left+10+4*this.margin,s+this.featureNameFontSize/2+P+this.margin,this.featureNameFont,this.foreground,"left","middle"],t:"Legend"}),P+=this.featureNameFontSize+this.margin,H+=this.featureNameFontSize+this.margin}P+=this.margin,H+=this.margin,G+=10+4*this.margin,this.toRender({p:["drawShape","rectangle",t+G/2-2*this.margin,s+P-H/2,G,H,!1,this.plotBoxColor,"open"],t:"Legend"})}if(b[R].type.match(/scatter|lollipop/)&&F&&!_&&!b[R].hideLegend){P+=.5*this.featureNameFontSize+this.margin;G=0,H=0,I=b[R].transparency&&b[R].fill?this.addColorTransparency(b[R].fill,b[R].transparency):b[R].fill||"grey";if(F.levels){for(j=0;j<F.levels.length;j++){q=F.shapes[j];G=Math.max(G,this.measureText(F.levels[j],this.featureNameFont)),this.toRender({p:["drawShape",q,this.left+3*this.margin+5,s+this.featureNameFontSize/2+P+this.margin,10,10,I,I,"closed"],t:"Legend"}),this.toRender({p:["drawText",F.levels[j],this.left+10+4*this.margin,s+this.featureNameFontSize/2+P+this.margin,this.featureNameFont,this.foreground,"left","middle"],t:"Legend"}),P+=this.featureNameFontSize+this.margin,H+=this.featureNameFontSize+this.margin}P+=this.margin,H+=this.margin,G+=10+4*this.margin,this.toRender({p:["drawShape","rectangle",t+G/2-2*this.margin,s+P-H/2,G,H,!1,this.plotBoxColor,"open"],t:"Legend"})}else P-=.5*this.featureNameFontSize+this.margin}b[R].type.match(/scatter|lollipop/)}for(R=0;R<b.length;R++){var U=!!(n.dataframe&&b[R].xAxis&&n.dataframe[b[R].xAxis])&&n.dataframe[b[R].xAxis],Y=!!(n.dataframe&&b[R].yAxis&&n.dataframe[b[R].yAxis])&&n.dataframe[b[R].yAxis];if(U&&Y&&b[R].type){O=!(!b[R].colorBy||!this.meta.data.tracks[r][b[R].colorBy])&&this.meta.data.tracks[r][b[R].colorBy],X=!!(b[R].colorBy&&n.dataframe[b[R].colorBy]&&b[R].meta&&b[R].meta.color)&&b[R].meta.color,F=!(!b[R].shapeBy||!this.meta.data.tracks[r][b[R].shapeBy])&&this.meta.data.tracks[r][b[R].shapeBy],_=!!(b[R].shapeBy&&n.dataframe[b[R].shapeBy]&&b[R].meta&&b[R].meta.shape)&&b[R].meta.shape,E=!(!b[R].sizeBy||!this.meta.data.tracks[r][b[R].sizeBy])&&this.meta.data.tracks[r][b[R].sizeBy];var W,$,Q=!!(b[R].sizeBy&&n.dataframe[b[R].sizeBy]&&b[R].meta&&b[R].meta.size)&&b[R].meta.size;V=b[R].lineType||"line";if("line"==b[R].type)for(M=0;M<U.length-1;M++){I=b[R].transparency&&b[R].fill?this.addColorTransparency(b[R].fill,b[R].transparency):b[R].fill||"grey";t=this.marginLeft+this.left+(U[M]-this.xAxisMin)*this.xAxisUnit,e=this.marginLeft+this.left+(U[M+1]-this.xAxisMin)*this.xAxisUnit,W="left"==b[R].side?(Y[M]-n.minAxisY)*n.units:(Y[M]-n.minAxisY2)*n.units2,$="left"==b[R].side?(Y[M+1]-n.minAxisY)*n.units:(Y[M+1]-n.minAxisY2)*n.units2,this.toRender({p:["drawLine",V,t,h+s-W,e,h+s-$,I,!1,"butt"],i:["dataframe-"+r+":"+R,M],t:"Data"})}else if(b[R].type.match(/scatter|lollipop/))for(M=0;M<U.length;M++){var K,J,Z;K=O?"Numeric"==O.type?this.getColorForValue(O.brew,n.dataframe[b[R].colorBy][M]):X?b[R].meta.color[n.dataframe[b[R].colorBy][M]]:O.colors[O.order[n.dataframe[b[R].colorBy][M]]]:b[R].fill?b[R].fill:b[R].color?b[R].color:"grey",b[R].transparency&&(K=this.addColorTransparency(K,b[R].transparency)),J=F&&"Numeric"!=F.type?_?b[R].meta.shape[n.dataframe[b[R].shapeBy][M]]:F.shapes[F.order[n.dataframe[b[R].shapeBy][M]]]:b[R].shape?b[R].shape:"circle",Z=E?"Numeric"==E.type?this.getPropertyValueSize(E,n.dataframe[b[R].sizeBy][M],"sizes"):Q?b[R].meta.size[n.dataframe[b[R].sizeBy][M]]:E.sizes[E.order[n.dataframe[b[R].sizeBy][M]]]:b[R].size?b[R].size:this.dataPointSize*this.dataPointSizeScaleFactor;var tt=v.outline?v.outline:n.outline?n.outline:K;t=this.marginLeft+this.left+(U[M]-this.xAxisMin)*this.xAxisUnit,W="left"==b[R].side?(Y[M]-n.minAxisY)*n.units:(Y[M]-n.minAxisY2)*n.units2,"lollipop"==b[R].type&&this.toRender({p:["drawLine","line",t,h+s-W,t,h+s,"grey"],t:"Data"}),this.toRender({p:["drawShape",J,t,h+s-W,Z,Z,K,tt,"closed"],i:["dataframe-"+r+":"+R,M],t:"Data"})}}}}else if("marker"==o)for(R=0;R<b.length;R++){l=v.fill&&v.fill[R]?v.fill[R]:this.foreground;for(var et=0;et<b[R].length;et++)t=this.marginLeft+this.left+(b[R][et]-this.xAxisMin)*this.xAxisUnit,this.toRender({p:["drawLine","line",t,s,t,s+h,l,!1,"butt"],i:[v.counter,et,R],t:"Data"})}else"triangle"==o&&(t=this.marginLeft+this.left+(v.offset-this.xAxisMin)*this.xAxisUnit,l=v.fill?v.fill:this.foreground,c=v.outline?v.outline:this.foreground,!this.featureStaggered||n.hideFeatureNames||v.hideName&&d||(v.hideName||this.toRender({p:["drawText",p,t,s+this.featureNameFontSize/2,this.featureNameFont,A,"left","middle"],i:["track-"+r+":"+v.counter],t:"Labels"}),s+=this.featureNameFontSize+this.margin),this.toRender({p:["drawShape","triangle",t,s+h/2,h,h,l,c,"closed"],i:[v.counter],t:"Data"}));this.featureStaggered&&y<f.length-1&&(d||(s-=this.featureNameFontSize+this.margin),"box"==o?s-=this.getBoxFeatureHeight(v):"sequence"==o&&(s-=this.getSequenceFeatureHeight(v)))}"dataframe"==o&&u!=this.subtracks[r].length-1||(s+=h+this.margin)}}s+=2*this.margin}}this.toRender({p:["resetClipArea"],t:"Size"})},this.setGenomeBoxExons=function(t){var e=t.data;if((!t.start||!t.end)&&(t.start=e[0][0],t.end=e[e.length-1][1],t.sequence))for(var i="left"==t.dir?t.sequence.length:1,s=0;s<e.length;s++){if(2==e[s].length){var a=e[s][1]-e[s][0];"left"==t.dir?t.data[s].push(i-a,i):t.data[s].push(i,i+a)}i="left"==t.dir?i-(a+1):i+a+1}},this.drawGenomeBoxTrack=function(t,e,i,s){if(this.toRender({p:["drawShape","rectangle",t+this.x/2+.5,e+i/2+.5,this.x+1,i+1,!1,this.plotBoxColor,"open"],t:"Axis"}),this.toRender({p:["resetClipArea"],t:"Size"}),s.values)for(var a=s.values,r=0;r<a.length;r++){var n=(a[r]-s.minAxisY)*s.units-.5;this.toRender({p:["drawLine","line",this.left+this.margin,i+e-n,this.left-this.margin,i+e-n,this.yAxisTickColor],t:"Axes"}),this.toRender({p:["drawText",a[r].toString(),this.left-2*this.margin,i+e-n,this.axisTickFont,this.axisTickColor,"right","middle"],t:"Axes"})}if(s.title){var o=this.measureText(s.maxValueStr,this.axisTickFont)+4*this.margin;this.toRender({p:["drawText",s.title,this.left-o,e+i/2,this.axisTitleFont,this.axisTitleColor,"center","bottom",.5*-Math.PI],t:"Axes"})}if(s.values2){for(a=s.values2,r=0;r<a.length;r++){n=(a[r]-s.minAxisY2)*s.units2-.5;this.toRender({p:["drawLine","line",this.left+this.x+this.margin,i+e-n,this.left+this.x+2*this.margin,i+e-n,this.yAxisTickColor],t:"Axes"}),this.toRender({p:["drawText",a[r].toString(),this.left+this.x+3*this.margin,i+e-n,this.axisTickFont,this.axisTickColor,"left","middle"],t:"Axes"})}if(s.title2){o=this.measureText(s.maxValueStr2,this.axisTickFont)+4*this.margin;this.toRender({p:["drawText",s.title2,this.left+this.x+o,e+i/2,this.axisTitleFont,this.axisTitleColor,"center","top",.5*-Math.PI],t:"Axes"})}}this.toRender({p:["setClipArea",this.setClipBoundaries()],t:"Size"})},this.drawGenomeBoxLines=function(t,e,i,s){for(var a,r,n,o,h,l=i.scaleHeight?i.scaleHeight:1,c=t+e*l/2,d="right"==i.dir?t:t+e*l,p=this.marginLeft+this.left,g=p+this.x,u=i.data,m=this.validateColor(i.fill||i.connect||s.connect)||this.foreground,f=this.xAxisUnit/2,y=[],x=0;x<u.length;x++)a=(u[x][0]-this.xAxisMin)*this.xAxisUnit-f,r=(u[x][1]-this.xAxisMin)*this.xAxisUnit+f-a,i.insertion||!s.connect&&!i.connect||"rect"==this.featureSpliceStyle||x<u.length-1&&(o=(a+r+(n=(u[x+1][0]-this.xAxisMin)*this.xAxisUnit)+1-f)/2,Math.floor(n-(r+a))>2&&p+a+r<g&&p+n>p&&(Math.abs(d-c)<3?this.toRender({p:["drawLine","line",p+a+r+1,c+e-e*l,p+n,c+e-e*l,m,!1,"butt"],i:[i.counter],t:"Data"}):(this.toRender({p:["drawLine","line",p+a+r+1,c+e-e*l,p+o,d+e-e*l,m,!1,"butt"],i:[i.counter],t:"Data"}),this.toRender({p:["drawLine","line",p+o,d+e-e*l,p+n-f,c+e-e*l,m,!1,"butt"],i:[i.counter],t:"Data"})))),i.insertion?(a=((u[x][0]+u[x][1])/2-this.xAxisMin)*this.xAxisUnit,y.push([p+a,t+e-e*l+e*l/2,f/2,e*l])):y.push([p+a,t+e-e*l,r,e*l]);return i.insertion||!s.connect&&!i.connect||"rect"!=this.featureSpliceStyle||(h=u.length-1,a=(u[0][0]-this.xAxisMin)*this.xAxisUnit,r=(u[h][1]-this.xAxisMin)*this.xAxisUnit-a,this.toRender({p:["drawLine","line",p+a+r,c+e-e*l,p+a,c+e-e*l,m,!1,"butt"],i:[i.counter],t:"Data"})),i.showDir&&this.xAxisUnit>.001&&!i.insertion&&(m=this.validateColor(i.showDir)||m,a=p+(i.start-this.xAxisMin)*this.xAxisUnit-f,r=p+(i.end-this.xAxisMin)*this.xAxisUnit+f,n=10,o=5,"right"==i.dir?r<g&&r+n>p&&(this.toRender({p:["drawLine","line",r,c,r+n,c,m,!1,"butt"],i:[i.counter],t:"Data"}),this.toRender({p:["drawLine","line",r+o,c-e/3,r+n,c,m,!1,"butt"],i:[i.counter],t:"Data"}),this.toRender({p:["drawLine","line",r+o,c+e/3,r+n,c,m,!1,"butt"],i:[i.counter],t:"Data"})):a-n<g&&a>p&&(this.toRender({p:["drawLine","line",a,c,a-n,c,m,!1,"butt"],i:[i.counter],t:"Data"}),this.toRender({p:["drawLine","line",a-o,c-e/3,a-n,c,m,!1,"butt"],i:[i.counter],t:"Data"}),this.toRender({p:["drawLine","line",a-o,c+e/3,a-n,c,m,!1,"butt"],i:[i.counter],t:"Data"}))),y},this.drawGenomeBoxAlleles=function(t,e,i,s,a,r){for(var n=s/a.length,o=0;o<a.length;o++)for(var h=a[o].split(""),l=(i-t)/h.length,c=e+n*o,d=0;d<h.length;d++){var p=t+l*d;"-"==h[d]&&(h[d]="Gap");var g="sequence"+h[d].toUpperCase()+"Color";this.toRender({p:["drawShape","rectangle",p+l/2,c+n/2,l,n,this[g],this[g],"closed"],i:[r],t:"Data"})}},this.drawGenomeBox=function(t,e,i,s){var a=this,r={},n=i.fill&&this.isArray(i.fill)?this.validateColor(i.connect||s.fill||s.connect):this.validateColor(i.fill||i.connect||s.fill||s.connect),o=!(!i.height||!this.isArray(i.height))&&i.height,h=i.outline||s.outline||n,l=n?"closed":"open",c=this.xAxisUnit/2,d=this.sequenceFontSize>e?e-3+"px "+this.fontName:this.sequenceFont,p=!("low"==a.genomeResolution||!i.sequence)&&("left"==i.dir?i.sequenceRC.split(""):i.sequence.split("")),g=i.translateRC,u=i.data,m=this.marginLeft+this.left,f=m+this.x;"high"==this.genomeResolution&&g&&(t+=g.top.length*this.featureTranslateHeight);for(var y=this.drawGenomeBoxLines(t,e,i,s),x=0;x<y.length;x++){var v=y[x][0],b=v+y[x][2];if(Math.floor(b-v)<3){var A=parseInt(b);if(r.hasOwnProperty(A))continue;r[A]=!0,r[A+1]=!0}if(v<f&&b>m){if("low"!=this.genomeResolution&&i.alleles&&i.alleles[x]&&!i.insertion&&this.drawGenomeBoxAlleles(v,t,b,e,i.alleles[x],i.counter),!g||"high"!=this.genomeResolution)if(i.insertion){var w="left"==i.dir?"triangle":"triangle2";this.toRender({p:["drawShape",w,y[x][0],y[x][1],y[x][2],y[x][3],n,h,l],i:[i.counter],t:"Data"})}else if("low"!=this.genomeResolution&&i.sequence&&(i.sequenceFill||s.sequenceFill||this.sequenceFill))this.toRender({p:["drawShape","rectangle",y[x][0]+y[x][2]/2,y[x][1]+y[x][3]/2,y[x][2],y[x][3],i.sequenceFill||s.sequenceFill||this.sequenceFill,h,l],i:[i.counter],t:"Data"});else{var C=o&&null!=o[x]&&o[x]<=y[x][3]?o[x]:y[x][3],T=i.fill&&this.isArray(i.fill)&&this.validateColor(i.fill[x])?i.fill[x]:n;this.toRender({p:["drawShape","rectangle",y[x][0]+y[x][2]/2,y[x][1]+y[x][3]/2,y[x][2],C,T,h,l],i:[i.counter],t:"Data"})}if("low"!=this.genomeResolution&&i.sequence&&!i.insertion){var S={},M=u[x][0],D=u[x][1],k="left"==i.dir?p.length-u[x][3]+1:u[x][2],L="left"==i.dir?p.length-u[x][2]+1:u[x][3],I=k-3;if(D-M!=L-k&&this.errors.push("Exon length for segment "+x+" in feature "+i.id+"is different to the box dimmension"),p.length>0){v+=c;for(var z=k;z<=L;z++){var N=p[z-1];if(N||this.errors.push("Nucleotide "+z+" in exon "+(x+1)+" in feature "+i.id+"not specified"),N){var B="sequence"+N.toUpperCase()+"Color";"high"==this.genomeResolution?g&&(!i.cds||i.cds&&z>=i.cds[0]&&z<=i.cds[1])?(this.drawTranslationTop(g,v,t,c,I,h,d,0,S,i.counter),this.toRender({p:["drawText",N,v,t+e/2,d,this[B],"center","middle"],i:[i.counter],t:"Data"}),this.drawTranslationBottom(g,v,t,c,I,h,d,0,S,i.counter)):this.toRender({p:["drawText",N,v,t+e/2,d,this[B],"center","middle"],i:[i.counter],t:"Data"}):this.toRender({p:["drawShape","rectangle",v,t+1+(e-2)/2,1,e-2,this[B],this[B],"closed"],i:[i.counter],t:"Data"})}else"high"==this.genomeResolution?this.toRender({p:["drawText","-",v,t+e/2,d,this.missingDataColor,"center","middle"],i:[i.counter],t:"Data"}):this.toRender({p:["drawShape","rectangle",v,t+1+(e-2)/2,1,e-2,this.missingDataColor,this.missingDataColor,"closed"],i:[i.counter],t:"Data"});I++,v+=this.xAxisUnit}}}}}},this.drawGenomeTrace=function(t,e,i,s,a,r,n){if("low"!=this.genomeResolution){"left"!=n||a.reversed||this.setReverseTrace(a);var o=[],h=["A","C","G","T"],l=this.marginLeft+this.left+(s-1-this.xAxisMin)*this.xAxisUnit,c=this.marginLeft+this.left,d=this.marginLeft+this.left+this.x,p=t+i;if(null==a.max){for(var g=0;g<h.length;g++)o=o.concat(a[h[g]]);"Firefox"==CanvasXpress.system.browser?o=this.radixSort(o):o.sort((function(t,e){return t-e}));var u=Math.floor(o.length*this.featureTraceTrim/100);a.max=o[o.length-(u+1)]}var m=i/a.max,f=h.length;for(g=0;g<f;g++){for(var y=0,x=[],v=[],b=l,A="sequence"+h[g].toUpperCase()+"Color",w=a.peak.length,C=0;C<w;C++)if(b>c-this.xAxisUnit&&b<d){var T=this.xAxisUnit/(a.peak[C]-y);if(r[C]){for(var S=Math.floor((a.peak[C]-y)/2),M=y;M<a.peak[C]-S;M++)x.push(b),v.push(p-Math.min(a.max,a[h[g]][M])*m),b+=T;y+=S,x.length>1&&v.length>1&&this.toRender({p:["drawShape","path",x,v,!1,!1,this[A],this[A],"open"],i:[e],t:"Data"}),x=[],v=[];for(M=0;M<r[C];M++)b+=this.xAxisUnit}for(M=y;M<=a.peak[C];M++)x.push(b),v.push(p-Math.min(a.max,a[h[g]][M])*m),b+=T;b-=T,y=a.peak[C]}else{if(r[C])for(M=0;M<r[C];M++)b+=this.xAxisUnit;y=a.peak[C],b+=this.xAxisUnit}if(b>c-this.xAxisUnit&&b<d)for(M=y;M<a[h[g]].length;M++)x.push(b),v.push(p-Math.min(a.max,a[h[g]][M])*m),b+=T;x.length>1&&v.length>1&&this.toRender({p:["drawShape","path",x,v,!1,!1,this[A],this[A],"open"],i:[e],t:"Data"})}}},this.drawTranslationTop=function(t,e,i,s,a,r,n,o,h,l){if(t.top&&t.top.length>0)for(var c=0;c<t.top.length;c++){y1=i-(t.top.length-c)*this.featureTranslateHeight;var d=t.top[c];if(a-d.off>=0&&(a-d.off)%3==0){var p=d.seq[Math.floor((a-d.off)/3)],g=a%2?this.oddColor:this.evenColor;"M"==p?g=this.sequenceStartColor:"*"==p&&(g=this.sequenceEndColor),h[d.rf]||(h[d.rf]=e-this.xAxisUnit*(o+2.5)),x0=e-h[d.rf]+s,this.toRender({p:["drawShape","rectangle",h[d.rf]+x0/2,y1+this.featureTranslateHeight/2,x0,this.featureTranslateHeight-1,g,r,"closed"],i:[l],t:"Data"}),this.toRender({p:["drawText",p,h[d.rf]+x0/2,y1+this.featureTranslateHeight/2+1,n,this.foreground,"center","middle"],i:[l],t:"Data"}),h[d.rf]=e+s}}},this.drawTranslationBottom=function(t,e,i,s,a,r,n,o,h,l){if(t.bottom&&t.bottom.length>0)for(var c=0;c<t.bottom.length;c++){y1=i+(c+1)*this.featureTranslateHeight;var d=t.bottom[c];if(a-d.off>=0&&(a-d.off)%3==0){var p=d.seq[Math.floor((a+d.off+1)/3)],g=a%2?this.oddColor:this.evenColor;"M"==p?g=this.sequenceStartColor:"*"==p&&(g=this.sequenceEndColor),h[d.rf]||(h[d.rf]=e-this.xAxisUnit*(o+2.5)),x0=e-h[d.rf]+s,this.toRender({p:["drawShape","rectangle",h[d.rf]+x0/2,y1+this.featureTranslateHeight/2,x0,this.featureTranslateHeight-1,g,r,"closed"],i:[l],t:"Data"}),this.toRender({p:["drawText",p,h[d.rf]+x0/2,y1+this.featureTranslateHeight/2+1,n,this.foreground,"center","middle"],i:[l],t:"Data"}),h[d.rf]=e+s}}},this.drawGenomeSequence=function(t,e,i,s,a){var r=s.counter,n=s.fill?s.fill:a.fill?a.fill:this.background,o=s.outline||this.foreground,h=n?"closed":"open",l=this.sequenceFontSize>e?e-3+"px "+this.fontName:this.sequenceFont,c=s.offset,d=s.sequence,p=s.sequenceRC,g=s.translate,u=s.translateRF;"left"!=s.dir||p||(p=d,d=this.getReverseComplement(d)),g&&!u&&(u=g,g=this.translate(g,d));var m=d.split(""),f=this.marginLeft+this.left+(c-this.xAxisMin)*this.xAxisUnit,y=this.marginLeft+this.left,x=this.marginLeft+this.left+this.x,v=(m.length+i.total)*this.xAxisUnit,b=0,A=a.subtype.match(/DNA|RNA/)?1:3,w=4*this.xAxisUnit,C=this.xAxisUnit/2,T=-2,S={},M=0,D=0;if("high"==this.genomeResolution){var k=f+b*this.xAxisUnit;for(g&&(t+=g.top.length*this.featureTranslateHeight);m.length>0;)if(k>y-w&&k<x+w){var L=m.shift();if("["==L){L=m.shift();for(var I=[];"]"!=L;)I.push(L),L=m.shift();this.toRender({p:["drawText",I.join("/"),f+b*this.xAxisUnit,t+e/2,l,this.sequenceMColor,"center","middle"],i:[r],t:"Data"})}else{var z="sequence"+L.toUpperCase()+"Color";g?(this.drawTranslationTop(g,k,t,C,T,o,l,D,S,r),this.toRender({p:["drawText",L,k,t+e/2,l,this[z],"center","middle"],i:[r],t:"Data"}),this.drawTranslationBottom(g,k,t,C,T,o,l,D,S,r)):this.toRender({p:["drawText",L,k,t+e/2,l,this[z],"center","middle"],i:[r],t:"Data"})}if(k=f+((b+=A)+M)*this.xAxisUnit,T++,D=0,i[parseInt(b/A)])for(var N=0;N<i[parseInt(b/A)];N++)this.toRender({p:["drawText","-",k,t+e/2,l,this.missingDataColor,"center","middle"],i:[r],t:"Data"}),D++,k=f+(b+ ++M)*this.xAxisUnit}else if(m.shift(),k=f+((b+=A)+M)*this.xAxisUnit,T++,D=0,i[parseInt(b/A)])for(N=0;N<i[parseInt(b/A)];N++)D++,k=f+(b+ ++M)*this.xAxisUnit}else for(var N in f=this.marginLeft+this.left+(c-.5-this.xAxisMin)*this.xAxisUnit,this.toRender({p:["drawShape","rectangle",f+v/2,t+e/2,v,e,n,o,"closed"],i:[r],t:"Data"}),i)f=this.marginLeft+this.left+(c-.5+parseInt(N)+D-this.xAxisMin)*this.xAxisUnit,v=i[N]*this.xAxisUnit,D+=i[N],this.toRender({p:["drawShape","rectangle",f+v/2,t+e/2,v,e,this.missingDataColor,o,h],i:[r],t:"Data"})},this.drawGenomeQuality=function(t,e,i,s,a,r,n,o){if("low"!=this.genomeResolution)for(var h="left"==n?this.cloneObject(a).reverse():a,l=this.marginLeft+this.left+(s-.5-this.xAxisMin)*this.xAxisUnit,c=this.marginLeft+this.left,d=this.marginLeft+this.left+this.x,p=l,g=(o.subtype.match(/DNA|RNA/)?1:3)*this.xAxisUnit,u=this.featureQualityHeight-3+"px "+this.fontName,m=0;m<h.length;m++){if(p+g>c&&p<d){if(r[m])for(var f=0;f<r[m];f++)p+=g;var y=this.getColorForValue(o.brew,h[m]);this.toRender({p:["drawShape","rectangle",p+g/2,t+i/2,g,i,y,y,"closed"],i:[e],t:"Data"}),p>c&&"high"==this.genomeResolution&&this.featureQualityValues&&this.toRender({p:["drawText",h[m],p+g/2,t+i/2,u,this.foreground,"center","middle"],i:[e],t:"Data"})}p+=g}},this.drawGenomeSignalToNoise=function(t,e,i,s,a,r,n,o){if("low"!=this.genomeResolution)for(var h="left"==n?this.cloneObject(a).reverse():a,l=this.marginLeft+this.left+(s-.5-this.xAxisMin)*this.xAxisUnit,c=this.marginLeft+this.left,d=this.marginLeft+this.left+this.x,p=l,g=(o.subtype.match(/DNA|RNA/)?1:3)*this.xAxisUnit,u=this.featureSignalToNoiseHeight-3+"px "+this.fontName,m=0;m<h.length;m++){if(p+g>c&&p<d){if(r[m])for(var f=0;f<r[m];f++)p+=g;var y=this.getColorForValue(o.brew,h[m]);this.toRender({p:["drawShape","rectangle",p+g/2,t+i/2,g,i,y,y,"closed"],i:[e],t:"Data"}),p>c&&"high"==this.genomeResolution&&this.featureSignalToNoiseValues&&this.toRender({p:["drawText",h[m],p+g/2,t+i/2,u,this.foreground,"center","middle"],i:[e],t:"Data"})}p+=g}},this.drawGenomeCoordinate=function(t,e,i,s,a,r,n,o,h){if("low"!=this.genomeResolution){var l=this.marginLeft+this.left+(s-this.xAxisMin)*this.xAxisUnit,c=this.marginLeft+this.left,d=this.marginLeft+this.left+this.x,p=a,g=(h.subtype.match(/DNA|RNA/)?1:3)*this.xAxisUnit,u=this.getCoordinateStep(),m=r+n.total,f=a+m,y=i-3+"px "+this.fontName;if("left"==o)for(var x=l+(m-1)*g;a<f-n.total;)n[m-(a-p)-2]&&(x-=g*n[m-(a-p)-2]),x>c&&x<d&&a%u==0&&this.toRender({p:["drawText",a,x,t+i/2,y,this.foreground,"center","middle"],t:"Labels"}),x-=g,a++;else for(x=l;a<f-n.total;)n[a-p]&&(x+=g*n[a-p]),x>c&&x<d&&a%u==0&&this.toRender({p:["drawText",a,x,t+i/2,y,this.foreground,"center","middle"],t:"Labels"}),x+=g,a++}},this.setGenomeWireFrame=function(){var t=this.marginLeft+this.left,e=this.marginLeft+this.left+this.x,i=this.getCoordinateStep(),s=Math.floor(this.xAxisMin);this.getFontPt(this.featureNameFont);for("low"==this.genomeResolution&&(i*=5);t<=e;)t=this.marginLeft+this.left+(s-this.xAxisMin)*this.xAxisUnit,s%i==0&&("dotted"==this.xAxisTickLineType?this.toRender({p:["drawLine","dottedLine",t,this.marginTop+this.top,t,this.marginTop+this.top+this.y,this.wireColor,!1,"butt"],t:"Axes"}):this.toRender({p:["drawLine","line",t,this.marginTop+this.top,t,this.marginTop+this.top+this.y,this.wireColor,!1,"butt"],t:"Axes"})),s++},this.setGenomeTicks=function(){var t=this.marginLeft+this.left,e=this.marginLeft+this.left+this.x,i=this.marginLeft+this.left,s=this.getCoordinateStep(),a=Math.floor(this.xAxisMin),r=this.getFontPt(this.featureNameFont)/2;for("low"==this.genomeResolution&&(s*=5);t<=e;){if(t=this.marginLeft+this.left+(a-this.xAxisMin)*this.xAxisUnit,a%s==0){var n=this.measureText(a.toString(),this.featureNameFont);t>=i&&(this.toRender({p:["drawText",a.toString(),t,this.marginTop+this.top+this.y+this.margin+r,this.featureNameFont,this.axisTickColor,"center","middle"],t:"Axes"}),i=t+1.5*n)}a++}},this.setGenomeRightDimentions=function(){for(var t=0,e=0;e<this.data.tracks.length;e++){var i=this.data.tracks[e];if("dataframe"==i.type)for(var s=0;s<i.data.length;s++)for(var a=i.data[s],r=0;r<a.data.length;r++){var n=a.data[r].title?this.axisTitleFontSize+this.margin:this.margin,o=a.data[r].yAxis,h=a.data[r].side;if(o&&i.dataframe[o]&&h&&"right"==h){var l=a.data[r].maxValueStrLen+n;t=Math.max(t,l)}}}return 0==t?this.margin:t+5*this.margin},this.setGenomeLeftDimentions=function(){if(this.featureStaggered){for(var t=0,e=0;e<this.data.tracks.length;e++){if("dataframe"==(c=this.data.tracks[e]).type)for(var i=0;i<c.data.length;i++)for(var s=c.data[i],a=0;a<s.data.length;a++){var r=s.data[a].title?this.axisTitleFontSize+this.margin:this.margin,n=s.data[a].yAxis,o=s.data[a].side;if(n&&c.dataframe[n]&&o&&"left"==o){var h=s.data[a].maxValueStrLen+r;t=Math.max(t,h)}}}return t+5*this.margin}var l=[];for(e=0;e<this.data.tracks.length;e++){var c=this.data.tracks[e];for(i=0;i<c.data.length;i++){var d=c.data[i];l.push(d.label||d.name||d.id)}}return this.measureText(this.shortenText(this.getMaxText(l),this.maxFeatureStringLen),this.featureNameFont)+4*this.margin},this.setGenomeYDimentions=function(){this.bottom=this.margin+this.getFontPt(this.featureNameFont)+this.getCitationHeight(),(this.adjustAspectRatio||this.height<this.marginTop+this.top+this.y+this.bottom+this.marginBottom)&&(this.height=this.marginTop+this.top+this.y+this.bottom+this.marginBottom),this.resizeCanvas(),this.resizeViewport()},this.setGenomeYUnits=function(){for(var t=0;t<this.data.tracks.length;t++){var e=this.data.tracks[t],i=this.meta.data.tracks[t];if("dataframe"==e.type)for(var s=0;s<e.data.length;s++){for(var a=e.data[s],r=[],n=[],o=[],h=[],l=[],c=[],d=0;d<a.data.length;d++){var p=a.data[d].yAxis;p&&e.dataframe.hasOwnProperty(p)&&i.hasOwnProperty(p)&&(a.data[d].range=i[p].range,a.data[d].values=i[p].values,a.data[d].valuesStr=i[p].valuesStr,a.data[d].maxValueStr=i[p].maxValueStr,a.data[d].maxValueStrLen=i[p].maxValueStrLen,a.data[d].minAxisY=null!=a.data[d].setMinY?a.data[d].setMinY:Math.min(a.data[d].range[0],a.data[d].values[0]),a.data[d].maxAxisY=null!=a.data[d].setMaxY?a.data[d].setMaxY:Math.max(a.data[d].range[1],a.data[d].values[a.data[d].values.length-1]),a.data[d].units=(e.height||this.featureTypeDefault)/(1.05*(a.data[d].maxAxisY-a.data[d].minAxisY)),a.data[d].brew=this.getColorBrew(e.colorSpectrum||this.colorSpectrum,a.data[d].minAxisY,a.data[d].maxAxisY,a.colorSpectrumZeroValue||this.colorSpectrumZeroValue,a.colorSpectrumBreaks||this.colorSpectrumBreaks,!0)),"left"==a.data[d].side?(a.data[d].title&&(e.title=a.data[d].title),r.push(a.data[d].minAxisY,a.data[d].maxAxisY),null!=a.data[d].setMinY&&o.push(a.data[d].setMinY),null!=a.data[d].setMaxY&&h.push(a.data[d].setMaxY)):"right"==a.data[d].side&&(a.data[d].title&&(e.title2=a.data[d].title),n.push(a.data[d].minAxisY,a.data[d].maxAxisY),null!=a.data[d].setMinY&&l.push(a.data[d].setMinY),null!=a.data[d].setMaxY&&c.push(a.data[d].setMaxY))}if(r.length){e.range=this.range(r),o.length&&(e.range[0]=this.min(o)),h.length&&(e.range[1]=this.max(h)),e.values=this[this.axisAlgorithm](e.range[0],e.range[1],5,this.axisWilkinsonLoose);for(var g=[],u=0;u<e.values.length;u++)g.push(e.values[u].toString());e.maxValueStr=this.getMaxText(g),e.maxValueStrLen=this.measureText(e.maxValueStr,this.axisTickFont),e.minAxisY=o.length?e.range[0]:Math.min(e.range[0],e.values[0]),e.maxAxisY=h.length?e.range[1]:Math.max(e.range[1],e.values[e.values.length-1]),e.units=(e.height||this.featureTypeDefault)/(1.05*(e.maxAxisY-e.minAxisY)),e.brew=this.getColorBrew(e.colorSpectrum||this.colorSpectrum,e.minAxisY,e.maxAxisY,e.colorSpectrumZeroValue||this.colorSpectrumZeroValue,e.colorSpectrumBreaks||this.colorSpectrumBreaks,!0)}if(n.length){e.range2=this.range(n),l.length&&(e.range2[0]=this.min(l)),c.length&&(e.range2[1]=this.max(c)),e.values2=this[this.axisAlgorithm](e.range2[0],e.range2[1],5,this.axisWilkinsonLoose);for(g=[],u=0;u<e.values2.length;u++)g.push(e.values2[u].toString());e.maxValueStr2=this.getMaxText(g),e.maxValueStrLen2=this.measureText(e.maxValueStr2,this.axisTickFont),e.minAxisY2=o.length?e.range2[0]:Math.min(e.range2[0],e.values2[0]),e.maxAxisY2=h.length?e.range2[1]:Math.max(e.range2[1],e.values2[e.values2.length-1]),e.units2=(e.height||this.featureTypeDefault)/(1.05*(e.maxAxisY2-e.minAxisY2)),e.brew2=this.getColorBrew(e.colorSpectrum||this.colorSpectrum,e.minAxisY2,e.maxAxisY2,e.colorSpectrumZeroValue||this.colorSpectrumZeroValue,e.colorSpectrumBreaks||this.colorSpectrumBreaks,!0)}}else e.type.match(/bar|heatmap/)&&(e.range=i.range,e.values=i.values,e.valuesStr=i.valuesStr,e.minAxisY=null!=e.setMinY?e.setMinY:Math.min(e.range[0],e.values[0]),e.maxAxisY=null!=e.setMaxY?e.setMaxY:Math.max(e.range[1],e.values[e.values.length-1]),e.units=(e.height||this.featureTypeDefault)/(1.05*(e.maxAxisY-e.minAxisY)),e.brew=this.getColorBrew(e.colorSpectrum||this.colorSpectrum,e.minAxisY,e.maxAxisY,e.colorSpectrumZeroValue||this.colorSpectrumZeroValue,e.colorSpectrumBreaks||this.colorSpectrumBreaks,!0))}},this.setGenomeAxisUnits=function(){this.setAxisUnits("xAxis"),this.genomeResolution=this.xAxisUnit>this.sequenceFontSize?"high":5*this.xAxisUnit>this.sequenceFontSize?"medium":"low"},this.setGenomeXDimentions=function(){this.left=this.setGenomeLeftDimentions(),this.right=this.setGenomeRightDimentions(),this.featureStaggered,this.width?this.x=this.width-(this.marginLeft+this.left+this.right+this.marginRight):this.width=this.marginLeft+this.left+this.x+this.right+this.marginRight},this.setGenomeFontsColors=function(){this.trackNameFont=this.trackNameFontStyle+" "+this.trackNameFontSize+"px "+this.fontName,this.featureNameFont=this.featureNameFontStyle+" "+this.featureNameFontSize+"px "+this.fontName,this.sequenceFont=this.sequenceFontSize+"px "+this.fontName,this.wireColor.match(/,0.1\)$/)||(this.wireColor=this.wireColor.replace(/\)$/,",0.1)"))},this.drawGenome=function(){this.setGenomeFontsColors(),this.setGenomeYUnits(),this.setGenomeXDimentions(),this.setGenomeAxisUnits(),this.setGenomeSubtracks(),this.setGenomeYDimentions(),this.setGenomeWireFrame(),this.plotGenomeData(),this.drawGenomeLabels(),this.setGenomeTicks(),this.drawTitle()},this.initializeGenome=function(){this.drawGenome()},this.initializeGenome()},CanvasXpress.prototype.Circular=function(){this.drawCircularElement=function(t){if(this.circularDebuggingCounter||(this.circularDebuggingCounter=0),this.debug){var e=this.addColorTransparency(this.colors[this.circularDebuggingCounter%this.colors.length],.5,!0),i=-Math.PI,s=i+2*Math.PI;this.toRender({p:["drawShape","circle",this.cx,this.cy,2*this.currentRadius,2*this.currentRadius,!1,e,"open"],t:"Debug"}),this.toRender({p:["drawArcText",t,this.cx,this.cy,this.currentRadius,i,s,this.axisTickFont,e,!1,!1,!0],t:"Debug"}),this.circularDebuggingCounter++}},this.setCircularXYDimensions=function(){this.panningX||(this.panningX=0),this.panningY||(this.panningY=0),this.x=this.width-(this.marginLeft+this.left+this.right+this.marginRight),this.y=this.height-(this.marginTop+this.top+this.bottom+this.marginBottom),this.r=Math.min(this.x,this.y)/2,this.padX=this.x>this.y?(this.x-this.y)/2:0,this.padY=this.x>this.y?0:(this.y-this.x)/2,this.cx=this.marginLeft+this.left+this.r+this.padX+this.panningX,this.cy=this.marginTop+this.top+this.r+this.padY+this.panningY,this.r*=this.zoom,this.d=2*this.r},this.setCircularFonts=function(){if(this.autoScaleFont){var t=Math.min(this.width,this.height)*(1-this.percentAspectRatioPlotArea);this.setPropertyFontSize(t/2,"varLabelFont"),this.setPropertyFontSize(t/2,"varTitleFont"),this.setPropertyFontSize(t,"smpLabelFont"),this.setPropertyFontSize(t,"smpTitleFont"),this.setPropertyFontSize(t,"overlayFont"),this.setAxisFont("NA",t/1.33)}},this.getCircularLevelLabelLength=function(){return!this.showIdeogram&&this.segregateSamplesBy&&this.segregateSamplesBy.length&&"sunburst"!=this.circularType&&"bubble"!=this.circularType&&"perpendicular"==this.overlayLevelOrientation&&this.data.x&&this.data.x.hasOwnProperty(this.segregateSamplesBy[0])?this.meta.data.x[this.segregateSamplesBy[0]].maxLevLen:0},this.getCircularSampleLabelLength=function(){return this.showSampleNames&&"sunburst"!=this.circularType&&"bubble"!=this.circularType?"circular"==this.smpLabelOrientation&&this.rAxisIndex<0?this.getFontPt(this.smpLabelFont)+this.margin:this.meta.data.y.maxSmpChr>this.maxSmpStringLen?this.measureText(this.meta.data.y.maxSmpStr.substring(0,this.maxSmpStringLen),this.smpLabelFont)+this.margin:this.measureText(this.meta.data.y.maxSmpStr,this.smpLabelFont)+this.margin:0},this.getCircularVariableLabelLength=function(){return this.showVariableNames&&this.showIdeogram?this.meta.data.y.maxVarChr>this.maxVarStringLen?this.measureText(this.meta.data.y.maxVarStr.substring(0,this.maxVarStringLen),this.varLabelFont)+this.margin:this.measureText(this.meta.data.y.maxVarStr,this.varLabelFont)+this.margin:0},this.getCircularXAxisTickLength=function(){return this.measureText(this.xAxisMaxStrLength,this.axisTickFont)},this.getCircularRAxisTickLength=function(){return this.rAxisTickFormat?this.measureText(this.formatAxisValue(this.rAxisMax,"rAxis"),this.axisTickFont):this.measureText(this.rAxisMaxStrLength,this.axisTickFont)},this.getCircularRAxisPercentTickLength=function(){return this.rAxisPercentShow?this.measureText("100%",this.axisTickFont):0},this.getArcSegmentsCenter=function(){return"normal"!=this.circularType||!this.xAxisShow||this.circularArc<270?0:this.xAxisShow?1.5*this.margin+this.arcLengthToDegrees(this.r*this.circularCenterProportion*2,this.getCircularXAxisTickLength()):void 0},this.getCircularPercentLength=function(){var t=0;return!this.showIdeogram&&this.rAxisPercentShow&&(this.rAxisIndex>=0||"chord"==this.circularType)&&(t=this.getCircularRAxisPercentTickLength()+3*this.margin),t},this.getCircularScalesLength=function(t){var e=0;return this.showIdeogram?e+=this.axisTickFontSize+this.margin+2*this.margin*(t?0:1):(this.rAxisShow&&this.rAxisIndex>=0||"chord"==this.circularType)&&("circular"!=this.rAxisLabelOrientation&&"chord"!=this.circularType?e+=this.axisTickFontSize+4*this.margin:e+=this.getCircularRAxisTickLength()+4*this.margin),e},this.getCircularDendrogramLength=function(){return this.smpDendrogram&&this.showSmpDendrogram?this.dendrogramHeight+this.margin:0},this.getCircularIdeogramLength=function(){return this.showIdeogram?this.overlaysThickness+this.margin:0},this.getCircularOverlaysLength=function(){var t=0;if(this.segregateSamplesBy.length>0&&"sunburst"!=this.circularType&&"chord"!=this.circularType&&"bubble"!=this.circularType&&!this.showIdeogram&&(t+=this.overlaysThickness),this.showOverlays&&this.smpOverlays.length>0&&"sunburst"!=this.circularType&&"chord"!=this.circularType&&"bubble"!=this.circularType&&!this.showIdeogram)if(this.rAxisIndex<0)for(var e=0;e<this.smpOverlays.length;e++){var i=this.smpOverlays[e];this.rAxisIndex<0&&(t+="-"!=i?this.overlaysThickness:this.margin)}else if(this.showOverlays&&this.varOverlays.length>0&&"sunburst"!=this.circularType&&"chord"!=this.circularType&&"bubble"!=this.circularType&&this.showIdeogram)for(e=0;e<this.varOverlays.length;e++){i=this.varOverlays[e];this.rAxisIndex<0&&(t+="-"!=i?this.overlaysThickness:this.margin)}return t+(t>0?this.margin:0)},this.getCircularLabelsLength=function(){var t=0;return"sunburst"!=this.circularType&&"chord"!=this.circularType&&"bubble"!=this.circularType?this.showSampleNames&&this.rAxisIndex<0&&!this.showIdeogram?"circular"==this.smpLabelOrientation?t+=this.smpLabelFontSize+this.margin:t+=this.getCircularSampleLabelLength():this.showSampleNames&&this.rAxisIndex>=0&&!this.showIdeogram&&(t+=this.getCircularSampleLabelLength()+this.circularAnchorLength+this.margin):this.showIdeogram&&this.showVariableNames&&(t+=this.getCircularVariableLabelLength()+this.circularAnchorLength+this.margin),t},this.getCircularAnchorsLength=function(){var t=0;return(this.showIdeogram&&this.showVariableNames||!this.showIdeogram&&this.showSampleNames&&this.rAxisIndex>=0)&&(t+=this.circularAnchorLength+this.margin),t},this.getNonDataRingLength=function(){for(var t=this,e=this.cloneObject(this.ringsOrder),i=function(e){if(t.showIdeogram){if(t.data.z&&t.data.z.hasOwnProperty(e))return t.varOverlays.includes(e)||t.varOverlays.push(e),!0}else if(t.data.x&&t.data.x.hasOwnProperty(e))return t.smpOverlays.includes(e)||t.smpOverlays.push(e),!0;return!1},s=this.getCircularLevelLabelLength(),a=0;a<e.length;a++)switch(e[a]){case"-":s+=this.margin;break;case"percent":s+=this.getCircularPercentLength();break;case"chromosomes":case"scale":s+=this.getCircularScalesLength("chromosomes"==e[a]);break;case"dendrogram":s+=this.getCircularDendrogramLength();break;case"ideogram":s+=this.getCircularIdeogramLength();break;case"overlays":s+=this.getCircularOverlaysLength();break;case"labels":s+=this.getCircularLabelsLength();break;case"anchors":case"anchors2":s+=this.getCircularAnchorsLength();break;case"data":s+=0;break;default:i(e[a])&&(s+=this.overlaysThickness+this.margin)}return s},this.setIdeogram=function(){if(!CanvasXpress.chromosomes[this.ideogram].hasOwnProperty("max")){CanvasXpress.chromosomes[this.ideogram].max={};for(var t=CanvasXpress.chromosomes[this.ideogram],e=0;e<t.order.length;e++){var i=t.data[t.order[e]].length-1;t.max[t.order[e]]=t.data[t.order[e]][i][1]}}},this.setCircularSampleData=function(){if(this.circularSampleData=!this.showIdeogram&&{},this.circularSampleIndices=!this.showIdeogram&&[],!this.showIdeogram)for(var t=this,e={},i=function(i,s){for(var a=i,r=t.round(i,2),n=t.round((r+.01)%(2*Math.PI),2),o=t.round((r+.02)%(2*Math.PI),2),h=0;e[r]||e[n]||e[o];)if(i=(i+.01)%(2*Math.PI),r=t.round((r+.01)%(2*Math.PI),2),n=t.round((n+.01)%(2*Math.PI),2),o=t.round((o+.01)%(2*Math.PI),2),++h>8)return Number.NaN;return e[r]=s,e[n]=s,e[o]=s,i-a},s=this.data.y.smps,a=this.data.y.data,r=0;r<this.arcSegmentsSampleIndices.length;r++){var n=[];this.rAxisIndex>=0?(a=this.data.y.data[this.rAxisIndex],n=this.cloneObject(this.arcSegmentsSampleIndices[r]).sort((function(t,e){return a[t]-a[e]}))):n=this.arcSegmentsSampleIndices[r];for(var o="absolute"==this.circularDataPosition?this.rAxisUnit:this.arcSegmentsMax[r]*this.rAxisUnit/n.length,h=o/2,l=this.rAxisIndex>=0?this.rAxisUnit/2:0,c=0;c<n.length;c++){var d=s[n[c]];this.circularSampleIndices.push(n[c]);var p=this.rAxisUnit*(this.rAxisIndex>=0?a[n[c]]:c),g=(this.arcSegmentsDims[r][0]+p-l)%(2*Math.PI),u=i(g,d);this.circularSampleData[d]={idx:n[c],seg:r,raw:g,mod:isNaN(u)?Number.NaN:g+u,dat:[g,g+o,g+h]}}}},this.setCircularVariableData=function(){if(this.circularVariableData=!!this.showIdeogram&&{},this.circularVariableIndices=!!this.showIdeogram&&[],this.showIdeogram){for(var t=this,e={},i={},s=function(i,s){for(var a=i,r=t.round(i,2),n=t.round((r+.01)%(2*Math.PI),2),o=t.round((r+.02)%(2*Math.PI),2),h=0;e[r]||e[n]||e[o];)if(i=(i+.01)%(2*Math.PI),r=t.round((r+.01)%(2*Math.PI),2),n=t.round((n+.01)%(2*Math.PI),2),o=t.round((o+.01)%(2*Math.PI),2),++h>8)return Number.NaN;return e[r]=s,e[n]=s,e[o]=s,i-a},a=this.data.y,r=this.data.z,n=r[this.ideogramChromosome],o=[],h=0;h<n.length;h++)o.push(n[h].toString().match(/x/i)?23:n[h].toString().match(/y/i)?24:n[h]);var l=r[this.ideogramChromosomePosition],c=[];for(h=0;h<this.varIndices.length;h++){var d=this.varIndices[h];c.push(a.vars[d])}for(c=this.cloneObject(a.vars).sort((function(e,i){var s=t.getVariableIndices(e),a=t.getVariableIndices(i);return o[s]-o[a]||l[s]-l[a]})),h=0;h<c.length;h++){var p=c[h],g=this.getVariableIndices(p);this.circularVariableIndices.push(g);var u=this.arcSegmentsRangeMap[n[g]];i.hasOwnProperty(n[g])||(i[n[g]]=0),i[n[g]]++;var m=(this.arcSegmentsDims[u][0]+this.rAxisUnit*l[g])%(2*Math.PI),f=s(m,p);this.circularVariableData[p]={idx:g,seg:u,chr:n[g],raw:m,mod:isNaN(f)?Number.NaN:m+f}}Math.PI;for(var g in i){u=this.arcSegmentsRangeMap[g];var y="absolute"==this.circularDataPosition?this.rAxisUnit:this.arcSegmentsMax[u]*this.rAxisUnit/i[g],x=y/2,v=this.arcSegmentsDims[u][0],b=0;for(h=0;h<c.length;h++){p=c[h];var A=this.circularVariableData[p].idx,w="absolute"==this.circularDataPosition?v+this.rAxisUnit*l[A]:v+y*b;n[A]==g&&(this.circularVariableData[p].dat=[w,w+y,w+x],b++)}}}},this.setCircularArcSegments=function(){this.circularArc>360?this.circularArc=360:this.circularArc<90&&(this.circularArc=90),this.rAxisIndex=this.rAxis?this.getVariableIndices(this.rAxis):-1,this.arcSegmentsCenter=this.getArcSegmentsCenter();var t=this.circularArc<270?1:0,e="normal"!=this.circularType||this.circularArc<270?0:this.xAxisShow?(this.arcSegmentsSeparation+this.arcSegmentsCenter)*Math.PI/360:0;if(this.circularStart=1.5*Math.PI+e+this.radians(this.circularRotate),this.arcSegments=[],this.arcSegmentsSampleIndices=[],this.arcSegmentsRange=[],this.arcSegmentsMin=[],this.arcSegmentsMax=[],this.arcSegmentsRangeMap={},this.arcSegmentsDims=[],this.arcSegmentsNumber=0,this.rAxisUnit=1,this.maxRadiusFactor=1,this.maxRadiusFactorInv=1,"sunburst"==this.circularType){var i=this.createHierarchy(this.hierarchy);this.arcSegmentsMin.push(0),this.arcSegmentsMax.push(i[0].value),this.rAxisUnit=this.radians((this.circularArc-(this.arcSegmentsSeparation+this.arcSegmentsCenter))/i[0].value),this.arcSegmentsRange.push(i[0].value),this.circularSunburst=i}else if("chord"==this.circularType){var s=this.circularStart,a=this.circularChord;this.rAxisUnit=a.unit;for(var r=0;r<a.segments.length;r++)this.arcSegments.push(a.segments[r].value),this.arcSegmentsRangeMap[a.segments[r].name]=r,this.arcSegmentsMin[r]=0,this.arcSegmentsMax[r]=a.segments[r].value,this.arcSegmentsRange.push(a.segments[r].value),this.arcSegmentsDims.push([(s+a.segments[r].start)%(2*Math.PI),(s+a.segments[r].end)%(2*Math.PI)])}else if("bubble"==this.circularType)this.setCirclePack();else if(this.showIdeogram){this.setIdeogram();var n=CanvasXpress.chromosomes[this.ideogram],o=0,h=n.order.length;for(r=0;r<h;r++){a=n.order[r],n.data[a];var l=n.max[a];this.arcSegments.push(a),this.arcSegmentsRangeMap[a]=r,this.arcSegmentsMin[r]=0,this.arcSegmentsMax[r]=l,this.arcSegmentsRange[r]=l,o+=l}this.rAxisUnit=this.radians((this.circularArc-(this.arcSegmentsSeparation*(h-t)+this.arcSegmentsCenter))/o),this.arcSegmentsNumber=h;for(s=this.circularStart,r=0;r<h;r++){var c=this.rAxisUnit*this.arcSegmentsRange[r];this.arcSegmentsDims.push([s%(2*Math.PI),(s+c)%(2*Math.PI)]),s+=c+this.radians(this.arcSegmentsSeparation)}this.circularEnd=(s-this.radians(this.arcSegmentsSeparation))%(2*Math.PI)}else if(this.segregateSamplesBy.length){var d=[],p=[],g=this.getSmpAnnotations(this.segregateSamplesBy[0],this.smpIndices).sort();for(r=0;r<g.length;r++){this.arcSegments.push(g[r]),this.arcSegmentsRangeMap[g[r]]=r;var u=this.getSamplesByAnnotationLevel(this.segregateSamplesBy[0],g[r]);this.arcSegmentsSampleIndices.push(u),d=d.concat(u)}for(r=0;r<d.length;r++)this.hiddenSmps[d[r]]?p.push(!0):p.push(!1);if(this.smpIndices=d,this.hiddenSmps=p,this.rAxisIndex>=0){var m={},f=0;for(r=0;r<this.data.y.smps.length;r++){m[s=this.getMetadataValue(r,"x",this.segregateSamplesBy[0])]||(m[s]=[]),m[s].push(this.data.y.data[this.rAxisIndex][r])}for(var s in m){this.rAxisZero&&m[s].push(0);r=this.arcSegmentsRangeMap[s];var y=this.range(m[s]);this.arcSegmentsMin[r]=y[0],this.arcSegmentsMax[r]=y[1],this.rAxisZero?(f+=y[1],this.arcSegmentsRange[r]=y[1]):(f+=y[1]-y[0],this.arcSegmentsRange[r]=y[1]-y[0])}this.rAxisUnit=this.radians((this.circularArc-(this.arcSegmentsSeparation*(this.arcSegmentsSampleIndices.length-t)+this.arcSegmentsCenter))/f)}else{this.rAxisUnit=this.radians((this.circularArc-(this.arcSegmentsSeparation*(this.arcSegmentsSampleIndices.length-t)+this.arcSegmentsCenter))/this.data.y.smps.length);for(s=this.circularStart,r=0;r<this.arcSegmentsSampleIndices.length;r++)this.arcSegmentsMin[r]=0,this.arcSegmentsMax[r]=this.arcSegmentsSampleIndices[r].length,this.arcSegmentsRange[r]=this.arcSegmentsSampleIndices[r].length}s=this.circularStart;for(var x=0;x<g.length;x++){var v=g[x],b=(r=this.arcSegmentsRangeMap[v],this.rAxisIndex>=0?this.arcSegmentsRange[r]:this.arcSegmentsSampleIndices[r].length);c=this.rAxisUnit*b;this.arcSegmentsDims.push([s%(2*Math.PI),(s+c)%(2*Math.PI)]),s+=c+this.radians(this.arcSegmentsSeparation)}this.circularEnd=(s-this.radians(this.arcSegmentsSeparation))%(2*Math.PI)}else{if(this.arcSegments=!1,this.arcSegmentsSampleIndices=[this.smpIndices],this.rAxisIndex>=0){y=this.range(this.data.y.data[this.rAxisIndex]);this.arcSegmentsMin.push(y[0]),this.arcSegmentsMax.push(y[1]),this.rAxisZero?(this.rAxisUnit=this.radians((this.circularArc-(this.arcSegmentsSeparation+this.arcSegmentsCenter))/y[1]),this.arcSegmentsRange.push(y[1])):(this.rAxisUnit=this.radians((this.circularArc-(this.arcSegmentsSeparation+this.arcSegmentsCenter))/(y[1]-y[0])),this.arcSegmentsRange.push(y[1]-y[0]))}else{this.rAxisUnit=this.radians((this.circularArc-(this.arcSegmentsSeparation+this.arcSegmentsCenter))/this.data.y.smps.length);for(s=this.circularStart,r=0;r<this.arcSegmentsSampleIndices.length;r++)this.arcSegmentsMin[r]=0,this.arcSegmentsMax[r]=this.arcSegmentsSampleIndices[r].length,this.arcSegmentsRange[r]=this.arcSegmentsSampleIndices[r].length}c=this.rAxisUnit*(this.rAxisIndex>=0?this.arcSegmentsRange[0]:this.smpIndices.length);this.arcSegmentsDims.push([this.circularStart%(2*Math.PI),(this.circularStart+c)%(2*Math.PI)]),this.circularEnd=(this.circularStart+c)%(2*Math.PI)}if(this.arcSegmentsNumber=this.showIdeogram?CanvasXpress.chromosomes[this.ideogram].order.length:"chord"==this.circularType?this.circularChord.segments.length:this.arcSegmentsSampleIndices.length,this.currentRadius=1*this.r,this.arcSegmentsRadius&&this.arcSegmentsRadius.length>0){for(r=this.arcSegmentsRadius.length;r<this.arcSegmentsNumber;r++)this.arcSegmentsRadius.push(1);this.maxRadiusFactor=this.max(this.arcSegmentsRadius)}else for(r=0;r<this.arcSegmentsNumber;r++)this.arcSegmentsRadius.push(1);if(1!=this.maxRadiusFactor)for(r=0;r<this.arcSegmentsNumber;r++)this.arcSegmentsRadius[r]/=this.maxRadiusFactor;this.maxRadiusFactorInv=1/this.maxRadiusFactor,this.setCircularVariableData(),this.setCircularSampleData()},this.setCircularRings=function(){this.ringsVarIndices=[],this.ringsSmpIndices=[],this.ringLength=[],this.ringMap={};var t=["percent","scale","dendrogram","ideogram","overlays","labels","anchors","data"];if(this.rAxisIndex>=0&&this.ringsVarIndices.push([this.rAxisIndex]),"sunburst"==this.circularType||"bubble"==this.circularType){var e=this.hierarchyVar?this.getVariableIndices(this.hierarchyVar):0;this.hierarchyVarIndex=e>=0?e:0,this.ringsVarIndices.push(this.hierarchyVarIndex),this.ringGraphWeight[0]=1,this.ringsOrder=t,this.ringNumber=1}else if("chord"==this.circularType)this.ringsVarIndices.push(this.varIndices),this.ringGraphWeight[0]=1,this.ringsOrder=t,this.ringNumber=1;else{var i,s;if(this.ringsOrder.length>0){if(this.showIdeogram&&this.segregateSamplesBy.length>0?s=this.meta.data.x[this.segregateSamplesBy[0]].order:this.segregateVariablesBy.length>0&&(s=this.meta.data.z[this.segregateVariablesBy[0]].order),s)for(e=0;e<this.ringsOrder.length;e++)s.hasOwnProperty(this.ringsOrder[e])&&(i||(i={}),i[this.ringsOrder[e]]=!0)}else this.ringsOrder=t;if(this.showIdeogram)if(this.segregateSamplesBy.length>0){var a={};for(e=0;e<this.data.x[this.segregateSamplesBy[0]].length;e++){a[n=this.getMetadataValue(e,"x",this.segregateSamplesBy[0])]||(i?i.hasOwnProperty(n)&&(this.ringMap[n]=this.ringsSmpIndices.length,this.ringsSmpIndices.push(this.getSamplesByAnnotationLevel(this.segregateSamplesBy[0],n))):(this.ringMap[n]=this.ringsSmpIndices.length,this.ringsSmpIndices.push(this.getSamplesByAnnotationLevel(this.segregateSamplesBy[0],n))),a[n]=!0)}}else{var r=[];for(e=0;e<this.smpIndices.length;e++)r.push(this.smpIndices[e]);this.ringsSmpIndices.push(r)}else if(this.segregateVariablesBy.length>0)for(a={},e=0;e<this.data.z[this.segregateVariablesBy[0]].length;e++){var n;if(!(this.rAxisIndex>=0&&e==this.rAxisIndex))a[n=this.getMetadataValue(e,"z",this.segregateVariablesBy[0])]||(i?i.hasOwnProperty(n)&&(this.ringMap[n]=this.ringsVarIndices.length,this.ringsVarIndices.push(this.getVariablesByAnnotationLevel(this.segregateVariablesBy[0],n))):(this.ringMap[n]=this.ringsVarIndices.length,this.ringsVarIndices.push(this.getVariablesByAnnotationLevel(this.segregateVariablesBy[0],n))),a[n]=!0)}else{for(r=[],e=0;e<this.varIndices.length;e++)this.rAxisIndex>=0&&e==this.rAxisIndex||r.push(this.varIndices[e]);this.ringsVarIndices.push(r)}if(this.ringNumber=this.showIdeogram?this.ringsSmpIndices.length:this.ringsVarIndices.length,this.ringGraphType.length<this.ringNumber)for(e=this.ringGraphType.length;e<this.ringNumber;e++)this.ringGraphType.push(this.showIdeogram?"heatmap":"radar"==this.circularType?"line":"dot");if(this.ringGraphWeight&&this.ringGraphWeight.length>0){for(;this.ringGraphWeight.length!=this.ringNumber;)this.ringGraphWeight.length>this.ringNumber?this.ringGraphWeight.pop():this.ringGraphWeight.push(this.ringGraphWeight[this.ringGraphWeight.length-1]);for(e=0;e<this.ringNumber;e++)this.rAxisShow&&this.rAxisIndex>=0&&e==this.rAxisIndex&&(this.ringGraphWeight[e]=0)}else{this.ringGraphWeight=[];for(e=0;e<this.ringNumber;e++)this.rAxisShow&&this.rAxisIndex>=0&&e==this.rAxisIndex?this.ringGraphWeight.push(0):this.ringGraphWeight.push(1)}var o=0;for(e=0;e<this.ringGraphWeight.length;e++){if(this.showIdeogram){if(this.ringsSmpIndices[e].length<1)continue}else if(this.ringsVarIndices[e].length<1)continue;o+=parseFloat(this.ringGraphWeight[e])}0==o&&(o=1);for(e=0;e<this.ringGraphWeight.length;e++)this.ringGraphWeight[e]/=o}var h=this.getNonDataRingLength(),l=this.circularCenterProportion*this.r,c=this.ringSeparation*(this.ringNumber-(this.rAxisIndex>=0?2:1)),d=this.r-(h+l+c);for(e=0;e<this.ringNumber;e++)this.showIdeogram?this.ringsSmpIndices[e].length<1?this.ringLength.push(0):this.ringLength.push(this.ringGraphWeight[e]*d):this.ringsVarIndices[e].length<1?this.ringLength.push(0):this.ringLength.push(this.ringGraphWeight[e]*d)},this.renderCircularPlot=function(){var t=this,e=this.cloneObject(this.ringsOrder),i=function(e){return t.showIdeogram?t.varOverlays.includes(e):t.smpOverlays.includes(e)},s=function(e){var i=t.showIdeogram?t.meta.data.x[t.segregateSamplesBy[0]]:t.meta.data.z[t.segregateVariablesBy[0]];return i.levels.includes(e)&&i.order&&i.order.hasOwnProperty(e)};this.ringInfo=[];for(var a=0;a<e.length;a++){switch(e[a]){case"-":this.currentRadius-=this.margin;break;case"percent":this.drawCircularPercentRadialAxis();break;case"chromosomes":case"scale":this.drawCircularRadialAxis("chromosomes"==e[a]);break;case"dendrogram":this.drawCircularDendrogram();break;case"ideogram":this.drawCircularIdeogram();break;case"overlays":this.drawCircularOverlays();break;case"labels":this.drawCircularVariableLabels(),this.drawCircularSampleLabels();break;case"anchors":case"anchors2":this.drawCircularAnchors(e[a]);break;case"data":switch(this.circularType){case"sunburst":this.drawCircularSunburst();break;case"chord":this.drawCircularChord();break;case"bubble":this.drawCircularBubble();break;default:this.drawCircularData()}break;default:i(e[a])?(this.showIdeogram?this.drawCircularVariableOverlay(e[a]):this.drawCircularSampleOverlay(e[a]),this.currentRadius-=this.margin):s(e[a])&&this.drawCircularDataRing(e[a])}this.ringInfo.push(this.currentRadius)}this.drawCircularHandles()},this.drawCircularHandles=function(){if("sunburst"!=this.circularType&&"chord"!=this.circularType&&"bubble"!=this.circularType&&"radar"!=this.circularType)for(var t=this.arcSegmentsRange.length-1,e=this.arcSegmentsDims[t][1]%(2*Math.PI),i=this.arcSegmentsDims[0][0]%(2*Math.PI),s=this.arcSegmentsRadius[0],a=0;a<this.ringInfo.length;a++){var r,n;0==a?(r=Math.max(0,this.r-(this.ringInfo[a]+this.margin)),n="Ring:"+a+":Drag "+this.ringsOrder[a]+" in",this.toRender({p:["drawShape","arc2",this.cx,this.cy,r,this.r*s,!1,"rgba(0,0,0,0)","open",!1,!1,!1,!1,e,i],i:[n],t:"Axes"})):(r=Math.max(0,this.ringInfo[a-1]-(this.ringInfo[a]+this.margin)),n="Ring:"+a+":Drag "+this.ringsOrder[a]+" in/out",this.toRender({p:["drawShape","arc2",this.cx,this.cy,r,this.ringInfo[a-1]*s,!1,"rgba(0,0,0,0)","open",!1,!1,!1,!1,e,i],i:[n],t:"Axes"}))}},this.drawCircularPercentRadialAxis=function(){if(!this.showIdeogram&&this.rAxisPercentShow&&(this.rAxisIndex>=0||"chord"==this.circularType)){this.drawCircularElement("drawCircularPercentRadialAxis");var t=this.getCircularRAxisPercentTickLength(),e="1px "+this.fontName;this.currentRadius-="outside"==this.circularScalesAlign?2*this.margin:t;for(var i=this.currentRadius-(("outside"==this.circularScalesAlign?3*-this.margin:0)+1*this.margin),s=this.currentRadius-(("outside"==this.circularScalesAlign?3*-this.margin:0)+2*this.margin),a=0;a<this.arcSegmentsRange.length;a++)for(var r=this.arcSegmentsRadius[a],n=this.arcSegmentsDims[a][0],o=this.arcSegmentsDims[a][1]-this.arcSegmentsDims[a][0]<0?this.arcSegmentsDims[a][1]-this.arcSegmentsDims[a][0]+2*Math.PI:this.arcSegmentsDims[a][1]-this.arcSegmentsDims[a][0],h=o<.003?[.5]:o<.03?[0,1]:o<.15?[0,.5,1]:[0,.2,.4,.6,.8,1],l=o<.003?1:o<.03?.2:o<.15?.1:.02,c=o<.003||o<.03?1:o<.15?5:10,d=0;d<h.length;d++){for(var p=(n+o*h[d])%(2*Math.PI),g=100*h[d]+"%",u=this.currentRadius*r*Math.cos(p)+this.cx,m=this.currentRadius*r*Math.sin(p)+this.cy,f=0;f<c;f++)if(h[d]<1||0==f){var y=p+f*l*o,x=i*r*Math.cos(y)+this.cx,v=i*r*Math.sin(y)+this.cy,b=s*r*Math.cos(y)+this.cx,A=s*r*Math.sin(y)+this.cy;this.toRender({p:["drawLine","lineR",x,v,b,A,this.rAxisTickColor,this.outlineWidth],b:[this.cx,this.cy],t:"Axes"})}p>=1.5*Math.PI||p<=Math.PI/2?this.toRender({p:["drawText",g,u,m,this.axisTickFont,this.axisTickColor,"outside"==this.circularScalesAlign?"right":"left","middle",p],b:[this.cx,this.cy,e],t:"Axes"}):this.toRender({p:["drawText",g,u,m,this.axisTickFont,this.axisTickColor,"outside"==this.circularScalesAlign?"left":"right","middle",p+Math.PI],b:[this.cx,this.cy,e],t:"Axes"})}this.currentRadius-="outside"==this.circularScalesAlign?t+this.margin:3*this.margin}},this.drawCircularRadialAxis=function(t){if(this.showIdeogram){this.drawCircularElement("drawCircularRadialAxis");var e="outside"==this.circularScalesAlign,i=t?0:1;this.currentRadius-=e?2*this.margin*i:this.axisTickFontSize;for(var s=this.currentRadius-((e?3*-this.margin:this.margin)+this.margin*(e?1:0)),a=this.currentRadius-((e?3*-this.margin:this.margin)+this.margin*(e?2:1)),r=0;r<this.arcSegmentsRange.length;r++){var n=this.arcSegmentsRadius[r],o=this.arcSegmentsDims[r][0],h=this.arcSegments[r].toString(),l=(this.arcSegmentsDims[r][0]+this.rAxisUnit*this.arcSegmentsRange[r]*.5)%(2*Math.PI),c=e?0:this.axisTickFontSize;if(this.toRender({p:["drawArcText",h,this.cx,this.cy,this.currentRadius*n+c,l-this.rAxisUnit*this.axisTickFontSize/7,this.rAxisUnit*this.axisTickFontSize/3.5,this.axisTickFont,this.rAxisTickColor,!1,!1,!0],i:["ChrLbl"+r],t:"Axes"}),!t)for(var d=[0,.2,.4,.6,.8,1],p=0;p<d.length;p++){var g=(o+this.arcSegmentsRange[r]*d[p]*this.rAxisUnit)%(2*Math.PI),u=s*n*Math.cos(g)+this.cx,m=s*n*Math.sin(g)+this.cy,f=a*n*Math.cos(g)+this.cx,y=a*n*Math.sin(g)+this.cy;this.toRender({p:["drawLine","lineR",u,m,f,y,this.rAxisTickColor,this.outlineWidth],b:[this.cx,this.cy],t:"Axes"})}}this.currentRadius-=t?e?this.axisTickFontSize+this.margin:this.margin:e?this.axisTickFontSize+this.margin:3*this.margin}else if(this.rAxisShow&&this.rAxisIndex>=0||"chord"==this.circularType)if(this.drawCircularElement("drawCircularRadialAxis"),"circular"!=this.rAxisLabelOrientation&&"chord"!=this.circularType){var x=this.rAxisUnit;e="outside"==this.circularScalesAlign;this.currentRadius-=e?3*this.margin:this.axisTickFontSize;s=this.currentRadius-((e?3*-this.margin:this.margin)+this.margin*(e?2:0));var v=this.currentRadius-((e?3*-this.margin:this.margin)+1*this.margin);for(a=this.currentRadius-((e?3*-this.margin:this.margin)+this.margin*(e?0:2)),r=0;r<this.arcSegmentsRange.length;r++){var b=this.arcSegmentsRadius[r],A=this.arcSegmentsDims[r][0],w=this.arcSegmentsDims[r][1]-this.arcSegmentsDims[r][0]<0?this.arcSegmentsDims[r][1]-this.arcSegmentsDims[r][0]+2*Math.PI:this.arcSegmentsDims[r][1]-this.arcSegmentsDims[r][0],C=((d=this[this.axisAlgorithm](this.arcSegmentsMin[r],this.arcSegmentsMax[r],this.rAxisTicks,this.axisWilkinsonLoose))[1]-d[0])/this.rAxisTicks;for(p=0;p<d.length;p++)if(d[p]<=this.arcSegmentsMax[r]){var T=this.rAxisTickFormat?this.measureText(this.formatAxisValue(d[p],"rAxis"),this.axisTickFont):this.measureText(d[p].toString(),this.axisTickFont),S=(A+this.rAxisUnit*d[p])%(2*Math.PI),M=this.rAxisTickFormat?this.formatAxisValue(d[p],"rAxis"):d[p],D=e?0:this.axisTickFontSize/2+this.margin;if(this.rAxisTicksMajorShow&&(w>.15||p==parseInt(d.length/2))){u=s*b*Math.cos(S)+this.cx,m=s*b*Math.sin(S)+this.cy,f=a*b*Math.cos(S)+this.cx,y=a*b*Math.sin(S)+this.cy;this.toRender({p:["drawLine","lineR",u,m,f,y,this.rAxisTickColor,this.outlineWidth],b:[this.cx,this.cy],t:"Axes"})}else if(this.rAxisTicksMajorShow&&w>.003){u=v*b*Math.cos(S)+this.cx,m=v*b*Math.sin(S)+this.cy,f=a*b*Math.cos(S)+this.cx,y=a*b*Math.sin(S)+this.cy;this.toRender({p:["drawLine","lineR",u,m,f,y,this.rAxisTickColor,this.outlineWidth],b:[this.cx,this.cy],t:"Axes"})}if(this.rAxisTicksMinorShow&&w>.03)for(var k=1;k<this.rAxisTicks;k++)if(d[p]+C*k<this.arcSegmentsMax[r]){var L=(A+this.rAxisUnit*(d[p]+C*k))%(2*Math.PI);u=v*b*Math.cos(L)+this.cx,m=v*b*Math.sin(L)+this.cy,f=a*b*Math.cos(L)+this.cx,y=a*b*Math.sin(L)+this.cy;this.toRender({p:["drawLine","lineR",u,m,f,y,this.rAxisTickColor,this.outlineWidth],b:[this.cx,this.cy],t:"Axes"})}(w>.15||p==parseInt(d.length/2))&&this.toRender({p:["drawArcText",M,this.cx,this.cy,this.currentRadius*b+D,S-x*T/7,x*T/3.5,this.axisTickFont,this.rAxisTickColor,!1,!1,!0],i:["RadialSeg:"+r+":"+p],t:"Axes"})}}this.currentRadius-="outside"==this.circularScalesAlign?this.axisTickFontSize+this.margin:4*this.margin}else{var I=this.getCircularRAxisTickLength();e="outside"==this.circularScalesAlign;this.currentRadius-=e?3*this.margin:I-this.margin;s=this.currentRadius-((e?3*-this.margin:this.margin)+this.margin*(e?2:0)),v=this.currentRadius-((e?3*-this.margin:this.margin)+1*this.margin),a=this.currentRadius-((e?3*-this.margin:this.margin)+this.margin*(e?0:2));var z="1px "+this.fontName;for(r=0;r<this.arcSegmentsRange.length;r++)for(b=this.arcSegmentsRadius[r],A=this.arcSegmentsDims[r][0]+2*Math.PI,C=((d=this[this.axisAlgorithm](this.arcSegmentsMin[r],this.arcSegmentsMax[r],this.rAxisTicks,this.axisWilkinsonLoose))[1]-d[0])/this.rAxisTicks,p=0;p<d.length;p++)if(d[p]<=this.arcSegmentsMax[r]){S=(A+this.rAxisUnit*d[p])%(2*Math.PI),M=this.rAxisTickFormat?this.formatAxisValue(d[p],"rAxis"):d[p];var N=this.currentRadius*b*Math.cos(S)+this.cx,B=this.currentRadius*b*Math.sin(S)+this.cy;if(this.rAxisTicksMinorShow)for(k=0;k<this.rAxisTicks;k++)if(d[p]+C*k<this.arcSegmentsMax[r]){L=(A+this.rAxisUnit*(d[p]+C*k))%(2*Math.PI),u=v*b*Math.cos(L)+this.cx,m=v*b*Math.sin(L)+this.cy,f=a*b*Math.cos(L)+this.cx,y=a*b*Math.sin(L)+this.cy;this.toRender({p:["drawLine","lineR",u,m,f,y,this.rAxisTickColor,this.outlineWidth],b:[this.cx,this.cy],t:"Axes"})}if(this.rAxisTicksMajorShow){u=s*b*Math.cos(S)+this.cx,m=s*b*Math.sin(S)+this.cy,f=a*b*Math.cos(S)+this.cx,y=a*b*Math.sin(S)+this.cy;this.toRender({p:["drawLine","lineR",u,m,f,y,this.rAxisTickColor,this.outlineWidth],b:[this.cx,this.cy],t:"Axes"})}S>=1.5*Math.PI||S<=Math.PI/2?this.toRender({p:["drawText",M,N,B,this.axisTickFont,this.axisTickColor,e?"right":"left","middle",S],b:[this.cx,this.cy,z],t:"Axes"}):this.toRender({p:["drawText",M,N,B,this.axisTickFont,this.axisTickColor,e?"left":"right","middle",S+Math.PI],b:[this.cx,this.cy,z],t:"Axes"})}this.currentRadius-="outside"==this.circularScalesAlign?I+this.margin:4*this.margin}},this.drawCircularDendrogram=function(){if(this.smpDendrogram&&this.showSmpDendrogram){this.drawCircularElement("drawCircularDendrogram");var t=this,e=this.smpDendrogram,i=this.dendrogramHeight/e.max,s=this.rAxisUnit/2,a=this.arcSegmentsDims[0][0],r=this.arcSegmentsSampleIndices[0].length-1,n=this.arcSegmentsDims[0][1]-this.rAxisUnit-a;n<0&&(n+=2*Math.PI);var o=n/r,h=this.currentRadius-this.dendrogramHeight,l="inside"!=t.smpDendrogramPosition,c=0,d=function(e){if(e.children)for(var r=0;r<e.children.length;r++)d(e.children[r]),e.children[r].children&&(e.children[r].color=e.children[r].children[0].color);else e.color=t.getDendrogramColor(!1,e.name);null!=e.mid&&(e.r=l?t.currentRadius-i*e.depth:h+i*e.depth,e.p=e.mid*o+a+s,e.x=t.cx+e.r*Math.cos(e.p),e.y=t.cy+e.r*Math.sin(e.p))},p=function(e,i){if(e.children){for(var s=e.x,a=e.y,r=e.color,n=e.children[0].p,o=e.children[0].r,d=t.cx+o*Math.cos(e.p),g=t.cy+o*Math.sin(e.p),u=t.toRender({p:["drawLine","lineR",s,a,d,g,r,!1,"butt"],i:["smpDendrogram:"+c+++":"+e.nodeId],t:"smpDendrogram"}),m=0;m<e.children.length;m++){var f=e.children[m].x,y=e.children[m].y,x=e.children[m].p,v=e.children[m].r,b=e.children[m].color;t.toRender({p:["drawLine","arc",t.cx,t.cy,v,v,b,!1,!1,n,x],i:["smpDendrogram:"+c+++":"+e.nodeId],g:u,t:"smpDendrogram"}),n=x,p(e.children[m],u)}if(null!=e.nodeId&&e.children.length>1){var A=e.name?e.name:"",w=e.depth;t.toRender({p:["drawShape","circle",f,y,2*t.margin,2*t.margin,"rgba(0,0,0,0)","rgba(0,0,0,0)"],i:[e.nodeId+"-"+w+"-smpDendrogram-"+A],t:"smpDendrogram"})}}else{s=e.x,a=e.y,r=e.color,o=l?t.currentRadius-t.dendrogramHeight:h+t.dendrogramHeight,d=t.cx+o*Math.cos(e.p),g=t.cy+o*Math.sin(e.p);t.toRender({p:["drawLine","lineR",s,a,d,g,r,!1,"butt"],i:["smpDendrogram:"+c+++":"+e.nodeId],g:i,t:"smpDendrogram"})}};this.toRender({p:["disableGradientTransparencyShadow"],t:"smpDendrogram"}),d(this.smpDendrogram),p(this.smpDendrogram),this.toRender({p:["enableGradientTransparencyShadow"],t:"smpDendrogram"}),this.currentRadius-=this.dendrogramHeight+this.margin}},this.drawCircularOverlayLabel=function(t){if(360==this.circularArc&&this.xAxisShow){var e=(this.overlaysThickness-this.overlayFontSize)/2,i=this.currentRadius*this.arcSegmentsRadius[0];this.toRender({p:["drawArcText",t,this.cx,this.cy,i-e,this.circularEnd,this.circularStart-this.circularEnd,this.overlayFont,this.overlayColor,!1,!1,!0],t:"Labels"})}},this.drawCircularIdeogram=function(){if(this.showIdeogram){this.drawCircularElement("drawCircularIdeogram");for(var t=CanvasXpress.chromosomes[this.ideogram],e=function(t){switch(t){case"gneg":return"rgb(255,255,255)";case"gpos25":return"rgb(181,181,181)";case"gpos50":return"rgb(128,128,128)";case"gpos75":return"rgb(63,63,63)";case"gpos100":return"rgb(0,0,0)";case"acen":return"rgb(255,0,0)";case"stalk":return"rgb(0,0,255)";case"gvar":return"rgb(0,255,0)";default:return"rgb(255,255,0)"}},i=this.circularStart%(2*Math.PI),s=0;s<this.arcSegmentsRange.length;s++){for(var a=this.arcSegments[s].toString(),r=[i,i+this.arcSegmentsRange[this.arcSegmentsRangeMap[a]]*this.rAxisUnit],n=this.currentRadius*this.arcSegmentsRadius[s],o=0;o<t.data[a].length;o++){var h=t.data[a][o],l=(h[1]-h[0])*this.rAxisUnit,c=e(h[3]);this.toRender({p:["drawShape","arc2",this.cx,this.cy,this.overlaysThickness,n,c,c,!1,!1,this.outlineWidth,!1,!1,i,i+l],t:"smpOverlays"}),i+=l}this.toRender({p:["drawShape","arc2",this.cx,this.cy,this.overlaysThickness,n,!1,"black","open",!1,this.outlineWidth,!1,!1,r[0],r[1]],i:["Chr - "+a],t:"smpOverlays"}),i+=this.radians(this.arcSegmentsSeparation)}this.drawCircularOverlayLabel(this.ideogram),this.currentRadius-=this.overlaysThickness+this.margin}},this.getCircularOverlayColor=function(t,e){return"Numeric"==t.type?this.getColorForValue(t.colorBrew,e):t.colors[t.order[e]]},this.getCircularSampleOverlayIndex=function(t){for(var e=0;e<this.smpOverlays.length;e++)if(this.smpOverlays[e]==t)return e;return-1},this.getCircularVariableOverlayIndex=function(t){for(var e=0;e<this.varOverlays.length;e++)if(this.varOverlays[e]==t)return e;return-1},this.drawCircularSampleSegregation=function(){if(this.segregateSamplesBy.length>0&&"sunburst"!=this.circularType&&"chord"!=this.circularType&&"bubble"!=this.circularType&&!this.showIdeogram){this.drawCircularElement("drawCircularSampleSegregation");for(var t=this.getCircularLevelLabelLength(),e=this.meta.data,i=this.circularStart%(2*Math.PI),s=this.segregateSamplesBy[0],a=(this.overlaysThickness-this.overlayFontSize)/2,r=this.rAxisIndex>=0&&360==this.circularArc?.033:0,n=this.getSmpAnnotations(s,this.smpIndices).sort(),o=0;o<n.length;o++){var h=this.arcSegmentsRadius[o],l=this.currentRadius*h,c=n[o],d=(this.arcLengthToRadians(l/2,this.measureText(c,this.overlayFont)),this.getCircularOverlayColor(e.x[s],c)),p=this.rAxisIndex>=0?this.arcSegmentsRange[this.arcSegmentsRangeMap[c]]:this.getSamplesByAnnotationLevel(s,c).length,g=this.rAxisUnit*p,u=this.isHidden(!1,!1,"Property:"+s+":"+n[o]+":x");if(this.toRender({p:["drawShape","arc2",this.cx,this.cy,this.overlaysThickness,l-t,d,d,!1,!1,this.outlineWidth,!1,!1,i-r,i+g+r],i:["SmpOvrSgr-0-"+c],t:"smpOverlays",h:u}),"perpendicular"==this.overlayLevelOrientation){var m=(i-r+g/2)%(2*Math.PI),f=(l+this.margin-t)*Math.cos(m)+this.cx,y=(l+this.margin-t)*Math.sin(m)+this.cy;m>1.5*Math.PI||m<Math.PI/2?this.toRender({p:["drawText",c,f,y,this.overlayFont,this.overlayColor,"left","middle",m],i:["SmpOvrSgrLab-0-"+c],t:"smpOverlays",h:u}):this.toRender({p:["drawText",c,f,y,this.overlayFont,this.overlayColor,"right","middle",m+Math.PI],i:["SmpOvrSgrLab-0-"+c],t:"smpOverlays",h:u})}else if(c.match(/\n/))for(var x=c.split(/\n/),v=this.overlaysThickness/(x.length+2),b=a-v*x.length/2+this.overlayFontSize/2,A=(m=(i-r+g/2)%(2*Math.PI))>.9*Math.PI,w=0;w<x.length;w++)this.toRender({p:["drawArcText",x[w],this.cx,this.cy,l-b,i,g,this.overlayFont,this.overlayColor,!1,!1,A],i:["SmpOvrSgrLab-0-"+c],t:"smpOverlays",h:u}),b+=v;else{A=(m=(i-r+g/2)%(2*Math.PI))>.9*Math.PI;this.toRender({p:["drawArcText",c,this.cx,this.cy,l-a,i,g,this.overlayFont,this.overlayColor,!1,!1,A],i:["SmpOvrSgrLab-0-"+c],t:"smpOverlays",h:u})}i+=g+this.radians(this.arcSegmentsSeparation)}return this.drawCircularOverlayLabel(s),this.currentRadius-=this.overlaysThickness+t,!0}},this.drawCircularSampleOverlay=function(t){if(this.segregateSamplesBy&&this.segregateSamplesBy.length&&t==this.segregateSamplesBy[0])this.drawCircularSampleSegregation();else if(this.showOverlays&&this.smpOverlays.length>0&&"sunburst"!=this.circularType&&"chord"!=this.circularType&&"bubble"!=this.circularType&&!this.showIdeogram&&this.rAxisIndex<0&&(this.data.x&&this.data.x[t]||"-"==t)){this.drawCircularElement("drawCircularSampleOverlay");var e=this.meta.data,i=this.circularStart%(2*Math.PI),s=this.rAxisUnit,a=(this.overlaysThickness,this.overlayFontSize,this.getCircularSampleOverlayIndex(t));if("-"!=t){for(var r=0;r<this.arcSegmentsSampleIndices.length;r++){for(var n=this.arcSegmentsRadius[r],o=this.currentRadius*n,h=0;h<this.arcSegmentsSampleIndices[r].length;h++){var l=this.getMetadataValue(this.arcSegmentsSampleIndices[r][h],"x",t),c=this.getCircularOverlayColor(e.x[t],l);this.toRender({p:["drawShape","arc2",this.cx,this.cy,this.overlaysThickness*n,o,c,c,!1,!1,this.outlineWidth,!1,!1,i,i+s],i:["SmpOvr-"+this.arcSegmentsSampleIndices[r][h]+"-"+a],t:"smpOverlays",h:this.isHidden(!1,!1,"Property:"+t+":"+l+":x")}),i+=s}i+=this.radians(this.arcSegmentsSeparation)}this.drawCircularOverlayLabel(t),this.currentRadius-=this.overlaysThickness}else this.currentRadius-=this.margin}},this.drawCircularVariableOverlay=function(t){if(this.showOverlays&&this.varOverlays.length>0&&"sunburst"!=this.circularType&&"chord"!=this.circularType&&"bubble"!=this.circularType&&this.showIdeogram&&(this.data.z&&this.data.z[t]||"-"==t)){this.drawCircularElement("drawCircularVariableOverlay");var e=this.meta.data,i=this.currentRadius,s=this.getCircularVariableOverlayIndex(t);if("-"!=t){for(var a=0;a<this.circularVariableIndices.length;a++){var r=this.circularVariableIndices[a],n=this.data.y.vars[r],o=this.circularVariableData[n].dat[0],h=this.circularVariableData[n].dat[1],l=this.circularVariableData[n].seg,c=this.arcSegmentsRadius[l],d=this.getMetadataValue(this.circularVariableData[n].idx,"z",t),p=this.getCircularOverlayColor(e.z[t],d);this.toRender({p:["drawShape","arc2",this.cx,this.cy,this.overlaysThickness*c,i*c,p,p,!1,!1,this.outlineWidth,!1,!1,o,h],i:["VarOvr-"+this.circularVariableData[n].idx+"-"+s],t:"varOverlays"})}this.drawCircularOverlayLabel(t),this.currentRadius-=this.overlaysThickness}else this.currentRadius-=this.margin}},this.drawCircularOverlays=function(){var t=this.drawCircularSampleSegregation();if(this.rAxisIndex<0){for(var e=0;e<this.smpOverlays.length;e++){var i=this.smpOverlays[e];this.drawCircularSampleOverlay(i),t=!0}if(this.showIdeogram)for(e=0;e<this.varOverlays.length;e++){i=this.varOverlays[e];this.drawCircularVariableOverlay(i),t=!0}}this.currentRadius-=t?this.margin:0},this.drawCircularSampleLabels=function(){if("sunburst"!=this.circularType&&"chord"!=this.circularType&&"bubble"!=this.circularType){var t="dotted"==this.guides?"dottedLineR":"lineR",e="outside"==this.circularLabelsAlign,i="1px "+this.fontName;if(this.showSampleNames&&this.rAxisIndex<0&&!this.showIdeogram){this.drawCircularElement("drawCircularSampleLabels");var s=this.rAxisUnit;if("circular"==this.smpLabelOrientation){for(var a=this.circularStart,r=0;r<this.arcSegmentsSampleIndices.length;r++){for(var n=this.arcSegmentsRadius[r],o=this.currentRadius*n,h=0;h<this.arcSegmentsSampleIndices[r].length;h+=this.smpLabelInterval){var l=this.data.y.smps[this.arcSegmentsSampleIndices[r][h]],c=this.getSmpColor(l);this.toRender({p:["drawArcText",l,this.cx,this.cy,o,a,s,this.smpLabelFont,c,!1,!1,!0],i:["Smp-"+this.smpIndices[this.arcSegmentsSampleIndices[r][h]]],t:"Labels"}),a+=s*this.smpLabelInterval}a+=this.radians(this.arcSegmentsSeparation)}this.currentRadius-=this.smpLabelFontSize+this.margin}else{a=this.circularStart+s/2;var d=this.getCircularSampleLabelLength();this.currentRadius-=e?0:d-this.margin;for(r=0;r<this.arcSegmentsSampleIndices.length;r++){for(n=this.currentRadius*this.arcSegmentsRadius[r],h=0;h<this.arcSegmentsSampleIndices[r].length;h+=this.smpLabelInterval){var p=this.arcSegmentsSampleIndices[r][h],g=(l=this.data.y.smps[p].length>this.maxTextSize?this.data.y.smps[p].substring(0,this.maxTextSize-3)+"...":this.data.y.smps[p],c=this.getSmpColor(this.data.y.smps[p]),o=a%(2*Math.PI),n*Math.cos(a)+this.cx),u=n*Math.sin(a)+this.cy;if(o>1.5*Math.PI||o<Math.PI/2?this.toRender({p:["drawText",l,g,u,this.smpLabelFont,c,e?"right":"left","middle",a],i:["Smp-"+p],b:[this.cx,this.cy,i],t:"Labels"}):this.toRender({p:["drawText",l,g,u,this.smpLabelFont,c,e?"left":"right","middle",a+Math.PI],i:["Smp-"+p],b:[this.cx,this.cy,i],t:"Labels"}),this.guides||"radar"==this.circularType){g=(n-this.overlaysThickness)*Math.cos(a)+this.cx,u=(n-this.overlaysThickness)*Math.sin(a)+this.cy;this.toRender({p:["drawLine",t,this.cx,this.cy,g,u,this.guidesColor,this.guidesWidth+.7,"butt"],b:[this.cx,this.cy],t:"Labels"})}a+=s*this.smpLabelInterval}a+=this.radians(this.arcSegmentsSeparation)}this.currentRadius-=e?d:this.margin}}else this.showSampleNames&&this.rAxisIndex>=0&&!this.showIdeogram&&this.drawCircularLabels()}},this.drawCircularVariableLabels=function(){this.showIdeogram&&this.showVariableNames&&this.drawCircularLabels(!0)},this.drawCircularLabels=function(t){this.drawCircularElement("drawCircularLabels");var e="outside"==this.circularLabelsAlign,i=t?this.getCircularVariableLabelLength():this.getCircularSampleLabelLength(),s="1px "+this.fontName;this.currentRadius-=(e?this.circularAnchorLength:i-2*this.margin)+this.margin;for(var a=t?this.data.y.vars:this.data.y.smps,r=t?0:this.rAxisUnit/2,n=t?this.circularVariableData:this.circularSampleData,o=t?this.varLabelFont:this.smpLabelFont,h=1/this.maxRadiusFactor,l=0;l<a.length;l++){var c=a[l];if(n[c]){var d=n[c].idx,p=n[c].raw+r,g=n[c].mod+r,u=n[c].seg,m=this.arcSegmentsRadius[u],f=this.currentRadius*m,y=e?this.circularAnchorLength+this.margin:-this.circularAnchorLength,x=(f+y)*Math.cos(p)+this.cx,v=(f+y)*Math.sin(p)+this.cy,b=e?this.circularAnchorLength+this.margin/2:this.margin/2-this.circularAnchorLength,A=(f+b)*Math.cos(p)+this.cx,w=(f+b)*Math.sin(p)+this.cy;if(isNaN(g))this.toRender({p:["drawLine","lineR",x,v,A,w,this.rAxisTickColor,this.outlineWidth],b:[this.cx,this.cy],t:"Labels"});else{var C=e?this.margin:-this.margin,T=e?this.margin/2:-this.margin/2,S=(f+C)*Math.cos(g)+this.cx,M=(f+C)*Math.sin(g)+this.cy,D=(f+T)*Math.cos(g)+this.cx,k=(f+T)*Math.sin(g)+this.cy;this.toRender({p:["drawLine","lineR",x,v,A,w,this.rAxisTickColor,this.outlineWidth],b:[this.cx,this.cy],t:"Labels"}),this.toRender({p:["drawLine","lineR",A,w,S,M,this.rAxisTickColor,this.outlineWidth],b:[this.cx,this.cy],t:"Labels"}),this.toRender({p:["drawLine","lineR",S,M,D,k,this.rAxisTickColor,this.outlineWidth],b:[this.cx,this.cy],t:"Labels"});var L=t?this.getVarColor(c):this.getSmpColor(c),I=f*Math.cos(g)+this.cx,z=f*Math.sin(g)+this.cy,N=this.scaleFont(o,1!=m?h:1);g>1.5*Math.PI||g<Math.PI/2?this.toRender({p:["drawText",c,I,z,N,L,e?"right":"left","middle",g],i:[(t?"Var-":"Smp-")+d],b:[this.cx,this.cy,s],t:"Labels"}):this.toRender({p:["drawText",c,I,z,N,L,e?"left":"right","middle",g+Math.PI],i:[(t?"Var-":"Smp-")+d],b:[this.cx,this.cy,s],t:"Labels"})}}}this.currentRadius-=(e?i-this.margin:this.circularAnchorLength)+this.margin},this.drawCircularAnchors=function(t){if(this.showIdeogram&&this.showVariableNames||!this.showIdeogram&&this.showSampleNames&&this.rAxisIndex>=0){this.drawCircularElement("drawCircularAnchors");for(var e=!(!this.showIdeogram||!this.showVariableNames),i=e?this.data.y.vars:this.data.y.smps,s=e?0:this.rAxisUnit/2,a=e?this.circularVariableData:this.circularSampleData,r="anchors2"==t?"outside"==this.circularAnchorsAlign:"inside"==this.circularAnchorsAlign,n=0;n<i.length;n++){var o=i[n];if(a[o]){a[o].idx,a[o].raw;var h="anchors2"==t?a[o].raw:a[o].mod+s,l=this.rAxisIndex>=0?a[o].dat[0]:a[o].dat[2],c=a[o].seg,d=this.currentRadius*this.arcSegmentsRadius[c];if(isNaN(h)){var p=(d-this.circularAnchorLength)*Math.cos(r?l:h)+this.cx,g=(d-this.circularAnchorLength)*Math.sin(r?l:h)+this.cy;this.toRender({p:["drawShape","sphere",p,g,1,1,this.circularAnchorColor,this.circularAnchorColor],b:[this.cx,this.cy],t:"Anchors"})}else{var u=d*Math.cos(r?h:l)+this.cx,m=d*Math.sin(r?h:l)+this.cy,f=(d-this.circularAnchorLength)*Math.cos(r?l:h)+this.cx,y=(d-this.circularAnchorLength)*Math.sin(r?l:h)+this.cy;this.toRender({p:["drawLine","beziery",u,m,f,y,this.circularAnchorColor,this.outlineWidth],b:[this.cx,this.cy],t:"Anchors"})}}}this.currentRadius-=this.circularAnchorLength+this.margin}},this.drawCircularData=function(){for(var t=0;t<this.ringNumber;t++)if(!(this.rAxisIndex>=0&&t==this.rAxisIndex)){if(this.showIdeogram){if(this.ringsSmpIndices[t].length<1)continue}else if(this.ringsVarIndices[t].length<1)continue;if(this.getKeys(this.ringMap).length>0){for(var e in this.ringMap)if(this.ringMap[e]==t){this.drawCircularDataRing(e);break}}else this.drawCircularDataRing()}},this.drawCircularDataRing=function(t){var e=this.varIndices,i=this.smpIndices,s=t?this.ringMap[t]:0;if(this.showIdeogram){if(this.ringsSmpIndices[s].length<1)return}else if(this.ringsVarIndices[s].length<1)return;var a=this.ringLength[s],r=this.ringGraphType[s];this.showIdeogram?this.setSamplesVisible(this.ringsSmpIndices[s]):this.setVariablesVisible(this.ringsVarIndices[s]),"chord"!=this.circularType&&this.setAxes(!1,!0,"stacked"==r),"heatmap"==r&&(this.circularHeatmap=!0),this.xAxisUnit=a/this.xAxisRange,this.drawCircularDataAxis(a,"heatmap"==r,s),this.drawCircularOtherData(a,r),this.drawCircularDataAxisBox(),this.currentRadius-=a+this.ringSeparation,this.showIdeogram?this.setSamplesVisible(i):this.setVariablesVisible(e),this.varIndices=e,this.smpIndices=i},this.getCircularXAxisValues=function(){for(var t=[],e=0;e<this.xAxisValues.length;e++){var i=parseFloat(this.xAxisValues[e]);i>=this.xAxisMin&&i<=this.xAxisMax&&t.push(i)}return t},this.drawCircularDataAxis=function(t,e,i){if("sunburst"!=this.circularType&&"chord"!=this.circularType&&"bubble"!=this.circularType){var s=Math.min(this.width,this.height)*(1-this.percentAspectRatioPlotArea),a=360==this.circularArc?this.arcSegmentsNumber-1:"radar"==this.circularType||"sunburst"==this.circularType?0:1,r=this.arcSegmentsDims[0][0]%(2*Math.PI),n=this.arcSegmentsDims[a][1]%(2*Math.PI),o=this.currentRadius,h=this.arcSegmentsRadius[0],l=this.axisTickFontSize/2;if(e&&this.rAxisIndex<0)for(var c=this.showIdeogram?this.smpIndices:this.varIndices,d=t/c.length,p="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),g=0;g<c.length;g++){for(var u=this.colors[c[g]%this.colors.length],m=r-n;m<0;)m+=2*Math.PI;o-=d,this.toRender({p:["drawArcText",p[g],this.cx,this.cy,o*h+d/2+l,n,m,this.axisTickFont,u,!1,!1,!0],i:["AxisVal:"+i+":"+g],t:"Axes"})}else{if("sunburst"!=this.circularType&&"chord"!=this.circularType&&"bubble"!=this.circularType){this.setAxisFont("NA",s/2);var f=this.rAxisIndex>=0&&360==this.circularArc?.033:0,y=this.getCircularXAxisValues();for(g=0;g<y.length;g++){var x=o-(this.xAxisMax-y[g])*this.xAxisUnit;for(a=0;a<this.arcSegmentsNumber;a++){p=this.arcSegmentsRadius[a];if(0==a)if(360==this.circularArc||"normal"==this.circularType){for(t=r-n;t<0;)t+=2*Math.PI;this.toRender({p:["drawArcText",y[g],this.cx,this.cy,x*h+l,n,t,this.axisTickFont,this.axisTickColor,!1,!1,!0],i:["AxisVal:"+i+":"+g],t:"Axes"})}else{for(t=this.arcSegmentsDims[0][1]-this.arcSegmentsDims[0][0];t<0;)t+=2*Math.PI;this.toRender({p:["drawArcText",y[g],this.cx,this.cy,x*h+l,r,t,this.axisTickFont,this.axisTickColor,!1,!1,!0],i:["AxisVal:"+i+":"+g],t:"Axes"})}0!=g&&g!=y.length-1&&(360==this.circularArc&&"normal"!=this.circularType?this.toRender({p:["drawShape","circle",this.cx,this.cy,x*p*2,x*p*2,!1,this.xAxisTickColor,"open",!1,this.outlineWidth],t:"Axes"}):this.toRender({p:["drawLine","arc",this.cx,this.cy,x*p,x*p,this.xAxisTickColor,this.outlineWidth,!1,this.arcSegmentsDims[a][0]-f,this.arcSegmentsDims[a][1]+f],t:"Axes"}))}}}this.setAxisFont("NA",s/1.33)}}},this.drawCircularDataAxisBox=function(){if("sunburst"!=this.circularType&&"chord"!=this.circularType&&"bubble"!=this.circularType)if("radar"==this.circularType&&360==this.circularArc){var t=2*this.currentRadius;this.toRender({p:["drawShape","circle",this.cx,this.cy,t,t,!1,this.foreground,"open",!1,this.oulineWidth],t:"Axes"})}else for(var e=this.currentRadius,i=this.rAxisIndex>=0&&360==this.circularArc?.033:0,s=this.getCircularXAxisValues(),a=e-(this.xAxisMax-s[0])*this.xAxisUnit,r=e-(this.xAxisMax-s[s.length-1])*this.xAxisUnit-a,n=0;n<this.arcSegmentsNumber;n++){var o=this.arcSegmentsDims[n][0]-i,h=this.arcSegmentsDims[n][1]+i,l=this.arcSegmentsRadius[n];this.toRender({p:["drawShape","arc2",this.cx,this.cy,r*l,e*l,!1,this.foreground,"open",!1,this.oulineWidth,!1,!1,o,h],t:"Axes"})}},this.drawCircularSunburst=function(){this.drawCircularElement("drawCircularSunburst");var t=this,e=this.ringLength[0],i=function(s,n){if(s.children)for(var o=.002,h=0;h<s.children.length;h++){var l,c,d,p,g,u,m,f,y=s.children[h],x=y.depth*a,v=y.value*t.rAxisUnit;(0==t.hierarchy.length||y.depth<t.hierarchy.length)&&y.name&&(o>=.002&&(d=t.measureText(y.name,t.smpLabelFont)+2*t.margin,p=v*(t.currentRadius-e+x+r),l=t.getFillColor(y.color),ol=t.getOutlineColor(l),u=t.isHidden(!1,y.idx[0]),c=t.toRender({p:["drawShape","arc2",t.cx,t.cy,a,t.currentRadius-e+x+a,l,ol,!1,!1,!1,!1,!1,n,n+v],i:["Sunburst:"+y.tooltip,y.idx],t:"Data",h:u}),p>d?a>t.smpLabelFontSize&&t.toRender({p:["drawArcText",y.name,t.cx,t.cy,t.currentRadius-e+x+r,n,v,t.smpLabelFont,t.smpLabelColor,!1,!1,!0],i:["SunburstLabel:"+y.tooltip,y.idx],g:c,t:"Labels",h:u}):a>d&&p>t.smpLabelFontSize&&(g=(n+v/2)%(2*Math.PI),m=(t.currentRadius-e+x+r-d/2)*Math.cos(g)+t.cx,f=(t.currentRadius-e+x+r-d/2)*Math.sin(g)+t.cy,g>1.5*Math.PI||g<Math.PI/2?t.toRender({p:["drawText",y.name,m,f,t.smpLabelFont,t.smpLabelColor,"center","middle",g],i:["SunburstLabel:"+y.tooltip,y.idx],g:c,b:[t.cx,t.cy],t:"Labels",h:u}):t.toRender({p:["drawText",y.name,m,f,t.smpLabelFont,t.smpLabelColor,"center","middle",g+Math.PI],i:["SunburstLabel:"+y.tooltip,y.idx],g:c,b:[t.cx,t.cy],t:"Labels",h:u})),o=0),y.children&&i(y,n),n+=v,o+=v)}},s=this.circularStart,a=e/Math.max(this.hierarchy.length,1),r=(a+this.smpLabelFontSize)/2;i(this.circularSunburst[0],s)},this.drawCircularChord=function(){this.drawCircularElement("drawCircularChord");for(var t=this.circularStart,e=this.circularChord,i=(this.chordThickness-this.smpLabelFontSize)/2,s=0;s<e.segments.length;s++){e.segments[s].ribbons={};var a=t+e.segments[s].start,r=t+e.segments[s].end,n=e.segments[s].color,o=e.segments[s].name,h=this.toRender({p:["drawShape","arc2",this.cx,this.cy,this.chordThickness,this.currentRadius,this.getFillColor(n),this.getOutlineColor(n),!1,!1,!1,!1,!1,a,r],i:["Chord:"+e.segments[s].idx+":"+e.segments[s].name+" ("+e.segments[s].value+")",[e.segments[s].idx]],t:"Data",h:this.isHidden(e.segments[s].idx)});e.segments[s].ribbons[h]=!0,this.showSampleNames&&(h=this.toRender({p:["drawArcText",o,this.cx,this.cy,this.currentRadius-i,a,r-a,this.smpLabelFont,this.smpLabelColor,!1,!1,!0],i:["ChordLbl"+s],g:h,t:"Labels",h:this.isHidden(e.segments[s].idx)}),e.segments[s].ribbons[h]=!0)}this.currentRadius-=this.chordThickness,"target"!=this.chordColor&&(this.chordColor="source");for(s=0;s<e.chords.length;s++){var l=t+e.chords[s].source.start,c=t+e.chords[s].source.end,d=t+e.chords[s].target.start,p=t+e.chords[s].target.end,g=this.cx+this.currentRadius*Math.cos(l),u=this.cy+this.currentRadius*Math.sin(l),m=this.cx+this.currentRadius*Math.cos(p),f=this.cy+this.currentRadius*Math.sin(p),y=this.cx+this.currentRadius*Math.cos(d),x=this.cy+this.currentRadius*Math.sin(d),v=this.cx+this.currentRadius*Math.cos(c),b=this.cy+this.currentRadius*Math.sin(c),A=(n=e.chords[s][this.chordColor].color,["Connect:"+e.segments[e.chords[s].source.idx].name+" ("+e.segments[e.chords[s].source.idx].value+") -- "+e.segments[e.chords[s].target.idx].name+" ("+e.segments[e.chords[s].target.idx].value+")",[e.chords[s].source.idx,e.chords[s].target.idx]]);h=this.toRender({p:["drawShape","arch",[g,this.cx,m,y,this.cx,v],[u,this.cy,f,x,this.cy,b],[l,c,d,p],[this.currentRadius,this.currentRadius],this.addColorTransparency(n,.67,!0),this.addColorTransparency(this.foreground,.33,!0)],i:A,t:"Data",h:this.isHidden(e.chords[s].source.idx)||this.isHidden(e.chords[s].target.idx)});e.segments[e.chords[s].source.idx].ribbons[h]=!0,e.segments[e.chords[s].target.idx].ribbons[h]=!0}},this.drawCircularBubble=function(){this.drawCircularElement("drawCircularBubble");var t=this.data.bubble.plot.descendants(),e=(Math.max(this.top,this.right),this.data.bubble.plot.diameter/2),i=this.marginLeft+this.marginRight+this.left+this.x-this.right,s=this.marginTop+this.marginBottom+this.bottom+this.y-this.top,a=i>s?this.marginLeft+this.left+(this.x-this.y)/2:this.marginLeft+this.left,r=s>i?this.marginTop+this.top+(this.y-this.x)/2:this.marginTop+this.top;if(this.hierarchy.length>0)for(var n=0;n<t.length;n++){var o=this.meta.data.x;if((u=t[n]).children){var h=a+(m=this.rotatePoint(u.x,u.y,e,e,this.radians(this.circularRotate)))[0],l=r+m[1],c=2*u.r,d=0!=u.depth&&["Bubble"+u.data.id+":"+u.data.name+" ("+u.value+")"],p=this.colorBy&&o&&o.hasOwnProperty(this.colorBy)&&o[this.colorBy].order.hasOwnProperty(u.data.name)?o[this.colorBy].colors[o[this.colorBy].order[u.data.name]]:u.parent&&u.parent.color?u.parent.color:this.bubbleColor,g=this.toRender({p:["drawShape","circle",h,l,c,c,u.depth==this.hierarchy.length?p:this.addColorTransparency(p,.33,!0),this.foreground],i:d,b:[this.cx,this.cy,0,0],t:"Data"});d&&(d[0]+=":Label"),this.measureText(u.data.name,this.smpLabelFont)<c&&(u.depth==this.hierarchy.length?this.toRender({p:["drawText",u.data.name,h,l,this.smpLabelFont,this.smpLabelColor,"center","middle"],i:d,g:g,b:[this.cx,this.cy,0,0],t:"Labels"}):this.toRender({p:["drawText",u.data.name,h,l-(u.r+0*this.smpLabelFontSize),this.smpLabelFont,this.smpLabelColor,"center","middle"],i:d,g:g,b:[this.cx,this.cy,0,0],t:"Labels"})),u.color=p}}else for(n=0;n<t.length;n++){var u;if(!(u=t[n]).children){var m;h=a+(m=this.rotatePoint(u.x,u.y,e,e,this.radians(this.circularRotate)))[0],l=r+m[1],c=2*u.r,d=["Bubble"+u.data.id+":"+u.data.name+" ("+u.value+")"],p=this.colorBy?this.getPropertyValue(this.hierarchyVar,u.data.idx,"colorBy"):this.colors[n%this.colors.length],g=this.toRender({p:["drawShape","circle",h,l,c,c,this.getFillColor(p),this.getOutlineColor(p)],i:d,b:[this.cx,this.cy,0,0],t:"Data"});d[0]+=":Label",this.measureText(u.data.name,this.smpLabelFont)<c&&this.toRender({p:["drawText",u.data.name,h,l,this.smpLabelFont,this.smpLabelColor,"center","middle"],i:d,g:g,b:[this.cx,this.cy,0,0],t:"Labels"})}}},this.drawCircularOtherData=function(t,e,i){this.drawCircularElement("drawCircularOtherData");var s=this,a=function(){var t=c.length,e=s.margin;return t>=200?e/1.4:t>=100?e/1:t>=50?1*e:t>=25?1.5*e:2*e},r=function(t,e){return s.showIdeogram?s.getDataAtPos(t,e):s.getDataAtPos(e,t)},n=function(t,e){return s.showIdeogram?[t,e]:[e,t]},o=this.currentRadius,h=this.showIdeogram?this.circularVariableData:this.circularSampleData,l=this.showIdeogram?this.circularVariableIndices:this.circularSampleIndices,c=this.showIdeogram?this.data.y.vars:this.data.y.smps,d=this.showIdeogram?this.data.y.smps:this.data.y.vars,p=this.showIdeogram?this.smpIndices:this.varIndices,g=this.showIdeogram?this.varIndices:this.smpIndices,u=this.getObjectArray(g);switch(e){case"bar":for(var m=this.xAxisMin<0?Math.abs(this.xAxisMin)*this.xAxisUnit:0,f=0;f<l.length;f++){var y=l[f];if(u.hasOwnProperty(y))for(var x=h[L=c[y]].dat[0],v=(h[L].dat[1]-h[L].dat[0])/p.length,b=h[L].seg,A=this.arcSegmentsRadius[b],w=0;w<p.length;w++){var C=(r(y,z=p[w])-this.xAxisMin)*this.xAxisUnit*A,T=this.colors[(z-(this.rAxisIndex>=0?1:0))%this.colors.length],S=this.addColorTransparency(T,.67,!0),M=(this.currentRadius+m+1)*A-(t*A-C),D=x+v;C<0?this.toRender({p:["drawShape","arc2",this.cx,this.cy,-C,M-C,S,T,!1,!1,!1,!1,!1,x,D],i:n(y,z),t:"Data",h:this.isHidden(z,y)}):this.toRender({p:["drawShape","arc2",this.cx,this.cy,C,M,S,T,!1,!1,!1,!1,!1,x,D],i:n(y,z),t:"Data",h:this.isHidden(z,y)}),x+=v}}break;case"dot":var k=a();for(f=0;f<l.length;f++){y=l[f];if(u.hasOwnProperty(y)){var L=c[y],I=this.rAxisIndex>=0?h[L].dat[0]:h[L].dat[2];for(b=h[L].seg,A=this.arcSegmentsRadius[b],w=0;w<p.length;w++){var z=p[w],N=(C=(this.xAxisMax-r(y,z))*(this.xAxisUnit*A),T=this.colors[(z-(this.rAxisIndex>=0?1:0))%this.colors.length],S=this.addColorTransparency(T,.67,!0),this.cx+(o*A-C)*Math.cos(I)),B=this.cy+(o*A-C)*Math.sin(I);this.toRender({p:["drawShape","circle",N,B,k,k,S,T],i:n(y,z),b:[this.cx,this.cy],t:"Data",h:this.isHidden(z,y)})}}}break;case"heatmap":for(M=t/p.length,f=0;f<l.length;f++){y=l[f];if(u.hasOwnProperty(y)){x=h[L=c[y]].dat[0],D=h[L].dat[1],b=h[L].seg,A=this.arcSegmentsRadius[b];var P=0;for(w=0;w<p.length;w++){C=r(y,z=p[w]),S=isNaN(C)?this.missingDataColor:this.getColorForValue(!1,C),T=this.addColorTransparency(S,.67,!0);this.toRender({p:["drawShape","arc2",this.cx,this.cy,M*A,o*A-P,S,T,!1,!1,!1,!1,!1,x,D],i:n(y,z),t:"Data",h:this.isHidden(z,y)}),P+=M*A}}}break;case"stacked":for(f=0;f<l.length;f++){y=l[f];if(u.hasOwnProperty(y))for(x=h[L=c[y]].dat[0],D=h[L].dat[1],b=h[L].seg,A=this.arcSegmentsRadius[b],P=0,w=0;w<p.length;w++){C=r(y,z=p[w]),T=this.colors[(z-(this.rAxisIndex>=0?1:0))%this.colors.length],S=this.addColorTransparency(T,.67,!0),M=C*this.xAxisUnit*A;this.toRender({p:["drawShape","arc2",this.cx,this.cy,M,(o-t)*A+(M+P)+1,S,T,!1,!1,!1,!1,!1,x,D],i:n(y,z),t:"Data",h:this.isHidden(z,y)}),P+=M}}break;case"area":case"line":var R=[],O=o-t+2;for(k=a(),w=0;w<p.length;w++){R[w]={x:[],y:[],c:this.foreground,a:[],s:[],m:[],w:[],l:[]};for(z=p[w],S=this.colors[(z-(this.rAxisIndex>=0?1:0))%this.colors.length],f=0;f<l.length;f++){y=l[f];if(u.hasOwnProperty(y)){L=c[y],I=this.rAxisIndex>=0?h[L].dat[0]:h[L].dat[2],b=h[L].seg,A=this.arcSegmentsRadius[b],C=(this.xAxisMax-r(y,z))*(this.xAxisUnit*A);if(R[w].x.push(this.cx+(o*A-C)*Math.cos(I)),R[w].y.push(this.cy+(o*A-C)*Math.sin(I)),R[w].c=S,R[w].a.push(n(y,z)),R[w].s.push(h[L].seg),R[w].m.push(I),R[w].w.push(A),R[w].l.push(d[g[z]]),"line"==e){var X=R[w].l.length-1;this.toRender({p:["drawShape","circle",R[w].x[X],R[w].y[X],k,k,S,S],i:n(y,z),b:[this.cx,this.cy],t:"Data",h:this.isHidden(z,y)})}}}}if("line"==e)for(w=0;w<p.length;w++)for(var F=null,_=(H=R[w]).s[0],E=1;E<R[w].x.length;E++){if(H.s[E]==_){var V=this.toRender({p:["drawLine","line",H.x[E-1],H.y[E-1],H.x[E],H.y[E],H.c],i:["Line:"+H.l[E]+":"+p[w]],g:F,b:[this.cx,this.cy,this.cx,this.cy],t:"Data",h:this.isHidden(p[w],H.l[E])});E!=R[w].x.length-1||360!=this.circularArc||this.segregateSamplesBy.length||this.toRender({p:["drawLine","line",H.x[E],H.y[E],H.x[0],H.y[0],H.c],i:["Line:"+H.l[0]+":"+p[w]],g:F,b:[this.cx,this.cy,this.cx,this.cy],t:"Data",h:this.isHidden(p[w],H.l[0])})}else F=null;_=H.s[E],F||(F=V)}else if("area"==e)for(w=0;w<p.length;w++){_=(H=R[w]).s[0];var H,G=[[],[]],q=[[],[]];for(E=0;E<R[w].x.length;E++)if(H.s[E]==_)N=this.cx+O*H.w[E]*Math.cos(H.m[E]),B=this.cy+O*H.w[E]*Math.sin(H.m[E]),q[0].unshift(N),q[1].unshift(B),G[0].push(H.x[E]),G[1].push(H.y[E]);else{if(360!=this.circularArc||this.segregateSamplesBy.length)for(;q[0].length>0;)G[0].push(q[0].shift()),G[1].push(q[1].shift());this.toRender({p:["drawShape","path",G[0],G[1],!1,!1,this.addColorTransparency(H.c,.25,!0),H.c],i:["Area:"+H.l[E]+":"+p[w]],b:[this.cx,this.cy],t:"Data",h:this.isHidden(p[w],H.l[E])}),_=H.s[E],N=this.cx+O*H.w[E]*Math.cos(H.m[E]),B=this.cy+O*H.w[E]*Math.sin(H.m[E]),q[0].unshift(N),q[1].unshift(B),(G=[[],[]])[0].push(H.x[E]),G[1].push(H.y[E])}if(360!=this.circularArc||this.segregateSamplesBy.length)for(;q[0].length>0;)G[0].push(q[0].shift()),G[1].push(q[1].shift());this.toRender({p:["drawShape","path",G[0],G[1],!1,!1,this.addColorTransparency(H.c,.25,!0),H.c],i:["Area:"+H.l[E-1]+":"+p[w]],b:[this.cx,this.cy],t:"Data",h:this.isHidden(p[w],H.l[E-1])})}}},this.getCircularCoordinates=function(t){var e=this,i=this.rAxisUnit,s=this.currentRadius;if(this.rAxisIndex<0&&!this.showIdeogram){var a=this.circularSampleData[t[2==t.length?0:1]],r=this.circularSampleData[t[2==t.length?1:2]],n=!(!a||!a.dat)&&a.dat[0],o=!(!r||!r.dat)&&r.dat[0];if(n&&o){var h=this.arcSegmentsRadius[a.seg],l=this.arcSegmentsRadius[r.seg];return[this.cx+s*Math.cos(n),this.cy+s*Math.sin(n),this.cx+s*Math.cos(o+i),this.cy+s*Math.sin(o+i),this.cx+s*Math.cos(o),this.cy+s*Math.sin(o),this.cx+s*Math.cos(n+i),this.cy+s*Math.sin(n+i),n,n+i,o,o+i,h,l]}}else if(this.segregateSamplesBy.length>0&&this.data.x[this.segregateSamplesBy[0]]||this.showIdeogram){var c=function(t){var i=e.arcSegmentsRangeMap[t[1]],s=e.arcSegmentsRangeMap[t[3]];if(null!=i&&null!=s){var a,r,n=e.rAxisZero&&e.arcSegmentsMin[i]<0?e.arcSegmentsMin[i]:0,o=e.rAxisZero&&e.arcSegmentsMin[s]<0?e.arcSegmentsMin[s]:0;if(t[2]>=e.arcSegmentsMin[i]&&t[2]<=e.arcSegmentsMax[i]&&t[4]>=e.arcSegmentsMin[s]&&t[4]<=e.arcSegmentsMax[s])return a=e.arcSegmentsDims[i][0]+(t[2]+n-e.arcSegmentsMin[i])*e.rAxisUnit,r=e.arcSegmentsDims[s][0]+(t[4]+o-e.arcSegmentsMin[s])*e.rAxisUnit,null!=t[5]||null!=t[6]?[a,r,e.arcSegmentsDims[i][0]+(Math.min(t[2]+(t[5]||0),e.arcSegmentsMax[i])+n-e.arcSegmentsMin[i])*e.rAxisUnit,e.arcSegmentsDims[s][0]+(Math.min(t[4]+(t[6]||0),e.arcSegmentsMax[s])+o-e.arcSegmentsMin[s])*e.rAxisUnit]:[a,r]}return!1}(t);if(c)return c.length>2?(this.showIdeogram?(h=this.arcSegmentsRadius[this.arcSegmentsRangeMap[t[1]]],l=this.arcSegmentsRadius[this.arcSegmentsRangeMap[t[3]]]):(h=1,l=1),[this.cx+s*h*Math.cos(c[0]),this.cy+s*h*Math.sin(c[0]),this.cx+s*l*Math.cos(c[3]),this.cy+s*l*Math.sin(c[3]),this.cx+s*l*Math.cos(c[1]),this.cy+s*l*Math.sin(c[1]),this.cx+s*h*Math.cos(c[2]),this.cy+s*h*Math.sin(c[2]),c[0],c[2],c[1],c[3],l,h]):[this.cx+s*Math.cos(c[0]),this.cy+s*Math.sin(c[0]),this.cx+s*Math.cos(c[1]),this.cy+s*Math.sin(c[1])];alert("Oooops! Something went wrong in the connection between "+t[1]+" and"+t[3]+"!")}return!1},this.drawCircularConnections=function(){if(this.currentRadius+=this.margin,this.drawCircularElement("drawCircularConnections"),this.showCircularConnections&&this.connections){this.rAxisUnit;for(var t=0;t<this.connections.length;t++){var e=this.getCircularCoordinates(this.connections[t]),i=(r=this.connections[t]).length>3?r[1]+"["+r[2]+"] "+r[5]+" - "+r[3]+"["+r[4]+"] "+r[6]:2==r.length?r[0]+" - "+r[1]:r[1]+" - "+r[2],s=this.addColorTransparency(2==this.connections[t].length?this.colors[t%this.colors.length]:this.connections[t][0],this.circularConnectionsTransparency,!0),a=this.addColorTransparency(this.foreground,.33,!0);e.length>4?this.toRender({p:["drawShape","arch",[e[0],this.cx,e[2],e[4],this.cx,e[6]],[e[1],this.cy,e[3],e[5],this.cy,e[7]],[e[8],e[9],e[10],e[11]],[this.currentRadius*e[12],this.currentRadius*e[13]],s,a,"solid"],i:["Connect:"+i],t:"Connections"}):this.toRender({p:["drawLine","arch",[e[0],this.cx,e[2]],[e[1],this.cy,e[3]],!1,!1,s,a],i:["Connect:"+i],t:"Connections"})}}var r},this.drawNetworkColorIndicator=function(){if(this.circularHeatmap){var t=this.margin+2*this.legendTitleMargin+this.getFontPt(this.legendTitleFont);this.drawColorIndicator(t,this.top,this.meta.def.colorBrew,"Color Indicator",!0)}},this.checkCircularSegregationOverlays=function(){if(this.validateSegregation(),this.validateOverlays(),this.segregateSamplesBy.length>0&&this.smpOverlays.includes(this.segregateSamplesBy[0])){for(var t=[],e=0;e<this.smpOverlays.length;e++)this.smpOverlays[e]!=this.segregateSamplesBy[0]&&t.push(this.smpOverlays[e]);this.smpOverlays=t}if(this.segregateSamplesByTemp=this.cloneObject(this.segregateSamplesBy),"sunburst"!=this.circularType&&"chord"!=this.circularType&&"bubble"!=this.circularType||(this.segregateSamplesBy=[]),this.smpOverlayProperties)for(var i in this.smpOverlayProperties)this.smpOverlayProperties[i].hasOwnProperty("scheme")&&this.modifyColorProperties(this.smpOverlayProperties[i].scheme,i,"x",!0)},this.checkCircularClustering=function(){this.rAxis||(this.samplesClustered&&this.clusterSamples(!1,!0),this.samplesKmeaned&&this.kmeansSamples(!1,!0),this.segregateSamplesBy.length>0&&this.meta.tree&&this.meta.tree.samples&&this.showSmpDendrogram?(this.segregateSamplesBy[0]&&!this.smpOverlays.includes(this.segregateSamplesBy[0])&&(this.smpOverlays.unshift(this.segregateSamplesBy[0]),this.tmpSegregateSamplesBy=this.segregateSamplesBy,this.tmpShowSmpOverlaysLegend=this.showSmpOverlaysLegend),this.segregateSamplesBy=[],this.showSmpOverlaysLegend=!0):this.tmpSegregateSamplesBy&&!this.showSmpDendrogram&&(this.segregateSamplesBy=this.tmpSegregateSamplesBy))},this.setCircularTempParameters=function(){this.arcSegmentsSeparationTemp=this.arcSegmentsSeparation,this.circularCenterProportionTemp=this.circularCenterProportion,this.circularArcTemp=this.circularArc,this.outlineWidthTemp=this.outlineWidth,this.lineThicknessTemp=this.lineThickness,this.outlineWidth=.5,this.lineThickness=.5,"normal"!=this.circularType&&("radar"==this.circularType||"bubble"==this.circularType?(this.circularCenterProportion=0,this.arcSegmentsSeparation=0,"bubble"==this.circularType&&(this.circularArc=360)):"chord"==this.circularType?(this.arcSegmentsSeparation=3,this.circularCenterProportion=0):"sunburst"==this.circularType&&(this.arcSegmentsSeparation=0))},this.resetCircularTempParameters=function(){this.arcSegmentsSeparation=this.arcSegmentsSeparationTemp,this.circularCenterProportion=this.circularCenterProportionTemp,this.circularArc=this.circularArcTemp,this.segregateSamplesBy=this.segregateSamplesByTemp,this.outlineWidth=this.outlineWidthTemp,this.lineThickness=this.lineThicknessTemp,this.outlineWidth=this.outlineWidthTemp,this.lineThickness=this.lineThicknessTemp},this.setCircularAttributes=function(){this.checkCircularClustering(),this.checkCircularSegregationOverlays(),this.setCircularTempParameters(),this.setCircularXYDimensions(),this.setCircularFonts(),this.setDendrograms(),this.validatePropertyValues()},this.drawCircularPlot=function(){this.setCircularArcSegments(),this.setCircularRings(),this.setLegends(),this.renderCircularPlot(),this.drawCircularConnections(),this.drawLegend(),this.drawNetworkColorIndicator(),this.drawTitle()},this.resetCircularAttributes=function(){this.resetCircularTempParameters()},this.initializeCircular=function(){this.setCircularAttributes(),this.drawCircularPlot(),this.resetCircularAttributes()},this.initializeCircular()},CanvasXpress.prototype.Map=function(){this.topojsonFeature=function(t,e){var i=function(t){return t};function s(t,e){var s=e.id,a=e.bbox,r=null==e.properties?{}:e.properties,n=function(t,e){var s=function(t){if(null==t)return i;var e,s,a=t.scale[0],r=t.scale[1],n=t.translate[0],o=t.translate[1];return function(t,i){i||(e=s=0);var h=2,l=t.length,c=new Array(l);for(c[0]=(e+=t[0])*a+n,c[1]=(s+=t[1])*r+o;h<l;)c[h]=t[h],++h;return c}}(t.transform),a=t.arcs;function r(t,e){e.length&&e.pop();for(var i=a[t<0?~t:t],r=0,n=i.length;r<n;++r)e.push(s(i[r],r));t<0&&function(t,e){for(var i,s=t.length,a=s-e;a<--s;)i=t[a],t[a++]=t[s],t[s]=i}(e,n)}function n(t){return s(t)}function o(t){for(var e=[],i=0,s=t.length;i<s;++i)r(t[i],e);return e.length<2&&e.push(e[0]),e}function h(t){for(var e=o(t);e.length<4;)e.push(e[0]);return e}function l(t){return t.map(h)}return function t(e){var i,s=e.type;switch(s){case"GeometryCollection":return{type:s,geometries:e.geometries.map(t)};case"Point":i=n(e.coordinates);break;case"MultiPoint":i=e.coordinates.map(n);break;case"LineString":i=o(e.arcs);break;case"MultiLineString":i=e.arcs.map(o);break;case"Polygon":i=l(e.arcs);break;case"MultiPolygon":i=e.arcs.map(l);break;default:return null}return{type:s,coordinates:i}}(e)}(t,e);return null==s&&null==a?{type:"Feature",properties:r,geometry:n}:null==a?{type:"Feature",id:s,properties:r,geometry:n}:{type:"Feature",id:s,bbox:a,properties:r,geometry:n}}return"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map((function(e){return s(t,e)}))}:s(t,e)},this.graticule=function(){var t,e,i,s,a,r,n,o,h,l,c,d,p=10,g=p,u=90,m=360,f=2.5,y=1e-6;function x(t,e,i){t=+t,e=+e,i=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+i;for(var s=-1,a=0|Math.max(0,Math.ceil((e-t)/i)),r=new Array(a);++s<a;)r[s]=t+s*i;return r}function v(t,e,i){var s=x(t,e-y,i).concat(e);return function(t){return s.map((function(e){return[t,e]}))}}function b(t,e,i){var s=x(t,e-y,i).concat(e);return function(t){return s.map((function(e){return[e,t]}))}}function A(){return{type:"MultiLineString",coordinates:w()}}function w(){return x(Math.ceil(s/u)*u,i,u).map(c).concat(x(Math.ceil(o/m)*m,n,m).map(d)).concat(x(Math.ceil(e/p)*p,t,p).filter((function(t){return Math.abs(t%u)>y})).map(h)).concat(x(Math.ceil(r/g)*g,a,g).filter((function(t){return Math.abs(t%m)>y})).map(l))}return A.lines=function(){return w().map((function(t){return{type:"LineString",coordinates:t}}))},A.outline=function(){return{type:"Polygon",coordinates:[c(s).concat(d(n).slice(1),c(i).reverse().slice(1),d(o).reverse().slice(1))]}},A.extent=function(t){return arguments.length?A.extentMajor(t).extentMinor(t):A.extentMinor()},A.extentMajor=function(t){return arguments.length?(s=+t[0][0],i=+t[1][0],o=+t[0][1],n=+t[1][1],s>i&&(t=s,s=i,i=t),o>n&&(t=o,o=n,n=t),A.precision(f)):[[s,o],[i,n]]},A.extentMinor=function(i){return arguments.length?(e=+i[0][0],t=+i[1][0],r=+i[0][1],a=+i[1][1],e>t&&(i=e,e=t,t=i),r>a&&(i=r,r=a,a=i),A.precision(f)):[[e,r],[t,a]]},A.step=function(t){return arguments.length?A.stepMajor(t).stepMinor(t):A.stepMinor()},A.stepMajor=function(t){return arguments.length?(u=+t[0],m=+t[1],A):[u,m]},A.stepMinor=function(t){return arguments.length?(p=+t[0],g=+t[1],A):[p,g]},A.precision=function(p){return arguments.length?(f=+p,h=v(r,a,10),l=b(e,t,f),c=v(o,n,10),d=b(s,i,f),A):f},A.extentMajor([[-180,-90+y],[180,90-y]]).extentMinor([[-180,-80-y],[180,80+y]]),A()},this.configureMapFeatures=function(){if(this.mapConfigFeatures)for(var t=this.meta.map.geojson.features,e=0;e<t.length;e++){var i=t[e];if(this.mapConfigFeatures.hasOwnProperty(e)&&this.mapConfigFeatures[e].translate&&this.mapConfigFeatures[e].scale&&i.geometry){var s=i.geometry.coordinates,a=i.geometry.type,r=[Number(this.mapConfigFeatures[e].translate[0]),Number(this.mapConfigFeatures[e].translate[1])],n=[Number(this.mapConfigFeatures[e].scale[0]),Number(this.mapConfigFeatures[e].scale[1])];switch(a){case"Polygon":for(var o=0;o<s[0].length-1;o++)if(!isNaN(s[0][o][0])&&!isNaN(s[0][o][1])){var h=s[0][o][0]+r[0]>90?(s[0][o][0]+r[0]-180)*n[0]:s[0][o][0]+r[0]<-90?(s[0][o][0]+r[0]+180)*n[0]:(s[0][o][0]+r[0])*n[0],l=s[0][o][1]+r[1]>180?(s[0][o][1]+r[1]-360)*n[1]:s[0][o][1]+r[1]<-180?(s[0][o][1]+r[1]+360)*n[1]:(s[0][o][1]+r[1])*n[1];s[0][o][0]=h,s[0][o][1]=l}break;case"MultiPolygon":for(o=0;o<s.length;o++)for(var c=0;c<s[o].length;c++)for(var d=0;d<s[o][c].length-1;d++)if(!isNaN(s[o][c][d][0])&&!isNaN(s[o][c][d][1])){h=(s[o][c][d][0]+r[0])*n[0],l=s[o][c][d][1]+r[1]>180?NaN:(s[o][c][d][1]+r[1])*n[1];s[o][c][d][0]=h,s[o][c][d][1]=l}}}}},this.setMapLayerCoordinates=function(){for(var t=this.meta.map.geojson.features,e=Number.MAX_VALUE,i=Number.MAX_VALUE,s=-Number.MAX_VALUE,a=-Number.MAX_VALUE,r=this.layoutComb?this.layoutWidth:this.width,n=this.layoutComb?this.layoutHeight:this.height,o=0;o<t.length;o++){var h=t[o];if(!h.hidden&&h.geometry){var l=h.geometry.coordinates,c=h.geometry.type,d=h.coordinates=[];switch(c){case"Polygon":if(d[0]=[],d[0][0]=[],"orthographic"!=this.mapProjection)for(var p=0;p<l[0].length-1;p++)isNaN(l[0][p][0])||isNaN(l[0][p][1])||(d[0][0].push([l[0][p][1],l[0][p][0]]),e=Math.min(e,l[0][p][0]),i=Math.min(i,l[0][p][1]),s=Math.max(s,l[0][p][0]),a=Math.max(a,l[0][p][1]));break;case"MultiPolygon":if("orthographic"!=this.mapProjection)for(p=0;p<l.length;p++){d[p]=[];for(var g=0;g<l[p].length;g++){d[p][g]=[];for(var u=0;u<l[p][g].length-1;u++)isNaN(l[p][g][u][0])||isNaN(l[p][g][u][1])||(d[p][g].push([l[p][g][u][1],l[p][g][u][0]]),e=Math.min(e,l[p][g][u][0]),i=Math.min(i,l[p][g][u][1]),s=Math.max(s,l[p][g][u][0]),a=Math.max(a,l[p][g][u][1]))}}}}}"orthographic"==this.mapProjection&&(e=-180,i=-90,s=180,a=90);var m=this.mapCoordinateToPoint([a,e],!0),f=this.mapCoordinateToPoint([i,s],!0),y=512*Math.min(r/(f[0]-m[0]),n/(f[1]-m[1])),x=Number.parseFloat(Math.log(y/256)/Math.LN2).toFixed(1)-.2,v=this.mapCoordinateToPoint([a,s],!0),b=this.mapCoordinateToPoint([i,e],!0),A=this.mapPointToCoordinate([(v[0]+b[0])/2,(v[1]+b[1])/2]);this.meta.map.geojson.geometry={minX:e,minY:i,maxX:s,maxY:a},this.meta.map.geojson.global={minX:e,minY:i,maxX:s,maxY:a,center:A,scale:y,zoom:x}},this.setMapZoomCenter=function(t){if("Map"==this.graphType&&this.meta.map){var e=this.meta.map.geojson,i=e.geometry,s=this.layoutComb?this.layoutWidth:this.width,a=this.layoutComb?this.layoutHeight:this.height;if(!i.zoom||!i.center||t){e.zoom=1,e.center=[0,0],e.translate=[0,0],i.zoom=1,i.center=[0,0];var r=[i.maxY,i.minX],n=[i.minY,i.maxX],o=[i.maxY,i.maxX],h=[i.minY,i.minX],l=this.mapCoordinateToPoint(r,!0),c=this.mapCoordinateToPoint(n,!0),d=512*Math.min(s/(c[0]-l[0]),a/(c[1]-l[1]));i.zoom=Number.parseFloat(Math.log(d/256)/Math.LN2).toFixed(1)-.2;var p=this.mapCoordinateToPoint(o,!0),g=this.mapCoordinateToPoint(h,!0);i.center=this.mapPointToCoordinate([(p[0]+g[0])/2,(p[1]+g[1])/2],!0)}i.initial&&!t||(i.initial={zoom:this.cloneObject(i.zoom),center:this.cloneObject(i.center),canvas:this.cloneObject([s,a])})}},this.setMapTranslate=function(){if("Map"==this.graphType&&this.meta.map&&"orthographic"==this.mapProjection){var t=this.meta.map.geojson.translate[0],e=this.meta.map.geojson.translate[1];this.meta.map.geojson.translate=[0,0];var i=this.layoutComb?this.layoutWidth:this.width,s=this.layoutComb?this.layoutHeight:this.height,a=this.mapCoordinateToPoint([0,0],!0);isNaN(a[0])&&isNaN(a[1])?this.meta.map.geojson.translate=[t,e]:this.meta.map.geojson.translate=[Math.round(a[0]-i/2),Math.round(a[1]-s/2)]}},this.setMapLayerBounds=function(){var t=this.meta.map.geojson,e=this.layoutComb?this.layoutWidth:this.width,i=this.layoutComb?this.layoutHeight:this.height;t.zoom=this.mapConfig&&this.mapConfig.zoom&&!t.isZoomed?this.mapConfig.zoom:t.geometry.zoom*this.zoom;var s=this.mapConfig&&this.mapConfig.center&&!t.isZoomed?this.mapConfig.center:[t.geometry.center[1],t.geometry.center[0]];"orthographic"==this.mapProjection&&(this.panningX||this.panningY)&&this.geoProjection&&((s=this.geoProjection.rotate())[0]+=this.panningX*this.rotationSensitivity/e/4,s[1]-=this.panningY*this.rotationSensitivity/i/4,this.panningX=0,this.panningY=0,this.geoProjection.rotate(s));var a=this.mapCoordinateToPoint(s),r="orthographic"==this.mapProjection?[Math.round(a[0]+t.center[0]-e/2),Math.round(a[1]+t.center[1]-i/2)]:[Math.round(a[0]+t.center[0]-(e/2+this.panningX)),Math.round(a[1]+t.center[1]-(i/2+this.panningY))];t.center=r;var n=.1*e,o=.1*i;t.bounds={min:[Math.round(-n),Math.round(-o)],max:[Math.round(e+n),Math.round(i+o)]},this.setMapTranslate()},this.isMapSizeChanged=function(){if("Map"==this.graphType&&this.meta.map){var t=this.layoutComb?this.layoutWidth:this.width,e=this.layoutComb?this.layoutHeight:this.height,i=this.meta.map.geojson.geometry;if(i.initial){var s=i.initial.canvas;return t!=s[0]||e!=s[1]}return!0}},this.mapCoordinateToPoint=function(t,e){var i=t[1]*this.mapRadian,s=t[0]*this.mapRadian,a=256*Math.pow(2,this.meta.map.geojson.zoom||1),r=this.meta.map.geojson.translate||[0,0],n=this.meta.map.geojson.center||[0,0];if("albers"==this.mapProjection){var o=this.mapMeanPhi*(i-this.mapCentralMeridianRad);i=(h=Math.sqrt(this.mapC-2*this.mapMeanPhi*Math.sin(s))/this.mapMeanPhi)*Math.sin(o),s=this.mapP0-h*Math.cos(o)}else if("orthographic"==this.mapProjection){var h;if(this.geoPath)return(h=this.geoPath({type:"Point",coordinates:[t[1],t[0]]})).length?[h[0][0][0],h[0][0][1]]:[NaN,NaN];if(!e&&Math.cos(s)*Math.cos(i)<=0)return[NaN,NaN];i=Math.cos(s)*Math.sin(i),s=Math.sin(s)}else{var l=85*this.mapRadian,c=Math.max(Math.min(l,s),-l),d=Math.sin(c);s=Math.log((1+d)/(1-d))/2}return i=a*(this.mapUnits*i+.5),s=a*(-this.mapUnits*s+.5),"orthographic"==this.mapProjection?[i-r[0],s-r[1]]:[i-n[0],s-n[1]]},this.mapPointToCoordinate=function(t){var e=t[0],i=t[1],s=256*Math.pow(2,this.meta.map.geojson.zoom||1),a=function(t){return t>1?Math.PI/2:t<-1?-Math.PI/2:Math.asin(t)};if(e=(e/s-.5)/this.mapUnits,i=(i/s-.5)/-this.mapUnits,"albers"==this.mapProjection){var r=Math.atan(e/(this.mapP0-i));t=Math.sqrt(e*i+Math.pow(this.mapP0-i,2));e=(this.mapCentralMeridianRad+r/this.mapMeanPhi)*this.mapDegrees,i=Math.asin((this.mapC-t*t*this.mapMeanPhi*this.mapMeanPhi)/(2*this.mapMeanPhi))*this.mapDegrees}else if("orthographic"==this.mapProjection){var n=Math.sqrt(e*e+i*i),o=a(n),h=Math.sin(o),l=Math.cos(o);e=Math.atan2(e*h,n*l)*this.mapDegrees,i=a(n&&i*h/n)*this.mapDegrees}else e*=this.mapDegrees,i=(2*Math.atan(Math.exp(i))-Math.PI/2)*this.mapDegrees;return[e,i]},this.canvasPointToCoordinate=function(t,e){var i=this.layoutComb?this.layoutParams[0].width:this.width,s=this.layoutComb?this.layoutParams[0].height:this.height,a=this.meta.map.geojson,r=this.mapConfig&&this.mapConfig.center&&!a.isZoomed?this.mapConfig.center:a.geometry.center,n=a.zoom,o=Math.pow(2,n);t=i/2+(t-i/2)*(1-1/o),e=s/2+(e-s/2)*(1-1/o);var h="orthographic"==this.mapProjection?this.mapPointToCoordinate([t+a.translate[0],e+a.translate[1]]):this.mapPointToCoordinate([t+a.center[0],e+a.center[1]]);return"orthographic"==this.mapProjection?[Number(h[1]+Number(r[1])),Number(h[0]+Number(r[0]))]:h},this.setMapLayerPoints=function(t,e){for(var i=this.meta.map.geojson.features,s=0;s<i.length;s++)if(!i[s].hidden){var a=i[s].coordinates;if(a)for(var r=i[s].parts=[],n=0;n<a.length;n++){r[n]=[];for(var o=0;o<a[n].length;o++){r[n][o]=[];for(var h=0;h<a[n][o].length;h++){var l=a[n][o][h],c="orthographic"==this.mapProjection?this.mapCoordinateToPoint(this.mapRotate(l)):this.mapCoordinateToPoint(l);r[n][o].push([Math.round(c[0]),Math.round(c[1])])}}}}},this.mapMidPoint=function(t,e,i,s){var a=this.radians(s-e);t=this.radians(t),i=this.radians(i),e=this.radians(e);var r=Math.cos(i)*Math.cos(a),n=Math.cos(i)*Math.sin(a),o=Math.atan2(Math.sin(t)+Math.sin(i),Math.sqrt((Math.cos(t)+r)*(Math.cos(t)+r)+n*n)),h=e+Math.atan2(n,Math.cos(t)+r);return[this.degrees(o),this.degrees(h)]},this.mapRotate=function(t,e){var i,s,a,r=t[0]*this.mapRadian,n=t[1]*this.mapRadian,o=Math.cos(r),h=Math.cos(n)*o,l=Math.sin(n)*o,c=Math.sin(r);return e?(i=this.mapCosLat*this.mapCosLng*h+this.mapSinLng*l+this.mapSinLat*this.mapCosLng*c,s=-this.mapCosLat*this.mapSinLng*h+this.mapCosLng*l-this.mapSinLat*this.mapSinLng*c,a=-this.mapSinLat*h+this.mapCosLat*c):(i=this.mapCosLat*this.mapCosLng*h+this.mapCosLat*this.mapSinLng*l+this.mapSinLat*c,s=-this.mapSinLng*h+this.mapCosLng*l,a=-this.mapSinLat*this.mapCosLng*h-this.mapSinLat*this.mapSinLng*l+this.mapCosLat*c),[Math.asin(a)*this.mapDegrees,Math.atan2(s,i)*this.mapDegrees]},this.clipMapPoints=function(){var t=function(t,e){var i=0;t[0]<e.min[0]?i|=1:t[0]>e.max[0]&&(i|=2),t[1]<e.min[1]?i|=4:t[1]>e.max[1]&&(i|=8),t[2]=i},e=function(t,e,i,s){var a,r,n=e[0]-t[0],o=e[1]-t[1],h=s.min,l=s.max;return 8&i?(a=t[0]+n*(l[1]-t[1])/o,r=l[1]):4&i?(a=t[0]+n*(h[1]-t[1])/o,r=h[1]):2&i?(a=l[0],r=t[1]+o*(l[0]-t[0])/n):1&i&&(a=h[0],r=t[1]+o*(h[0]-t[0])/n),[a,r,!0]},i=this.meta.map.geojson,s=i.features,a=this.cloneObject(i.bounds);a.min[0]-=3,a.min[1]-=3,a.max[0]+=3,a.max[1]+=3;for(var r=0;r<s.length;r++)if(!s[r].hidden){var n=s[r].parts;if(n){for(var o=[1,4,2,8],h=0;h<n.length;h++)for(var l=0;l<n[h].length;l++)for(var c=0;c<n[h][l].length;c++)t(n[h][l][c],a);for(h=0;h<n.length;h++)for(l=0;l<n[h].length;l++)for(var d=0;d<o.length;d++){var p=[],g=n[h][l].length,u=g-1;for(c=0;c<g;c++){var m=n[h][l][c],f=n[h][l][u];if(m[2]&o[d]){if(!(f[2]&o[d]))t(y=e(f,m,o[d],a),a),p.push(y)}else{var y;if(f[2]&o[d])t(y=e(f,m,o[d],a),a),p.push(y);p.push(m)}u=c}n[h][l]=p}}}},this.simplifyMapPoints=function(){for(var t=function(t,e){var i=e[0]-t[0],s=e[1]-t[1];return i*i+s*s},e=function(t,e,i){var s,a=e[0],r=e[1],n=i[0]-a,o=i[1]-r,h=n*n+o*o;return h>0&&((s=((t[0]-a)*n+(t[1]-r)*o)/h)>1?(a=i[0],r=i[1]):s>0&&(a+=n*s,r+=o*s)),(n=t[0]-a)*n+(o=t[1]-r)*o},i=function(t,s,a,r,n){for(var o,h,l=0,c=r+1;c<=n-1;c++)(h=e(t[c],t[r],t[n]))>l&&(o=c,l=h);l>a&&(s[o]=1,i(t,s,a,r,o),i(t,s,a,o,n))},s=function(e,s){if(!s||!e.length)return e.slice();var a=s*s;return e=function(t,e){var s=t.length,a=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(s);a[0]=a[s-1]=1,i(t,a,e,0,s-1);for(var r=[],n=0;n<s;n++)a[n]&&r.push(t[n]);return r}(e=function(e,i){for(var s=[e[0]],a=e.length,r=0,n=1;n<a;n++)t(e[n],e[r])>i&&(s.push(e[n]),r=n);return r<a-1&&s.push(e[a-1]),s}(e,a),a)},a=this.meta.map.geojson.features,r=0;r<a.length;r++)if(!a[r].hidden){var n=a[r].parts;if(n)for(var o=0;o<n.length;o++)for(var h=0;h<n[o].length;h++)n[o][h]=s(n[o][h],1)}},this.drawMapGraticule=function(){if(this.mapGraticuleShow)for(var t=this.graticule(),e="orthographic"==this.mapProjection?this.geoPath(this.geoGraticule):t.coordinates,i=0,s="dashed"==this.mapGraticuleType?"dashedSpline":"spline",a=0;a<e.length;a++){for(var r=[],n=[],o=0;o<e[a].length;o++){var h=e[a][o],l="orthographic"==this.mapProjection?h:this.mapCoordinateToPoint([h[1],h[0]]);isNaN(l[0])||isNaN(l[1])?r.length&&(this.toRender({p:["drawLine",s,r,n,!1,!1,"black","0.1"],i:["Graticule:"+i++],t:"Axes"}),r=[],n=[]):(r.push(l[0]),n.push(l[1]))}r.length&&this.toRender({p:["drawLine",s,r,n,!1,!1,"black","0.1"],i:["Graticule:"+i++],t:"Axes"})}},this.drawMapLayer=function(t){var e=null,i=t.properties.varId?this.commonElementsInArrays(t.properties.varId,this.varIndices):[],s=this.getSampleIndices(this.colorBy),a=this.colorBy&&s>=0?s:this.colorBy&&i.length?i[0]:-1,r=this.sizeBy?this.getSampleIndices(this.sizeBy):-1,n=this.sizeBy&&r>=0&&i.length?this.data.y.data[i[0]][r]:0,o=this.colorBy&&i.length&&s>=0?this.getPropertyValue(i[0],a,"colorBy"):this.colorBy&&i.length?this.getPropertyValue(a,null,"colorBy"):this.colorBy&&null!=t.id&&this.isNumeric(t.id)?this.getPropertyValue(t.id,null,"colorBy"):this.mapColor,h=this.sizeBy&&i.length&&r>=0?this.getPropertyValue(i[0],r,"sizeBy"):0,l="orthographic"==this.mapProjection?this.geoPath({type:"FeatureCollection",features:[t]}):t.parts,c=this.decorations&&this.decorations.pie;if(l&&!t.hidden){var d,p,g=this.isUSAMap?CanvasXpress.usa[t.properties.key]:!!this.isWorldMap&&CanvasXpress.countries[t.properties.key];if(g&&n){var u=g.length,m=this.mapCoordinateToPoint([g[u-2],g[u-1]]);this.isUSAMap&&"albers"==this.mapProjection&&("AK"==t.properties.key?m=this.mapCoordinateToPoint([27.5,-112]):"HI"==t.properties.key&&(m=this.mapCoordinateToPoint([26.5,-104]))),d=m[0],p=m[1]}var f=["MapKey:"+t.properties.key,[Math.max(0,s)]],y=!this.isDOE||this.isDOE&&this.data.l.doe.includes(i[0])?this.getFillColor(o,f):"rgba(0,0,0,0)",x="useBackground"==this.mapOutlineColor?this.background:this.getOutlineColor(this.mapOutlineColor,f),v=!!this.colorBy&&!!(this.data.z&&this.data.z.hasOwnProperty(this.colorBy)&&this.hiddenLegends["Property:"+this.colorBy+":"+this.data.z[this.colorBy][a]+":z"]);if("orthographic"==this.mapProjection)for(var b=0;b<l.length;b++){for(var A=[],w=[],C=0;C<l[b].length;C++){var T=l[b][C];if(isNaN(T[0])&&isNaN(T[1])){if(A.length&&w.length){var S=this.toRender({p:["drawShape","polygon",A,w,!1,!1,y,x],i:f,g:e,t:"Data",h:v});null==e&&(e=S),A=[],w=[]}}else A.push(T[0]),w.push(T[1])}if(A.length&&w.length){S=this.toRender({p:["drawShape","polygon",A,w,!1,!1,y,x],i:f,g:e,t:"Data",h:v});null==e&&(e=S)}}else for(b=0;b<l.length;b++)for(C=0;C<l[b].length;C++){A=[],w=[];for(var M=0;M<l[b][C].length;M++){T=l[b][C][M];if(isNaN(T[0])&&isNaN(T[1])){if(A.length&&w.length){S=this.toRender({p:["drawShape","polygon",A,w,!1,!1,y,x],i:f,g:e,t:"Data",h:v});null==e&&(e=S),A=[],w=[]}}else A.push(T[0]),w.push(T[1])}if(A.length&&w.length){S=this.toRender({p:["drawShape","polygon",A,w,!1,!1,y,x],i:f,g:e,t:"Data",h:v});null==e&&(e=S)}}this.sizeBy&&d&&p&&n&&!c&&this.toRender({p:["drawShape","circle",d,p,1.2*h,1.2*h,"rgba(255,0,0,0.6)",this.mapOutlineColor],t:"Data"})}if(this.motionBy){var D=this.left+this.x,k=this.top+this.y+2*this.margin;this.toRender({p:["drawText",this.motionObject.current,D,k,this.motionCurrentFont,this.motionCurrentColor,"right","bottom"],t:"Data"})}},this.drawMapPieDecoration=function(t){var e=t.properties.varId?this.commonElementsInArrays(t.properties.varId,this.varIndices):[],i=this.sizeBy?this.getSampleIndices(this.sizeBy):-1,s=this.sizeBy&&e.length&&i>=0?this.getPropertyValue(e[0],i,"sizeBy"):0;if(t.parts){var a=this.isUSAMap?CanvasXpress.usa[t.properties.key]:!!this.isWorldMap&&CanvasXpress.countries[t.properties.key];if(a&&!t.hidden&&this.decorations&&this.decorations.pie&&this.decorations.pie[0]&&e[0]){var r=a.length,n=this.mapCoordinateToPoint([a[r-2],a[r-1]]),o=!1;if(this.isUSAMap&&"albers"==this.mapProjection&&("AK"==t.properties.key?n=this.mapCoordinateToPoint([27.5,-112]):"HI"==t.properties.key&&(n=this.mapCoordinateToPoint([26.5,-104]))),this.isUSAMap&&this.decorations&&this.decorations.pie)switch(t.properties.key){case"CT":o=this.mapCoordinateToPoint([a[r-2]-1.8,a[r-1]+1.4]);break;case"DE":o=this.mapCoordinateToPoint([a[r-2]-3.5,a[r-1]+2.4]);break;case"DC":o=this.mapCoordinateToPoint([a[r-2]-5.8,a[r-1]+2.5]);break;case"MD":o=this.mapCoordinateToPoint([a[r-2],a[r-1]+.6]);break;case"NJ":o=this.mapCoordinateToPoint([a[r-2]-2.2,a[r-1]+1.3]);break;case"RI":o=this.mapCoordinateToPoint([a[r-2]-.7,a[r-1]+2.8]);break;case"VT":o=this.mapCoordinateToPoint([a[r-2]+2,a[r-1]]);break;case"MA":o=this.mapCoordinateToPoint([a[r-2]+.8,a[r-1]+3.5])}}if(this.decorations&&this.decorations.pie&&this.decorations.pie[0]&&e[0]&&n){for(var h=[],l=[e[0]],c=0;c<this.decorations.pie[0].idxs.length;c++)h.push(this.data.y.data[e[0]][this.decorations.pie[0].idxs[c]]),l.push(this.decorations.pie[0].idxs[c]);var d=this.decorations.pie[0].colors||!1,p=this.sizeBy?s:(this.decorations.pie[0].size||3)*this.meta.map.geojson.zoom+(this.meta.map.geojson.zoom>4?5:0),g=this.setPieData(h,!1,d);o?(this.toRender({p:["drawLine","solid",o[0],o[1],n[0],n[1]],t:"Decorations"}),this.drawPie(g,o[0],o[1],p,[l])):this.drawPie(g,n[0],n[1],p,[l])}}},this.drawMapConnections=function(){if(this.decorations&&this.decorations.connections)for(var t=this,e=function(e,i,s,a){var r=t.radians(a-i);e=t.radians(e),s=t.radians(s),i=t.radians(i);var n=Math.cos(s)*Math.cos(r),o=Math.cos(s)*Math.sin(r),h=Math.atan2(Math.sin(e)+Math.sin(s),Math.sqrt((Math.cos(e)+n)*(Math.cos(e)+n)+o*o)),l=i+Math.atan2(o,Math.cos(e)+n);return[t.degrees(h),t.degrees(l)]},i=0;i<this.decorations.connections.length;i++){var s=this.decorations.connections[i];if(s.source&&2==s.source.length&&s.target&&2==s.target.length){var a=this.mapCoordinateToPoint(s.source),r=a[0],n=a[1],o=this.mapCoordinateToPoint(s.target),h=o[0],l=o[1],c="markerCon"+i,d=s.color||"red";if(s.type.match(/spline/)){var p=e(s.source[0],s.source[1],s.target[0],s.target[1]),g=this.mapCoordinateToPoint(p),u=g[0],m=g[1];this.toRender({p:["drawLine",s.type,[r,u,h],[n,m,l],!1,!1,d],i:["Connection:"+c],t:"Decorations"})}else this.toRender({p:["drawLine",s.type,r,n,h,l,d],i:["Connection:"+c],t:"Decorations"})}}},this.drawMapMarkers=function(){if(this.decorations&&this.decorations.marker)for(var t=0;t<this.decorations.marker.length;t++){var e=this.decorations.marker[t],i=this.meta.map.geojson.zoom?this.meta.map.geojson.zoom:1;if(e.lat&&e.lng||e.Lat&&e.Lng||e.latitude&&e.longitude||e.Latitude&&e.Longitude||e.coords&&2==e.coords.length){var s=e.lat||e.Lat||e.latitude||e.Latitude||e.coords[0],a=e.lng||e.Lng||e.longitude||e.Longitude||e.coords[1],r=(d=this.mapCoordinateToPoint([s,a]))[0],n=d[1],o=(e.size||this.margin)*i,h="markerPos"+t,l=this.toRender({p:["drawShape",e.shape||"drop",r,n,o,o,e.color||"red",this.mapOutlineColor],i:["Marker:"+h+":[ "+s+", "+a+" ]"],t:"Decorations"});(e.label||e.text)&&this.toRender({p:["drawText",e.label||e.text,r,n,this.font,this.fontColor,"center","middle"],i:["Marker:"+h+"-text:[ "+s+", "+a+" ]"],g:l,t:"Decorations"})}}else if(this.markerBy&&this.data.x.hasOwnProperty(this.markerBy)){var c=this.data.x;for(i=this.meta.map.geojson.zoom?this.meta.map.geojson.zoom:1,t=0;t<c[this.markerBy].length;t++){s=c.lat?c.lat[t]:c.Lat?c.Lat[t]:c.latitude?c.latitude[t]:!!c.Latitude&&c.Latitude[t],a=c.lng?c.lng[t]:c.Lng?c.Lng[t]:c.longitude?c.longitude[t]:!!c.Longitude&&c.Longitude[t];if(null!=s&&null!=a){r=(d=this.mapCoordinateToPoint([s,a]))[0],n=d[1],o=c.size?c.size[t]*i:this.margin*i;var d,p=c.shape?c.shape[t]:"drop",g=this.getPropertyValue(0,t,"markerBy");h="markerBy"+t;if(this.motionBy)if(c[this.motionBy][t]!=this.motionObject.current)continue;this.toRender({p:["drawShape",p,r,n,o,o,g,this.mapOutlineColor],i:["Marker:"+h+": ["+s+", "+a+" ]"],t:"Decorations"})}}}},this.drawMapBorder=function(){if("orthographic"==this.mapProjection){var t=this.layoutComb?this.layoutWidth:this.width,e=this.layoutComb?this.layoutHeight:this.height,i=.86*e*this.zoom;this.toRender({p:["drawShape","circle",t/2,e/2,i,i,!1,this.mapOutlineColor,"open"],t:"Axes"}),this.meta.map.geojson.center=[0,0]}},this.setMapDimensions=function(){this.layoutComb?(this.x=this.layoutWidth-(this.marginLeft+this.left+this.right+this.marginRight),this.y=this.layoutHeight-(this.marginTop+this.top+this.bottom+this.marginBottom)):(this.x=this.width-(this.marginLeft+this.left+this.right+this.marginRight),this.y=this.height-(this.marginTop+this.top+this.bottom+this.marginBottom+(this.motionBy?40:0)),this.motionBy&&!this.reproducing&&this.addMotionDiv())},this.setMapColors=function(){this.colorBy&&!this.colorBy.match(/variable|sample/i)&&this.meta.data.z&&this.meta.data.z[this.colorBy]&&this.meta.data.z[this.colorBy].colors&&this.colors.length<this.meta.data.z[this.colorBy].colors.length&&(this.colors=this.meta.data.z[this.colorBy].colors)},this.addMapData=function(){var t=[],e={},i={},s=!!this.meta.map.geojson&&this.meta.map.geojson.features,a=this,r=0,n=0,o=function(t,i){var s=t.id?t.id:i,a=t.properties?t.properties:{},o=a.name||a.NAME||a.Name;return c.hasOwnProperty(o)&&e[o]?(r++,o):l.hasOwnProperty(o)&&e[o]?(n++,o):c.hasOwnProperty(s)&&e[s]?(r++,s):l.hasOwnProperty(s)&&e[s]?(n++,s):s},h=function(t,e){for(var i in t)if("varId"!=i&&"key"!=i)if(null!=e)a.data.z.hasOwnProperty(i)||(a.data.z[i]=[]),a.data.z[i][e]=t[i];else{a.data.z.hasOwnProperty(i)||(a.data.z[i]=[]);for(var s=0;s<t.varId.length;s++)a.data.z[i][t.varId[s]]=t[i]}},l=function(){var t={};for(var e in CanvasXpress.countries)t[e]=e,t[CanvasXpress.countries[e][0]]=e,t[CanvasXpress.countries[e][3]]=e;return t}(),c=function(){var t={};for(var e in CanvasXpress.usa)t[e]=e,t[CanvasXpress.usa[e][0]]=e;return t}();if(s)for(var d=0;d<s.length;d++){var p=s[d],g=null!=p.id?p.id:p.properties&&this.mapPropertyId&&p.properties[this.mapPropertyId]?p.properties[this.mapPropertyId]:"Id"+(d+1);null!=p.id&&(p.id=g),t.push([g,p.properties]),i[g]=d}if(this.isExample){var u={y:{vars:[],smps:["Order"],data:[]},z:{id:[]}};this.$(this.target).style.display="block";for(d=0;d<t.length;d++)e[t[d][0]]=[d];for(d=0;d<t.length;d++){var m=t[d];u.y.data.push([d]),u.y.vars.push(m[1].name||m[0]),u.z.id.push(m[0]||null)}this.updateData(u,!1,!0)}else{var f=!1,y=0;if(this.data.z){for(var d in this.data.z)if(d.match(/country|Country|state|State/)){f=d;break}}else this.data.z={};if(this.data.z.id=[],this.data.z.name=[],!f)for(d=0;d<this.data.y.vars.length;d++){var x=this.data.y.vars[d];i.hasOwnProperty(x)&&y++}for(d=0;d<this.data.y.vars.length;d++){x=this.data.y.vars[d];var v=null;l.hasOwnProperty(x)||c.hasOwnProperty(x)?v=c[x]||l[x]:f?v=this.data.z[f][d]:y&&(v=x),this.data.z.id.push(v),null!=v&&(e.hasOwnProperty(v)||(e[v]=[]),e[v].push(d))}for(d=0;d<t.length;d++){if(null!=(v=(m=t[d])[1].hasOwnProperty("name")&&(l.hasOwnProperty(m[1].name)||c.hasOwnProperty(m[1].name))?c[m[1].name]||l[m[1].name]:m[1].hasOwnProperty("NAME")&&(l.hasOwnProperty(m[1].NAME)||c.hasOwnProperty(m[1].NAME))?c[m[1].NAME]||l[m[1].NAME]:l.hasOwnProperty(m[0])||c.hasOwnProperty(m[0])?c[m[0]]||l[m[0]]:null)&&e.hasOwnProperty(v))for(var b=0;b<e[v].length;b++){var A=e[v][b];m[1].hasOwnProperty("name")&&(l.hasOwnProperty(m[1].name)||c.hasOwnProperty(m[1].name))?this.data.z.name[A]=c.hasOwnProperty(m[1].name)?CanvasXpress.usa[v][0]:CanvasXpress.countries[v][0]:m[1].hasOwnProperty("NAME")&&(l.hasOwnProperty(m[1].NAME)||c.hasOwnProperty(m[1].NAME))?this.data.z.name[A]=c.hasOwnProperty(m[1].NAME)?CanvasXpress.usa[v][0]:CanvasXpress.countries[v][0]:this.data.z.name[A]=null}}this.updateData(this.cloneObject(this.data),!1,!0)}if(s){for(d=0;d<s.length;d++){var w=s[d].properties;v=o(s[d],this.data.y.vars[d]);w.varId=null!=v?e[v]:[null],w.key=v||s[d].id,w.varId?h(w):h(w,s[d].id||d)}n>100?this.isWorldMap=!0:r>40&&(this.isUSAMap=!0)}this.updateData(this.cloneObject(this.data),!1,!0),this.validatePropertyValues(),this.mapVarIds=e},this.setMapSmps=function(){this.mapSmpIndices=[],0==this.mapSmps.length&&this.mapSmps.push(this.data.y.smps[0]);for(var t=0;t<this.mapSmps.length;t++){(i=this.getSampleIndices(this.mapSmps[t]))>-1&&this.mapSmpIndices.push(i)}if(this.decorations&&this.decorations.pie){var e=this.decorations.pie[0];if(e.smps){e.idxs=[];for(t=0;t<e.smps.length;t++){var i;(i=this.getSampleIndices(e.smps[t]))>-1&&e.idxs.push(i)}}}},this.setMapParameters=function(){this.mapPI=Math.PI,this.mapPI2=2*Math.PI,this.mapPIhlf=Math.PI/2,this.mapRadian=Math.PI/180,this.mapDegrees=180/Math.PI,this.mapUnits=.5/Math.PI,this.mapLatitudeOriginRad=this.mapLatitudeOrigin*this.mapRadian,this.mapCentralMeridianRad=this.mapCentralMeridian*this.mapRadian,this.mapStandardParallel1Rad=this.mapStandardParallel1*this.mapRadian,this.mapStandardParallel2Rad=this.mapStandardParallel2*this.mapRadian,this.mapSinPhi1=Math.sin(this.mapStandardParallel1Rad),this.mapCosPhi1=Math.cos(this.mapStandardParallel1Rad),this.mapMeanPhi=(Math.sin(this.mapStandardParallel1Rad)+Math.sin(this.mapStandardParallel2Rad))/2,this.mapC=this.mapCosPhi1*this.mapCosPhi1+2*this.mapMeanPhi*this.mapSinPhi1,this.mapP0=Math.sqrt(this.mapC-2*this.mapMeanPhi*Math.sin(this.mapLatitudeOriginRad))/this.mapMeanPhi,this.mapRotationLat=this.mapConfig&&this.mapConfig.center?this.mapConfig.center[1]%360*this.mapRadian:0,this.mapRotationLng=this.mapConfig&&this.mapConfig.center?(90-this.mapConfig.center[0])%360*this.mapRadian:0,this.mapCosLat=Math.cos(this.mapRotationLat),this.mapSinLat=Math.sin(this.mapRotationLat),this.mapCosLng=Math.sin(this.mapRotationLng),this.mapSinLng=Math.cos(this.mapRotationLng)},this.setMapAttributes=function(t){this.meta.map&&(this.setMapParameters(),t?this.isMapSizeChanged()&&this.setMapZoomCenter(!0):(this.setMapLayerCoordinates(),this.setMapZoomCenter()),this.setMapLayerBounds(),this.setMapLayerPoints(),this.clipMapPoints(),this.simplifyMapPoints())},this.drawMapData=function(){if(this.meta.map&&(this.legendInside=!0,this.meta.map.geojson)){this.layoutValid||this.toRender({p:["setClipArea"],t:"Data"}),this.drawMapGraticule();for(var t=0;t<this.meta.map.geojson.features.length;t++)this.drawMapLayer(this.meta.map.geojson.features[t]);if(this.decorations&&this.decorations.pie&&this.decorations.pie[0]&&!this.layoutValid)for(t=0;t<this.meta.map.geojson.features.length;t++)this.drawMapPieDecoration(this.meta.map.geojson.features[t]);this.layoutValid||this.toRender({p:["resetClipArea"],t:"Data"}),this.drawMapBorder(),this.drawLegend(),this.drawMapConnections(),this.drawMapMarkers(),this.drawTitle()}},this.drawMap=function(){this.hideUnhideMapFeatures(this.hiddenMapFeatures,!0),this.hideUnhideMapFeatures(this.visibleMapFeatures,!1,this.visibleMapFeatures.length),this.setMapAttributes(!this.layoutValid&&this.mapInitialized),this.mapInitialized||(this.addMapData(),this.setMapSmps(),this.mapInitialized=!0),this.setLegends(),this.setMapDimensions(),this.initializeOrthographic(),this.setMapColors(),this.drawMapData()},this.initializeMap=function(){if(this.meta.hasOwnProperty("map")||(this.meta.map={}),!this.meta.map.hasOwnProperty("geojson")){if(window[this.mapId]&&window[this.mapId].hasOwnProperty("objects")){var t=window[this.mapId],e=Object.keys(t.objects),i=e[e.length-1],s=t.objects[i];this.meta.map.geojson=this.topojsonFeature(t,s)}else window[this.mapId]?this.meta.map.geojson=window[this.mapId]:this.meta.config.user.topoJSON&&(window[this.mapId]=this.meta.config.user.topoJSON,this.meta.map.geojson=window[this.mapId]);this.configureMapFeatures(),this.setAllMapFeaturesVisible()}this.Orthographic(),this.layoutValid?this.drawLayoutCompartments(this.drawMap):this.drawMap()},this.initializeMap()},CanvasXpress.prototype.Orthographic=function(){this.d3Geo=function(){var t=1e-6,e=Math.PI,i=2*e,s=e/2,a=e/180,r=180/e,n=Math.abs;function o(t){return t>0?1:t<0?-1:0}function h(t,e,i){return(e[0]-t[0])*(i[1]-t[1])-(e[1]-t[1])*(i[0]-t[0])}function l(t){return t>1?0:t<-1?e:Math.acos(t)}function c(t){return t>1?s:t<-1?-s:Math.asin(t)}function d(t){return(t=Math.sin(t/2))*t}function p(){}function g(t){return t}var u={};function m(){}m.prototype={s:0,t:0,add:function(t){y(t,this.t,f),y(f.s,this.s,this),this.s?this.t+=f.t:this.s=f.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var f=new m;function y(t,e,i){var s=i.s=t+e,a=s-t,r=s-a;i.t=t-r+(e-a)}function x(t){for(var e,i,s,a=t.length,r=-1,n=0;++r<a;)n+=t[r].length;for(i=new Array(n);--a>=0;)for(e=(s=t[a]).length;--e>=0;)i[--n]=s[e];return i}function v(t,e,i){t=+t,e=+e,i=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+i;for(var s=-1,a=0|Math.max(0,Math.ceil((e-t)/i)),r=new Array(a);++s<a;)r[s]=t+s*i;return r}function b(t,e,i){return function(){var s=i.apply(e,arguments);return s===e?t:s}}function A(t,e){t&&C.hasOwnProperty(t.type)&&C[t.type](t,e)}u.stream=function(t,e){t&&w.hasOwnProperty(t.type)?w[t.type](t,e):A(t,e)};var w={Feature:function(t,e){A(t.geometry,e)},FeatureCollection:function(t,e){for(var i=t.features,s=-1,a=i.length;++s<a;)A(i[s].geometry,e)}},C={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var i=t.coordinates,s=-1,a=i.length;++s<a;)t=i[s],e.point(t[0],t[1],t[2])},LineString:function(t,e){T(t.coordinates,e,0)},MultiLineString:function(t,e){for(var i=t.coordinates,s=-1,a=i.length;++s<a;)T(i[s],e,0)},Polygon:function(t,e){S(t.coordinates,e)},MultiPolygon:function(t,e){for(var i=t.coordinates,s=-1,a=i.length;++s<a;)S(i[s],e)},GeometryCollection:function(t,e){for(var i=t.geometries,s=-1,a=i.length;++s<a;)A(i[s],e)}};function T(t,e,i){var s,a=-1,r=t.length-i;for(e.lineStart();++a<r;)s=t[a],e.point(s[0],s[1],s[2]);e.lineEnd()}function S(t,e){var i=-1,s=t.length;for(e.polygonStart();++i<s;)T(t[i],e,1);e.polygonEnd()}u.area=function(t){return M=0,u.stream(t,_),M};var M,D,k,L,I,z,N,B,P,R,O,X,F=new m,_={sphere:function(){M+=4*e},point:p,lineStart:p,lineEnd:p,polygonStart:function(){F.reset(),_.lineStart=E},polygonEnd:function(){var t=2*F;M+=t<0?4*e+t:t,_.lineStart=_.lineEnd=_.point=p}};function E(){var t,i,s,r,n;function o(t,i){i=i*a/2+e/4;var o=(t*=a)-s,h=o>=0?1:-1,l=h*o,c=Math.cos(i),d=Math.sin(i),p=n*d,g=r*c+p*Math.cos(l),u=p*h*Math.sin(l);F.add(Math.atan2(u,g)),s=t,r=c,n=d}_.point=function(h,l){_.point=o,s=(t=h)*a,r=Math.cos(l=(i=l)*a/2+e/4),n=Math.sin(l)},_.lineEnd=function(){o(t,i)}}function V(t){var e=t[0],i=t[1],s=Math.cos(i);return[s*Math.cos(e),s*Math.sin(e),Math.sin(i)]}function H(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function G(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function q(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function j(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function U(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Y(t){return[Math.atan2(t[1],t[0]),c(t[2])]}function W(e,i){return n(e[0]-i[0])<t&&n(e[1]-i[1])<t}u.bounds=function(){var e,i,s,o,h,l,c,d,p,g,m,f={point:y,lineStart:v,lineEnd:b,polygonStart:function(){f.point=A,f.lineStart=w,f.lineEnd=C,p=0,_.polygonStart()},polygonEnd:function(){_.polygonEnd(),f.point=y,f.lineStart=v,f.lineEnd=b,F<0?(e=-(s=180),i=-(o=90)):p>t?o=90:p<-t&&(i=-90),m[0]=e,m[1]=s}};function y(t,a){g.push(m=[e=t,s=t]),a<i&&(i=a),a>o&&(o=a)}function x(t,l){var c=V([t*a,l*a]);if(d){var p=G(d,c),g=G([p[1],-p[0],0],p);U(g),g=Y(g);var u,m=t-h,f=m>0?1:-1,x=g[0]*r*f,v=n(m)>180;if(v^(f*h<x&&x<f*t))(u=g[1]*r)>o&&(o=u);else if(v^(f*h<(x=(x+360)%360-180)&&x<f*t))(u=-g[1]*r)<i&&(i=u);else l<i&&(i=l),l>o&&(o=l);v?t<h?T(e,t)>T(e,s)&&(s=t):T(t,s)>T(e,s)&&(e=t):s>=e?(t<e&&(e=t),t>s&&(s=t)):t>h?T(e,t)>T(e,s)&&(s=t):T(t,s)>T(e,s)&&(e=t)}else y(t,l);d=c,h=t}function v(){f.point=x}function b(){m[0]=e,m[1]=s,f.point=y,d=null}function A(t,e){if(d){var i=t-h;p+=n(i)>180?i+(i>0?360:-360):i}else l=t,c=e;_.point(t,e),x(t,e)}function w(){_.lineStart()}function C(){A(l,c),_.lineEnd(),n(p)>t&&(e=-(s=180)),m[0]=e,m[1]=s,d=null}function T(t,e){return(e-=t)<0?e+360:e}function S(t,e){return t[0]-e[0]}function M(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}return function(t){if(o=s=-(e=i=1/0),g=[],u.stream(t,f),h=g.length){g.sort(S);for(var a=1,r=[d=g[0]];a<h;++a)M((l=g[a])[0],d)||M(l[1],d)?(T(d[0],l[1])>T(d[0],d[1])&&(d[1]=l[1]),T(l[0],d[1])>T(d[0],d[1])&&(d[0]=l[0])):r.push(d=l);for(var n,h,l,c=-1/0,d=(a=0,r[h=r.length-1]);a<=h;d=l,++a)l=r[a],(n=T(d[1],l[0]))>c&&(c=n,e=l[0],s=d[1])}return g=m=null,e===1/0||i===1/0?[[NaN,NaN],[NaN,NaN]]:[[e,i],[s,o]]}}(),u.centroid=function(e){D=k=L=I=z=N=B=P=R=O=X=0,u.stream(e,$);var i=R,s=O,a=X,n=i*i+s*s+a*a;return n<1e-12&&(i=N,s=B,a=P,k<t&&(i=L,s=I,a=z),(n=i*i+s*s+a*a)<1e-12)?[NaN,NaN]:[Math.atan2(s,i)*r,c(a/Math.sqrt(n))*r]};var $={sphere:p,point:Q,lineStart:J,lineEnd:Z,polygonStart:function(){$.lineStart=tt},polygonEnd:function(){$.lineStart=J}};function Q(t,e){t*=a;var i=Math.cos(e*=a);K(i*Math.cos(t),i*Math.sin(t),Math.sin(e))}function K(t,e,i){++D,L+=(t-L)/D,I+=(e-I)/D,z+=(i-z)/D}function J(){var t,e,i;function s(s,r){s*=a;var n=Math.cos(r*=a),o=n*Math.cos(s),h=n*Math.sin(s),l=Math.sin(r),c=Math.atan2(Math.sqrt((c=e*l-i*h)*c+(c=i*o-t*l)*c+(c=t*h-e*o)*c),t*o+e*h+i*l);k+=c,N+=c*(t+(t=o)),B+=c*(e+(e=h)),P+=c*(i+(i=l)),K(t,e,i)}$.point=function(r,n){r*=a;var o=Math.cos(n*=a);t=o*Math.cos(r),e=o*Math.sin(r),i=Math.sin(n),$.point=s,K(t,e,i)}}function Z(){$.point=Q}function tt(){var t,e,i,s,r;function n(t,e){t*=a;var n=Math.cos(e*=a),o=n*Math.cos(t),h=n*Math.sin(t),c=Math.sin(e),d=s*c-r*h,p=r*o-i*c,g=i*h-s*o,u=Math.sqrt(d*d+p*p+g*g),m=i*o+s*h+r*c,f=u&&-l(m)/u,y=Math.atan2(u,m);R+=f*d,O+=f*p,X+=f*g,k+=y,N+=y*(i+(i=o)),B+=y*(s+(s=h)),P+=y*(r+(r=c)),K(i,s,r)}$.point=function(o,h){t=o,e=h,$.point=n,o*=a;var l=Math.cos(h*=a);i=l*Math.cos(o),s=l*Math.sin(o),r=Math.sin(h),K(i,s,r)},$.lineEnd=function(){n(t,e),$.lineEnd=Z,$.point=Q}}function et(t,e){function i(i,s){return i=t(i,s),e(i[0],i[1])}return t.invert&&e.invert&&(i.invert=function(i,s){return(i=e.invert(i,s))&&t.invert(i[0],i[1])}),i}function it(t,e,i,s,a){var r=[],n=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,i=t[0],s=t[e];if(W(i,s)){a.lineStart();for(var o=0;o<e;++o)a.point((i=t[o])[0],i[1]);a.lineEnd()}else{var h=new at(i,t,null,!0),l=new at(i,null,h,!1);h.o=l,r.push(h),n.push(l),h=new at(s,t,null,!1),l=new at(s,null,h,!0),h.o=l,r.push(h),n.push(l)}}})),n.sort(e),st(r),st(n),r.length){for(var o=0,h=i,l=n.length;o<l;++o)n[o].e=h=!h;for(var c,d,p=r[0];;){for(var g=p,u=!0;g.v;)if((g=g.n)===p)return;c=g.z,a.lineStart();do{if(g.v=g.o.v=!0,g.e){if(u)for(o=0,l=c.length;o<l;++o)a.point((d=c[o])[0],d[1]);else s(g.x,g.n.x,1,a);g=g.n}else{if(u)for(o=(c=g.p.z).length-1;o>=0;--o)a.point((d=c[o])[0],d[1]);else s(g.x,g.p.x,-1,a);g=g.p}c=(g=g.o).z,u=!u}while(!g.v);a.lineEnd()}}}function st(t){if(e=t.length){for(var e,i,s=0,a=t[0];++s<e;)a.n=i=t[s],i.p=a,a=i;a.n=i=t[0],i.p=a}}function at(t,e,i,s){this.x=t,this.z=e,this.o=i,this.e=s,this.v=!1,this.n=this.p=null}function rt(s,a,r,n){return function(o,h){var l,d=a(h),p=o.invert(n[0],n[1]),g={point:u,lineStart:f,lineEnd:y,polygonStart:function(){g.point=T,g.lineStart=S,g.lineEnd=M,l=[],v=[]},polygonEnd:function(){g.point=u,g.lineStart=f,g.lineEnd=y,l=x(l);var s=function(s,a){var r=s[0],n=s[1],o=[Math.sin(r),-Math.cos(r),0],h=0,l=0;F.reset();for(var d=0,p=a.length;d<p;++d){var g=a[d],u=g.length;if(u)for(var m=g[0],f=m[0],y=m[1]/2+e/4,x=Math.sin(y),v=Math.cos(y),b=1;;){b===u&&(b=0);var A=(s=g[b])[0],w=s[1]/2+e/4,C=Math.sin(w),T=Math.cos(w),S=A-f,M=S>=0?1:-1,D=M*S,k=D>e,L=x*C;if(F.add(Math.atan2(L*M*Math.sin(D),v*T+L*Math.cos(D))),h+=k?S+M*i:S,k^f>=r^A>=r){var I=G(V(m),V(s));U(I);var z=G(o,I);U(z);var N=(k^S>=0?-1:1)*c(z[2]);(n>N||n===N&&(I[0]||I[1]))&&(l+=k^S>=0?1:-1)}if(!b++)break;f=A,x=C,v=T,m=s}}return(h<-t||h<t&&F<-t)^1&l}(p,v);l.length?(C||(h.polygonStart(),C=!0),it(l,ht,s,r,h)):s&&(C||(h.polygonStart(),C=!0),h.lineStart(),r(null,null,1,h),h.lineEnd()),C&&(h.polygonEnd(),C=!1),l=v=null},sphere:function(){h.polygonStart(),h.lineStart(),r(null,null,1,h),h.lineEnd(),h.polygonEnd()}};function u(t,e){var i=o(t,e);s(t=i[0],e=i[1])&&h.point(t,e)}function m(t,e){var i=o(t,e);d.point(i[0],i[1])}function f(){g.point=m,d.lineStart()}function y(){g.point=u,d.lineEnd()}var v,b,A=ot(),w=a(A),C=!1;function T(t,e){b.push([t,e]);var i=o(t,e);w.point(i[0],i[1])}function S(){w.lineStart(),b=[]}function M(){T(b[0][0],b[0][1]),w.lineEnd();var t,e=w.clean(),i=A.buffer(),s=i.length;if(b.pop(),v.push(b),b=null,s)if(1&e){var a,r=-1;if((s=(t=i[0]).length-1)>0){for(C||(h.polygonStart(),C=!0),h.lineStart();++r<s;)h.point((a=t[r])[0],a[1]);h.lineEnd()}}else s>1&&2&e&&i.push(i.pop().concat(i.shift())),l.push(i.filter(nt))}return g}}function nt(t){return t.length>1}function ot(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,i){t.push([e,i])},lineEnd:p,buffer:function(){var i=e;return e=[],t=null,i},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function ht(e,i){return((e=e.x)[0]<0?e[1]-s-t:s-e[1])-((i=i.x)[0]<0?i[1]-s-t:s-i[1])}var lt=rt((function(){return!0}),(function(i){var a,r=NaN,o=NaN,h=NaN;return{lineStart:function(){i.lineStart(),a=1},point:function(l,c){var d=l>0?e:-e,p=n(l-r);n(p-e)<t?(i.point(r,o=(o+c)/2>0?s:-s),i.point(h,o),i.lineEnd(),i.lineStart(),i.point(d,o),i.point(l,o),a=0):h!==d&&p>=e&&(n(r-h)<t&&(r-=h*t),n(l-d)<t&&(l-=d*t),o=function(e,i,s,a){var r,o,h=Math.sin(e-s);return n(h)>t?Math.atan((Math.sin(i)*(o=Math.cos(a))*Math.sin(s)-Math.sin(a)*(r=Math.cos(i))*Math.sin(e))/(r*o*h)):(i+a)/2}(r,o,l,c),i.point(h,o),i.lineEnd(),i.lineStart(),i.point(d,o),a=0),i.point(r=l,o=c),h=d},lineEnd:function(){i.lineEnd(),r=o=NaN},clean:function(){return 2-a}}}),(function(i,a,r,o){var h;if(null==i)h=r*s,o.point(-e,h),o.point(0,h),o.point(e,h),o.point(e,0),o.point(e,-h),o.point(0,-h),o.point(-e,-h),o.point(-e,0),o.point(-e,h);else if(n(i[0]-a[0])>t){var l=i[0]<a[0]?e:-e;h=r*l/2,o.point(-l,h),o.point(0,h),o.point(l,h)}else o.point(a[0],a[1])}),[-e,-e/2]);function ct(i){var s=Math.cos(i),r=s>0,o=n(s)>t;return rt(h,(function(i){var s,a,n,d,p;return{lineStart:function(){d=n=!1,p=1},point:function(g,u){var m,f,y=[g,u],x=h(g,u),v=r?x?0:c(g,u):x?c(g+(g<0?e:-e),u):0;(!s&&(d=n=x)&&i.lineStart(),x!==n&&(m=l(s,y),(W(s,m)||W(y,m))&&(y[0]+=t,y[1]+=t,x=h(y[0],y[1]))),x!==n)?(p=0,x?(i.lineStart(),m=l(y,s),i.point(m[0],m[1])):(m=l(s,y),i.point(m[0],m[1]),i.lineEnd()),s=m):o&&s&&r^x&&(v&a||!(f=l(y,s,!0))||(p=0,r?(i.lineStart(),i.point(f[0][0],f[0][1]),i.point(f[1][0],f[1][1]),i.lineEnd()):(i.point(f[1][0],f[1][1]),i.lineEnd(),i.lineStart(),i.point(f[0][0],f[0][1]))));!x||s&&W(s,y)||i.point(y[0],y[1]),s=y,n=x,a=v},lineEnd:function(){n&&i.lineEnd(),s=null},clean:function(){return p|(d&&n)<<1}}}),Ut(i,6*a),r?[0,-i]:[-e,i-e]);function h(t,e){return Math.cos(t)*Math.cos(e)>s}function l(i,a,r){var o=[1,0,0],h=G(V(i),V(a)),l=H(h,h),c=h[0],d=l-c*c;if(!d)return!r&&i;var p=s*l/d,g=-s*c/d,u=G(o,h),m=j(o,p);q(m,j(h,g));var f=u,y=H(m,f),x=H(f,f),v=y*y-x*(H(m,m)-1);if(!(v<0)){var b=Math.sqrt(v),A=j(f,(-y-b)/x);if(q(A,m),A=Y(A),!r)return A;var w,C=i[0],T=a[0],S=i[1],M=a[1];T<C&&(w=C,C=T,T=w);var D=T-C,k=n(D-e)<t;if(!k&&M<S&&(w=S,S=M,M=w),k||D<t?k?S+M>0^A[1]<(n(A[0]-C)<t?S:M):S<=A[1]&&A[1]<=M:D>e^(C<=A[0]&&A[0]<=T)){var L=j(f,(-y+b)/x);return q(L,m),[A,Y(L)]}}}function c(t,s){var a=r?i:e-i,n=0;return t<-a?n|=1:t>a&&(n|=2),s<-a?n|=4:s>a&&(n|=8),n}}var dt=1e9;function pt(e,i,s,a){return function(t){var n,c,d,p,g,u,m,f,y,v,b,A=t,w=ot(),C=function(t,e,i,s){return function(a){var r,n=a.a,o=a.b,h=n.x,l=n.y,c=0,d=1,p=o.x-h,g=o.y-l;if(r=t-h,p||!(r>0)){if(r/=p,p<0){if(r<c)return;r<d&&(d=r)}else if(p>0){if(r>d)return;r>c&&(c=r)}if(r=i-h,p||!(r<0)){if(r/=p,p<0){if(r>d)return;r>c&&(c=r)}else if(p>0){if(r<c)return;r<d&&(d=r)}if(r=e-l,g||!(r>0)){if(r/=g,g<0){if(r<c)return;r<d&&(d=r)}else if(g>0){if(r>d)return;r>c&&(c=r)}if(r=s-l,g||!(r<0)){if(r/=g,g<0){if(r>d)return;r>c&&(c=r)}else if(g>0){if(r<c)return;r<d&&(d=r)}return c>0&&(a.a={x:h+c*p,y:l+c*g}),d<1&&(a.b={x:h+d*p,y:l+d*g}),a}}}}}}(e,i,s,a),T={point:D,lineStart:function(){T.point=k,c&&c.push(d=[]);v=!0,y=!1,m=f=NaN},lineEnd:function(){n&&(k(p,g),u&&y&&w.rejoin(),n.push(w.buffer()));T.point=D,y&&t.lineEnd()},polygonStart:function(){t=w,n=[],c=[],b=!0},polygonEnd:function(){t=A,n=x(n);var i=function(t){for(var e=0,i=c.length,s=t[1],a=0;a<i;++a)for(var r,n=1,o=c[a],l=o.length,d=o[0];n<l;++n)r=o[n],d[1]<=s?r[1]>s&&h(d,r,t)>0&&++e:r[1]<=s&&h(d,r,t)<0&&--e,d=r;return 0!==e}([e,a]),s=b&&i,r=n.length;(s||r)&&(t.polygonStart(),s&&(t.lineStart(),S(null,null,1,t),t.lineEnd()),r&&it(n,o,i,S,t),t.polygonEnd()),n=c=d=null}};function S(t,n,o,h){var c=0,d=0;if(null==t||(c=r(t,o))!==(d=r(n,o))||l(t,n)<0^o>0)do{h.point(0===c||3===c?e:s,c>1?a:i)}while((c=(c+o+4)%4)!==d);else h.point(n[0],n[1])}function M(t,r){return e<=t&&t<=s&&i<=r&&r<=a}function D(e,i){M(e,i)&&t.point(e,i)}function k(e,i){var s=M(e=Math.max(-dt,Math.min(dt,e)),i=Math.max(-dt,Math.min(dt,i)));if(c&&d.push([e,i]),v)p=e,g=i,u=s,v=!1,s&&(t.lineStart(),t.point(e,i));else if(s&&y)t.point(e,i);else{var a={a:{x:m,y:f},b:{x:e,y:i}};C(a)?(y||(t.lineStart(),t.point(a.a.x,a.a.y)),t.point(a.b.x,a.b.y),s||t.lineEnd(),b=!1):s&&(t.lineStart(),t.point(e,i),b=!1)}m=e,f=i,y=s}return T};function r(a,r){return n(a[0]-e)<t?r>0?0:3:n(a[0]-s)<t?r>0?2:1:n(a[1]-i)<t?r>0?1:0:r>0?3:2}function o(t,e){return l(t.x,e.x)}function l(t,e){var i=r(t,1),s=r(e,1);return i!==s?i-s:0===i?e[1]-t[1]:1===i?t[0]-e[0]:2===i?t[1]-e[1]:e[0]-t[0]}}function gt(t){var i=0,s=e/3,a=Ft(t),r=a(i,s);return r.parallels=function(t){return arguments.length?a(i=t[0]*e/180,s=t[1]*e/180):[i/e*180,s/e*180]},r}function ut(t,e){var i=Math.sin(t),s=(i+Math.sin(e))/2,a=1+i*(2*s-i),r=Math.sqrt(a)/s;function n(t,e){var i=Math.sqrt(a-2*s*Math.sin(e))/s;return[i*Math.sin(t*=s),r-i*Math.cos(t)]}return n.invert=function(t,e){var i=r-e;return[Math.atan2(t,i)/s,c((a-(t*t+i*i)*s*s)/(2*s))]},n}u.clipExtent=function(){var t,e,i,s,a,r,n={stream:function(t){return a&&(a.valid=!1),(a=r(t)).valid=!0,a},extent:function(o){return arguments.length?(r=pt(t=+o[0][0],e=+o[0][1],i=+o[1][0],s=+o[1][1]),a&&(a.valid=!1,a=null),n):[[t,e],[i,s]]}};return n.extent([[0,0],[960,500]])},(u.conicEqualArea=function(){return gt(ut)}).raw=ut,u.albers=function(){return u.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},u.albersUsa=function(){var e,i,s,a,r=u.albers(),n=u.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o=u.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),h={point:function(t,i){e=[t,i]}};function l(t){var r=t[0],n=t[1];return e=null,i(r,n),e||(s(r,n),e)||a(r,n),e}return l.invert=function(t){var e=r.scale(),i=r.translate(),s=(t[0]-i[0])/e,a=(t[1]-i[1])/e;return(a>=.12&&a<.234&&s>=-.425&&s<-.214?n:a>=.166&&a<.234&&s>=-.214&&s<-.115?o:r).invert(t)},l.stream=function(t){var e=r.stream(t),i=n.stream(t),s=o.stream(t);return{point:function(t,a){e.point(t,a),i.point(t,a),s.point(t,a)},sphere:function(){e.sphere(),i.sphere(),s.sphere()},lineStart:function(){e.lineStart(),i.lineStart(),s.lineStart()},lineEnd:function(){e.lineEnd(),i.lineEnd(),s.lineEnd()},polygonStart:function(){e.polygonStart(),i.polygonStart(),s.polygonStart()},polygonEnd:function(){e.polygonEnd(),i.polygonEnd(),s.polygonEnd()}}},l.precision=function(t){return arguments.length?(r.precision(t),n.precision(t),o.precision(t),l):r.precision()},l.scale=function(t){return arguments.length?(r.scale(t),n.scale(.35*t),o.scale(t),l.translate(r.translate())):r.scale()},l.translate=function(e){if(!arguments.length)return r.translate();var c=r.scale(),d=+e[0],p=+e[1];return i=r.translate(e).clipExtent([[d-.455*c,p-.238*c],[d+.455*c,p+.238*c]]).stream(h).point,s=n.translate([d-.307*c,p+.201*c]).clipExtent([[d-.425*c+t,p+.12*c+t],[d-.214*c-t,p+.234*c-t]]).stream(h).point,a=o.translate([d-.205*c,p+.212*c]).clipExtent([[d-.214*c+t,p+.166*c+t],[d-.115*c-t,p+.234*c-t]]).stream(h).point,l},l.scale(1070)};var mt,ft,yt,xt,vt,bt,At={point:p,lineStart:p,lineEnd:p,polygonStart:function(){ft=0,At.lineStart=wt},polygonEnd:function(){At.lineStart=At.lineEnd=At.point=p,mt+=n(ft/2)}};function wt(){var t,e,i,s;function a(t,e){ft+=s*t-i*e,i=t,s=e}At.point=function(r,n){At.point=a,t=i=r,e=s=n},At.lineEnd=function(){a(t,e)}}var Ct={point:function(t,e){t<yt&&(yt=t);t>vt&&(vt=t);e<xt&&(xt=e);e>bt&&(bt=e)},lineStart:p,lineEnd:p,polygonStart:p,polygonEnd:p};function Tt(){var t=St(4.5),e=[],i={point:s,lineStart:function(){i.point=a},lineEnd:n,polygonStart:function(){i.lineEnd=o},polygonEnd:function(){i.lineEnd=n,i.point=s},pointRadius:function(e){return t=St(e),i},result:function(){if(e.length){var t=e.join("");return e=[],t}}};function s(i,s){e.push("M",i,",",s,t)}function a(t,s){e.push("M",t,",",s),i.point=r}function r(t,i){e.push("L",t,",",i)}function n(){i.point=s}function o(){e.push("Z")}return i}function St(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}var Mt,Dt={point:kt,lineStart:Lt,lineEnd:It,polygonStart:function(){Dt.lineStart=zt},polygonEnd:function(){Dt.point=kt,Dt.lineStart=Lt,Dt.lineEnd=It}};function kt(t,e){L+=t,I+=e,++z}function Lt(){var t,e;function i(i,s){var a=i-t,r=s-e,n=Math.sqrt(a*a+r*r);N+=n*(t+i)/2,B+=n*(e+s)/2,P+=n,kt(t=i,e=s)}Dt.point=function(s,a){Dt.point=i,kt(t=s,e=a)}}function It(){Dt.point=kt}function zt(){var t,e,i,s;function a(t,e){var a=t-i,r=e-s,n=Math.sqrt(a*a+r*r);N+=n*(i+t)/2,B+=n*(s+e)/2,P+=n,R+=(n=s*t-i*e)*(i+t),O+=n*(s+e),X+=3*n,kt(i=t,s=e)}Dt.point=function(r,n){Dt.point=a,kt(t=i=r,e=s=n)},Dt.lineEnd=function(){a(t,e)}}function Nt(t){var e={point:i,lineStart:function(){e.point=s},lineEnd:r,polygonStart:function(){e.lineEnd=n},polygonEnd:function(){e.lineEnd=r,e.point=i},pointRadius:function(t){return t,e},result:p};function i(t,e){u.render.push([[t,e]])}function s(t,i){u.render.push([]),u.render[u.render.length-1].push([t,i]),e.point=a}function a(t,e){u.render[u.render.length-1].push([t,e])}function r(){e.point=i}function n(){}return e}function Bt(e){var i=.5,s=Math.cos(30*a),r=16;function o(t){return(r?l:h)(t)}function h(t){return Ot(t,(function(i,s){i=e(i,s),t.point(i[0],i[1])}))}function l(t){var i,s,a,n,o,h,l,d,p,g,u,m,f={point:y,lineStart:x,lineEnd:b,polygonStart:function(){t.polygonStart(),f.lineStart=A},polygonEnd:function(){t.polygonEnd(),f.lineStart=x}};function y(i,s){i=e(i,s),t.point(i[0],i[1])}function x(){d=NaN,f.point=v,t.lineStart()}function v(i,s){var a=V([i,s]),n=e(i,s);c(d,p,l,g,u,m,d=n[0],p=n[1],l=i,g=a[0],u=a[1],m=a[2],r,t),t.point(d,p)}function b(){f.point=y,t.lineEnd()}function A(){x(),f.point=w,f.lineEnd=C}function w(t,e){v(i=t,e),s=d,a=p,n=g,o=u,h=m,f.point=v}function C(){c(d,p,l,g,u,m,s,a,i,n,o,h,r,t),f.lineEnd=b,b()}return f}function c(a,r,o,h,l,d,p,g,u,m,f,y,x,v){var b=p-a,A=g-r,w=b*b+A*A;if(w>4*i&&x--){var C=h+m,T=l+f,S=d+y,M=Math.sqrt(C*C+T*T+S*S),D=Math.asin(S/=M),k=n(n(S)-1)<t||n(o-u)<t?(o+u)/2:Math.atan2(T,C),L=e(k,D),I=L[0],z=L[1],N=I-a,B=z-r,P=A*N-b*B;(P*P/w>i||n((b*N+A*B)/w-.5)>.3||h*m+l*f+d*y<s)&&(c(a,r,o,h,l,d,I,z,k,C/=M,T/=M,S,x,v),v.point(I,z),c(I,z,k,C,T,S,p,g,u,m,f,y,x,v))}}return o.precision=function(t){return arguments.length?(r=(i=t*t)>0&&16,o):Math.sqrt(i)},o}function Pt(t){var e=Bt((function(e,i){return t([e*r,i*r])}));return function(t){return _t(e(t))}}function Rt(t){this.stream=t}function Ot(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function Xt(t){return Ft((function(){return t}))()}function Ft(t){var e,i,s,n,o,h,l=Bt((function(t,i){return[(t=e(t,i))[0]*c+n,o-t[1]*c]})),c=150,d=480,p=250,u=0,m=0,f=0,y=0,x=0,v=lt,A=g,w=null,C=null;function T(t){return[(t=s(t[0]*a,t[1]*a))[0]*c+n,o-t[1]*c]}function S(t){return(t=s.invert((t[0]-n)/c,(o-t[1])/c))&&[t[0]*r,t[1]*r]}function M(){s=et(i=Ht(f,y,x),e);var t=e(u,m);return n=d-t[0]*c,o=p+t[1]*c,D()}function D(){return h&&(h.valid=!1,h=null),T}return T.stream=function(t){return h&&(h.valid=!1),(h=_t(v(i,l(A(t))))).valid=!0,h},T.clipAngle=function(t){return arguments.length?(v=null==t?(w=t,lt):ct((w=+t)*a),D()):w},T.clipExtent=function(t){return arguments.length?(C=t,A=t?pt(t[0][0],t[0][1],t[1][0],t[1][1]):g,D()):C},T.scale=function(t){return arguments.length?(c=+t,M()):c},T.translate=function(t){return arguments.length?(d=+t[0],p=+t[1],M()):[d,p]},T.center=function(t){return arguments.length?(u=t[0]%360*a,m=t[1]%360*a,M()):[u*r,m*r]},T.rotate=function(t){return arguments.length?(f=t[0]%360*a,y=t[1]%360*a,x=t.length>2?t[2]%360*a:0,M()):[f*r,y*r,x*r]},function(t,e){for(var i,s=1,a=arguments.length;++s<a;)t[i=arguments[s]]=b(t,e,e[i])}(T,l,"precision"),function(){return e=t.apply(this,arguments),T.invert=e.invert&&S,M()}}function _t(t){return Ot(t,(function(e,i){t.point(e*a,i*a)}))}function Et(t,e){return[t,e]}function Vt(t,s){return[t>e?t-i:t<-e?t+i:t,s]}function Ht(t,e,i){return t?e||i?et(qt(t),jt(e,i)):qt(t):e||i?jt(e,i):Vt}function Gt(t){return function(s,a){return[(s+=t)>e?s-i:s<-e?s+i:s,a]}}function qt(t){var e=Gt(t);return e.invert=Gt(-t),e}function jt(t,e){var i=Math.cos(t),s=Math.sin(t),a=Math.cos(e),r=Math.sin(e);function n(t,e){var n=Math.cos(e),o=Math.cos(t)*n,h=Math.sin(t)*n,l=Math.sin(e),d=l*i+o*s;return[Math.atan2(h*a-d*r,o*i-l*s),c(d*a+h*r)]}return n.invert=function(t,e){var n=Math.cos(e),o=Math.cos(t)*n,h=Math.sin(t)*n,l=Math.sin(e),d=l*a-h*r;return[Math.atan2(h*a+l*r,o*i+d*s),c(d*i-o*s)]},n}function Ut(t,e){var s=Math.cos(t),a=Math.sin(t);return function(r,n,o,h){var l=o*e;null!=r?(r=Yt(s,r),n=Yt(s,n),(o>0?r<n:r>n)&&(r+=o*i)):(r=t+o*i,n=t-.5*l);for(var c,d=r;o>0?d>n:d<n;d-=l)h.point((c=Y([s,-a*Math.cos(d),-a*Math.sin(d)]))[0],c[1])}}function Yt(e,i){var s=V(i);s[0]-=e,U(s);var a=l(-s[1]);return((-s[2]<0?-a:a)+2*Math.PI-t)%(2*Math.PI)}u.render=[],u.path=function(){var t,e,i,s,a,r=4.5;function n(t){return u.render=[],t&&("function"==typeof r&&s.pointRadius(+r.apply(this,arguments)),a&&a.valid||(a=i(s)),u.stream(t,a)),u.render}function o(){return a=null,n}return n.area=function(t){return mt=0,u.stream(t,i(At)),mt},n.centroid=function(t){return L=I=z=N=B=P=R=O=X=0,u.stream(t,i(Dt)),X?[R/X,O/X]:P?[N/P,B/P]:z?[L/z,I/z]:[NaN,NaN]},n.bounds=function(t){return vt=bt=-(yt=xt=1/0),u.stream(t,i(Ct)),[[yt,xt],[vt,bt]]},n.projection=function(e){return arguments.length?(i=(t=e)?e.stream||Pt(e):g,o()):t},n.context=function(t){return arguments.length?(s=null==(e=t)?new Tt:new Nt(t),"function"!=typeof r&&s.pointRadius(r),o()):e},n.pointRadius=function(t){return arguments.length?(r="function"==typeof t?t:(s.pointRadius(+t),+t),n):r},n.projection(u.albersUsa()).context(null)},u.transform=function(t){return{stream:function(e){var i=new Rt(e);for(var s in t)i[s]=t[s];return i}}},Rt.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},u.projection=Xt,u.projectionMutator=Ft,(u.equirectangular=function(){return Xt(Et)}).raw=Et.invert=Et,u.rotation=function(t){function e(e){return(e=t(e[0]*a,e[1]*a))[0]*=r,e[1]*=r,e}return t=Ht(t[0]%360*a,t[1]*a,t.length>2?t[2]*a:0),e.invert=function(e){return(e=t.invert(e[0]*a,e[1]*a))[0]*=r,e[1]*=r,e},e},Vt.invert=Et,u.circle=function(){var t,e,i=[0,0],s=6;function n(){var t="function"==typeof i?i.apply(this,arguments):i,s=Ht(-t[0]*a,-t[1]*a,0).invert,n=[];return e(null,null,1,{point:function(t,e){n.push(t=s(t,e)),t[0]*=r,t[1]*=r}}),{type:"Polygon",coordinates:[n]}}return n.origin=function(t){return arguments.length?(i=t,n):i},n.angle=function(i){return arguments.length?(e=Ut((t=+i)*a,s*a),n):t},n.precision=function(i){return arguments.length?(e=Ut(t*a,(s=+i)*a),n):s},n.angle(90)},u.distance=function(t,e){var i,s=(e[0]-t[0])*a,r=t[1]*a,n=e[1]*a,o=Math.sin(s),h=Math.cos(s),l=Math.sin(r),c=Math.cos(r),d=Math.sin(n),p=Math.cos(n);return Math.atan2(Math.sqrt((i=p*o)*i+(i=c*d-l*p*h)*i),l*d+c*p*h)},u.graticule=function(){var e,i,s,a,r,o,h,l,c,d,p,g,u=10,m=u,f=90,y=360,x=2.5;function b(e,i,s){var a=v(e,i-t,s).concat(i);return function(t){return a.map((function(e){return[t,e]}))}}function A(e,i,s){var a=v(e,i-t,s).concat(i);return function(t){return a.map((function(e){return[e,t]}))}}function w(){return{type:"MultiLineString",coordinates:C()}}function C(){return v(Math.ceil(a/f)*f,s,f).map(p).concat(v(Math.ceil(l/y)*y,h,y).map(g)).concat(v(Math.ceil(i/u)*u,e,u).filter((function(e){return n(e%f)>t})).map(c)).concat(v(Math.ceil(o/m)*m,r,m).filter((function(e){return n(e%y)>t})).map(d))}return w.lines=function(){return C().map((function(t){return{type:"LineString",coordinates:t}}))},w.outline=function(){return{type:"Polygon",coordinates:[p(a).concat(g(h).slice(1),p(s).reverse().slice(1),g(l).reverse().slice(1))]}},w.extent=function(t){return arguments.length?w.majorExtent(t).minorExtent(t):w.minorExtent()},w.majorExtent=function(t){return arguments.length?(a=+t[0][0],s=+t[1][0],l=+t[0][1],h=+t[1][1],a>s&&(t=a,a=s,s=t),l>h&&(t=l,l=h,h=t),w.precision(x)):[[a,l],[s,h]]},w.minorExtent=function(t){return arguments.length?(i=+t[0][0],e=+t[1][0],o=+t[0][1],r=+t[1][1],i>e&&(t=i,i=e,e=t),o>r&&(t=o,o=r,r=t),w.precision(x)):[[i,o],[e,r]]},w.step=function(t){return arguments.length?w.majorStep(t).minorStep(t):w.minorStep()},w.majorStep=function(t){return arguments.length?(f=+t[0],y=+t[1],w):[f,y]},w.minorStep=function(t){return arguments.length?(u=+t[0],m=+t[1],w):[u,m]},w.precision=function(t){return arguments.length?(x=+t,c=b(o,r,90),d=A(i,e,x),p=b(l,h,90),g=A(a,s,x),w):x},w.majorExtent([[-180,-90+t],[180,90-t]]).minorExtent([[-180,-80-t],[180,80+t]])},u.greatArc=function(){var t,e,i=function(t){return t.source},s=function(t){return t.target};function a(){return{type:"LineString",coordinates:[t||i.apply(this,arguments),e||s.apply(this,arguments)]}}return a.distance=function(){return u.distance(t||i.apply(this,arguments),e||s.apply(this,arguments))},a.source=function(e){return arguments.length?(i=e,t="function"==typeof e?null:e,a):i},a.target=function(t){return arguments.length?(s=t,e="function"==typeof t?null:t,a):s},a.precision=function(){return arguments.length?a:0},a},u.interpolate=function(t,e){return i=t[0]*a,s=t[1]*a,n=e[0]*a,o=e[1]*a,h=Math.cos(s),l=Math.sin(s),c=Math.cos(o),p=Math.sin(o),g=h*Math.cos(i),u=h*Math.sin(i),m=c*Math.cos(n),f=c*Math.sin(n),y=2*Math.asin(Math.sqrt(d(o-s)+h*c*d(n-i))),x=1/Math.sin(y),(v=y?function(t){var e=Math.sin(t*=y)*x,i=Math.sin(y-t)*x,s=i*g+e*m,a=i*u+e*f,n=i*l+e*p;return[Math.atan2(a,s)*r,Math.atan2(n,Math.sqrt(s*s+a*a))*r]}:function(){return[i*r,s*r]}).distance=y,v;var i,s,n,o,h,l,c,p,g,u,m,f,y,x,v},u.length=function(t){return Mt=0,u.stream(t,Wt),Mt};var Wt={sphere:p,point:p,lineStart:function(){var t,e,i;function s(s,r){var o=Math.sin(r*=a),h=Math.cos(r),l=n((s*=a)-t),c=Math.cos(l);Mt+=Math.atan2(Math.sqrt((l=h*Math.sin(l))*l+(l=i*o-e*h*c)*l),e*o+i*h*c),t=s,e=o,i=h}Wt.point=function(r,n){t=r*a,e=Math.sin(n*=a),i=Math.cos(n),Wt.point=s},Wt.lineEnd=function(){Wt.point=Wt.lineEnd=p}},lineEnd:p,polygonStart:p,polygonEnd:p};function $t(t,e){function i(e,i){var s=Math.cos(e),a=Math.cos(i),r=t(s*a);return[r*a*Math.sin(e),r*Math.sin(i)]}return i.invert=function(t,i){var s=Math.sqrt(t*t+i*i),a=e(s),r=Math.sin(a),n=Math.cos(a);return[Math.atan2(t*r,s*n),Math.asin(s&&i*r/s)]},i}var Qt=$t((function(t){return Math.sqrt(2/(1+t))}),(function(t){return 2*Math.asin(t/2)}));(u.azimuthalEqualArea=function(){return Xt(Qt)}).raw=Qt;var Kt=$t((function(t){var e=Math.acos(t);return e&&e/Math.sin(e)}),g);function Jt(i,a){var r=Math.cos(i),n=function(t){return Math.tan(e/4+t/2)},h=i===a?Math.sin(i):Math.log(r/Math.cos(a))/Math.log(n(a)/n(i)),l=r*Math.pow(n(i),h)/h;if(!h)return ee;function c(e,i){l>0?i<-s+t&&(i=-s+t):i>s-t&&(i=s-t);var a=l/Math.pow(n(i),h);return[a*Math.sin(h*e),l-a*Math.cos(h*e)]}return c.invert=function(t,e){var i=l-e,a=o(h)*Math.sqrt(t*t+i*i);return[Math.atan2(t,i)/h,2*Math.atan(Math.pow(l/a,1/h))-s]},c}function Zt(e,i){var s=Math.cos(e),a=e===i?Math.sin(e):(s-Math.cos(i))/(i-e),r=s/a+e;if(n(a)<t)return Et;function h(t,e){var i=r-e;return[i*Math.sin(a*t),r-i*Math.cos(a*t)]}return h.invert=function(t,e){var i=r-e;return[Math.atan2(t,i)/a,r-o(a)*Math.sqrt(t*t+i*i)]},h}(u.azimuthalEquidistant=function(){return Xt(Kt)}).raw=Kt,(u.conicConformal=function(){return gt(Jt)}).raw=Jt,(u.conicEquidistant=function(){return gt(Zt)}).raw=Zt;var te=$t((function(t){return 1/t}),Math.atan);function ee(t,i){return[t,Math.log(Math.tan(e/4+i/2))]}function ie(t){var i,s=Xt(t),a=s.scale,r=s.translate,n=s.clipExtent;return s.scale=function(){var t=a.apply(s,arguments);return t===s?i?s.clipExtent(null):s:t},s.translate=function(){var t=r.apply(s,arguments);return t===s?i?s.clipExtent(null):s:t},s.clipExtent=function(t){var o=n.apply(s,arguments);if(o===s){if(i=null==t){var h=e*a(),l=r();n([[l[0]-h,l[1]-h],[l[0]+h,l[1]+h]])}}else i&&(o=null);return o},s.clipExtent(null)}(u.gnomonic=function(){return Xt(te)}).raw=te,ee.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-s]},(u.mercator=function(){return ie(ee)}).raw=ee;var se=$t((function(){return 1}),Math.asin);(u.orthographic=function(){return Xt(se)}).raw=se;var ae=$t((function(t){return 1/(1+t)}),(function(t){return 2*Math.atan(t)}));function re(t,i){return[Math.log(Math.tan(e/4+i/2)),-t]}return(u.stereographic=function(){return Xt(ae)}).raw=ae,re.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-s]},(u.transverseMercator=function(){var t=ie(re),e=t.center,i=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return t?i([t[0],t[1],t.length>2?t[2]+90:90]):[(t=i())[0],t[1],t[2]-90]},i([0,0,90])}).raw=re,u},this.geoProjectInvert=function(t){return this.geoProjection.invert(t)},this.geoProject=function(t){return this.geoPath(t)},this.initializeOrthographic=function(){this.mapObject=this.d3Geo();var t=this.meta.map.geojson.global,e=this.marginLeft+this.offsetX+this.left+this.x/2,i=this.marginTop+this.offsetY+this.top+this.y/2,s=this.layoutComb?this.layoutWidth:this.width,a=this.layoutComb?this.layoutHeight:this.height,r=this.eventMapZoom?this.eventMap.zom:this.mapConfig&&this.mapConfig.zoom?this.mapConfig.zoom:"orthographic"==this.mapProjection?this.zoom:t.zoom,n="orthographic"==this.mapProjection&&this.geoProjection?this.geoProjection.rotate():this.eventMapCenter?this.eventMapCenter:this.mapConfig&&this.mapConfig.center?[-this.mapConfig.center[0],-this.mapConfig.center[1]]:[t.center[0],t.center[1]],o=this.meta.canvas.ctx.canvas.getContext("2d");switch(this.geoGraticule=this.mapObject.graticule()(),this.geoCanvasScale="mercator"==this.mapProjection?[this.y*r/(2*Math.PI)]:"orthographic"==this.mapProjection?a/2*.86:Math.min(this.x,this.y)/2,this.geoCanvasCenter="orthographic"==this.mapProjection?[s/2,a/2]:[e,i],this.mapProjection){case"mercator":this.geoProjection=this.mapObject.mercator().center(n).scale(this.geoCanvasScale).translate(this.geoCanvasCenter);break;case"albers":this.geoProjection=this.mapObject.albers().center(n).scale(this.geoCanvasScale*r).translate(this.geoCanvasCenter).clipAngle(90).precision(.5);break;case"orthographic":this.geoProjection=this.mapObject.orthographic().scale(this.geoCanvasScale*r).translate(this.geoCanvasCenter).clipAngle(90).precision(.5).rotate(n)}this.geoPath=this.mapObject.path().projection(this.geoProjection).context(o)}},CanvasXpress.images={"01":"https://www.canvasxpress.org/assets/images/core/01.png","02":"https://www.canvasxpress.org/assets/images/core/02.png","03":"https://www.canvasxpress.org/assets/images/core/03.png","04":"https://www.canvasxpress.org/assets/images/core/04.png","05":"https://www.canvasxpress.org/assets/images/core/05.png","06":"https://www.canvasxpress.org/assets/images/core/06.png","07":"https://www.canvasxpress.org/assets/images/core/07.png","08":"https://www.canvasxpress.org/assets/images/core/08.png",10:"https://www.canvasxpress.org/assets/images/core/10.png",11:"https://www.canvasxpress.org/assets/images/core/11.png",15:"https://www.canvasxpress.org/assets/images/core/15.png",23:"https://www.canvasxpress.org/assets/images/core/23.png",29:"https://www.canvasxpress.org/assets/images/core/29.png",30:"https://www.canvasxpress.org/assets/images/core/30.png",31:"https://www.canvasxpress.org/assets/images/core/31.png",32:"https://www.canvasxpress.org/assets/images/core/32.png",36:"https://www.canvasxpress.org/assets/images/core/36.png",46:"https://www.canvasxpress.org/assets/images/core/46.png",47:"https://www.canvasxpress.org/assets/images/core/47.png",48:"https://www.canvasxpress.org/assets/images/core/48.png",49:"https://www.canvasxpress.org/assets/images/core/49.png",50:"https://www.canvasxpress.org/assets/images/core/50.png",54:"https://www.canvasxpress.org/assets/images/core/54.png",56:"https://www.canvasxpress.org/assets/images/core/56.png",58:"https://www.canvasxpress.org/assets/images/core/58.png",59:"https://www.canvasxpress.org/assets/images/core/59.png",60:"https://www.canvasxpress.org/assets/images/core/60.png",61:"https://www.canvasxpress.org/assets/images/core/61.png",62:"https://www.canvasxpress.org/assets/images/core/62.png",63:"https://www.canvasxpress.org/assets/images/core/63.png",67:"https://www.canvasxpress.org/assets/images/core/67.png",68:"https://www.canvasxpress.org/assets/images/core/68.png",69:"https://www.canvasxpress.org/assets/images/core/69.png",71:"https://www.canvasxpress.org/assets/images/core/71.png",99:"https://www.canvasxpress.org/assets/images/core/99.png",canvasXpress:"data:image/png;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",cytoplasm:"https://www.canvasxpress.org/assets/images/core/cytoplasm.png",epr:"https://www.canvasxpress.org/assets/images/core/epr.png",extracellular:"https://www.canvasxpress.org/assets/images/core/extracellular.png",lisosome:"https://www.canvasxpress.org/assets/images/core/lisosome.png",lysosome:"https://www.canvasxpress.org/assets/images/core/lysosome.png",microsome:"https://www.canvasxpress.org/assets/images/core/microsome.png",mitochondria:"https://www.canvasxpress.org/assets/images/core/mitochondria.png",mitochondria2:"https://www.canvasxpress.org/assets/images/core/mitochondria2.png",nucleous:"https://www.canvasxpress.org/assets/images/core/nucleous.png",nucleus:"https://www.canvasxpress.org/assets/images/core/nucleus.png",peroxisome:"https://www.canvasxpress.org/assets/images/core/peroxisome.png"},CanvasXpress.icons={symbols:{tb_app:'<g class="cxa"><rect x="14" y="13" width="6" height="6" /><rect x="30" y="13" width="6" height="6" /><rect x="46" y="13" width="6" height="6" /></g><g class="cxb"><line x1="2" y1="30" x2="96" y2="30" /><rect x="2" y="2" width="96" height="96" rx="5" /></g>',rt_c:'<g class="cxb"><path d=" M 95 50 A 45 45 0 1 1 82 18" /><line x1="82" y1="0" x2="82" y2="18" /><line x1="64" y1="18" x2="84" y2="18" /></g>',bx_median:'<g class="cxb"><rect x="30" y="20" width="40" height="60" /><line x1="30" y1="2" x2="70" y2="2" /><line x1="50" y1="2" x2="50" y2="20" /><line x1="30" y1="98" x2="70" y2="98" /><line x1="50" y1="98" x2="50" y2="80" /></g><g class="cxa"><line x1="30" y1="50" x2="70" y2="50" /></g>',ar_bs:'<path class="cxtxb" d="M42,62 L50,70 L58,62 M50,70 L50,30" />',g_treemap:'<g class="cxbb"><rect x="48" y="83.3" width="33.1" height="14.4"/><rect x="59.5" y="23" width="38.1" height="38.9"/><rect x="25.4" y="35.9" width="22.6" height="45.5"/><rect x="2.3" y="2.2" width="45.7" height="45.7"/></g><g class="cxcc"><rect x="80.4" y="72.6" width="16.6" height="25.1"/><rect x="25.1" y="79" width="22.9" height="18.6"/><rect x="48" y="61.9" width="31.8" height="21.3"/><rect x="48" y="2.2" width="49.1" height="20.8"/></g><g class="cxa"><rect x="2.3" y="2.2" width="95.5" height="95.5"/><rect x="2.3" y="2.2" width="45.7" height="45.7"/><line x1="97" y1="23" x2="48" y2="23"/><line x1="48" y1="47.9" x2="48" y2="97.6"/><rect x="2.3" y="47.9" width="22.9" height="49.7"/><line x1="25.1" y1="79" x2="48" y2="79"/><rect x="48" y="61.9" width="31.8" height="21.3"/><rect x="79.8" y="61.9" width="17.9" height="35.7"/><line x1="79.8" y1="72.6" x2="97.6" y2="72.6"/><line x1="59.5" y1="23" x2="59.5" y2="61.9"/></g>',bx_data:'<g class="cxb"><rect x="30" y="20" width="40" height="60" /><line x1="30" y1="2" x2="70" y2="2" /><line x1="50" y1="2" x2="50" y2="20" /><line x1="30" y1="98" x2="70" y2="98" /><line x1="50" y1="98" x2="50" y2="80" /></g><g class="cxa"><rect x="38" y="50" width="3" height="3" /><rect x="40" y="28" width="3" height="3" /><rect x="38" y="68" width="3" height="3" /><rect x="50" y="40" width="3" height="3" /><rect x="55" y="55" width="3" height="3" /><rect x="60" y="30" width="3" height="3" /><rect x="60" y="65" width="3" height="3" /></g>',ch_cctrl2:'<text class="cxtn60" x="5" y="70">Ctrl</text>',v_next:'<circle class="cxb" cx="50" cy="50" r="48" /><text class="cxtn100" x="10" y="0" transform="rotate(90)">⌃</text>',v_cancelsmall:'<circle class="cxa" cx="50" cy="50" r="35" /><text class="cxtn60 cxrr" x="35" y="66">x</text>',p_cg3axes:'<g class="cxb"><line x1="10" y1="2" x2="10" y2="98" /><line x1="2" y1="10" x2="10" y2="10" /><line x1="2" y1="30" x2="10" y2="30" /><line x1="2" y1="50" x2="10" y2="50" /><line x1="2" y1="70" x2="10" y2="70" /><line x1="2" y1="90" x2="98" y2="90" /><line x1="10" y1="90" x2="10" y2="98" /><line x1="30" y1="90" x2="30" y2="98" /><line x1="50" y1="90" x2="50" y2="98" /><line x1="70" y1="90" x2="70" y2="98" /><line x1="90" y1="90" x2="90" y2="98" /><line x1="10" y1="90" x2="70" y2="30" /><line x1="55" y1="45" x2="65" y2="45" /><line x1="40" y1="60" x2="50" y2="60" /><line x1="25" y1="75" x2="35" y2="75" /></g>',op_more:'<g class="cxa"><circle cx="50" cy="50" r="48"/></g><g class="cxb"><line x1="15" y1="50" x2="85" y2="50" /><line x1="50" y1="15" x2="50" y2="85" /></g>',m_wheel:'<g class="cxaa"><path d="M50,25 Q 55,25 55,30 L55,40 Q 55,45 50,45 Q 45,45 45,40 L45,30 Q 45,25 50,25" /></g>',g_arealine:'<polygon class="cxbc" points="11.9 86.3 40 57.1 55 67.9 76.8 37 92.6 67.8 99.9 58.8 99.9 86 11.9 86.3" /><g class="cxb"><polyline points="11.9 86.3 40 57.1 55 67.9 76.8 37 92.6 67.8 99.9 58.8" /><polyline points="11.9 61.7 40 30 53 43.4 79.9 3.7 99.9 39.2" /></g><g class="cxa"><line x1="11.9" y1="0.1" x2="11.9" y2="100" /><line x1="99.9" y1="86" y2="86" x2="0"/><line y1="62.6" x2="11.9" y2="62.6" x1="0"/><line y1="39.2" x2="11.9" y2="39.2" x1="0"/><line y1="15.7" x2="11.9" y2="15.7" x1="0"/></g>',bx_typewishkers:'<g class="cxb"><rect x="40" y="30" width="20" height="40" /><line x1="40" y1="51" x2="60" y2="51" /><line x1="40" y1="2" x2="60" y2="2" /><line x1="50" y1="2" x2="50" y2="30" /><line x1="50" y1="70" x2="50" y2="98" /><line x1="40" y1="98" x2="60" y2="98" /></g>',g_circular:'<g class="cxa"><circle cx="50" cy="50" r="37.9"/><line x1="23" y1="76.6" x2="16.9" y2="84.6"/><circle cx="50" cy="50" r="47.9"/><circle cx="50" cy="50" r="18.6"/></g><g class="cxa"><line x1="50" y1="2.2" x2="50" y2="12.1"/></g><g class="cxb"><line x1="50" y1="20.2" x2="50" y2="24"/><line x1="50" y1="79.8" x2="50" y2="76"/><line x1="79.8" y1="50" x2="76" y2="50"/><line x1="20.2" y1="50" x2="24" y2="50"/><line x1="71.1" y1="28.9" x2="68.4" y2="31.6"/><line x1="28.9" y1="71.1" x2="31.6" y2="68.4"/><line x1="71.1" y1="71.1" x2="68.4" y2="68.4"/><line x1="28.9" y1="28.9" x2="31.6" y2="31.6"/><line x1="61.3" y1="22.4" x2="59.8" y2="25.9"/><line x1="38.7" y1="77.6" x2="40.2" y2="74.1"/><line x1="77.6" y1="61.3" x2="74.1" y2="59.8"/><line x1="22.4" y1="38.7" x2="25.9" y2="40.2"/><line x1="77.5" y1="38.5" x2="74" y2="39.9"/><line x1="22.5" y1="61.6" x2="26" y2="60.1"/><line x1="61.6" y1="77.5" x2="60.1" y2="74"/><line x1="38.5" y1="22.5" x2="39.9" y2="26"/><path d="M 87.9 50 C 87.9 59.7 84.1 69.1 77.4 76.1 L 83.7 83.8 C 109.8 57.8 97.9 13.4 62.4 3.8 C 58.3 2.7 54.2 2.2 50 2.2 L 50 12.1 C 71 12.1 87.9 29.1 87.9 50 Z"/></g>',at_col:'<circle class="cl12" cx="50" cy="34.8" r="30.3"/><circle class="cl13" cx="69.7" cy="65.2" r="30.3"/><circle class="cl14" cx="30.3" cy="65.2" r="30.3"/><ellipse class="cl15" cx="50" cy="65.2" rx="10.7" ry="23.1"/><path class="cl16" d="M39.4,63.3c15.7,5.9,33.1-2.1,39-17.8c1-2.8,1.7-5.7,1.9-8.7c-3.4-1.3-6.9-1.9-10.5-1.9C53.7,34.8,40.4,47.2,39.4,63.3z"/><path class="cl17" d="M60.6,63.3C44.9,69,27.5,61,21.7,45.3c-1-2.7-1.6-5.6-1.8-8.5c3.4-1.3,7-1.9,10.6-1.9C46.4,34.9,59.6,47.3,60.6,63.3z"/><path class="cl18" d="M50,65.2c3.6,0,7.2-0.7,10.6-1.9c0,0,0,0,0-0.2c-0.1-0.9-0.2-1.7-0.3-2.6c0-0.1,0-0.3,0-0.4c0-0.8-0.3-1.7-0.5-2.5v-0.3c-0.9-3.2-2.3-6.2-4.2-9c-0.3-0.4-0.5-0.8-0.8-1.1c-0.3-0.3-0.6-0.7-0.9-1.1c-0.3-0.4-0.7-0.9-1.1-1.3L52,43.8c-0.5-0.5-0.9-0.9-1.4-1.4L50,42.3c-6.2,5.3-10,12.9-10.5,21.1C42.8,64.6,46.4,65.2,50,65.2z"/>',ch_cdelete:'<text class="cxtn80" x="0" y="80">&#9003;</text>',g_line:'<g class="cxa"><line x1="11.9" x2="11.9" y2="100" y1="0"/><line x1="100" y1="86" y2="86" x2="0"/><line y1="62.6" x2="11.9" y2="62.6" x1="0"/><line y1="39.1" x2="11.9" y2="39.1" x1="0"/><line y1="15.6" x2="11.9" y2="15.6" x1="0"/></g><g class="cxb"><polyline points="24.3 73.9 54 42.6 62.7 50.7 90.2 19.4"/></g>',at_palette:'<path class="cxb" d="M2,50 C 2,25 25,2 50,2 C 73,2 98,25 98,50 C 98,57 97,63 90,63 C 90,53 81,53 78,60 C 92,79 73,98 50,98 C 25,98 2,75 2,50" /><g class="cxa"><circle cx="20" cy="45" r="8" /><circle cx="35" cy="25" r="8" /><circle cx="63" cy="23" r="8" /><circle cx="80" cy="40" r="8" /><path d="M50,75 C 65,75 65,88 50,88 C 35,88 35,75 50,75" /></g>',ps_bottom:'<path class="cxtxb" d="M42,62 L50,70 L58,62 M50,70 L50,30" /><g class="cxa"><rect x="40" y="78" width="20" height="20" rx="2" /></g>',ch_coption:'<text class="cxtb100" x="0" y="85">&#8997;</text>',c_r:'<g class="cxb"><path d="M 40.1 72.2 C 19.2 69.5 3.5 58.7 3.5 45.5 C 3.5 30.5 24.3 18.3 50.1 18.3 C 75.7 18.3 96.5 30.5 96.5 45.5 C 96.5 53.4 90.9 60.4 81.9 65.4" /><path d="M 68.7 70.6 C 64.8 71.6 60.7 72.3 56.7 72.6" /><path d="M 40.1 63.1 C 29.5 59.9 22.4 54 22.4 47.2 C 22.4 37.2 37.8 29.1 56.8 29.1 C 62.7 29.1 68.6 29.9 74.2 31.6 C 77.3 32.7 80.2 34 83 35.5" /></g><path class="cxa" d="M 80.2 62.8 C 91 60.6 95.6 47.6 88.3 39.2 C 85.6 36.1 81.5 34.3 77.4 34.3 L 40.1 34.3 L 40.1 81.7 L 56.7 81.7 L 56.7 63.1 L 63.8 63.1 L 75.9 81.7 L 92.5 81.7 Z M 70.4 54.3 L 55.9 54.3 L 55.9 43.2 L 70.4 43.2 C 74.6 42.8 77.7 47.2 75.9 51.1 C 74.9 53.2 72.8 54.5 70.4 54.3 Z" />',ar_ts:'<path class="cxtxb" d="M42,38 L50,30 L58,38 M50,70 L50,30" />',op_redo:'<g class="cxa"><path d="M94.5,31.5l-39.8-29V16h-1.1C27.4,15.6,5.8,36.6,5.5,62.8c0,0,0,0.1,0,0.1c0,13.2,5.7,25.7,15.5,34.5c-3.4-5.4-5.3-11.6-5.3-18C16,60,31.9,44.5,51.4,44.8c0,0,0,0,0,0c1.1,0,2.3,0,3.4,0.2v15.6L94.5,31.5z"/></g>',v_backward:'<circle class="cxb" cx="50" cy="50" r="48" /><text class="cxtn60" x="3" y="73">&#9664;</text><text class="cxtn60" x="25" y="73">&#9664;</text>',fp_pin:'<g class="cxb"><line x1="32.9" y1="68" x2="2.6" y2="98.2"/><path d="M80.3,41.4L58.1,63.5c-2.2,2.1-8.8-1-14.8-7s-9.1-12.6-7-14.8l21.9-22.1"/></g><g class="cxa"><path d="M63.6,58c6.8,11.4,7.7,22.7,3.9,26.5c-5,5-20.6-2.4-34.7-16.5S11.3,38.5,16.3,33.3c3.7-3.7,14.4-2.2,25.4,3.9"/><ellipse transform="matrix(0.7071 -0.7071 0.7071 0.7071 9.1516 62.3116)" cx="79.8" cy="20.1" rx="8.4" ry="23.5"/><path d="M96.5,36.6l-5.9,5.9c-3.2,3.3-13.3-1.5-22.5-10.7S54.1,12.6,57.4,9.4l5.9-5.9"/></g>',c_ggplot:'<polygon class="cl20" points="8.5,26 8.5,74 50,98 91.6,74 91.6,26 50,2"/><rect x="12.7" y="23.8" class="cl21" width="75.7" height="0.8"/><rect x="9.6" y="41.9" class="cl21" width="82" height="0.8"/><rect x="9.6" y="60" class="cl21" width="82" height="0.8"/><rect x="20.2" y="79" class="cl21" width="60.6" height="0.8"/><rect x="31.2" y="13" class="cl21" width="0.8" height="74.8"/><rect x="12.8" y="23" class="cl21" width="0.8" height="54.8"/><rect x="67.7" y="13" class="cl21" width="0.8" height="74.8"/><rect x="86.1" y="23" class="cl21" width="0.8" height="54.8"/><rect x="49.5" y="2.3" class="cl21" width="0.8" height="96.1"/><polygon class="cl22" points="12.7,52 11,49.3 45.7,26.8 55,41.5 85.7,22.4 87.4,25.2 54,45.8 44.7,31.2 \t\t"/><path class="cl23" d="M82.8,20.3c-2.1,1.5-2.6,4.4-1.1,6.5s4.4,2.6,6.5,1.1c0.9-0.7,1.6-1.7,1.9-2.8C88.2,24,85,21.8,82.8,20.3z"/><circle class="cl24" cx="11.8" cy="51.4" r="4.7"/><circle class="cl25" cx="27.6" cy="39.6" r="4.7"/><circle class="cl26" cx="44.9" cy="29.2" r="4.7"/><circle class="cl27" cx="54.8" cy="43.6" r="4.7"/><circle class="cl28" cx="70.9" cy="33.2" r="4.7"/><path class="cl22" d="M50,3.7l40.1,23.2v46.4L50,96.3L9.9,73.2V26.8L50,3.7 M50,0L6.7,25v50L50,100l43.3-25V25L50,0z"/><path class="cl22" d="M29.9,60.5c0,0.7,0,1.5,0,2.6v5.5c0.2,1.6-0.2,3.1-1.2,4.4c-0.9,0.8-2,1.2-3.2,1.1c-1,0-2-0.4-2.9-1l0.4-1.3c0.7,0.5,1.6,0.8,2.5,0.8c1.6,0,2.7-0.9,2.7-3.2v-1.1l0,0c-0.5,1-1.6,1.6-2.7,1.6c-2.1,0-3.6-2-3.6-4.7c0-3.2,1.9-5.1,3.8-5.1c1.2,0,2.2,0.6,2.7,1.7l0,0v-1.5L29.9,60.5z M28.3,64.3c0-0.3,0-0.5,0-0.8c-0.2-1-1.1-1.8-2.2-1.8c-1.5,0-2.5,1.4-2.5,3.6s0.9,3.4,2.5,3.4c1-0.1,1.9-0.8,2.1-1.8c0-0.3,0-0.6,0-0.9L28.3,64.3z"/><path class="cl22" d="M39.7,60.5c0,0.7,0,1.5,0,2.6v5.5c0.2,1.5-0.2,3-1.1,4.2c-0.9,0.8-2,1.2-3.2,1.1c-1,0-2-0.3-2.9-0.8l0.4-1.3c0.7,0.5,1.6,0.8,2.5,0.8c1.6,0,2.8-0.9,2.8-3.2v-1.1l0,0c-0.6,1-1.6,1.6-2.8,1.7c-2.1,0-3.6-2-3.6-4.7c0-3.2,1.9-5.1,3.8-5.1c1.1,0,2.2,0.6,2.6,1.7l0,0v-1.5L39.7,60.5z M38.1,64.3c0-0.3,0-0.5,0-0.8c-0.2-1-1.1-1.8-2.2-1.8c-1.5,0-2.5,1.4-2.5,3.6s0.8,3.4,2.5,3.4c1-0.1,1.9-0.8,2-1.8c0-0.3,0-0.6,0-0.9L38.1,64.3z"/><path class="cl22" d="M42.1,63.5c0-1.2,0-2.2,0-3.2h1.4v1.7l0,0c0.5-1.2,1.7-1.9,3-1.9c2.1,0,3.6,2,3.6,4.9c0,3.4-1.8,5.2-3.9,5.2c-1.1,0-2.1-0.5-2.6-1.5l0,0v5.2h-1.5L42.1,63.5z M43.6,66c0,0.2,0,0.5,0,0.7c0.2,1.1,1.2,2,2.3,2c1.6,0,2.6-1.5,2.6-3.7s-0.9-3.6-2.5-3.6c-1.2,0.1-2.1,1-2.3,2.2c0,0.2,0,0.5,0,0.7L43.6,66z"/><path class="cl22" d="M52.1,55.9h1.5V70h-1.5V55.9z"/><path class="cl22" d="M64,65c0,3.5-2.2,5.1-4.2,5.1s-4.1-1.9-4.1-4.9c0-3,1.8-5.1,4.2-5.1S64,62.1,64,65z M57.3,65c0,2.1,1.1,3.7,2.6,3.7s2.6-1.6,2.6-3.7c0-1.6-0.7-3.7-2.5-3.7S57.2,63.3,57.3,65L57.3,65z"/><path class="cl22" d="M67.8,57.6v2.9H70v1.3h-2.2v5c0,1.2,0.3,1.8,1.1,1.8c0.3,0,0.6,0,0.9,0V70c-0.4,0.2-0.9,0.2-1.4,0.2c-0.6,0-1.2-0.2-1.7-0.7c-0.5-0.8-0.7-1.7-0.5-2.6v-5.2h-1.3v-1.2h1.3v-2.3L67.8,57.6z"/><path class="cl22" d="M71.2,70V69l1.2-1.3c2.9-3.2,4.2-4.8,4.2-6.7c0-1.3-0.5-2.5-2.3-2.5c-0.9,0-1.8,0.4-2.4,1.1l-0.5-1.2c0.9-0.8,2-1.3,3.2-1.3c1.9-0.1,3.5,1.4,3.6,3.3c0,0.1,0,0.2,0,0.2c0,2.4-1.5,4.3-3.9,6.9l-0.9,0.9l0,0h5.2V70H71.2z"/>',p_g1:'<g class="cxc"><rect x="45" y="0" width="20" height="2"/><rect x="50" y="10" width="10" height="2"/><rect x="38" y="40" width="5" height="20"/><rect x="56" y="20" width="5" height="40"/><line x1="25" y1="65" x2="85" y2="65" /><rect x="0" y="25" width="3" height="25"/><line x1="25" y1="15" x2="25" y2="65" /><line x1="15" y1="25" x2="25" y2="25" /><line x1="15" y1="45" x2="25" y2="45" /><line x1="15" y1="65" x2="25" y2="65" /><rect x="97" y="25" width="3" height="25"/><line x1="75" y1="15" x2="75" y2="65" /><line x1="75" y1="25" x2="85" y2="25" /><line x1="75" y1="45" x2="85" y2="45" /><line x1="75" y1="65" x2="85" y2="65" /><rect x="38" y="75" width="5" height="2"/><rect x="56" y="75" width="5" height="2"/><rect x="35" y="85" width="30" height="2"/><rect x="75" y="95" width="20" height="2"/></g>',ps_toloc3:'<path class="cxtxb" d="M2,78 L2,98 L22,98 M78,2 L98,2 L98,22 M2,98 L98,2" /><path class="cxtxb" d="M98,78 L98,98 L78,98 M2,22 L2,2 L22,2 M2,2 L98,98" /><g class="cxaa"><rect x="36" y="36" width="25" height="25" /></g>',wp_instances:'<g class="cxb"><polyline points="17.2 31.7 17.2 16.6 82.7 16.6 82.7 82.1 67.7 82.1"/><polyline points="32.3 17.7 32.3 2.7 97.8 2.7 97.8 68.3 82.7 68.3"/></g><g class="cxa"><rect x="2.2" y="31.7" width="65.5" height="65.5"/></g>',g_contour2:'<g class="cxc"><path d="M 56.1 92.7 L 21.1 92.7 C 17.4 92.8 14.3 89.8 14.3 86 L 14.3 82.1 C 14.3 80.4 13.1 79.1 11.4 79.1 L 11.4 79.1 C 9.8 79.1 8.4 77.7 8.4 76.2 L 8.4 29.7 L 14.3 29.7 L 14.3 22.2 L 20.3 22.2 L 20.3 18.4 L 25 18.4 L 25 13.3 L 29.9 13.3 L 29.9 8.7 L 33.6 8.7 L 33.6 5.8 L 37.8 5.8 L 37.8 2.8 L 50 2.8 L 50 6.6 L 62.5 6.6 L 62.5 10.9 L 69.1 10.9 L 69.1 15.7 L 74 15.7 L 74 20 L 77.5 20 L 77.5 27 L 82.5 27 L 82.5 34.9 L 86.2 34.9 L 86.2 50.9 L 90.8 50.9 L 90.8 69.8 L 86.5 69.8 L 86.5 80.1 L 82.5 80.1 L 82.5 90.6 C 82.5 91.8 81.5 92.7 80.2 92.7 L 80.2 92.7 C 78.9 92.7 77.9 93.8 77.9 95 L 77.9 95 C 77.9 96.3 76.9 97.3 75.6 97.3 L 60.8 97.3 C 59.6 97.3 58.6 96.3 58.6 95 L 58.6 95 C 58.6 93.7 57.5 92.6 56.1 92.7 Z"/><polygon points="63 78.5 69.8 78.5 69.8 70.7 78.5 70.7 78.5 59.1 74 59.1 74 50.6 69.5 50.6 69.5 39.4 66.7 39.4 66.7 31.7 62.5 31.7 62.5 27.5 54.2 27.5 54.2 22.9 33.9 22.9 33.9 27.4 30.1 27.3 30.1 29.8 26.2 29.8 26.2 34.7 22.8 34.7 22.8 75.1 25.4 75.1 25.4 79.2 29.5 79.2 29.5 83.1 63 83.1 63 78.5"/><polygon points="38.4 42.7 38.4 38.9 49.9 38.9 49.9 43.2 53.7 43.2 53.7 71.1 38.4 71.1 38.4 63.2 34 63.2 34 42.7 38.4 42.7"/><polyline points="77.9 2.9 85.9 2.9 85.9 11.4 90 11.4 90 15 93.9 15 93.9 22.9 98.2 22.9 98.2 31.2"/><polyline points="21.9 2.9 14 2.9 14 7.2 10.1 7.2 10.1 15.4 1.8 15.4"/></g>',wp_dom:'<g class="cxb"><polyline points="50.1 44.8 50.1 62 66.6 62"/><polyline points="18 21.6 18 38.8 34.4 38.8"/><line x1="50.1" y1="62" x2="50.1" y2="78.5"/></g><g class="cxa"><rect x="66.6" y="54.3" width="31.1" height="15.6"/><rect x="2.3" y="5.9" width="31.1" height="15.6"/><rect x="34.4" y="31" width="31.1" height="15.6"/><rect x="34.4" y="78.5" width="31.1" height="15.6"/></g>',p_g3axistitlex:'<g class="cxblue"><rect x="40" y="85" width="30" height="2"/></g>',ch_ls:'<text class="cxtb100" x="15" y="85">S</text>',ch_lp:'<text class="cxtb100" x="15" y="85">P</text>',tx_shadow:'<path fill="url(#ts-grad)" d="M100,52.3l-11.7,9.8h-1.6c1.3-1.4,2.2-3,2.7-4.9c0-1-0.6-1.8-1.8-2.3c-1.7-0.4-3.5-0.6-5.2-0.5H78L44.8,82.3c-1.4,0.9-2.6,2.1-3.6,3.3c-0.2,0.4-0.1,0.8,0.5,1.2c1.1,0.4,2.2,0.6,3.3,0.5h2l-1.2,1H14.9l1.2-1h2c1.6,0,3.2-0.2,4.8-0.5c1.2-0.3,2.3-0.7,3.3-1.3c1.6-1,3.1-2.1,4.5-3.3l33.2-27.9h-4.3c-3.6,0-7.1,0.5-10.5,1.5c-4.3,1.5-8.4,3.6-12.1,6.2h-1.7L47,52.2L100,52.3z"/><g class="cxaa"><path d="M69.1,11.5v20.8h-2c-0.8-3.7-2.1-7.2-4-10.4c-1.6-2.2-3.7-3.9-6.2-5c-2.4-0.8-5-1.2-7.6-1h-5.6v59.4c-0.2,2.5,0.1,5,0.6,7.4c0.6,1.1,1.5,2,2.5,2.6c1.6,0.8,3.4,1.2,5.2,1.1h2.5v2.1H14.5v-2.1h2.6c1.8,0,3.6-0.4,5.2-1.2c1.1-0.6,1.9-1.6,2.3-2.7c0.6-2.3,0.8-4.8,0.6-7.2V16h-5.6c-4.1-0.4-8.1,0.8-11.3,3.3c-3.5,3.5-5.7,8.1-6.3,13.1H0V11.5H69.1z"/></g>',p_g2axistitlex:'<g class="cxblue"><rect x="40" y="85" width="30" height="2"/></g>',ar_dcbls2:'<text class="cxtn60 cxaa" x="53" y="51" transform="rotate(45)">&#10555;</text><text class="cxtn60 cxaa" x="-86" y="51" transform="rotate(45) scale(-1,1)">&#10555;</text>',p_g1axis1:'<g class="cxblue"><line x1="25" y1="15" x2="25" y2="65" /><line x1="15" y1="25" x2="25" y2="25" /><line x1="15" y1="45" x2="25" y2="45" /><line x1="15" y1="65" x2="25" y2="65" /></g>',c_excel:'<rect fill="url(\'#excel-grad1\')" x="3" y="3" width="93.2" height="93.2" /><polygon fill="url(\'#excel-grad2\')" points="84.6,24.5 61.1,24.5 17.9,71.3 41.5,71.3 59.8,71.3 50.6,61.4 "/><path fill="url(\'#excel-grad3\')" d="M93.2,6.8v86.5H6.8V6.8H93.2 M100,0H0v100h100V0z"/><polygon fill="url(\'#excel-grad4\')" points="90.2,78.7 66.6,78.7 16.6,24.5 40.2,24.5"/><polygon fill="url(\'#excel-grad5\')" points="90.2,78.7 66.6,78.7 16.6,24.5 40.2,24.5"/><polygon fill="url(\'#exel-grad6\')" points="75.1,62.4 84.6,50.7 64.3,50.7"/>',ln_style:'<g class="cxa"><line x1="4" y1="23" x2="98" y2="23" /><line x1="4" y1="48" x2="98" y2="48" stroke-dasharray="5" /><line x1="4" y1="73" x2="98" y2="73" stroke-dasharray="15 5"/></g>',g_chord:'<g class="cxb"><path d="M 84.5 65.8 C 84.5 65.8 46.1 50 83.6 32.4"/><path d="M 84.5 65.8 C 84.5 65.8 47.4 48.6 42.2 87.2"/><path d="M 15.5 65.8 C 15.5 65.8 59.1 50.7 61.5 13.8"/><path d="M 12.1 50 C 12.1 50 59.8 66.4 87.4 43"/><path d="M 15 35.2 C 15 35.2 56.8 39 25.2 79"/><path d="M 72.8 80.4 C 72.8 80.4 15.8 48.8 75.9 22.3"/></g><g class="cxa"><path d="M 2.2 50 C 2.3 86.8 42.1 109.8 74 91.3 C 75.6 90.4 77.1 89.4 78.6 88.3 L 72.7 80.4 C 49.3 97.9 15.7 83.4 12.3 54.4 C 12.2 53 12.1 51.5 12.1 50 L 2.2 50 Z"/><path d="M 15 35.2 C 25.3 11 56.6 4.3 75.9 22.3 L 82.6 15.1 C 58.3 -7.6 18.9 0.9 6 31.4 L 15 35.2 Z"/><path d="M 87.4 79.8 C 99.3 64.9 101.2 44.2 92.1 27.4 L 83.7 32.4 C 90.7 45.8 89.1 62.2 79.5 74 L 87.4 79.8 Z"/></g>',ps_toloc2:'<path class="cxtxb" d="M35,80 L50,98 L65,80 M35,20 L50,2 L65,20 M50,98 L50,2" /><path class="cxtxb" d="M80,35 L98,50 L80,65 M20,35 L2,50 L20,65 M98,50 L2,50" /><g class="cxaa"><rect x="36" y="36" width="25" height="25" /></g>',g_stackedline:'<g class="cxcc"><rect x="76.7" y="51.4" width="15.1" height="34.7"/><rect x="50" y="64.3" width="15.1" height="21.8"/><rect x="23.2" y="71" width="15.1" height="15.1"/></g><g class="cxb"><rect x="23.2" y="56" width="15.1" height="30.1"/><rect x="50" y="42.5" width="15.1" height="43.6"/><rect x="76.7" y="30.4" width="15.1" height="55.6"/><line x1="23.2" y1="71" x2="38.4" y2="71"/><line x1="49.7" y1="64.3" x2="65.1" y2="64.3"/><line x1="76.7" y1="51.4" x2="91.9" y2="51.4"/></g><g class="cxa"><line x1="11.9" y1="0.5" x2="11.9" y2="100"/><line x1="99.4" y1="86.1" y2="86.1" x2="0"/><line y1="62.7" x2="11.9" y2="62.7" x1="0"/><line y1="39.4" x2="11.9" y2="39.4" x1="0"/><line y1="16.1" x2="11.9" y2="16.1" x1="0"/><polyline points="23.2 42.5 49.7 19.6 59.5 28.6 89.1 0.5"/></g>',a_alignright:'<g class="cxb"><rect x="40" y="2" width="45" height="38" rx="5" /><rect x="10" y="52" width="75" height="38" rx="5" /></g><g class="cxa"><line x1="97" y1="1" x2="97" y2="99" /></g>',ln_styledashed:'<g class="cxa"><line x1="4" y1="50" x2="98" y2="50" stroke-dasharray="15 5" /></g>',dp_binl:'<g class="cxb"><circle cx="50" cy="3" r="2.5" /><circle cx="50" cy="18" r="2.5" /><circle cx="50" cy="33" r="2.5" /><circle cx="43" cy="33" r="2.5" /><circle cx="50" cy="50" r="2.5" /><circle cx="43" cy="50" r="2.5" /><circle cx="36" cy="50" r="2.5" /><circle cx="50" cy="65" r="2.5" /><circle cx="43" cy="65" r="2.5" /><circle cx="50" cy="80" r="2.5" /><circle cx="50" cy="97" r="2.5" /></g>',v_previous:'<circle class="cxb" cx="50" cy="50" r="48" /><text class="cxtn100" x="-90" y="100" transform="rotate(-90)">⌃</text>',wp_code:'<g class="cxa"><polyline points="29.9 77.9 2.1 50 29.9 22.1" /><polyline points="70 77.9 97.9 50 70 22.1" /></g><g class="cxb"><line x1="60.2" y1="12.5" x2="39.6" y2="87.5" /></g>',bx_meanc:'<g class="cxb"><rect x="30" y="20" width="40" height="60" /><line x1="30" y1="50" x2="70" y2="50" /><line x1="30" y1="2" x2="70" y2="2" /><line x1="50" y1="2" x2="50" y2="20" /><line x1="30" y1="98" x2="70" y2="98" /><line x1="50" y1="98" x2="50" y2="80" /></g><g class="cxa"><rect x="40" y="40" width="20" height="20" /></g>',mr_bottom:'<g class="cxa"><line x1="2" y1="77" x2="98" y2="77" /></g>',ga_axisx:'<g class="cxb"><line x1="2" y1="50" x2="98" y2="50" /><line x1="2" y1="50" x2="17" y2="35" /><line x1="2" y1="50" x2="17" y2="65" /><line x1="98" y1="50" x2="83" y2="35" /><line x1="98" y1="50" x2="83" y2="65" /></g><text class="cxtn40 cxaa" x="38" y="38">X</text>',g_functions:'<g class="cxb"><line x1="10" y1="2" x2="10" y2="98" /><line x1="2" y1="10" x2="10" y2="10" /><line x1="2" y1="30" x2="10" y2="30" /><line x1="2" y1="50" x2="10" y2="50" /><line x1="2" y1="70" x2="10" y2="70" /><line x1="2" y1="90" x2="98" y2="90" /><line x1="10" y1="90" x2="10" y2="98" /><line x1="30" y1="90" x2="30" y2="98" /><line x1="50" y1="90" x2="50" y2="98" /><line x1="70" y1="90" x2="70" y2="98" /><line x1="90" y1="90" x2="90" y2="98" /></g><g class="cxa"><path d="M15,90 C80,75 30,25 95,10" /></g>',at_sch:'<circle class="clt0" cx="11" cy="89" r="4.3"/><path class="clt1" d="M100,78v22l0,0H11c-6.1,0-11-5-11-11v0C0,83,5,78,11,78H100L100,78z"/><rect x="80.8" y="78" class="clt2" width="19.2" height="22"/><rect x="61.6" y="78" class="clt3" width="19.2" height="22"/><rect x="42.5" y="78" class="clt4" width="19.2" height="22"/><rect x="23.3" y="78" class="clt5" width="19.2" height="22"/><path class="clt6" d="M83.3,35.9l10.8,19.2l0,0L16.4,98.6c-5.3,3-12,1.1-15-4.2l0,0c-3-5.3-1.1-12,4.2-15L83.3,35.9L83.3,35.9z"/><rect x="70.7" y="39.2" transform="matrix(0.8725 -0.4887 0.4887 0.8725 -14.2707 45.6597)" class="clt7" width="19.2" height="22"/><rect x="54" y="48.5" transform="matrix(0.8725 -0.4887 0.4887 0.8725 -20.9912 38.6718)" class="clt8" width="19.2" height="22"/><rect x="37.3" y="57.9" transform="matrix(0.8725 -0.4887 0.4887 0.8725 -27.6765 31.7204)" class="clt9" width="19.2" height="22"/><rect x="20.6" y="67.3" transform="matrix(0.8725 -0.4887 0.4887 0.8725 -34.3969 24.7323)" class="clt10" width="19.2" height="22"/><path class="clt11" d="M47.7,7l18.8,11.4l0,0l-46,76.2c-3.1,5.2-9.9,6.9-15.1,3.7l0,0c-5.2-3.1-6.9-9.9-3.7-15.1L47.7,7L47.7,7z"/><rect x="42.5" y="9.9" transform="matrix(0.5171 -0.8559 0.8559 0.5171 7.2816 54.7253)" class="clt12" width="19.2" height="22"/><rect x="32.6" y="26.3" transform="matrix(0.5171 -0.8559 0.8559 0.5171 -11.5756 54.1644)" class="clt13" width="19.2" height="22"/><rect x="22.7" y="42.7" transform="matrix(0.5171 -0.8559 0.8559 0.5171 -30.334 53.6064)" class="clt14" width="19.2" height="22"/><rect x="12.8" y="59.1" transform="matrix(0.5171 -0.8559 0.8559 0.5171 -49.1912 53.0452)" class="clt15" width="19.2" height="22"/><circle class="clt0" cx="11" cy="89" r="4.3"/><path class="clt16" d="M0,0h22l0,0v89c0,6.1-5,11-11,11h0C5,100,0,95,0,89L0,0L0,0z"/><circle class="clt0" cx="11" cy="89" r="4.3"/><rect x="0" class="clt17" width="22" height="19.2"/><rect x="0" y="19.2" class="clt18" width="22" height="19.2"/><rect x="0" y="38.3" class="clt19" width="22" height="19.2"/><rect x="0" y="57.5" class="clt20" width="22" height="19.2"/>',a_distributever:'<g class="cxb"><rect x="10" y="25" width="36" height="50" rx="5" /><rect x="54" y="5" width="36" height="90" rx="5" /></g><g class="cxa"><line x1="1" y1="50" x2="99" y2="50" /></g>',ch_lq:'<text class="cxtb100" x="8" y="85">Q</text>',ar_ls:'<path class="cxtxb" d="M38,42 L30,50 L38,58 M70,50 L30,50" />',wp_license:'<g class="cxa"><polygon points="90.1 56.9 97.7 49.1 89.6 40.9 93.7 30.9 83.2 26.4 83.2 15.6 71.6 15.6 67.3 5.5 56.9 9.8 49.1 2.3 40.9 10.5 30.9 6.2 26.4 16.8 15.6 16.8 15.6 28.4 5.5 32.6 9.8 43.1 2.3 50.7 10.5 58.9 6.2 69.1 16.8 73.5 16.8 84.3 28.4 84.3 32.6 94.5 43.1 90.1 50.7 97.7 58.9 89.6 69.1 93.7 73.5 83.2 84.3 83.2 84.3 71.6 94.5 67.3 90.1 56.9" /></g>',z_in:'<g class="cxaa"><text class="cxtn60" x="15" y="50">+</text></g><g class="cxb"><circle cx="35" cy="35" r="33" /><line x1="60" y1="60" x2="99" y2="99" /></g>',ch_lv:'<text class="cxtb100" x="15" y="85">V</text>',c_stata:'<path class="cl19" d="M22.7,38.5l-1.9,5.1H7c-1.1,0.1-1.8,1.1-1.7,2.1c0.1,0.9,0.8,1.6,1.7,1.7h8.6c3.9,0,7,3.2,7,7c0,3.9-3.2,7-7,7H0l1.9-5.1h13.7c1.1-0.1,1.8-1.1,1.7-2.1c-0.1-0.9-0.8-1.6-1.7-1.7H7c-3.9,0-7-3.2-7-7s3.2-7,7-7H22.7z"/><polygon class="cl19" points="62.6,38.5 60.6,43.6 67.1,43.6 67.1,61.5 72.2,61.5 72.2,43.6 77.3,43.6 79.3,38.5 "/><path class="cl19" d="M92.9,52.6h-9.9c-1.1,0-1.9,0.9-1.9,1.9c0,1.1,0.9,1.9,1.9,1.9h11.8v-3.8H92.9z M88.2,47.4h6.6v-2.1c0-1-0.9-1.8-1.9-1.8h-15l1.9-5h13.1c3.9,0,7.1,3.2,7.1,7.1c0,0,0,0,0,0v15.9H83.1c-3.9-0.2-6.9-3.5-6.7-7.4c0.2-3.6,3.1-6.5,6.7-6.7L88.2,47.4z"/><path class="cl19" d="M53.6,52.6h-9.9c-1.1,0-1.9,0.9-1.9,1.9c0,1.1,0.9,1.9,1.9,1.9h11.8v-3.8H53.6z M51.1,47.4h4.5v-2.1c0-1-0.9-1.8-1.9-1.8h-15l1.9-5h13.1c3.9,0,7,3.2,7,7.1l0,0v15.9H43.8c-3.9,0.2-7.2-2.8-7.4-6.7s2.8-7.2,6.7-7.4c0.3,0,0.5,0,0.8,0L51.1,47.4z"/><polygon class="cl19" points="23.3,38.5 21.4,43.6 27.8,43.6 27.8,61.5 32.9,61.5 32.9,43.6 38,43.6 40,38.5 "/>',g_tree:'<g class="cxb"><path d="M 40.5 25.6 L 35.6 25.6 C 31.2 25.5 27.1 27.8 24.8 31.6 L 12.4 51.4 L 23.2 68.5 C 25.5 72.2 29.5 74.4 33.8 74.4 L 40.5 74.4"/><path d="M 50.3 25.6 L 57.7 25.6 C 59.5 25.6 61.2 24.6 62.3 23.1 L 62.3 23.1 C 66.1 17.4 72.5 14 79.4 13.9 L 88.2 13.9"/><path d="M 50.3 25.6 L 57.7 25.6 C 59.5 25.6 61.2 26.5 62.3 28 L 62.3 28 C 66.1 33.7 72.5 37.1 79.4 37.2 L 88.2 37.2"/><path d="M 50.3 74.5 L 57.7 74.5 C 59.5 74.5 61.2 73.5 62.3 72 L 62.3 72 C 66.1 66.3 72.5 62.9 79.4 62.9 L 88.2 62.9"/><path d="M 50.3 74.5 L 57.7 74.5 C 59.5 74.5 61.2 75.4 62.3 76.9 L 62.3 76.9 C 66.1 82.6 72.5 86 79.4 86.1 L 88.2 86.1"/></g><g class="cxa"><circle cx="6.8" cy="51.4" r="4.9"/><circle cx="45.4" cy="25.6" r="4.9"/><circle cx="45.4" cy="74.5" r="4.9"/><circle cx="93.2" cy="13.9" r="4.9"/><circle cx="93.2" cy="37.3" r="4.9"/><circle cx="93.2" cy="62.7" r="4.9"/><circle cx="93.2" cy="86.2" r="4.9"/></g>',p_g3axistitlez:'<g class="cxblue"><line x1="55" y1="55" x2="65" y2="47"/></g>',ch_lc:'<text class="cxtb100" x="15" y="85">C</text>',c_rr:'<g class="cxb"><path d="M 50 15.2 C 23.4 15.2 1.8 30.7 1.8 50 C 1.8 69.2 23.4 84.8 50 84.8 C 76.6 84.8 98.1 69.2 98.1 50 C 98.1 30.7 76.6 15.2 50 15.2 Z M 56 73.5 C 36.3 73.5 20.2 62.9 20.2 50.1 C 20.2 37.3 36.3 26.7 56 26.7 C 75.8 26.7 91.9 37.2 91.9 50.1 C 91.9 63 75.9 73.5 56 73.5 Z"/></g><g class="cxaw"><path d="M 80.6 73.4 C 85.8 72.1 89.2 65.9 88.1 59.5 C 87.2 54 83.2 50 78.6 50 L 53.8 50 L 53.8 89 L 64.8 89 L 64.8 73.7 L 69.6 73.7 L 77.8 89 L 88.8 89 L 80.6 73.4 Z M 74 66.4 L 64.3 66.4 L 64.3 57.3 L 74 57.3 C 76.2 57.3 78 59.1 78 61.3 C 78 61.4 78 61.4 78 61.5 C 78.4 63.8 76.9 66 74.6 66.5 C 74.5 66.5 74.3 66.5 74 66.4 Z"/><path d="M 38.7 34.4 C 43.9 33.1 47.3 26.9 46.2 20.5 C 45.3 15 41.3 11 36.7 11 L 11.9 11 L 11.9 50 L 22.9 50 L 22.9 34.7 L 27.7 34.7 L 35.9 50 L 46.9 50 L 38.7 34.4 Z M 32.1 27.4 L 22.4 27.4 L 22.4 18.3 L 32.1 18.3 C 34.3 18.3 36.1 20.1 36.1 22.3 C 36.1 22.4 36.1 22.4 36.1 22.5 C 36.5 24.8 35 27 32.7 27.5 C 32.6 27.5 32.4 27.5 32.1 27.4 Z"/></g>',sr_az:'<path class="cxtxb" d="M2,80 L17,98 L32,80 M17,98 L17,2" /><path class="cxtxb" d="M27,20 L42,2 L57,20 M42,98 L42,2" /><g class="cxaa"><text class="cxtn60" x="60" y="45">A</text><text class="cxtn60" x="60" y="95">Z</text></g>',g_linearfit:'<g class="cxb"><line x1="30" y1="80" x2="98" y2="4" /></g><g class="cxa"><line x1="11.9" x2="11.9" y2="100" y1="0"/><line x1="100" y1="86" y2="86" x2="0"/><line y1="62.5" x2="11.9" y2="62.5" x1="0"/><line y1="39.1" x2="11.9" y2="39.1" x1="0"/><line y1="15.6" x2="11.9" y2="15.6" x1="0"/><line x1="32.5" y1="100" x2="32.5" y2="86"/><line x1="57.7" y1="100" x2="57.7" y2="86"/><line x1="82.8" y1="100" x2="82.8" y2="86"/></g><g class="cxaa"><circle cx="30.5" cy="61.5" r="4.6"/><circle cx="73.2" cy="16.9" r="4.6"/><circle cx="92.4" cy="33.3" r="4.6"/><circle cx="60.6" cy="63.5" r="4.6"/><circle cx="51.4" cy="34.5" r="4.6"/></g>',p_g1citation:'<g class="cxblue"><rect x="75" y="95" width="20" height="2"/></g>',cl_verticalbg:'<g class="cxcc"><rect x="0" y="0" width="33" height="100" /><rect x="67" y="0" width="33" height="100" /></g>',sr_19:'<path class="cxtxb" d="M2,80 L17,98 L32,80 M17,98 L17,2" /><path class="cxtxb" d="M27,20 L42,2 L57,20 M42,98 L42,2" /><g class="cxaa"><text class="cxtn60" x="60" y="45">1</text><text class="cxtn60" x="60" y="95">9</text></g>',ch_oy:'<text class="cxti100" x="25" y="70">y</text>',ch_olog10:'<text class="cxts70" x="1" y="60">log</text><text class="cxtn40" x="55" y="85">10</text>',n_edges:'<g class="cxa"><line x1="18.9" y1="15.4" x2="41.7" y2="31.3"/><line x1="21.6" y1="75.8" x2="43.5" y2="53.1"/><line x1="56.7" y1="76.6" x2="55.9" y2="57.1"/><line x1="84.3" y1="60.8" x2="69.5" y2="50.2"/><line x1="78" y1="13.9" x2="66.4" y2="28.2"/></g><g class="cxc"><circle cx="55.3" cy="40.9" r="16.9"/><circle cx="82.3" cy="8.6" r="6.8"/><circle cx="89.9" cy="64.7" r="6.8"/><circle cx="16.9" cy="80.6" r="6.8"/><circle cx="12.2" cy="10.7" r="8.9"/><circle cx="57.1" cy="87.5" r="10.8"/></g>',wp_userinterface:'<g class="cxb"><line x1="3.4" y1="16.2" x2="58.1" y2="16.2"/><line x1="9.4" y1="9.6" x2="13.5" y2="9.6"/><line x1="18.1" y1="9.6" x2="22.2" y2="9.6"/><polyline points="11.4 42.2 27 31.1 36.5 39.5 48.8 27.7"/><line x1="41.8" y1="57" x2="96.6" y2="57"/><line x1="48" y1="50.4" x2="52" y2="50.4"/><line x1="56.6" y1="50.4" x2="60.8" y2="50.4"/><line x1="57.6" y1="84.1" x2="57.6" y2="78.4"/><line x1="69.2" y1="84.1" x2="69.2" y2="73.6"/><line x1="80.9" y1="84.1" x2="80.9" y2="69.4"/></g><g class="cxa"><polyline points="41.8 57 3.4 57 3.4 2.3 58.1 2.3 58.1 43"/><rect x="41.9" y="43" width="54.8" height="54.8"/></g>',mr_all:'<g class="cxc"><line x1="2" y1="25" x2="98" y2="25" /><line x1="77" y1="2" x2="77" y2="98" /><line x1="2" y1="77" x2="98" y2="77" /><line x1="25" y1="2" x2="25" y2="98" /></g>',sh_oval:'<circle class="cxa" cx="50" cy="50" r="38" />',ln_styledotted:'<g class="cxa"><line x1="4" y1="50" x2="98" y2="50" stroke-dasharray="5" /></g>',lg_h:'<g class="cxc"><rect x="10" y="50" width="81" height="40"/><line x1="10" y1="70" x2="90" y2="70" /><line x1="37" y1="50" x2="37" y2="90" /><line x1="64" y1="50" x2="64" y2="90" /><line x1="2" y1="55" x2="2" y2="65" /><line x1="2" y1="75" x2="2" y2="85" /><line x1="13" y1="98" x2="34" y2="98" /><line x1="40" y1="98" x2="61" y2="98" /><line x1="67" y1="98" x2="88" y2="98" /></g>',p_g1titlesubtitle:'<g class="cxblue"><rect x="45" y="0" width="20" height="2"/><rect x="50" y="10" width="10" height="2"/></g>',ch_of:'<text class="cxti100" x="35" y="75">f</text>',ps_topleft:'<path class="cxtxb" d="M34,42 L34,34 L42,34 M34,34 L66,66" /><g class="cxa"><rect x="2" y="2" width="20" height="20" rx="2" /></g>',sw_up:'<g class="cxa"><path d="M0,85 C90,90 10,10 100,15" /><line x1="83" y1="5" x2="98" y2="15" /><line x1="83" y1="25" x2="98" y2="15" /></g>',ps_left:'<path class="cxtxb" d="M38,42 L30,50 L38,58 M70,50 L30,50" /><g class="cxa"><rect x="2" y="40" width="20" height="20" rx="2" /></g>',i_right:'<rect fill="url(\'#l-grad\')" x="50" y="25" width="48" height="50"/>',p_ghvariablelabels:'<g class="cxblue"><rect x="40" y="75" width="15" height="2"/><rect x="74" y="75" width="15" height="2"/></g>',ar_rm:'<path class="cxtxb" d="M71,38 L83,50 L71,62 M83,50 L17,50" />',sp_closer:'<path class="cxtxa" d="M66,2 L58,10 L66,18 M98,10 L58,10" /><path class="cxtxa" d="M34,2 L42,10 L34,18 M42,10 L2,10" /><g class="cxb"><rect x="9" y="36" width="18" height="62" /><rect x="42" y="36" width="18" height="62" /><rect x="77" y="36" width="18" height="62" /></g>',g_dotplot:'<g class="cxa"><line x1="11.9" x2="11.9" y2="100" y1="0"/><line x1="100" y1="86" y2="86" x2="0"/><line y1="62.6" x2="11.9" y2="62.6" x1="0"/><line y1="39.1" x2="11.9" y2="39.1" x1="0"/><line y1="15.6" x2="11.9" y2="15.6" x1="0"/></g><g class="cxb"><circle cx="57.1" cy="67.9" r="6.6"/><circle cx="82.7" cy="42.6" r="6.6"/><circle cx="38.9" cy="25.9" r="6.6"/></g>',c_angular:'<polygon class="cxa" points="50 2 5 18.3 12.1 77.1 50 98.1 88 77.1 95 18.3 50 2"/><g class="cxb"><polyline points="73.5 72.2 50 20.3 26.5 72.2"/><line x1="34" y1="55.9" x2="65.9" y2="55.9"/></g>',v_last:'<circle class="cxb" cx="50" cy="50" r="48" /><text class="cxtn60" x="25" y="73">&#9654;</text><rect x="55" y="25" width="18" height="50" />',wp_oveview:'<g class="cxa"><path d="M 80.9 42.6 L 80.9 21.6 L 61.6 2.3 L 11.5 2.3 L 11.5 90.4 L 31.6 90.4"/><polyline points="61.8 2.2 61.8 21.3 81 21.3"/></g><g class="cxb"><circle cx="59" cy="68.3" r="22.1"/><line x1="74.5" y1="84" x2="88.5" y2="97.8"/></g>',p_cg1datavertical:'<g class="cxcc"><rect x="20" y="57" width="16" height="30"/><rect x="48" y="7" width="16" height="80"/><rect x="76" y="27" width="16" height="60"/></g>',ch_ox:'<text class="cxti100" x="25" y="70">x</text>',ch_oe:'<text class="cxts200" x="10" y="85">e</text>',sp_farther:'<path class="cxtxa" d="M90,2 L98,10 L90,18 M98,10 L58,10" /><path class="cxtxa" d="M10,2 L2,10 L10,18 M42,10 L2,10" /><g class="cxb"><rect x="9" y="36" width="18" height="62" /><rect x="42" y="36" width="18" height="62" /><rect x="77" y="36" width="18" height="62" /></g>',cd_folder:'<g class="cxb"><path d="M83.1,36.3V22.9c0-1.3-1-2.3-2.3-2.3l0,0H28.8v-5.1c0-1.6-1.3-2.8-2.8-2.8H5.4c-1.6,0-2.8,1.3-2.8,2.8l0,0V85c0,1.3,1,2.3,2.3,2.3c0,0,0,0,0,0"/></g><g class="cxa"><path d="M79.5,87.2H4.9c-1.3,0-2.3-1-2.3-2.3c0-0.3,0-0.5,0.1-0.8l15.6-46.3c0.3-0.9,1.2-1.6,2.2-1.6h74.6c1.3,0,2.3,1,2.3,2.3c0,0.2,0,0.5-0.1,0.7L81.7,85.7C81.4,86.7,80.5,87.3,79.5,87.2z"/></g>',at_col2:'<path class="cl0" d="M74.6,6.5L50,50V0C58.6,0,67.1,2.2,74.6,6.5z"/><path class="cl1" d="M93.5,25.4L50,50L74.6,6.5C82.5,11,89,17.5,93.5,25.4z"/><path class="cl2" d="M100,50H50l43.5-24.6C97.8,32.9,100,41.4,100,50z"/><path class="cl3" d="M100,50c0,8.6-2.2,17.1-6.5,24.6L50,50H100z"/><path class="cl4" d="M93.5,74.6C89,82.5,82.5,89,74.6,93.5L50,50L93.5,74.6z"/><path class="cl5" d="M74.6,93.5c-7.5,4.2-16,6.5-24.6,6.5V50L74.6,93.5z"/><path class="cl6" d="M50,50v50c-8.6,0-17.1-2.2-24.6-6.5L50,50z"/><path class="cl7" d="M50,50L25.4,93.5C17.5,89,11,82.5,6.5,74.6L50,50z"/><path class="cl8" d="M50,50L6.5,74.6C2.2,67.1,0,58.6,0,50H50z"/><path class="cl9" d="M50,50H0c0-8.6,2.2-17.1,6.5-24.6L50,50z"/><path class="cl10" d="M50,50L6.5,25.4C11,17.5,17.5,11,25.4,6.5L50,50z"/><path class="cl11" d="M50,0v50L25.4,6.5C32.9,2.2,41.4,0,50,0z"/>',sv_pictures:'<g class="cxa"><path d="M59,14 Q 81,30 79,57 Q 79,89 98,98" /><circle cx="35" cy="18" r="6" /><circle cx="52" cy="32" r="6" /><circle cx="19" cy="32" r="6" /><circle cx="26" cy="50" r="6" /><circle cx="46" cy="50" r="6" /></g><g class="cxb"><circle cx="35" cy="35" r="32" /><circle cx="35" cy="35" r="1" /></g>',ch_oitalic:'<text class="cxti100" x="30" y="85">I</text>',ch_oaa:'<text class="cxtn100" x="0" y="85">A</text><text class="cxtn60" x="65" y="85">a</text>',p_g1sampletitle:'<g class="cxblue"><rect x="35" y="85" width="30" height="2"/></g>',v_forward:'<circle class="cxb" cx="50" cy="50" r="48" /><text class="cxtn60" x="17" y="73">&#9654;</text><text class="cxtn60" x="40" y="73">&#9654;</text>',c_python:'<g class="cxb"><path d="M 72.7 72.2 L 72.7 86.2 C 72.7 92.8 67.4 98 60.8 98 L 35.9 98 C 29.5 98 24.2 92.8 24.2 86.2 L 24.2 61.4 C 24.2 55 29.5 49.8 35.9 49.8 L 64 49.8 C 70.5 49.8 75.8 44.5 75.8 38 L 75.8 23.8 L 80.4 23.8 C 90.1 23.9 98 31.7 98.1 41.4 L 98.1 54.3 C 98.1 64.1 90.1 72.1 80.2 72 Z" /><line x1="72.8" y1="72.3" x2="50.2" y2="72.3" /></g><circle class="cxbb" cx="60" cy="85.8" r="4.3" /><g class="cxa"><path d="M 27.4 27.7 L 27.4 13.7 C 27.4 7.2 32.8 1.9 39.1 1.9 L 64.1 1.9 C 70.6 1.9 76 7.2 76 13.7 L 76 38.3 C 76 44.8 70.6 50.1 64.1 50.1 L 35.7 50.1 C 29.5 50.1 24.3 55.2 24.3 61.4 L 24.3 76.2 L 19.6 76.2 C 9.9 76.2 1.9 68.3 1.8 58.5 L 1.8 45.5 C 1.8 35.6 9.9 27.7 19.6 27.7 Z" /><line x1="27.4" y1="27.7" x2="50" y2="27.7" /></g><circle class="cxaa" cx="39.9" cy="14.3" r="4.3" />',ch_oe10:'<text class="cxts150" x="10" y="70">e</text><text class="cxtn40" x="50" y="85">10</text>',a_distributehor:'<g class="cxb"><rect x="25" y="10" width="50" height="36" rx="5" /><rect x="5" y="54" width="90" height="36" rx="5" /></g><g class="cxa"><line x1="50" y1="1" x2="50" y2="99" /></g>',ly_doe:'<g class="cxa"><rect x="2" y="2" width="43" height="43" /><rect x="53" y="2" width="43" height="43" /><rect x="2" y="53" width="43" height="43" /><circle cx="75" cy="75" r="20" /></g><g class="cxb"><rect x="9" y="20" width="10" height="24" /><rect x="28" y="10" width="10" height="34" /><polyline points="60,40 70,20 80,30 90,10" /><circle cx="15" cy="82" r="2" /><circle cx="26" cy="75" r="2" /><circle cx="36" cy="65" r="2" /><line x1="75" y1="75" x2="75" y2="55" /><line x1="75" y1="75" x2="95" y2="75" /><line x1="75" y1="75" x2="61" y2="86" /></g>',dt_max:'<g class="cxaa"><rect x="88" y="6" width="10" height="87" /></g><g class="cxb"><line x1="2" y1="98" x2="100" y2="98" /><line x1="2" y1="2" x2="2" y2="98" /></g><g class="cxcc"><rect x="8" y="86" width="10" height="7" /><rect x="28" y="66" width="10" height="27" /><rect x="48" y="46" width="10" height="47" /><rect x="68" y="26" width="10" height="67" /></g>',g_boxplot:'<g class="cxa"><line x1="11.9" x2="11.9" y2="100" y1="0"/><line x1="100" y1="86" y2="86" x2="0"/><line y1="62.6" x2="11.9" y2="62.6" x1="0"/><line y1="39.1" x2="11.9" y2="39.1" x1="0"/><line y1="15.6" x2="11.9" y2="15.6" x1="0"/></g><g class="cxb"><rect x="83.1" y="27.1" width="13.3" height="25.1"/><line x1="83.1" y1="39.6" x2="96.4" y2="39.6"/><line x1="90" y1="27.1" x2="90" y2="19.3"/><line x1="84.8" y1="20" x2="95.2" y2="20"/><line x1="90" y1="52.2" x2="90" y2="59.9"/><line x1="84.8" y1="59.2" x2="95.2" y2="59.2"/><line x1="89.8" y1="67.5" x2="89.8" y2="68.7"/><rect x="23.1" y="18.8" width="13.3" height="25.1"/><line x1="23.1" y1="31.3" x2="36.5" y2="31.3"/><line x1="30" y1="18.8" x2="30" y2="11"/><line x1="24.8" y1="11.7" x2="35.3" y2="11.7"/><line x1="30" y1="43.9" x2="30" y2="51.7"/><line x1="24.8" y1="51" x2="35.3" y2="51"/><line x1="29.8" y1="59.2" x2="29.8" y2="60.5"/><rect x="53.1" y="44.2" width="13.3" height="25.1"/><line x1="53.1" y1="56.7" x2="66.4" y2="56.7"/><line x1="60" y1="69.2" x2="60" y2="77"/><line x1="54.7" y1="76.3" x2="65.3" y2="76.3"/><line x1="60" y1="44.2" x2="60" y2="36.4"/><line x1="54.7" y1="37.1" x2="65.3" y2="37.1"/><line x1="59.8" y1="25.9" x2="59.8" y2="24.7"/></g>',g_genome:'<g class="cxb"><line x1="62.7" y1="7.9" x2="92.7" y2="37.9"/><line x1="52.5" y1="25.1" x2="75.5" y2="48.1"/><line x1="7.9" y1="62.7" x2="37.9" y2="92.7"/><line x1="25.1" y1="52.5" x2="48.1" y2="75.5"/></g><g class="cxa"><path d="M 100 31.3 L 94.5 36.8 C 82.9 48.4 66.3 53.4 50.3 50.2 L 50.3 50.2 C 47.1 34.2 52.2 17.6 63.7 6 L 69.2 0.6"/><path d="M 31.3 100 L 36.8 94.5 C 48.4 82.9 53.4 66.3 50.2 50.3 L 50.2 50.3 C 34.2 47.1 17.6 52.2 6 63.7 L 0.6 69.2"/><path d="M 31.3 100 L 36.8 94.5 C 48.4 82.9 53.4 66.3 50.2 50.3 L 50.2 50.3 C 34.2 47.1 17.6 52.2 6 63.7 L 0.6 69.2"/></g>',p_g3axistitley:'<g class="cxblue"><rect x="0" y="25" width="3" height="25"/></g>',p_g2axistitley:'<g class="cxblue"><rect x="0" y="25" width="3" height="25"/></g>',cd_linesindent:'<g class="cxa"><line x1="10" y1="10" x2="40" y2="10" /><line x1="15" y1="18" x2="40" y2="18" /><line x1="15" y1="26" x2="40" y2="26" /><line x1="10" y1="34" x2="50" y2="34" /><line x1="15" y1="42" x2="40" y2="42" /><line x1="15" y1="50" x2="40" y2="50" /><line x1="10" y1="58" x2="50" y2="58" /><line x1="15" y1="66" x2="40" y2="66" /><line x1="15" y1="74" x2="40" y2="74" /><line x1="10" y1="82" x2="50" y2="82" /><line x1="15" y1="90" x2="40" y2="90" /></g>',p_cg2fitkm:'<g class="cxa"><polyline points="10,20 35,20 35,30 55,30 55,50 75,50 75,75 95,75 95,90" /></g>',sr_azi:'<path class="cxtxa" d="M12,80 L27,98 L42,80 M27,98 L27,2" /><text class="cxtn60" x="50" y="45">A</text><text class="cxtn60" x="50" y="95">Z</text>',v_minus:'<circle class="cxb" cx="50" cy="50" r="48" /><text class="cxtb100" x="32" y="80">-</text>',bx_wishkersn:'<g class="cxb"><rect x="35" y="30" width="30" height="40" /><line x1="35" y1="51" x2="65" y2="51" /></g>',mr_left:'<g class="cxa"><line x1="25" y1="2" x2="25" y2="98" /></g>',g_sankey:'<g class="cxcc"><path d="M 88.1 57.9 L 88.1 57.9 C 76.8 57.9 66.1 52.9 58.7 44.3 L 42.4 25.1 C 35 16.5 24.3 11.6 13 11.6 L 12 11.6 L 12 42.1 L 13 42.1 C 24.3 42.2 35.1 47.1 42.4 55.8 L 58.7 74.9 C 66.1 83.6 76.8 88.5 88.1 88.5 L 88.1 88.5 L 88.1 57.9"/></g><g class="cxb"><rect x="2" y="11.5" width="10" height="30.6"/><rect x="88.1" y="57.9" width="10" height="30.6"/><path d="M 12 11.6 L 12 11.6 C 23.4 11.6 34.1 16.5 41.4 25.1 L 57.8 44.3 C 65.1 52.9 75.9 57.9 87.2 57.9 L 88.1 57.9"/><path d="M 12 42.1 L 12 42.1 C 23.4 42.2 34.1 47.1 41.4 55.8 L 57.8 74.9 C 65.1 83.6 75.9 88.5 87.2 88.5 L 88.1 88.5"/></g><g class="cxa"><rect x="2" y="57.9" width="10" height="30.6"/><rect x="88.1" y="11.5" width="10" height="30.6"/><path d="M 12 57.9 L 12 57.9 C 23.4 57.9 34.1 52.9 41.4 44.3 L 57.8 25.1 C 65.1 16.5 75.9 11.6 87.2 11.6 L 88.1 11.6 L 88.1 42.1 L 87.2 42.1 C 75.8 42.2 65.1 47.1 57.8 55.8 L 41.4 74.9 C 34.1 83.6 23.4 88.5 12 88.5 L 12 88.5 L 12 57.9"/></g>',sp_heightness:'<path class="cxtxa" d="M58,42 L66,50 L58,58 M42,42 L34,50 L42,58 M66,50 L34,50" /><g class="cxb"><rect x="2" y="40" width="26" height="56" /><rect x="72" y="2" width="26" height="96" /></g>',ch_oa:'<text class="cxtb100" x="25" y="75">a</text>',ch_ologsmall:'<text class="cxts60" x="15" y="70">log</text>',ch_snumber:'<text class="cxtb100" x="15" y="85">#</text>',sl_radiooff:'<circle class="cxb" cx="50" cy="50" r="35" />',ch_ccommand:'<text class="cxtb100" x="5" y="85">&#8984;</text>',h_hvariable:'<g class="cxa"><rect x="42" y="4" width="26" height="18"/><rect x="42" y="26" width="26" height="18"/><rect x="42" y="48" width="26" height="18"/><rect x="42" y="70" width="26" height="18"/></g>',gr_g2y:'<g class="cxc"><line x1="2" y1="2" x2="2" y2="100" /><line x1="2" y1="98" x2="100" y2="98" /></g><g class="cxa"><line x1="4" y1="18" x2="98" y2="18" /> <line x1="4" y1="38" x2="98" y2="38" /> <line x1="4" y1="58" x2="98" y2="58" /> <line x1="4" y1="78" x2="98" y2="78" /></g>',v_cancel:'<circle class="cxb" cx="50" cy="50" r="48" /><text class="cxtb100" x="22" y="77">x</text>',p_cg2fitkmconf:'<g class="cxcc"><polyline points="10,2 40,2 40,10 65,10 65,30 85,30 85,52 98,52 98,87 66,87 66,68 54,68 54,58 42,58 42,42 30,42 30,36 10,36" /></g>',xar_dcbls2:'<path class="cxtxa" d="M 50 90 A 40 40 0 0 1 10 50 M42,82 L50,90 L42,97 M3,58 L10,50 L18,58" />',g_waterfall:'<g class="cxb"><rect x="44.7" y="22.6" width="12.7" height="19.6"/><rect x="19.4" y="5.9" width="12.7" height="36.4"/><rect x="32.1" y="13.3" width="12.7" height="28.9"/><rect x="57.4" y="42.2" width="12.7" height="19.6"/><rect x="82.8" y="42.2" width="12.7" height="36.4"/><rect x="70.1" y="42.2" width="12.7" height="28.9"/></g><g class="cxa"><line x1="11.9" x2="11.9" y2="100" y1="0"/><line x1="100" y1="86" y2="86" x2="0"/><line y1="62.6" x2="11.9" y2="62.6" x1="0"/><line y1="39.1" x2="11.9" y2="39.1" x1="0"/><line y1="15.6" x2="11.9" y2="15.6" x1="0"/></g>',ar_v:'<path class="cxtxb" d="M35,80 L50,98 L65,80 M35,20 L50,2 L65,20 M50,98 L50,2" />',p_g2subtitle:'<g class="cxblue"><rect x="50" y="10" width="20" height="2"/></g>',p_g3subtitle:'<g class="cxblue"><rect x="50" y="10" width="20" height="2"/></g>',ch_calt:'<text class="cxtn60" x="5" y="70">Alt</text>',g_meter:'<g class="cxa"><path d="M 23.6 30.4 C 36.7 13.6 62 13.2 75.7 29.5 L 87.3 21.9 C 67.9 -3 30.2 -2.3 11.7 23.2 Z"/><path d="M 91.7 28.4 L 80 36.1 C 87.1 50.3 83.3 67.5 70.8 77.3 L 70.8 93.6 C 95.1 81.8 104.6 52.1 91.7 28.4 Z"/><line x1="44.3" y1="33.5" x2="44.3" y2="40.6"/><line x1="54.7" y1="33.5" x2="54.7" y2="40.6"/><polyline points="40.3 80.2 44.6 80.2 44.6 96.3"/><rect x="51.6" y="80.2" width="8.2" height="14.1"/></g><g class="cxb"><path d="M 28.2 76.5 C 16.8 66.8 13.3 50.7 19.5 37.1 L 7.6 29.9 C -4.1 53 5.1 81.3 28.2 93.2 Z"/><circle cx="49.5" cy="65.4" r="7.3"/><line x1="54" y1="59.7" x2="70.9" y2="37.8"/></g>',b_grhl:'<g class="cxa"><rect fill="url(\'#hl-grad\')" x="0" y="0" width="100" height="100" /></g>',p_cghaxes:'<g class="cxb"><rect x="10" y="2" width="88" height="88"/><line x1="10" y1="24" x2="98" y2="24" /><line x1="10" y1="46" x2="98" y2="46" /><line x1="10" y1="68" x2="98" y2="68" /><rect x="0" y="10" width="2" height="6"/><rect x="0" y="32" width="2" height="6"/><rect x="0" y="54" width="2" height="6"/><rect x="0" y="76" width="2" height="6"/><line x1="40" y1="2" x2="40" y2="90" /><line x1="70" y1="2" x2="70" y2="90" /><rect x="20" y="98" width="10" height="2"/><rect x="50" y="98" width="10" height="2"/><rect x="80" y="98" width="10" height="2"/></g>',h_hcell:'<g class="cxa"><rect x="42" y="26" width="26" height="18"/></g>',dps_toinside:'<g class="cxa"><polyline points="65,30 65,2 2,2 2,98 65,98 65,70" /></g><path class="cxtxb" d="M29,38 L17,50 L29,62 M83,50 L17,50" />',g_density:'<g class="cxb"><path d="M 11.9 86 C 11.9 86 23.5 79.2 29.4 56.8 C 35.3 34.4 38.9 2.4 47.3 3.9 C 55.8 5.3 59.3 58.7 63.9 58.7 C 69 58.7 67.8 37.7 76.8 39.5 C 85.7 41.3 96.7 86 96.7 86"/></g><g class="cxa"><line x1="11.9" x2="11.9" y2="100" y1="0"/><line x1="100" y1="86" y2="86" x2="0"/><line y1="62.6" x2="11.9" y2="62.6" x1="0"/><line y1="39.1" x2="11.9" y2="39.1" x1="0"/><line y1="15.6" x2="11.9" y2="15.6" x1="0"/></g>',g_lollipop:'<g class="cxb"><circle cx="30.2" cy="60.1" r="7.4"/><line x1="30.2" y1="67.4" x2="30.2" y2="86"/><circle cx="65.9" cy="46.5" r="7.4"/><line x1="65.9" y1="53.8" x2="65.9" y2="86"/><circle cx="83.7" cy="34.1" r="7.4"/><line x1="83.7" y1="41.5" x2="83.7" y2="86"/><circle cx="48.1" cy="26.8" r="7.4"/><line x1="48.1" y1="34.1" x2="48.1" y2="86"/></g><g class="cxa"><line x1="11.9" x2="11.9" y2="100" y1="0"/><line x1="100" y1="86" y2="86" x2="0"/><line y1="62.6" x2="11.9" y2="62.6" x1="0"/><line y1="39.1" x2="11.9" y2="39.1" x1="0"/><line y1="15.6" x2="11.9" y2="15.6" x1="0"/></g>',p_cg1dataverticalshort:'<g class="cxcc"><rect x="20" y="67" width="16" height="20"/><rect x="48" y="27" width="16" height="60"/><rect x="76" y="47" width="16" height="40"/></g>',at_colshpsze:'<g class="cxac"><rect x="2" y="2" width="46" height="46" /><polyline points="37,85 67,36 97,85 37,85" /><circle cx="31" cy="60" r="25" /></g><g class="cxab"><circle cx="18" cy="82" r="15" /><rect x="42" y="10" width="22" height="22" /><polyline points="71,53 84,33 97,53 71,53" /></g>',bx_violinbp:'<g class="cxb"><path  d="M64,1 Q 66,11 68,25 72,38 86,47 96,56 89,70 82,82 80,99 L 20,99 Q 18,82 11,70 4,56 14,47 28,38 32,25 34,11 36,1 Z" /></g><g class="cxa"><rect x="40" y="35" width="20" height="30" /><line x1="40" y1="50" x2="60" y2="50" /><line x1="40" y1="2" x2="60" y2="2" /><line x1="50" y1="2" x2="50" y2="35" /><line x1="40" y1="98" x2="60" y2="98" /><line x1="50" y1="98" x2="50" y2="65" /></g>',ar_tls:'<path class="cxtxb" d="M34,42 L34,34 L42,34 M34,34 L66,66" />',wp_examples:'<g class="cxb"><polyline points="48.8 29.2 21.7 2.1 2.1 21.7 29.6 49.3" /><polyline points="48.1 67.9 78.1 97.9 97.9 78.1 67.9 48.1" /><line x1="82.2" y1="61.7" x2="71" y2="73" /><line x1="34.1" y1="16.3" x2="22.9" y2="27.6" /></g><g class="cxa"><path d="M 7.4 71.5 L 5.2 92.2 L 25.9 90 L 92.6 23.5 C 96.2 20.1 96.4 14.4 93 10.8 L 86.6 4.5 C 83 1.2 77.3 1.4 73.9 5 Z" /><line x1="63.8" y1="15.1" x2="82.2" y2="33.6" /></g>',ar_hs:'<path class="cxtxb" d="M58,42 L66,50 L58,58 M42,42 L34,50 L42,58 M66,50 L34,50" />',dp_binr:'<g class="cxb"><circle cx="50" cy="3" r="2.5" /><circle cx="50" cy="18" r="2.5" /><circle cx="50" cy="33" r="2.5" /><circle cx="57" cy="33" r="2.5" /><circle cx="50" cy="50" r="2.5" /><circle cx="57" cy="50" r="2.5" /><circle cx="64" cy="50" r="2.5" /><circle cx="50" cy="65" r="2.5" /><circle cx="57" cy="65" r="2.5" /><circle cx="50" cy="80" r="2.5" /><circle cx="50" cy="97" r="2.5" /></g>',sl_radioon:'<circle class="cxaa" cx="50" cy="50" r="35" /><circle class="cxww" cx="50" cy="50" r="10" />',cl_vertical:'<g class="cxa"><line x1="6" y1="75" x2="6" y2="90" /><line x1="14" y1="75" x2="14" y2="90" /><line x1="6" y1="75" x2="14" y2="75" /><line x1="22" y1="65" x2="22" y2="90" /><line x1="30" y1="65" x2="30" y2="90" /><line x1="22" y1="65" x2="30" y2="65" /><line x1="10" y1="75" x2="10" y2="50" /><line x1="26" y1="65" x2="26" y2="50" /><line x1="10" y1="50" x2="26" y2="50" /><line x1="38" y1="50" x2="38" y2="90" /><line x1="46" y1="65" x2="46" y2="90" /><line x1="54" y1="65" x2="54" y2="90" /><line x1="46" y1="65" x2="54" y2="65" /><line x1="50" y1="65" x2="50" y2="50" /><line x1="38" y1="50" x2="50" y2="50" /><line x1="62" y1="65" x2="62" y2="90" /><line x1="70" y1="65" x2="70" y2="90" /><line x1="62" y1="65" x2="70" y2="65" /><line x1="44" y1="40" x2="44" y2="50" /><line x1="66" y1="40" x2="66" y2="65" /><line x1="44" y1="40" x2="66" y2="40" /><line x1="78" y1="55" x2="78" y2="90" /><line x1="86" y1="75" x2="86" y2="90" /><line x1="94" y1="75" x2="94" y2="90" /><line x1="86" y1="75" x2="94" y2="75" /><line x1="90" y1="55" x2="90" y2="75" /><line x1="78" y1="55" x2="90" y2="55" /><line x1="84" y1="25" x2="84" y2="55" /><line x1="55" y1="25" x2="55" y2="40" /><line x1="55" y1="25" x2="84" y2="25" /><line x1="18" y1="10" x2="18" y2="50" /><line x1="70" y1="10" x2="70" y2="25" /><line x1="18" y1="10" x2="70" y2="10" /><line x1="44" y1="10" x2="44" y2="0" /></g><g class="cxb"><rect x="5" y="96" width="2" height="2" /><rect x="13" y="96" width="2" height="2" /><rect x="21" y="96" width="2" height="2" /><rect x="29" y="96" width="2" height="2" /><rect x="37" y="96" width="2" height="2" /><rect x="45" y="96" width="2" height="2" /><rect x="53" y="96" width="2" height="2" /><rect x="61" y="96" width="2" height="2" /><rect x="69" y="96" width="2" height="2" /><rect x="78" y="96" width="2" height="2" /><rect x="86" y="96" width="2" height="2" /><rect x="94" y="96" width="2" height="2" /></g>',ar_brs:'<path class="cxtxb" d="M66,58 L66,66 L56,66 M34,34 L66,66" />',bx_meanb:'<g class="cxc"><rect x="30" y="20" width="40" height="60" /><line x1="30" y1="50" x2="70" y2="50" /><line x1="30" y1="2" x2="70" y2="2" /><line x1="50" y1="2" x2="50" y2="20" /><line x1="30" y1="98" x2="70" y2="98" /><line x1="50" y1="98" x2="50" y2="80" /></g><g class="cxbb"><rect x="40" y="40" width="20" height="20" /></g>',sp_thickness:'<path class="cxtxa" d="M50,42 L58,50 L50,58 M36,42 L26,50 L36,58 M58,50 L26,50" /><g class="cxb"><rect x="2" y="2" width="10" height="96" /><rect x="72" y="2" width="26" height="96" /></g>',p_cg2fitden2:'<g class="cxac"><path d="M15,90 C50,67 38,0 55,3 71,0 72,90 95,90" /></g>',fp_funnel:'<g class="cxb"><polyline points="2,2 98,2 98,10 60,50 40,50 2,10 2,2" /></g><g class="cxa"><polyline points="60,50 60,98 40,83 40,50 60,50" /></g>',wp_initialization:'<g class="cxa"><path d="M 15.5 33.2 C 28.4 6.7 65.2 4.1 81.7 28.5 C 86 34.8 88.3 42.3 88.3 50"/><polyline points="98.5 39.8 88.4 50 78.1 39.8"/></g><g class="cxb"><path d="M 84.4 66.8 C 71.5 93.3 34.7 95.9 18.2 71.4 C 14 65.1 11.7 57.6 11.7 50"/><polyline points="1.5 60.1 11.7 50 21.8 60.1"/></g>',g_scatterbubble2d:'<g class="cxa"><line x1="11.9" x2="11.9" y2="100" y1="0"/><line x1="100" y1="86" y2="86" x2="0"/><line y1="62.6" x2="11.9" y2="62.6" x1="0"/><line y1="39.1" x2="11.9" y2="39.1" x1="0"/><line y1="15.6" x2="11.9" y2="15.6" x1="0"/><line x1="32.5" y1="100" x2="32.5" y2="86"/><line x1="56" y1="100" x2="56" y2="86"/><line x1="79.4" y1="100" x2="79.4" y2="86"/></g><g class="cxb"><circle cx="68.1" cy="42.8" r="17.8"/><circle cx="29.8" cy="45.7" r="6.9"/><circle cx="43.6" cy="68.3" r="7"/><circle cx="88.4" cy="14.5" r="6.7"/><circle cx="34.7" cy="17.3" r="7.8"/></g>',sp_thicker:'<path class="cxtxa" d="M56,42 L62,50 L56,58 M62,50 L22,50" /><g class="cxa"><rect x="72" y="2" width="26" height="96" /></g><g class="cxb"><rect x="2" y="2" width="10" height="96" /></g>',ch_oinfo:'<text class="cxts150 cxaa" x="20" y="85">i</text>',v_plus:'<circle class="cxb" cx="50" cy="50" r="48" /><text class="cxtb100" x="20" y="77">+</text>',g_network:'<g class="cxa"><line x1="18.9" y1="15.4" x2="41.7" y2="31.3"/><line x1="21.6" y1="75.8" x2="43.5" y2="53.1"/><line x1="56.7" y1="76.6" x2="55.9" y2="57.1"/><line x1="84.3" y1="60.8" x2="69.5" y2="50.2"/><line x1="78" y1="13.9" x2="66.4" y2="28.2"/><circle cx="55.3" cy="40.9" r="16.9"/></g><g class="cxb"><circle cx="82.3" cy="8.6" r="6.8"/><circle cx="89.9" cy="64.7" r="6.8"/><circle cx="16.9" cy="80.6" r="6.8"/><circle cx="12.2" cy="10.7" r="8.9"/><circle cx="57.1" cy="87.5" r="10.8"/></g>',p_g1title:'<g class="cxblue"><rect x="45" y="0" width="20" height="2"/></g>',ch_ld:'<text class="cxtb100" x="15" y="85">D</text>',tx_format:'<g class="cxb"><circle cx="60" cy="49.7" r="12.3"/><path d="M59.1,77.5c2,0.1,4-0.1,6-0.5l6,8.4l10.8-5.2L79,70c1.4-1.3,2.6-2.7,3.7-4.3l10.5,1.7l3.9-11.3L87.8,51c0.1-1.9,0-3.8-0.4-5.7l8.5-6.2l-5.2-10.8l-9.9,2.9c-1.3-1.5-2.8-2.9-4.4-4.1l1.6-10.1l-11.3-3.9l-4.8,8.6c-2.2-0.2-4.3-0.1-6.5,0.2l-5.7-7.8l-10.8,5.2"/></g><g class="cxaa"><path d="M47,67.5H20.2l-3.4,7.4c-0.9,2-1.4,4.1-1.5,6.3c-0.1,1.9,0.9,3.8,2.6,4.7c2.4,0.9,4.9,1.3,7.5,1.3v2.1H0v-2.1c2.6-0.3,4.9-1.5,6.7-3.4c2.8-3.5,5.1-7.5,6.7-11.7l27.1-60.8h1.1L69,73.9c1.5,4.1,3.7,7.9,6.5,11.2c1.5,1.2,3.4,1.9,5.4,2v2.1H43.9v-2.1h1.5c2.2,0.2,4.3-0.2,6.2-1.2c0.8-0.6,1.3-1.6,1.2-2.6c0-0.7-0.1-1.4-0.3-2.1c0-0.3-0.6-1.7-1.7-4.2L47,67.5zM45.1,63.4L33.6,37.1L22,63.4L45.1,63.4z"/></g>',p_g2axes:'<g class="cxblue"><line x1="25" y1="65" x2="95" y2="65" /><line x1="25" y1="65" x2="25" y2="75" /><line x1="45" y1="65" x2="45" y2="75" /><line x1="65" y1="65" x2="65" y2="75" /><line x1="85" y1="65" x2="85" y2="75" /><line x1="25" y1="15" x2="25" y2="75" /><line x1="15" y1="25" x2="25" y2="25" /><line x1="15" y1="45" x2="25" y2="45" /><line x1="15" y1="65" x2="25" y2="65" /></g>',p_g3axes:'<g class="cxblue"><line x1="25" y1="65" x2="95" y2="65" /><line x1="25" y1="65" x2="25" y2="75" /><line x1="45" y1="65" x2="45" y2="75" /><line x1="65" y1="65" x2="65" y2="75" /><line x1="85" y1="65" x2="85" y2="75" /><line x1="25" y1="15" x2="25" y2="75" /><line x1="15" y1="25" x2="25" y2="25" /><line x1="15" y1="45" x2="25" y2="45" /><line x1="15" y1="65" x2="25" y2="65" /><line x1="25" y1="65" x2="75" y2="25" /><line x1="45" y1="50" x2="45" y2="60" /><line x1="65" y1="33" x2="65" y2="43" /></g>',ar_bls:'<path class="cxtxb" d="M34,58 L34,66 L42,66 M34,66 L66,34" />',sv_svg:'<g class="cxa"><path d="M60,7 L70,17 L90,17 Q 98,17 98,26 L98,74 Q 98,84 90,84 L10,84 Q 2,84 2,74 L2,24 Q 2,17 10,17 L30,17 L40,7 Z" /></g><g class="cxb"><circle cx="50" cy="50" r="15" /><circle cx="50" cy="50" r="25" /><line x1="10" y1="8" x2="25" y2="8" /><line x1="10" y1="27" x2="25" y2="27" /></g><g class="cxaw"><rect x="12" y="55" width="76" height="40" rx="4" /></g><g class="cxaa"><text class="cxtn30" x="18" y="85">SVG</text></g>',dps_inout:'<g class="cxa"><polyline points="65,30 65,2 2,2 2,98 65,98 65,70" /></g><path class="cxtxb" d="M71,38 L83,50 L71,62 M29,38 L17,50 L29,62 M83,50 L17,50" />',ar_r:'<path class="cxtxb" d="M80,35 L98,50 L80,65 M98,50 L2,50" />',b_grvt:'<g class="cxa"><rect fill="url(\'#vt-grad\')" x="0" y="0" width="100" height="100" /></g>',lg_l:'<g class="cxa"><rect x="48" y="2" width="50" height="40"/><rect x="58" y="12" width="2" height="2"/><rect x="58" y="22" width="2" height="2"/><rect x="58" y="32" width="2" height="2"/><line x1="68" y1="12" x2="88" y2="12" /><line x1="68" y1="22" x2="88" y2="22" /><line x1="68" y1="32" x2="88" y2="32" /></g>',c_jupyterc:'<g class="cxorange"><path d="M50.3,22.2c16.2,0,30.3,5.7,37.7,14.3C80.5,15.7,57.5,5,36.7,12.5c-11.2,4-20,12.9-24.1,24.1C20,28,34.2,22.2,50.3,22.2z"/><path d="M50.3,78.8c-16.2,0-30.3-5.7-37.7-14.3c7.5,20.8,30.5,31.6,51.3,24.1c11.2-4,20-12.9,24.1-24.1C80.6,73,66.5,78.8,50.3,78.8z"/></g><g class="cxb"><circle cx="77.4" cy="6.4" r="5"/><circle cx="19.4" cy="93.4" r="5"/><circle cx="14.6" cy="13.2" r="3.5"/></g><g class="cxblack"><path d="M0,62.9c1.1,0,2.1-0.4,2.9-1.1c0.7-0.9,1-2.1,1-5.7V43.4h2.9v13.7C7,59.3,6.4,61.5,5,63.3C3.7,64.4,2,65,0.3,65L0,62.9z"/><path d="M24.7,54.4c0,1.6,0,2.9,0,4.1h-2.3v-2.5l0,0c-1,1.8-2.9,2.9-5,2.9c-2.4,0-5.2-1.3-5.2-6.6v-8.9h2.9v8.4c0,2.9,0.9,4.8,3.3,4.8c1.6,0,3-1,3.6-2.5c0.2-0.4,0.3-0.9,0.3-1.4v-9.3h2.9L24.7,54.4z"/><path d="M30.3,48.4c0-1.9,0-3.5,0-4.9h2.5L33,46l0,0c1.1-1.9,3.2-3,5.4-2.9c3.6,0,6.4,3.1,6.4,7.7c0,5.4-3.3,8.1-6.8,8.1c-1.9,0.1-3.6-0.8-4.7-2.4l0,0v8.2h-2.8V48.4z M33,52.4c0,0.4,0,0.8,0.1,1.1c0.5,1.9,2.1,3.2,4,3.2c2.9,0,4.6-2.4,4.6-5.7c0-3-1.6-5.7-4.5-5.7c-2,0-3.7,1.4-4.1,3.4C33.1,49,33,49.4,33,49.8L33,52.4z"/><path d="M49.8,43.4l3.3,8.9c0.3,1,0.7,2.2,0.9,3.1l0,0c0.3-0.9,0.6-2.1,0.9-3.1l3-8.8h2.9l-4.1,10.8c-0.9,3.5-2.7,6.7-5.2,9.4c-0.9,0.9-2.1,1.5-3.4,1.8l-0.7-2.3c0.9-0.3,1.7-0.7,2.4-1.3c1-0.8,1.8-1.9,2.3-3.1c0.1-0.2,0.2-0.4,0.2-0.7c0-0.2-0.1-0.5-0.2-0.7l-5.6-13.9L49.8,43.4z"/><path d="M68.4,39.1v4.3h3.9v2.1h-3.9v8.1c0,1.9,0.5,2.9,2,2.9c0.5,0,1.1-0.1,1.6-0.2v2.1c-0.8,0.3-1.6,0.4-2.4,0.4c-1.1,0-2.1-0.4-2.9-1.2c-0.7-1.1-1.1-2.5-0.9-3.9v-8.2h-2.3v-2.1h2.3v-3.6L68.4,39.1z"/><path d="M77.6,51.5c-0.2,2.7,1.7,5,4.4,5.2c0.3,0,0.5,0,0.8,0c1.4,0,2.8-0.2,4.2-0.8l0.5,2c-1.6,0.7-3.3,1-5,0.9c-3.8,0.3-7.2-2.7-7.4-6.5c0-0.4,0-0.7,0-1.1c-0.4-4,2.6-7.6,6.6-8c0.2,0,0.3,0,0.5,0c3.5,0.1,6.3,3,6.2,6.6c0,0.2,0,0.4,0,0.5c0,0.4,0,0.9,0,1.3L77.6,51.5z M85.6,49.5c0.3-2.1-1.2-4.1-3.3-4.4c-0.2,0-0.3,0-0.5,0c-2.3,0.2-4.2,2.1-4.2,4.4H85.6z"/><path d="M92.6,48.2c0-1.8,0-3.3,0-4.7H95v2.9h0.1c0.6-1.8,2.2-3,4.1-3.1c0.3,0,0.5,0,0.8,0v2.6c-0.3,0-0.6,0-0.9,0c-1.9,0.1-3.5,1.6-3.7,3.5c0,0.4,0,0.8,0,1.3v8h-2.7L92.6,48.2z"/></g>',dp_jittered:'<g class="cxb"><circle cx="3" cy="3" r="2.5" /><circle cx="3" cy="18" r="2.5" /><circle cx="3" cy="33" r="2.5" /><circle cx="3" cy="50" r="2.5" /><circle cx="3" cy="65" r="2.5" /><circle cx="3" cy="80" r="2.5" /><circle cx="3" cy="97" r="2.5" /><circle cx="89" cy="3" r="2.5" /><circle cx="77" cy="18" r="2.5" /><circle cx="97" cy="33" r="2.5" /><circle cx="87" cy="50" r="2.5" /><circle cx="82" cy="65" r="2.5" /><circle cx="95" cy="80" r="2.5" /><circle cx="93" cy="97" r="2.5" /></g><path class="cxtxa" d="M50,44 L58,52 L50,60 M34,44 L26,52 L34,60 M58,52 L26,52" />',g_contour3:'<g class="cxa"><path d="M 56.1 92.7 L 21.1 92.7 C 17.4 92.8 14.3 89.8 14.3 86 L 14.3 82.1 C 14.3 80.4 13.1 79.1 11.4 79.1 L 11.4 79.1 C 9.8 79.1 8.4 77.7 8.4 76.2 L 8.4 29.7 L 14.3 29.7 L 14.3 22.2 L 20.3 22.2 L 20.3 18.4 L 25 18.4 L 25 13.3 L 29.9 13.3 L 29.9 8.7 L 33.6 8.7 L 33.6 5.8 L 37.8 5.8 L 37.8 2.8 L 50 2.8 L 50 6.6 L 62.5 6.6 L 62.5 10.9 L 69.1 10.9 L 69.1 15.7 L 74 15.7 L 74 20 L 77.5 20 L 77.5 27 L 82.5 27 L 82.5 34.9 L 86.2 34.9 L 86.2 50.9 L 90.8 50.9 L 90.8 69.8 L 86.5 69.8 L 86.5 80.1 L 82.5 80.1 L 82.5 90.6 C 82.5 91.8 81.5 92.7 80.2 92.7 L 80.2 92.7 C 78.9 92.7 77.9 93.8 77.9 95 L 77.9 95 C 77.9 96.3 76.9 97.3 75.6 97.3 L 60.8 97.3 C 59.6 97.3 58.6 96.3 58.6 95 L 58.6 95 C 58.6 93.7 57.5 92.6 56.1 92.7 Z"/><polygon points="63 78.5 69.8 78.5 69.8 70.7 78.5 70.7 78.5 59.1 74 59.1 74 50.6 69.5 50.6 69.5 39.4 66.7 39.4 66.7 31.7 62.5 31.7 62.5 27.5 54.2 27.5 54.2 22.9 33.9 22.9 33.9 27.4 30.1 27.3 30.1 29.8 26.2 29.8 26.2 34.7 22.8 34.7 22.8 75.1 25.4 75.1 25.4 79.2 29.5 79.2 29.5 83.1 63 83.1 63 78.5"/><polygon points="38.4 42.7 38.4 38.9 49.9 38.9 49.9 43.2 53.7 43.2 53.7 71.1 38.4 71.1 38.4 63.2 34 63.2 34 42.7 38.4 42.7"/><polyline points="77.9 2.9 85.9 2.9 85.9 11.4 90 11.4 90 15 93.9 15 93.9 22.9 98.2 22.9 98.2 31.2"/><polyline points="21.9 2.9 14 2.9 14 7.2 10.1 7.2 10.1 15.4 1.8 15.4"/></g>',ar_trs:'<path class="cxtxb" d="M58,34 L66,34 L66,42 M34,66 L66,34" />',sv_diskjson:'<g class="cxa"><polyline points="98,25 98,98 2,98 2,2 75,2 98,25" /></g><g class="cxb"><rect x="27" y="58" width="50" height="40" /><rect x="32" y="2" width="40" height="30" /><rect x="55" y="12" width="5" height="10" /></g><g class="cxaw"><rect x="2" y="40" width="96" height="50" /></g><g class="cxaa"><text class="cxtn30" x="10" y="75">JSON</text></g>',i_labels:'<g class="cxc"><rect x="2" y="25" width="96" height="50"/><rect x="40" y="10" width="20" height="2"/><rect x="2" y="90" width="10" height="2"/><rect x="45" y="90" width="10" height="2"/><rect x="88" y="90" width="10" height="2"/></g>',at_trn:'<g class="cxcc"><rect x="2.5" y="2.7" width="13.6" height="13.6"/><rect x="16.1" y="16.2" width="13.6" height="13.6"/><rect x="43.2" y="16.2" width="13.6" height="13.6"/><rect x="56.8" y="2.7" width="13.6" height="13.6"/><rect x="70.3" y="16.2" width="13.6" height="13.6"/><rect x="83.9" y="2.7" width="13.6" height="13.6"/><rect x="29.7" y="2.7" width="13.6" height="13.6"/><rect x="2.5" y="29.8" width="13.6" height="13.6"/><rect x="16.1" y="43.4" width="13.6" height="13.6"/><rect x="43.2" y="43.4" width="13.6" height="13.6"/><rect x="56.8" y="29.8" width="13.6" height="13.6"/><rect x="70.3" y="43.4" width="13.6" height="13.6"/><rect x="83.9" y="29.8" width="13.6" height="13.6"/><rect x="29.7" y="29.8" width="13.6" height="13.6"/><rect x="2.5" y="56.9" width="13.6" height="13.6"/><rect x="16.1" y="70.5" width="13.6" height="13.6"/><rect x="43.2" y="70.5" width="13.6" height="13.6"/><rect x="56.8" y="56.9" width="13.6" height="13.6"/><rect x="70.3" y="70.5" width="13.6" height="13.6"/><rect x="83.9" y="56.9" width="13.6" height="13.6"/><rect x="29.7" y="56.9" width="13.6" height="13.6"/><rect x="2.5" y="84" width="13.6" height="13.6"/><rect x="56.8" y="84" width="13.6" height="13.6"/><rect x="83.9" y="84" width="13.6" height="13.6"/><rect x="29.7" y="84" width="13.6" height="13.6"/></g><g class="cxa"><rect x="2" y="2" width="96" height="96"/></g>',p_g2axestitles:'<g class="cxblue"><rect x="40" y="85" width="30" height="2"/><rect x="0" y="25" width="3" height="25"/></g>',p_g3axestitles:'<g class="cxblue"><rect x="40" y="85" width="30" height="2"/><rect x="0" y="25" width="3" height="25"/><line x1="55" y1="55" x2="65" y2="47"/></g>',sp_spacing:'<path class="cxtxa" d="M86,2 L98,14 L86,26 M14,2 L2,14 L14,26 M98,14 2,14" /><g class="cxb"><rect x="2" y="36" width="18" height="62" /><rect x="27" y="36" width="18" height="62" /><rect x="52" y="36" width="18" height="62" /><rect x="77" y="36" width="18" height="62" /></g>',sl_lightbulbon:'<g class="cxa"><path d="M75.4,50.1C75.4,36,64,24.7,50,24.7S24.6,36.1,24.6,50.1c0,7.4,3.2,14.3,8.7,19.2c3.3,2.9,5.3,7.1,5.3,11.5h22.7c0-4.5,2-8.8,5.5-11.7C72.2,64.3,75.4,57.3,75.4,50.1z"/><path d="M38.7,80.8h22.9l0,0v8.6c0,4.5-3.7,8.2-8.2,8.2l0,0h-6.5c-4.5,0-8.2-3.7-8.2-8.2l0,0L38.7,80.8L38.7,80.8z"/></g><g class="cxb"><line x1="50" y1="0" x2="50" y2="14.4"/><line x1="99.3" y1="49.3" x2="84.9" y2="49.3"/><line x1="0.7" y1="49.3" x2="15.1" y2="49.3"/><line x1="84.9" y1="14.4" x2="74.6" y2="24.6"/><line x1="15.1" y1="84.2" x2="25.4" y2="73.9"/><line x1="84.9" y1="84.2" x2="74.6" y2="73.9"/><line x1="15.1" y1="14.4" x2="25.4" y2="24.6"/></g>',sr_zad:'<path class="cxtxa" d="M12,80 L27,98 L42,80 M27,98 L27,2" /><text class="cxtn60" x="50" y="45">Z</text><text class="cxtn60" x="50" y="95">A</text>',i_left:'<rect fill="url(\'#r-grad\')" x="2" y="25" width="48" height="50"/>',i_hist:'<rect fill="url(\'#l-grad\')" x="0" y="0" width="100" height="100"/><g class="cxa"><rect x="2" y="2" width="96" height="96"/><polyline points="2,98 20,88 40,60 60,25 80,70 98,2" /></g>',c_paultol:'<rect y="16.2" class="cl30" width="12.5" height="67.7"/><rect x="12.5" y="16.2" class="cl31" width="12.5" height="67.7"/><rect x="25" y="16.2" class="cl32" width="12.5" height="67.7"/><rect x="50" y="16.2" class="cl33" width="12.5" height="67.7"/><rect x="37.5" y="16.2" class="cl34" width="12.5" height="67.7"/><rect x="62.5" y="16.2" class="cl35" width="12.5" height="67.7"/><rect x="75" y="16.2" class="cl36" width="12.5" height="67.7"/><rect x="87.5" y="16.2" class="cl37" width="12.5" height="67.7"/>',bx_wishkers:'<g class="cxb"><rect x="2" y="30" width="20" height="40" /><line x1="2" y1="51" x2="22" y2="51" /><rect x="78" y="30" width="20" height="40" /><line x1="78" y1="51" x2="98" y2="51" /></g><g class="cxa"><line x1="2" y1="2" x2="22" y2="2" /><line x1="12" y1="2" x2="12" y2="30" /><line x1="12" y1="70" x2="12" y2="98" /><line x1="2" y1="98" x2="22" y2="98" /></g><path class="cxtxa" d="M56,44 L64,52 L56,60 M40,44 L32,52 L40,60 M64,52 L32,52" />',ch_olin:'<text class="cxts100" x="5" y="70">lin</text>',at_sze:'<g class="cxb"><path d=" M 4 35 A 48 48 0 1 1 77 90" /><circle cx="53" cy="83" r="15" /></g><g class="cxa"><path d=" M 34 95 A 30 30 0 1 1 62 63" /></g>',p_cg1errors:'<g class="cxa"><line x1="20" y1="42" x2="36" y2="42" /><line x1="28" y1="42" x2="28" y2="67" /><line x1="48" y1="2" x2="64" y2="2" /><line x1="56" y1="2" x2="56" y2="27" /><line x1="76" y1="22" x2="92" y2="22" /><line x1="84" y1="22" x2="84" y2="47" /></g>',dt_min:'<g class="cxaa"><rect x="8" y="86" width="7" height="10" /></g><g class="cxb"><line x1="2" y1="98" x2="100" y2="98" /><line x1="2" y1="2" x2="2" y2="98" /></g><g class="cxcc"><rect x="28" y="66" width="10" height="27" /><rect x="48" y="46" width="10" height="47" /><rect x="68" y="26" width="10" height="67" /><rect x="88" y="6" width="10" height="87" /></g>',v_pause:'<circle class="cxb" cx="50" cy="50" r="48" /><rect x="24" y="25" width="18" height="50" /><rect x="58" y="25" width="18" height="50" />',tb_row:'<g class="cxcc"><rect x="2" y="50" width="96" height="24" /></g><g class="cxb"><line x1="2" y1="26" x2="98" y2="26" /><line x1="2" y1="50" x2="98" y2="50" /><line x1="2" y1="74" x2="98" y2="74" /><line x1="34" y1="26" x2="34" y2="98" /><line x1="66" y1="26" x2="66" y2="98" /></g><g class="cxa"><rect x="2" y="2" width="96" height="96" /><rect x="12" y="12" width="3" height="3" /><rect x="24" y="12" width="3" height="3" /><rect x="36" y="12" width="3" height="3" /></g>',ch_lg:'<text class="cxtb100" x="15" y="85">G</text>',m_body:'<g class="cxb"><path d="M35,2 Q 45,2 50,10 Q 75,10 75,25 L75,70 Q 75,98 50,98 Q 25,98 25,70 L25,25 Q 25,10 50,10" /><path d="M50,25 Q 55,25 55,30 L55,40 Q 55,45 50,45 Q 45,45 45,40 L45,30 Q 45,25 50,25" /><path d="M50,10 Q 75,10 75,25 L75,35 55,35 55,30 Q 55,25 50,25 Z" /><path d="M50,10 Q 25,10 25,25 L25,35 45,35 45,30 Q 45,25 50,25 Z" /></g>',a_alignbottom:'<g class="cxb"><rect x="2" y="40" width="38" height="45" rx="5" /><rect x="52" y="10" width="38" height="75" rx="5" /></g><g class="cxa"><line x1="1" y1="97" x2="99" y2="97" /></g>',e_close:'<g class="cxb"><path d="M98,50 Q50,100 2,50" /><line x1="2" y1="75" x2="10" y2="65" /><line x1="25" y1="88" x2="30" y2="77" /><line x1="50" y1="92" x2="50" y2="80" /><line x1="75" y1="88" x2="70" y2="77" /><line x1="98" y1="75" x2="88" y2="65" /></g>',gr_g2z:'<g class="cxc"><line x1="2" y1="2" x2="2" y2="100" /><line x1="2" y1="98" x2="98" y2="98" /></g><g class="cxa"><line x1="4" y1="97" x2="70" y2="30" /> <line x1="30" y1="97" x2="96" y2="30" /> <line x1="56" y1="97" x2="122" y2="30" /> <line x1="82" y1="97" x2="148" y2="30" /></g>',b_windowbg2:'<polyline class="cxaw" points="65,45 65,30 48,30 48,15 15,15 15,83 68,83 45,65 65,45" />',ch_sampersand:'<text class="cxtb100" x="15" y="85">&#38;</text>',dps_width:'<g class="cxa"><rect x="2" y="2" width="96" height="96" /></g><path class="cxtxb" d="M71,38 L83,50 L71,62 M29,38 L17,50 L29,62 M83,50 L17,50" />',dps_height:'<g class="cxa"><rect x="2" y="2" width="96" height="96" /></g><path class="cxtxb" d="M38,29 L50,17 L62,29 M38,71 L50,83 L62,71 M50,83 L50,17" />',p_ghvariabletitle:'<g class="cxblue"><rect x="50" y="85" width="30" height="2"/></g>',c_react:'<ellipse class="cxa" cx="50" cy="50" rx="45" ry="18"/><ellipse class="cxa" cx="50" cy="50" rx="18" ry="45" transform="translate(-18 33) rotate(-30.87)"/><ellipse class="cxb" cx="50" cy="50" rx="45" ry="18" transform="translate(-18 66) rotate(-59.13)"/><circle class="cxbb" cx="50" cy="50" r="6"/>',bx_type:'<g class="cxb"><rect x="2" y="30" width="20" height="40" /><line x1="2" y1="51" x2="22" y2="51" /><line x1="2" y1="2" x2="22" y2="2" /><line x1="12" y1="2" x2="12" y2="30" /><line x1="12" y1="70" x2="12" y2="98" /><line x1="2" y1="98" x2="22" y2="98" /><path d="M80,7 Q 80,2 85,2 90,2 90,7 L90,40 Q 97,41 98,50 97,59 90,60 L90,93 Q 90,98 85,98 80,98 80,93 L80,60 Q 73,59 72,50 73,41 80,40 Z" /></g><path class="cxtxa" d="M56,44 L64,52 L56,60 M40,44 L32,52 L40,60 M64,52 L32,52" />',wp_configuration:'<g class="cxa"><path d="M 97.2 61 L 97.2 39 L 83.5 39 C 83 37.3 82.3 35.7 81.4 34.1 L 91.2 24.4 L 75.6 8.8 L 65.9 18.5 C 64.3 17.7 62.7 17 61 16.4 L 61 2.8 L 39 2.8 L 39 16.4 C 37.3 17 35.7 17.7 34.1 18.5 L 24.4 8.8 L 8.8 24.4 L 18.5 34.1 C 17.7 35.7 17 37.3 16.4 39 L 2.8 39 L 2.8 61 L 16.4 61 C 17 62.7 17.7 64.3 18.5 65.9 L 8.8 75.6 L 24.4 91.2 L 34.1 81.5 C 35.7 82.3 37.3 83 39 83.5 L 39 97.3 L 61 97.3 L 61 83.5 C 62.7 82.9 64.3 82.3 65.9 81.4 L 75.6 91.2 L 91.2 75.6 L 81.5 65.9 C 82.3 64.3 83 62.7 83.5 61 Z"/></g><g class="cxb"><circle cx="50" cy="50" r="18.5"/></g>',g_stacked:'<g class="cxcc"><rect x="76.7" y="47.3" width="14.9" height="25.8"/><rect x="49.7" y="39.1" width="14.9" height="25.8"/><rect x="23.2" y="61.7" width="14.9" height="14.9"/></g><g class="cxbb"><rect x="22.4" y="73.1" width="14.9" height="12.9"/><rect x="49.7" y="64.9" width="14.9" height="21.1"/><rect x="76.7" y="73.1" width="14.9" height="12.9"/></g><g class="cxb"><rect x="22.4" y="50" width="15.6" height="36"/><rect x="49.4" y="15.6" width="15.6" height="70.4"/><rect x="76.4" y="27.4" width="15.6" height="58.5"/><line x1="50" y1="39.1" x2="64.9" y2="39.1"/><line x1="50" y1="64.9" x2="64.9" y2="64.9"/><line x1="76.7" y1="47.3" x2="91.6" y2="47.3"/><line x1="76.7" y1="73.1" x2="91.6" y2="73.1"/><line x1="22.4" y1="62.6" x2="37.9" y2="62.6"/><line x1="22.4" y1="73.1" x2="37.9" y2="73.1"/></g><g class="cxa"><line x1="11.9" x2="11.9" y2="100" y1="0"/><line x1="100" y1="86" y2="86" x2="0"/><line y1="62.6" x2="11.9" y2="62.6" x1="0"/><line y1="39.1" x2="11.9" y2="39.1" x1="0"/><line y1="15.6" x2="11.9" y2="15.6" x1="0"/></g>',ar_dcbls:'<text class="cxtn60" x="53" y="51" transform="rotate(45)">&#10555;</text><text class="cxtn60" x="-86" y="51" transform="rotate(45) scale(-1,1)">&#10555;</text>',ch_lo:'<text class="cxtb100" x="10" y="85">O</text>',p_cg2fitden:'<g class="cxa"><path d="M15,90 C50,67 38,0 55,3 71,0 72,90 95,90" /></g>',b_windowgradient:'<g class="cxa"><polyline fill="url(\'#w-grad\')" points="65,45 65,30 48,30 48,15 15,15 15,83 68,83 45,65 65,45" /></g>',b_gsori:'<g class="cxa"><rect fill="url(\'#go-gradv\')" x="1" y="1" width="42" height="42"/><rect fill="url(\'#go-gradh\')" x="57" y="57" width="42" height="42"/></g>',mr_right:'<g class="cxa"><line x1="77" y1="2" x2="77" y2="98" /></g>',g_histogram:'<g class="cxb"><rect x="21.2" y="44.8" width="11.8" height="41.2"/><rect x="33" y="27.4" width="11.8" height="58.6"/><rect x="44.9" y="12.7" width="11.8" height="73.3"/><rect x="56.7" y="26" width="11.8" height="60"/><rect x="68.5" y="49.3" width="11.8" height="36.7"/><rect x="80.3" y="65.4" width="11.8" height="20.6"/></g><g class="cxa"><line x1="11.9" x2="11.9" y2="100" y1="0"/><line x1="100" y1="86" y2="86" x2="0"/><line y1="62.6" x2="11.9" y2="62.6" x1="0"/><line y1="39.1" x2="11.9" y2="39.1" x1="0"/><line y1="15.6" x2="11.9" y2="15.6" x1="0"/><line x1="35.4" y1="100" x2="35.4" y2="86"/><line x1="58.9" y1="100" x2="58.9" y2="86"/><line x1="82.5" y1="100" x2="82.5" y2="86"/></g>',p_cghdata1:'<g class="cxcc"><rect x="12" y="4" width="26" height="18"/><rect x="12" y="70" width="26" height="18"/><rect x="42" y="26" width="26" height="18"/><rect x="72" y="48" width="26" height="18"/><rect x="72" y="70" width="26" height="18"/></g>',p_g2axisx:'<g class="cxblue"><line x1="25" y1="65" x2="95" y2="65" /><line x1="25" y1="65" x2="25" y2="75" /><line x1="45" y1="65" x2="45" y2="75" /><line x1="65" y1="65" x2="65" y2="75" /><line x1="85" y1="65" x2="85" y2="75" /></g>',g_correlation:'<g class="cxb"><line x1="76.6" y1="22.6" x2="36.7" y2="63.9"/><line x1="23.4" y1="22.6" x2="63.3" y2="63.9"/><line x1="50" y1="22.6" x2="76.2" y2="51"/><line x1="50" y1="22.6" x2="23.8" y2="51"/><line x1="76.6" y1="22.6" x2="90.8" y2="36.8"/><line x1="23.4" y1="22.6" x2="9.9" y2="36.8"/></g><g class="cxa"><polygon points="50 22.6 1.9 22.6 1.9 28.8 50 77.4 98.1 28.8 98.1 22.6 50 22.6"/></g>',g_oncoprint:'<g class="cxbb"><rect x="14.4" y="4.2" width="16.4" height="20.4"/><rect x="47.8" y="4.2" width="16.4" height="20.4"/><rect x="80.9" y="31.3" width="16.4" height="6.6"/><rect x="80.9" y="51.6" width="16.4" height="6.6"/><rect x="14.5" y="51.6" width="16.4" height="6.6"/><rect x="64.4" y="51.6" width="16.4" height="6.6"/></g><g class="cxcc"><rect x="64.1" y="11" width="16.4" height="6.6"/><rect x="47.8" y="71.9" width="16.4" height="6.6"/><rect x="30.7" y="31.3" width="16.4" height="6.6"/><rect x="80.9" y="71.9" width="16.4" height="6.6"/></g><g class="cxa"><rect x="14.4" y="4.2" width="16.6" height="20.3"/><rect x="31" y="4.2" width="16.6" height="20.3"/><rect x="64.3" y="4.2" width="16.6" height="20.3"/><rect x="80.9" y="4.2" width="16.6" height="20.3"/><rect x="47.6" y="4.2" width="16.6" height="20.3"/><rect x="14.4" y="24.5" width="16.6" height="20.3"/><rect x="31" y="24.5" width="16.6" height="20.3"/><rect x="64.3" y="24.5" width="16.6" height="20.3"/><rect x="80.9" y="24.5" width="16.6" height="20.3"/><rect x="47.6" y="24.5" width="16.6" height="20.3"/><rect x="14.4" y="44.8" width="16.6" height="20.3"/><rect x="31" y="44.8" width="16.6" height="20.3"/><rect x="64.3" y="44.8" width="16.6" height="20.3"/><rect x="80.9" y="44.8" width="16.6" height="20.3"/><rect x="47.6" y="44.8" width="16.6" height="20.3"/><rect x="14.4" y="65.1" width="16.6" height="20.3"/><rect x="31" y="65.1" width="16.6" height="20.3"/><rect x="64.3" y="65.1" width="16.6" height="20.3"/><rect x="80.9" y="65.1" width="16.6" height="20.3"/><rect x="47.6" y="65.1" width="16.6" height="20.3"/></g><g class="cxa"><line x1="2.5" y1="10" x2="2.5" y2="18"/><line x1="2.5" y1="30.6" x2="2.5" y2="38.6"/><line x1="2.5" y1="51" x2="2.5" y2="58.9"/><line x1="2.5" y1="71.3" x2="2.5" y2="79.2"/><line x1="18.6" y1="95.8" x2="26.6" y2="95.8"/><line x1="35.3" y1="95.8" x2="43.3" y2="95.8"/><line x1="51.9" y1="95.8" x2="59.9" y2="95.8"/><line x1="68.5" y1="95.8" x2="76.5" y2="95.8"/><line x1="85.3" y1="95.8" x2="93.2" y2="95.8"/></g>',p_g3axisx:'<g class="cxblue"><line x1="25" y1="65" x2="95" y2="65" /><line x1="25" y1="65" x2="25" y2="75" /><line x1="45" y1="65" x2="45" y2="75" /><line x1="65" y1="65" x2="65" y2="75" /><line x1="85" y1="65" x2="85" y2="75" /></g>',dps_resize:'<g class="cxa"><rect x="2" y="2" width="96" height="96" /></g><path class="cxtxb" d="M17,71 L17,83 L29,83 M71,17 L83,17 L83,29 M17,83 L83,17" />',b_pail:'<path class="cxbw" d="M95,70l-15,15a6,6,0,0,1-9,0L45,65l25-25,25,25A6,6,0,0,1,95,70Z"/><g class="cxb"><path d="M70,40h6a9,9,0,0,1,9,9h0a9,9,0,0,1-9,9H65"/><circle cx="40" cy="72" r="2"/></g>',b_window:'<polyline class="cxa" points="65,45 65,30 48,30 48,15 15,15 15,83 68,83 45,65 65,45" />',p_cg2fitquantreg:'<g class="cxa"><line x1="10" y1="90" x2="99" y2="1" /><line x1="10" y1="80" x2="84" y2="1" /><line x1="20" y1="90" x2="99" y2="16" /></g>',sh_hexagon:'<path class="cxa" d="M50,10 L90,30 L90,70 L50,90 L10,70 L10,30 Z" />',ch_cctrl:'<text class="cxtb100" x="5" y="85">&#8963;</text>',wp_user:'<g class="cxa"><circle cx="49.9" cy="26" r="23.6" /><path d="M 49.9 49.6 L 49.9 49.6 C 71.7 49.6 89.3 67.2 89.3 88.9 L 89.3 97.7 C 89.3 97.7 89.3 97.7 89.3 97.7 L 10.7 97.7 C 10.7 97.7 10.7 97.7 10.7 97.7 L 10.7 88.9 C 10.6 67.2 28.2 49.6 49.9 49.6 Z" /></g>',z_out:'<g class="cxaa"><text class="cxtn80" x="20" y="58">-</text></g><g class="cxb"><circle cx="35" cy="35" r="33" /><line x1="60" y1="60" x2="99" y2="99" /></g>',ch_cshift:'<text class="cxtb100" x="-10" y="85">&#8679;</text>',g_heatmap:'<g class="cxcc"><rect x="64.5" y="50" width="28.8" height="20.3"/><rect x="64.5" y="69.5" width="28.8" height="20.3"/><rect x="35.6" y="30.2" width="28.8" height="20.3"/><rect x="6.7" y="10.9" width="28.8" height="20.3"/><rect x="6.8" y="69.5" width="28.8" height="20.3"/></g><g class="cxbb"><rect x="64.4" y="10.3" width="28.8" height="20.3"/><rect x="35.6" y="49.9" width="28.8" height="20.3"/><rect x="6.7" y="30.2" width="28.8" height="20.3"/></g><g class="cxa"><line x1="100" y1="50" y2="50" x2="0"/><line x1="93.3" x2="93.3" y2="96.2" y1="3.8"/><line x1="64.4" x2="64.4" y2="96.2" y1="3.8"/><line x1="6.7" x2="6.7" y2="96.2" y1="3.8"/><line x1="35.6" x2="35.6" y2="96.2" y1="3.8"/><line x1="100" y1="69.8" y2="69.8" x2="0"/><line x1="100" y1="89.4" y2="89.4" x2="0"/><line x1="100" y1="10.9" y2="10.9" x2="0"/><line x1="100" y1="30.6" y2="30.6" x2="0"/></g>',p_g1axistitle1:'<g class="cxblue"><rect x="0" y="25" width="3" height="25"/></g>',ar_tr:'<path class="cxtxb" d="M78,2 L98,2 L98,22 M2,98 L98,2" />',g_venn:'<g class="cxbb"><path d="M 39.4 64.1 C 28.2 59.7 20.9 48.9 20.8 36.9 C 20.8 36.6 20.8 36.2 20.8 35.9 C -0.1 44 -4.4 71.7 13.1 85.8 C 23.9 94.5 39.3 94.4 49.9 85.6 C 43.5 80.2 39.7 72.4 39.4 64.1 Z"/><path d="M 50 7.8 C 27.6 7.9 13.7 32.3 25 51.6 C 28.3 57.2 33.4 61.6 39.4 64 C 39.4 63.7 39.4 63.3 39.4 63 C 39.4 54.3 43.3 46 50.1 40.5 C 56.8 46 60.7 54.3 60.7 63 C 60.7 63.3 60.7 63.7 60.7 64 C 81.6 55.7 85.6 28 68 14 C 62.9 10 56.6 7.8 50.1 7.8 Z"/></g><g class="cxcc"><path d="M 50 66.1 C 46.4 66.1 42.8 65.4 39.4 64.1 C 39.7 72.4 43.6 80.3 50 85.6 C 56.5 80.3 60.3 72.4 60.6 64.1 C 57.2 65.4 53.6 66.1 50 66.1 Z"/><path d="M 79.1 35.9 C 75.7 34.6 72.2 33.9 68.5 33.9 C 61.8 33.9 55.2 36.2 50 40.5 C 56.7 46.1 60.6 54.3 60.6 63.1 C 60.6 63.4 60.6 63.7 60.6 64.1 C 71.8 59.7 79.2 48.9 79.2 36.9 C 79.2 36.6 79.1 36.2 79.1 35.9 Z"/><path d="M 20.9 35.9 C 24.3 34.6 27.9 33.9 31.5 33.9 C 38.2 33.9 44.8 36.2 50 40.5 C 43.3 46.1 39.4 54.3 39.4 63.1 C 39.4 63.4 39.4 63.7 39.4 64.1 C 28.2 59.7 20.8 48.9 20.8 36.9 C 20.8 36.6 20.9 36.2 20.9 35.9 Z"/></g><g class="cxa"><circle cx="50" cy="36.9" r="29.2"/><circle cx="68.5" cy="63.1" r="29.2"/><circle cx="31.5" cy="63.1" r="29.2"/></g>',ly_segregate:'<g class="cxa"><rect x="2" y="2" width="43" height="43" /><rect x="53" y="2" width="43" height="43" /><rect x="2" y="53" width="43" height="43" /><rect x="53" y="53" width="43" height="43" /></g><g class="cxbb"><rect x="9" y="20" width="10" height="21" /><rect x="28" y="10" width="10" height="31" /><rect x="60" y="15" width="10" height="26" /><rect x="79" y="31" width="10" height="10" /><rect x="9" y="81" width="10" height="11" /><rect x="28" y="63" width="10" height="29" /><rect x="60" y="73" width="10" height="19" /><rect x="79" y="79" width="10" height="13" /></g>',wp_marker:'<g class="cxa"><path d="M90.7,42.2C90.7,64.7,50,96.8,50,96.8S9.3,64.7,9.3,42.2C9.9,19.8,28.6,2,51,2.6c21.6,0.6,39,18,39.6,39.6H90.7z"/></g><g class="cxb"><circle cx="49.9" cy="34.5" r="12.7"/></g>',tx_tonumeric:'<text class="cxtn60" x="0" y="65">a</text><g class="cxaa"><text class="cxtn60" x="65" y="70">#</text><text class="cxtn60" x="30" y="100">&#10555;</text></g>',n_nodes:'<g class="cxc"><line x1="18.9" y1="15.4" x2="41.7" y2="31.3"/><line x1="21.6" y1="75.8" x2="43.5" y2="53.1"/><line x1="56.7" y1="76.6" x2="55.9" y2="57.1"/><line x1="84.3" y1="60.8" x2="69.5" y2="50.2"/><line x1="78" y1="13.9" x2="66.4" y2="28.2"/></g><g class="cxac"><circle cx="55.3" cy="40.9" r="16.9"/><circle cx="82.3" cy="8.6" r="6.8"/><circle cx="89.9" cy="64.7" r="6.8"/><circle cx="16.9" cy="80.6" r="6.8"/><circle cx="12.2" cy="10.7" r="8.9"/><circle cx="57.1" cy="87.5" r="10.8"/></g>',p_g3axisy:'<g class="cxblue"><line x1="25" y1="15" x2="25" y2="75" /><line x1="15" y1="25" x2="25" y2="25" /><line x1="15" y1="45" x2="25" y2="45" /><line x1="15" y1="65" x2="25" y2="65" /></g>',h_hsample:'<g class="cxa"><rect x="12" y="26" width="26" height="18"/><rect x="42" y="26" width="26" height="18"/><rect x="72" y="26" width="26" height="18"/></g>',cr_bezier:'<g class="cxa"><path d="M1,99 C25,25 75,75 99,1" /></g>',cd_lines:'<g class="cxa"><line x1="10" y1="10" x2="40" y2="10" /><line x1="10" y1="18" x2="40" y2="18" /><line x1="10" y1="26" x2="40" y2="26" /><line x1="10" y1="34" x2="70" y2="34" /><line x1="10" y1="42" x2="60" y2="42" /><line x1="10" y1="50" x2="50" y2="50" /><line x1="10" y1="58" x2="50" y2="58" /><line x1="10" y1="66" x2="50" y2="66" /><line x1="10" y1="74" x2="50" y2="74" /><line x1="10" y1="82" x2="60" y2="82" /><line x1="10" y1="90" x2="70" y2="90" /></g>',g_pie:'<g class="cxcc"><path d="M 49.5 50 L 49.5 3.2 C 26.2 3.4 3.1 19 2.5 50 C 2.4 60.7 5.8 71 12.3 79.5 Z"/></g><g class="cxbb"><path d="M 96 62 L 49.5 50 L 12.3 79.5 C 34.4 107.5 86.6 101.6 96 62 Z"/></g><g class="cxb"><polyline points="49.5 3.2 49.5 50 12.3 79.5"/><line x1="96" y1="62.3" x2="49.5" y2="50"/></g><g class="cxa"><path d="M 97.6 50 C 96.5 112.5 3.5 112.5 2.5 50 C 3.5 -12.5 96.5 -12.5 97.6 50 Z"/></g>',p_g2axisy:'<g class="cxblue"><line x1="25" y1="15" x2="25" y2="75" /><line x1="15" y1="25" x2="25" y2="25" /><line x1="15" y1="45" x2="25" y2="45" /><line x1="15" y1="65" x2="25" y2="65" /></g>',ch_lr:'<text class="cxtb100" x="15" y="85">R</text>',a_order:'<g class="cxb"><polyline points="25,52 2,52 2,2 52,2 52,25" /><polyline points="48,77 27,77 27,27 77,27 77,48" /></g><g class="cxa"><rect x="48" y="48" width="50" height="50" /></g>',xar_dctrs:'<path class="cxtxb" d="M 50 10 A 40 40 0 0 1 90 50 M58,3 L50,10 L58,18 M97,42 L90,50 L82,42" />',ps_right:'<path class="cxtxb" d="M62,42 L70,50 L62,58 M70,50 L30,50" /><g class="cxa"><rect x="78" y="40" width="20" height="20" rx="2" /></g>',dtt_pivot:'<g class="cxaa"><text class="cxtn60" x="-20" y="-85" transform="rotate(135)">&#10554;</text><text class="cxtn60" x="-20" y="-85" transform="rotate(135) scale(-1,1)">&#10554;</text></g><g class="cxb"><rect x="2" y="2" width="18" height="18" /><rect x="30" y="2" width="68" height="18" /><rect x="2" y="30" width="18" height="68" /></g>',ar_bl:'<path class="cxtxb" d="M2,78 L2,98 L22,98 M2,98 L98,2" />',g_stackedpercent:'<g class="cxcc"><rect x="76.7" y="45.4" width="14.9" height="22.1"/><rect x="49.7" y="21.1" width="14.9" height="39.7"/><rect x="23.2" y="31.3" width="14.9" height="37.3"/></g><g class="cxbb"><rect x="22.4" y="68.6" width="14.9" height="17.4"/><rect x="49.7" y="60.8" width="14.9" height="25.2"/><rect x="76.7" y="67.5" width="14.9" height="18.5"/></g><g class="cxb"><rect x="22.4" y="2" width="15.6" height="84"/><rect x="49.4" y="2" width="15.6" height="84"/><rect x="76.4" y="2" width="15.6" height="84"/><line x1="50" y1="21.1" x2="64.9" y2="21.1"/><line x1="50" y1="60.8" x2="64.9" y2="60.8"/><line x1="76.7" y1="45.4" x2="91.6" y2="45.4"/><line x1="76.7" y1="67.5" x2="91.6" y2="67.5"/><line x1="22.4" y1="31.3" x2="37.9" y2="31.3"/><line x1="22.4" y1="68.6" x2="37.9" y2="68.6"/></g><g class="cxa"><line x1="11.9" x2="11.9" y2="100" y1="0"/><line x1="100" y1="86" y2="86" x2="0"/><line y1="62.6" x2="11.9" y2="62.6" x1="0"/><line y1="39.1" x2="11.9" y2="39.1" x1="0"/><line y1="15.6" x2="11.9" y2="15.6" x1="0"/></g>',rt_ac2:'<g class="cxb"><path d=" M 18 18 A 45 45 45 0 1 95 50" /><line x1="18" y1="0" x2="18" y2="18" /><line x1="36" y1="18" x2="16" y2="18" /><path d=" M 82 82 A 45 45 225 0 1 5 50" /><line x1="64" y1="82" x2="84" y2="82" /><line x1="82" y1="100" x2="82" y2="82" /></g>',gr_minor:'<g class="cxc"><line x1="2" y1="2" x2="2" y2="100" /><line x1="2" y1="98" x2="98" y2="98" /></g><g class="cxb"><line x1="2" y1="2" x2="2" y2="100" /><line x1="2" y1="98" x2="98" y2="98" /><line x1="4" y1="14" x2="98" y2="14" /> <line x1="4" y1="26" x2="98" y2="26" /> <line x1="4" y1="38" x2="98" y2="38" /> <line x1="4" y1="50" x2="98" y2="50" /> <line x1="4" y1="62" x2="98" y2="62" /> <line x1="4" y1="74" x2="98" y2="74" /> <line x1="4" y1="86" x2="98" y2="86" /></g>',p_cg2data:'<g class="cxb"><rect x="18" y="56" width="2" height="2"/><rect x="26" y="32" width="2" height="2"/><rect x="34" y="44" width="2" height="2"/><rect x="42" y="10" width="2" height="2"/><rect x="43" y="30" width="2" height="2"/><rect x="50" y="80" width="2" height="2"/><rect x="58" y="60" width="2" height="2"/><rect x="64" y="24" width="2" height="2"/><rect x="70" y="70" width="2" height="2"/><rect x="74" y="48" width="2" height="2"/><rect x="82" y="18" width="2" height="2"/><rect x="90" y="72" width="2" height="2"/><rect x="55" y="45" width="2" height="2"/><rect x="40" y="60" width="2" height="2"/><rect x="25" y="75" width="2" height="2"/></g>',ch_oz:'<text class="cxti100" x="25" y="70">z</text>',ar_br:'<path class="cxtxb" d="M98,78 L98,98 L78,98 M2,2 L98,98" />',p_dgline:'<g class="cxa"><line x1="10" y1="50" x2="98" y2="50" /><line x1="10" y1="51" x2="98" y2="51" /></g>',p_cg1axeshorizontal:'<g class="cxb"><line x1="10" y1="2" x2="10" y2="98" /><rect x="0" y="67" width="2" height="10"/><rect x="0" y="39" width="2" height="10"/><rect x="0" y="11" width="2" height="10"/><line x1="2" y1="90" x2="98" y2="90" /><line x1="30" y1="90" x2="30" y2="98" /><line x1="50" y1="90" x2="50" y2="98" /><line x1="70" y1="90" x2="70" y2="98" /><line x1="90" y1="90" x2="90" y2="98" /></g>',p_ghsamplelabels:'<g class="cxblue"><rect x="15" y="25" width="3" height="10"/><rect x="15" y="45" width="3" height="10"/></g>',ga_axisxy:'<g class="cxb"><line x1="15" y1="2" x2="15" y2="98" /><line x1="15" y1="2" x2="0" y2="17" /><line x1="15" y1="2" x2="30" y2="17" /><line x1="2" y1="85" x2="98" y2="85" /><line x1="83" y1="70" x2="98" y2="85" /><line x1="83" y1="100" x2="98" y2="85" /></g><text class="cxtn30 cxaa" x="30" y="25">X</text><text class="cxtn30 cxaa" x="65" y="70">Y</text>',lg_legend:'<g class="cxa"><rect x="2" y="2" width="96" height="96"/><rect x="18" y="20" width="2" height="2"/><rect x="18" y="50" width="2" height="2"/><rect x="18" y="80" width="2" height="2"/></g><g class="cxaa"><text class="cxtn20" x="30" y="28">Good</text><text class="cxtn20" x="30" y="58">Better</text><text class="cxtn20" x="30" y="88">Best!</text></g>',ch_ll:'<text class="cxtb100" x="15" y="85">L</text>',p_cghdata2:'<g class="cxbb"><rect x="72" y="4" width="26" height="18"/><rect x="12" y="26" width="26" height="18"/><rect x="42" y="48" width="26" height="18"/></g>',sr_aai:'<path class="cxtxa" d="M80,2 L98,17 L80,33 M98,17 L2,17" /><text class="cxtn60" x="0" y="90">a</text><text class="cxtn100" x="35" y="90">a</text>',gr_stylesolid:'<g class="cxc"><line x1="2" y1="2" x2="2" y2="100" /><line x1="2" y1="98" x2="98" y2="98" /></g><g class="cxa"><line x1="4" y1="23" x2="98" y2="23" /> <line x1="4" y1="48" x2="98" y2="48" /> <line x1="4" y1="73" x2="98" y2="73" /></g>',ch_ofx:'<text class="cxti100" x="16" y="75">fx</text>',ch_sminus:'<text class="cxtb100" x="35" y="80">-</text>',ar_minmax:'<path class="cxtxb" d="M2,22 L2,2 L22,2 M28,45 L45,45 L48,28 M2,2 L45,45" /><path class="cxtxb" d="M25,55 L45,55 L45,75 M2,78 L2,98 L22,98 M2,98 L45,55" /><path class="cxtxb" d="M78,98 L98,98 L98,78 M55,75 L55,55 L75,55 M98,98 L55,55" /><path class="cxtxb" d="M55,25 L55,45 L75,45 M78,2 L98,2 L98,22 M98,2 L55,45" />',wp_arguments:'<g class="cxb"><line x1="29.2" y1="71.9" x2="37.8" y2="71.9"/><line x1="45.6" y1="71.9" x2="54.3" y2="71.9"/><line x1="62.1" y1="71.9" x2="70.7" y2="71.9"/></g><g class="cxa"><path d="M 21.3 15.9 L 21.3 15.9 C 14.1 15.9 8.6 22.6 10.1 29.7 C 11 33.3 11.3 36.9 11 40.6 C 9.9 45.2 6.4 48.7 1.9 49.9"/><path d="M 78.6 15.9 L 78.6 15.9 C 85.9 15.9 91.3 22.6 89.8 29.7 C 89 33.3 88.8 37 89.1 40.6 C 90.2 45.2 93.7 48.7 98.2 49.9"/></g><g class="cxa"><path d="M 21.3 84 L 21.3 84 C 14.1 84 8.6 77.3 10.1 70.2 C 11 66.6 11.3 62.9 11 59.3 C 9.8 54.7 6.4 51.2 1.9 49.9 L 4.8 48.7"/><path d="M 78.6 84 L 78.6 84 C 85.9 84 91.3 77.3 89.8 70.2 C 89 66.6 88.8 62.9 89.1 59.3 C 90.2 54.7 93.7 51.2 98.2 49.9 L 95.3 48.7"/></g>',ps_toloc:'<g class="cxb"><rect x="2" y="2" width="25" height="25" /><rect x="34" y="2" width="25" height="25" /><rect x="67" y="2" width="25" height="25" /><rect x="2" y="34" width="25" height="25" /><rect x="67" y="34" width="25" height="25" /><rect x="2" y="67" width="25" height="25" /><rect x="34" y="67" width="25" height="25" /><rect x="67" y="67" width="25" height="25" /></g><g class="cxaa"><rect x="34" y="34" width="25" height="25" /></g>',p_ghsubtitle:'<g class="cxblue"><rect x="55" y="10" width="20" height="2"/></g>',ar_tl:'<path class="cxtxb" d="M2,22 L2,2 L22,2 M2,2 L98,98" />',g_barline:'<g class="cxb"> <rect x="23.2" y="56" width="15.1" height="30.1" /><rect x="50" y="42.5" width="15.1" height="43.6"/><rect x="76.7" y="30.4" width="15.1" height="55.6" /></g><g class="cxa"><line x1="11.9" y1="0.5" x2="11.9" y2="100" /><line x1="99.4" y1="86.1" y2="86.1" x2="0"/><line y1="62.7" x2="11.9" y2="62.7" x1="0"/><line y1="39.4" x2="11.9" y2="39.4" x1="0"/><line y1="16.1" x2="11.9" y2="16.1" x1="0"/><polyline points="23.2 42.5 49.7 19.6 59.5 28.6 89.1 0.5"/></g>',g_scatter2d:'<g class="cxa"><line x1="11.9" x2="11.9" y2="100" y1="0"/><line x1="100" y1="86" y2="86" x2="0"/><line y1="62.6" x2="11.9" y2="62.6" x1="0"/><line y1="39.1" x2="11.9" y2="39.1" x1="0"/><line y1="15.6" x2="11.9" y2="15.6" x1="0"/><line x1="32.5" y1="100" x2="32.5" y2="86"/><line x1="56" y1="100" x2="56" y2="86"/><line x1="79.4" y1="100" x2="79.4" y2="86"/></g><g class="cxb"><line x1="28.9" y1="15.6" x2="32.5" y2="15.6"/><line x1="80.3" y1="19.5" x2="84" y2="19.5"/><line x1="54.1" y1="26.6" x2="57.8" y2="26.6"/><line x1="90" y1="36.8" x2="93.7" y2="36.8"/><line x1="80.3" y1="47.2" x2="84" y2="47.2"/><line x1="67.7" y1="47.2" x2="71.4" y2="47.2"/><line x1="61.2" y1="59.8" x2="64.8" y2="59.8"/><line x1="74.5" y1="68.3" x2="78.2" y2="68.3"/><line x1="42.7" y1="73.6" x2="46.3" y2="73.6"/><line x1="34.2" y1="59.8" x2="37.9" y2="59.8"/><line x1="48.2" y1="47.2" x2="51.8" y2="47.2"/><line x1="23.6" y1="39.1" x2="27.3" y2="39.1"/></g>',dps_expand:'<g class="cxa"><rect x="9.5" y="9.5" width="80" height="80" rx="4" /></g><text class="cxtb100" x="3" y="95" transform="scale(1,-1) translate(0,-100)">&#8963;</text>',tx_stringnumeric:'<text class="cxtn60" x="0" y="65">a</text><text class="cxtn60" x="65" y="70">#</text><g class="cxaa"><text class="cxtn60" x="30" y="40">&#10554;</text><text class="cxtn60" x="30" y="100">&#10555;</text></g>',p_cg2datacor:'<g class="cxb"><rect x="20" y="68" width="2" height="2" /><rect x="25" y="80" width="2" height="2" /><rect x="30" y="61" width="2" height="2" /><rect x="35" y="71" width="2" height="2" /><rect x="40" y="49" width="2" height="2" /><rect x="45" y="60" width="2" height="2" /><rect x="50" y="37" width="2" height="2" /><rect x="55" y="51" width="2" height="2" /><rect x="60" y="30" width="2" height="2" /><rect x="65" y="44" width="2" height="2" /><rect x="70" y="19" width="2" height="2" /><rect x="75" y="30" width="2" height="2" /><rect x="80" y="6" width="2" height="2" /><rect x="85" y="21" width="2" height="2" /><rect x="90" y="2" width="2" height="2" /><rect x="95" y="15" width="2" height="2" /></g>',p_ghtitlesubtitle:'<g class="cxblue"><rect x="50" y="0" width="30" height="2"/><rect x="55" y="10" width="20" height="2"/></g>',ch_ocode:'<text class="cxtn100" x="10" y="-20" transform="rotate(90)">&#8963;</text><text class="cxtn100" x="-90" y="80" transform="rotate(-90)">&#8963;</text>',g_stackedpercentline:'<g class="cxcc"><rect x="76.7" y="34.8" width="14.9" height="32.7"/><rect x="49.7" y="59.1" width="14.9" height="18.2"/><rect x="23.2" y="31.3" width="14.9" height="37.3"/></g><g class="cxbb"><rect x="22.4" y="68.6" width="14.9" height="17.4"/><rect x="49.7" y="76.7" width="14.9" height="9.3"/><rect x="76.7" y="67.5" width="14.9" height="18.5"/></g><g class="cxb"><rect x="22.4" y="2" width="15.6" height="84"/><rect x="49.4" y="2" width="15.6" height="84"/><rect x="76.4" y="2" width="15.6" height="84"/><line x1="50" y1="59.1" x2="64.9" y2="59.1"/><line x1="50" y1="76.7" x2="64.9" y2="76.7"/><line x1="76.7" y1="34.8" x2="91.6" y2="34.8"/><line x1="76.7" y1="67.5" x2="91.6" y2="67.5"/><line x1="22.4" y1="31.3" x2="37.9" y2="31.3"/><line x1="22.4" y1="68.6" x2="37.9" y2="68.6"/></g><g class="cxa"><line x1="11.9" x2="11.9" y2="100" y1="0"/><line x1="100" y1="86" y2="86" x2="0"/><line y1="62.6" x2="11.9" y2="62.6" x1="0"/><line y1="39.1" x2="11.9" y2="39.1" x1="0"/><line y1="15.6" x2="11.9" y2="15.6" x1="0"/><polyline points="23.1 15.6 57.7 51.1 89.9 15.6"/></g>',at_shp:'<g class="cxa"><polyline points="48,40 65,20 98,75 65,75" /></g><g class="cxb"><circle cx="30" cy="70" r="27" /><polyline points="2,48 2,2 50,2 50,25" /></g>',p_g1axistitle2:'<g class="cxblue"><rect x="97" y="25" width="3" height="25"/></g>',lg_g2:'<g class="cxc"><line x1="10" y1="10" x2="10" y2="98" /><line x1="2" y1="90" x2="98" y2="90" /><line x1="2" y1="70" x2="10" y2="70" /><line x1="2" y1="50" x2="10" y2="50" /><line x1="2" y1="30" x2="10" y2="30" /><line x1="30" y1="90" x2="30" y2="98" /><line x1="50" y1="90" x2="50" y2="98" /><line x1="70" y1="90" x2="70" y2="98" /><line x1="90" y1="90" x2="90" y2="98" /></g><g class="cxcc"><rect x="26" y="20" width="2" height="2"/><rect x="36" y="40" width="2" height="2"/><rect x="46" y="70" width="2" height="2"/><rect x="56" y="80" width="2" height="2"/><rect x="66" y="60" width="2" height="2"/><rect x="27" y="80" width="2" height="2"/><rect x="20" y="60" width="2" height="2"/><rect x="76" y="75" width="2" height="2"/></g>',sl_checkboxoff:'<rect class="cxb" x="15" y="15" width="70" height="70" rx="5" />',ch_lu:'<text class="cxtb100" x="15" y="85">U</text>',sp_thinner:'<path class="cxtxa" d="M30,42 L22,50 L30,58 M62,50 L22,50" /><g class="cxa"><rect x="2" y="2" width="10" height="96" /></g><g class="cxb"><rect x="72" y="2" width="26" height="96" /></g>',p_ghcitation:'<g class="cxblue"><rect x="75" y="95" width="20" height="2"/></g>',ar_b:'<path class="cxtxb" d="M35,80 L50,98 L65,80 M50,98 L50,2" />',ch_lh:'<text class="cxtb100" x="15" y="85">H</text>',sr_aad:'<path class="cxtxa" d="M80,2 L98,17 L80,33 M98,17 L2,17" /><text class="cxtn100" x="0" y="90">a</text><text class="cxtn60" x="60" y="90">a</text>',b_grvb:'<g class="cxa"><rect fill="url(\'#vb-grad\')" x="0" y="0" width="100" height="100" /></g>',ch_olog2:'<text class="cxts70" x="5" y="60">log</text><text class="cxtn40" x="65" y="85">2</text>',c_rrc:'<path fill="url(\'#rr-grad\')" d="M 50 16 C 22.4 16 0 32.1 0 52.1 C 0 72.1 22.4 88.2 50 88.2 C 77.6 88.2 100 72.1 100 52.1 C 100 32.1 77.6 16 50 16 Z M 56.3 76.5 C 35.8 76.5 19.1 65.5 19.1 52.2 C 19.1 38.9 35.8 27.9 56.3 27.9 C 76.8 27.9 93.5 38.8 93.5 52.2 C 93.5 65.6 76.9 76.5 56.3 76.5 Z"/><path class="clr" d="M 80.6 73.4 C 85.8 72.1 89.2 65.9 88.1 59.5 C 87.2 54 83.2 50 78.6 50 L 53.8 50 L 53.8 89 L 64.8 89 L 64.8 73.7 L 69.6 73.7 L 77.8 89 L 88.8 89 L 80.6 73.4 Z M 74 66.4 L 64.3 66.4 L 64.3 57.3 L 74 57.3 C 76.2 57.3 78 59.1 78 61.3 C 78 61.4 78 61.4 78 61.5 C 78.4 63.8 76.9 66 74.6 66.5 C 74.5 66.5 74.3 66.5 74 66.4 Z"/><path class="clr" d="M 38.7 34.4 C 43.9 33.1 47.3 26.9 46.2 20.5 C 45.3 15 41.3 11 36.7 11 L 11.9 11 L 11.9 50 L 22.9 50 L 22.9 34.7 L 27.7 34.7 L 35.9 50 L 46.9 50 L 38.7 34.4 Z M 32.1 27.4 L 22.4 27.4 L 22.4 18.3 L 32.1 18.3 C 34.3 18.3 36.1 20.1 36.1 22.3 C 36.1 22.4 36.1 22.4 36.1 22.5 C 36.5 24.8 35 27 32.7 27.5 C 32.6 27.5 32.4 27.5 32.1 27.4 Z"/>',p_g1axestitles:'<g class="cxblue"><rect x="0" y="25" width="3" height="25"/><rect x="97" y="25" width="3" height="25"/></g>',cl_horizontal:'<g class="cxa"><line y1="6" x1="75" y2="6" x2="90" /><line y1="14" x1="75" y2="14" x2="90" /><line y1="6" x1="75" y2="14" x2="75" /><line y1="22" x1="65" y2="22" x2="90" /><line y1="30" x1="65" y2="30" x2="90" /><line y1="22" x1="65" y2="30" x2="65" /><line y1="10" x1="75" y2="10" x2="50" /><line y1="26" x1="65" y2="26" x2="50" /><line y1="10" x1="50" y2="26" x2="50" /><line y1="38" x1="50" y2="38" x2="90" /><line y1="46" x1="65" y2="46" x2="90" /><line y1="54" x1="65" y2="54" x2="90" /><line y1="46" x1="65" y2="54" x2="65" /><line y1="50" x1="65" y2="50" x2="50" /><line y1="38" x1="50" y2="50" x2="50" /><line y1="62" x1="65" y2="62" x2="90" /><line y1="70" x1="65" y2="70" x2="90" /><line y1="62" x1="65" y2="70" x2="65" /><line y1="44" x1="40" y2="44" x2="50" /><line y1="66" x1="40" y2="66" x2="65" /><line y1="44" x1="40" y2="66" x2="40" /><line y1="78" x1="55" y2="78" x2="90" /><line y1="86" x1="75" y2="86" x2="90" /><line y1="94" x1="75" y2="94" x2="90" /><line y1="86" x1="75" y2="94" x2="75" /><line y1="90" x1="55" y2="90" x2="75" /><line y1="78" x1="55" y2="90" x2="55" /><line y1="84" x1="25" y2="84" x2="55" /><line y1="55" x1="25" y2="55" x2="40" /><line y1="55" x1="25" y2="84" x2="25" /><line y1="18" x1="10" y2="18" x2="50" /><line y1="70" x1="10" y2="70" x2="25" /><line y1="18" x1="10" y2="70" x2="10" /><line y1="44" x1="10" y2="44" x2="0" /></g><g class="cxb"><rect y="5" x="96" width="2" height="2" /><rect y="13" x="96" width="2" height="2" /><rect y="21" x="96" width="2" height="2" /><rect y="29" x="96" width="2" height="2" /><rect y="37" x="96" width="2" height="2" /><rect y="45" x="96" width="2" height="2" /><rect y="53" x="96" width="2" height="2" /><rect y="61" x="96" width="2" height="2" /><rect y="69" x="96" width="2" height="2" /><rect y="78" x="96" width="2" height="2" /><rect y="86" x="96" width="2" height="2" /><rect y="94" x="96" width="2" height="2" /></g>',ch_ofloor:'<text class="cxtn50" x="0" y="70">floor</text>',sl_lightbulboff:'<g class="cxb"><path d="M75.4,50.1C75.4,36,64,24.7,50,24.7S24.6,36.1,24.6,50.1c0,7.4,3.2,14.3,8.7,19.2c3.3,2.9,5.3,7.1,5.3,11.5h22.7c0-4.5,2-8.8,5.5-11.7C72.2,64.3,75.4,57.3,75.4,50.1z"/><path d="M38.7,80.8h22.9l0,0v8.6c0,4.5-3.7,8.2-8.2,8.2l0,0h-6.5c-4.5,0-8.2-3.7-8.2-8.2l0,0L38.7,80.8L38.7,80.8z"/></g>',sv_video:'<g class="cxa"><rect x="2" y="20" width="70" height="60" rx="4" /></g><g class="cxb"><polyline points="70,40 98,30 98,70 70,60" /></g>',wp_softwaredesign:'<g class="cxa"><path d="M 46.8 78.1 L 5 78.1 C 3.4 78.1 2.1 76.8 2.1 75.2 L 2.1 12.8 C 2.1 11.2 3.4 9.9 5 9.9 L 95 9.9 C 96.6 9.9 97.9 11.2 97.9 12.8 L 97.9 45.4"/><polyline points="55.1 90.1 39.4 90.1 39.4 78.1"/><line x1="21.8" y1="90.1" x2="55.1" y2="90.1"/></g><g class="cxb"><polyline points="26.9 44 16 33.1 26.9 22.2"/><polyline points="45.6 44 56.5 33.1 45.6 22.2"/><line x1="39.1" y1="22.2" x2="33.5" y2="44"/><path d="M 97.8 72.6 L 97.8 62 L 91.2 62 C 91 61.2 90.7 60.5 90.3 59.7 L 95 55 L 87.4 47.6 L 82.8 52.2 C 82 51.8 81.2 51.5 80.4 51.2 L 80.4 44.7 L 70 44.7 L 70 51.2 C 69.1 51.5 68.3 51.8 67.6 52.2 L 62.9 47.6 L 55.4 55 L 60 59.7 C 59.6 60.4 59.3 61.2 59 62 L 52.5 62 L 52.5 72.6 L 59.1 72.6 C 59.3 73.4 59.7 74.2 60 75 L 55.4 79.6 L 62.8 87 L 67.4 82.4 C 68.2 82.8 69 83.1 69.8 83.4 L 69.8 90 L 80.4 90 L 80.4 83.4 C 81.2 83.1 82 82.8 82.7 82.4 L 87.4 87 L 94.8 79.6 L 90.3 74.8 C 90.8 74.1 91.1 73.3 91.4 72.4 Z"/><circle cx="75.1" cy="67.3" r="6.7"/></g>',ps_top:'<path class="cxtxb" d="M42,38 L50,30 L58,38 M50,70 L50,30" /><g class="cxa"><rect x="40" y="2" width="20" height="20" rx="2" /></g>',wp_documentation:'<g class="cxa"><path d="M 50 21.9 C 34.8 14.9 17.4 14.9 2.3 21.9 L 2.3 83.3 C 17.6 77.2 34.7 77.2 50 83.3 C 65.3 77.2 82.4 77.2 97.8 83.3 L 97.8 21.9 C 82.6 14.9 65.2 14.9 50 21.9 Z" /></g><g class="cxb"><line x1="50" y1="21.9" x2="50" y2="83.1" /></g>',at_motion:'<g class="cxb"><rect x="22" y="35" width="20" height="30" /><rect x="2" y="35" width="10" height="30" /></g><g class="cxa"><polyline points="98,50 68,85 68,65 53,65 53,35, 68,35 68,15 98,50" /></g>',ch_oquantile:'<text class="cxti100" x="15" y="75">Q</text>',g_dashboard:'<g class="cxb"><path d="M 40.2 73.9 C 40.2 66.3 48.3 61.6 54.8 65.4 C 57.9 67.1 59.7 70.4 59.7 73.9"/><line x1="50" y1="33.3" x2="50" y2="41.5"/><line x1="72.3" y1="40" x2="67.8" y2="46.8"/><line x1="86.6" y1="56.5" x2="79.2" y2="59.9"/><line x1="27.6" y1="40" x2="32.1" y2="46.8"/><line x1="13.3" y1="56.5" x2="20.7" y2="59.9"/><line x1="47.1" y1="64.1" x2="41.2" y2="43.4"/></g><g class="cxa"><path d="M 50 26.2 C 23.6 26.2 2.3 47.5 2.3 73.9 L 97.7 73.9 C 97.7 47.5 76.3 26.2 50 26.2 Z"/></g>',a_alignleft:'<g class="cxb"><rect x="15" y="2" width="45" height="38" rx="5" /><rect x="15" y="52" width="75" height="38" rx="5" /></g><g class="cxa"><line x1="3" y1="1" x2="3" y2="99" /></g>',ar_t:'<path class="cxtxb" d="M35,20 L50,2 L65,20 M50,98 L50,2" />',bx_violint:'<g class="cxac"><path d="M66,18 Q76,28 63,36 50,40 66,49 84,55 84,67 82,81 65,86 L35,86 Q18,81 16,67 16,55 39,50 50,40 37,36 24,28 34,18 Z" /></g>',p_g1axes:'<g class="cxblue"><line x1="25" y1="15" x2="25" y2="65" /><line x1="15" y1="25" x2="25" y2="25" /><line x1="15" y1="45" x2="25" y2="45" /><line x1="15" y1="65" x2="25" y2="65" /><line x1="75" y1="15" x2="75" y2="65" /><line x1="75" y1="25" x2="85" y2="25" /><line x1="75" y1="45" x2="85" y2="45" /><line x1="75" y1="65" x2="85" y2="65" /></g>',cr_normal:'<g class="cxa"><path d="M1,99 C45,67 33,0 50,3 66,0 67,90 99,99" /></g>',g_hexplotbinplot:'<g class="cxb"><line x1="10" y1="2" x2="10" y2="98" /><line x1="2" y1="10" x2="10" y2="10" /><line x1="2" y1="30" x2="10" y2="30" /><line x1="2" y1="50" x2="10" y2="50" /><line x1="2" y1="70" x2="10" y2="70" /><line x1="2" y1="90" x2="98" y2="90" /><line x1="10" y1="90" x2="10" y2="98" /><line x1="30" y1="90" x2="30" y2="98" /><line x1="50" y1="90" x2="50" y2="98" /><line x1="70" y1="90" x2="70" y2="98" /><line x1="90" y1="90" x2="90" y2="98" /></g><g class="cxa"><rect x="20" y="68" width="15" height="15" /><rect x="35" y="68" width="15" height="15" /><rect x="35" y="53" width="15" height="15" /><rect x="50" y="38" width="15" height="15" /><rect x="65" y="23" width="15" height="15" /><rect x="50" y="53" width="15" height="15" /><rect x="65" y="38" width="15" height="15" /><rect x="80" y="23" width="15" height="15" /></g>',ch_lw:'<text class="cxtb100" x="2" y="85">W</text>',gr_g2x:'<g class="cxc"><line x1="2" y1="2" x2="2" y2="100" /><line x1="2" y1="98" x2="100" y2="98" /></g><g class="cxa"><line x1="20" y1="0" x2="20" y2="97" /> <line x1="40" y1="0" x2="40" y2="97" /> <line x1="60" y1="0" x2="60" y2="97" /> <line x1="80" y1="0" x2="80" y2="97" /></g>',ar_l:'<path class="cxtxb" d="M20,35 L2,50 L20,65 M98,50 L2,50" />',bx_medianc:'<g class="cxb"><rect x="30" y="20" width="40" height="60" /><line x1="30" y1="2" x2="70" y2="2" /><line x1="50" y1="2" x2="50" y2="20" /><line x1="30" y1="98" x2="70" y2="98" /><line x1="50" y1="98" x2="50" y2="80" /></g><g class="cxbb"><rect x="40" y="40" width="20" height="20" /></g>',a_group:'<g class="cxb"><polyline points="42,57 27,57 27,27 57,27 57,42" /><rect x="42" y="42" width="30" height="30" /></g><g class="cxa"><line x1="18" y1="10" x2="82" y2="10" stroke-dashoffset="-3" stroke-dasharray="8"/><line x1="18" y1="90" x2="82" y2="90" stroke-dashoffset="-3" stroke-dasharray="8"/><line x1="10" y1="18" x2="10" y2="82" stroke-dashoffset="-3" stroke-dasharray="8"/><line x1="90" y1="18" x2="90" y2="82" stroke-dashoffset="-3" stroke-dasharray="8"/><rect x="2" y="2" width="16" height="15" /><rect x="2" y="82" width="16" height="15" /><rect x="82" y="2" width="16" height="15" /><rect x="82" y="82" width="16" height="15" /></g>',g_facet:'<g class="cxb"><line x1="10.2" y1="28" x2="10.2" y2="14.3"/><line x1="19.5" y1="28" x2="19.5" y2="9.1"/><line x1="10.2" y1="62.6" x2="10.2" y2="53.1"/><line x1="19.5" y1="62.6" x2="19.5" y2="48.9"/><line x1="10.2" y1="97.2" x2="10.2" y2="79.7"/><line x1="19.5" y1="97.2" x2="19.5" y2="79.7"/><line x1="89.7" y1="28" x2="89.7" y2="14.3"/><line x1="80.4" y1="28" x2="80.4" y2="9.1"/><line x1="89.7" y1="62.6" x2="89.7" y2="53.1"/><line x1="80.4" y1="62.6" x2="80.4" y2="48.9"/><line x1="89.7" y1="97.2" x2="89.7" y2="84.5"/><line x1="80.4" y1="97.2" x2="80.4" y2="90.3"/><line x1="45.3" y1="28" x2="45.3" y2="18.5"/><line x1="54.6" y1="28" x2="54.6" y2="9.1"/><line x1="45.3" y1="62.6" x2="45.3" y2="45.1"/><line x1="54.6" y1="62.6" x2="54.6" y2="55.7"/><line x1="45.3" y1="97.2" x2="45.3" y2="79.7"/><line x1="54.6" y1="97.2" x2="54.6" y2="84"/></g><g class="cxa"><rect x="2.3" y="2.8" width="25.2" height="25.2"/><rect x="2.3" y="37.3" width="25.2" height="25.2"/><rect x="2.3" y="71.9" width="25.2" height="25.2"/><rect x="72.5" y="2.8" width="25.2" height="25.2"/><rect x="72.5" y="37.3" width="25.2" height="25.2"/><rect x="72.5" y="71.9" width="25.2" height="25.2"/><rect x="37.4" y="2.8" width="25.2" height="25.2"/><rect x="37.4" y="37.3" width="25.2" height="25.2"/><rect x="37.4" y="71.9" width="25.2" height="25.2"/></g>',g_contour:'<g class="cxa"><path d="M 56.1 92.7 L 21.1 92.7 C 17.4 92.8 14.3 89.8 14.3 86 L 14.3 82.1 C 14.3 80.4 13.1 79.1 11.4 79.1 L 11.4 79.1 C 9.8 79.1 8.4 77.7 8.4 76.2 L 8.4 29.7 L 14.3 29.7 L 14.3 22.2 L 20.3 22.2 L 20.3 18.4 L 25 18.4 L 25 13.3 L 29.9 13.3 L 29.9 8.7 L 33.6 8.7 L 33.6 5.8 L 37.8 5.8 L 37.8 2.8 L 50 2.8 L 50 6.6 L 62.5 6.6 L 62.5 10.9 L 69.1 10.9 L 69.1 15.7 L 74 15.7 L 74 20 L 77.5 20 L 77.5 27 L 82.5 27 L 82.5 34.9 L 86.2 34.9 L 86.2 50.9 L 90.8 50.9 L 90.8 69.8 L 86.5 69.8 L 86.5 80.1 L 82.5 80.1 L 82.5 90.6 C 82.5 91.8 81.5 92.7 80.2 92.7 L 80.2 92.7 C 78.9 92.7 77.9 93.8 77.9 95 L 77.9 95 C 77.9 96.3 76.9 97.3 75.6 97.3 L 60.8 97.3 C 59.6 97.3 58.6 96.3 58.6 95 L 58.6 95 C 58.6 93.7 57.5 92.6 56.1 92.7 Z"/><polygon points="38.4 42.7 38.4 38.9 49.9 38.9 49.9 43.2 53.7 43.2 53.7 71.1 38.4 71.1 38.4 63.2 34 63.2 34 42.7 38.4 42.7"/></g><g class="cxb"><polygon points="63 78.5 69.8 78.5 69.8 70.7 78.5 70.7 78.5 59.1 74 59.1 74 50.6 69.5 50.6 69.5 39.4 66.7 39.4 66.7 31.7 62.5 31.7 62.5 27.5 54.2 27.5 54.2 22.9 33.9 22.9 33.9 27.4 30.1 27.3 30.1 29.8 26.2 29.8 26.2 34.7 22.8 34.7 22.8 75.1 25.4 75.1 25.4 79.2 29.5 79.2 29.5 83.1 63 83.1 63 78.5"/><polyline points="77.9 2.9 85.9 2.9 85.9 11.4 90 11.4 90 15 93.9 15 93.9 22.9 98.2 22.9 98.2 31.2"/><polyline points="21.9 2.9 14 2.9 14 7.2 10.1 7.2 10.1 15.4 1.8 15.4"/></g>',ch_spercent:'<text class="cxtb100" x="5" y="85">%</text>',b_grc:'<g class="cxa"><rect fill="url(\'#rad-grad\')" x="0" y="0" width="100" height="100" /></g>',bx_typerange:'<g class="cxb"><path d="M46,7 Q 46,2 51,2 56,2 56,7 L56,40 Q 63,41 64,50 63,59 56,60 L56,93 Q 56,98 51,98 46,98 46,93 L46,60 Q 39,59 38,50 39,41 46,40 Z" /></g>',g_area:'<polygon class="cxbc" points="11.9 86.7 53 44.1 63.3 53.7 100 12.1 100 86.3 11.9 86.7" /><g class="cxb"><polyline points="14.5 84.1 53 44.1 63.3 53.7 100 12.1" /><polyline points="11.9 47.3 40.1 18.3 53.1 31.7 78 3.5 93.7 19.6" /></g><g class="cxa"><line x1="11.9" x2="11.9" y2="100" y1="0"/><line x1="100" y1="86" y2="86" x2="0"/><line y1="62.6" x2="11.9" y2="62.6" x1="0"/><line y1="39.1" x2="11.9" y2="39.1" x1="0"/><line y1="15.6" x2="11.9" y2="15.6" x1="0"/></g>',ch_lz:'<text class="cxtb100" x="15" y="85">Z</text>',rt_c2:'<g class="cxb"><path d=" M 5 50 A 45 45 180 0 1 82 18" /><line x1="82" y1="0" x2="82" y2="18" /><line x1="64" y1="18" x2="84" y2="18" /><path d=" M 95 50 A 45 45 180 0 1 18 82" /><line x1="33" y1="82" x2="16" y2="82" /><line x1="18" y1="100" x2="18" y2="82" /></g>',sv_disk:'<g class="cxa"><polyline points="98,25 98,98 2,98 2,2 75,2 98,25" /></g><g class="cxb"><rect x="27" y="58" width="50" height="40" /><rect x="32" y="2" width="40" height="30" /><rect x="55" y="12" width="5" height="10" /></g>',p_gh:'<g class="cxc"><rect x="50" y="0" width="30" height="2"/><rect x="55" y="10" width="20" height="2"/><rect x="30" y="20" width="68" height="45"/><line x1="30" y1="44" x2="98" y2="44" /><line x1="64" y1="20" x2="64" y2="65" /><rect x="0" y="25" width="3" height="30"/><rect x="15" y="25" width="3" height="10"/><rect x="15" y="45" width="3" height="10"/><rect x="40" y="75" width="15" height="2"/><rect x="74" y="75" width="15" height="2"/><rect x="50" y="85" width="30" height="2"/><rect x="75" y="95" width="20" height="2"/></g>',b_gsswitch:'<g class="cxa"><rect x="1" y="1" width="42" height="42"/><rect fill="url(\'#gs-grad\')" x="57" y="57" width="42" height="42"/></g>',ly_splom:'<g class="cxa"><rect x="25" y="2" width="15" height="15" /><rect x="2" y="25" width="15" height="15" /><rect x="57" y="2" width="15" height="15" /><rect x="80" y="2" width="15" height="15" /><rect x="57" y="25" width="15" height="15" /><rect x="2" y="80" width="15" height="15" /><rect x="80" y="57" width="15" height="15" /></g><g class="cxac"><rect x="2" y="2" width="15" height="15" /><rect x="25" y="25" width="15" height="15" /><rect x="2" y="57" width="15" height="15" /><rect x="25" y="80" width="15" height="15" /><rect x="57" y="57" width="15" height="15" /><rect x="80" y="80" width="15" height="15" /></g>',b_body2:'<g class="cxb"><polyline points="78,42 78,30 48,30 48,2 2,2 2,98 78,98 78,85"/><line x1="79" y1="29" x2="48" y2="1" /></g>',g_gantt:'<g class="cxa"><line x1="11.9" x2="11.9" y2="100" y1="0"/><line x1="100" y1="86" y2="86" x2="0"/><line y1="62.6" x2="11.9" y2="62.6" x1="0"/><line y1="39.1" x2="11.9" y2="39.1" x1="0"/><line y1="15.6" x2="11.9" y2="15.6" x1="0"/></g><g class="cxb"><rect x="24" y="10.6" width="29.6" height="10.5"/><rect x="66" y="64.1" width="29.6" height="10.5"/><rect x="43.2" y="28.5" width="20.9" height="10.5"/><rect x="56.4" y="46.3" width="16.3" height="10.5"/></g>',ar_dctrs2:'<text class="cxtn60 cxaa" x="51" y="-22" transform="rotate(45)">&#10554;</text><text class="cxtn60 cxaa" x="-90" y="-22" transform="rotate(45) scale(-1,1)">&#10554;</text>',sv_image:'<g class="cxa"><path d="M60,7 L70,17 L90,17 Q 98,17 98,26 L98,74 Q 98,84 90,84 L10,84 Q 2,84 2,74 L2,24 Q 2,17 10,17 L30,17 L40,7 Z" /></g><g class="cxb"><circle cx="50" cy="50" r="15" /><circle cx="50" cy="50" r="25" /><line x1="10" y1="8" x2="25" y2="8" /><line x1="10" y1="27" x2="25" y2="27" /></g>',ch_lb:'<text class="cxtb100" x="15" y="85">B</text>',ch_ssum:'<text class="cxtb100" x="15" y="80">&#8721;</text>',ps_topright:'<path class="cxtxb" d="M58,34 L66,34 L66,42 M34,66 L66,34" /><g class="cxa"><rect x="78" y="2" width="20" height="20" rx="2" /></g>',p_g3title:'<g class="cxblue"><rect x="45" y="0" width="30" height="2"/></g>',mr_top:'<g class="cxa"><line x1="2" y1="25" x2="98" y2="25" /></g>',ch_oparens:'<text class="cxtn100" x="0" y="75">{ }</text>',b_gstype:'<g class="cxa"><rect fill="url(\'#gt-grad\')" x="1" y="1" width="42" height="42"/><rect fill="url(\'#gt-gradr\')" x="57" y="57" width="42" height="42"/></g>',p_g2title:'<g class="cxblue"><rect x="45" y="0" width="30" height="2"/></g>',ly_layout:'<g class="cxa"><rect x="2" y="2" width="26" height="26" /><rect x="36" y="2" width="26" height="26" /><rect x="69" y="2" width="26" height="26" /><rect x="2" y="36" width="26" height="26" /><rect x="36" y="36" width="26" height="26" /><rect x="69" y="36" width="26" height="26" /><rect x="2" y="69" width="26" height="26" /><rect x="36" y="69" width="26" height="26" /><rect x="69" y="69" width="26" height="26" /></g><g class="cxb"><rect x="9" y="8" width="2" height="16" /><rect x="19" y="10" width="2" height="14" /><rect x="43" y="14" width="2" height="10" /><rect x="53" y="18" width="2" height="6" /><rect x="76" y="16" width="2" height="8" /><rect x="86" y="9" width="2" height="15" /><rect x="9" y="42" width="2" height="16" /><rect x="19" y="50" width="2" height="8" /><rect x="43" y="52" width="2" height="6" /><rect x="53" y="48" width="2" height="10" /><rect x="76" y="43" width="2" height="15" /><rect x="86" y="49" width="2" height="9" /><rect x="9" y="83" width="2" height="8" /><rect x="19" y="76" width="2" height="15" /><rect x="43" y="79" width="2" height="12" /><rect x="53" y="84" width="2" height="7" /><rect x="76" y="81" width="2" height="10" /><rect x="86" y="85" width="2" height="6" /></g>',g_density2:'<g class="cxb"><path d="M 11.9 86 C 11.9 86 23.5 79.2 29.4 56.8 C 35.3 34.4 38.9 2.4 47.3 3.9 C 55.8 5.3 83.9 86 83.9 86 M 50 86 C 69 58.7 67.8 37.7 76.8 39.5 C 81.7 41.3 92.7 86 92.7 86"/></g><g class="cxa"><line x1="11.9" x2="11.9" y2="100" y1="0"/><line x1="100" y1="86" y2="86" x2="0"/><line y1="62.6" x2="11.9" y2="62.6" x1="0"/><line y1="39.1" x2="11.9" y2="39.1" x1="0"/><line y1="15.6" x2="11.9" y2="15.6" x1="0"/></g>',p_cg2dataden:'<g class="cxb"><rect x="20" y="80" width="2" height="2" /><rect x="37" y="65" width="2" height="2" /><rect x="32" y="50" width="2" height="2" /><rect x="45" y="35" width="2" height="2" /><rect x="39" y="20" width="2" height="2" /><rect x="52" y="7" width="2" height="2" /><rect x="87" y="78" width="2" height="2" /><rect x="73" y="63" width="2" height="2" /><rect x="80" y="48" width="2" height="2" /><rect x="73" y="33" width="2" height="2" /><rect x="68" y="18" width="2" height="2" /><rect x="63" y="3" width="2" height="2" /></g>',p_cg2fitcorconf:'<g class="cxcc"><path d="M10,90 L10,60 Q 50,50 70,0 L100,0 L100,30 Q 50,50 40,90 Z" /></g>',ar_trm:'<path class="cxtxb" d="M71,17 L83,17 L83,29 M17,83 L83,17" />',p_dgmarker:'<g class="cxaa"><rect x="42" y="24" width="24" height="5"/><line x1="56" y1="25" x2="56" y2="65" /><line x1="57" y1="25" x2="57" y2="65" /></g>',gr_g1:'<g class="cxc"><line x1="2" y1="2" x2="2" y2="100" /><line x1="2" y1="98" x2="98" y2="98" /></g><g class="cxa"><line x1="4" y1="18" x2="98" y2="18" /><line x1="4" y1="38" x2="98" y2="38" /><line x1="4" y1="58" x2="98" y2="58" /><line x1="4" y1="78" x2="98" y2="78" /></g><g class="cxcc"><rect x="20" y="48" width="20" height="47" /><rect x="60" y="10" width="20" height="85" /></g>',wp_threebars:'<g class="cxaa"><rect x="2" y="15" width="96" height="8" /><rect x="2" y="48" width="96" height="8" /><rect x="2" y="81" width="96" height="8" /></g>',c_nodejs:'<g class="cxb"><line x1="10.3" y1="24.2" x2="50.6" y2="98" /><line x1="24" y1="49.2" x2="9.3" y2="75.1" /><line x1="89.9" y1="75.7" x2="49.3" y2="1.9" /><line x1="76.1" y1="49.9" x2="90.9" y2="24.2" /></g><path class="cxa" d="M 7.7 28.6 L 7.7 71.4 C 7.8 73.3 8.8 75 10.4 75.9 L 47.6 97.4 C 49.1 98.3 51.1 98.3 52.7 97.4 L 89.9 75.9 C 91.5 75 92.4 73.3 92.4 71.4 L 92.4 28.6 C 92.4 26.8 91.5 25.1 89.9 24.2 L 52.6 2.6 C 51 1.7 49 1.7 47.4 2.6 L 10.3 24.2 C 8.7 25.1 7.8 26.8 7.7 28.6 Z" />',sl_checkboxon:'<rect class="cxaa" x="15" y="15" width="70" height="70" rx="5" /><text class="cxtn50 cxww" x="32" y="68">&#10003;</text>',h_hspace:'<g class="cxwhite"><line x1="10" y1="24" x2="98" y2="24" /><line x1="10" y1="46" x2="98" y2="46" /><line x1="10" y1="68" x2="98" y2="68" /><line x1="40" y1="2" x2="40" y2="90" /><line x1="70" y1="2" x2="70" y2="90" /></g>',g_bar:'<g class="cxb"> <rect x="23.4" y="55.7" width="15.2" height="30.3" /><rect x="50.3" y="15.6" width="15.2" height="70.4" /><rect x="77.2" y="30.1" width="15.2" height="56" /></g><g class="cxa"><line x1="11.9" x2="11.9" y2="100" y1="0"/><line x1="100" y1="86" y2="86" x2="0"/><line y1="62.6" x2="11.9" y2="62.6" x1="0"/><line y1="39.1" x2="11.9" y2="39.1" x1="0"/><line y1="15.6" x2="11.9" y2="15.6" x1="0"/></g>',op_config:'<g class="cxa"><circle cx="70.8" cy="37.6" r="8.9"/><path d="M97.5,41.8v-8.6L90,31.9c-0.4-1.3-0.9-2.5-1.5-3.7l4.3-6.2l-6.1-6.1l-6.1,4.3c-1.3-0.7-2.6-1.3-4-1.7l-1.3-7.2h-8.6l-1.2,7c-1.5,0.4-3,0.9-4.4,1.7l-5.7-4L49.5,22l3.9,5.6c-0.8,1.4-1.4,3-1.9,4.5l-6.7,1.1v8.6l6.7,1.2c0.4,1.6,1.1,3.1,1.9,4.5l-3.9,5.6l6.1,6.1l5.7-4c1.4,0.7,2.8,1.3,4.4,1.7l1.2,7h8.6l1.3-7.2c1.4-0.4,2.7-1,4-1.7l6.1,4.3l6.1-6.1l-4.3-6.1c0.6-1.2,1.2-2.5,1.5-3.8L97.5,41.8z"/></g><g class="cxb"><circle cx="24.6" cy="66.4" r="7.5"/><path d="M47.4,70v-7.3L41,61.6c-0.3-1.1-0.7-2.2-1.3-3.2l3.7-5.3l-5.2-5.2L33,51.5c-1.1-0.6-2.2-1.1-3.4-1.5l-1.1-6.2h-7.3l-1,6c-1.3,0.3-2.5,0.8-3.7,1.4l-4.8-3.4l-5.2,5.2l3.4,4.8c-0.7,1.2-1.3,2.5-1.6,3.8l-5.7,1V70l5.7,1c0.4,1.3,0.9,2.6,1.6,3.8l-3.4,4.8l5.3,5.2l4.7-3.4c1.2,0.6,2.4,1.1,3.7,1.4l1,5.9h7.3l1.1-6.1c1.2-0.3,2.3-0.8,3.4-1.5l5.2,3.6l5.2-5.2l-3.7-5.3c0.6-1,1-2.1,1.3-3.2L47.4,70z"/></g>',z_zoom:'<g class="cxa"><circle cx="35" cy="35" r="33" /><line x1="60" y1="60" x2="99" y2="99" /></g>',ar_blm:'<path class="cxtxb" d="M17,71 L17,83 L29,83 M17,83 L83,17" />',c_economist:'<path class="cl57" d="M3.5,50.1c0-13,0-25.9,0-38.9C3.8,4.8,9.3-0.3,15.8,0c0.1,0,0.3,0,0.4,0h68.1c6-0.2,11.2,4.2,12,10.1c0.5,26,0,52,0.2,78c0.2,6.3-4.7,11.5-10.9,11.8H14C8.3,99.6,3.8,95,3.5,89.3V50.1z M61.2,59.4l0.2-0.2c-1.3-0.4-1-1.4-1.1-2.3c-0.1-0.9-0.1-1.9,0-2.8c0-1.5,2.2-2.9,2.7-0.9c0.5,1.9,0.9,4.3-0.6,6.2h3.7c-1.6-1.1-0.7-4.1-0.8-5.9c0.1-0.7,0.7-1.3,1.5-1.2s1.3,0.7,1.2,1.5c0,0.9,0,1.8,0,2.6c0,0.9,0.4,2.3-0.9,3h4.1l0.2-0.2c-2-0.3-1.4-1.8-1.5-2.9c0.3-4.2-0.9-7-5.2-3.9c-0.9-2.1-3.2-1.1-4.7-0.4v-0.9l-3,0.4v0.3c1.6,0,1.4,1.3,1.4,2.3v3.3c0,0.9,0,1.8-1.2,1.9c0,0,0,0,0,0.3L61.2,59.4z M8.3,59.1c0.2,0.3,0.3,0.3,0.3,0.3H16c0.7,0,0.8-2.3,0.5-2.8c-0.2,0.2-0.4,0.3-0.5,0.4c-0.5,1.3-1.9,1.9-3.2,1.4c-0.1,0-0.1,0-0.2-0.1c-0.9-0.9-0.2-3.2-0.4-4.6c1.1,0,2.7-0.5,2.9,1.1c0,0,0.2,0.2,0.3,0.3c0.4-1.2,0.4-2.5,0-3.6c-0.8,1.5-1.6,1.6-3.4,1.4v-4.3c1.2,0,2.8-0.5,3,1.3c1,0.9,0.6-1.6,0.7-2.1H8.3c0.2,0.2,0.3,0.4,0.3,0.4c1.2,0,1.3,0.8,1.3,1.8c0,2.4,0,4.7,0,7.1C10,58.6,9.7,58.9,8.3,59.1z M45.9,59.4l0.2-0.2c-1.8-0.2-1.4-1.5-1.4-2.5c0.3-3.9-0.7-7.4-5-4.4v-1.1l-3,0.4c0,0.2,0.2,0.3,0.2,0.3c1,0,1.1,0.8,1.1,1.6c0,1.3,0,2.6,0,3.9c0,0.8,0,1.6-1.1,1.7c0,0.1,0,0.2,0,0.3h4.3c-1.7-0.9-0.9-3.4-1-5.9c0.2-0.8,0.9-1.3,1.7-1.1c0.7,0.1,1.1,0.7,1.1,1.4c0.1,0.8,0.1,1.6,0,2.4c0,1.1,0.5,2.4-0.9,3.1H45.9z M55.4,45.1c-1.5-0.5-1-1.7-1.1-2.6c0.3-3.4-0.6-6.3-4.5-3.9v-4.1L47,34.7L46.8,35c1.6,0,1.3,1.2,1.3,2.1c0,2,0,4,0,6c0,0.8,0,1.6-1,1.8v0.2h3.7c-0.4-0.4-0.9-0.6-0.9-0.9c-0.1-1.5-0.1-3,0-4.5c0-1.3,2.1-1.2,2.4,0c0,1.8,0.8,3.8-0.6,5.5L55.4,45.1z M51.3,59.7c5.4,0.2,5.3-8.6,0-8.5C46,51.2,45.9,59.9,51.3,59.7z M30.5,59.7c5.4,0.2,5.3-8.7,0-8.5S25.3,59.9,30.5,59.7z M43.3,35.4c1.1,0.2,2.5-0.4,2.8,1.3c0.1,0.1,0.2,0.2,0.3,0.2c0.5-0.3,0-1,0.2-1.5c0.2-0.5-0.2-0.9-0.9-0.9H38c0,0.9-0.3,1.7,0.2,2.4c0.3-0.4,0.6-1.2,1-1.3c0.7-0.1,1.4-0.2,2.1-0.2c0,2.6,0,5.1,0,7.5c0,0.9,0,1.7-1.2,1.8c0,0,0,0,0,0.3h4.6c-0.4-0.8-1.2,0-1.2-1.4L43.3,35.4z M58.1,41.1h4c0.3-0.1,0.5-0.2,0.6-0.5c0-1.3-0.8-2.5-2.1-2.8c-2-0.4-3.9,0.9-4.3,2.9c-0.1,0.7-0.1,1.3,0.1,2c0.4,1.8,2.3,2.9,4.1,2.5c0.9-0.2,1.7-0.8,2.1-1.6c-2.9,1.6-4.1,0.9-4.4-2.4H58.1z M84.1,52.4c-0.4-1.2-1.5-1.2-2.6-1.2c-1.3,0-2.5,1-2.5,2.4c0,0.9,0.5,1.8,1.3,2.2c0.7,0.8,2.4,1.2,2.1,2.6c-0.2,1.3-2.1,0.9-2.3-0.3c0-0.5-0.4-0.7-0.9-0.5c-0.5,0.2,0,1.7,0.3,1.8c0.8,0.2,1.7,0.3,2.6,0.3c1.3-0.2,2.2-1.4,2-2.8c-0.1-0.6-0.4-1.2-1-1.6c-0.7-0.4-1.3-0.9-1.9-1.4c-0.7-0.8-0.8-1.7,0.5-2c1.3-0.3,1.1,1,1.9,1.4L84.1,52.4z M88.7,52.6c1.9-0.2,1.9-0.2,1.8-1.1h-1.9v-2.1c-0.8,0-0.8,0-0.9,0.5c-0.5,1.7-1.2,1.2-2,2.1c0.3,0.3,0.5,0.5,1,0.5c0,1.7,0,3.4,0,5c0,1.6,3.4,3.1,4.1,1.1c-1.9,0-2.2,0-2.2-1.3c-0.1-1.3,0.2-3.2,0.2-4.8L88.7,52.6z M24.6,53.5c0-0.7,0.3-1.6-0.4-2c-2.5-0.7-5,0-5.5,2.8c-0.2,1-0.1,2.1,0.2,3.1c0.5,1.7,2.2,2.7,3.8,2.2c0.9-0.2,1.6-0.9,2-1.7h-0.2c-1.2,1.1-3.1,1.3-3.6-0.5c-0.5-1.8-0.9-5.2,1.5-5.5c0.8,0,1.1,0.5,1.2,1.2s0.5,0.6,1.1,0.3L24.6,53.5z M72.9,59.4h4.5c0-0.2,0-0.3-0.2-0.4c-0.9,0-1-0.7-1-1.4c0-2.2,0-4.3,0-6.5l-3.4,0.4c2.2,1.1,1.2,3,1.4,5.4c0,1,0,2-1.2,2.3L72.9,59.4z M76.2,48.5c0-1.5-2.4-1.5-2.3,0c0.2,0.6,0.9,0.9,1.5,0.7c0.3-0.1,0.6-0.4,0.7-0.7L76.2,48.5z"/><path class="cl58" d="M61.3,59.4h-4.1c0-0.2,0-0.3,0-0.3c1.2,0,1.2-1,1.2-1.9V54c0-1,0.2-2.1-1.4-2.3v-0.3l3-0.4V52c1.5-0.7,3.8-1.7,4.7,0.4c4.2-3.1,5.5-0.3,5.2,3.9c0,1.1-0.6,2.6,1.5,2.9L71,59.3h-3.8c1.3-0.7,0.8-2,0.9-3c0.1-1,0-1.8,0-2.6c0.1-0.7-0.5-1.4-1.2-1.5c-0.7-0.1-1.4,0.5-1.5,1.2c0,1.9-0.8,4.8,0.8,5.9h-3.8c1.5-2,0.8-4.1,0.6-6.2c-0.2-2.1-2.6-0.5-2.7,0.9c-0.1,0.9-0.1,1.9,0,2.8c0,0.9-0.2,1.9,1.1,2.3L61.3,59.4z"/><path class="cl58" d="M8.3,59.1c1.3-0.3,1.7-0.5,1.7-1.9c0-2.2,0-4.6,0-7.1c0-1,0-1.8-1.3-1.8c0,0,0,0-0.3-0.4H16c0,0.6,0.3,3-0.7,2.1c-0.2-1.8-1.9-1.2-3-1.3v4.3c1.6,0,2.4,0,3.4-1.4c0.4,1.2,0.4,2.5,0,3.6c0,0-0.3-0.2-0.3-0.3c-0.2-1.6-1.8-0.9-2.9-1.1c0.2,1.4-0.5,3.6,0.4,4.6c1.3,0.6,2.7,0,3.3-1.2c0-0.1,0-0.1,0.1-0.2c0-0.2,0.3-0.3,0.5-0.4c0.4,0.5,0.2,2.7-0.5,2.8H8.6C8.6,59.5,8.6,59.4,8.3,59.1z"/><path class="cl58" d="M45.9,59.4h-4c1.4-0.8,0.8-2.1,0.9-3.1c0.1-0.8,0.1-1.6,0-2.4c0-0.8-0.7-1.4-1.5-1.4c-0.7,0-1.3,0.5-1.4,1.1c0,2.4-0.7,5,1,5.9h-4.3c0-0.1,0-0.2,0-0.3c1.1,0,1.1-0.9,1.1-1.7c0-1.3,0-2.6,0-3.9c0-0.8,0-1.5-1.1-1.6c0,0,0,0-0.2-0.3l3-0.4v1.1c4.4-3,5.4,0.4,5,4.4c0,1-0.4,2.3,1.4,2.5L45.9,59.4z"/><path class="cl58" d="M55.4,45.1h-3.6c1.5-1.7,0.7-3.6,0.6-5.5c-0.3-1.2-2.3-1.3-2.4,0c-0.1,1.5-0.1,3,0,4.5c0,0.3,0.5,0.5,0.9,0.9h-3.8v-0.2c1-0.2,1-0.9,1-1.8c0-2,0-4,0-6c0-0.9,0.3-2-1.3-2.1l0.2-0.2l2.9-0.4v4.2c3.9-2.4,4.8,0.5,4.5,3.9C54.4,43.4,54.1,44.6,55.4,45.1z"/><path class="cl58" d="M51.3,59.7c-5.4,0.3-5.2-8.9,0-8.5S56.7,59.8,51.3,59.7z M53,57.6c0.9-1.9-0.6-8.1-3.4-5c-0.7,1.9-0.5,4,0.4,5.7c0.3,0.8,1.1,1.2,1.9,1C52.7,59.1,53.1,58.4,53,57.6z"/><path class="cl58" d="M30.5,59.7c-5.4,0.2-5.3-8.8,0-8.5S36,59.8,30.5,59.7z M28.8,54c-0.4,1.9,0.8,7.3,3.4,4.4c0.8-1.9,0.6-4-0.5-5.7C30.5,51.2,28.9,52.3,28.8,54z"/><path class="cl58" d="M43.4,35.4v8.2c0,1.2,0.9,0.6,1.2,1.4h-4.6v-0.3c1.2,0,1.2-0.9,1.2-1.8c0-2.4,0-4.9,0-7.5c-0.7,0-1.4,0.1-2.1,0.2c-0.4,0-0.7,0.9-1,1.3c-0.6-0.7-0.2-1.5-0.2-2.4h7.9c0.7,0,0.9,0.2,0.9,0.9c-0.1,0.6,0.2,1.2-0.2,1.5c-0.1,0-0.3-0.1-0.3-0.2C45.9,35,44.6,35.6,43.4,35.4z"/><path class="cl58" d="M58.2,41.1c0.2,3.4,1.5,4,4.5,2.4c-0.9,1.6-3,2.2-4.6,1.3c-0.8-0.5-1.4-1.2-1.6-2.1c-0.7-1.9,0.3-4,2.2-4.7c0.6-0.2,1.3-0.3,2-0.1c1.3,0.3,2.2,1.5,2.1,2.8c-0.1,0.3-0.3,0.4-0.6,0.5H58.2z M61.1,40.2c0-2.8-2.9-2.6-2.8,0.2L61.1,40.2z"/><path class="cl58" d="M84.2,52.4l-0.6,0.8c-0.8-0.3-0.9-1.6-1.9-1.4s-1.1,1.2-0.5,2c0.6,0.5,1.2,1,1.9,1.4c1.1,0.8,1.3,2.3,0.5,3.4c-0.4,0.5-1,0.9-1.6,1c-0.9,0-1.7-0.1-2.6-0.3c-0.4,0-0.6-1.6-0.3-1.8s0.8,0,0.9,0.5c0.2,1.2,1.9,1.1,2.3,0.3c0.2-1.7-2.9-2.3-3.4-4.2C78.5,51.1,83.3,50.1,84.2,52.4z"/><path class="cl58" d="M88.8,52.6c0,1.7,0,3.4,0,4.8s0.4,1.4,2.2,1.3c0,0.2,0,0.4-0.2,0.5c-4.8,2.4-4-3.8-4-6.7c-0.5,0-0.7-0.2-1-0.5c0.7-0.9,1.5-0.4,2-2.1c0.2-0.6,0.2-0.6,0.9-0.5v2.1h1.9C90.7,52.3,90.7,52.3,88.8,52.6z"/><path class="cl58" d="M24.8,53.5c-0.6,0.3-0.8,0-0.9-0.4c-0.1-0.4-0.4-1.2-1.2-1.2c-2.4,0.2-2,3.8-1.5,5.5s2.4,1.7,3.6,0.5H25c-0.7,1.6-2.6,2.3-4.1,1.6c-0.8-0.4-1.5-1.1-1.7-2c-0.3-1-0.4-2.1-0.2-3.1c0.5-2.9,3-3.5,5.5-2.8C25.1,51.8,24.7,52.8,24.8,53.5z"/><path class="cl58" d="M72.9,59.4v-0.2c1.3-0.2,1.2-1.3,1.2-2.3c-0.2-2.4,0.8-4.2-1.4-5.4l3.4-0.4c0,2.2,0,4.3,0,6.5c0,0.7,0,1.3,1,1.4c0.2,0,0.2,0,0.2,0.4H72.9z"/><path class="cl58" d="M76.1,48.5c-0.1,0.6-0.7,1-1.3,0.9c-0.5-0.1-0.9-0.5-0.9-0.9C73.8,47,76.2,47,76.1,48.5z"/><path class="cl57" d="M52.7,53.4c0.6,1.5,0.6,3.2,0,4.7c-2.5,3.4-4.3-3.1-3-5.5C50.8,51.1,52.4,51.9,52.7,53.4z"/><path class="cl57" d="M28.9,56.4c-0.3-1.5-0.4-3.8,1.2-4.5c2.7,0,3,4.5,2,6.3C30.5,60.2,29,58.2,28.9,56.4z"/><path class="cl57" d="M61.1,40.2l-2.8,0.2C58.1,37.6,60.9,37.4,61.1,40.2z"/>',wp_audittrail:'<g class="cxa"><circle cx="59.6" cy="57.7" r="27.9"/><line x1="79.3" y1="77.5" x2="98.1" y2="96.2"/></g><g class="cxa"><polyline points="33.2 66.4 1.9 66.4 1.9 3.9 68.3 3.9 68.3 31.3"/></g><g class="cxb"><line x1="12.1" y1="15.5" x2="12.1" y2="23.9"/><line x1="23.6" y1="15.5" x2="23.6" y2="23.9"/><line x1="35.1" y1="15.5" x2="35.1" y2="23.9"/><line x1="46.7" y1="15.5" x2="46.7" y2="23.9"/><line x1="58.1" y1="15.5" x2="58.1" y2="23.9"/><line x1="12.1" y1="30.9" x2="12.1" y2="39.4"/><line x1="23.6" y1="30.9" x2="23.6" y2="39.4"/><line x1="12.1" y1="46.4" x2="12.1" y2="54.9"/><line x1="23.6" y1="46.4" x2="23.6" y2="54.9"/></g>',p_cg1datahorizontal:'<g class="cxcc"><rect x="14" y="10" width="30" height="16"/><rect x="14" y="38" width="80" height="16"/><rect x="14" y="66" width="60" height="16"/></g>',xar_dcbls:'<path class="cxtxb" d="M 50 90 A 40 40 0 0 1 10 50 M42,82 L50,90 L42,97 M3,58 L10,50 L18,58" />',p_cg2axes:'<g class="cxb"><line x1="10" y1="2" x2="10" y2="98" /><line x1="2" y1="10" x2="10" y2="10" /><line x1="2" y1="30" x2="10" y2="30" /><line x1="2" y1="50" x2="10" y2="50" /><line x1="2" y1="70" x2="10" y2="70" /><line x1="2" y1="90" x2="98" y2="90" /><line x1="10" y1="90" x2="10" y2="98" /><line x1="30" y1="90" x2="30" y2="98" /><line x1="50" y1="90" x2="50" y2="98" /><line x1="70" y1="90" x2="70" y2="98" /><line x1="90" y1="90" x2="90" y2="98" /></g>',sl_check:'<text class="cxtn120" x="10" y="90">&#10003;</text>',dt_exact:'<g class="cxaa"><rect x="8" y="86" width="10" height="7" /><rect x="88" y="6" width="10" height="87" /></g><g class="cxb"><line x1="2" y1="98" x2="100" y2="98" /><line x1="2" y1="2" x2="2" y2="98" /></g><g class="cxcc"><rect x="28" y="66" width="10" height="27" /><rect x="48" y="46" width="10" height="47" /><rect x="68" y="26" width="10" height="67" /></g>',c_opensource:'<path class="cxa" d="M 50.1 4.4 C 13.7 4.1 -9.3 43.4 8.7 75 C 14.1 84.4 22.4 91.7 32.6 95.6 L 44.4 67.1 C 32.6 62.7 29.9 47.1 39.6 39 C 49.3 31 64.1 36.5 66.2 48.9 C 67.6 56.6 63.2 64.3 55.7 67.1 L 64.2 87.2 L 65.5 90.5 L 67.7 95.6 C 101.4 82.1 108.2 37.2 79.6 14.5 C 71.2 7.9 60.8 4.3 50.1 4.4 Z" />',bx_violin:'<g class="cxac"><path  d="M64,1 Q 66,11 68,25 72,38 86,47 96,56 89,70 82,82 80,99 L 20,99 Q 18,82 11,70 4,56 14,47 28,38 32,25 34,11 36,1 Z" /></g>',ar_brm:'<path class="cxtxb" d="M83,71 L83,83 L71,83 M17,17 L83,83" />',ln_stylesolid:'<g class="cxa"><line x1="4" y1="50" x2="98" y2="50" /></g>',ch_splus:'<text class="cxtb100" x="20" y="75">+</text>',p_cg2datahiststag:'<g class="cxbb"><rect x="17" y="70" width="7" height="18" /><rect x="31" y="56" width="7" height="32" /><rect x="45" y="38" width="7" height="50" /><rect x="59" y="34" width="7" height="54" /><rect x="73" y="62" width="7" height="26" /><rect x="87" y="74" width="7" height="14" /></g>',p_cg2datahist:'<g class="cxcc"><rect x="17" y="54" width="7" height="34" /><rect x="31" y="34" width="7" height="54" /><rect x="45" y="14" width="7" height="74" /><rect x="59" y="20" width="7" height="68" /><rect x="73" y="39" width="7" height="49" /><rect x="87" y="56" width="7" height="32" /></g>',p_g1axis2:'<g class="cxblue"><line x1="75" y1="15" x2="75" y2="65" /><line x1="75" y1="25" x2="85" y2="25" /><line x1="75" y1="45" x2="85" y2="45" /><line x1="75" y1="65" x2="85" y2="65" /></g>',ln_stylesolidver:'<g class="cxa"><line x1="55" y1="2" x2="55" y2="93" /></g>',cr_cumulative:'<g class="cxa"><path d="M1,99 C75,75 25,25 99,1" /></g>',ar_tlm:'<path class="cxtxb" d="M17,29 L17,17 L29,17 M17,17 L83,83" />',b_type:'<g class="cxcc"><polyline points="83,65 65,65 65,88 88,88 88,68" /></g><g class="cxa"><polyline points="45,15 30,15 30,2 2,2 2,45 45,45 45,15" /><line x1="30" y1="2" x2="45" y2="15" /><polyline points="98,15 83,15 83,2 55,2 55,45 98,45 98,15" /><polyline points="83,12 65,12 65,35 88,35 88,15" /><line x1="83" y1="2" x2="98" y2="15" /><polyline fill="url(\'#bl-grad\')" points="45,68 30,68 30,55 2,55 2,98 45,98 45,68" /><line x1="30" y1="55" x2="45" y2="68" /><polyline points="83,65 65,65 65,88 88,88 88,68" /><polyline points="98,68 83,68 83,55 55,55 55,98 98,98 98,68" /><line x1="83" y1="55" x2="98" y2="68" /></g>',ch_li:'<text class="cxtb100" x="35" y="85">I</text>',bx_wishkersd:'<g class="cxb"><rect x="35" y="30" width="30" height="40" /><line x1="35" y1="51" x2="65" y2="51" /></g><g class="cxa"><line x1="35" y1="2" x2="65" y2="2" /><line x1="50" y1="2" x2="50" y2="30" /><line x1="35" y1="98" x2="65" y2="98" /><line x1="50" y1="98" x2="50" y2="70" /></g>',tb_stripped:'<g class="cxcc"><rect x="2" y="26" width="96" height="24" /><rect x="2" y="74" width="96" height="24" /></g><g class="cxb"><line x1="2" y1="26" x2="98" y2="26" /><line x1="2" y1="50" x2="98" y2="50" /><line x1="2" y1="74" x2="98" y2="74" /><line x1="34" y1="26" x2="34" y2="98" /><line x1="66" y1="26" x2="66" y2="98" /></g><g class="cxa"><rect x="2" y="2" width="96" height="96" /><rect x="12" y="12" width="3" height="3" /><rect x="24" y="12" width="3" height="3" /><rect x="36" y="12" width="3" height="3" /></g>',g_violin:'<g class="cxcc"><path d="M 73.1 51.6 C 67.5 46.1 54.8 40.4 61.2 34.5 C 68.7 27.4 59.6 21 54.4 14.7 C 51.8 11.4 50.3 7.5 50 3.4 C 50 2 50 2 50 3.4 L 50 3.4 C 49.8 7.5 48.2 11.4 45.6 14.7 C 40.5 21 31.3 27.4 38.9 34.5 C 45.1 40.4 32.5 46.1 26.9 51.6 C 22.5 55.9 24.2 60.7 30.7 61.7 C 56.4 65.6 32.4 67.9 32.5 74.5 C 32.7 80.6 40.2 76.2 42.7 84.5 C 43.4 87.1 44.8 89.5 46.9 91.4 C 48.6 92.8 49.8 95 50 97.3 C 50 97.3 50 97.8 50 97.6 C 50 97.5 50 97.3 50 97.3 C 50.3 95 51.3 92.8 53.2 91.4 C 55.2 89.5 56.7 87.1 57.4 84.5 C 59.9 76.2 67.3 80.6 67.5 74.5 C 67.7 67.9 43.7 65.5 69.3 61.7 C 75.9 60.7 77.5 55.9 73.1 51.6 Z"/></g><g class="cxa"><path d="M 73.1 51.6 C 67.5 46.1 54.8 40.4 61.2 34.5 C 68.7 27.4 59.6 21 54.4 14.7 C 51.8 11.4 50.3 7.5 50 3.4 C 50 2 50 2 50 3.4 L 50 3.4 C 49.8 7.5 48.2 11.4 45.6 14.7 C 40.5 21 31.3 27.4 38.9 34.5 C 45.1 40.4 32.5 46.1 26.9 51.6 C 22.5 55.9 24.2 60.7 30.7 61.7 C 56.4 65.6 32.4 67.9 32.5 74.5 C 32.7 80.6 40.2 76.2 42.7 84.5 C 43.4 87.1 44.8 89.5 46.9 91.4 C 48.6 92.8 49.8 95 50 97.3 C 50 97.3 50 97.8 50 97.6 C 50 97.5 50 97.3 50 97.3 C 50.3 95 51.3 92.8 53.2 91.4 C 55.2 89.5 56.7 87.1 57.4 84.5 C 59.9 76.2 67.3 80.6 67.5 74.5 C 67.7 67.9 43.7 65.5 69.3 61.7 C 75.9 60.7 77.5 55.9 73.1 51.6 Z"/></g>',a_movebackward:'<g class="cxb"><rect x="2" y="2" width="40" height="40" /></g><g class="cxa"><polyline points="42,22 98,22 98,98 22,98 22,42" /></g>',g_map:'<g class="cxa"><ellipse cx="50" cy="50" rx="26.6" ry="47.8"/><path d="M 87.9 20.9 C 79.2 25.3 65.4 28.2 50 28.2 C 34.5 28.2 20.8 25.3 12 20.9"/><path d="M 87.9 79 C 79.2 74.6 65.4 71.7 50 71.7 C 34.5 71.7 20.8 74.6 12 79"/><line x1="97.8" y1="50" x2="2.1" y2="50"/><line x1="50" y1="2.1" x2="50" y2="97.8"/></g><g class="cxb"><circle cx="50" cy="50" r="47.8"/></g>',wp_datawrangling:'<g class="cxa"><ellipse cx="40.4" cy="19.2" rx="38.3" ry="12.3"/><path d="M 40.4 47.7 C 19.3 47.7 2.2 42.2 2.2 35.4 L 2.2 19.2"/><line x1="78.8" y1="19.2" x2="78.8" y2="35.4"/><path d="M 40.4 63.8 C 19.3 63.8 2.2 58.3 2.2 51.5 L 2.2 35.3"/><path d="M 40.4 79.6 C 19.3 79.6 2.2 74.1 2.2 67.4 L 2.2 51.2"/></g><g class="cxb"><path d="M 97.8 73.8 L 97.8 62.2 L 90.6 62.2 C 90.3 61.3 89.9 60.4 89.5 59.6 L 94.6 54.4 L 86.5 46.3 L 81.4 51.4 C 80.6 51 79.7 50.6 78.8 50.3 L 78.8 43 L 67.1 43 L 67.1 50.3 C 66.2 50.6 65.3 51 64.5 51.4 L 59.3 46.3 L 51.1 54.4 L 56.3 59.6 C 55.8 60.4 55.5 61.3 55.2 62.2 L 47.9 62.2 L 47.9 73.8 L 55.2 73.8 C 55.5 74.7 55.8 75.6 56.3 76.4 L 51.1 81.6 L 59.3 89.7 L 64.5 84.6 C 65.3 85.1 66.2 85.4 67.1 85.7 L 67.1 93 L 78.7 93 L 78.7 85.7 C 79.6 85.4 80.5 85.1 81.3 84.6 L 86.5 89.7 L 94.7 81.6 L 89.5 76.4 C 89.9 75.5 90.3 74.7 90.6 73.8 Z"/><circle cx="72.9" cy="68" r="7.4"/></g>',g_radar:'<g class="cxcc"><polygon points="50 24.6 20.4 44.5 31.4 81.2 71.2 83.5 90.7 41.3 50 24.6"/></g><g class="cxb"><polyline points="50 4.5 50 53.1 97.8 39.2"/><polyline points="79.5 95.5 50 53.1 20.4 95.5"/><line x1="2.2" y1="39.2" x2="50" y2="53.1"/></g><g class="cxa"><polygon points="50 4.5 2.2 39.2 20.4 95.5 79.5 95.5 97.8 39.2 50 4.5"/></g>',dps_square:'<g class="cxa"><rect x="2" y="2" width="96" height="96" /></g>',m_left:'<g class="cxaa"><path d="M50,10 Q 25,10 25,25 L25,35 45,35 45,30 Q 45,25 50,25 Z" /></g>',g_nonlinearfit:'<g class="cxb"><path d="M 11.9 73.2 L 23.4 73.2 C 36.2 73.2 47.9 65.8 53.5 54.3 L 58.8 43.4 C 64.4 31.8 76.1 24.5 89 24.5 L 100 24.5"/></g><g class="cxa"><line x1="11.9" x2="11.9" y2="100" y1="0"/><line x1="100" y1="86" y2="86" x2="0"/><line y1="62.5" x2="11.9" y2="62.5" x1="0"/><line y1="39.1" x2="11.9" y2="39.1" x1="0"/><line y1="15.6" x2="11.9" y2="15.6" x1="0"/><line x1="32.5" y1="100" x2="32.5" y2="86"/><line x1="57.7" y1="100" x2="57.7" y2="86"/><line x1="82.8" y1="100" x2="82.8" y2="86"/></g><g class="cxaa"><circle cx="30.5" cy="61.5" r="4.6"/><circle cx="73.2" cy="16.9" r="4.6"/><circle cx="92.4" cy="33.3" r="4.6"/><circle cx="60.6" cy="63.5" r="4.6"/><circle cx="51.4" cy="34.5" r="4.6"/></g>',bx_medianw:'<g class="cxb"><rect x="30" y="20" width="40" height="60" /><line x1="30" y1="2" x2="70" y2="2" /><line x1="50" y1="2" x2="50" y2="20" /><line x1="30" y1="98" x2="70" y2="98" /><line x1="50" y1="98" x2="50" y2="80" /></g><g class="cxaa"><rect x="31" y="45" width="38" height="10" /></g>',p_ghsampletitle:'<g class="cxblue"><rect x="0" y="25" width="3" height="30"/></g>',wp_installation:'<g class="cxa"><path d="M 65.2 51.9 C 82.4 58.5 100.3 43.9 97.4 25.7 C 97.1 23.8 96.5 21.8 95.8 20 L 83.3 32.5 L 73.5 29.8 L 70.8 19.9 L 83.2 7.5 C 66.2 0.3 47.8 14.1 50 32.4 C 50.3 35.1 51.1 37.7 52.3 40.1"/><polyline points="35 57.1 10.1 82 22.6 94.5 41.3 75.7"/></g><g class="cxb"><rect x="62.8" y="52" width="17.8" height="39.3" transform="matrix(0.707107, -0.707107, 0.707107, 0.707107, -30.578448, 74.020113)"/><line x1="43.9" y1="73.2" x2="70" y2="47.1"/><polygon points="28.5 15.7 12.1 5.5 2.3 15.3 12.5 31.7 19.4 30.6 53.1 64.2 61 56.3 27.4 22.6 28.5 15.7"/></g>',b_body:'<g class="cxa"><polyline points="78,42 78,30 48,30 48,2 2,2 2,98 78,98 78,85"/><line x1="79" y1="29" x2="48" y2="1" /></g>',fp_pencil:'<g class="cxb"><path d="M72,10 L90,27 M68,14 L86,31 M2,80 L20,98 M11,89 L77,22" /></g><g class="cxa"><path d="M74,8 Q 80,2 86,4 L96,14 Q 98,20 92,25 L20,98 L2,98 L2,80 L74,8" /></g>',rt_ac:'<g class="cxb"><path d=" M 18 18 A 45 45 225 1 1 5 50" /><line x1="18" y1="0" x2="18" y2="18" /><line x1="36" y1="18" x2="16" y2="18" /></g>',ch_ocodesmall:'<text class="cxtn50" x="30" y="-40" transform="rotate(90)">&#8963;</text><text class="cxtn50" x="-70" y="60" transform="rotate(-90)">&#8963;</text>',bx_connect:'<g class="cxb"><rect x="2" y="2" width="24" height="24" /><rect x="2" y="36" width="24" height="24" /><rect x="2" y="70" width="24" height="24" /><rect x="74" y="2" width="24" height="24" /><rect x="74" y="36" width="24" height="24" /><rect x="74" y="70" width="24" height="24" /></g><g class="cxa"><line x1="14" y1="14" x2="86" y2="14" /><line x1="14" y1="48" x2="86" y2="48" /><line x1="14" y1="82" x2="86" y2="82" /></g>',wp_events:'<polygon class="cxa" points="79.6 23.2 2.6 2.6 23.2 79.6 39.3 56.9 79.6 97.4 97.4 79.6 56.9 39.3 79.6 23.2" style=""></polygon>',ch_olog:'<text class="cxts100" x="1" y="70">log</text>',wp_data:'<g class="cxa"><path d="M 97.4 60.7 L 97.4 82.3 C 97.4 90.7 76.1 97.5 50 97.5 C 23.8 97.5 2.6 90.7 2.6 82.3 L 2.6 60.7"/><path d="M 97.4 17.7 L 97.4 39.4 C 97.4 47.8 76.1 54.5 50 54.5 C 23.8 54.5 2.6 47.8 2.6 39.4 L 2.6 17.7"/><line x1="52.6" y1="43.3" x2="47.3" y2="43.3"/><line x1="64.9" y1="43.3" x2="59.5" y2="43.3"/><line x1="40" y1="43.3" x2="34.6" y2="43.3"/><line x1="64.9" y1="66.1" x2="59.5" y2="66.1"/><line x1="40" y1="66.1" x2="34.6" y2="66.1"/><line x1="64.9" y1="87.2" x2="59.5" y2="87.2"/><line x1="40" y1="87.2" x2="34.6" y2="87.2"/><line x1="52.6" y1="66.1" x2="47.3" y2="66.1"/><line x1="52.6" y1="87.2" x2="47.3" y2="87.2"/></g><g class="cxb"><path d="M 97.4 39.9 L 97.4 61.6 C 97.4 70 76.1 76.7 50 76.7 C 23.8 76.7 2.6 70 2.6 61.6 L 2.6 39.9"/><ellipse cx="50" cy="17.7" rx="47.4" ry="15.2"/></g>',a_moveforward:'<g class="cxb"><polyline points="22,42 2,42 2,2 42,2 42,22" /></g><g class="cxa"><rect x="22" y="22" width="76" height="76" /></g>',p_cg2fitqq:'<g class="cxb"><line x1="10" y1="70" x2="98" y2="32" /></g><g class="cxa"><path d="M15,90 C30,25 80,75 95,10"/></g>',wp_broadcast:'<g class="cxb"><path d="M 67.8 9.8 C 75.6 17.6 75.6 30.3 67.8 38.1"/><path d="M 81 0.3 C 94 13.4 94 34.6 81 47.6"/><path d="M 32.2 9.8 C 24.4 17.6 24.4 30.3 32.2 38.1"/><path d="M 19 0.3 C 6 13.4 6 34.6 19 47.6"/></g><g class="cxa"><polyline points="75.2 99.8 50.1 26.8 25 99.8"/><line x1="69" y1="82.8" x2="31.2" y2="82.8"/></g><g class="cxb"><circle cx="50" cy="24" r="8.6"/></g>',wp_interactiveplots:'<g class="cxa"><path d="M 68.8 24.9 C 66 26.7 65.1 30.4 66.8 33.3 C 64.4 29.3 58.5 29.5 56.4 33.6 C 55.3 35.5 55.4 37.8 56.6 39.7 C 54.1 35.7 48.3 35.9 46.1 40 C 45.1 42 45.1 44.3 46.3 46.1 L 36.2 29.8 C 33.8 25.8 27.9 26 25.7 30.1 C 24.7 32.1 24.8 34.4 25.9 36.2 L 37.2 54.4 L 38.8 57 C 38.2 57.2 37.6 57.4 37.1 57.7 C 34.4 59.5 33.6 63.1 35.3 65.9 L 39.3 72.3 C 39.3 72.3 47.4 85.2 47.8 85.6 C 61.4 102.4 88.2 98.2 95.9 77.9 C 99 69.9 98.2 60.9 93.8 53.5 L 88.9 45.5 L 87.2 42.8 L 77 26.9 C 75.3 24.1 71.6 23.2 68.8 24.9 Z"/><line x1="38.8" y1="57" x2="49.6" y2="74.3"/><line x1="46.3" y1="46" x2="54.4" y2="59.1"/><line x1="56.6" y1="39.6" x2="64.7" y2="52.7"/><line x1="66.8" y1="33.3" x2="75" y2="46.4"/></g><g class="cxb"><path d="M 25.2 50 C 21.5 48.6 18.4 46.1 16.3 42.7 C 8.7 31.2 16.4 15.8 30.2 14.9 C 37 14.5 43.4 18 46.8 23.8"/><path d="M 24.1 61.5 C 2.3 55.8 -5.2 28.8 10.6 12.8 C 23.9 -0.7 46.2 1.8 56.2 17.9"/></g>',c_jsfiddle:'<path class="cxa" d="M 86.2 45.6 C 86.2 45.5 86.2 45.3 86.2 45.2 C 86.2 24.9 64.2 12.1 46.6 22.3 C 43 24.4 39.9 27.3 37.6 30.9 C 27.5 28.5 17.4 34.9 15.2 45.1 C 1.6 49.3 -2.3 66.7 8.2 76.4 C 11.6 79.6 16.1 81.3 20.8 81.3 L 79.3 81.3 C 93.5 81.3 102.4 65.8 95.3 53.5 C 93.2 49.9 90 47.2 86.2 45.6 Z" /><g class="cxb"><path d="M 47.6 61.4 C 45 64 41.5 66.7 38.6 66.7 C 30.7 67.1 25.4 58.9 29 51.9 C 30.8 48.3 34.6 46.2 38.6 46.4 C 44.2 46.4 51.9 56.6 51.9 56.6" /><path d="M 51.9 56.6 C 51.9 56.6 59.7 66.7 65.3 66.7 C 73.2 66.3 77.6 57.6 73.4 51 C 71.6 48.3 68.6 46.5 65.3 46.4 C 63.2 46.6 61.2 47.5 59.6 49 C 58.4 49.9 57.2 50.9 56.2 51.9" /></g>',ps_bottomleft:'<path class="cxtxb" d="M34,58 L34,66 L42,66 M34,66 L66,34" /><g class="cxa"><rect x="2" y="78" width="20" height="20" rx="2" /></g>',c_php:'<ellipse class="cxa" cx="50" cy="50" rx="47.9" ry="25" /><g class="cxb"><line x1="47.3" y1="31.8" x2="42.5" y2="56.1" /><path d="M 56.3 56.1 L 58.2 46.5 C 58.8 44.1 56.8 41.7 54.2 41.7 L 44.8 41.7" /><path d="M 19 63.4 L 23.5 40.9 L 30.4 40.9 C 34.8 40.9 37.9 44.9 36.8 49.1 L 36.8 49.1 C 36.2 52 33.5 54.1 30.4 54.1 L 20.8 54.1" /><path d="M 62.9 63.4 L 67.6 40.9 L 74.5 40.9 C 78.7 40.9 81.9 44.9 80.8 49.1 L 80.8 49.1 C 80.1 52 77.4 54.1 74.4 54.1 L 64.8 54.1" /></g>',g_kaplanmeier:'<g class="cxb"><polyline points="11.9 28.5 25.6 28.5 25.6 44.8 39.6 44.8 39.6 56.7 50 56.7 50 68.8 76.7 68.8 76.7 75.4 100 75.4"/><polyline points="11.9 7 37.5 7 37.5 15.6 50 15.6 50 39.1 70.8 39.1 70.8 56 90.7 56 90.7 62.6 100 62.6"/></g><g class="cxa"><line x1="11.9" x2="11.9" y2="100" y1="0"/><line x1="100" y1="86" y2="86" x2="0"/><line y1="62.6" x2="11.9" y2="62.6" x1="0"/><line y1="39.1" x2="11.9" y2="39.1" x1="0"/><line y1="15.6" x2="11.9" y2="15.6" x1="0"/><line x1="35.2" y1="100" x2="35.2" y2="86"/><line x1="58.5" y1="100" x2="58.5" y2="85.5"/><line x1="81.9" y1="100" x2="81.9" y2="85.5"/></g>',ar_vs:'<path class="cxtxb" d="M42,58 L50,66 L58,58 M42,42 L50,34 L58,42 M50,66 L50,34" />',a_movefront:'<g class="cxb"><polyline points="20,32 2,32 2,2 32,2 32,20" /><polyline points="85,68 98,68 98,98 68,98 68,85" /></g><g class="cxa"><rect x="20" y="20" width="65" height="65" /></g>',g_splom:'<g class="cxcc"><rect x="2.3" y="2.9" width="18.4" height="18.4"/><rect x="79.3" y="78.7" width="18.4" height="18.4"/><rect x="53.7" y="53.4" width="18.4" height="18.4"/><rect x="28" y="28.2" width="18.4" height="18.4"/></g><g class="cxa"><rect x="2.3" y="2.9" width="18.4" height="18.4"/><rect x="2.3" y="28.2" width="18.4" height="18.4"/><rect x="2.3" y="53.4" width="18.4" height="18.4"/><rect x="2.3" y="78.7" width="18.4" height="18.4"/><rect x="79.3" y="2.9" width="18.4" height="18.4"/><rect x="79.3" y="28.2" width="18.4" height="18.4"/><rect x="79.3" y="53.4" width="18.4" height="18.4"/><rect x="79.3" y="78.7" width="18.4" height="18.4"/><rect x="53.7" y="2.9" width="18.4" height="18.4"/><rect x="53.7" y="28.2" width="18.4" height="18.4"/><rect x="53.7" y="53.4" width="18.4" height="18.4"/><rect x="53.7" y="78.7" width="18.4" height="18.4"/><rect x="28" y="2.9" width="18.4" height="18.4"/><rect x="28" y="28.2" width="18.4" height="18.4"/><rect x="28" y="53.4" width="18.4" height="18.4"/><rect x="28" y="78.7" width="18.4" height="18.4"/></g><g class="cxb"><rect x="2.3" y="2.9" width="18.4" height="18.4"/><rect x="79.3" y="78.7" width="18.4" height="18.4"/><rect x="53.7" y="53.4" width="18.4" height="18.4"/><rect x="28" y="28.2" width="18.4" height="18.4"/></g>',ch_ocodemed:'<text class="cxtn80" x="20" y="-30" transform="rotate(90)">&#8963;</text><text class="cxtn80" x="-82" y="70" transform="rotate(-90)">&#8963;</text>',c_wallstreetjournal:'<rect width="100" height="100" fill="url(\'#WS-gradient\')"/><path d="M 30.1 39.9 C 30.1 40.3 30 40.6 29.9 41 C 28 48.9 26.1 56.9 24.1 64.8 L 23.2 68.6 C 23.2 68.8 23.2 69 22.8 69 C 22.3 69 22.4 68.8 22.3 68.6 L 18.2 51.7 C 16.8 46.1 15.5 40.5 14.1 34.8 L 13.9 34 C 13.7 33.1 12.8 32.3 11.9 32.3 L 10.1 32.1 L 10.1 30.9 L 21.4 30.9 C 21.9 30.9 21.9 30.9 21.9 31.5 L 21.9 32.1 L 20.6 32.3 C 19.5 32.6 19.1 33.2 19.2 34.3 C 19.4 35.6 19.7 36.9 20 38.1 L 23.9 54 C 23.9 54.7 24.2 55.3 24.4 56 C 24.4 56.2 24.4 56.3 24.4 56.4 L 24.4 56.4 C 24.4 56.1 24.4 55.8 24.7 55.5 C 26.2 49.2 27.8 43 29.4 36.9 C 29.5 36.7 29.5 36.5 29.4 36.3 C 29.2 35.5 28.9 34.7 28.7 34 C 28.3 33 27.4 32.3 26.4 32.2 L 25.7 32.2 L 25.7 31 L 36.9 31 C 37.3 31 37.4 31 37.4 31.4 C 37.4 31.6 37.4 31.9 37.4 32.1 L 35.7 32.4 L 35.4 32.4 C 34 32.7 33.6 33.3 33.9 34.7 C 34.2 36.1 34.7 38.4 35.2 40.2 L 38.9 55.8 C 38.9 56.3 39.2 56.8 39.3 57.3 L 39.3 57.3 C 39.4 57.2 39.4 57 39.5 56.8 L 41.6 47.6 C 42.6 43.5 43.5 39.3 44.5 35.2 C 44.5 34.8 44.5 34.3 44.5 33.9 C 44.6 33.4 44.3 32.9 43.9 32.6 C 43.1 32.4 42.3 32.3 41.5 32.2 L 41.2 32.2 C 41.1 31.9 41.1 31.5 41.2 31.2 C 41.2 31.2 41.4 31 41.5 31 L 49.5 31 C 49.9 31 50 31 50 31.4 C 49.9 31.7 49.9 31.9 50 32.2 L 49.4 32.2 C 47.9 32.3 46.6 33.4 46.3 35 C 45.8 37.3 45.2 39.6 44.6 41.9 C 43.5 46.7 42.3 51.4 41.2 56.1 C 40.2 60.3 39.2 64.4 38.3 68.5 C 38.3 68.7 38.3 69 37.8 69 C 37.4 69 37.4 69 37.4 68.6 L 35.1 59.5 C 33.8 54 32.4 48.6 31.1 43.2 C 30.9 42.3 30.7 41.3 30.4 40.4 L 30.4 40 Z" /><path d="M 50.3 56.6 C 51.1 56.6 51.1 56.6 51.5 57.1 C 52.7 59.8 54.3 62.4 56.2 64.6 C 57.2 65.9 58.6 67 60.1 67.7 C 61.2 68.3 62.6 68.3 63.7 67.7 C 64.6 67.2 65.3 66.3 65.5 65.3 C 66.5 62.5 66 59.5 64.1 57.2 C 62.8 55.5 61.3 54.1 59.6 52.8 C 57.6 51.4 55.8 49.8 54 48 C 51.9 45.8 50.7 42.9 50.6 39.9 C 50.6 37.4 51.5 35 53.1 33.1 C 55.4 30.6 59 30 61.9 31.7 C 62.6 32.1 63.2 32.5 63.8 32.9 L 64.4 33.4 C 64.9 33.7 65.5 33.7 65.9 33.4 C 66.3 32.9 66.7 32.4 67 31.8 C 67.3 31.4 67.3 31.3 67.9 31.5 L 67.9 41.8 C 67.9 42 67.9 42.3 67.7 42.3 C 67.4 42.3 67 42.3 66.9 42 C 66.1 39.5 64.8 37.1 63.2 35 C 62.5 34 61.5 33.2 60.4 32.6 C 57.8 31.2 54.6 32.9 54.3 35.8 C 53.8 38.2 54.4 40.7 56 42.5 C 57.2 44 58.6 45.3 60.1 46.5 C 62.3 48.2 64.3 50 66.3 51.9 C 68 53.6 69.1 55.8 69.4 58.2 C 70 61.3 69.3 64.4 67.5 67 C 65.7 69.4 62.6 70.3 59.8 69.3 C 58.3 68.7 56.9 68 55.7 67 C 55.6 66.8 55.4 66.7 55.2 66.6 C 54.4 66 54 66 53.2 66.6 C 52.6 67.2 52.1 67.9 51.6 68.6 C 51.4 68.9 50.9 69.1 50.7 68.9 C 50.6 68.8 50.6 68.7 50.7 68.6 L 50.7 56.6 Z" /><path d="M 77.2 32.1 L 77.2 31 L 89.9 31 C 90 31.3 90 31.6 89.9 31.9 C 89.8 32 89.7 32 89.6 31.9 C 89 31.9 88.3 31.9 87.7 31.9 C 86.9 32 86.3 32.5 86.3 33.3 C 86.3 33.6 86.3 34 86.3 34.3 L 86.3 60.1 C 86.4 62.1 85.8 64 84.6 65.7 C 83.2 67.7 80.9 69 78.4 69 C 76.1 69.2 73.9 68.1 72.8 66.1 C 71.5 64.1 71.5 61.5 72.8 59.4 C 73.4 58.4 74.5 57.8 75.6 57.8 C 76.6 57.7 77.6 58.4 77.9 59.3 C 78.4 60.3 78.3 61.5 77.5 62.3 C 77 62.8 76.4 63.2 75.8 63.6 C 74.6 64.4 74.4 65.3 75.1 66.7 C 75.6 67.5 76.4 67.9 77.2 67.9 C 77.7 68 78.2 68 78.7 67.9 C 79.6 67.7 80.4 67 80.7 66.1 C 80.9 65.2 81.1 64.2 81.2 63.3 C 81.2 61.8 81.2 60.4 81.2 58.9 L 81.2 34.9 C 81.2 34.4 81.2 33.9 81.2 33.4 C 81.1 32.9 80.6 32.4 80.1 32.3 C 79.4 32.2 78.8 32.2 78.1 32.1 Z" />',g_scatter3d:'<g class="cxa"><line x1="11.9" x2="11.9" y2="100" y1="0"/><line x1="100" y1="86" y2="86" x2="0"/><line y1="62.6" x2="11.9" y2="62.6" x1="0"/><line y1="39.1" x2="11.9" y2="39.1" x1="0"/><line y1="15.6" x2="11.9" y2="15.6" x1="0"/><line x1="32.5" y1="100" x2="32.5" y2="86"/><line x1="56" y1="100" x2="56" y2="86"/><line x1="79.4" y1="100" x2="79.4" y2="86"/><line x1="11.9" y1="86" x2="74.5" y2="26.6"/></g><g class="cxb"><line x1="28.9" y1="15.6" x2="32.5" y2="15.6"/><line x1="50" y1="15.6" x2="53.7" y2="15.6"/><line x1="78.3" y1="46.7" x2="81.9" y2="46.7"/><line x1="61.2" y1="59.8" x2="64.8" y2="59.8"/><line x1="74.5" y1="68.3" x2="78.2" y2="68.3"/><line x1="48" y1="71.8" x2="51.4" y2="71.8"/><line x1="39" y1="29.4" x2="42.7" y2="29.4"/><polyline points="72.1 4.9 81.5 4.9 81.5 19.5 72.1 19.5"/><line x1="74.5" y1="11.8" x2="81.5" y2="11.8"/><polyline points="92.5 4.9 85.8 4.9 85.8 19.5 92.5 19.5"/><line x1="94" y1="5.9" x2="94" y2="18.5"/></g>',c_tableau:'<rect x="47.5" class="cl50" width="5" height="20.3"/><rect x="39.8" y="7.6" class="cl50" width="20.3" height="5"/><rect x="47.5" y="79.7" class="cl51" width="5" height="20.3"/><rect x="39.8" y="87.3" class="cl51" width="20.3" height="5"/><rect x="79.7" y="47.5" class="cl51" width="20.3" height="5"/><rect x="87.3" y="39.8" class="cl51" width="5" height="20.3"/><rect y="47.5" class="cl50" width="20.3" height="5"/><rect x="7.6" y="39.8" class="cl50" width="5" height="20.3"/><rect x="74.2" y="9.7" class="cl52" width="5" height="31.2"/><rect x="61.2" y="22.8" class="cl52" width="31.2" height="5"/><rect x="20.7" y="9.7" class="cl53" width="5" height="31.2"/><rect x="7.7" y="22.8" class="cl53" width="31.2" height="5"/><rect x="74.2" y="59.1" class="cl54" width="5" height="31.2"/><rect x="61.2" y="72.2" class="cl54" width="31.2" height="5"/><rect x="20.7" y="59.1" class="cl55" width="5" height="31.2"/><rect x="7.7" y="72.2" class="cl55" width="31.2" height="5"/><rect x="47.5" y="32.6" class="cl56" width="5" height="34.7"/><rect x="32.6" y="47.5" class="cl56" width="34.7" height="5"/>',sh_square:'<rect class="cxa" x="15" y="15" width="70" height="70" />',ch_sat:'<text class="cxtb100" x="1" y="85">@</text>',p_g2citation:'<g class="cxblue"><rect x="75" y="95" width="20" height="2"/></g>',m_right:'<g class="cxaa"><path d="M50,10 Q 75,10 75,25 L75,35 55,35 55,30 Q 55,25 50,25 Z" /></g>',g_parallelcoordinates:'<g class="cxa"><line x1="54.3" y1="52.8" x2="88" y2="23.6"/><line x1="12.4" y1="33.9" x2="45.7" y2="53.8"/><line x1="54.4" y1="78.7" x2="88" y2="51.7"/><line x1="13.1" y1="68.7" x2="44.8" y2="80.2"/><line x1="10.1" y1="86.5" x2="47.2" y2="24.6"/><line x1="53.4" y1="24.3" x2="89" y2="72.1"/></g><g class="cxb"><line x1="7.6" y1="73.2" x2="7.6" y2="85.1"/><line x1="7.6" y1="36.6" x2="7.6" y2="61.4"/><line x1="7.6" x2="7.6" y2="25.5" y1="3.8"/><line x1="92.5" y1="82.2" x2="92.5" y2="96.2"/><line x1="92.5" y1="53.8" x2="92.5" y2="71"/><line x1="92.5" y1="25.5" x2="92.5" y2="42.6"/><line x1="92.5" x2="92.5" y2="14.3" y1="3.8"/><line x1="50.1" y1="87.7" x2="50.1" y2="96.2"/><line x1="50.1" y1="62" x2="50.1" y2="76.6"/><line x1="50.1" y1="25.5" x2="50.1" y2="50.9"/><line x1="50.1" x2="50.1" y2="14.3" y1="3.8"/><circle cx="92.4" cy="19.9" r="5.6"/><circle cx="50.1" cy="19.9" r="5.6"/><circle cx="7.6" cy="31" r="5.6"/><circle cx="7.6" cy="67.6" r="5.6"/><circle cx="7.6" cy="90.6" r="5.6"/><circle cx="92.4" cy="48.2" r="5.6"/><circle cx="50.1" cy="56.5" r="5.6"/><circle cx="50.1" cy="82.1" r="5.6"/><circle cx="92.4" cy="76.6" r="5.6"/></g>',g_dotline:'<g class="cxa"><line x1="11.9" x2="11.9" y2="100" y1="0"/><line x1="100" y1="86" y2="86" x2="0"/><line y1="62.6" x2="11.9" y2="62.6" x1="0"/><line y1="39.1" x2="11.9" y2="39.1" x1="0"/><line y1="15.6" x2="11.9" y2="15.6" x1="0"/></g><g class="cxb"><polyline points="24.8 65.2 53.4 35.9 62.7 46.1 89.3 19.9"/></g><g class="cxb"><circle cx="52" cy="67.9" r="6.6"/><circle cx="82.7" cy="55.7" r="6.6"/><circle cx="35.6" cy="23.4" r="6.6"/></g>',b_grhr:'<g class="cxa"><rect fill="url(\'#hr-grad\')" x="0" y="0" width="100" height="100" /></g>',p_g3citation:'<g class="cxblue"><rect x="75" y="95" width="20" height="2"/></g>',ar_h:'<path class="cxtxb" d="M80,35 L98,50 L80,65 M20,35 L2,50 L20,65 M98,50 L2,50" />',ch_le:'<text class="cxtb100" x="15" y="85">E</text>',bx_violinu:'<g class="cxac"><path d="M50,0 Q54,12 66,18 76,28 63,36 50,40 66,49 84,55 84,67 82,81 65,86 54,90 50,100 46,90 35,86 18,81 16,67 16,55 39,50 50,40 37,36 24,28 34,18 46,12 50,0" /></g>',p_g3titlesubtitle:'<g class="cxblue"><rect x="45" y="0" width="30" height="2"/><rect x="50" y="10" width="20" height="2"/></g>',c_rcode:'<g class="cxb"><path d="M 40.1 72.2 C 19.2 69.5 3.5 58.7 3.5 45.5 C 3.5 30.5 24.3 18.3 50.1 18.3 C 75.7 18.3 96.5 30.5 96.5 45.5 C 96.5 53.4 90.9 60.4 81.9 65.4" /><path d="M 68.7 70.6 C 64.8 71.6 60.7 72.3 56.7 72.6" /><path d="M 40.1 63.1 C 29.5 59.9 22.4 54 22.4 47.2 C 22.4 37.2 37.8 29.1 56.8 29.1 C 62.7 29.1 68.6 29.9 74.2 31.6 C 77.3 32.7 80.2 34 83 35.5" /></g><path class="cxa" d="M 80.2 62.8 C 91 60.6 95.6 47.6 88.3 39.2 C 85.6 36.1 81.5 34.3 77.4 34.3 L 40.1 34.3 L 40.1 81.7 L 56.7 81.7 L 56.7 63.1 L 63.8 63.1 L 75.9 81.7 L 92.5 81.7 Z M 70.4 54.3 L 55.9 54.3 L 55.9 43.2 L 70.4 43.2 C 74.6 42.8 77.7 47.2 75.9 51.1 C 74.9 53.2 72.8 54.5 70.4 54.3 Z" /><g class="cxaa"><text class="cxtn50" x="2" y="-5" transform="rotate(90)">&#8963;</text><text class="cxtn50" x="-42" y="35" transform="rotate(-90)">&#8963;</text></g>',gr_styledashed:'<g class="cxc"><line x1="2" y1="2" x2="2" y2="100" /><line x1="2" y1="98" x2="98" y2="98" /></g><g class="cxa"><line x1="4" y1="23" x2="98" y2="23" stroke-dasharray="15 5" /> <line x1="4" y1="48" x2="98" y2="48" stroke-dasharray="15 5" /> <line x1="4" y1="73" x2="98" y2="73" stroke-dasharray="15 5" /></g>',g_tagcloud:'<g class="cxa"><line x1="10.7" y1="2.1" x2="66.7" y2="2.1"/><line x1="10.7" y1="6.2" x2="66.7" y2="6.2"/><line x1="65" y1="17.9" x2="89" y2="17.9"/><line x1="40.5" y1="27.3" x2="77" y2="27.3"/><line y1="65.4" x2="54.5" y2="65.4" x1="4"/><line x1="45.7" y1="89" x2="79.8" y2="89"/><line x1="63.5" y1="97.9" x2="92.1" y2="97.9"/><line x1="25.5" y1="27.3" x2="19.2" y2="27.3"/><line x1="54.9" y1="38.9" x2="63.5" y2="38.9"/><line x1="58" y1="77.4" x2="66.7" y2="77.4"/><line x1="34.4" y1="51.1" x2="68.9" y2="51.1"/><line x1="34.4" y1="53.2" x2="68.9" y2="53.2"/></g><g class="cxb"><line y1="17.9" x2="52.2" y2="17.9" x1="4"/><line x1="68.9" y1="41.9" x2="93" y2="41.9"/><line x1="9.8" y1="38.9" x2="46.3" y2="38.9"/><line x1="9.8" y1="41.9" x2="46.3" y2="41.9"/><line x1="72" y1="80.4" x2="96" y2="80.4"/><line x1="13" y1="77.4" x2="49.5" y2="77.4"/><line x1="13" y1="80.4" x2="49.5" y2="80.4"/><line x1="86.3" y1="30.6" x2="93" y2="30.6"/><line x1="76.4" y1="5.2" x2="83" y2="5.2"/><line x1="13.5" y1="53.9" x2="22.5" y2="53.9"/><line x1="83.3" y1="56.2" x2="92.4" y2="56.2"/><line x1="61.9" y1="65.4" x2="79.8" y2="65.4"/></g>',p_g2titlesubtitle:'<g class="cxblue"><rect x="45" y="0" width="30" height="2"/><rect x="50" y="10" width="20" height="2"/></g>',ch_oceil:'<text class="cxtn60" x="5" y="70">ceil</text>',v_stop:'<circle class="cxb" cx="50" cy="50" r="48" /><text class="cxtn70" x="14" y="77">&#9726;</text>',tx_tostring:'<text class="cxtn60" x="65" y="70">#</text><g class="cxaa"><text class="cxtn60" x="30" y="40">&#10554;</text><text class="cxtn60" x="0" y="65">a</text></g>',ch_ln:'<text class="cxtb100" x="15" y="85">N</text>',gr_styledotted:'<g class="cxc"><line x1="2" y1="2" x2="2" y2="100" /><line x1="2" y1="98" x2="98" y2="98" /></g><g class="cxa"><line x1="4" y1="23" x2="98" y2="23" stroke-dasharray="5" /> <line x1="4" y1="48" x2="98" y2="48" stroke-dasharray="5" /> <line x1="4" y1="73" x2="98" y2="73" stroke-dasharray="5" /></g>',sp_thickness2:'<g class="cxa"><rect x="27" y="2" width="24" height="96" /></g><g class="cxb"><rect x="2" y="2" width="14" height="96" /><rect x="61" y="2" width="34" height="96" /></g>',at_ellipse:'<g class="cxa"><path d="M31,2 Q 48,3 56,19 59,35 56,53 48,69 31,71 13,69 6,53 2,36 6,19 13,3 31,2" /><path d="M41,37 Q 56,27 74,36 90,44 97,68 98,86 88,94 74,98 60,94 44,86 36,70 31,52 41,37" /></g><g class="cxb"><circle cx="20" cy="18" r="2" /><circle cx="12" cy="27" r="2" /><circle cx="15" cy="40" r="2" /><circle cx="45" cy="52" r="2" /><circle cx="25" cy="52" r="2" /><circle cx="45" cy="23" r="2" /><circle cx="36" cy="15" r="2" /><circle cx="31" cy="26" r="2" /><circle cx="30" cy="42" r="2" /></g><g class="cxb"><circle cx="60" cy="63" r="2" /><circle cx="52" cy="70" r="2" /><circle cx="75" cy="85" r="2" /><circle cx="85" cy="82" r="2" /><circle cx="65" cy="82" r="2" /><circle cx="80" cy="73" r="2" /><circle cx="70" cy="43" r="2" /><circle cx="75" cy="56" r="2" /><circle cx="85" cy="62" r="2" /></g>',ch_cesc2:'<text class="cxtn60" x="-2" y="70">Esc</text>',p_g3axisz:'<g class="cxblue"><line x1="25" y1="65" x2="75" y2="25" /><line x1="45" y1="50" x2="45" y2="60" /><line x1="65" y1="33" x2="65" y2="43" /></g>',ch_lx:'<text class="cxtb100" x="15" y="85">X</text>',cd_select:'<g class="cxa"><rect y="2" x="2" width="96" height="96" stroke-dasharray="10" /></g><g class="cxb"><polyline points="68,47 68,40 48,40 48,17 22,17 22,83 68,83 68,70" /><line x1="68" y1="40" x2="48" y2="17" /></g><g class="cxaa"><text class="cxtn30" x="47" y="-60" transform="rotate(90)">&#8963;</text><text class="cxtn30" x="-71" y="74" transform="rotate(-90)">&#8963;</text></g>',ch_lf:'<text class="cxtb100" x="15" y="85">F</text>',p_cg1dataverticalhorizontal:'<g class="cxa"><line x1="2" y1="2" x2="2" y2="45" /><line x1="2" y1="45" x2="45" y2="45" /><line x1="53" y1="53" x2="53" y2="96" /><line x1="53" y1="96" x2="96" y2="95" /></g><g class="cxcc"><rect x="9" y="20" width="10" height="24" /><rect x="28" y="10" width="10" height="34" /><rect x="55" y="59" width="24" height="10" /><rect x="55" y="78" width="34" height="10" /></g><g class="cxaa"><text class="cxtn60 cxaa" x="53" y="51" transform="rotate(45)">&#10555;</text><text class="cxtn60 cxaa" x="-86" y="51" transform="rotate(45) scale(-1,1)">&#10555;</text><text class="cxtn60 cxaa" x="51" y="-22" transform="rotate(45)">&#10554;</text><text class="cxtn60 cxaa" x="-90" y="-22" transform="rotate(45) scale(-1,1)">&#10554;</text></g>',p_cg2fitcor:'<g class="cxa"><line x1="10" y1="90" x2="99" y2="1" /></g>',cd_upload:'<path class="cxtxa" d="M35,60 L50,75 L65,60 M50,75 L50,25" /><g class="cxa"><line x1="30" y1="82" x2="70" y2="82" /></g><g class="cxb"><polyline points="89,30 59,30 59,2 13,2 13,98 89,98 89,30" /><line x1="90" y1="29" x2="59" y2="1" /></g>',bx_notched:'<g class="cxa"><polyline points="40,50 30,40 30,20 70,20 70,40 60,50 70,60 70,80 30,80 30,60 40,50" /><line x1="40" y1="50" x2="60" y2="50" /></g><g class="cxb"><line x1="30" y1="2" x2="70" y2="2" /><line x1="50" y1="2" x2="50" y2="20" /><line x1="30" y1="98" x2="70" y2="98" /><line x1="50" y1="98" x2="50" y2="80" /></g>',g_fish:'<g class="cxa"><path d="M 78 50 C 78 50 61.1 74.1 40.4 74.1 C 19.6 74.1 2.7 50 2.7 50 C 2.7 50 19.6 25.9 40.4 25.9 C 61.1 25.9 78 50 78 50 Z"/><line x1="97.4" y1="28.2" x2="77.9" y2="50"/><line x1="97.4" y1="71.9" x2="77.9" y2="50"/></g><g class="cxb"><line x1="23.5" y1="43.2" x2="23.5" y2="47.1"/></g>',ar_rs:'<path class="cxtxb" d="M62,42 L70,50 L62,58 M70,50 L30,50" />',g_ridgeline:'<g class="cxcc"><path d="M 11.5 35.4 C 11.5 35.4 27.1 2.1 30.9 2.1 C 43.1 2.1 53.7 32.3 59.5 35.4"/><path d="M 22.6 66.7 C 22.6 66.7 35.9 32 40.4 26.5 C 45.1 20.4 53.9 42 68.9 65.8"/><path d="M 42.3 98 C 42.3 98 53.1 62.5 59.2 55.9 C 67 47.3 82.5 85.5 86.4 91.6 C 87.2 93.8 88.3 95.8 88.9 98"/></g><g class="cxb"><path d="M 11.5 35.4 C 11.5 35.4 27.1 2.1 30.9 2.1 C 43.1 2.1 53.7 32.3 59.5 35.4"/><path d="M 22.6 66.7 C 22.6 66.7 35.9 32 40.4 26.5 C 45.1 20.7 53.9 42.3 68.9 65.8"/><path d="M 42.3 98 C 42.3 98 52.8 62.5 58.9 55.9 C 66.7 47.3 82.2 85.5 86.4 91.6 C 87.2 93.8 88.3 95.8 88.9 98"/></g><g class="cxa"><line y1="35.4" x2="94" y2="35.4" x1="6"/><line y1="66.7" x2="94" y2="66.7" x1="6"/><line y1="97.9" x2="94" y2="97.9" x1="6"/></g>',ch_capple:'<text class="cxtb100" x="10" y="85">&#63743;</text>',op_undo:'<g class="cxa"><path d="M5.5,31.5l39.8-29V16h1.1c26.2-0.4,47.8,20.6,48.1,46.8c0,0,0,0.1,0,0.1c0,13.2-5.7,25.7-15.5,34.5c3.4-5.4,5.3-11.6,5.3-18C84.1,60,68.1,44.5,48.7,44.8c0,0,0,0,0,0c-1.1,0-2.2,0-3.4,0.2v15.6L5.5,31.5z"/></g>',v_play:'<circle class="cxb" cx="50" cy="50" r="48" /><text class="cxtn70" x="25" y="77">&#9654;</text>',wp_constructor:'<g class="cxa"><polyline points="19.7 21.7 4.2 30.8 4.2 70.9 50 97.7 95.8 70.9 95.8 30.8 80.6 21.8"/><polyline points="4.2 30.9 50 57.5 95.8 30.9"/><line x1="50" y1="57.5" x2="50" y2="97.7"/></g><g class="cxb"><ellipse cx="50" cy="9.1" rx="12" ry="6.8"/><line x1="38.1" y1="15" x2="38.1" y2="10.1"/><path d="M 57.6 22.6 C 55.2 23.6 52.7 24.1 50 24.1 C 47.3 24.1 44.5 23.5 42.1 22.3"/><line x1="62.1" y1="10.1" x2="62.1" y2="15"/><ellipse cx="30" cy="20" rx="12" ry="6.8"/><path d="M 37.6 33.4 C 35.2 34.5 32.7 35 30 34.9 C 23.4 34.9 18 31.9 18 28.2 L 18 20.8"/><ellipse cx="68.7" cy="20" rx="12" ry="6.8"/><path d="M 80.6 20.8 L 80.6 28.2 C 80.6 31.9 75.2 34.9 68.7 34.9 C 65.8 35 63.1 34.4 60.6 33.2"/><ellipse cx="48.6" cy="30.8" rx="12" ry="6.8"/><path d="M 60.6 31.6 L 60.6 39 C 60.6 42.7 55.2 45.8 48.6 45.8 C 42 45.8 36.6 42.5 36.6 39 L 36.6 31.6"/></g>',dp_bin:'<g class="cxb"><circle cx="19" cy="3" r="2.5" /><circle cx="19" cy="18" r="2.5" /><circle cx="19" cy="33" r="2.5" /><circle cx="12" cy="33" r="2.5" /><circle cx="19" cy="50" r="2.5" /><circle cx="12" cy="50" r="2.5" /><circle cx="5" cy="50" r="2.5" /><circle cx="19" cy="65" r="2.5" /><circle cx="12" cy="65" r="2.5" /><circle cx="19" cy="80" r="2.5" /><circle cx="19" cy="97" r="2.5" /><circle cx="50" cy="3" r="2.5" /><circle cx="46.5" cy="18" r="2.5" /><circle cx="53.5" cy="18" r="2.5" /><circle cx="43" cy="33" r="2.5" /><circle cx="50" cy="33" r="2.5" /><circle cx="57" cy="33" r="2.5" /><circle cx="39.5" cy="50" r="2.5" /><circle cx="46.5" cy="50" r="2.5" /><circle cx="53.5" cy="50" r="2.5" /><circle cx="60.5" cy="50" r="2.5" /><circle cx="43" cy="65" r="2.5" /><circle cx="50" cy="65" r="2.5" /><circle cx="57" cy="65" r="2.5" /><circle cx="46.5" cy="80" r="2.5" /><circle cx="53.5" cy="80" r="2.5" /><circle cx="50" cy="97" r="2.5" /><circle cx="81" cy="3" r="2.5" /><circle cx="81" cy="18" r="2.5" /><circle cx="81" cy="33" r="2.5" /><circle cx="88" cy="33" r="2.5" /><circle cx="81" cy="50" r="2.5" /><circle cx="88" cy="50" r="2.5" /><circle cx="95" cy="50" r="2.5" /><circle cx="81" cy="65" r="2.5" /><circle cx="88" cy="65" r="2.5" /><circle cx="81" cy="80" r="2.5" /><circle cx="81" cy="97" r="2.5" /><circle cx="81" cy="3" r="2.5" /></g>',p_g2:'<g class="cxc"><rect x="45" y="0" width="30" height="2"/><rect x="50" y="10" width="20" height="2"/><rect x="35" y="30" width="4" height="4"/><rect x="85" y="40" width="4" height="4"/><rect x="45" y="50" width="4" height="4"/><rect x="40" y="85" width="30" height="2"/><rect x="0" y="25" width="3" height="25"/><line x1="25" y1="65" x2="95" y2="65" /><line x1="25" y1="65" x2="25" y2="75" /><line x1="45" y1="65" x2="45" y2="75" /><line x1="65" y1="65" x2="65" y2="75" /><line x1="85" y1="65" x2="85" y2="75" /><line x1="25" y1="15" x2="25" y2="75" /><line x1="15" y1="25" x2="25" y2="25" /><line x1="15" y1="45" x2="25" y2="45" /><line x1="15" y1="65" x2="25" y2="65" /><rect x="75" y="95" width="20" height="2"/></g>',ps_bottomright:'<path class="cxtxb" d="M66,58 L66,66 L56,66 M34,34 L66,66" /><g class="cxa"><rect x="78" y="78" width="20" height="20" rx="2" /></g>',p_cg2bin:'<g class="cxa"><rect x="20" y="68" width="15" height="15" /><rect x="35" y="68" width="15" height="15" /><rect x="35" y="53" width="15" height="15" /><rect x="50" y="38" width="15" height="15" /><rect x="65" y="23" width="15" height="15" /><rect x="50" y="53" width="15" height="15" /><rect x="65" y="38" width="15" height="15" /><rect x="80" y="23" width="15" height="15" /></g>',p_cg2contourfilled:'<g class="cxc"><path d="M 56.1 92.7 L 21.1 92.7 C 17.4 92.8 14.3 89.8 14.3 86 L 14.3 82.1 C 14.3 80.4 13.1 79.1 11.4 79.1 L 11.4 79.1 C 9.8 79.1 8.4 77.7 8.4 76.2 L 8.4 29.7 L 14.3 29.7 L 14.3 22.2 L 20.3 22.2 L 20.3 18.4 L 25 18.4 L 25 13.3 L 29.9 13.3 L 29.9 8.7 L 33.6 8.7 L 33.6 5.8 L 37.8 5.8 L 37.8 2.8 L 50 2.8 L 50 6.6 L 62.5 6.6 L 62.5 10.9 L 69.1 10.9 L 69.1 15.7 L 74 15.7 L 74 20 L 77.5 20 L 77.5 27 L 82.5 27 L 82.5 34.9 L 86.2 34.9 L 86.2 50.9 L 90.8 50.9 L 90.8 69.8 L 86.5 69.8 L 86.5 80.1 L 82.5 80.1 L 82.5 90.6 C 82.5 91.8 81.5 92.7 80.2 92.7 L 80.2 92.7 C 78.9 92.7 77.9 93.8 77.9 95 L 77.9 95 C 77.9 96.3 76.9 97.3 75.6 97.3 L 60.8 97.3 C 59.6 97.3 58.6 96.3 58.6 95 L 58.6 95 C 58.6 93.7 57.5 92.6 56.1 92.7 Z"/></g><g class="cxcc"><polygon points="63 78.5 69.8 78.5 69.8 70.7 78.5 70.7 78.5 59.1 74 59.1 74 50.6 69.5 50.6 69.5 39.4 66.7 39.4 66.7 31.7 62.5 31.7 62.5 27.5 54.2 27.5 54.2 22.9 33.9 22.9 33.9 27.4 30.1 27.3 30.1 29.8 26.2 29.8 26.2 34.7 22.8 34.7 22.8 75.1 25.4 75.1 25.4 79.2 29.5 79.2 29.5 83.1 63 83.1 63 78.5"/></g><g class="cxbb"><polygon points="38.4 42.7 38.4 38.9 49.9 38.9 49.9 43.2 53.7 43.2 53.7 71.1 38.4 71.1 38.4 63.2 34 63.2 34 42.7 38.4 42.7"/></g><g class="cxc"><polyline points="77.9 2.9 85.9 2.9 85.9 11.4 90 11.4 90 15 93.9 15 93.9 22.9 98.2 22.9 98.2 31.2"/><polyline points="21.9 2.9 14 2.9 14 7.2 10.1 7.2 10.1 15.4 1.8 15.4"/></g>',b_bodygradient:'<g class="cxa"><polyline fill="url(\'#b-grad\')" points="78,42 78,30 48,30 48,2 2,2 2,98 78,98 78,85"/><line x1="79" y1="29" x2="48" y2="1" /></g>',p_g3:'<g class="cxc"><rect x="45" y="0" width="30" height="2"/><rect x="50" y="10" width="20" height="2"/><rect x="35" y="30" width="4" height="4"/><rect x="85" y="40" width="4" height="4"/><rect x="40" y="85" width="30" height="2"/><rect x="0" y="25" width="3" height="25"/><line x1="55" y1="55" x2="65" y2="47"/><line x1="25" y1="65" x2="95" y2="65" /><line x1="25" y1="65" x2="25" y2="75" /><line x1="45" y1="65" x2="45" y2="75" /><line x1="65" y1="65" x2="65" y2="75" /><line x1="85" y1="65" x2="85" y2="75" /><line x1="25" y1="15" x2="25" y2="75" /><line x1="15" y1="25" x2="25" y2="25" /><line x1="15" y1="45" x2="25" y2="45" /><line x1="15" y1="65" x2="25" y2="65" /><line x1="25" y1="65" x2="75" y2="25" /><line x1="45" y1="50" x2="45" y2="60" /><line x1="65" y1="33" x2="65" y2="43" /><rect x="75" y="95" width="20" height="2"/></g>',gr_g2xy:'<g class="cxc"><line x1="2" y1="2" x2="2" y2="100" /><line x1="2" y1="98" x2="100" y2="98" /></g><g class="cxa"><line x1="20" y1="0" x2="20" y2="97" /> <line x1="40" y1="0" x2="40" y2="97" /> <line x1="60" y1="0" x2="60" y2="97" /> <line x1="80" y1="0" x2="80" y2="97" /><line x1="4" y1="18" x2="98" y2="18" /> <line x1="4" y1="38" x2="98" y2="38" /> <line x1="4" y1="58" x2="98" y2="58" /> <line x1="4" y1="78" x2="98" y2="78" /></g>',dt_count:'<g class="cxb"><line x1="12" x2="12" y1="5" y2="45"/><line x1="37" x2="37" y1="5" y2="45"/><line x1="62" x2="62" y1="5" y2="45"/><line x1="87" x2="87" y1="5" y2="45"/><line x1="12" x2="12" y1="57" y2="95"/><line x1="37" x2="37" y1="57" y2="95"/><line x1="62" x2="62" y1="57" y2="95"/></g><g class="cxa"><line x1="2" x2="98" y1="40" y2="10"/></g>',ch_olinsmall:'<text class="cxts60" x="25" y="70">lin</text>',tm_history:'<g class="cxa"><path d=" M 12 50 A 38 38 0 1 1 31 83" /><line x1="2" y1="40" x2="12" y2="50" /><line x1="22" y1="40" x2="12" y2="50" /></g><g class="cxb"><line x1="50" y1="20" x2="50" y2="50" /><line x1="42" y1="73" x2="50" y2="50" /><circle cx="50" cy="50" r="4" /></g>',g_remotegraphs:'<g class="cxa"><circle cx="50" cy="50" r="16.8"/></g><g class="cxb"><path d="M 83.8 16.2 C 102.4 34.9 102.4 65.1 83.8 83.8"/><path d="M 73.1 26.9 C 85.9 39.6 85.9 60.3 73.1 73.1"/><path d="M 73.1 26.9 C 85.9 39.6 85.9 60.3 73.1 73.1"/><path d="M 16.2 16.2 C -2.4 34.9 -2.4 65.1 16.2 83.8"/><path d="M 26.9 26.9 C 14.1 39.6 14.1 60.3 26.9 73.1"/><path d="M 26.9 26.9 C 14.1 39.6 14.1 60.3 26.9 73.1"/></g>',gr_style:'<g class="cxc"><line x1="2" y1="2" x2="2" y2="100" /><line x1="2" y1="98" x2="98" y2="98" /></g><g class="cxa"><line x1="4" y1="23" x2="98" y2="23" /> <line x1="4" y1="48" x2="98" y2="48" stroke-dasharray="5" /> <line x1="4" y1="73" x2="98" y2="73" stroke-dasharray="15 5"/></g>',dtt_transpose:'<g class="cxaa"><text class="cxtn60 cxaa" x="51" y="-22" transform="rotate(45)">&#10554;</text><text class="cxtn60 cxaa" x="-90" y="-22" transform="rotate(45) scale(-1,1)">&#10554;</text></g><g class="cxb"><rect x="2" y="2" width="30" height="60" /><line x1="2" y1="12" x2="32" y2="12" /><rect x="38" y="68" width="60" height="30" /><line x1="38" y1="78" x2="98" y2="78" /></g>',sw_down:'<g class="cxb"><path d="M0,15 C90,10 10,90 100,85" /><line x1="83" y1="75" x2="98" y2="85" /><line x1="83" y1="95" x2="98" y2="85" /></g>',bx_mean:'<g class="cxb"><rect x="30" y="20" width="40" height="60" /><line x1="30" y1="50" x2="70" y2="50" /><line x1="30" y1="2" x2="70" y2="2" /><line x1="50" y1="2" x2="50" y2="20" /><line x1="30" y1="98" x2="70" y2="98" /><line x1="50" y1="98" x2="50" y2="80" /></g><g class="cxaa"><rect x="40" y="40" width="20" height="20" /></g>',tb_col:'<g class="cxcc"><rect x="34" y="26" width="32" height="70" /></g><g class="cxb"><line x1="2" y1="26" x2="98" y2="26" /><line x1="2" y1="50" x2="98" y2="50" /><line x1="2" y1="74" x2="98" y2="74" /><line x1="34" y1="26" x2="34" y2="98" /><line x1="66" y1="26" x2="66" y2="98" /></g><g class="cxa"><rect x="2" y="2" width="96" height="96" /><rect x="12" y="12" width="3" height="3" /><rect x="24" y="12" width="3" height="3" /><rect x="36" y="12" width="3" height="3" /></g>',m_double:'<text class="cxtn30 cxaa" x="2" y="25">2</text>',ch_la:'<text class="cxtb100" x="15" y="85">A</text>',tb_table:'<g class="cxa"><rect x="2" y="2" width="96" height="96" /><rect x="12" y="12" width="3" height="3" /><rect x="24" y="12" width="3" height="3" /><rect x="36" y="12" width="3" height="3" /></g><g class="cxb"><line x1="2" y1="26" x2="98" y2="26" /><line x1="2" y1="50" x2="98" y2="50" /><line x1="2" y1="74" x2="98" y2="74" /><line x1="34" y1="26" x2="34" y2="98" /><line x1="66" y1="26" x2="66" y2="98" /></g>',e_open:'<g class="cxa"><circle cx="50" cy="50" r="15" /></g><g class="cxb"><path d="M2,50 Q 50,0 98,50 50,100 2,50" /><line x1="2" y1="25" x2="10" y2="35" /><line x1="25" y1="12" x2="30" y2="23" /><line x1="50" y1="8" x2="50" y2="20" /><line x1="75" y1="12" x2="70" y2="23" /><line x1="98" y1="25" x2="88" y2="35" /></g><g class="cxcc"><circle cx="50" cy="50" r="2" /></g>',p_ghtitle:'<g class="cxblue"><rect x="50" y="0" width="30" height="2"/></g>',p_cg3data:'<g class="cxb"><rect x="18" y="56" width="2" height="2"/><rect x="26" y="32" width="2" height="2"/><rect x="34" y="44" width="2" height="2"/><rect x="42" y="10" width="2" height="2"/><rect x="43" y="30" width="2" height="2"/><rect x="50" y="80" width="2" height="2"/><rect x="58" y="60" width="2" height="2"/><rect x="64" y="24" width="2" height="2"/><rect x="70" y="70" width="2" height="2"/><rect x="74" y="48" width="2" height="2"/><rect x="82" y="18" width="2" height="2"/><rect x="90" y="72" width="2" height="2"/></g>',ch_lt:'<text class="cxtb100" x="15" y="85">T</text>',ps_center:'<g class="cxa"><rect x="40" y="40" width="20" height="20" rx="2" /></g>',ar_cross:'<path class="cxb" d="M98,50 L2,50 M50,98 L50,2" />',c_jupyter:'<g class="cxa"><path d="M50.3,22.2c16.2,0,30.3,5.7,37.7,14.3C80.5,15.7,57.5,5,36.7,12.5c-11.2,4-20,12.9-24.1,24.1C20,28,34.2,22.2,50.3,22.2z"/><path d="M50.3,78.8c-16.2,0-30.3-5.7-37.7-14.3c7.5,20.8,30.5,31.6,51.3,24.1c11.2-4,20-12.9,24.1-24.1C80.6,73,66.5,78.8,50.3,78.8z"/></g><g class="cxb"><circle cx="77.4" cy="6.4" r="5"/><circle cx="19.4" cy="93.4" r="5"/><circle cx="14.6" cy="13.2" r="3.5"/><path d="M0,62.9c1.1,0,2.1-0.4,2.9-1.1c0.7-0.9,1-2.1,1-5.7V43.4h2.9v13.7C7,59.3,6.4,61.5,5,63.3C3.7,64.4,2,65,0.3,65L0,62.9z"/><path d="M24.7,54.4c0,1.6,0,2.9,0,4.1h-2.3v-2.5l0,0c-1,1.8-2.9,2.9-5,2.9c-2.4,0-5.2-1.3-5.2-6.6v-8.9h2.9v8.4c0,2.9,0.9,4.8,3.3,4.8c1.6,0,3-1,3.6-2.5c0.2-0.4,0.3-0.9,0.3-1.4v-9.3h2.9L24.7,54.4z"/><path d="M30.3,48.4c0-1.9,0-3.5,0-4.9h2.5L33,46l0,0c1.1-1.9,3.2-3,5.4-2.9c3.6,0,6.4,3.1,6.4,7.7c0,5.4-3.3,8.1-6.8,8.1c-1.9,0.1-3.6-0.8-4.7-2.4l0,0v8.2h-2.8V48.4z M33,52.4c0,0.4,0,0.8,0.1,1.1c0.5,1.9,2.1,3.2,4,3.2c2.9,0,4.6-2.4,4.6-5.7c0-3-1.6-5.7-4.5-5.7c-2,0-3.7,1.4-4.1,3.4C33.1,49,33,49.4,33,49.8L33,52.4z"/><path d="M49.8,43.4l3.3,8.9c0.3,1,0.7,2.2,0.9,3.1l0,0c0.3-0.9,0.6-2.1,0.9-3.1l3-8.8h2.9l-4.1,10.8c-0.9,3.5-2.7,6.7-5.2,9.4c-0.9,0.9-2.1,1.5-3.4,1.8l-0.7-2.3c0.9-0.3,1.7-0.7,2.4-1.3c1-0.8,1.8-1.9,2.3-3.1c0.1-0.2,0.2-0.4,0.2-0.7c0-0.2-0.1-0.5-0.2-0.7l-5.6-13.9L49.8,43.4z"/><path d="M68.4,39.1v4.3h3.9v2.1h-3.9v8.1c0,1.9,0.5,2.9,2,2.9c0.5,0,1.1-0.1,1.6-0.2v2.1c-0.8,0.3-1.6,0.4-2.4,0.4c-1.1,0-2.1-0.4-2.9-1.2c-0.7-1.1-1.1-2.5-0.9-3.9v-8.2h-2.3v-2.1h2.3v-3.6L68.4,39.1z"/><path d="M77.6,51.5c-0.2,2.7,1.7,5,4.4,5.2c0.3,0,0.5,0,0.8,0c1.4,0,2.8-0.2,4.2-0.8l0.5,2c-1.6,0.7-3.3,1-5,0.9c-3.8,0.3-7.2-2.7-7.4-6.5c0-0.4,0-0.7,0-1.1c-0.4-4,2.6-7.6,6.6-8c0.2,0,0.3,0,0.5,0c3.5,0.1,6.3,3,6.2,6.6c0,0.2,0,0.4,0,0.5c0,0.4,0,0.9,0,1.3L77.6,51.5z M85.6,49.5c0.3-2.1-1.2-4.1-3.3-4.4c-0.2,0-0.3,0-0.5,0c-2.3,0.2-4.2,2.1-4.2,4.4H85.6z"/><path d="M92.6,48.2c0-1.8,0-3.3,0-4.7H95v2.9h0.1c0.6-1.8,2.2-3,4.1-3.1c0.3,0,0.5,0,0.8,0v2.6c-0.3,0-0.6,0-0.9,0c-1.9,0.1-3.5,1.6-3.7,3.5c0,0.4,0,0.8,0,1.3v8h-2.7L92.6,48.2z"/></g>',at_pat:'<g class="cxb"><rect x="2" y="2" width="25" height="96" /><rect x="33" y="2" width="25" height="96" /><rect x="66" y="2" width="25" height="96" /></g><g class="cxa"><line x1="35" y1="10" x2="57" y2="30" /><line x1="35" y1="30" x2="57" y2="50" /><line x1="35" y1="50" x2="57" y2="70" /><line x1="35" y1="70" x2="57" y2="90" /><line x1="68" y1="22" x2="90" y2="22" /><line x1="68" y1="42" x2="90" y2="42" /><line x1="68" y1="62" x2="90" y2="62" /><line x1="68" y1="82" x2="90" y2="82" /></g>',op_refresh:'<g class="cxa"><path d="M79.7,27.5C66.1,8.4,39.6,3.8,20.4,17.4C9.8,25,3.1,37,2.5,50.1c5.7-18.9,25.7-29.5,44.5-23.8c7.1,2.2,13.4,6.5,17.9,12.4L50,50.1l35.4,3.6l6-35L79.7,27.5z"/></g><g class="cxb"><path d="M20.9,73.3C34.9,92.1,61.6,96,80.4,82c10.5-7.8,16.8-20,17.1-33.1c-5.3,19-25,30.1-44,24.8c-7.1-2-13.5-6.1-18.1-11.9L50,50.1l-35.4-2.8L9.5,82.5L20.9,73.3z"/></g>',tm_time:'<g class="cxa"><circle cx="50" cy="50" r="48" /></g><g class="cxb"><line x1="50" y1="10" x2="50" y2="50" /><line x1="40" y1="83" x2="50" y2="50" /><circle cx="50" cy="50" r="4" /></g>',p_g1subtitle:'<g class="cxblue"><rect x="50" y="10" width="10" height="2"/></g>',dp_binc:'<g class="cxb"><circle cx="50" cy="3" r="2.5" /><circle cx="46.5" cy="18" r="2.5" /><circle cx="53.5" cy="18" r="2.5" /><circle cx="43" cy="33" r="2.5" /><circle cx="50" cy="33" r="2.5" /><circle cx="57" cy="33" r="2.5" /><circle cx="39.5" cy="50" r="2.5" /><circle cx="46.5" cy="50" r="2.5" /><circle cx="53.5" cy="50" r="2.5" /><circle cx="60.5" cy="50" r="2.5" /><circle cx="43" cy="65" r="2.5" /><circle cx="50" cy="65" r="2.5" /><circle cx="57" cy="65" r="2.5" /><circle cx="46.5" cy="80" r="2.5" /><circle cx="53.5" cy="80" r="2.5" /><circle cx="50" cy="97" r="2.5" /></g>',op_cancel:'<g class="cxa"><circle cx="50" cy="50" r="48"/></g><g class="cxb"><line x1="25" y1="25" x2="75" y2="75" /><line x1="75" y1="25" x2="25" y2="75" /></g>',ch_lm:'<text class="cxtb100" x="8" y="85">M</text>',o_ghvars:'<g class="cxc"><rect x="15" y="2" width="70" height="40" /><line x1="15" y1="22" x2="85" y2="22" /><line x1="50" y1="2" x2="50" y2="42" /><rect x="2" y="6" width="4" height="2" /><rect x="2" y="26" width="4" height="2" /><rect x="20" y="55" width="20" height="2" /><rect x="60" y="55" width="20" height="2" /></g><g class="cxa"><rect x="15" y="68" width="70" height="28" /><line x1="15" y1="82" x2="85" y2="82" /><line x1="50" y1="68" x2="50" y2="96" /><rect x="95" y="75" width="2" height="2" /><rect x="95" y="89" width="2" height="2" /></g>',wp_scale:'<g class="cxa"><path d="M50.2,77.2c-8,0-14.5,6.5-14.5,14.5c0,0,0,0,0,0h29C64.7,83.7,58.2,77.2,50.2,77.2C50.2,77.2,50.2,77.2,50.2,77.2z"/><circle cx="50.2" cy="34.1" r="7.4"/><line x1="50.2" y1="26.8" x2="50.2" y2="8.3"/><line x1="50.2" y1="77.2" x2="50.2" y2="41.4"/><line x1="17" y1="16.9" x2="83.3" y2="16.9"/></g><g class="cxb"><path d="M2.6,49.1c-0.4,8,5.8,14.7,13.8,15.1c8,0.4,14.7-5.8,15.1-13.8c0-0.4,0-0.9,0-1.3H2.6z"/><polyline points="2.6,49.1 17,16.9 31.4,49.1"/><path d="M68.7,49.1c-0.4,8,5.8,14.7,13.8,15.1c8,0.4,14.7-5.8,15.1-13.8c0-0.4,0-0.9,0-1.3H68.7z"/><polyline points="68.7,49.1 83.1,16.9 97.5,49.1"/></g>',a_aligntop:'<g class="cxb"><rect x="2" y="15" width="38" height="45" rx="5" /><rect x="52" y="15" width="38" height="75" rx="5" /></g><g class="cxa"><line x1="1" y1="3" x2="99" y2="3" /></g>',dps_collapse:'<g class="cxa"><rect x="9.5" y="9.5" width="80" height="80" rx="4" /></g><text class="cxtb100" x="3" y="95">&#8963;</text>',ar_tm:'<path class="cxtxb" d="M38,29 L50,17 L62,29 M50,83 L50,17" />',p_g1samplelabels:'<g class="cxblue"><rect x="38" y="75" width="5" height="2"/><rect x="56" y="75" width="5" height="2"/></g>',g_sunburst:'<g class="cxa"><circle cx="50.1" cy="50.1" r="35.7"/><path d="M 27.5 50.1 L 2.4 50.1 C 2.4 23.8 23.8 2.4 50.1 2.4 L 50.1 41.1"/><path d="M 72.7 50.1 L 97.7 50.1 C 97.7 76.4 76.4 97.7 50.1 97.7 L 50.1 72.7"/><circle cx="50.1" cy="50.1" r="22.6"/><circle cx="50.1" cy="50.1" r="9"/></g><g class="cxac"><path d="M 50.1 14.3 L 50.1 2.4 C 23.8 2.4 2.4 23.8 2.4 50.1 L 14.3 50.1 C 14.3 30.3 30.3 14.3 50.1 14.3 Z"/><path d="M 50.1 85.8 L 50.1 97.7 C 76.4 97.7 97.7 76.4 97.7 50.1 L 85.8 50.1 C 85.8 69.8 69.8 85.8 50.1 85.8 Z"/></g><g class="cxb"><line x1="43.2" y1="55.9" x2="22.7" y2="73.1"/><line x1="27.4" y1="21.5" x2="36.7" y2="30.9"/><line x1="68.2" y1="63.4" x2="89.1" y2="77.2"/><line x1="68.2" y1="80.8" x2="74.1" y2="91.2"/><line x1="7.5" y1="28.7" x2="29.9" y2="39.7"/><line x1="29.9" y1="8.8" x2="34.2" y2="17.9"/></g>',b_windowbg:'<polyline class="cxac" points="65,45 65,30 48,30 48,15 15,15 15,83 68,83 45,65 65,45" />',ga_axisxyz:'<g class="cxb"><line x1="15" y1="2" x2="15" y2="98" /><line x1="15" y1="2" x2="0" y2="17" /><line x1="15" y1="2" x2="30" y2="17" /><line x1="2" y1="85" x2="98" y2="85" /><line x1="83" y1="70" x2="98" y2="85" /><line x1="83" y1="100" x2="98" y2="85" /><line x1="2" y1="98" x2="70" y2="30" /><line x1="55" y1="30" x2="70" y2="30" /><line x1="70" y1="45" x2="70" y2="30" /></g><text class="cxtn30 cxaa" x="30" y="25">X</text><text class="cxtn30 cxaa" x="65" y="70">Y</text><text class="cxtn30 cxaa" x="75" y="25">Z</text>',ch_lj:'<text class="cxtb100" x="20" y="85">J</text>',gr_major:'<g class="cxc"><line x1="2" y1="2" x2="2" y2="100" /><line x1="2" y1="98" x2="98" y2="98" /></g><g class="cxa"><line cx1="4" y1="18" x2="98" y2="18" /> <line x1="4" y1="38" x2="98" y2="38" /> <line x1="4" y1="58" x2="98" y2="58" /> <line x1="4" y1="78" x2="98" y2="78" /></g>',xar_dctrs2:'<path class="cxtxa" d="M 50 10 A 40 40 0 0 1 90 50 M58,3 L50,10 L58,18 M97,42 L90,50 L82,42" />',ch_oe2:'<text class="cxts150" x="10" y="70">e</text><text class="cxtn40" x="55" y="85">2</text>',dp_binned:'<g class="cxb"><circle cx="3" cy="3" r="2.5" /><circle cx="3" cy="18" r="2.5" /><circle cx="3" cy="33" r="2.5" /><circle cx="3" cy="50" r="2.5" /><circle cx="3" cy="65" r="2.5" /><circle cx="3" cy="80" r="2.5" /><circle cx="3" cy="97" r="2.5" /><circle cx="86.5" cy="3" r="2.5" /><circle cx="83" cy="18" r="2.5" /><circle cx="90" cy="18" r="2.5" /><circle cx="79.5" cy="33" r="2.5" /><circle cx="86.5" cy="33" r="2.5" /><circle cx="93.5" cy="33" r="2.5" /><circle cx="76" cy="50" r="2.5" /><circle cx="83" cy="50" r="2.5" /><circle cx="90" cy="50" r="2.5" /><circle cx="97" cy="50" r="2.5" /><circle cx="79.5" cy="65" r="2.5" /><circle cx="86.5" cy="65" r="2.5" /><circle cx="93.5" cy="65" r="2.5" /><circle cx="83" cy="80" r="2.5" /><circle cx="90" cy="80" r="2.5" /><circle cx="86.5" cy="97" r="2.5" /></g><path class="cxtxa" d="M50,44 L58,52 L50,60 M34,44 L26,52 L34,60 M58,52 L26,52" />',cd_json:'<g class="cxb"><polyline points="89,40 89,30 59,30 59,2 13,2 13,40" /><polyline points="13,90 13,98 89,98 89,90" /><line x1="90" y1="29" x2="59" y2="1" /><rect x="2" y="40" width="96" height="50" /></g><g class="cxaa"><text class="cxtn30" x="10" y="-30" transform="rotate(90)">&#8963;</text><text class="cxtn30" x="-34" y="44" transform="rotate(-90)">&#8963;</text><text class="cxtn30" x="10" y="75">JSON</text></g>',cl_horizontalbg:'<g class="cxcc"><rect x="0" y="0" width="100" height="33" /><rect x="0" y="67" width="100" height="33" /></g>',c_canvasxpress:'<path fill="url(\'#cx-grad1\')" d="M 1.7 54.9 C 1.7 54.9 9.7 23.4 23.2 20.4 C 36.8 17.4 37.2 45.4 58.6 45.2 C 79.8 45 1.7 54.9 1.7 54.9 Z" /><path fill="url(\'#cx-grad2\')" d="M 71.8 54.9 C 71.8 54.9 59.4 26.9 50.8 27.6 C 42.2 28.4 41.8 36.3 24.2 45.1 C 6.6 53.9 1.7 54.9 1.7 54.9 L 71.8 54.9 Z" /><path fill="url(\'#cx-grad3\')" d="M 1.7 54.9 L 98 54.9 C 98 54.9 89.7 31.9 74.2 32.7 C 58.9 33.4 65.4 45.9 1.7 54.9 Z" /><g class="cxblack"><path d="M 12 71.9 C 11.5 74.2 9.4 75.7 7.2 75.5 C 3.5 75.4 1.7 72.9 1.7 69.5 C 1.4 66.6 3.6 63.9 6.6 63.7 C 6.8 63.7 7 63.7 7.1 63.7 C 9.4 63.4 11.5 65 11.8 67.3 L 9.8 67.3 C 9.5 66.1 8.4 65.2 7.1 65.3 C 4.8 65.3 3.9 67.3 3.9 69.4 C 3.9 71.7 4.7 73.6 7.2 73.6 C 8.5 73.7 9.6 72.8 9.8 71.6 L 12 71.9 Z" /><path d="M 19.6 73.2 C 19.6 73.9 19.7 74.7 19.8 75.3 L 17.7 75.3 C 17.6 75 17.6 74.7 17.6 74.4 C 17.1 75.2 16.1 75.6 15.1 75.5 C 13.7 75.7 12.3 74.7 12.1 73.2 C 12.1 73.1 12.1 73 12.1 72.9 C 12.1 70.9 13.8 70 16.2 70 L 17.5 70 L 17.5 69.4 C 17.5 68.8 17.3 68.1 16 68.1 C 14.6 68.1 14.6 68.6 14.4 69.3 L 12.4 69.3 C 12.5 67.8 13.4 66.6 16.1 66.6 C 18.4 66.6 19.7 67.4 19.7 69.4 L 19.6 73.2 Z M 17.5 71.3 L 16.4 71.3 C 14.8 71.3 14.2 71.8 14.2 72.7 C 14.2 73.4 14.6 74 15.4 74.1 C 15.5 74.1 15.5 74.1 15.6 74.1 C 17.3 74.1 17.6 72.9 17.6 71.6 L 17.5 71.3 L 17.5 71.3 Z" /><path d="M 20.7 68.9 C 20.7 68.1 20.7 67.3 20.7 66.6 L 22.8 66.6 C 22.8 67 22.8 67.4 22.8 67.9 C 23.2 66.9 24.3 66.4 25.4 66.5 C 27.1 66.5 28.3 67.6 28.3 69.8 L 28.3 75.2 L 26.2 75.2 L 26.2 70 C 26.2 69 25.8 68.2 24.7 68.2 C 23.5 68.2 22.8 69 22.8 70.6 L 22.8 75.3 L 20.7 75.3 L 20.7 68.9 Z" /><path d="M 30.7 66.7 C 31.6 69.9 32.4 72.4 32.6 73.5 L 32.6 73.5 C 32.9 72.2 33.8 69.6 34.6 66.7 L 36.7 66.7 L 33.5 75.3 L 31.3 75.3 L 28.4 66.7 L 30.7 66.7 Z" /><path d="M 44.2 73.2 C 44.2 73.9 44.2 74.7 44.3 75.3 L 42.3 75.3 C 42.2 75 42.2 74.7 42.2 74.4 C 41.6 75.2 40.6 75.6 39.6 75.5 C 38.2 75.7 36.8 74.7 36.7 73.2 C 36.7 73.1 36.7 73 36.7 72.8 C 36.7 70.8 38.2 69.9 40.7 69.9 L 42.1 69.9 L 42.1 69.4 C 42.1 68.7 41.8 68 40.5 68 C 39.3 68 39.1 68.6 39 69.2 L 36.9 69.2 C 37 67.7 38 66.5 40.6 66.5 C 43.2 66.5 44.2 67.3 44.2 69.4 L 44.2 73.2 Z M 42.2 71.3 L 41 71.3 C 39.5 71.3 38.8 71.8 38.8 72.7 C 38.8 73.4 39.3 74 40 74.1 C 40.1 74.1 40.1 74.1 40.2 74.1 C 42 74.1 42.3 72.9 42.3 71.6 L 42.2 71.3 Z" /><path d="M 46.8 72.8 C 47 73.6 47.8 74.2 48.6 74.1 C 49.7 74.1 50.1 73.7 50.1 73.1 C 50.1 72.5 49.7 72.2 48.3 71.9 C 45.5 71.2 45.1 70.3 45.1 69.2 C 45.1 68 45.9 66.6 48.5 66.6 C 51 66.6 52 67.9 52.1 69.2 L 50 69.2 C 50 68.8 49.6 68.1 48.3 68.1 C 47.1 68.1 47.1 68.6 47.1 69 C 47.1 69.4 47.4 69.7 48.8 70 C 51.7 70.7 52.1 71.7 52.1 72.9 C 52.1 74.2 50.9 75.6 48.4 75.6 C 45.9 75.6 44.8 74.4 44.6 72.8 L 46.8 72.8 Z" /><path d="M 59.2 76 L 56.4 71.8 L 56.4 71.8 L 50.8 79.8 L 48.3 79.8 L 55.1 70.2 L 51.2 64.5 L 53.8 64.5 L 56.5 68.5 L 56.5 68.5 L 60.4 62.8 L 62.8 62.8 L 57.7 69.9 L 61.7 75.9 L 59.2 76 Z" /><path d="M 63.9 74.6 L 63.9 78.7 L 61.8 78.7 L 61.8 68.9 C 61.8 68.2 61.8 67.4 61.8 66.7 L 63.8 66.7 C 63.8 67.1 63.8 67.5 63.8 67.9 C 64.4 66.9 65.3 66.5 66.4 66.6 C 68.4 66.6 70 68.2 70 70.8 C 70 73.9 68.2 75.5 66.1 75.5 C 65.1 75.6 64.4 75.2 63.9 74.6 Z M 67.9 71 C 67.9 69.4 67.2 68.3 65.9 68.3 C 64.7 68.3 63.9 69.3 63.9 71.1 C 63.9 72.9 64.4 74 65.9 74 C 67.5 74 67.9 72.8 67.9 71 L 67.9 71 Z" /><path d="M 70.3 69.2 C 70.3 68.2 70.3 67.4 70.3 66.8 L 72.2 66.8 C 72.2 67.4 72.2 67.9 72.2 68.5 C 72.7 67.3 73.8 66.6 75.1 66.6 L 75.1 68.6 C 73.4 68.6 72.2 69.2 72.2 71.5 L 72.2 75.3 L 70.3 75.3 L 70.3 69.2 Z" /><path d="M 77 71.5 C 77 72.8 77.7 73.9 79 73.9 C 79.8 74 80.5 73.5 80.8 72.8 L 82.8 72.8 C 82.3 74.6 80.7 75.7 78.9 75.5 C 76.6 75.5 74.9 73.8 74.9 71.6 C 74.9 71.4 74.9 71.3 74.9 71.1 C 74.9 68.4 76.2 66.6 79 66.6 C 81.1 66.5 82.9 68 82.9 70.1 C 82.9 70.3 82.9 70.6 82.9 70.8 C 82.9 71 82.9 71.3 82.9 71.5 L 77 71.5 L 77 71.5 Z M 80.7 70.1 C 80.7 69 80.2 68 78.9 68 C 77.5 68 77 68.9 76.8 70.1 L 80.7 70.1 Z" /><path d="M 85.2 72.8 C 85.4 73.6 86.2 74.2 87.1 74.1 C 88.1 74.1 88.5 73.7 88.5 73.1 C 88.5 72.5 88.1 72.2 86.7 71.9 C 84 71.2 83.4 70.3 83.4 69.2 C 83.4 68 84.4 66.6 86.9 66.6 C 89.4 66.6 90.3 67.9 90.4 69.2 L 88.4 69.2 C 88.3 68.8 88 68.1 86.8 68.1 C 85.5 68.1 85.5 68.6 85.5 69 C 85.5 69.4 85.8 69.7 87.4 70 C 90.2 70.7 90.6 71.7 90.6 72.9 C 90.6 74.2 89.5 75.6 87 75.6 C 84.5 75.6 83.3 74.4 83.1 72.8 L 85.2 72.8 Z" /><path d="M 93 72.8 C 93.1 73.6 93.9 74.2 94.8 74.1 C 95.9 74.1 96.2 73.7 96.2 73.1 C 96.2 72.5 95.9 72.2 94.5 71.9 C 91.7 71.2 91.2 70.3 91.2 69.2 C 91.2 68 92.1 66.6 94.7 66.6 C 97.3 66.6 98.2 67.9 98.3 69.2 L 96.2 69.2 C 96.2 68.8 95.9 68.1 94.6 68.1 C 93.3 68.1 93.3 68.6 93.3 69 C 93.3 69.4 93.6 69.7 95.1 70 C 98 70.7 98.4 71.7 98.4 72.9 C 98.4 74.2 97.2 75.6 94.7 75.6 C 92.2 75.6 91 74.4 90.8 72.8 L 93 72.8 Z" /></g>',cd_params:'<g class="cxaa"><text class="cxtn40" x="10" y="20">...</text><text class="cxtn40" x="10" y="40">...,</text><text class="cxtn40" x="10" y="80">{ }</text></g>',lg_g1:'<g class="cxc"><line x1="10" y1="10" x2="10" y2="98" /><line x1="2" y1="90" x2="90" y2="90" /><line x1="2" y1="70" x2="10" y2="70" /><line x1="2" y1="50" x2="10" y2="50" /><line x1="2" y1="30" x2="10" y2="30" /><line x1="25" y1="98" x2="35" y2="98" /><line x1="45" y1="98" x2="55" y2="98" /><line x1="65" y1="98" x2="75" y2="98" /></g><g class="cxcc"><rect x="26" y="20" width="9" height="68"/><rect x="46" y="53" width="9" height="35"/><rect x="66" y="73" width="9" height="15"/></g>',dummy:"",ch_cshift2:'<text class="cxtn50" x="0" y="70">Shift</text>',ch_creturn:'<text class="cxtn80" x="5" y="90">&#8629;</text>',ar_bm:'<path class="cxtxb" d="M38,71 L50,83 L62,71 M50,83 L50,17" />',c_cxplot:'<g class="clp1"><path d="M 33.9 29.8 C 33.9 32.6 31.7 34.9 28.9 34.9 C 26.1 34.9 23.8 32.6 23.8 29.8 C 23.8 27 26.1 24.8 28.9 24.8 C 31.7 24.8 33.9 27 33.9 29.8 Z M 33.9 29.8" /><path d="M 55.1 36.3 C 55.1 39 52.8 41.3 49.9 41.3 C 47.2 41.3 44.9 39 44.9 36.3 C 44.9 33.4 47.2 31.1 49.9 31.1 C 52.8 31.1 55.1 33.4 55.1 36.3 Z M 55.1 36.3" /><path d="M 81.7 79.9 L 49.9 97.8 L 29.5 85.9 L 15.9 78 L 16.1 77.9 C 17.6 76.5 27.7 66.7 33.6 66 C 40.1 65.4 44.1 70.5 44.1 70.5 C 44.1 70.5 51.7 66.7 57.2 68.5 C 62.7 70.1 66.1 75.6 66.1 75.6 C 76.9 73.8 81.7 79.9 81.7 79.9 Z M 81.7 79.9" /></g><path class="clp2" d="M 76.8 24 C 76.8 26.8 74.5 29.2 71.8 29.2 C 68.9 29.2 66.6 26.8 66.6 24 C 66.6 21.3 68.9 18.9 71.8 18.9 C 74.5 18.9 76.8 21.3 76.8 24 Z M 76.8 24" /><path class="clp3" d="M 66.1 75.6 L 29.5 85.9 L 23 82.1 L 16.1 77.9 C 17.6 76.5 27.7 66.7 33.6 66 C 40.1 65.4 44.1 70.5 44.1 70.5 C 44.1 70.5 51.7 66.7 57.2 68.5 C 62.7 70.1 66.1 75.6 66.1 75.6 Z M 66.1 75.6" /><path class="clp4" d="M 44.1 70.5 L 23 82.1 L 16.1 77.9 C 17.6 76.5 27.7 66.7 33.6 66 C 40.1 65.4 44.1 70.5 44.1 70.5 Z M 44.1 70.5" /><g class="clp5"><path d="M 49.9 99.5 C 49.7 99.5 49.5 99.4 49.3 99.3 L 7.6 75.3 C 7.1 75 6.9 74.5 6.9 74.1 L 6.9 26 C 6.9 25.4 7.1 25 7.6 24.8 L 49.3 0.7 C 49.7 0.4 50.3 0.4 50.7 0.7 L 68.1 10.7 C 68.7 11.2 69 12 68.6 12.7 C 68.2 13.3 67.3 13.6 66.6 13.2 L 49.9 3.6 L 9.8 26.7 L 9.8 73.2 L 49.9 96.5 L 90.1 73.2 L 90.1 26.7 L 85.5 24.1 C 84.8 23.7 84.6 22.8 85 22.1 C 85.4 21.5 86.3 21.3 86.9 21.6 L 92.3 24.8 C 92.8 25 93.1 25.4 93.1 26 L 93.1 74.1 C 93.1 74.5 92.8 75 92.3 75.3 L 50.7 99.3 C 50.5 99.4 50.3 99.5 49.9 99.5 Z M 49.9 99.5" /><path d="M 29.6 87.8 C 29 87.8 28.3 87.2 28.2 86.5 C 28.1 85.8 28.6 85.1 29.3 84.9 L 65.5 74.4 C 71.7 72.6 78.2 74.3 82.8 78.7 C 83.1 79.1 83.3 79.5 83.2 80.1 C 83 80.6 82.7 81 82.1 81.1 C 81.7 81.3 81.1 81.1 80.8 80.8 C 76.9 77.1 71.5 75.7 66.4 77.1 L 30.1 87.8 C 30 87.8 29.7 87.8 29.6 87.8 Z M 29.6 87.8" /><path d="M 22.3 83.5 C 21.6 83.5 21 83.1 20.8 82.4 C 20.6 81.7 21 81.1 21.5 80.8 L 45.9 67.7 C 51.3 64.8 58 65.8 62.2 70.1 L 67 74.8 C 67.5 75.4 67.5 76.3 67 76.8 C 66.4 77.3 65.5 77.3 65 76.8 L 60.1 72.1 C 56.7 68.7 51.5 67.9 47.3 70.2 L 22.9 83.3 C 22.7 83.4 22.5 83.5 22.3 83.5 Z M 22.3 83.5" /><path d="M 15.1 79.4 C 14.6 79.4 14 79 13.8 78.4 C 13.6 77.9 13.8 77.2 14.3 76.8 L 27.1 66.7 C 31.1 63.6 36.4 63.5 40.4 66.4 L 44.7 69.3 C 45.1 69.6 45.3 70.1 45.2 70.5 C 45.2 71.1 44.9 71.5 44.4 71.8 C 44 72 43.5 72 43 71.6 L 38.7 68.7 C 35.8 66.6 31.8 66.7 29 69 L 16 79.1 C 15.8 79.3 15.5 79.4 15.1 79.4 Z M 15.1 79.4" /><path d="M 57.2 35.5 C 56.7 31.8 53.7 29 49.9 29 C 47.2 29 44.8 30.6 43.6 33 C 43.3 33.4 43.1 33.9 43 34.3 C 42.9 34.9 42.8 35.3 42.8 35.7 C 42.8 36 42.8 36.1 42.8 36.2 C 42.8 40.2 46 43.4 49.9 43.4 C 54 43.4 57.2 40.2 57.2 36.2 C 57.2 36 57.2 35.7 57.2 35.5 Z M 49.9 40.6 C 47.5 40.6 45.7 38.6 45.7 36.2 C 45.7 36 45.7 35.6 45.8 35.3 C 45.8 35.2 45.8 35.1 45.8 35.1 C 46.3 33.2 48.1 31.9 50 31.9 C 52 31.9 53.7 33.2 54.1 35.2 C 54.1 35.2 54.2 35.3 54.2 35.3 C 54.4 36.6 54.2 37.9 53.3 38.9 C 52.6 39.9 51.3 40.6 49.9 40.6 Z M 49.9 40.6" /><path d="M 78.3 20.9 C 77.8 20 77.3 19.3 76.5 18.6 C 75.2 17.4 73.5 16.9 71.8 16.9 C 67.7 16.9 64.5 20 64.5 24 C 64.5 24.9 64.6 25.8 65 26.5 C 65.3 27.5 65.9 28.3 66.5 29 C 68.6 31.1 71.7 31.8 74.4 30.7 C 77.2 29.6 78.9 27 78.9 24 C 78.9 23 78.7 21.9 78.3 20.9 Z M 71.8 28.4 C 70.2 28.4 68.9 27.6 68.2 26.4 C 68.1 26.3 68.1 26.3 68.1 26.2 C 67.6 25.5 67.4 24.8 67.4 24 C 67.4 22.1 68.6 20.6 70.4 19.9 C 72 19.4 74 19.9 75.1 21.4 C 75.7 22.1 76.1 23 76.1 24 C 76.1 26.4 74.1 28.4 71.8 28.4 Z M 71.8 28.4" /><path d="M 28.2 22.6 C 25.8 22.6 23.5 23.8 22.2 25.9 C 20.8 27.8 20.6 30.4 21.5 32.6 C 21.9 33.5 22.5 34.3 23.1 35 C 24.8 36.6 27.1 37.3 29.4 36.9 C 31.6 36.5 33.6 35.1 34.6 33 C 35 32.2 35.3 31.2 35.3 30.3 C 35.4 30.1 35.4 29.9 35.4 29.8 C 35.4 25.9 32.2 22.6 28.2 22.6 Z M 28.2 34.1 C 26.8 34.1 25.5 33.4 24.6 32.2 C 24.6 32.2 24.6 32.2 24.6 32.2 C 23.5 30.6 23.7 28.4 25 26.8 C 26.3 25.4 28.4 25.1 30.2 26 C 31.9 27 32.8 28.9 32.4 30.8 C 31.9 32.8 30.2 34.1 28.2 34.1 Z M 28.2 34.1" /><path d="M 8.3 43.4 C 7.7 43.4 7.1 43 6.9 42.4 C 6.8 41.8 7 41.1 7.6 40.8 L 22.7 31.9 C 23.3 31.6 23.8 31.6 24.2 31.9 C 24.7 32.1 24.9 32.6 24.9 33.1 C 24.9 33.7 24.7 34.1 24.2 34.4 L 9.1 43.2 C 8.9 43.4 8.5 43.4 8.3 43.4 Z M 8.3 43.4" /><path d="M 44.3 36.3 C 44.2 36.3 44.1 36.2 43.9 36.2 L 33.5 32.7 C 32.7 32.4 32.4 31.6 32.6 30.8 C 32.8 30.1 33.7 29.7 34.5 29.9 L 44.9 33.4 C 45.5 33.7 45.9 34.3 45.8 35.1 C 45.7 35.7 45.1 36.3 44.3 36.3 Z M 44.3 36.3" /><path d="M 76.3 21.9 C 75.7 21.9 75.1 21.6 75 20.9 C 74.7 20.4 75 19.7 75.5 19.3 L 84.5 13.1 C 84.8 12.8 85.5 12.8 85.9 13 C 86.4 13.2 86.7 13.7 86.7 14.2 C 86.8 14.8 86.5 15.2 86.1 15.5 L 77.2 21.7 C 76.8 21.9 76.6 21.9 76.3 21.9 Z M 76.3 21.9" /><path d="M 55.5 36.3 C 54.9 36.3 54.3 35.9 54.2 35.2 C 54 34.6 54.2 34 54.8 33.7 L 66 25.9 C 66.4 25.5 67 25.5 67.5 25.8 C 67.9 26 68.3 26.4 68.3 27 C 68.3 27.4 68.1 27.9 67.6 28.3 L 56.4 36 C 56.1 36.2 55.9 36.3 55.5 36.3 Z M 55.5 36.3" /></g><g><path d="M 31.1 53.6 L 29 53.6 C 28.9 53.6 28.9 53.6 28.7 53.6 C 28.6 53.7 28.6 53.9 28.5 54 C 28.4 54.2 28.3 54.4 28.1 54.6 C 27.9 54.7 27.5 54.8 27.3 54.8 C 26.9 54.8 26.6 54.7 26.3 54.4 C 26 54.1 25.9 53.6 25.9 53.2 C 25.9 52.8 25.9 52.4 25.9 52 C 25.9 51.6 26 51.1 26.3 50.7 C 26.6 50.5 26.9 50.2 27.3 50.3 C 27.5 50.2 27.9 50.3 28.1 50.5 C 28.3 50.7 28.4 50.9 28.5 51.2 C 28.6 51.3 28.6 51.4 28.7 51.4 C 28.9 51.6 28.9 51.6 29 51.6 L 31.1 51.6 C 31.2 51.6 31.3 51.4 31.4 51.4 C 31.4 51.3 31.5 51.2 31.5 51.1 C 31.5 50.9 31.4 50.6 31.2 50.2 C 31.1 49.9 30.7 49.6 30.5 49.4 C 30.1 48.9 29.6 48.7 29.2 48.5 C 28.5 48.3 27.9 48.1 27.2 48.1 C 26.6 48.1 25.8 48.4 25.1 48.7 C 24.6 48.9 24 49.4 23.7 49.9 C 23.3 50.6 23 51.2 23 51.9 C 23 52.1 23 52.3 23 52.5 C 23 52.9 23 53.1 23 53.2 C 23 54 23.3 54.6 23.7 55.2 C 24 55.7 24.6 56.2 25.1 56.5 C 25.8 56.8 26.6 56.9 27.2 56.9 C 27.8 56.9 28.3 56.8 28.9 56.7 C 29.3 56.6 29.7 56.4 30.1 56.2 C 30.4 55.9 30.6 55.7 30.8 55.4 C 31.1 55.2 31.2 55 31.3 54.6 C 31.4 54.4 31.5 54.2 31.5 54 C 31.5 53.9 31.5 53.7 31.4 53.7 C 31.3 53.6 31.2 53.6 31.1 53.6 Z M 31.1 53.6" /><path d="M 41.8 56.3 C 41.8 56.3 41.8 56.2 41.7 56.2 L 39 52.4 L 41.5 49 C 41.5 48.9 41.6 48.9 41.6 48.8 C 41.6 48.8 41.6 48.8 41.6 48.7 C 41.6 48.5 41.5 48.4 41.3 48.4 L 39.3 48.4 C 39.2 48.4 39.1 48.4 39.1 48.5 C 39 48.6 39 48.6 38.8 48.7 L 37.4 50.7 L 35.9 48.7 C 35.9 48.6 35.8 48.5 35.7 48.5 C 35.7 48.4 35.6 48.4 35.4 48.4 L 33.5 48.4 C 33.4 48.4 33.2 48.4 33.1 48.5 C 33.1 48.6 33 48.6 33 48.7 C 33 48.8 33 48.8 33.1 48.8 C 33.1 48.9 33.1 48.9 33.1 49 L 35.6 52.4 L 32.9 56.2 C 32.9 56.2 32.8 56.3 32.8 56.3 C 32.8 56.4 32.8 56.4 32.8 56.4 C 32.8 56.5 32.8 56.6 32.9 56.7 C 33 56.7 33.1 56.8 33.2 56.8 L 35.2 56.8 C 35.3 56.8 35.4 56.7 35.6 56.7 C 35.6 56.6 35.7 56.6 35.7 56.5 L 37.3 54.3 L 39 56.5 C 39 56.6 39.1 56.6 39.1 56.7 C 39.2 56.7 39.3 56.8 39.4 56.8 L 41.5 56.8 C 41.6 56.8 41.7 56.7 41.7 56.7 C 41.8 56.6 41.8 56.5 41.8 56.4 C 41.8 56.4 41.8 56.3 41.8 56.3 Z M 41.8 56.3" /><path d="M 52.4 52 C 52.4 51.4 52.4 50.9 52.1 50.3 C 52 49.9 51.8 49.6 51.5 49.2 C 51.1 48.9 50.8 48.6 50.4 48.5 C 49.9 48.3 49.5 48.1 48.9 48.3 C 48.4 48.1 48 48.3 47.5 48.6 C 47.1 48.7 46.8 49 46.4 49.4 L 46.4 48.8 C 46.4 48.7 46.4 48.6 46.3 48.5 C 46.3 48.4 46.2 48.4 46.1 48.4 L 44.2 48.4 C 44.1 48.4 44 48.4 43.9 48.5 C 43.9 48.6 43.8 48.7 43.8 48.8 L 43.8 59.5 C 43.8 59.6 43.9 59.7 43.9 59.7 C 44 59.8 44.1 59.9 44.2 59.8 L 46.2 59.8 C 46.3 59.9 46.4 59.8 46.5 59.7 C 46.5 59.7 46.6 59.6 46.6 59.5 L 46.6 55.8 C 46.9 56.2 47.2 56.5 47.6 56.6 C 48.1 56.8 48.5 56.9 48.9 56.9 C 49.5 56.9 49.9 56.8 50.4 56.7 C 50.8 56.5 51.1 56.3 51.5 55.9 C 51.8 55.6 52 55.2 52.1 54.7 C 52.4 54.2 52.4 53.7 52.4 53.2 C 52.5 53 52.5 52.8 52.5 52.5 C 52.5 52.4 52.5 52.2 52.4 52 Z M 49.6 53.1 C 49.5 53.3 49.5 53.6 49.4 54 C 49.3 54.2 49.2 54.4 48.9 54.5 C 48.7 54.7 48.4 54.7 48.1 54.7 C 47.9 54.7 47.5 54.7 47.3 54.5 C 47.1 54.4 46.9 54.2 46.8 54 C 46.6 53.7 46.6 53.5 46.6 53.2 C 46.6 53 46.6 52.9 46.6 52.6 C 46.6 52.4 46.6 52.2 46.6 52 C 46.6 51.8 46.6 51.4 46.8 51.2 C 46.9 51 47.1 50.8 47.3 50.6 C 47.7 50.3 48.4 50.3 48.9 50.6 C 49.2 50.8 49.3 51 49.4 51.2 C 49.5 51.6 49.5 51.8 49.6 52.1 C 49.6 52.4 49.6 52.8 49.6 53.1 Z M 49.6 53.1" /><path d="M 57.4 45.4 C 57.4 45.3 57.3 45.3 57.2 45.3 L 55.2 45.3 C 55.1 45.3 55 45.3 55 45.4 C 54.9 45.5 54.9 45.6 54.9 45.7 L 54.9 56.4 C 54.9 56.5 54.9 56.6 55 56.6 C 55 56.7 55.1 56.8 55.2 56.8 L 57.2 56.8 C 57.3 56.8 57.4 56.7 57.4 56.6 C 57.5 56.6 57.5 56.5 57.5 56.4 L 57.5 45.7 C 57.5 45.6 57.5 45.5 57.4 45.4 Z M 57.4 45.4" /><path d="M 68.5 51.9 C 68.5 51.1 68.3 50.5 67.9 49.9 C 67.6 49.4 67.1 48.9 66.5 48.7 C 65.1 48 63.4 48 62 48.7 C 61.4 48.9 60.9 49.4 60.6 49.9 C 60.1 50.5 60 51.1 59.9 51.9 C 59.9 52.1 59.9 52.3 59.9 52.5 C 59.9 52.9 59.9 53.1 59.9 53.3 C 60 54 60.1 54.6 60.6 55.3 C 60.9 55.8 61.4 56.3 61.9 56.5 C 63.4 57 65.1 57 66.5 56.5 C 67.2 56.3 67.6 55.8 67.9 55.3 C 68.3 54.6 68.5 54 68.5 53.3 C 68.5 53.1 68.5 52.9 68.5 52.5 C 68.5 52.3 68.5 52.1 68.5 51.9 Z M 65.6 53.2 C 65.6 53.6 65.5 54.2 65.3 54.5 C 65 54.8 64.6 55 64.2 55 C 63.9 55 63.4 54.8 63.2 54.5 C 62.9 54.2 62.8 53.6 62.8 53.2 C 62.8 53.1 62.8 52.9 62.8 52.5 C 62.8 52.3 62.8 52.1 62.8 51.9 C 62.8 51.4 62.9 51 63.2 50.7 C 63.4 50.3 63.9 50.2 64.2 50.2 C 64.6 50.2 65 50.3 65.3 50.7 C 65.5 51 65.6 51.4 65.6 51.9 C 65.7 52.3 65.7 52.8 65.6 53.2 Z M 65.6 53.2" /><path d="M 76.9 54.6 C 76.9 54.6 76.8 54.5 76.7 54.5 L 75.4 54.5 C 75.2 54.6 74.9 54.4 74.7 54.2 C 74.6 54 74.5 53.6 74.5 53.3 L 74.5 50.5 L 76.6 50.5 C 76.6 50.5 76.7 50.5 76.8 50.3 C 76.9 50.3 76.9 50.2 76.9 50.1 L 76.9 48.8 C 76.9 48.7 76.9 48.6 76.8 48.5 C 76.7 48.4 76.6 48.4 76.6 48.4 L 74.5 48.4 L 74.5 45.7 C 74.5 45.6 74.5 45.5 74.4 45.4 C 74.3 45.3 74.2 45.3 74.1 45.3 L 72.2 45.3 C 72.1 45.3 72 45.3 72 45.4 C 71.9 45.5 71.9 45.6 71.9 45.7 L 71.9 48.4 L 70.6 48.4 C 70.5 48.4 70.4 48.4 70.2 48.5 C 70.2 48.6 70.1 48.7 70.1 48.8 L 70.1 50.1 C 70.1 50.2 70.2 50.3 70.2 50.3 C 70.4 50.5 70.5 50.5 70.6 50.5 L 71.9 50.5 L 71.9 53.6 C 71.8 54.2 72 54.8 72.2 55.4 C 72.6 55.8 72.9 56.3 73.4 56.4 C 74 56.7 74.6 56.8 75.2 56.8 L 76.7 56.8 C 76.8 56.8 76.9 56.7 76.9 56.6 C 77.1 56.6 77.1 56.5 77.1 56.4 L 77.1 55 C 77.2 54.8 77.1 54.7 76.9 54.6 Z M 76.9 54.6" /></g>',wp_list:'<g class="cxa"><line x1="22.4" y1="15" x2="100" y2="15.2" /><line x1="22.4" y1="84.5" x2="100" y2="84.6" /></g><g class="cxaa"><rect width="9.9" height="9.5" y="10.5" /><rect y="80" width="9.9" height="9.5" /></g><g class="cxb"><line x1="22.4" y1="49.8" x2="100" y2="50" /></g><g class="cxbb"><rect y="45.2" width="9.9" height="9.5" /></g>',a_moveback:'<g class="cxb"><rect x="2" y="2" width="30" height="30" /><rect x="68" y="68" width="30" height="30" /></g><g class="cxa"><polyline points="32,17 82,17 82,67" /><polyline points="17,32 17,82 67,82" /></g>',bx_wishkerss:'<g class="cxb"><rect x="35" y="30" width="30" height="40" /><line x1="35" y1="51" x2="65" y2="51" /></g><g class="cxa"><line x1="50" y1="2" x2="50" y2="30" /><line x1="50" y1="98" x2="50" y2="70" /></g>',c_rc:'<path fill="url(\'#rc-grad\')" d="M50,12.7c-27.6,0-50,16.1-50,36.1s22.4,36.1,50,36.1s50-16.1,50-36.1S77.6,12.7,50,12.7z M56.3,73.2c-20.5,0-37.2-11-37.2-24.3s16.7-24.3,37.2-24.3s37.2,10.9,37.2,24.3S76.9,73.2,56.3,73.2z"/><path class="clr" d="M76.8,66.5c6.9-1.7,11.5-9.9,10.1-18.5c-1.2-7.3-6.5-12.8-12.6-12.7H41.1v51.9h14.7V66.8h6.4L73,87.3h14.8L76.8,66.5z M68.2,57.2H55.3V45h12.9c3,0,5.4,2.4,5.4,5.4c0,0,0,0.1,0,0.1c0.5,3-1.5,5.9-4.5,6.6C68.8,57.2,68.5,57.2,68.2,57.2z"/>',cd_doc:'<g class="cxb"><polyline points="78,42 78,30 48,30 48,2 2,2 2,98 78,98 78,85"/><line x1="79" y1="29" x2="48" y2="1" /></g><g class="cxaa"><text class="cxtn50" x="42" y="-60" transform="rotate(90)">&#8963;</text><text class="cxtn50" x="-82" y="90" transform="rotate(-90)">&#8963;</text></g>',p_cg2contourfilledlines:'<g class="cxa"><path d="M 56.1 92.7 L 21.1 92.7 C 17.4 92.8 14.3 89.8 14.3 86 L 14.3 82.1 C 14.3 80.4 13.1 79.1 11.4 79.1 L 11.4 79.1 C 9.8 79.1 8.4 77.7 8.4 76.2 L 8.4 29.7 L 14.3 29.7 L 14.3 22.2 L 20.3 22.2 L 20.3 18.4 L 25 18.4 L 25 13.3 L 29.9 13.3 L 29.9 8.7 L 33.6 8.7 L 33.6 5.8 L 37.8 5.8 L 37.8 2.8 L 50 2.8 L 50 6.6 L 62.5 6.6 L 62.5 10.9 L 69.1 10.9 L 69.1 15.7 L 74 15.7 L 74 20 L 77.5 20 L 77.5 27 L 82.5 27 L 82.5 34.9 L 86.2 34.9 L 86.2 50.9 L 90.8 50.9 L 90.8 69.8 L 86.5 69.8 L 86.5 80.1 L 82.5 80.1 L 82.5 90.6 C 82.5 91.8 81.5 92.7 80.2 92.7 L 80.2 92.7 C 78.9 92.7 77.9 93.8 77.9 95 L 77.9 95 C 77.9 96.3 76.9 97.3 75.6 97.3 L 60.8 97.3 C 59.6 97.3 58.6 96.3 58.6 95 L 58.6 95 C 58.6 93.7 57.5 92.6 56.1 92.7 Z"/></g><g class="cxac"><polygon points="63 78.5 69.8 78.5 69.8 70.7 78.5 70.7 78.5 59.1 74 59.1 74 50.6 69.5 50.6 69.5 39.4 66.7 39.4 66.7 31.7 62.5 31.7 62.5 27.5 54.2 27.5 54.2 22.9 33.9 22.9 33.9 27.4 30.1 27.3 30.1 29.8 26.2 29.8 26.2 34.7 22.8 34.7 22.8 75.1 25.4 75.1 25.4 79.2 29.5 79.2 29.5 83.1 63 83.1 63 78.5"/></g><g class="cxab"><polygon points="38.4 42.7 38.4 38.9 49.9 38.9 49.9 43.2 53.7 43.2 53.7 71.1 38.4 71.1 38.4 63.2 34 63.2 34 42.7 38.4 42.7"/></g><g class="cxa"><polyline points="77.9 2.9 85.9 2.9 85.9 11.4 90 11.4 90 15 93.9 15 93.9 22.9 98.2 22.9 98.2 31.2"/><polyline points="21.9 2.9 14 2.9 14 7.2 10.1 7.2 10.1 15.4 1.8 15.4"/></g>',g_donnut:'<g class="cxbc"><path d="M 50 2.5 C 36.8 2.4 24.2 8 15.2 17.7 L 32.5 34.3 C 41.3 24.5 56.4 23.8 66 32.8 L 81.5 14.4 C 72.8 6.7 61.6 2.5 50 2.5 Z"/><path d="M 50 97.6 C 57.2 97.6 64.2 95.9 70.6 92.8 L 60.2 71.2 C 44.6 78.8 26.4 67.4 26.4 50 L 2.5 50 C 2.5 76.3 23.8 97.6 50 97.6 Z"/></g><g class="cxb"><line x1="26.4" y1="50" x2="2.5" y2="50"/><line x1="14.9" y1="17.9" x2="32.6" y2="34.3"/><line x1="66" y1="32.6" x2="82.1" y2="14.9"/><line x1="59.8" y1="71.4" x2="70.1" y2="93.2"/></g><g class="cxa"><path d="M 50 2.5 C 13.4 2.5 -9.5 42.1 8.8 73.8 C 27.1 105.5 72.9 105.5 91.2 73.8 C 95.4 66.6 97.6 58.4 97.6 50 C 97.6 23.8 76.3 2.5 50 2.5 Z M 50 73.6 C 31.9 73.6 20.5 54 29.6 38.2 C 38.7 22.5 61.4 22.5 70.4 38.2 C 72.5 41.8 73.6 45.9 73.6 50 C 73.6 63.1 63 73.6 50 73.6 Z"/></g>',m_zlasso:'<g class="cxa"><path d="M12.4,60c-4.7-2.8-8-7.3-9.4-12.6C-0.6,31.8,17.6,14.3,43.5,8.3S93.4,10.2,97,25.8c3.6,15.6-14.6,33.1-40.5,39.2c-1.1,0.3-2.3,0.5-3.4,0.7"/><path d="M29.5,93.8c0,0,14.4-21.7,0-33.7S5.1,69.9,19.2,73.8c7.6,2.1,46.6-2.9,30.7-19c-6.8-7-20.4,5.3-20.4,5.3"/></g>',v_first:'<circle class="cxb" cx="50" cy="50" r="48" /><text class="cxtn60" x="25" y="73">&#9664;</text><rect x="25" y="25" width="18" height="50" />',at_shd:'<polygon fill="url(#s-grad)" points="94.5,64.1 66.7,50 50,58.5 33.3,50 5.5,64.1 50,86.7"/><polygon class="cxa" points="94.5,35.9 50,13.3 5.5,35.9 50,58.5 "/>',g_layout:'<g class="cxa"><rect x="2.1" y="2.6" width="25.3" height="25.3"/><rect x="2.1" y="37.4" width="25.3" height="25.3"/><rect x="2.1" y="72.1" width="25.3" height="25.3"/><rect x="72.6" y="2.6" width="25.3" height="25.3"/><rect x="72.6" y="37.4" width="25.3" height="25.3"/><rect x="72.6" y="72.1" width="25.3" height="25.3"/><rect x="37.4" y="2.6" width="25.3" height="25.3"/><rect x="37.4" y="37.4" width="25.3" height="25.3"/><rect x="37.4" y="72.1" width="25.3" height="25.3"/></g><g class="cxb"><line x1="90" y1="14.3" x2="90" y2="10"/><line x1="46.3" y1="13.3" x2="46.3" y2="9.1"/><line x1="9.9" y1="13.3" x2="9.9" y2="9.1"/><line x1="14.8" y1="47.6" x2="14.8" y2="43.3"/><line x1="9.9" y1="81.5" x2="9.9" y2="77.3"/><line x1="18" y1="18.5" x2="18" y2="14.3"/><line x1="19.5" y1="52.5" x2="19.5" y2="56.7"/><line x1="19.5" y1="82.6" x2="19.5" y2="86.9"/><line x1="45" y1="82.6" x2="45" y2="86.9"/><line x1="55.3" y1="82.6" x2="55.3" y2="86.9"/><line x1="53.4" y1="21.1" x2="53.4" y2="16.9"/><line x1="53.4" y1="47.6" x2="53.4" y2="43.3"/><line x1="47.9" y1="56.7" x2="47.9" y2="52.5"/><line x1="81.6" y1="47.6" x2="81.6" y2="43.3"/><line x1="81.6" y1="86.9" x2="81.6" y2="82.6"/><line x1="90.6" y1="57.7" x2="90.6" y2="53.5"/><line x1="90.6" y1="81.5" x2="90.6" y2="77.3"/><line x1="81.6" y1="21.1" x2="81.6" y2="16.9"/></g>',c_codepen:'<g class="cxb"><polyline points="96.1 26 80.6 50 96.1 73.8" /><line x1="50" y1="2" x2="50" y2="35.8" /><line x1="80.6" y1="50" x2="64.2" y2="50" /><polyline points="3.9 26 19.4 50 3.9 73.8" /><line x1="19.4" y1="50" x2="35.9" y2="50" /><line x1="50" y1="98" x2="50" y2="64.1" /></g><g class="cxa"><polygon points="96.1 73.8 96.1 26 50 2 3.9 26 3.9 73.8 50 98 96.1 73.8" /><rect x="35.9" y="35.8" width="28.3" height="28.3" /></g>',ch_omean:'<rect x="20" y="2" width="68" height="6" /><text class="cxtn100" x="20" y="90">X</text>',ch_oiter:'<text class="cxts150" x="20" y="85">i</text>',ar_dctrs:'<text class="cxtn60" x="51" y="-22" transform="rotate(45)">&#10554;</text><text class="cxtn60" x="-90" y="-22" transform="rotate(45) scale(-1,1)">&#10554;</text>',ch_ly:'<text class="cxtb100" x="15" y="85">Y</text>',dt_range:'<g class="cxaa"><rect x="8" y="46" width="10" height="9" /><rect x="88" y="6" width="10" height="49" /></g><g class="cxb"><line x1="2" y1="60" x2="100" y2="60" /><line x1="2" y1="2" x2="2" y2="60" /></g><g class="cxcc"><rect x="28" y="36" width="10" height="19" /><rect x="48" y="26" width="10" height="29" /><rect x="68" y="16" width="10" height="39" /></g><path class="cxtxa" d="M71,74 L83,86 L71,98 M29,74 L17,86 L29,98 M83,86 L17,86" />',p_cg2fitcdf:'<g class="cxa"><path d="M15,90 C80,75 30,25 95,10" /></g>',wp_fileformat:'<g class="cxa"><path d="M 15 52.7 L 15 2.2 L 69.4 2.2 L 90.3 23.1 L 90.3 97.8 L 15 97.8 L 15 81.6"/><polyline points="69.4 2.2 69.4 22.8 90.4 22.8"/></g><g class="cxb"><rect x="9.6" y="52.7" width="51.3" height="29"/></g>',ar_lm:'<path class="cxtxb" d="M29,38 L17,50 L29,62 M83,50 L17,50" />',p_cg1axesvertical:'<g class="cxb"><line x1="10" y1="2" x2="10" y2="98" /><line x1="2" y1="10" x2="10" y2="10" /><line x1="2" y1="30" x2="10" y2="30" /><line x1="2" y1="50" x2="10" y2="50" /><line x1="2" y1="70" x2="10" y2="70" /><line x1="2" y1="90" x2="98" y2="90" /><rect x="23" y="98" width="10" height="2"/><rect x="51" y="98" width="10" height="2"/><rect x="79" y="98" width="10" height="2"/></g>',ch_cesc:'<text class="cxtb100" x="5" y="85">&#9099;</text>',ch_lk:'<text class="cxtb100" x="15" y="85">K</text>',g_bubble:'<g class="cxa"><circle cx="50" cy="50" r="47.4"/><circle cx="63.6" cy="65.7" r="10.7"/><circle cx="36.4" cy="36" r="11.3"/><circle cx="35.6" cy="82.2" r="5.8"/><circle cx="82" cy="41.6" r="4.6"/></g><g class="cxb"><circle cx="37.2" cy="35.3" r="20"/><circle cx="63.6" cy="65.7" r="20"/><circle cx="67.8" cy="25.7" r="10.7"/><circle cx="21" cy="61.9" r="10.7"/></g>',o_ghsmps:'<g class="cxc"><rect y="15" x="58" height="70" width="40" /><line y1="15" x1="78" y2="85" x2="78" /><line y1="50" x1="98" y2="50" x2="58" /><rect y="95" x="94" width="2" height="4" /><rect y="95" x="74" width="2" height="4" /><rect y="20" x="45" width="2" height="20" /><rect y="60" x="45" width="2" height="20" /></g><g class="cxa"><rect y="15" x="4" width="28" height="70" /><line y1="15" x1="18" y2="85" x2="18" /><line y1="50" x1="32" y2="50" x2="4" /><rect y="2" x="25" width="2" height="2" /><rect y="2" x="11" width="2" height="2" /></g>',c_rrcode:'<g class="cxb"><path d="M 50 15.2 C 23.4 15.2 1.8 30.7 1.8 50 C 1.8 69.2 23.4 84.8 50 84.8 C 76.6 84.8 98.1 69.2 98.1 50 C 98.1 30.7 76.6 15.2 50 15.2 Z M 56 73.5 C 36.3 73.5 20.2 62.9 20.2 50.1 C 20.2 37.3 36.3 26.7 56 26.7 C 75.8 26.7 91.9 37.2 91.9 50.1 C 91.9 63 75.9 73.5 56 73.5 Z"/></g><g class="cxaw"><path d="M 80.6 73.4 C 85.8 72.1 89.2 65.9 88.1 59.5 C 87.2 54 83.2 50 78.6 50 L 53.8 50 L 53.8 89 L 64.8 89 L 64.8 73.7 L 69.6 73.7 L 77.8 89 L 88.8 89 L 80.6 73.4 Z M 74 66.4 L 64.3 66.4 L 64.3 57.3 L 74 57.3 C 76.2 57.3 78 59.1 78 61.3 C 78 61.4 78 61.4 78 61.5 C 78.4 63.8 76.9 66 74.6 66.5 C 74.5 66.5 74.3 66.5 74 66.4 Z"/><path d="M 38.7 34.4 C 43.9 33.1 47.3 26.9 46.2 20.5 C 45.3 15 41.3 11 36.7 11 L 11.9 11 L 11.9 50 L 22.9 50 L 22.9 34.7 L 27.7 34.7 L 35.9 50 L 46.9 50 L 38.7 34.4 Z M 32.1 27.4 L 22.4 27.4 L 22.4 18.3 L 32.1 18.3 C 34.3 18.3 36.1 20.1 36.1 22.3 C 36.1 22.4 36.1 22.4 36.1 22.5 C 36.5 24.8 35 27 32.7 27.5 C 32.6 27.5 32.4 27.5 32.1 27.4 Z"/></g><g class="cxaa"><text class="cxtn50" x="2" y="-60" transform="rotate(90)">&#8963;</text><text class="cxtn50" x="-42" y="90" transform="rotate(-90)">&#8963;</text></g>',o_g1:'<g class="cxc"><line x1="2" y1="40" x2="98" y2="40" /><line x1="2" y1="24" x2="8" y2="24" /><line x1="2" y1="12" x2="8" y2="12" /><line x1="10" y1="2" x2="10" y2="40" /><line x1="90" y1="24" x2="98" y2="24" /><line x1="90" y1="12" x2="98" y2="12" /><line x1="90" y1="2" x2="90" y2="40" /><rect x="20" y="55" width="20" height="2" /><rect x="60" y="55" width="20" height="2" /></g><g class="cxcc"><rect x="25" y="35" width="15" height="10" /><rect x="60" y="10" width="15" height="30" /></g><g class="cxa"><rect x="15" y="68" width="70" height="28" /><line x1="15" y1="82" x2="85" y2="82" /><line x1="50" y1="68" x2="50" y2="96" /><rect x="95" y="75" width="2" height="2" /><rect x="95" y="89" width="2" height="2" /></g>',p_cg2datadenhist:'<g class="cxb"><line x1="55" y1="6" x2="55" y2="88" /><line x1="47" y1="21" x2="47" y2="88" /><line x1="39" y1="58" x2="39" y2="88" /><line x1="31" y1="76" x2="31" y2="88" /><line x1="63" y1="21" x2="63" y2="88" /><line x1="71" y1="58" x2="71" y2="88" /><line x1="78" y1="76" x2="78" y2="88" /></g>',c_solarized:'<circle class="cl40" cx="50" cy="50" r="24.6"/><path class="cl41" d="M74.6,50c0-13.6-11-24.6-24.6-24.6l0,0v49.2C63.5,74.6,74.5,63.6,74.6,50C74.6,50,74.6,50,74.6,50z"/><polygon class="cl40" points="50,0 45.9,20.5 54.1,20.5 "/><polygon class="cl40" points="50,100 45.9,79.5 54.1,79.5\t"/><polygon class="cl41" points="100,50 79.5,45.9 79.5,54.1\t"/><polygon class="cl41" points="0,50 20.5,45.9 20.5,54.1 "/><polygon class="cl40" points="93.5,25.4 73.6,31.9 77.7,39.1 "/><polygon class="cl40" points="6.5,74.6 22.3,60.9 26.4,68.1 "/><polygon class="cl41" points="74.6,93.5 68.1,73.6 60.9,77.7 "/><polygon class="cl41" points="25.4,6.5 39.1,22.3 31.9,26.4 "/><polygon class="cl41" points="75.3,6.9 61.4,22.5 68.5,26.7 "/><polygon class="cl41" points="24.7,93.1 31.5,73.3 38.6,77.5 "/><polygon class="cl40" points="93.1,75.3 77.5,61.4 73.3,68.5 "/><polygon class="cl0" points="6.9,24.7 26.7,31.5 22.5,38.6 "/>',dps_tooutside:'<g class="cxa"><polyline points="65,30 65,2 2,2 2,98 65,98 65,70" /></g><path class="cxtxb" d="M71,38 L83,50 L71,62 M83,50 L17,50" />'},classes:{cxtxb:"{fill:none;stroke:black;stroke-width:4px;}",cxtxa:"{fill:none;stroke:blue;stroke-width:4px;}",cl26:"{fill:#0365C0;}",cxts100:"{font: italic 100px Brush Script MT;}",cxaa:"{stroke:blue;fill:blue;}",clt20:"{fill:#FEA725;}",cxblack:"{stroke:black;fill:black;stroke-width:0.5px;}",cxtn80:"{font: 80px sans-serif;}",cxbw:"{stroke-miterlimit:10;stroke-width:3px;stroke:#292929;fill:white}",clt11:"{fill:#E11640;}",cxtn100:"{font: 100px sans-serif;}",clt0:"{fill:#FFFFFF;}",cl4:"{fill:#EB3323;}",cl36:"{fill:#FFAB00;}",cl41:"{fill:#F6EA38;}",cl16:"{fill:#FE00FE;}",cxtn180:"{font: 180px sans-serif;}",clt16:"{fill:#FE9D0C;}",clt4:"{fill:#4FC2F6;}",clt5:"{fill:#29B6F5;}",cl6:"{fill:#7B3691;}",clt13:"{fill:#FE897F;}",cxb:"{stroke-miterlimit:10;stroke-width:4px;fill:none;stroke:#292929;}",cxab:"{stroke:blue;fill:#292929;}",cxti85:"{font: italic 85px Georgia;}",clp2:"{fill:#0465c0;}",cxtn20:"{font: 20px sans-serif;}",cl56:"{fill:#E8762D;}",cxcc:"{stroke:#999999;fill:#999999;}",clp3:"{fill:#f85756;}",cl50:"{fill:#7199A6;}",cxbb:"{stroke:#292929;fill:#292929;}",cl15:"{fill:#00FEFE;}",cxa:" {stroke-miterlimit:10;stroke-width:4px;fill:none;stroke:blue;}",cl14:"{fill:#00FE00;}",cl35:"{fill:#FDEE01;}",cl34:"{fill:#0DDA83;}",cl54:"{fill:#1F457E;}",cl55:"{fill:#C72037;}",cl10:"{fill:#64AD45;}",cxtn90:"{font: 90px sans-serif;}",cl30:"{fill:#000040;}",clp1:"{fill:#00a0d2;}",clt6:"{fill:#B12F83;}",cl7:"{fill:#462D8F;}",cxtb100:"{font: bold 100px sans-serif;}",cxaw:"{stroke-miterlimit:10;stroke-width:3px;stroke:blue;fill:white;}",cl9:"{fill:#0691CC;}",clt10:"{fill:#AA47BC;}",cl24:"{fill:#A8D6FF;}",cl25:"{fill:#51A7F9;}",clt17:"{fill:#FEDFB2;}",cxorange:"{stroke-width:3px;stroke:#E26E38;fill:#E26E38}",cl0:"{fill:#F6EA38;}",cxtn140:"{font: 140px sans-serif;}",cxtn40:"{font: 40px sans-serif;}",cxwhite:" {stroke:white;stroke-width:2px;}",cxtn160:"{font: 160px sans-serif;}",cl20:"{fill:#F2F2F2;}",clt15:"{fill:#F91642;}",cl51:"{fill:#5C6692;}",clt2:"{fill:#B3E5FC;}",clt3:"{fill:#80D3FA;}",clp5:"{fill:#002351;}",cl5:"{fill:#AC1E47;}",clp4:"{fill:#ffc471;}",cl3:"{fill:#EF5522;}",clt18:"{fill:#FECB7F;}",cl11:"{fill:#CCDC38;}",cl31:"{fill:#0000CB;}",cl1:"{fill:#F7BA15;}",cxtn10:"{font: 10px sans-serif;}",cxac:"{stroke:blue;fill:#999999;}",cl19:"{fill:#00608F;}",cxts200:"{font: italic 200px Brush Script MT;}",cxtn60:"{font: 60px sans-serif;}",clt8:"{fill:#CE93D7;}",cxnc:"{stroke:none;fill:none;}",cxtn30:"{font: 30px sans-serif;}",cxtxr:"{fill:none;stroke:red;stroke-width:4px;}",cxts60:"{font: italic 60px Brush Script MT;}",cl2:"{fill:#F7981C;}",clt12:"{fill:#FEC8C4;}",cl21:"{fill:#FFFFFF;}",cxblue:"{stroke:blue;stroke-width:5px;}",clt7:"{fill:#E0BDE7;}",cxts150:"{font: italic 150px Brush Script MT;}",cl37:"{fill:#E24520;}",cl8:"{fill:#3D5CA9;}",cl17:"{fill:#FEFE00;}",cl58:"{fill:#FFFFFF;}",cxtn120:"{font: 120px sans-serif;}",clt9:"{fill:#BA68C8;}",cxbc:"{stroke:#292929;fill:#999999;}",clt19:"{fill:#FEB64C;}",cl23:"{fill:#000643;}",cxc:"{stroke-miterlimit:10;stroke-width:4px;fill:none;stroke:#999999;}",cl18:"{fill:#FFF;}",cl22:"{fill:#424242;}",cl57:"{fill:#EC1E24;}",clt1:"{fill:#269BCF;}",cl52:"{fill:#5B879B;}",cl27:"{fill:#164F86;}",clr:"{fill:#2369BE;}",cl53:"{fill:#EB9129;}",cxww:"{stroke:white;fill:white;}",cxtn70:"{font: 70px sans-serif;}",cxrr:"{stroke:red;fill:red;}",cl40:"{fill:#F7BA15;}",cl28:"{fill:#002452;}",cxti100:"{font: italic 100px Georgia;}",cl13:"{fill:#0000FE;}",cxts70:"{font: italic 70px Brush Script MT;}",cl12:"{fill:#FE0000;}",cxtn50:"{font: 50px sans-serif;}",cl32:"{fill:#0080FF;}",clt14:"{fill:#FE5252;}",cl33:"{fill:#7FFE1A;}"},gradients:{c_rrc:'<linearGradient id="rr-grad" gradientUnits="userSpaceOnUse" x1="0" y1="53.205" x2="100" y2="53.205" gradientTransform="matrix(1 0 0 -1 0 102)"><stop  offset="0" style="stop-color:#BDBFC2"/><stop  offset="1" style="stop-color:#828287"/></linearGradient>',b_grhr:'<linearGradient id="hr-grad"><stop offset="5%" stop-color="white" /><stop offset="95%" stop-color="black" /></linearGradient>',b_grvt:'<linearGradient id="vt-grad" gradientTransform="rotate(90)"><stop offset="5%" stop-color="black" /><stop offset="95%" stop-color="white" /></linearGradient>',b_grc:'<radialGradient id="rad-grad"><stop offset="5%" stop-color="white" /><stop offset="95%" stop-color="black" /></radialGradient>',b_gsori:'<linearGradient id="go-gradv" gradientTransform="rotate(90)"><stop offset="5%" stop-color="black" /><stop offset="95%" stop-color="white" /></linearGradient><linearGradient id="go-gradh"><stop offset="5%"  stop-color="black" /><stop offset="95%" stop-color="white" /></linearGradient>',at_shd:'<linearGradient id="s-grad" gradientUnits="userSpaceOnUse" x1="50" y1="16.5161" x2="50" y2="46.4412" gradientTransform="matrix(1 0 0 -1 0 102)"><stop  offset="0" style="stop-color:#ADADAD"/><stop  offset="1" style="stop-color:#6B6B6B"/></linearGradient>',b_bgradient:'<linearGradient id="b-grad" gradientTransform="rotate(90)"><stop offset="5%" stop-color="black" /><stop offset="95%" stop-color="white" /></linearGradient>',b_grvb:'<linearGradient id="vb-grad" gradientTransform="rotate(90)"><stop offset="5%" stop-color="white" /><stop offset="95%" stop-color="black" /></linearGradient>',b_btype:'<linearGradient id="bl-grad" gradientTransform="rotate(90)"><stop offset="5%" stop-color="black" /><stop offset="95%" stop-color="white" /></linearGradient>',b_bbodygradient:'<linearGradient id="b-grad" gradientTransform="rotate(90)"><stop offset="5%" stop-color="black" /><stop offset="95%" stop-color="white" /></linearGradient>',c_rc:'<linearGradient id="rc-grad" gradientUnits="userSpaceOnUse" x1="0" y1="53.205" x2="100" y2="53.205" gradientTransform="matrix(1 0 0 -1 0 102)"><stop  offset="0" style="stop-color:#BDBFC2"/><stop  offset="1" style="stop-color:#828287"/></linearGradient>',i_h:'<linearGradient id="l-grad"><stop offset="5%"  stop-color="white" /><stop offset="95%" stop-color="black" /></linearGradient><linearGradient id="r-grad"><stop offset="5%" stop-color="black" /><stop offset="95%" stop-color="white" /></linearGradient>',b_gstype:'<linearGradient id="gt-grad" gradientTransform="rotate(90)"><stop offset="5%" stop-color="black" /><stop offset="95%" stop-color="white" /></linearGradient><radialGradient id="gt-gradr"><stop offset="5%" stop-color="white" /><stop offset="95%" stop-color="black" /></radialGradient>',b_bwindowgradient:'<linearGradient id="w-grad" gradientTransform="rotate(90)"><stop offset="5%" stop-color="black" /><stop offset="95%" stop-color="white" /></linearGradient>',i_hist:'<linearGradient id="l-grad"><stop offset="5%"  stop-color="white" /><stop offset="95%" stop-color="black" /></linearGradient>',c_excel:'<linearGradient id="excel-grad1" gradientUnits="userSpaceOnUse" x1="10.4295" y1="93.4497" x2="91.2468" y2="8.6135" gradientTransform="matrix(1 0 0 -1 0 102)"><stop  offset="0" style="stop-color:#DEF1DF"/><stop  offset="1" style="stop-color:#DBEBC3"/></linearGradient><linearGradient id="excel-grad2" gradientUnits="userSpaceOnUse" x1="32.8982" y1="23.8811" x2="83.8607" y2="82.2735" gradientTransform="matrix(1 0 0 -1 0 102)"><stop  offset="0" style="stop-color:#06A817"/><stop  offset="1" style="stop-color:#003700"/></linearGradient><linearGradient id="excel-grad3" gradientUnits="userSpaceOnUse" x1="4.0159" y1="98.7549" x2="102.7326" y2="-1.6166" gradientTransform="matrix(1 0 0 -1 0 102)"><stop  offset="0" style="stop-color:#06A817"/><stop  offset="1" style="stop-color:#003700"/></linearGradient><linearGradient id="excel-grad4" gradientUnits="userSpaceOnUse" x1="19.1737" y1="87.3007" x2="78.6131" y2="23.2007" gradientTransform="matrix(1 0 0 -1 0 102)"><stop  offset="0" style="stop-color:#06A817"/><stop  offset="1" style="stop-color:#003700"/></linearGradient><linearGradient id="excel-grad5" gradientUnits="userSpaceOnUse" x1="19.1737" y1="87.3007" x2="78.6131" y2="23.2007" gradientTransform="matrix(1 0 0 -1 0 102)"><stop  offset="0" style="stop-color:#06A817"/><stop  offset="1" style="stop-color:#003700"/></linearGradient><linearGradient id="exel-grad6" gradientUnits="userSpaceOnUse" x1="47.2828" y1="36.174" x2="78.5223" y2="49.075" gradientTransform="matrix(1 0 0 -1 0 102)"><stop  offset="0" style="stop-color:#06A817"/><stop  offset="1" style="stop-color:#003700"/></linearGradient>',c_wallstreetjournal:'<linearGradient id="WS-gradient" gradientTransform="rotate(90)"><stop offset="0" stop-color="#ece4d9" /><stop offset="1" stop-color="#c1b398" /></linearGradient>',b_gsswitch:'<linearGradient id="gs-grad" gradientTransform="rotate(90)"><stop offset="5%" stop-color="black" /><stop offset="95%" stop-color="white" /></linearGradient>',c_canvasxpress:'<linearGradient id="cx-grad1" gradientUnits="userSpaceOnUse" x1="31.3462" y1="420.1643" x2="31.3462" y2="450.9281" gradientTransform="matrix(1 0 0 1 0 -398)"><stop  offset="0" style="stop-color:#FFD385"/><stop  offset="1" style="stop-color:#FFAE54"/></linearGradient><linearGradient id="cx-grad2" gradientUnits="userSpaceOnUse" x1="36.3" y1="428.6523" x2="36.3" y2="452.6173" gradientTransform="matrix(1 0 0 1 0 -398)"><stop  offset="0" style="stop-color:#FE6969"/><stop  offset="1" style="stop-color:#ED0C0C"/></linearGradient><linearGradient id="cx-grad3" gradientUnits="userSpaceOnUse" x1="49.85" y1="433.0864" x2="49.85" y2="452.6595" gradientTransform="matrix(1 0 0 1 0 -398)"><stop  offset="0" style="stop-color:#00B1DD"/><stop  offset="1" style="stop-color:#0081BD"/></linearGradient>',tx_shadow:'<linearGradient id="ts-grad" gradientUnits="userSpaceOnUse" x1="67.7304" y1="44.903" x2="45.4561" y2="20.9231" gradientTransform="matrix(1 0 0 -1 0 102)"><stop  offset="0" style="stop-color:#ADADAD"/><stop  offset="1" style="stop-color:#6B6B6B"/></linearGradient>',b_grhl:'<linearGradient id="hl-grad"><stop offset="5%" stop-color="black" /><stop offset="95%" stop-color="white" /></linearGradient>'},use:{ps_center:["ps_center"],ar_cross:["ar_cross"],gc_gzzz:["dummy"],c_jupyter:["c_jupyter"],at_pat:["at_pat"],sw_down:["sw_down"],dtt_transpose:["dtt_transpose"],gr_style:["gr_style"],ch_la:["ch_la"],m_double:["m_body","m_left","m_double"],ch_lzzz:["dummy"],dt_kmconf:["p_cg2fitkmconf","p_cg2axes","p_cg2fitkm"],tb_col:["tb_col"],ar_zzz:["dummy"],bx_mean:["bx_mean"],p_ghtitle:["p_gh","p_ghtitle"],tb_table:["tb_table"],ch_lt:["ch_lt"],ch_olinsmall:["ch_olinsmall"],tm_history:["tm_history"],g_remotegraphs:["g_remotegraphs"],op_undo:["op_undo"],wp_constructor:["wp_constructor"],dp_bin:["dp_bin"],v_play:["v_play"],cd_zzz:["dummy"],ps_bottomright:["ps_bottomright"],p_g2:["p_g2"],dt_den:["p_cg2axes","p_cg2fitden"],o_ghvarsp:["o_ghvars","ch_ocodemed"],gr_g2xy:["gr_g2xy"],p_g3:["p_g3"],ch_lf:["ch_lf"],o_ghsmpsp:["o_ghsmps","ch_ocodemed"],g_fish:["g_fish"],ar_rs:["ar_rs"],cd_upload:["cd_upload"],bx_notched:["bx_notched"],ch_capple:["ch_capple"],g_ridgeline:["g_ridgeline"],ly_zzz:["dummy"],ch_ln:["ch_ln"],gd_g1marker:["p_cg1axesvertical","p_cg1datavertical","p_dgmarker"],gr_styledotted:["gr_styledotted"],ch_cesc2:["ch_cesc2"],at_ellipse:["at_ellipse"],sp_thickness2:["sp_thickness2"],dtp_range:["dt_range"],cd_select:["cd_select"],ch_lx:["ch_lx"],p_g3axisz:["p_g3","p_g3axisz"],ch_le:["ch_le"],ar_h:["ar_h"],p_ghzzz:["dummy"],bx_violinu:["bx_violinu"],gr_styledashed:["gr_styledashed"],c_rcode:["c_rcode"],p_g3titlesubtitle:["p_g3","p_g3titlesubtitle"],tx_tostring:["tx_tostring"],v_stop:["v_stop"],ch_oceil:["ch_oceil"],g_tagcloud:["g_tagcloud"],p_g2titlesubtitle:["p_g2","p_g2titlesubtitle"],c_tableau:["c_tableau"],g_scatter3d:["g_scatter3d"],ch_sat:["ch_sat"],sh_square:["sh_square"],m_right:["m_body","m_right"],g_parallelcoordinates:["g_parallelcoordinates"],b_grhr:["b_grhr"],g_dotline:["g_dotline"],dt_histremove:["p_cg2axes","p_cg2datahist","v_cancelsmall"],p_g2citation:["p_g2","p_g2citation"],ly_doeremove:["ly_doe","v_cancelsmall"],p_g3citation:["p_g3","p_g3citation"],c_rrcode:["c_rrcode"],dtt_zzz:["dummy"],o_ghsmps:["o_ghsmps"],gc_ggh:["p_cghdata1","p_cghdata2","p_cghaxes"],o_g1:["o_g1"],dps_tooutside:["dps_tooutside"],dt_contour:["g_contour"],c_solarized:["c_solarized"],sh_zzz:["dummy"],ar_lm:["ar_lm"],ar_diagm:["ar_tlm","ar_trm","ar_brm","ar_blm"],ch_cesc:["ch_cesc"],ch_lk:["ch_lk"],dtp_exact:["dt_exact"],ar_perp:["ar_l","ar_t","ar_r","ar_b"],g_bubble:["g_bubble"],ga_zzz:["dummy"],c_codepen:["c_codepen"],ch_omean:["ch_omean"],dt_cor:["p_cg2axes","p_cg2fitcor","p_cg2datacor"],ch_oiter:["ch_oiter"],dp_zzz:["dummy"],ar_dctrs:["ar_dctrs"],ch_ly:["ch_ly"],wp_fileformat:["wp_fileformat"],cd_doc:["cd_doc"],c_rc:["c_rc"],bx_wishkerss:["bx_wishkerss"],a_moveback:["a_moveback"],v_first:["v_first"],m_zlasso:["m_zlasso"],g_donnut:["g_donnut"],g_layout:["g_layout"],at_shd:["at_shd"],dt_loessremove:["p_cg2axes","p_cg2fitcdf","p_cg2datacor","v_cancelsmall"],lg_g1:["lg_g1","lg_l"],cd_params:["cd_doc","cd_params"],c_canvasxpress:["c_canvasxpress"],ar_bm:["ar_bm"],ch_creturn:["ch_creturn"],ch_cshift2:["ch_cshift2"],wp_list:["wp_list"],c_cxplot:["c_cxplot"],gr_major:["gr_major"],ch_lj:["ch_lj"],ga_axisxyz:["ga_axisxyz"],dp_binned:["dp_binned"],cd_json:["cd_json"],ch_oe2:["ch_oe2"],ch_czzz:["dummy"],dps_collapse:["dps_collapse"],bx_zzz:["dummy"],a_aligntop:["a_aligntop"],wp_scale:["wp_scale"],fp_pinremove:["fp_pin","v_cancelsmall"],ar_tm:["ar_tm"],g_sunburst:["g_sunburst"],dps_zzz:["dummy"],p_g1samplelabels:["p_g1","p_g1samplelabels"],tm_time:["tm_time"],op_refresh:["op_refresh"],sw_zzz:["dummy"],ch_lm:["ch_lm"],p_g1subtitle:["p_g1","p_g1subtitle"],op_cancel:["op_cancel"],dp_binc:["dp_binc"],o_ghvars:["o_ghvars"],ps_topright:["ps_topright"],ch_ssum:["ch_ssum"],ln_zzz:["dummy"],mr_top:["mr_all","mr_top"],b_gstype:["b_gstype","ar_dctrs2","ar_dcbls2"],ch_oparens:["ch_oparens"],p_g3title:["p_g3","p_g3title"],dt_loessconf:["p_cg2fitcorconf","p_cg2axes","p_cg2fitcdf","p_cg2datacor"],p_g2title:["p_g2","p_g2title"],ps_zzz:["dummy"],ly_splom:["ly_splom"],ch_lb:["ch_lb"],gc_gg2:["p_cg2axes","p_cg2data"],sv_image:["sv_image"],g_gantt:["g_gantt"],cl_verticalk:["cl_verticalbg","cl_vertical"],g_area:["g_area"],ch_lz:["ch_lz"],sv_disk:["sv_disk"],rt_c2:["rt_c2"],b_gsswitch:["b_gsswitch","ar_dctrs2","ar_dcbls2"],p_gh:["p_gh"],ch_lw:["ch_lw"],g_hexplotbinplot:["g_hexplotbinplot"],cr_normal:["cr_normal"],gc_gohorizontal:["p_cg1axeshorizontal","p_cg1datahorizontal"],p_g1axes:["p_g1","p_g1axes"],ar_l:["ar_l"],sl_eremove:["e_open","v_cancelsmall"],gr_g2x:["gr_g2x"],g_facet:["g_facet"],g_contour:["g_contour"],a_group:["a_group"],bx_medianc:["bx_medianc"],bx_typerange:["bx_typerange"],b_gzzz:["dummy"],b_grc:["b_grc"],dt_kmremove:["p_cg2axes","p_cg2fitkm","v_cancelsmall"],ch_spercent:["ch_spercent"],wp_softwaredesign:["wp_softwaredesign"],fp_zzz:["dummy"],sv_video:["sv_video"],sl_lightbulboff:["sl_lightbulboff"],mr_zzz:["dummy"],wp_documentation:["wp_documentation"],ps_top:["ps_top"],ch_oquantile:["ch_oquantile"],g_dashboard:["g_dashboard"],dt_bin:["p_cg2axes","p_cg2bin"],at_motion:["at_motion"],ar_t:["ar_t"],bx_violint:["bx_violint"],a_alignleft:["a_alignleft"],b_grvb:["b_grvb"],g_zzz:["dummy"],sr_aad:["sr_aad"],p_g1axestitles:["p_g1","p_g1axestitles"],c_rrc:["c_rrc"],ch_olog2:["ch_olog2"],ch_ofloor:["ch_ofloor"],cl_horizontal:["cl_horizontal"],sl_checkboxoff:["sl_checkboxoff"],lg_g2:["lg_g2","lg_l"],ch_lu:["ch_lu"],ch_lh:["ch_lh"],p_ghcitation:["p_gh","p_ghcitation"],ar_b:["ar_b"],sp_thinner:["sp_thinner"],g_scatter2d:["g_scatter2d"],g_barline:["g_barline"],p_g2zzz:["dummy"],dps_expand:["dps_expand"],p_ghtitlesubtitle:["p_gh","p_ghtitlesubtitle"],gc_gg3:["p_cg3axes","p_cg3data"],tx_stringnumeric:["tx_stringnumeric"],p_g1axistitle2:["p_g1","p_g1axistitle2"],g_stackedpercentline:["g_stackedpercentline"],at_shp:["at_shp"],ch_ocode:["ch_ocode"],c_php:["c_php"],ps_bottomleft:["ps_bottomleft"],c_jsfiddle:["c_jsfiddle"],ar_vs:["ar_vs"],dt_qq:["p_cg2axes","p_cg2fitqq"],g_kaplanmeier:["g_kaplanmeier"],i_h:["i_left","i_right","i_labels"],dt_denfit:["p_cg2axes","p_cg2fitden","p_cg2dataden"],c_wallstreetjournal:["c_wallstreetjournal"],ch_ocodemed:["ch_ocodemed"],a_movefront:["a_movefront"],g_splom:["g_splom"],rt_ac:["rt_ac"],sl_eclose:["e_close"],wp_events:["wp_events"],ch_olog:["ch_olog"],bx_connect:["bx_connect"],ch_ocodesmall:["ch_ocodesmall"],a_moveforward:["a_moveforward"],wp_data:["wp_data"],b_bgradient:["b_bodygradient","b_pail"],wp_interactiveplots:["wp_interactiveplots"],wp_broadcast:["wp_broadcast"],m_left:["m_body","m_left"],dps_square:["dps_square"],wp_datawrangling:["wp_datawrangling"],g_radar:["g_radar"],g_nonlinearfit:["g_nonlinearfit"],gd_gzzz:["dummy"],wp_installation:["wp_installation"],fp_pencil:["fp_pencil"],p_ghsampletitle:["p_gh","p_ghsampletitle"],bx_medianw:["bx_medianw"],v_zzz:["dummy"],bx_wishkersd:["bx_wishkersd"],dt_histstag:["p_cg2axes","p_cg2datahist","p_cg2datahiststag"],tb_stripped:["tb_stripped"],g_violin:["g_violin"],g_map:["g_map"],a_movebackward:["a_movebackward"],ar_diags:["ar_tls","ar_trs","ar_brs","ar_bls"],p_g1axis2:["p_g1","p_g1axis2"],ar_tlm:["ar_tlm"],cr_cumulative:["cr_cumulative"],ln_stylesolidver:["ln_stylesolidver"],ch_li:["ch_li"],c_zzz:["dummy"],i_zzz:["dummy"],gc_goverticalhorizontal:["p_cg1dataverticalhorizontal"],dt_contourremove:["g_contour","v_cancelsmall"],c_opensource:["c_opensource"],dt_zzz:["dummy"],bx_violin:["bx_violin"],op_zzz:["dummy"],ch_splus:["ch_splus"],ar_brm:["ar_brm"],ln_stylesolid:["ln_stylesolid"],sl_checkboxon:["sl_checkboxon"],g_bar:["g_bar"],wp_threebars:["wp_threebars"],gr_g1:["gr_g1"],c_nodejs:["c_nodejs"],dt_cdfremove:["p_cg2axes","p_cg2fitcdf","v_cancelsmall"],at_zzz:["dummy"],wp_audittrail:["wp_audittrail"],c_economist:["c_economist"],z_zoom:["z_zoom"],ar_blm:["ar_blm"],op_config:["op_config"],dtp_min:["dt_min"],b_bbodywindow:["b_body2","b_window","b_pail"],gc_ghspace:["p_cghdata1","p_cghdata2","p_cghaxes","h_hspace"],sl_check:["sl_check"],ly_layout:["ly_layout"],gd_g2marker:["p_cg2axes","p_cg2data","p_dgmarker"],b_btype:["b_type"],g_density2:["g_density2"],ar_trm:["ar_trm"],v_pause:["v_pause"],ch_lg:["ch_lg"],tb_row:["tb_row"],gr_g2z:["gr_g2z"],a_alignbottom:["a_alignbottom"],m_body:["m_body"],dps_width:["dps_width"],ch_sampersand:["ch_sampersand"],wp_zzz:["dummy"],dt_denfilledline:["p_cg2axes","p_cg2fitden2","ln_stylesolidver"],bx_wishkers:["bx_wishkers"],dt_qqremove:["p_cg2axes","p_cg2fitqq","v_cancelsmall"],p_g1zzz:["dummy"],ch_olin:["ch_olin"],at_sze:["at_sze"],gc_ghcell:["p_cghdata1","p_cghdata2","p_cghaxes","h_hcell"],dt_denfilled:["p_cg2axes","p_cg2fitden2"],sr_zad:["sr_zad"],sl_lightbulbon:["sl_lightbulbon"],cl_horizontalk:["cl_horizontalbg","cl_horizontal"],gd_g2line:["p_cg2axes","p_cg2data","p_dgline"],i_hist:["i_hist"],sr_zzz:["dummy"],c_paultol:["c_paultol"],at_trn:["at_trn"],dtp_zzz:["dummy"],p_g2axestitles:["p_g2","p_g2axestitles"],sp_spacing:["sp_spacing"],p_g3axestitles:["p_g3","p_g3axestitles"],ar_trs:["ar_trs"],dp_jittered:["dp_jittered"],dt_hist:["p_cg2axes","p_cg2datahist"],c_jupyterc:["c_jupyterc"],m_zzz:["dummy"],sv_diskjson:["sv_diskjson"],tx_format:["tx_format"],ch_ld:["ch_ld"],p_g2axes:["p_g2","p_g2axes"],p_g3axes:["p_g3","p_g3axes"],b_grvt:["b_grvt"],dt_contourfilled:["p_cg2contourfilled"],gr_zzz:["dummy"],ar_r:["ar_r"],sv_svg:["sv_svg"],dps_inout:["dps_inout"],ar_bls:["ar_bls"],dt_cdf:["p_cg2axes","p_cg2fitcdf"],sp_thickness:["sp_thickness"],bx_meanb:["bx_meanb"],ar_brs:["ar_brs"],sl_radioon:["sl_radioon"],dp_binr:["dp_binr"],cl_vertical:["cl_vertical"],wp_initialization:["wp_initialization"],fp_funnel:["fp_funnel"],sp_thicker:["sp_thicker"],ch_oinfo:["ch_oinfo"],g_scatterbubble2d:["g_scatterbubble2d"],p_g1title:["p_g1","p_g1title"],v_plus:["v_plus"],g_network:["g_network"],g_lollipop:["g_lollipop"],b_bbodygradient:["b_bodygradient","b_windowbg2","b_pail"],at_colshpsze:["at_colshpsze"],ar_tls:["ar_tls"],bx_violinbp:["bx_violinbp"],tm_zzz:["dummy"],ar_hs:["ar_hs"],wp_examples:["wp_examples"],ch_ofx:["ch_ofx"],sr_aai:["sr_aai"],gr_stylesolid:["gr_stylesolid"],ar_minmax:["ar_minmax"],wp_arguments:["wp_arguments"],o_gzzz:["dummy"],ch_sminus:["ch_sminus"],ar_tl:["ar_tl"],p_ghsubtitle:["p_gh","p_ghsubtitle"],ps_toloc:["ps_toloc"],ch_oz:["ch_oz"],dtp_count:["dt_count"],gr_minor:["gr_minor"],dt_corconf:["p_cg2fitcorconf","p_cg2axes","p_cg2fitcor","p_cg2datacor"],rt_ac2:["rt_ac2"],o_g1p:["o_g1","ch_ocodemed"],ar_br:["ar_br"],lg_legend:["lg_legend"],gc_gg1:["p_cg1axesvertical","p_cg1datavertical"],tb_zzz:["dummy"],p_ghsamplelabels:["p_gh","p_ghsamplelabels"],ga_axisxy:["ga_axisxy"],rt_zzz:["dummy"],ch_ll:["ch_ll"],cr_bezier:["cr_bezier"],p_g3axisy:["p_g3","p_g3axisy"],sp_zzz:["dummy"],dt_km:["p_cg2axes","p_cg2fitkm"],a_order:["a_order"],p_g2axisy:["p_g2","p_g2axisy"],ch_lr:["ch_lr"],cd_lines:["cd_doc","cd_lines"],g_pie:["g_pie"],ps_right:["ps_right"],g_stackedpercent:["g_stackedpercent"],ar_bl:["ar_bl"],dtt_pivot:["dtt_pivot"],g_heatmap:["g_heatmap"],ch_cshift:["ch_cshift"],z_out:["z_out"],g_venn:["g_venn"],ly_segregate:["ly_segregate"],ar_tr:["ar_tr"],p_g1axistitle1:["p_g1","p_g1axistitle1"],tx_tonumeric:["tx_tonumeric"],wp_marker:["wp_marker"],n_nodes:["n_nodes"],dt_loess:["p_cg2axes","p_cg2fitcdf","p_cg2datacor"],sh_hexagon:["sh_hexagon"],cr_zzz:["dummy"],ar_perps:["ar_ls","ar_ts","ar_rs","ar_bs"],ch_cctrl:["ch_cctrl"],dt_quantregremove:["p_cg2axes","p_cg2fitquantreg","p_cg2datacor","v_cancelsmall"],wp_user:["wp_user"],p_g2axisx:["p_g2","p_g2axisx"],p_g3axisx:["p_g3","p_g3axisx"],g_oncoprint:["g_oncoprint"],g_correlation:["g_correlation"],dt_denfithist:["p_cg2axes","p_cg2fitden","p_cg2datadenhist"],dps_resize:["dps_resize"],gc_gerrors:["p_cg1axesvertical","p_cg1dataverticalshort","p_cg1errors"],g_histogram:["g_histogram"],mr_right:["mr_all","mr_right"],sw_updown:["sw_up","sw_down"],dps_height:["dps_height"],bx_type:["bx_type"],wp_configuration:["wp_configuration"],g_stacked:["g_stacked"],p_ghvariabletitle:["p_gh","p_ghvariabletitle"],c_react:["c_react"],dt_binremove:["p_cg2axes","p_cg2bin","v_cancelsmall"],ar_dcbls:["ar_dcbls"],ch_lo:["ch_lo"],b_gsori:["b_gsori","ar_dctrs2","ar_dcbls2"],wp_userinterface:["wp_userinterface"],n_edges:["n_edges"],sh_oval:["sh_oval"],g_tcga:["g_map"],mr_all:["mr_all"],ln_styledotted:["ln_styledotted"],dt_contourfilledlines:["p_cg2contourfilledlines"],p_g1titlesubtitle:["p_g1","p_g1titlesubtitle"],lg_h:["lg_h","lg_l"],ch_lc:["ch_lc"],sv_diskremove:["sv_disk","v_cancelsmall"],p_g3axistitlez:["p_g3","p_g3axistitlez"],g_linearfit:["g_linearfit"],gc_ghsample:["p_cghdata1","p_cghdata2","p_cghaxes","h_hsample"],sr_az:["sr_az"],c_rr:["c_rr"],b_bwindow:["b_body","b_window","b_pail"],p_g1citation:["p_g1","p_g1citation"],dt_corremove:["p_cg2axes","p_cg2fitcor","p_cg2datacor","v_cancelsmall"],sr_19:["sr_19"],ch_olog10:["ch_olog10"],ch_oy:["ch_oy"],a_zzz:["dummy"],g_functions:["g_functions"],ga_axisx:["ga_axisx"],dt_contourlines:["g_contour3"],mr_bottom:["mr_all","mr_bottom"],bx_meanc:["bx_meanc"],at_sch:["at_sch"],tx_zzz:["dummy"],a_distributever:["a_distributever"],z_in:["z_in"],wp_license:["wp_license"],sv_zzz:["dummy"],ch_szzz:["dummy"],ch_lv:["ch_lv"],ar_ls:["ar_ls"],ch_lq:["ch_lq"],g_tree:["g_tree"],c_stata:["c_stata"],ps_toloc2:["ps_toloc2"],g_chord:["g_chord"],gc_govertical:["p_cg1axesvertical","p_cg1datavertical"],ln_styledashed:["ln_styledashed"],g_stackedline:["g_stackedline"],a_alignright:["a_alignright"],dt_quantreg:["p_cg2axes","p_cg2fitquantreg","p_cg2datacor"],dp_binl:["dp_binl"],wp_code:["wp_code"],v_previous:["v_previous"],ch_lp:["ch_lp"],p_g3axistitlex:["p_g3","p_g3axistitlex"],wp_dom:["wp_dom"],ch_ls:["ch_ls"],b_bbody:["b_body","b_pail"],p_g2axistitlex:["p_g2","p_g2axistitlex"],tx_shadow:["tx_shadow"],ln_style:["ln_style"],c_excel:["c_excel"],p_g1axis1:["p_g1","p_g1axis1"],op_redo:["op_redo"],c_r:["c_r"],ar_ts:["ar_ts"],ch_coption:["ch_coption"],dt_denfitfilled:["p_cg2axes","p_cg2fitden2","p_cg2dataden"],v_backward:["v_backward"],c_ggplot:["c_ggplot"],p_g1:["p_g1"],fp_funnelremove:["fp_funnel","v_cancelsmall"],fp_pin:["fp_pin"],ps_toloc3:["ps_toloc3"],wp_instances:["wp_instances"],m_wheel:["m_body","m_wheel"],sl_zzz:["dummy"],op_more:["op_more"],g_arealine:["g_arealine"],bx_typewishkers:["bx_typewishkers"],g_line:["g_line"],ch_cdelete:["ch_cdelete"],at_col:["at_col"],g_circular:["g_circular"],gc_ghvariable:["p_cghdata1","p_cghdata2","p_cghaxes","h_hvariable"],ly_splomremove:["g_splom","v_cancelsmall"],ps_bottom:["ps_bottom"],at_palette:["at_palette"],ar_bs:["ar_bs"],bx_median:["bx_median"],rt_c:["rt_c"],tb_app:["tb_app"],bx_data:["bx_data"],ch_cctrl2:["ch_cctrl2"],g_treemap:["g_treemap"],v_cancelsmall:["v_cancelsmall"],v_next:["v_next"],b_bwindowsolid:["b_body","b_windowbg","b_pail"],lg_zzz:["dummy"],g_meter:["g_meter"],b_grhl:["b_grhl"],dt_denremove:["p_cg2axes","p_cg2fitden","v_cancelsmall"],gd_g1line:["p_cg1axesvertical","p_cg1datavertical","p_dgline"],dps_toinside:["dps_toinside"],g_density:["g_density"],cl_zzz:["dummy"],v_cancel:["v_cancel"],gr_g2y:["gr_g2y"],bx_violinc:["bx_violin","v_cancelsmall"],dtt_pivotremove:["dtt_pivot","v_cancelsmall"],ar_v:["ar_v"],g_waterfall:["g_waterfall"],ar_perpm:["ar_lm","ar_tm","ar_rm","ar_bm"],ar_diag:["ar_tl","ar_tr","ar_br","ar_bl"],p_g2subtitle:["p_g2","p_g2subtitle"],ch_calt:["ch_calt"],p_g3subtitle:["p_g3","p_g3subtitle"],ch_ozzz:["dummy"],ch_ologsmall:["ch_ologsmall"],ch_oa:["ch_oa"],sl_radiooff:["sl_radiooff"],ch_snumber:["ch_snumber"],ch_ccommand:["ch_ccommand"],v_minus:["v_minus"],bx_wishkersn:["bx_wishkersn"],sr_azi:["sr_azi"],cd_linesindent:["cd_doc","cd_linesindent"],mr_left:["mr_all","mr_left"],g_sankey:["g_sankey"],sp_heightness:["sp_heightness"],ly_doe:["ly_doe"],a_distributehor:["a_distributehor"],g_boxplot:["g_boxplot"],dt_contourdata:["g_contour2","p_cg2data"],sl_eopen:["e_open"],b_bwindowgradient:["b_body","b_windowgradient","b_pail"],p_g3axistitley:["p_g3","p_g3axistitley"],g_genome:["g_genome"],p_g2axistitley:["p_g2","p_g2axistitley"],dtp_max:["dt_max"],sv_pictures:["sv_pictures"],at_col2:["at_col2"],cd_folder:["cd_folder"],ch_oe:["ch_oe"],sp_farther:["sp_farther"],ch_oaa:["ch_oaa"],ch_oitalic:["ch_oitalic"],ch_oe10:["ch_oe10"],v_forward:["v_forward"],c_python:["c_python"],p_g1sampletitle:["p_g1","p_g1sampletitle"],c_angular:["c_angular"],g_dotplot:["g_dotplot"],b_bzzz:["dummy"],wp_oveview:["wp_oveview"],v_last:["v_last"],ch_ox:["ch_ox"],ps_topleft:["ps_topleft"],ch_of:["ch_of"],sw_up:["sw_up"],ps_left:["ps_left"],n_zzz:["dummy"],sp_closer:["sp_closer"],p_ghvariablelabels:["p_gh","p_ghvariablelabels"],ar_rm:["ar_rm"]}},CanvasXpress.doc={P:{draw:{C:"Redraw the canvas<br>",T:"void",M:"Functions"},showCodeDiv:{T:"void",C:"Show the code for the plot<br> @advanced",M:"Functions"},hideCodeDiv:{M:"Functions",T:"void",C:"Hide the code for the plot<br> @advanced"},updateCodeDiv:{T:"void",C:"Update the code to generate the plot<br> @advanced",M:"Functions"},print:{M:"Functions",C:"initializeApi     * @param void @returns void",T:"void"},groupSamples:{X:"getXData",S:["ungroupSamples"],U:["Bar","Line","Area","AreaLine","Dotplot","DotLine","Heatmap","Stacked","StackedPercent","Boxplot","Correletion","Pie","Barline","StackedLine","StackedPercentLine"],T:"array",C:"Group samples based on a sample category (data.x object)<br>",M:"Functions"},recalculateLayout:{M:"Functions",C:"Recalculate the network layout<br>",U:["Scatter2D","ScatterBubble2D","Scatter3D"],T:"void"},segregateSamples:{X:"getXData",S:["desegregateSamples"],M:"Functions",U:["Bar","Line","Area","AreaLine","Dotplot","DotLine","Heatmap","Stacked","StackedPercent","Boxplot","Correletion","Pie","Barline","StackedLine","StackedPercentLine"],T:"option",C:"Segregate samples based on a sample category (data.x object)<br>"},desegregateVariables:{M:"Functions",C:"Desegregate variables previously segregated based on a variable category (data.z object)<br>",U:["Bar","Line","Area","AreaLine","Dotplot","DotLine","Heatmap","Stacked","StackedPercent","Boxplot","Correletion","Pie","Barline","StackedLine","StackedPercentLine"],T:"void",S:["segregateVariables"]},desegregateSamples:{C:"Desegreagate samples previously segregated based on a sample category (data.x object)<br>",U:["Bar","Line","Area","AreaLine","Dotplot","DotLine","Heatmap","Stacked","StackedPercent","Boxplot","Correletion","Pie","Barline","StackedLine","StackedPercentLine"],T:"void",M:"Functions",S:["segregateSamples"]},segregateVariables:{X:"getZData",S:["segregateVariables"],T:"option",U:["Bar","Line","Area","AreaLine","Dotplot","DotLine","Heatmap","Stacked","StackedPercent","Boxplot","Correletion","Pie","Barline","StackedLine","StackedPercentLine"],C:"Segregate variables based on a variable category (data.z object)<br>",M:"Functions"},createContour:{S:["contourXBinSize","contourYBinSize","contourZBinSize","contourType"],M:"Functions",C:"Create contour<br>",T:"void",U:["Bar","Line","Area","AreaLine","Dotplot","DotLine","Heatmap","Stacked","StackedPercent","Boxplot","Correletion","Pie","Barline","StackedLine","StackedPercentLine","Scatter2D","ScatterBubble2D","Scatter3D"]},reset:{M:"Functions",T:"void",C:"Reset the canvas<br>"},hideUnhideVars:{X:"getVariablesAsArray",M:"Functions",T:"array",U:["Bar","Line","Area","AreaLine","Dotplot","DotLine","Heatmap","Stacked","StackedPercent","Boxplot","Correletion","Pie","Barline","StackedLine","StackedPercentLine","Scatter2D","ScatterBubble2D","Scatter3D"],C:"Hide or unhide variables. It works like a switch<br>"},removeHistogram:{C:"Remove histogram from a 2D-Scatter plot<br>",U:["Scatter2D","ScatterBubble2D","Scatter3D"],T:"void",M:"Functions"},clusterVariables:{C:"Cluster variables based on data and generate a dendrogram on the variable axis. It takes no parameters<br>",T:"void",U:["Heatmap"],M:"Functions",S:["distance","linkage","imputeMethod"]},hideInfoDiv:{C:"Hide additional information<br> @advanced",T:"void",M:"Functions"},showInfoDiv:{M:"Functions",C:"Show additional information<br> @advanced",T:"void"},transpose:{U:["Bar","Line","Area","AreaLine","Dotplot","Heatmap","Stacked","StackedPercent","Boxplot","StackedLine","StackedPercentLine"],T:"void",C:"Transpose the data. It takes no parameters<br>",M:"Functions"},kmeansVariables:{M:"Functions",C:"Cluster variables using kmeans<br>",U:["Bar","Line","Area","AreaLine","Dotplot","Heatmap","Stacked","StackedPercent","Boxplot","StackedLine","StackedPercentLine"],T:"void",S:["kmeansVarClusters","maxIterations"]},addRegressionLine:{M:"Functions",U:["Scatter2D","ScatterBubble2D","Scatter3D"],T:"void",C:"Add regression line(s) to a 2D-Scatter plot<br>"},hideUnhideSmps:{X:"getSamplesAsArray",U:["Bar","Line","Area","AreaLine","Dotplot","DotLine","Heatmap","Stacked","StackedPercent","Boxplot","Correletion","Pie","Barline","StackedLine","StackedPercentLine","Scatter2D","ScatterBubble2D","Scatter3D"],T:"array",C:"Hide or unhide samples. It works like a switch<br>",M:"Functions"},kmeansSamples:{M:"Functions",U:["Bar","Line","Area","AreaLine","Dotplot","Heatmap","Stacked","StackedPercent","Boxplot","StackedLine","StackedPercentLine"],T:"void",C:"Cluster samples using kmeans<br>",S:["kmeansSmpClusters","maxIterations"]},clusterSamples:{U:["Bar","Line","Area","AreaLine","Dotplot","Heatmap","Stacked","StackedPercent","Boxplot","StackedLine","StackedPercentLine"],T:"void",C:"Cluster samples based on data and generate a dendrogram on the sample axis. It takes no parameters<br>",M:"Functions",S:["distance","linkage","imputeMethod"]},addNormalDistributionLine:{T:"void",U:["Scatter2D","ScatterBubble2D","Scatter3D"],C:"Add a normaldistribution line(s) to a 2D-Scatter plot<br>",M:"Functions"},createRandomData:{T:"void",C:"Create a random data set<br>",M:"Functions"},transform:{M:"Functions",T:"option",U:["Bar","Line","Area","AreaLine","Dotplot","DotLine","Heatmap","Stacked","StackedPercent","Boxplot","Correletion","Pie","Barline","StackedLine","StackedPercentLine","Scatter2D","ScatterBubble2D","Scatter3D"],C:"Transform all the data. Warning: the option 'save' overwrites the original data<br>",S:["transformType","ratioReference","zscoreAxis"],O:["false","log2","log10","exp2","exp10","percentile","zscore","ratio","ratio2","ratio10","save","reset","undo"]},removeContour:{S:["contourXBinSize","contourYBinSize","contourZBinSize","contourType"],M:"Functions",U:["Bar","Line","Area","AreaLine","Dotplot","DotLine","Heatmap","Stacked","StackedPercent","Boxplot","Correletion","Pie","Barline","StackedLine","StackedPercentLine","Scatter2D","ScatterBubble2D","Scatter3D"],T:"void",C:"Remove contour<br>"},ungroupSamples:{C:"Ungroup samples previously grouped according to a sample category (data.x object)<br>",T:"void",U:["Bar","Line","Area","AreaLine","Dotplot","DotLine","Heatmap","Stacked","StackedPercent","Boxplot","Correletion","Pie","Barline","StackedLine","StackedPercentLine"],M:"Functions",S:["groupSamples"]},drawArea:{M:"Functions",T:"void",C:"Display event areas<br>"},createHistogram:{T:"option",U:["Scatter2D","ScatterBubble2D","Scatter3D"],C:"Create a histogram in 2D-Scatter plots in the 'x' axis or the 'y' axis<br> @advanced",M:"Functions",O:["x","y"]}},M:{Functions:{D:"Functions exposed in the configurator :",P:["addNormalDistributionLine","addRegressionLine","clusterSamples","clusterVariables","createContour","createHistogram","createRandomData","desegregateSamples","desegregateVariables","draw","drawArea","groupSamples","hideCodeDiv","hideInfoDiv","hideUnhideSmps","hideUnhideVars","kmeansSamples","kmeansVariables","print","recalculateLayout","removeContour","removeHistogram","reset","segregateSamples","segregateVariables","showCodeDiv","showInfoDiv","transform","transpose","ungroupSamples","updateCodeDiv"]}}},exports.init=CanvasXpress,exports.cxplot=cxplot,exports.aes=aes}).call(this,__webpack_require__(6))},function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){var s=i(8);"string"==typeof s&&(s=[[t.i,s,""]]);var a={insertAt:"top",hmr:!0,transform:void 0,insertInto:void 0};i(10)(s,a);s.locals&&(t.exports=s.locals)},function(t,e,i){(e=i(9)(!1)).push([t.i,'@charset "UTF-8";\n\n/*\n * Loading\n */\n\n.lds-ring {\n  display: inline-block;\n  position: relative;\n  width: 80px;\n  height: 80px;\n}\n.lds-ring div {\n  box-sizing: border-box;\n  display: block;\n  position: absolute;\n  width: 64px;\n  height: 64px;\n  margin: 8px;\n  border: 8px solid rgb(51, 122, 183);\n  border-radius: 50%;\n  animation: lds-ring 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;\n  border-color: rgb(51, 122, 183) transparent transparent transparent;\n}\n.lds-ring div:nth-child(1) {\n  animation-delay: -0.45s;\n}\n.lds-ring div:nth-child(2) {\n  animation-delay: -0.3s;\n}\n.lds-ring div:nth-child(3) {\n  animation-delay: -0.15s;\n}\n@keyframes lds-ring {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}  \n\n/*\n * Loading Image\n */\n\n /*\n.sk-fading-circle {\n    margin: 50px auto;\n    width: 80px;\n    height: 80px;\n    position: relative;\n}\n\n.sk-fading-circle .sk-circle {\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    left: 0;\n    top: 0;\n}\n\n.sk-fading-circle .sk-circle:before {\n    content: \'\';\n    display: block;\n    margin: 0 auto;\n    width: 15%;\n    height: 15%;\n    background-color: #333;\n    border-radius: 100%;\n    -webkit-animation: sk-circleFadeDelay 1.2s infinite ease-in-out both;\n    animation: sk-circleFadeDelay 1.2s infinite ease-in-out both;\n}\n\n.sk-fading-circle .sk-circle2 {\n    -webkit-transform: rotate(30deg);\n    -ms-transform: rotate(30deg);\n    transform: rotate(30deg);\n}\n\n.sk-fading-circle .sk-circle3 {\n    -webkit-transform: rotate(60deg);\n    -ms-transform: rotate(60deg);\n    transform: rotate(60deg);\n}\n\n.sk-fading-circle .sk-circle4 {\n    -webkit-transform: rotate(90deg);\n    -ms-transform: rotate(90deg);\n    transform: rotate(90deg);\n}\n\n.sk-fading-circle .sk-circle5 {\n    -webkit-transform: rotate(120deg);\n    -ms-transform: rotate(120deg);\n    transform: rotate(120deg);\n}\n\n.sk-fading-circle .sk-circle6 {\n    -webkit-transform: rotate(150deg);\n    -ms-transform: rotate(150deg);\n    transform: rotate(150deg);\n}\n\n.sk-fading-circle .sk-circle7 {\n    -webkit-transform: rotate(180deg);\n    -ms-transform: rotate(180deg);\n    transform: rotate(180deg);\n}\n\n.sk-fading-circle .sk-circle8 {\n    -webkit-transform: rotate(210deg);\n    -ms-transform: rotate(210deg);\n    transform: rotate(210deg);\n}\n\n.sk-fading-circle .sk-circle9 {\n    -webkit-transform: rotate(240deg);\n    -ms-transform: rotate(240deg);\n    transform: rotate(240deg);\n}\n\n.sk-fading-circle .sk-circle10 {\n    -webkit-transform: rotate(270deg);\n    -ms-transform: rotate(270deg);\n    transform: rotate(270deg);\n}\n\n.sk-fading-circle .sk-circle11 {\n    -webkit-transform: rotate(300deg);\n    -ms-transform: rotate(300deg);\n    transform: rotate(300deg);\n}\n\n.sk-fading-circle .sk-circle12 {\n    -webkit-transform: rotate(330deg);\n    -ms-transform: rotate(330deg);\n    transform: rotate(330deg);\n}\n\n.sk-fading-circle .sk-circle2:before {\n    -webkit-animation-delay: -1.1s;\n    animation-delay: -1.1s;\n}\n\n.sk-fading-circle .sk-circle3:before {\n    -webkit-animation-delay: -1s;\n    animation-delay: -1s;\n}\n\n.sk-fading-circle .sk-circle4:before {\n    -webkit-animation-delay: -0.9s;\n    animation-delay: -0.9s;\n}\n\n.sk-fading-circle .sk-circle5:before {\n    -webkit-animation-delay: -0.8s;\n    animation-delay: -0.8s;\n}\n\n.sk-fading-circle .sk-circle6:before {\n    -webkit-animation-delay: -0.7s;\n    animation-delay: -0.7s;\n}\n\n.sk-fading-circle .sk-circle7:before {\n    -webkit-animation-delay: -0.6s;\n    animation-delay: -0.6s;\n}\n\n.sk-fading-circle .sk-circle8:before {\n    -webkit-animation-delay: -0.5s;\n    animation-delay: -0.5s;\n}\n\n.sk-fading-circle .sk-circle9:before {\n    -webkit-animation-delay: -0.4s;\n    animation-delay: -0.4s;\n}\n\n.sk-fading-circle .sk-circle10:before {\n    -webkit-animation-delay: -0.3s;\n    animation-delay: -0.3s;\n}\n\n.sk-fading-circle .sk-circle11:before {\n    -webkit-animation-delay: -0.2s;\n    animation-delay: -0.2s;\n}\n\n.sk-fading-circle .sk-circle12:before {\n    -webkit-animation-delay: -0.1s;\n    animation-delay: -0.1s;\n}\n\n@-webkit-keyframes sk-circleFadeDelay {\n    0%,\n    39%,\n    100% {\n        opacity: 0;\n    }\n    40% {\n        opacity: 1;\n    }\n}\n\n@keyframes sk-circleFadeDelay {\n    0%,\n    39%,\n    100% {\n        opacity: 0;\n    }\n    40% {\n        opacity: 1;\n    }\n}\n\n.counter {\n    position: relative;\n    top: 101px;\n    width: 25px;\n    font-size: x-large;\n    cursor: default;\n    overflow: hidden;\n    margin: 0px auto;\n}\n\n.timer {\n    height: 25px;\n    float: left;\n}\n\n.timer-val-container {\n    float: left;\n}\n\n.seconds-single {\n    animation: count-10 10s steps(10, end) infinite;\n}\n\n.timer-val {\n    width: 25px;\n    height: 25px;\n    text-align: center;\n    line-height: 25px;\n    text-shadow: 0 1px 4px rgba(0, 0, 0, 0.1);\n}\n\n@keyframes count-10 {\n    to {\n        transform: translateY(-250px);\n    }\n}\n\n@-webkit-keyframes count-10 {\n    to {\n        transform: translateY(-250px);\n    }\n}\n*/\n\ntable.shorts {\n    margin: 2px 3px;\n    padding: 2px 3px;\n    border: 1px solid #fafafa;\n    border-collapse: collapse;\n    font-size: x-small\n}\n\ntd.k {\n    text-align: center;\n    padding: 2px 5px;\n    margin: 2px 5px;\n    border: 1px solid #cccccc;\n}\n\ntd.d {\n    padding: 2px 5px;\n    margin: 2px 5px;\n    border: 1px solid #cccccc;\n}\n\nth.d {\n    padding: 2px 5px;\n    margin: 2px 5px;\n    border: 1px solid #cccccc;\n}\n\nth.cxx,\nth.cxz,\nth.cxb,\nth.cxs,\nth.cxv,\ntd.cxx,\ntd.cxz,\ntd.cxb,\ntd.cxs,\ntd.cxv {\n    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAeCAYAAADtlXTHAAAAFklEQVR42mP88OHDf0aSiGfPntGaAAAL8XAJa+SuYgAAAABJRU5ErkJggg==);\n    background-repeat: repeat-x;\n    border: 1px solid #cccccc;\n    vertical-align: middle;\n}\n\ntd.cxx,\ntd.cxz,\ntd.cxb,\ntd.cxs,\ntd.cxv {\n    font: normal 12px arial, tahoma, sans-serif;\n    line-height: 24px;\n    background: #fefefe;\n    padding: 1px;\n    color: rgb(34, 34, 34);\n}\n\ntd.cxy {\n    font: normal 12px arial, tahoma, sans-serif;\n    line-height: 24px;\n    border: 1px solid #cccccc;\n    vertical-align: middle;\n    text-align: right;\n    background: #fefefe;\n    padding: 1px;\n    color: rgb(34, 34, 34);\n}\n\ninput[type="color"] {\n    -webkit-appearance: none;\n    border: none;\n    width: 100%;\n    height: 100%;\n}\n\ninput[type="color"]::-webkit-color-swatch-wrapper {\n    padding: 0;\n}\n\ninput[type="color"]::-webkit-color-swatch {\n    border: none;\n}\n\n.unselectable {\n    -webkit-touch-callout: none;\n    -webkit-user-select: none;\n    -khtml-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n}\n\ndiv.cxc {\n    left: 0px;\n    top: 0px;\n    margin-left: 5px;\n    margin-top: 2px;\n    white-space: nowrap;\n    overflow: hidden;\n}\n\n.json-key {\n    color: #d73027;\n    font-weight: bold;\n}\n\n.json-value {\n    color: #4575b4;\n}\n\n.json-string {\n    color: #a85302;\n}\n\n.json-number {\n    color: #4575b4;\n}\n\n.json-boolean {\n    color: #666600;\n}\n\n.json-null {\n    color: #4575b4;\n}\n\n.json-comment {\n    color: #397300\n}\n\ndiv.CanvasXpressCode {\n    border: 1px solid rgb(51, 122, 183);\n    border-radius: 5px;\n    box-sizing: content-box;\n    background-color: rgba(255, 255, 255, 0.95);\n    cursor: move;\n    color: rgb(34, 34, 34);\n    font: normal 12px arial, tahoma, sans-serif;\n    margin: 2px 3px;\n    padding: 18px;\n    position: absolute;\n    white-space: nowrap;\n}\n\nimg.CanvasXpressCode, svg.CanvasXpressCode {\n    background: rgba(0, 0, 0, 0) !important;\n    border: 0px none !important;\n    box-shadow: 0 0 0px rgba(0, 0, 0, 0) !important;\n    cursor: default;\n    float: right;\n    margin: 5px 8px 0px 0px !important;\n    -moz-user-select: none;\n    -khtml-user-select: none;\n    -webkit-user-select: none;\n    -o-user-select: none;\n    -ms-user-select: none;\n}\n\npre.CanvasXpressCode {\n    text-align: left;\n    padding: inherit;\n    margin: inherit;\n    font-size: inherit;\n    line-height: inherit;\n    color: inherit;\n    word-break: inherit;\n    word-wrap: inherit;\n    background-color: inherit;\n    border: none;\n    border-radius: inherit;\n    counter-reset: line;\n}\n\ndiv.CanvasXpressCodeContainer {\n    box-sizing: content-box;\n    clear: both;\n    height: 500px;\n    width: 600px;\n    /*\n    max-height: 500px;\n    max-width: 600px;\n    */\n    overflow: auto;\n    padding: 10px;\n    resize: auto;\n}\n\ndiv.CanvasXpressCodeContent {\n    box-sizing: content-box;\n    margin: 2px 3px;\n    padding: 2px 3px;\n}\n\npre.CanvasXpressCodeContent {\n    margin: 0 !important;\n    padding: 0 !important;\n    white-space: pre;\n    font-size: inherit;\n    line-height: inherit;\n    color: inherit;\n    border-radius: inherit;\n}\n\npre.CanvasXpressCodeContent:before {\n    counter-reset: listing;\n}\n\npre.CanvasXpressCodeContent code {\n    counter-increment: listing;\n    white-space: inherit;\n    line-height: 1.5;\n}\n\npre.CanvasXpressCodeContent code::before {\n    content: counter(listing) " ";\n    display: inline-block;\n    width: 3em;\n    /* Fixed width */\n    border-right: 1px solid #ddd;\n    padding-left: auto;\n    margin-left: auto;\n    text-align: right;\n    /*color: #888;*/\n    background-color: #efefef;\n    -webkit-user-select: none;\n}\n\n\n/*\n * Carousel\n */\n\ndiv.CanvasXpressCarouselScene {\n    position: relative;\n    margin: 0;\n}\n\ndiv.CanvasXpressCarousel {\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    transform: translateZ(-288px);\n    transform-style: preserve-3d;\n    transition: transform 1s;\n}\n\nspan.CanvasXpressCarousel {\n    padding: 1px;\n    position: absolute;\n    border: 1px solid rgb(51, 122, 183);\n    border-radius: 2px;\n    line-height: 10px;\n    cursor: pointer;\n}\n\ndiv.CanvasXpressCarouselCell {\n    position: absolute;\n    transition: transform 1s, opacity 1s;\n    background-color: rgba(255, 255, 255, 0.95);\n    border: 1px solid rgb(51, 122, 183);\n    border-radius: 5px;\n    backface-visibility: hidden;\n}\n\ndiv.CanvasXpressCarouselCell:nth-child(1) {\n    transform: rotateY( 0deg) translateZ(288px);\n}\n\ndiv.CanvasXpressCarouselCell:nth-child(2) {\n    transform: rotateY( 40deg) translateZ(288px);\n}\n\ndiv.CanvasXpressCarouselCell:nth-child(3) {\n    transform: rotateY( 80deg) translateZ(288px);\n}\n\ndiv.CanvasXpressCarouselCell:nth-child(4) {\n    transform: rotateY(120deg) translateZ(288px);\n}\n\ndiv.CanvasXpressCarouselCell:nth-child(5) {\n    transform: rotateY(160deg) translateZ(288px);\n}\n\ndiv.CanvasXpressCarouselCell:nth-child(6) {\n    transform: rotateY(200deg) translateZ(288px);\n}\n\ndiv.CanvasXpressCarouselCell:nth-child(7) {\n    transform: rotateY(240deg) translateZ(288px);\n}\n\ndiv.CanvasXpressCarouselCell:nth-child(8) {\n    transform: rotateY(280deg) translateZ(288px);\n}\n\ndiv.CanvasXpressCarouselCell:nth-child(9) {\n    transform: rotateY(320deg) translateZ(288px);\n}\n\nimg.CanvasXpressCarousel:hover, svg.CanvasXpressCarousel:hover {\n    -webkit-transform: scale(1.8, 1.8);\n    -ms-transform: scale(1.8, 1.8);\n    transform: scale(1.8, 1.8);\n    transition-duration: 0.3s;\n    -webkit-transition-duration: 0.3s;\n    /* Safari */\n    box-shadow: 10px 10px 5px #888888;\n    z-index: 2;\n    position: relative;\n    cursor: pointer;\n    background: rgba(0, 0, 0, 0) !important;\n    border: 0px none !important;\n    box-shadow: 0 0 0px rgba(0, 0, 0, 0) !important;\n    margin: 0px !important;\n}\n\n\n/*\n * CanvasXpressBin\n */\n\ndiv.CanvasXpressBin {\n    border: 1px solid rgb(51, 122, 183);\n    border-radius: 5px;\n    background-color: rgba(255, 255, 255, 0.95);\n    box-sizing: content-box;\n    cursor: move;\n    color: rgb(34, 34, 34);\n    font: normal 12px arial, tahoma, sans-serif;\n    margin: 2px 3px;\n    padding: 2px 3px 5px 3px;\n    position: absolute;\n    white-space: nowrap;\n    -moz-user-select: none;\n    -khtml-user-select: none;\n    -webkit-user-select: none;\n    -o-user-select: none;\n}\n\nimg.CanvasXpressBin, svg.CanvasXpressBin {\n    background: rgba(0, 0, 0, 0) !important;\n    border: 0px none !important;\n    box-shadow: 0 0 0px rgba(0, 0, 0, 0) !important;\n    cursor: default;\n    float: right;\n    margin: 5px 5px 0px 0px !important;\n    -moz-user-select: none;\n    -khtml-user-select: none;\n    -webkit-user-select: none;\n    -o-user-select: none;\n    -ms-user-select: none;\n}\n\ndiv.CanvasXpressBinContainer {\n    background-color: rgba(255, 255, 255, 0.95);\n    box-sizing: content-box;\n    clear: both;\n    text-align: left;\n    -moz-user-select: none;\n    -khtml-user-select: none;\n    -webkit-user-select: none;\n    -o-user-select: none;\n}\n\ndiv.CanvasXpressBinContainerTab {\n    background-color: rgba(255, 255, 255, 0.95);\n    border-width: 1px 1px 1px 1px;\n    border-style: solid;\n    border-color: rgb(51, 122, 183);   \n    border-radius: 5px;\n    box-sizing: content-box;\n    clear: none;\n    height: 16px;\n    margin: 3px;\n    overflow-y: auto;\n    padding: 5px;\n    -moz-user-select: none;\n    -khtml-user-select: none;\n    -webkit-user-select: none;\n    -o-user-select: none;\n}\n\ndiv.CanvasXpressBinNameContainer {\n    background-color: rgba(255, 255, 255, 0.95);\n    border: 1px solid rgb(51, 122, 183);\n    border-radius: 5px;\n    box-sizing: content-box;\n    clear: both;\n    max-height: 400px;\n    margin: 8px;\n    overflow-y: auto;\n    padding: 5px;\n    -moz-user-select: none;\n    -khtml-user-select: none;\n    -webkit-user-select: none;\n    -o-user-select: none;\n}\n\ninput.CanvasXpressBin {\n    background-color: rgba(255, 255, 255, 0.95);\n    border: 1px solid rgb(51, 122, 183);\n    color: rgb(34, 34, 34);\n    cursor: default;\n    font: normal 12px arial, tahoma, sans-serif;\n    line-height: 24px;\n    padding-left: 3px;\n    border-radius: 5px;\n    margin: 3px;\n}\n\ntable.CanvasXpressBinTable {\n    border: collapse;\n    line-height: 20px;\n    color: rgb(34, 34, 34);\n    cursor: default;\n    font: normal 12px arial, tahoma, sans-serif;\n    line-height: 24px;\n    padding-left: 3px;\n    -moz-user-select: none;\n    -khtml-user-select: none;\n    -webkit-user-select: none;\n    -o-user-select: none;\n}\n\nspan.CanvasXpressBin {\n    font: bold 12px arial, tahoma, sans-serif;\n    color: rgb(34, 34, 34);\n    margin-left: 5px;\n    -moz-user-select: none;\n    -khtml-user-select: none;\n    -webkit-user-select: none;\n    -o-user-select: none;\n}\n\nimg.CanvasXpressBin::selection,\nsvg.CanvasXpressBin::selection,\nspan.CanvasXpressBin::selection {\n    background: rgba(0, 0, 0, 0) !important;\n    border: 0px none !important;\n    box-shadow: 0 0 0px rgba(0, 0, 0, 0) !important;\n    color: rgb(0, 0, 0);\n    margin: 0px !important;\n}\n\n/*\n * CanvasXpressCustomizer\n */\n\ndiv.CanvasXpressCustomizerContainer {\n    background-color:rgba(255, 255, 255, 0.95);\n    float: left;\n    margin: 0;\n}\n\ndiv.CanvasXpressCustomizerContainerActive {\n    background: linear-gradient(rgb(243, 253, 255), rgb(217, 232, 251));\n    float: left;\n    margin: 0;\n}\n\ndiv.CanvasXpressCustomizerLeftPanel {\n    left: 0;\n    top: 0;\n    border-right: 1px solid  rgb(51, 122, 183) !important;\n    background-color:rgba(255, 255, 255, 0.95);\n    float: left;\n    display: grid;\n}\n\na.CanvasXpressCustomizerLeft, a.CanvasXpressCustomizerLeftActive {\n    border-style: solid;\n    border-width: 1px;\n    color: rgb(34, 34, 34);\n    cursor: pointer;\n    display: block;\n    font: normal 12px arial, tahoma, sans-serif;\n    line-height: 24px;\n    list-style: none;\n    margin: 0px;\n    outline-style: none;\n    outline-width: 0px;\n    position: relative;\n    text-decoration: none !important;\n    white-space: nowrap;\n}\n\na.CanvasXpressCustomizerLeft {\n    border-color: rgba(0, 0, 0, 0);\n}\n\na.CanvasXpressCustomizerLeftActive {\n    background: linear-gradient(rgb(243, 253, 255), rgb(217, 232, 251));\n    border-color: rgb(170, 204, 246);\n}\n\nimg.CanvasXpressCustomizerLeft, svg.CanvasXpressCustomizerLeft {\n    background-position: center;\n    border: 0px none !important;\n    color: rgb(34, 34, 34);\n    cursor: pointer;\n    font: normal 12px arial, tahoma, sans-serif;\n    height: 24px;\n    line-height: 24px;\n    list-style: none;\n    margin: 0px !important;\n    padding: 0px;\n    position: absolute;\n    vertical-align: top;\n    width: 24px;\n    white-space: nowrap;\n    background: rgba(0, 0, 0, 0) !important;\n    box-shadow: 0 0 0px rgba(0, 0, 0, 0) !important;\n}\n\nspan.CanvasXpressCustomizerLeft {\n    color: rgb(34, 34, 34);\n    cursor: pointer;\n    font: normal 16px arial, tahoma, sans-serif;\n    line-height: 28px;\n    list-style: none;\n    white-space: nowrap;\n    position: relative;\n}\n\ndiv.CanvasXpressCustomizerRightPanel {\n    top: 0;\n    border-right: 1px solid  rgb(51, 122, 183) !important;\n    background-color:rgba(255, 255, 255, 0.95);\n    float: left;\n}\n\ndiv.CanvasXpressCustomizerRightContainer {\n    background-color:rgba(255, 255, 255, 0.95);\n    border: 1px solid  rgb(51, 122, 183) !important;\n    border-radius: 4px;\n    margin: 3px;\n}\n\ndiv.CanvasXpressCustomizerRightContainerActive {\n    background-color:rgba(255, 255, 255, 0.95);\n    border: 1px dashed rgb(255, 0, 0) !important;\n    border-radius: 4px;\n    margin: 3px;\n}\n\nimg.CanvasXpressCustomizerRightContainer, svg.CanvasXpressCustomizerRightContainer {\n    background-position: center;\n    border: 1px solid  rgb(51, 122, 183) !important;\n    border-radius: 4px;\n    color: rgb(34, 34, 34);\n    font: normal 12px arial, tahoma, sans-serif;\n    list-style: none;\n    margin: 10px 0px 0px 10px !important;\n    position: relative;\n    padding: 2px;\n    vertical-align: top;\n    white-space: nowrap;\n    background: rgba(0, 0, 0, 0) !important;\n    box-shadow: 0 0 0px rgba(0, 0, 0, 0) !important;\n}\n\ndiv.CanvasXpressCustomizerRight {\n    background-color: #dddddd;\n    border-top: 1px solid  rgb(51, 122, 183) !important;\n    /*\n    border-bottom: 1px solid  rgb(51, 122, 183) !important;\n    */\n    color: rgb(34, 34, 34);\n    font: normal 12px arial, tahoma, sans-serif;\n    line-height: 24px;\n    list-style: none;\n    margin: auto;\n    outline-style: none;\n    outline-width: 0px;\n    text-decoration: none;\n    white-space: nowrap;\n    width: -webkit-fill-available;\n    height: -webkit-fill-available;\n    display: flex;\n}\n\nimg.CanvasXpressCustomizerRight, svg.CanvasXpressCustomizerRight {\n    background-position: center;\n    border: 0px none !important;\n    color: rgb(34, 34, 34);\n    font: normal 12px arial, tahoma, sans-serif;\n    height: 24px;\n    line-height: 24px;\n    list-style: none;\n    margin: 0px !important;\n    position: relative;\n    padding: 0px;\n    vertical-align: top;\n    width: 24px;\n    white-space: nowrap;\n    background: rgba(0, 0, 0, 0) !important;\n    box-shadow: 0 0 0px rgba(0, 0, 0, 0) !important;\n}\n\nimg.CanvasXpressCustomizerRightB, svg.CanvasXpressCustomizerRightB {\n    background-position: center;\n    border: 1px solid rgb(51, 122, 183) !important;\n    border-radius: 4px;\n    color: rgb(34, 34, 34);\n    font: normal 12px arial, tahoma, sans-serif;\n    height: 24px;\n    line-height: 24px;\n    list-style: none;\n    margin: 0px !important;\n    position: relative;\n    padding: 0px;\n    vertical-align: top;\n    width: 24px;\n    white-space: nowrap;\n    background: rgba(0, 0, 0, 0) !important;\n    box-shadow: 0 0 0px rgba(0, 0, 0, 0) !important;\n}\n\nspan.CanvasXpressCustomizerRight {\n    color: rgb(34, 34, 34);\n    font: normal 16px arial, tahoma, sans-serif;\n    line-height: 28px;\n    list-style: none;\n    white-space: nowrap;\n    position: relative;\n    height: 28px;\n}\n\nspan.CanvasXpressCustomizerRightHelp {\n    color: rgb(34, 34, 34);\n    font: normal 12px arial, tahoma, sans-serif;\n    list-style: none;\n    white-space: normal;\n    position: relative;\n}\n\na.CanvasXpressCustomizerRight {\n    color: rgb(34, 34, 34);\n    margin-right: 10px;\n    margin-left: 15px;\n}\n\n/*\n * Header\n */\n\ndiv.CanvasXpressCustomizerHeader {\n    background-color: #dddddd;\n    border-top: 1px solid  rgb(51, 122, 183) !important;\n    color: rgb(34, 34, 34);\n    font: normal 12px arial, tahoma, sans-serif;\n    line-height: 24px;\n    list-style: none;\n    margin: auto;\n    outline-style: none;\n    outline-width: 0px;\n    text-decoration: none;\n    white-space: nowrap;\n    width: -webkit-fill-available;\n    height: -webkit-fill-available;\n    display: flex;\n}\n\nspan.CanvasXpressCustomizerHeader {\n    color: rgb(34, 34, 34);\n    font: normal 16px arial, tahoma, sans-serif;\n    line-height: 28px;\n    list-style: none;\n    white-space: nowrap;\n    position: relative;\n    height: 28px;\n}\n\nimg.CanvasXpressCustomizerHeader, svg.CanvasXpressCustomizerHeader {\n    background-position: center;\n    border: 0px none !important;\n    color: rgb(34, 34, 34);\n    font: normal 12px arial, tahoma, sans-serif;\n    height: 24px;\n    line-height: 24px;\n    list-style: none;\n    margin: 0px !important;\n    position: relative;\n    padding: 0px;\n    vertical-align: top;\n    width: 24px;\n    white-space: nowrap;\n    background: rgba(0, 0, 0, 0) !important;\n    box-shadow: 0 0 0px rgba(0, 0, 0, 0) !important;\n}\n\nspan.CanvasXpressCustomizerHeaderHelp {\n    color: rgb(34, 34, 34);\n    font: normal 12px arial, tahoma, sans-serif;\n    list-style: none;\n    white-space: normal;\n    position: relative;\n}\n\n/*\n * Options Customizer\n */\n\ndiv.CanvasXpressOptionsCustomizer {\n    top: 0;\n    background-color:rgba(255, 255, 255, 0.95);\n    float: left;\n}\n\nimg.CanvasXpressOptionsCustomizer, svg.CanvasXpressOptionsCustomizer {\n    background-position: center;\n    border: 1px solid  rgb(51, 122, 183) !important;\n    border-radius: 4px;\n    color: rgb(34, 34, 34);\n    font: normal 12px arial, tahoma, sans-serif;\n    list-style: none;\n    margin: 10px 0px 0px 10px !important;\n    position: relative;\n    padding: 2px;\n    vertical-align: top;\n    white-space: nowrap;\n    background: rgba(0, 0, 0, 0) !important;\n    box-shadow: 0 0 0px rgba(0, 0, 0, 0) !important;\n}\n\n/*\n * Axes Customizer\n */\n\n div.CanvasXpressAxesCustomizer {\n    background-color:rgba(255, 255, 255, 0.95);\n    border: 1px solid rgb(51, 122, 183);\n    border-radius: 4px;\n    box-sizing: content-box;\n    font: normal 16px arial, tahoma, sans-serif;\n    color: rgb(34, 34, 34);\n    margin: 3px;\n    white-space: normal;\n    overflow-y: auto;\n    overflow-x: hidden;\n}\n\nimg.CanvasXpressAxesCustomizer, svg.CanvasXpressAxesCustomizer {\n    background-position: center;\n    border: 0px none !important;\n    color: rgb(34, 34, 34);\n    font: normal 12px arial, tahoma, sans-serif;\n    list-style: none;\n    position: relative;\n    padding: 0px;\n    vertical-align: top;\n    white-space: nowrap;\n    background: rgba(0, 0, 0, 0) !important;\n    box-shadow: 0 0 0px rgba(0, 0, 0, 0) !important;\n}\n\n/*\n * Search Customizer\n */\ninput.CanvasXpressSearchCustomizer {\n    margin: 9px;\n    background-color: rgba(255, 255, 255, 0.95);\n    border: 1px solid rgb(51, 122, 183);\n    color: rgb(34, 34, 34);\n    cursor: default;\n    font: normal 16px arial, tahoma, sans-serif;\n    padding-left: 3px;\n    height: 40px;\n    border-radius: 4px;\n    float: left;\n    clear: left;\n}\n\nselect.CanvasXpressSearchCustomizer {\n    margin: 9px;\n    background-color: rgba(255, 255, 255, 0.95);\n    border: 1px solid rgb(51, 122, 183);\n    color: rgb(34, 34, 34);\n    cursor: default;\n    font: normal 16px arial, tahoma, sans-serif;\n    padding-left: 3px;\n    border-radius: 4px;\n    float: left;\n    clear: left;\n}\n\nspan.CanvasXpressSearchCustomizer {\n    color: rgb(34, 34, 34);\n    font: normal 16px arial, tahoma, sans-serif;\n    line-height: 28px;\n    list-style: none;\n    position: relative;\n    height: 28px;\n    margin-top: 5px;\n    float: left;\n    clear: left;\n}\n\nspan.CanvasXpressSearchCustomizerSelect, span.CanvasXpressSearchCustomizerDescription, span.CanvasXpressSearchCustomizerCategory, span.CanvasXpressSearchCustomizerCurrent {\n    font: normal 16px arial, tahoma, sans-serif;\n    line-height: 28px;\n    list-style: none;\n    position: relative;\n    height: 28px;\n    margin-top: 5px;\n    float: left;\n    clear: left;\n}\n\nspan.CanvasXpressSearchCustomizerSelect {\n    color: rgb(34, 34, 34);\n}\n\nspan.CanvasXpressSearchCustomizerDescription, span.CanvasXpressSearchCustomizerCategory {\n    color: rgb(51, 122, 183);\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n}\n\nspan.CanvasXpressSearchCustomizerCurrent {\n    color: rgb(51, 122, 183);\n}\n\nspan.CanvasXpressSearchCustomizerSelect:before {\n    color: rgb(34, 34, 34);\n    font-weight: bold;\n    content: "Select property (";\n}\n\nspan.CanvasXpressSearchCustomizerSelect:after {\n    color: rgb(34, 34, 34);\n    font-weight: bold;\n    content: ")";\n}\n\nspan.CanvasXpressSearchCustomizerDescription:before {\n    color: rgb(34, 34, 34);\n    font-weight: bold;\n    content: "Description [ ";\n}\n\nspan.CanvasXpressSearchCustomizerCategory:before {\n    color: rgb(34, 34, 34);\n    font-weight: bold;\n    content: "Category [ ";\n}\n\nspan.CanvasXpressSearchCustomizerDescription:after, span.CanvasXpressSearchCustomizerCategory:after {\n    color: rgb(34, 34, 34);\n    font-weight: bold;\n    content: " ]";\n}\n\nspan.CanvasXpressSearchCustomizerCurrent:before {\n    color: rgb(34, 34, 34);\n    font-weight: bold;\n    content: "Current Value [ ";\n}\n\nspan.CanvasXpressSearchCustomizerCurrent:after {\n    color: rgb(34, 34, 34);\n    font-weight: bold;\n    content: " ]";\n}\n\n/*\n * File Customizer\n */\n\na.CanvasXpressFileCustomizer, div.CanvasXpressToolCustomizer {\n    border-color: rgba(0, 0, 0, 0);\n    border-bottom-color: rgb(170, 204, 246);\n    border-style: solid;\n    border-width: 1px;\n    color: rgb(34, 34, 34);\n    cursor: pointer;\n    display: block;\n    font: normal 12px arial, tahoma, sans-serif;\n    line-height: 24px;\n    list-style: none;\n    margin: 0px;\n    outline-style: none;\n    outline-width: 0px;\n    position: relative;\n    text-decoration: none;\n    white-space: nowrap;\n}\n\na.CanvasXpressFileCustomizerActive, div.CanvasXpressToolCustomizerActive {\n    background: linear-gradient(rgb(243, 253, 255), rgb(217, 232, 251));\n    border-color: rgb(170, 204, 246);\n    border-style: solid;\n    border-width: 1px;\n    color: rgb(34, 34, 34);\n    cursor: pointer;\n    display: block;\n    font: normal 12px arial, tahoma, sans-serif;\n    line-height: 24px;\n    list-style: none;\n    margin: 0px;\n    outline-style: none;\n    outline-width: 0px;\n    position: relative;\n    text-decoration: none;\n    white-space: nowrap;\n}\n\nimg.CanvasXpressFileCustomizer, svg.CanvasXpressFileCustomizer {\n    background-position: center;\n    border: 0px none !important;\n    color: rgb(34, 34, 34);\n    cursor: pointer;\n    font: normal 12px arial, tahoma, sans-serif;\n    height: 24px;\n    line-height: 24px;\n    list-style: none;\n    margin: 0px !important;\n    padding: 0px;\n    position: relative;\n    vertical-align: top;\n    width: 24px;\n    white-space: nowrap;\n    background: rgba(0, 0, 0, 0) !important;\n    box-shadow: 0 0 0px rgba(0, 0, 0, 0) !important;\n}\n\nspan.CanvasXpressFileCustomizer {\n    color: rgb(34, 34, 34);\n    cursor: pointer;\n    font: normal 16px arial, tahoma, sans-serif;\n    line-height: 28px;\n    list-style: none;\n    white-space: nowrap;\n    position: relative;\n}\n\n/*\n * Data Customizer\n */\n\ndiv.CanvasXpressCustomizerPanel {\n    font: normal 16px arial, tahoma, sans-serif;\n    margin: 10px;\n    float: left;\n}\n\nspan.CanvasXpressCustomizerPanel {\n    border-width: 1px 1px 0 1px;\n    border-color: rgb(51, 122, 183);\n    border-style: solid;\n    border-radius: 5px 5px 0 0;\n    padding: 8px;\n    font: normal 16px arial, tahoma, sans-serif;\n}\n\nspan.CanvasXpressCustomizerPanelActive {\n    border-bottom-width: 3px;\n    border-left-color: rgb(51, 122, 183);\n    border-top-color: rgb(51, 122, 183);\n    border-right-color: rgb(51, 122, 183);\n    border-bottom-color: #dddddd;\n    border-style: solid;\n    border-radius: 5px 5px 0 0;\n    padding: 8px;\n    font: normal 16px arial, tahoma, sans-serif;\n}\n\ndiv.CanvasXpressDataCustomizerActive {\n    border: 1px dashed rgb(255, 0, 0);\n    border-radius: 4px;\n    box-sizing: content-box;\n    font: normal 16px arial, tahoma, sans-serif;\n    color: rgb(34, 34, 34);\n    margin: 3px;\n    padding: 3px;\n    white-space: normal;\n    overflow-y: auto;\n    overflow-x: hidden;\n}\n\ndiv.CanvasXpressDataCustomizer {\n    border: 1px solid rgb(51, 122, 183);\n    border-radius: 4px;\n    box-sizing: content-box;\n    font: normal 16px arial, tahoma, sans-serif;\n    color: rgb(34, 34, 34);\n    margin: 3px;\n    padding: 3px;\n    white-space: normal;\n    overflow-y: auto;\n    overflow-x: hidden;\n}\n\ndiv.CanvasXpressDataCustomizerPanel {\n    background-color:rgba(255, 255, 255, 0.95);\n    -webkit-transition: all 0.5s ease;\n    -moz-transition: all 0.5s ease;\n    -o-transition: all 0.5s ease;\n    -ms-transition: all 0.5s ease;\n    transition: all 0.5s ease;\n    cursor: default;\n    height: auto;\n    max-height: 1000px;\n    overflow: hidden;\n    padding-top: 10px;\n}\n\nimg.CanvasXpressDataCustomizerActive, svg.CanvasXpressDataCustomizerActive {\n    background: rgba(0, 0, 0, 0) !important;\n    box-shadow: 0 0 0px rgba(0, 0, 0, 0) !important;\n    border: 1px dashed rgb(255, 0, 0) !important;\n    border-radius: 5px;\n    cursor: pointer;\n    margin: 3px !important;\n    padding: 2px;\n}\n\nimg.CanvasXpressDataCustomizer, svg.CanvasXpressDataCustomizer {\n    background: rgba(0, 0, 0, 0) !important;\n    box-shadow: 0 0 0px rgba(0, 0, 0, 0) !important;\n    border: 0px !important;\n    cursor: pointer;\n    margin: 3px !important;\n    padding: 2px;\n    -webkit-transform: scale(1, 1);\n    -ms-transform: scale(1, 1);\n    transform: scale(1, 1);\n    transition-duration: 0.3s;\n    -webkit-transition-duration: 0.3s;\n    /* Safari */\n}\n\nimg.CanvasXpressDataCustomizer:hover,\nimg.CanvasXpressDataCustomizer3:hover img.CanvasXpressDataCustomizer4:hover,\nsvg.CanvasXpressDataCustomizer:hover,\nsvg.CanvasXpressDataCustomizer3:hover svg.CanvasXpressDataCustomizer4:hover {\n    background: rgba(0, 0, 0, 0) !important;\n    border: 1px solid rgb(51, 122, 183) !important;\n    border-radius: 5px;\n    cursor: pointer;\n    margin: 2px 3px !important;\n    padding: 3px;\n    -webkit-transform: scale(1.8, 1.8);\n    -ms-transform: scale(1.8, 1.8);\n    transform: scale(1.8, 1.8);\n    transition-duration: 0.3s;\n    -webkit-transition-duration: 0.3s;\n    /* Safari */\n    box-shadow: 10px 10px 5px #888888 !important;\n    z-index: 2;\n    position: relative;\n}\n\nimg.CanvasXpressDataCustomizer2,\nimg.CanvasXpressDataCustomizer4,\nsvg.CanvasXpressDataCustomizer2,\nsvg.CanvasXpressDataCustomizer4 {\n    background: rgba(0, 0, 0, 0) !important;\n    box-shadow: 0 0 0px rgba(0, 0, 0, 0) !important;\n    border: 0px none !important;\n    border-radius: 0px;\n    cursor: pointer;\n    margin: 2px 3px !important;\n    -webkit-transform: scale(1, 1);\n    -ms-transform: scale(1, 1);\n    transform: scale(1, 1);\n    transition-duration: 0.3s;\n    -webkit-transition-duration: 0.3s;\n    /* Safari */\n}\n\nimg.CanvasXpressDataCustomizer2:hover, svg.CanvasXpressDataCustomizer2:hover {\n    background: rgba(0, 0, 0, 0) !important;\n    border: 0px none !important;\n    border-radius: 5px;\n    cursor: pointer;\n    margin: 2px 4px !important;\n    padding: 4px;\n    -webkit-transform: scale(1.8, 1.8);\n    -ms-transform: scale(1.8, 1.8);\n    transform: scale(1.8, 1.8);\n    transition-duration: 0.3s;\n    -webkit-transition-duration: 0.3s;\n    /* Safari */\n    box-shadow: 10px 10px 5px #888888 !important;\n    z-index: 2;\n    position: relative;\n}\n\nimg.CanvasXpressDataCustomizer3, svg.CanvasXpressDataCustomizer3 {\n    background: rgba(0, 0, 0, 0) !important;\n    box-shadow: 0 0 0px rgba(0, 0, 0, 0) !important;\n    border: 1px solid rgb(51, 122, 183) !important;\n    border-radius: 5px;\n    cursor: pointer;\n    margin: 12px 3px 3px 3px !important;\n    padding: 2px 3px;\n    -webkit-transform: scale(1, 1);\n    -ms-transform: scale(1, 1);\n    transform: scale(1, 1);\n    transition-duration: 0.3s;\n    -webkit-transition-duration: 0.3s;\n    /* Safari */\n}\n\nimg.CanvasXpressDataCustomizerMask, svg.CanvasXpressDataCustomizerMask {\n    background: rgba(0, 0, 0, 0) !important;\n    border: 0px none !important;\n    box-shadow: 0 0 0px rgba(0, 0, 0, 0) !important;\n    position: absolute;\n    left: 0px;\n    top: 0px;\n    margin: 0px !important;\n    width: 100%;\n    height: 20px;\n    -moz-user-select: none;\n    -khtml-user-select: none;\n    -webkit-user-select: none;\n    -o-user-select: none;\n    -ms-user-select: none;\n    -moz-user-select: none;\n}\n\nspan.CanvasXpressDataCustomizerNumeric,\nspan.CanvasXpressDataCustomizerString,\nspan.CanvasXpressDataCustomizerUnique,\nspan.CanvasXpressDataCustomizerNumericActive,\nspan.CanvasXpressDataCustomizerStringActive,\nspan.CanvasXpressDataCustomizerUniqueActive {\n    border: 1px solid rgb(51, 122, 183);\n    border-radius: 5px;\n    cursor: move;\n    font: normal 16px arial, tahoma, sans-serif;\n    color: rgb(34, 34, 34);\n    margin: 3px;\n    padding: 3px;\n    word-wrap: normal;\n    display: inline-block;\n    text-align: start;\n    max-width: 150px;\n    overflow: hidden;\n    position: relative;\n    -moz-user-select: none;\n    -khtml-user-select: none;\n    -webkit-user-select: none;\n    -o-user-select: none;\n    -ms-user-select: none;\n}\n\nspan.CanvasXpressDataCustomizerString {\n    color: rgb(255, 0, 0);\n}\n\nspan.CanvasXpressDataCustomizerUnique {\n    color: rgb(0, 0, 255);\n}\n\nspan.CanvasXpressDataCustomizerListNumeric,\nspan.CanvasXpressDataCustomizerListString,\nspan.CanvasXpressDataCustomizerListUnique,\nspan.CanvasXpressDataCustomizerListNumericActive,\nspan.CanvasXpressDataCustomizerListStringActive,\nspan.CanvasXpressDataCustomizerListUniqueActive {\n    border: none;\n    cursor: move;\n    font: normal 16px arial, tahoma, sans-serif;\n    color: rgb(34, 34, 34);\n    margin: 0;\n    padding: 0;\n    width: 350px;\n    white-space: nowrap;\n    display: inline-block;\n    text-align: start;\n    overflow: hidden;\n    position: relative;\n    -moz-user-select: none;\n    -khtml-user-select: none;\n    -webkit-user-select: none;\n    -o-user-select: none;\n    -ms-user-select: none;\n}\n\nspan.CanvasXpressDataCustomizerListNumeric,\nspan.CanvasXpressDataCustomizerListNumericActive {\n   color: rgb(34, 34, 34);\n}\n\nspan.CanvasXpressDataCustomizerListString,\nspan.CanvasXpressDataCustomizerListStringActive {\n    color: rgb(255, 0, 0);\n}\n\nspan.CanvasXpressDataCustomizerListUnique,\nspan.CanvasXpressDataCustomizerListUniqueActive {\n    color: rgb(0, 0, 255);\n}\n\nspan.CanvasXpressDataCustomizerListNumeric:before,\nspan.CanvasXpressDataCustomizerListNumericActive:before {\n    font: normal 10px courier;\n    color: rgb(51, 122, 183);\n    content: "\\00a0#\\00a0\\00a0\\00a0";\n }\n \n span.CanvasXpressDataCustomizerListString:before,\n span.CanvasXpressDataCustomizerListStringActive:before {\n    font: normal 10px courier;\n    color: rgb(51, 122, 183);\n    content: "Abc\\00a0\\00a0";\n }\n \n span.CanvasXpressDataCustomizerListUnique:before,\n span.CanvasXpressDataCustomizerListUniqueActive:before {\n    font: normal 10px courier;\n    color: rgb(51, 122, 183);\n    content: "Unq\\00a0\\00a0";\n }\n\nspan.CanvasXpressDataCustomizer {\n    border: 1px solid rgb(51, 122, 183);\n    border-radius: 5px;\n    cursor: pointer;\n    font: bold 16px arial, tahoma, sans-serif;\n    color: rgb(34, 34, 34);\n    line-height: 380%;\n    padding: 6px 29px;\n    margin-left: -4px;\n}\n\nimg.CanvasXpressDataCustomizerActive::selection,\nimg.CanvasXpressDataCustomizer::selection,\nsvg.CanvasXpressDataCustomizerActive::selection,\nsvg.CanvasXpressDataCustomizer::selection,\ndiv.CanvasXpressDataCustomizerActive::selection,\ndiv.CanvasXpressDataCustomizer::selection,\nimg.CanvasXpressDataCustomizerMask::selection,\nsvg.CanvasXpressDataCustomizerMask::selection,\nspan.CanvasXpressDataCustomizerNumeric::selection,\nspan.CanvasXpressDataCustomizerString::selection,\nspan.CanvasXpressDataCustomizerUnique::selection,\nspan.CanvasXpressDataCustomizerListNumeric::selection,\nspan.CanvasXpressDataCustomizerListString::selection,\nspan.CanvasXpressDataCustomizerListUnique::selection,\nspan.CanvasXpressDataCustomizer::selection {\n    background: rgba(0, 0, 0, 0);\n    color: rgb(0, 0, 0);\n    padding: 0;\n}\n\nspan.CanvasXpressDataCustomizerListNumericActive,\nspan.CanvasXpressDataCustomizerListStringActive,\nspan.CanvasXpressDataCustomizerListUniqueActive {\n    background: linear-gradient(rgb(243, 253, 255), rgb(217, 232, 251));\n}\n\nspan.CanvasXpressDataCustomizerNumericActive,\nspan.CanvasXpressDataCustomizerStringActive,\nspan.CanvasXpressDataCustomizerUniqueActive {\n    background: linear-gradient(rgb(243, 253, 255), rgb(217, 232, 251));\n}\n\nspan.CanvasXpressDataCustomizerListNumeric,\nspan.CanvasXpressDataCustomizerListString,\nspan.CanvasXpressDataCustomizerListUnique {\n    background-color: rgba(0, 0, 0, 0);\n}\n\nspan.CanvasXpressDataCustomizerNumeric,\nspan.CanvasXpressDataCustomizerString,\nspan.CanvasXpressDataCustomizerUnique {\n    background-color: rgba(0, 0, 0, 0);\n}\n\n/*\n * CanvasXpressDrag\n */\n\ndiv.CanvasXpressDrag {\n    opacity: 0.75;\n    box-sizing: content-box;\n    filter: alpha(opacity=75);\n    background-color: rgba(255, 255, 255, 0.95);\n    position: absolute;\n}\n\ndiv.CanvasXpressDragLayout {\n    opacity: 0.65;\n    box-sizing: content-box;\n    filter: alpha(opacity=65);\n    background-color: rgba(51, 122, 183, 0.65);\n    position: absolute;\n}\n\ndiv.CanvasXpressTooltip {\n    border: 1px solid rgb(51, 122, 183);\n    border-radius: 5px;\n    background-color: rgba(255, 255, 255, 0.95);\n    box-sizing: content-box;\n    cursor: move;\n    color: rgb(34, 34, 34);\n    font: normal 12px arial, tahoma, sans-serif;\n    margin: 2px 3px;\n    overflow: hidden;\n    padding: 5px 6px;\n    position: absolute;\n    white-space: nowrap;\n    text-align: left;\n}\n\ndiv.CanvasXpressTooltipArrowLeft {\n    position: absolute;\n    height: 0;\n    width: 0;\n    background: rgba(255, 255, 255, 0.95);\n    border: 2px solid rgb(51, 122, 183);\n    border-top: none;\n    border-right: none;\n    z-index: 1;\n}\n\ndiv.CanvasXpressTooltipArrowLeft:after,\ndiv.CanvasXpressTooltipArrowLeft:before {\n    border: solid transparent;\n    right: 0px;\n    content: "";\n    position: absolute;\n    pointer-events: none;\n}\n\ndiv.CanvasXpressTooltipArrowLeft:after {\n    border-color: rgba(245, 245, 245, 0);\n    border-right-color: rgb(245, 245, 245);\n    border-width: 8px;\n    margin-top: -8px;\n}\n\ndiv.CanvasXpressTooltipArrowLeft:before {\n    border-color: rgba(51, 122, 183, 0);\n    border-right-color: rgb(51, 122, 183);\n    border-width: 9px;\n    margin-top: -9px;\n}\n\ndiv.CanvasXpressTooltipArrowRight {\n    position: absolute;\n    height: 0;\n    width: 0;\n    background: rgba(255, 255, 255, 0.95);\n    border: 2px solid rgb(51, 122, 183);\n    border-top: none;\n    border-left: none;\n    z-index: 1;\n}\n\ndiv.CanvasXpressTooltipArrowRight:after,\ndiv.CanvasXpressTooltipArrowRight:before {\n    border: solid transparent;\n    right: 0px;\n    content: "";\n    position: absolute;\n    pointer-events: none;\n}\n\ndiv.CanvasXpressTooltipArrowRight:after {\n    border-color: rgba(245, 245, 245, 0);\n    border-left-color: rgb(245, 245, 245);\n    border-width: 9px;\n    margin-top: -9px;\n}\n\ndiv.CanvasXpressTooltipArrowRight:before {\n    border-color: rgba(51, 122, 183, 0);\n    border-left-color: rgb(51, 122, 183);\n    border-width: 8px;\n    margin-top: -8px;\n}\n\nimg.CanvasXpressTooltip, svg.CanvasXpressTooltip {\n    background: rgba(0, 0, 0, 0) !important;\n    border: 0px none !important;\n    box-shadow: 0 0 0px rgba(0, 0, 0, 0) !important;\n    cursor: default;\n    float: right;\n    margin: 5px 8px 0px 0px !important;\n    cursor: default;\n    -moz-user-select: none;\n    -khtml-user-select: none;\n    -webkit-user-select: none;\n    -o-user-select: none;\n    -ms-user-select: none;\n}\n\nspan.CanvasXpressTooltip {\n    border: 1px solid rgb(51, 122, 183);\n    border-radius: 5px;\n    background-color: rgba(255, 255, 255, 0.95);\n    cursor: move;\n    color: rgb(34, 34, 34);\n    font: normal 12px arial, tahoma, sans-serif;\n    margin: 2px 3px;\n    max-height: 800px;\n    overflow: hidden;\n    padding: 5px 6px;\n    position: absolute;\n    white-space: nowrap;\n    text-align: left;\n    z-index: 1;\n}\n\ndiv.CanvasXpressMousePosition {\n    background: rgba(0, 0, 0, 0) !important;\n    border: 0px none !important;\n    box-shadow: 0 0 0px rgba(0, 0, 0, 0) !important;\n    cursor: move;\n    color: rgb(34, 34, 34);\n    font: normal 12px arial, tahoma, sans-serif;\n    position: absolute;\n    white-space: nowrap;\n    text-align: left;\n    z-index: 1;\n}\n\nimg.CanvasXpressMousePosition, svg.CanvasXpressMousePosition {\n    background: rgba(0, 0, 0, 0) !important;\n    border: 0px none !important;\n    box-shadow: 0 0 0px rgba(0, 0, 0, 0) !important;\n    cursor: default;\n    margin: 0px !important;\n    padding: 0px !important;\n    position: relative;\n    left: -13px;\n    top: -13px;\n    cursor: default;\n    -moz-user-select: none;\n    -khtml-user-select: none;\n    -webkit-user-select: none;\n    -o-user-select: none;\n    -ms-user-select: none;\n}\n\nspan.CanvasXpressMousePosition {\n    background: rgba(0, 0, 0, 0) !important;\n    border: 0px none !important;\n    box-shadow: 0 0 0px rgba(0, 0, 0, 0) !important;\n    cursor: move;\n    color: rgb(34, 34, 34);\n    font: normal 12px arial, tahoma, sans-serif;\n    position: absolute;\n    left: 4px;\n    top: -20px;\n    white-space: nowrap;\n    text-align: left;\n    z-index: 1;\n}\n\n\n/*\ndiv.CanvasXpressCanvasResizer {\n\n}\n*/\n\ndiv.CanvasXpressCanvasResizerClose {\n    box-sizing: content-box;\n    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAOCAYAAAD9lDaoAAAAcUlEQVR42mM8e/bsfwYCgBGkSE9PD6eCS5cuIRSxsrIy/P79Gy4J42MoAgGQBDIbRRFMNwzATMVQhGwNVjehm/T582cwfevWLfxu+vTpO8Pt29ew++7Hjx8MvLy8mIpgAKTg/38WOB+uiGCIE1JAXUUA5WZpcWW3WYkAAAAASUVORK5CYII=);\n}\n\ndiv.CanvasXpressCanvasResizerloading1 {\n    box-sizing: content-box;\n    background-image: url(data:image/gif;base64,R0lGODlhZABkAPQAAP///wCQ/47N/mi9/jan/jyp/ly3/hyc/hKX/iyj/lS0/kyw/n7G/obK/iSf/gCQ/3bD/kSt/gqU/gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJBwAAACwAAAAAZABkAAAF/yAgjmRpnmiqrmzrvnAsz3Rt33iu73zfMgoDw0csAgSEh/JBEBifucRymYBaaYzpdHjtuhba5cJLXoHDj3HZBykkIpDWAP0YrHsDiV5faB3CB3c8EHuFdisNDlMHTi4NEI2CJwWFewQuAwtBMAIKQZGSJAmVelVGEAaeXKEkEaQSpkUNngYNrCWEpIdGj6C3IpSFfb+CAwkOCbvEy8zNzs/Q0dLT1NUrAgOf1kUMBwjfB8rbOQLe3+C24wxCNwPn7wrjEAv0qzMK7+eX2wb0mzXu8iGIty1TPRvlBKazJgBVnBsN8okbRy6VgoUUM2rcyLGjx48gQ4ocSbKkyZMoJf8JMFCAwAJfKU0gOUDzgAOYHiE8XDGAJoKaalAoObHERFESU0oMFbF06YikKQQsiKCJBYGaNR2ocPr0AQCuQ8F6Fdt1rNeuLSBQjRDB3qSfPm1uPYvUbN2jTO2izQs171e6J9SuxXjCAFaaQYkC9ku2MWCnYR2rkDqV4IoEWG/O5fp3ceS7nuk2Db0YBQS3UVm6xBmztevXsGPLnk27tu3buHOvQU3bgIPflscJ4C3D92/gFNUWgHPj2G+bmhkWWL78xvPjDog/azCdOmsXzrF/dyYgAvUI7Y7bDF5N+QLCM4whM7BxvO77+PPr38+//w4GbhSw0xMQDKCdJAwkcIx2ggMSsQABENLHzALILDhMERAQ0BKE8IUSwYILPjEAhCQ2yMoCClaYmA8NQLhhh5I0oOCCB5rAQI0mGEDiRLfMQhWOI3CXgIYwotBAA/aN09KQCVw4m4wEMElAkTEhIWUCSaL0IJPsySZVlC/5J+aYZJZppgghAAAh+QQJBwAAACwAAAAAZABkAAAF/yAgjmRpnmiqrmzrvnAsz3Rt33iu73zfMhAIw0csAgQDhESCGAiM0NzgsawOolgaQ1ldIobZsAvS7ULE6BW5vDynfUiFsyVgL58rwQLxOCzeKwwHCIQHYCsLbH95Dg+OjgeAKAKDhIUNLA2JVQt4KhGPoYuSJEmWlgYuSBCYLRKhjwikJQqnlgpFsKGzJAa2hLhEuo6yvCKUv549BcOjxgOVhFdFdbAOysYNCgQK2HDMVAXexuTl5ufo6err7O3kAgKs4+48AhEH+ATz9Dj2+P8EWvET0YDBPlX/Eh7i18CAgm42ICT8l2ogAAYPFSyU0WAiPjcDtSkwIHCGAAITE/+UpCeg4EqTKPGptEikpQEGL2nq3Mmzp8+fQIMKHUq0qNGjSJO6E8DA4RyleQw4mOqgk1F4LRo4OEDVwTQUjk48MjGWxC6zD0aEBbBWbdlJBhYsAJlC6lSuDiKoaOuWbdq+fMMG/us37eCsCuRaVWG3q94UfEUIJlz48GHJsND6VaFJ8UEAWrdS/SqWMubNgClP1nz67ebIJQTEnduicdWDZ92aXq17N+G1kV2nwEqnqYGnUJMrX868ufPn0KNLn069Or+N0hksSFCArkWmORgkcJCgvHeWCiIYOB9jAfnx3D+fE5A+woKKNSLAh4+dXYMI9gEonwoKlPeeON8ZAOCgfTc0UB5/OiERwQA5xaCJff3xM6B1HHbo4YcghigiNXFBhEVLGc5yEgEJEKBPFBBEUEAE7M0yAIs44leTjDNGUKEkBrQopDM+NFDAjEf+CMiNQhJAWpE8zqjkG/8JGcGGIjCQIgoMyOhjOkwNMMCWJTTkInJZNYAlPQYU4KKT0xnpopsFTKmUPW8ScOV0N7oJ53TxJAbBmiMWauihiIIYAgAh+QQJBwAAACwAAAAAZABkAAAF/yAgjmRpnmiqrmzrvnAsz3Rt33iu73zv/8AZo4BAFBjBpI5xKBYPSKWURnA6CdNszGrVeltc5zcoYDReiXDCBSkQCpDxShA52AuCFoQribMKEoGBA3IpdQh2B1h6TQgOfisDgpOQhSMNiYkIZy4CnC0Ek4IFliVMmnYGQAmigWull5mJUT6srRGwJESZrz+SrZWwAgSJDp8/gJOkuaYKwUADCQ4JhMzW19jZ2tvc3d7f4NoCCwgPCAs4AwQODqrhIgIOD/PzBzYDDgfsDgrvAAX0AqKjIW0fuzzhJASk56CGwXwOaH1bGLBGQX0H31Gch6CGgYf93gGkOJCGgYIh3/8JUBjQHg6J/gSMlBABob+bOHPq3Mmzp8+fQIMKHUq0qNEUAiBAOHZ0RYN10p41PZGg6jQHNk/M07q1BD2vX0l0BdB1rIiKKhgoMMD0BANpVqmpMHv2AVm7I7aa1Yu3bl6+YvuuUEDYXdq40qqhoHu38d+wfvf2pRjYcYq1a0FNg5vVBGPAfy03lhwa8mjBJxqs7Yzi6WapgemaPh0b9diythnjSAqB9dTfwIMLH068uPHjyJMrX84cnIABCwz4Hj4uAYEEeHIOMAAbhjrr1lO+g65gQXcX0a5fL/nOwIL3imlAUG/d8DsI7xfAlEFH/SKcEAywHw3b9dbcgQgmqOByggw26KAIDAxwnnAGEGAhe0AIoEAE0mXzlBsWTojDhhFwmE0bFroR3w8RLNAiLtg8ZaGFbfVgwIv2WaOOGzn+IIABCqx4TRk1pkXYgMQNUUAERyhnwJIFFNAjcTdGaWJydCxZ03INBFjkg2CGKeaYCYYAACH5BAkHAAAALAAAAABkAGQAAAX/ICCOZGmeaKqubOu+cCzPdG3feK7vfO//wBnDUCAMBMGkTkA4OA8EpHJKMzyfBqo2VkBcEYWtuNW8HsJjoIDReC2e3kPEJRgojulVPeFIGKQrEGYOgCoMBwiJBwx5KQMOkJBZLQILkAuFKQ2IiYqZjQANfA4HkAltdKgtBp2tA6AlDJGzjD8KrZ0KsCSipJCltT63uAiTuyIGsw66asQHn6ACCpEKqj8DrQevxyVr0D4NCgTV3OXm5+jp6uvs7e7v6gIQEQkFEDgNCxELwfACBRICBtxGQ1QCPgn6uRsgsOE9GgoQ8inwLV2ChgLRzKCHsI9Cdg4wBkxQw9LBPhTh/wG4KHIODQYnDz6Ex1DkTCEL6t189w+jRhsf/Q04WACPyqNIkypdyrSp06dQo0qdSrWqVUcL+NER0MAa1AYOHoh9kKCiiEoE6nl1emDsWAIrcqYlkDKF2BNjTeQl4bbEXRF//47oe8KABLdjg4qAOTcBAcWAH+iVLBjA3cqXJQ/WbDkzX84oFCAey+wEg8Zp136e3Pnz3sitN28mDLsyiQWjxRo7EaFxXRS2W2OmDNqz7NrDY5swkPsB5FC91a6gHRm08OKvYWu3nd1EW8Rw9XA1q1TAd7Flr76wo1W9+/fw48ufT7++/fv48+s/wXUABPLwCWAAAQRiolQD/+FDIKRdBOz0TjgKkGNDAwsSSJBKEESowHOUEFjEY0lJEyGAegyw4G5HNcAAiS0g2ACL+8Uo44w01mjjjTi+wMCKMs5TQAQO+iCPAQme00AEP/4IIw0DZLVAkLA0kGQBBajGQ5MLKIDiMUcmGYGVO0CQZXvnCIAkkFOsYQCH0XQVAwP+sRlgVvssadU8+6Cp3zz66JmfNBFE8EeMKrqZ46GIJqrooi6EAAAh+QQJBwAAACwAAAAAZABkAAAF/yAgjmRpnmiqrmzrvnAsz3Rt33iu73zv/0Baw2BoBI88g2N5MCCfNgZz6WBArzEl1dHEeluGw9Sh+JpTg+1y8GpABGdWQxFZWF0L7nLhEhAOgBFwcScNCYcOCXctAwsRbC5/gIGEJwuIh3xADJOdg5UjEQmJowlBYZ2AEKAkeZgFQZypB0asIgyYCatBCakEtiQMBQkFu0GGkwSfwGYQBovM0dLT1NXW19jZ2ts+AgYKA8s0As6Q3AADBwjrB9AzogkEytwN6uvs4jAQ8fxO2wr3ApqTMYAfgQSatBEIeK8MjQEHIzrUBpAhgoEyIkSct62BxQP5YAhoZCDktQEB2/+d66ZAQZGVMGPKnEmzps2bOHPq3Mmzp88v5Iz9ZLFAgtGLjCIU8IezqFGjDzCagCBPntQSDx6cyKoVa1avX0mEBRB2rAiuXU00eMoWwQoF8grIW2H2rFazX/HeTUs2Lde+YvmegMCWrVATC+RWpSsYsN6/I/LyHYtWL+ATAwo/PVyCatWrgU1IDm3Zst2+k/eiEKBZgtsVA5SGY1wXcmTVt2v77aq7cSvNoIeOcOo6uPARAhhwPs68ufPn0KNLn069uvXrfQpklSAoRwOT1lhXdgC+BQSlEZZb0175QcJ3Sgt039Y+6+sZDQrI119LW/26MUQQ33zaSFDfATY0kFh2euewV9l748AkwAGVITidAAA9gACE2HXo4YcghijiiN0YEIEC5e3QAAP9RWOiIxMd0xKK0zhSRwRPMNCSAepVYoCNTMnoUopxNDLbEysSuVIDLVLXyALGMSfAAgsosICSP01J5ZXWQUBlj89hSeKYZJZpJoghAAAh+QQJBwAAACwAAAAAZABkAAAF/yAgjmRpnmiqrmzrvnAsz3Rt33iu73zv/0Bag8FoBI+8RmKZMCKfNQbTkSAIoNgYZElNOBjZcGtLLUPE6JSg601cXQ3IO60SQAzyF9l7bgkMbQNzdCUCC1UJEWAuAgOCLwYOkpIDhCdbBIiVQFIOB5IHVpYlBpmmC0EMk6t9oyIDplUGqZ+ek06uAAwEpqJBCqsOs7kjDAYLCoM/DQa1ycSEEBCL0NXW19jZ2tvc3d7fPwJDAsoz4hC44AIFB+0R5TGwvAbw2Q0E7fnvNQIEBbwEqHVj0A5BvgPpYtzj9W+TNwUHDR4QqBAgr1bdIBzMlzCGgX8EFtTD1sBTPgQFRv/6YTAgDzgAJfP5eslDAAMFDTrS3Mmzp8+fQIMKHUq0qNGjSJMisYNR6YotCBAE9GPAgE6fEKJqnbiiQYQCYCmaePDgBNmyJc6mVUuC7Ai3AOC+ZWuipAStUQusGFDgawQFK+TOjYtWhFvBhwsTnlsWseITDfDibVoCAtivgFUINtxY8VnHiwdz/ty2MwoBkrVSJtEAbNjAjxeDnu25cOLaoU2sSa236wCrKglvpss5t/DHcuEO31z57laxTisniErganQSNldf3869u/fv4MOLH0++vHk/A5YQeISjQfBr6yTIl5/Sxp2/76sNmM9fuwsDESyAHzgJ8DdfbzN4JWCkBBFYd40DBsqXgA0DMIhMfsQUGGEENjRQIR4v7Rehfy9gWE18/DkEnh0RJELieTDGKOOMNAa1DlkS1Bceap894ICJUNjhCJAyFNAjWahAA8ECTKrow5FkIVDNMcgMAwSUzFnCAJMLvHiDBFBKWQ1LLgERAZRJBpVTiQ70eMBQDSigAHSnLYCAj2kCJYCcBjwz3h98EnkUM1adJ2iNiCaq6KKLhgAAIfkECQcAAAAsAAAAAGQAZAAABf8gII5kaZ5oqq5s675wLM90bd94ru987//AoHAYEywShIWAyKwtCMjEokmFCaJQwrLKVTWy0UZ3jCqAC+SfoCF+NQrIQrvFWEQU87RpQOgbYg0MMAwJDoUEeXoiX2Z9iT0LhgmTU4okEH0EZgNCk4WFEZYkX5kEEEJwhoaVoiIGmklDEJOSgq0jDAOnRBBwBba3wcLDxMXGx8jJysvMzUJbzgAGn7s2DQsFEdXLCg4HDt6cNhHZ2dDJAuDqhtbkBe+Pxgze4N8ON+Tu58jp6+A3DPJtU9aNnoM/OBrs4wYuAcJoPYBBnEixosWLGDNq3Mixo8ePIEOKxGHEjIGFKBj/DLyY7oDLA1pYKIgQQcmKBw9O4MxZYmdPnyRwjhAKgOhQoCcWvDyA4IC4FAHtaLvJM2hOo0WvVs3K9ehRrVZZeFsKc0UDmnZW/jQhFOtOt2C9ingLt+uJsU1dolmhwI5NFVjnxhVsl2tdwkgNby0RgSyCpyogqGWbOOvitlvfriVc2LKKli9jjkRhRNPJ0ahTq17NurXr17Bjy55NG0UDBQpOvx6AoHdTiTQgGICsrIFv3wdQvoCwoC9xZAqO+34Ow0DfBQ+VEZDeW4GNOgsWTC4WnTv1QQaAJ2vA9Hhy1wPaN42XWoD1Acpr69/Pv79/ZgN8ch5qBUhgoIF7BSMAfAT07TDAgRCON8ZtuDWYQwIQHpigKAzgpoCEOGCYoQQJKGidARaaYB12LhAwogShKMhAiqMc8JYDNELwIojJ2EjXAS0UCOGAywxA105EjgBBBAlMZdECR+LESmpQRjklagxE+YB6oyVwZImtCUDAW6K51mF6/6Wp5po2hAAAIfkECQcAAAAsAAAAAGQAZAAABf8gII5kaZ5oqq5s675wLM90bd94ru987//AoHAYE0AWC4iAyKwNCFDCoEmFCSJRQmRZ7aoaBWi40PCaUc/o9OwTNMqvhiE84LYYg4GSnWpEChEQMQ0MVlgJWnZ8I36AgHBAT4iIa4uMjo9CC5MECZWWAI2Oij4GnaefoEcFBYVCAlCIBK6gIwwNpEACCgsGubXAwcLDxMXGx8jJysvMZ7/KDAsRC5A1DQO9z8YMCQ4J39UzBhHTCtrDAgXf3gkKNg3S0hHhx9zs3hE3BvLmzOnd6xbcYDCuXzMI677RenfOGAR1CxY26yFxosWLGDNq3Mixo8ePIEOKHEmyZDEBAwz/GGDQcISAlhMFLHBwwIEDXyyOZFvx4MGJnj5LABU6lETPEUcBJEVa9MQAm1Ad0CshE4mCqUaDZlWqlatXpl9FLB26NGyKCFBr3lyxCwk1nl3F+iwLlO7crmPr4r17NqpNAzkXKMCpoqxcs0ftItaaWLFhEk9p2jyAlSrMukTjNs5qOO9hzipkRiVsMgXKwSxLq17NurXr17Bjy55Nu7ZtIoRWwizZIMGB3wR2f4FQuVjv38gLCD8hR8HVg78RIEdQnAUD5woqHjMgPfpv7S92Oa8ujAHy8+TZ3prYgED331tkp0Mef7YbJctv69/Pv7//HOlI0JNyQ+xCwHPACOCAmV4S5AfDAAhEKF0qfCyg14BANCChhAc4CAQCFz6mgwIbSggYKCGKmAOJJSLgDiggXiiBC9cQ5wJ3LVJ4hoUX5rMCPBIEKcFbPx5QYofAHKAXkissIKSQArGgIYfgsaGAki62JMCTT8J0Wh0cQcClkIK8JuaYEpTpGgMIjIlAlSYNMKaOq6HUpgQIgDkbAxBAAOd/gAYqKA0hAAAh+QQJBwAAACwAAAAAZABkAAAF/yAgjmRpnmiqrmzrvnAsz3Rt33iu73zv/8CgcChrQAYNotImiBQKi+RyCjM4nwOqtmV4Og3bcIpRuDLEaBNDoTjDGg1BWmVQGORDA2GfnZusCxFgQg17BAUEUn4jEYGNQwOHhhCLJFYREQpDEIZ7ipUCVgqfQAt7BYOVYkduqq6vsLGys7S1tre4ubq7UwIDBn04DAOUuwJ7CQQReDUMC8/FuXrJydE0Bs92uwvUBAnBNM7P4LcK3ufkMxDAvMfnBbw9oQsDzPH3+Pn6+/z9/v8AAwocSLCgwYO9IECwh9AEBAcJHCRq0aAOqRMPHmDMaCKjRhIeP47gKIIkyZEeU/8IgMiSABc2mlacRAlgJkebGnGizCmyZk8UAxIIHdoqRR02LGaW5AkyZFOfT5c6pamURFCWES+aCGWgKIqqN3uGfapzqU+xTFEIiChUYo+pO0uM3fnzpMm6VUs8jDixoVoIDBj6HUy4sOHDiBMrXsy4sWMSTSRkLCD4ltcZK0M+QFB5lgIHEFPNWKB5cq7PDg6AFh0DQem8sVaCBn0gQY3XsGExSD0bdI0DryXgks0bYg3SpeHhQj07HQzgIR10lmWAr/MYC1wjWDD9sffv4MOLR3j1m5J1l/0UkMCevXIgDRIcQHCAQHctENrrv55D/oH/B7ynnn7t2fYDAwD+R59zVmEkQCB7BvqgQIIAphdGBA9K4JILcbzQAID0/cfgFvk9aE0KDyFA34kp+AdgBK4MQKCAKEqg4o0sniBAAQBS9goEESQQQY4nJHDjjRGy0EBg/Rx55GFO3ngYAVFuWBiCRx4w4kENFKBiAVuOJ+aYZIoZAgAh+QQJBwAAACwAAAAAZABkAAAF/yAgjmRpnmiqrmzrvnAsz3Rt33iu73zv/8CgcChrMBoNotImUCwiiuRyCoNErhEIdduCPJ9arhgleEYWgrHaxIBAGDFkep1iGBhzobUQkdJLDAtOYUENEXx8fn8iBguOBkMNiImLJF6CA0MCBYh9lSMCEAYQikAMnBFwn2MCRquvsLGys7S1tre4ubq7vDqtpL5HvAIGBMYDeTTECgrJtwwEBcYEzjIMzKO7A9PGpUUGzN61EMbSBOIxoei0ZdOQvTuhAw3V8Pb3+Pn6+/z9/v8AAwocSBCQo0wFUwhI8KDhgwPrerUSUK8EAYcOD/CTRCABGhUMMGJ8d6JhSZMlHP+mVEkCJQCULkVgVFggQUcCC1QoEOlQQYqYMh+8FDrCZEyjRIMWRdoyaZ2bNhOoOmGAZ8OcKIAO3bqUpdKjSXk25XqiQdSb60JaJWlCK9OlZLeChetVrtMSm85iTXFRpMafdYfefRsUqEuYg7WWkGTTk4qFGB1EHEavIpuDCTNr3sy5s+fPoEOLHk063YCaCZD1mlpjk4TXrwtYjgWh5gLWMiDA3o3wFoQECRwExw2jwG7YCXDlFS58r4wEx187wMUgOHDgEWpEiC4h+a281h34pKE7em9b1YUDn7xiwHHZugKdYc/CSoIss0vr38+/v//RTRAQhRIC4AHLAAcgoCCkAuf50IACDkTYzCcCJLiggvTRAKEDB0TIFh0GXLjgeD4wwGGEESaQIREKiKggiT2YiOKJxI0xgIsIfKgCPS+YFWGHwq2oiYULHpCfCFZE+FELBszoQIN0NEDkATWaIACHB2TpwJEAEGOdaqsIMIACYLKwQJZoHuDcCkZweUsBaCKQJQGfEZBmlgV8ZkCCceqYWXVpUgOamNEYIOR/iCaq6KIAhAAAIfkECQcAAAAsAAAAAGQAZAAABf8gII5kaZ5oqq5s675wLM90bd94ru987//AoHBIExCPOMhiAUE6ZYLl0vissqJSqnWLGiwUA64Y1WiMfwKGmSgwgM+otsKwFhoWkYgBbmIo/gxEeXgLfCUNfwp1QQp4eoaHakdRelqQl5iZmpucnZ6foKGioz8LCA8IC5akOAcPr68Oq6CzMguwuAWjEBEFC4syDriwEqICvcg2w7iiDQXPBRHAMKfLD8bR0RE2t8u6ogzPEU01AsK4ErWdAtMzxxKvBeqs9PX29/j5+vv8/f7/AAMKNAEBwryBJAYgkMCwEMIUAxhKlOBQn4AB0cKsWDiRYTsRr07AMjGSBDOT10D/pgyJkmUXAjAJkEMBoaPEmSRTogTgkue1niGB6hwptAXMAgR8qahpU4JGkTpHBI06bGdRlSdV+lQRE6aCjU3n9dRatCzVoT/NqjCAFCbOExE7VoQ6tqTUtC2jbtW6967eE2wjPFWhUOLchzQNIl7MuLHjx5AjS55MubJlGQ3cKDj4kMEBBKARDKZ1ZwDnFQI+hwb9UZMAAglgb6uhcDXor6EUwN49GoYC26AJiFoQu3jvF7Vt4wZloDjstzBS2z7QWtPuBKpseA594LinAQYU37g45/Tl8+jTq19fmUF4yq8PfE5QPQeEAgkKBLpUQL7/BEJAkMCADiSwHx8NyIeAfH8IHOgDfgUm4MBhY0Dg34V7ACEhgQnMxocACyoon4M9EBfhhJdEcOEBwrkwQAQLeHcCAwNKSEB9VRzjHwHmAbCAA0Ci6AIDeCjiGgQ4jjBAkAcAKSNCCgQZ5HKOGQBkk0Bm+BgDUjZJYmMGYOmAlpFlRgd7aKap5poyhAAAIfkECQcAAAAsAAAAAGQAZAAABf8gII5kaZ5oqq5s675wLM90bd94ru987//AoHBIExCPOIHB0EA6ZUqFwmB8WlkCqbR69S0cD8SCy2JMGd3f4cFmO8irRjPdW7TvEaEAYkDTTwh3bRJCEAoLC35/JIJ3QgaICwaLJYGND0IDkRCUJHaNBXoDAxBwlGt3EqadRwIFEmwFq6y0tba3uLm6u7y9viYQEQkFpb8/AxLJybLGI7MwEMrSA81KEQNzNK/SyQnGWQsREZM1CdzJDsYN4RHh2TIR5xLev1nt4zbR59TqCuOcNVxxY1btXcABBBIkGPCsmcOHECNKnEixosWLGDNq3MjxCIRiHV0wIIAAQQKAIVX/MDhQsqQElBUFNFCAjUWBli0dGGSEyUQbn2xKOOI5IigAo0V/pmBQIEIBgigg4MS5MynQoz1FBEWKtatVrVuzel2h4GlTflGntnzGFexYrErdckXaiGjbEv6aEltxc+qbFHfD2hUr+GvXuIfFmmD6NEJVEg1Y4oQJtC3ixDwtZzWqWfGJBksajmhA0iTllCk+ikbNurXr17Bjy55Nu7bt20HkKGCwOiWDBAeC63S4B1vvFAIIBF+e4DEuAQsISCdHI/Ly5ad1QZBeQLrzMssRLFdgDKF0AgUUybB+/YB6XiO7Sz9+QkAE8cEREPh+y8B5hjbYtxxU6kDQAH3I7XEgnG4MNujggxBGCAVvt2XhwIUK8JfEIX3YYsCFB2CoRwEJJEQAgkM0ANyFLL7HgwElxphdGhCwCKIDLu4QXYwEUEeJAAnc6EACOeowAI8n1TKAjQ74uIIAo9Bnn4kRoDgElEEmQIULNWY54wkMjAKSLQq+IMCQQwZp5UVdZpnkbBC4OeSXqCXnJpG1qahQc7c1wAADGkoo6KCEFrpCCAA7AAAAAAAAAAAA);\n    background-position: 50% 50%;\n    background-repeat: no-repeat;\n}\n\ndiv.CanvasXpressCanvasResizerloading2 {\n    box-sizing: content-box;\n    background-image: url(data:image/gif;base64,R0lGODlhZABkAPQAAP///6qqqtjY2MzMzLu7u729vcjIyLOzs6+vr7i4uMXFxcPDw9PT09bW1rW1taqqqtHR0cDAwK2trQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJBwAAACwAAAAAZABkAAAF/yAgjmRpnmiqrmzrvnAsz3Rt33iu73zfMgoDw0csAgSEh/JBEBifucRymYBaaYzpdHjtuhba5cJLXoHDj3HZBykkIpDWAP0YrHsDiV5faB3CB3c8EHuFdisNDlMHTi4NEI2CJwWFewQuAwtBMAIKQZGSJAmVelVGEAaeXKEkEaQSpkUNngYNrCWEpIdGj6C3IpSFfb+CAwkOCbvEy8zNzs/Q0dLT1NUrAgOf1kUMBwjfB8rbOQLe3+C24wxCNwPn7wrjEAv0qzMK7+eX2wb0mzXu8iGIty1TPRvlBKazJgBVnBsN8okbRy6VgoUUM2rcyLGjx48gQ4ocSbKkyZMoJf8JMFCAwAJfKU0gOUDzgAOYHiE8XDGAJoKaalAoObHERFESU0oMFbF06YikKQQsiKCJBYGaNR2ocPr0AQCuQ8F6Fdt1rNeuLSBQjRDB3qSfPm1uPYvUbN2jTO2izQs171e6J9SuxXjCAFaaQYkC9ku2MWCnYR2rkDqV4IoEWG/O5fp3ceS7nuk2Db0YBQS3UVm6xBmztevXsGPLnk27tu3buHOvQU3bgIPflscJ4C3D92/gFNUWgHPj2G+bmhkWWL78xvPjDog/azCdOmsXzrF/dyYgAvUI7Y7bDF5N+QLCM4whM7BxvO77+PPr38+//w4GbhSw0xMQDKCdJAwkcIx2ggMSsQABENLHzALILDhMERAQ0BKE8IUSwYILPjEAhCQ2yMoCClaYmA8NQLhhh5I0oOCCB5rAQI0mGEDiRLfMQhWOI3CXgIYwotBAA/aN09KQCVw4m4wEMElAkTEhIWUCSaL0IJPsySZVlC/5J+aYZJZppgghAAAh+QQJBwAAACwAAAAAZABkAAAF/yAgjmRpnmiqrmzrvnAsz3Rt33iu73zfMhAIw0csAgQDhESCGAiM0NzgsawOolgaQ1ldIobZsAvS7ULE6BW5vDynfUiFsyVgL58rwQLxOCzeKwwHCIQHYCsLbH95Dg+OjgeAKAKDhIUNLA2JVQt4KhGPoYuSJEmWlgYuSBCYLRKhjwikJQqnlgpFsKGzJAa2hLhEuo6yvCKUv549BcOjxgOVhFdFdbAOysYNCgQK2HDMVAXexuTl5ufo6err7O3kAgKs4+48AhEH+ATz9Dj2+P8EWvET0YDBPlX/Eh7i18CAgm42ICT8l2ogAAYPFSyU0WAiPjcDtSkwIHCGAAITE/+UpCeg4EqTKPGptEikpQEGL2nq3Mmzp8+fQIMKHUq0qNGjSJO6E8DA4RyleQw4mOqgk1F4LRo4OEDVwTQUjk48MjGWxC6zD0aEBbBWbdlJBhYsAJlC6lSuDiKoaOuWbdq+fMMG/us37eCsCuRaVWG3q94UfEUIJlz48GHJsND6VaFJ8UEAWrdS/SqWMubNgClP1nz67ebIJQTEnduicdWDZ92aXq17N+G1kV2nwEqnqYGnUJMrX868ufPn0KNLn069Or+N0hksSFCArkWmORgkcJCgvHeWCiIYOB9jAfnx3D+fE5A+woKKNSLAh4+dXYMI9gEonwoKlPeeON8ZAOCgfTc0UB5/OiERwQA5xaCJff3xM6B1HHbo4YcghigiNXFBhEVLGc5yEgEJEKBPFBBEUEAE7M0yAIs44leTjDNGUKEkBrQopDM+NFDAjEf+CMiNQhJAWpE8zqjkG/8JGcGGIjCQIgoMyOhjOkwNMMCWJTTkInJZNYAlPQYU4KKT0xnpopsFTKmUPW8ScOV0N7oJ53TxJAbBmiMWauihiIIYAgAh+QQJBwAAACwAAAAAZABkAAAF/yAgjmRpnmiqrmzrvnAsz3Rt33iu73zv/8AZo4BAFBjBpI5xKBYPSKWURnA6CdNszGrVeltc5zcoYDReiXDCBSkQCpDxShA52AuCFoQribMKEoGBA3IpdQh2B1h6TQgOfisDgpOQhSMNiYkIZy4CnC0Ek4IFliVMmnYGQAmigWull5mJUT6srRGwJESZrz+SrZWwAgSJDp8/gJOkuaYKwUADCQ4JhMzW19jZ2tvc3d7f4NoCCwgPCAs4AwQODqrhIgIOD/PzBzYDDgfsDgrvAAX0AqKjIW0fuzzhJASk56CGwXwOaH1bGLBGQX0H31Gch6CGgYf93gGkOJCGgYIh3/8JUBjQHg6J/gSMlBABob+bOHPq3Mmzp8+fQIMKHUq0qNEUAiBAOHZ0RYN10p41PZGg6jQHNk/M07q1BD2vX0l0BdB1rIiKKhgoMMD0BANpVqmpMHv2AVm7I7aa1Yu3bl6+YvuuUEDYXdq40qqhoHu38d+wfvf2pRjYcYq1a0FNg5vVBGPAfy03lhwa8mjBJxqs7Yzi6WapgemaPh0b9diythnjSAqB9dTfwIMLH068uPHjyJMrX84cnIABCwz4Hj4uAYEEeHIOMAAbhjrr1lO+g65gQXcX0a5fL/nOwIL3imlAUG/d8DsI7xfAlEFH/SKcEAywHw3b9dbcgQgmqOByggw26KAIDAxwnnAGEGAhe0AIoEAE0mXzlBsWTojDhhFwmE0bFroR3w8RLNAiLtg8ZaGFbfVgwIv2WaOOGzn+IIABCqx4TRk1pkXYgMQNUUAERyhnwJIFFNAjcTdGaWJydCxZ03INBFjkg2CGKeaYCYYAACH5BAkHAAAALAAAAABkAGQAAAX/ICCOZGmeaKqubOu+cCzPdG3feK7vfO//wBnDUCAMBMGkTkA4OA8EpHJKMzyfBqo2VkBcEYWtuNW8HsJjoIDReC2e3kPEJRgojulVPeFIGKQrEGYOgCoMBwiJBwx5KQMOkJBZLQILkAuFKQ2IiYqZjQANfA4HkAltdKgtBp2tA6AlDJGzjD8KrZ0KsCSipJCltT63uAiTuyIGsw66asQHn6ACCpEKqj8DrQevxyVr0D4NCgTV3OXm5+jp6uvs7e7v6gIQEQkFEDgNCxELwfACBRICBtxGQ1QCPgn6uRsgsOE9GgoQ8inwLV2ChgLRzKCHsI9Cdg4wBkxQw9LBPhTh/wG4KHIODQYnDz6Ex1DkTCEL6t189w+jRhsf/Q04WACPyqNIkypdyrSp06dQo0qdSrWqVUcL+NER0MAa1AYOHoh9kKCiiEoE6nl1emDsWAIrcqYlkDKF2BNjTeQl4bbEXRF//47oe8KABLdjg4qAOTcBAcWAH+iVLBjA3cqXJQ/WbDkzX84oFCAey+wEg8Zp136e3Pnz3sitN28mDLsyiQWjxRo7EaFxXRS2W2OmDNqz7NrDY5swkPsB5FC91a6gHRm08OKvYWu3nd1EW8Rw9XA1q1TAd7Flr76wo1W9+/fw48ufT7++/fv48+s/wXUABPLwCWAAAQRiolQD/+FDIKRdBOz0TjgKkGNDAwsSSJBKEESowHOUEFjEY0lJEyGAegyw4G5HNcAAiS0g2ACL+8Uo44w01mjjjTi+wMCKMs5TQAQO+iCPAQme00AEP/4IIw0DZLVAkLA0kGQBBajGQ5MLKIDiMUcmGYGVO0CQZXvnCIAkkFOsYQCH0XQVAwP+sRlgVvssadU8+6Cp3zz66JmfNBFE8EeMKrqZ46GIJqrooi6EAAAh+QQJBwAAACwAAAAAZABkAAAF/yAgjmRpnmiqrmzrvnAsz3Rt33iu73zv/0Baw2BoBI88g2N5MCCfNgZz6WBArzEl1dHEeluGw9Sh+JpTg+1y8GpABGdWQxFZWF0L7nLhEhAOgBFwcScNCYcOCXctAwsRbC5/gIGEJwuIh3xADJOdg5UjEQmJowlBYZ2AEKAkeZgFQZypB0asIgyYCatBCakEtiQMBQkFu0GGkwSfwGYQBovM0dLT1NXW19jZ2ts+AgYKA8s0As6Q3AADBwjrB9AzogkEytwN6uvs4jAQ8fxO2wr3ApqTMYAfgQSatBEIeK8MjQEHIzrUBpAhgoEyIkSct62BxQP5YAhoZCDktQEB2/+d66ZAQZGVMGPKnEmzps2bOHPq3Mmzp88v5Iz9ZLFAgtGLjCIU8IezqFGjDzCagCBPntQSDx6cyKoVa1avX0mEBRB2rAiuXU00eMoWwQoF8grIW2H2rFazX/HeTUs2Lde+YvmegMCWrVATC+RWpSsYsN6/I/LyHYtWL+ATAwo/PVyCatWrgU1IDm3Zst2+k/eiEKBZgtsVA5SGY1wXcmTVt2v77aq7cSvNoIeOcOo6uPARAhhwPs68ufPn0KNLn069uvXrfQpklSAoRwOT1lhXdgC+BQSlEZZb0175QcJ3Sgt039Y+6+sZDQrI119LW/26MUQQ33zaSFDfATY0kFh2euewV9l748AkwAGVITidAAA9gACE2HXo4YcghijiiN0YEIEC5e3QAAP9RWOiIxMd0xKK0zhSRwRPMNCSAepVYoCNTMnoUopxNDLbEysSuVIDLVLXyALGMSfAAgsosICSP01J5ZXWQUBlj89hSeKYZJZpJoghAAAh+QQJBwAAACwAAAAAZABkAAAF/yAgjmRpnmiqrmzrvnAsz3Rt33iu73zv/0Bag8FoBI+8RmKZMCKfNQbTkSAIoNgYZElNOBjZcGtLLUPE6JSg601cXQ3IO60SQAzyF9l7bgkMbQNzdCUCC1UJEWAuAgOCLwYOkpIDhCdbBIiVQFIOB5IHVpYlBpmmC0EMk6t9oyIDplUGqZ+ek06uAAwEpqJBCqsOs7kjDAYLCoM/DQa1ycSEEBCL0NXW19jZ2tvc3d7fPwJDAsoz4hC44AIFB+0R5TGwvAbw2Q0E7fnvNQIEBbwEqHVj0A5BvgPpYtzj9W+TNwUHDR4QqBAgr1bdIBzMlzCGgX8EFtTD1sBTPgQFRv/6YTAgDzgAJfP5eslDAAMFDTrS3Mmzp8+fQIMKHUq0qNGjSJMisYNR6YotCBAE9GPAgE6fEKJqnbiiQYQCYCmaePDgBNmyJc6mVUuC7Ai3AOC+ZWuipAStUQusGFDgawQFK+TOjYtWhFvBhwsTnlsWseITDfDibVoCAtivgFUINtxY8VnHiwdz/ty2MwoBkrVSJtEAbNjAjxeDnu25cOLaoU2sSa236wCrKglvpss5t/DHcuEO31z57laxTisniErganQSNldf3869u/fv4MOLH0++vHk/A5YQeISjQfBr6yTIl5/Sxp2/76sNmM9fuwsDESyAHzgJ8DdfbzN4JWCkBBFYd40DBsqXgA0DMIhMfsQUGGEENjRQIR4v7Rehfy9gWE18/DkEnh0RJELieTDGKOOMNAa1DlkS1Bceap894ICJUNjhCJAyFNAjWahAA8ECTKrow5FkIVDNMcgMAwSUzFnCAJMLvHiDBFBKWQ1LLgERAZRJBpVTiQ70eMBQDSigAHSnLYCAj2kCJYCcBjwz3h98EnkUM1adJ2iNiCaq6KKLhgAAIfkECQcAAAAsAAAAAGQAZAAABf8gII5kaZ5oqq5s675wLM90bd94ru987//AoHAYEywShIWAyKwtCMjEokmFCaJQwrLKVTWy0UZ3jCqAC+SfoCF+NQrIQrvFWEQU87RpQOgbYg0MMAwJDoUEeXoiX2Z9iT0LhgmTU4okEH0EZgNCk4WFEZYkX5kEEEJwhoaVoiIGmklDEJOSgq0jDAOnRBBwBba3wcLDxMXGx8jJysvMzUJbzgAGn7s2DQsFEdXLCg4HDt6cNhHZ2dDJAuDqhtbkBe+Pxgze4N8ON+Tu58jp6+A3DPJtU9aNnoM/OBrs4wYuAcJoPYBBnEixosWLGDNq3Mixo8ePIEOKxGHEjIGFKBj/DLyY7oDLA1pYKIgQQcmKBw9O4MxZYmdPnyRwjhAKgOhQoCcWvDyA4IC4FAHtaLvJM2hOo0WvVs3K9ehRrVZZeFsKc0UDmnZW/jQhFOtOt2C9ingLt+uJsU1dolmhwI5NFVjnxhVsl2tdwkgNby0RgSyCpyogqGWbOOvitlvfriVc2LKKli9jjkRhRNPJ0ahTq17NurXr17Bjy55NG0UDBQpOvx6AoHdTiTQgGICsrIFv3wdQvoCwoC9xZAqO+34Ow0DfBQ+VEZDeW4GNOgsWTC4WnTv1QQaAJ2vA9Hhy1wPaN42XWoD1Acpr69/Pv79/ZgN8ch5qBUhgoIF7BSMAfAT07TDAgRCON8ZtuDWYQwIQHpigKAzgpoCEOGCYoQQJKGidARaaYB12LhAwogShKMhAiqMc8JYDNELwIojJ2EjXAS0UCOGAywxA105EjgBBBAlMZdECR+LESmpQRjklagxE+YB6oyVwZImtCUDAW6K51mF6/6Wp5po2hAAAIfkECQcAAAAsAAAAAGQAZAAABf8gII5kaZ5oqq5s675wLM90bd94ru987//AoHAYE0AWC4iAyKwNCFDCoEmFCSJRQmRZ7aoaBWi40PCaUc/o9OwTNMqvhiE84LYYg4GSnWpEChEQMQ0MVlgJWnZ8I36AgHBAT4iIa4uMjo9CC5MECZWWAI2Oij4GnaefoEcFBYVCAlCIBK6gIwwNpEACCgsGubXAwcLDxMXGx8jJysvMZ7/KDAsRC5A1DQO9z8YMCQ4J39UzBhHTCtrDAgXf3gkKNg3S0hHhx9zs3hE3BvLmzOnd6xbcYDCuXzMI677RenfOGAR1CxY26yFxosWLGDNq3Mixo8ePIEOKHEmyZDEBAwz/GGDQcISAlhMFLHBwwIEDXyyOZFvx4MGJnj5LABU6lETPEUcBJEVa9MQAm1Ad0CshE4mCqUaDZlWqlatXpl9FLB26NGyKCFBr3lyxCwk1nl3F+iwLlO7crmPr4r17NqpNAzkXKMCpoqxcs0ftItaaWLFhEk9p2jyAlSrMukTjNs5qOO9hzipkRiVsMgXKwSxLq17NurXr17Bjy55Nu7ZtIoRWwizZIMGB3wR2f4FQuVjv38gLCD8hR8HVg78RIEdQnAUD5woqHjMgPfpv7S92Oa8ujAHy8+TZ3prYgED331tkp0Mef7YbJctv69/Pv7//HOlI0JNyQ+xCwHPACOCAmV4S5AfDAAhEKF0qfCyg14BANCChhAc4CAQCFz6mgwIbSggYKCGKmAOJJSLgDiggXiiBC9cQ5wJ3LVJ4hoUX5rMCPBIEKcFbPx5QYofAHKAXkissIKSQArGgIYfgsaGAki62JMCTT8J0Wh0cQcClkIK8JuaYEpTpGgMIjIlAlSYNMKaOq6HUpgQIgDkbAxBAAOd/gAYqKA0hAAAh+QQJBwAAACwAAAAAZABkAAAF/yAgjmRpnmiqrmzrvnAsz3Rt33iu73zv/8CgcChrQAYNotImiBQKi+RyCjM4nwOqtmV4Og3bcIpRuDLEaBNDoTjDGg1BWmVQGORDA2GfnZusCxFgQg17BAUEUn4jEYGNQwOHhhCLJFYREQpDEIZ7ipUCVgqfQAt7BYOVYkduqq6vsLGys7S1tre4ubq7UwIDBn04DAOUuwJ7CQQReDUMC8/FuXrJydE0Bs92uwvUBAnBNM7P4LcK3ufkMxDAvMfnBbw9oQsDzPH3+Pn6+/z9/v8AAwocSLCgwYO9IECwh9AEBAcJHCRq0aAOqRMPHmDMaCKjRhIeP47gKIIkyZEeU/8IgMiSABc2mlacRAlgJkebGnGizCmyZk8UAxIIHdoqRR02LGaW5AkyZFOfT5c6pamURFCWES+aCGWgKIqqN3uGfapzqU+xTFEIiChUYo+pO0uM3fnzpMm6VUs8jDixoVoIDBj6HUy4sOHDiBMrXsy4sWMSTSRkLCD4ltcZK0M+QFB5lgIHEFPNWKB5cq7PDg6AFh0DQem8sVaCBn0gQY3XsGExSD0bdI0DryXgks0bYg3SpeHhQj07HQzgIR10lmWAr/MYC1wjWDD9sffv4MOLR3j1m5J1l/0UkMCevXIgDRIcQHCAQHctENrrv55D/oH/B7ynnn7t2fYDAwD+R59zVmEkQCB7BvqgQIIAphdGBA9K4JILcbzQAID0/cfgFvk9aE0KDyFA34kp+AdgBK4MQKCAKEqg4o0sniBAAQBS9goEESQQQY4nJHDjjRGy0EBg/Rx55GFO3ngYAVFuWBiCRx4w4kENFKBiAVuOJ+aYZIoZAgAh+QQJBwAAACwAAAAAZABkAAAF/yAgjmRpnmiqrmzrvnAsz3Rt33iu73zv/8CgcChrMBoNotImUCwiiuRyCoNErhEIdduCPJ9arhgleEYWgrHaxIBAGDFkep1iGBhzobUQkdJLDAtOYUENEXx8fn8iBguOBkMNiImLJF6CA0MCBYh9lSMCEAYQikAMnBFwn2MCRquvsLGys7S1tre4ubq7vDqtpL5HvAIGBMYDeTTECgrJtwwEBcYEzjIMzKO7A9PGpUUGzN61EMbSBOIxoei0ZdOQvTuhAw3V8Pb3+Pn6+/z9/v8AAwocSBCQo0wFUwhI8KDhgwPrerUSUK8EAYcOD/CTRCABGhUMMGJ8d6JhSZMlHP+mVEkCJQCULkVgVFggQUcCC1QoEOlQQYqYMh+8FDrCZEyjRIMWRdoyaZ2bNhOoOmGAZ8OcKIAO3bqUpdKjSXk25XqiQdSb60JaJWlCK9OlZLeChetVrtMSm85iTXFRpMafdYfefRsUqEuYg7WWkGTTk4qFGB1EHEavIpuDCTNr3sy5s+fPoEOLHk063YCaCZD1mlpjk4TXrwtYjgWh5gLWMiDA3o3wFoQECRwExw2jwG7YCXDlFS58r4wEx187wMUgOHDgEWpEiC4h+a281h34pKE7em9b1YUDn7xiwHHZugKdYc/CSoIss0vr38+/v//RTRAQhRIC4AHLAAcgoCCkAuf50IACDkTYzCcCJLiggvTRAKEDB0TIFh0GXLjgeD4wwGGEESaQIREKiKggiT2YiOKJxI0xgIsIfKgCPS+YFWGHwq2oiYULHpCfCFZE+FELBszoQIN0NEDkATWaIACHB2TpwJEAEGOdaqsIMIACYLKwQJZoHuDcCkZweUsBaCKQJQGfEZBmlgV8ZkCCceqYWXVpUgOamNEYIOR/iCaq6KIAhAAAIfkECQcAAAAsAAAAAGQAZAAABf8gII5kaZ5oqq5s675wLM90bd94ru987//AoHBIExCPOMhiAUE6ZYLl0vissqJSqnWLGiwUA64Y1WiMfwKGmSgwgM+otsKwFhoWkYgBbmIo/gxEeXgLfCUNfwp1QQp4eoaHakdRelqQl5iZmpucnZ6foKGioz8LCA8IC5akOAcPr68Oq6CzMguwuAWjEBEFC4syDriwEqICvcg2w7iiDQXPBRHAMKfLD8bR0RE2t8u6ogzPEU01AsK4ErWdAtMzxxKvBeqs9PX29/j5+vv8/f7/AAMKNAEBwryBJAYgkMCwEMIUAxhKlOBQn4AB0cKsWDiRYTsRr07AMjGSBDOT10D/pgyJkmUXAjAJkEMBoaPEmSRTogTgkue1niGB6hwptAXMAgR8qahpU4JGkTpHBI06bGdRlSdV+lQRE6aCjU3n9dRatCzVoT/NqjCAFCbOExE7VoQ6tqTUtC2jbtW6967eE2wjPFWhUOLchzQNIl7MuLHjx5AjS55MubJlGQ3cKDj4kMEBBKARDKZ1ZwDnFQI+hwb9UZMAAglgb6uhcDXor6EUwN49GoYC26AJiFoQu3jvF7Vt4wZloDjstzBS2z7QWtPuBKpseA594LinAQYU37g45/Tl8+jTq19fmUF4yq8PfE5QPQeEAgkKBLpUQL7/BEJAkMCADiSwHx8NyIeAfH8IHOgDfgUm4MBhY0Dg34V7ACEhgQnMxocACyoon4M9EBfhhJdEcOEBwrkwQAQLeHcCAwNKSEB9VRzjHwHmAbCAA0Ci6AIDeCjiGgQ4jjBAkAcAKSNCCgQZ5HKOGQBkk0Bm+BgDUjZJYmMGYOmAlpFlRgd7aKap5poyhAAAIfkECQcAAAAsAAAAAGQAZAAABf8gII5kaZ5oqq5s675wLM90bd94ru987//AoHBIExCPOIHB0EA6ZUqFwmB8WlkCqbR69S0cD8SCy2JMGd3f4cFmO8irRjPdW7TvEaEAYkDTTwh3bRJCEAoLC35/JIJ3QgaICwaLJYGND0IDkRCUJHaNBXoDAxBwlGt3EqadRwIFEmwFq6y0tba3uLm6u7y9viYQEQkFpb8/AxLJybLGI7MwEMrSA81KEQNzNK/SyQnGWQsREZM1CdzJDsYN4RHh2TIR5xLev1nt4zbR59TqCuOcNVxxY1btXcABBBIkGPCsmcOHECNKnEixosWLGDNq3MjxCIRiHV0wIIAAQQKAIVX/MDhQsqQElBUFNFCAjUWBli0dGGSEyUQbn2xKOOI5IigAo0V/pmBQIEIBgigg4MS5MynQoz1FBEWKtatVrVuzel2h4GlTflGntnzGFexYrErdckXaiGjbEv6aEltxc+qbFHfD2hUr+GvXuIfFmmD6NEJVEg1Y4oQJtC3ixDwtZzWqWfGJBksajmhA0iTllCk+ikbNurXr17Bjy55Nu7bt20HkKGCwOiWDBAeC63S4B1vvFAIIBF+e4DEuAQsISCdHI/Ly5ad1QZBeQLrzMssRLFdgDKF0AgUUybB+/YB6XiO7Sz9+QkAE8cEREPh+y8B5hjbYtxxU6kDQAH3I7XEgnG4MNujggxBGCAVvt2XhwIUK8JfEIX3YYsCFB2CoRwEJJEQAgkM0ANyFLL7HgwElxphdGhCwCKIDLu4QXYwEUEeJAAnc6EACOeowAI8n1TKAjQ74uIIAo9Bnn4kRoDgElEEmQIULNWY54wkMjAKSLQq+IMCQQwZp5UVdZpnkbBC4OeSXqCXnJpG1qahQc7c1wAADGkoo6KCEFrpCCAA7AAAAAAAAAAAA);\n    background-position: 50% 50%;\n    background-repeat: no-repeat;\n}\n\n\n/*\n * Motion\n */\n\ndiv.CanvasXpressMotion {\n    color: rgb(34, 34, 34);\n    font: normal 12px arial, tahoma, sans-serif;\n}\n\nimg.CanvasXpressMotion, svg.CanvasXpressMotion {\n    margin: 0px !important;\n    background: rgba(0, 0, 0, 0) !important;\n    border: 0px none !important;\n    box-shadow: 0 0 0px rgba(0, 0, 0, 0) !important;\n}\n\ndiv.CanvasXpressMotionContainer {\n    box-sizing: content-box;\n    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAOCAYAAADuQ3ZcAAAAF0lEQVR42mNkAAJGNOLChQv/cRNYdAAA0dgUqRX/AM0AAAAASUVORK5CYII=);\n    background-repeat: repeat-x;\n}\n\ndiv.CanvasXpressMotionCurrent {\n    box-sizing: content-box;\n    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAlUlEQVR42mNkgIIDBw78ZyACODg4MCLzGWGa7e3tidHPcPDgQRRDGEGaTc0tidIMA6dPHocbAjZAV9eQJAMuXz5PZQM0NA1IMuDG9QuoBqioqJBkwJ07d1ANkJRWJ8mA509vUtkAUVFFkgx4/fo+qgG8fHIkGfD50yMqGgAiQIaws4oTpfnn75eoSRnGoCgzUQIoNgAAbjRcEcsB8BEAAAAASUVORK5CYII=);\n    background-repeat: no-repeat;\n    float: left;\n    height: 14px;\n    position: relative;\n    width: 14px;\n    z-index: 1000002;\n}\n\ndiv.CanvasXpressMotionRange {\n    box-sizing: content-box;\n    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAOCAYAAADuQ3ZcAAAAFklEQVR42mNkAAJGNMKxcdd/3AQWHQAD/g7xOirtNAAAAABJRU5ErkJggg==);\n    background-repeat: repeat-x;\n    float: left;\n    height: 14px;\n    left: 0px;\n    top: -1px;\n    position: relative;\n    z-index: 1000001;\n}\n\n\n/*\n* Marker\n*/\n\ndiv.CanvasXpressMarker {\n    box-sizing: content-box;\n    border: 1px solid rgb(51, 122, 183);\n    border-radius: 5px;\n    background-color: rgba(255, 255, 255, 0.95);\n    color: rgb(34, 34, 34);\n    cursor: move;\n    font: normal 12px arial, tahoma, sans-serif;\n    height: 502px;\n    width: 286px;\n    left: 0px;\n    line-height: 100%;\n    position: absolute;\n    top: 0px;\n    padding: 2px;\n    -moz-user-select: none;\n    -khtml-user-select: none;\n    -webkit-user-select: none;\n    -o-user-select: none;\n}\n\n\n/*\n * Toolbar \n */\n\n\n/*\ndiv.CanvasXpressToolbar {\n\n}\n*/\n\n/*\ndiv.CanvasXpressToolbar img.CanvasXpressToolbarImage, div.CanvasXpressToolbar svg.CanvasXpressToolbarImage {\n    transition: all 0.3s;\n    -moz-transition: all 0.3s;\n    -webkit-transition: all 0.3s;\n    -o-transition: all 0.3s;\n    -ms-transition: all 0.3s;\n}\n\ndiv.CanvasXpressToolbar img.CanvasXpressToolbarImage:hover, div.CanvasXpressToolbar svg.CanvasXpressToolbarImage:hover{\n    margin: 0 7px;\n    transform: scale(1.2);\n    -webkit-box-reflect: below 0px -webkit-gradient(linear, left top, left bottom, from(transparent), to(rgba(255, 255, 255, 0.7)));\n}\n\ndiv.CanvasXpressToolbar img.CanvasXpressToolbarImage:hover+img.CanvasXpressToolbarImage, div.CanvasXpressToolbar svg.CanvasXpressToolbarImage:hover+svg.CanvasXpressToolbarImage {\n    margin: 0 6px;\n    transform: scale(1.1);\n    -webkit-box-reflect: below 0px -webkit-gradient(linear, left top, left bottom, from(transparent), to(rgba(255, 255, 255, 0.7)));\n    }\n*/    \n\ndiv.CanvasXpressToolbar img.CanvasXpressToolbarImage, div.CanvasXpressToolbar svg.CanvasXpressToolbarImage {\n    background: rgba(0, 0, 0, 0) !important;\n    border: 0px none !important;\n    box-shadow: 0 0 0px rgba(0, 0, 0, 0) !important;\n    cursor: pointer;\n    float: right;\n    margin: 5px 8px 0px 0px;\n    -moz-user-select: none;\n    -khtml-user-select: none;\n    -webkit-user-select: none;\n    -o-user-select: none;\n    -ms-user-select: none;\n}\n\n/*\n * Data Table DOE\n */\n\ntable.CanvasXpressDataTableDOE {\n    border-spacing: 0 !important;\n    font-size: 12px !important;\n    padding: 0 !important;\n    border: none !important;\n}\n\nth.CanvasXpressDataTableDOE {\n    padding: 0 !important;\n    font-size: 12px !important;\n    font-weight: bolder !important;\n    padding-left: 5px !important;\n    padding-right: 5px !important;\n    height: 18px !important;\n    line-height: 18px !important;\n    white-space: nowrap !important;\n    overflow: hidden !important;\n    max-height: 18px !important;\n    border: none !important;\n}\n\ntd.CanvasXpressDataTableDOE {\n    padding: 0 !important;\n    font-size: 12px !important;\n    padding-left: 5px !important;\n    padding-right: 18px !important;\n    height: 18px  !important;\n    line-height: 18px !important;\n    white-space: nowrap !important;\n    overflow: hidden !important;\n    max-height: 18px !important;\n    border: none !important;\n}\n\ntr.CanvasXpressDataTableDOE {\n    font-size: 12px !important;\n}\n\n/*\n * Data Table\n */\n\ndiv.CanvasXpressDataTable {\n    box-sizing: content-box;\n    border: 1px solid rgb(51, 122, 183);\n    border-radius: 5px;\n    background-color: rgba(255, 255, 255, 0.95);\n    clear: both;\n    color: rgb(34, 34, 34);\n    overflow: hidden;\n    position: absolute;\n    -moz-user-select: none;\n    -khtml-user-select: none;\n    -webkit-user-select: none;\n    -o-user-select: none;\n}\n\ndiv.CanvasXpressDataTableToolbar {\n    box-sizing: content-box;\n    border: 0px;\n    border-radius: 5px 5px 0px 0px;\n    background-color: rgba(255, 255, 255, 0.95);\n    color: rgb(34, 34, 34);\n    cursor: move;\n    height: 32px;\n    left: 0px;\n    line-height: 100%;\n    position: absolute;\n    top: 0px;\n    padding: 2px;\n    -ms-user-select: none;\n    -moz-user-select: none;\n    -khtml-user-select: none;\n    -webkit-user-select: none;\n    -o-user-select: none;\n}\n\nimg.CanvasXpressDataTableToolbarImage, svg.CanvasXpressDataTableToolbarImage {\n    background: rgba(0, 0, 0, 0) !important;\n    border: 0px none !important;\n    box-shadow: 0 0 0px rgba(0, 0, 0, 0) !important;\n    cursor: pointer;\n    float: right;\n    margin: 5px 8px 0px 0px !important;\n    user-select: none;\n    -moz-user-select: none;\n    -khtml-user-select: none;\n    -webkit-user-select: none;\n    -o-user-select: none;\n    -ms-user-select: none;\n}\n\ndiv.CanvasXpressDataTableContainer {\n    box-sizing: content-box;\n    border-radius: 0px 0px 5px 5px;\n    color: rgb(34, 34, 34);\n    display: block;\n    left: 0px;\n    line-height: 100%;\n    position: absolute;\n    top: 35px;\n    -ms-user-select: none;\n    -moz-user-select: none;\n    -khtml-user-select: none;\n    -webkit-user-select: none;\n    -o-user-select: none;\n}\n\ndiv.CanvasXpressDataTableVertical {\n    box-sizing: content-box;\n    background-color: rgba(255, 255, 255, 0.95);\n    overflow-x: hidden;\n    overflow-y: auto;\n    position: absolute;\n    right: 6px;\n    top: 0px;\n    width: 32px;\n    -ms-user-select: none;\n    -moz-user-select: none;\n    -khtml-user-select: none;\n    -webkit-user-select: none;\n    -o-user-select: none;\n}\n\nimg.CanvasXpressDataTableVertical {\n  max-height: unset !important;\n}\n\ndiv.CanvasXpressDataTableHorizontal {\n    box-sizing: content-box;\n    background-color: rgba(255, 255, 255, 0.95);\n    bottom: 12px;\n    height: 32px;\n    left: 32px;\n    overflow-x: auto;\n    overflow-y: hidden;\n    position: absolute;\n    -ms-user-select: none;\n    -moz-user-select: none;\n    -khtml-user-select: none;\n    -webkit-user-select: none;\n    -o-user-select: none;\n}\n\nimg.CanvasXpressDataTableHorizontal {\n  max-width: unset !important;\n}\n\ndiv.CanvasXpressDataTableResizer {\n    box-sizing: content-box;\n    background-color: rgba(255, 255, 255, 0.95);\n    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAR0lEQVR42pXPQQoAIAhEUb25nrwyKIpMndkJz8VnAtbGGMGqSqWHhW3pw4lFhBnBYYOHvw0/7DZE+GnI8NVQwbuhimcDgu3uM5KV++8QfCcAAAAASUVORK5CYII=);\n    background-repeat: no-repeat;\n    cursor: se-resize;\n    bottom: 8px;\n    height: 15px;\n    position: absolute;\n    opacity: 0.95;\n    right: 2px;\n    width: 15px;\n    -ms-user-select: none;\n    -moz-user-select: none;\n    -khtml-user-select: none;\n    -webkit-user-select: none;\n    -o-user-select: none;\n}\n\ntable.CanvasXpressDataTable {\n    border: 0px;\n    border-spacing: 1px;\n    color: rgb(34, 34, 34);\n    left: 1px;\n    position: absolute;\n    opacity: 0.95;\n    table-layout: fixed;\n    top: 1px;\n    -ms-user-select: none;\n    -moz-user-select: none;\n    -khtml-user-select: none;\n    -webkit-user-select: none;\n    -o-user-select: none;\n}\n\ndiv.CanvasXpressDataTableMask {\n    box-sizing: content-box;\n    border: 0px;\n    left: 32px;\n    position: absolute;\n    top: 0px;\n    overflow: hidden;\n    -ms-user-select: none;\n    -moz-user-select: none;\n    -khtml-user-select: none;\n    -webkit-user-select: none;\n    -o-user-select: none;\n}\n\nth.CanvasXpressTableCellHead {\n    background: linear-gradient(rgb(240, 240, 240), rgb(230, 230, 230));\n    border: 1px solid #ccc;\n    color: rgb(34, 34, 34);\n    font-style: bold;\n    opacity: 0.95;\n    padding: 2px;\n    text-align: left;\n    vertical-align: middle;\n    -ms-user-select: none;\n    -moz-user-select: none;\n    -khtml-user-select: none;\n    -webkit-user-select: none;\n    -o-user-select: none;\n}\n\nth.CanvasXpressTableCellHeadActive {\n    background: linear-gradient(rgb(243, 253, 255), rgb(217, 232, 251));\n    border: 1px solid #ccc;\n    color: rgb(34, 34, 34);\n    font-style: bold;\n    opacity: 0.95;\n    padding: 2px;\n    text-align: left;\n    vertical-align: middle;\n    -ms-user-select: none;\n    -moz-user-select: none;\n    -khtml-user-select: none;\n    -webkit-user-select: none;\n    -o-user-select: none;\n}\n\na.CanvasXpressTableCellHead {\n    background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAeCAYAAADzXER0AAAAVElEQVR42mNkAIL/QMAIBAwkAsZRzaOah5BmEBunYjQLUDSDaGW3Dpw23d1VgWIAVpuxGYCuEaef0Q3AphFvgMEMwKWRYGgTioVBFM+jmkc1U1UzAAG5nB8y5eufAAAAAElFTkSuQmCC) no-repeat left center;\n    cursor: pointer;\n    display: none;\n    height: 20px;\n    position: absolute;\n    opacity: 0.95;\n    right: 4px;\n    white-space: normal;\n    width: 14px;\n    -ms-user-select: none;\n    -moz-user-select: none;\n    -khtml-user-select: none;\n    -webkit-user-select: none;\n    -o-user-select: none;\n}\n\na.CanvasXpressTableCellHeadActive {\n    background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAeCAYAAADzXER0AAAAVElEQVR42mNkAIL/QMAIBAwkAsZRzaOah5BmEBunYjQLUDSDaGW3Dpw23d1VgWIAVpuxGYCuEaef0Q3AphFvgMEMwKWRYGgTioVBFM+jmkc1U1UzAAG5nB8y5eufAAAAAElFTkSuQmCC) no-repeat left center;\n    cursor: pointer;\n    display: block;\n    height: 20px;\n    position: absolute;\n    opacity: 0.95;\n    right: 4px;\n    white-space: normal;\n    width: 14px;\n    -ms-user-select: none;\n    -moz-user-select: none;\n    -khtml-user-select: none;\n    -webkit-user-select: none;\n    -o-user-select: none;\n}\n\ntd.CanvasXpressTableCell {\n    border-bottom: 1px solid #ccc;\n    border-right: 1px solid #ccc;\n    color: rgb(34, 34, 34);\n    padding: 2px;\n    vertical-align: middle;\n    -ms-user-select: none;\n    -moz-user-select: none;\n    -khtml-user-select: none;\n    -webkit-user-select: none;\n    -o-user-select: none;\n}\n\ntd.CanvasXpressTableCellActive {\n    background-color: #dfe8f9;\n    border-bottom: 1px solid #ccc;\n    border-right: 1px solid #ccc;\n    color: rgb(34, 34, 34);\n    padding: 2px;\n    opacity: 0.95;\n    vertical-align: middle;\n    -ms-user-select: none;\n    -moz-user-select: none;\n    -khtml-user-select: none;\n    -webkit-user-select: none;\n    -o-user-select: none;\n}\n\ndiv.CanvasXpressTableCell {\n    box-sizing: content-box;\n    color: rgb(34, 34, 34);\n    line-height: 20px;\n    margin: 2px 2px 1px 5px;\n    overflow: hidden;\n    position: relative;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n}\n\ndiv.CanvasXpressTableCellSortAsc {\n    box-sizing: content-box;\n    background: url(data:image/gif;base64,R0lGODlhDQAFAIcAAGGQzUD/QOPu+wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAMAAAEALAAAAAANAAUAAAgbAAMIDABgoEGDABIeRJhQ4cKGEA8KmEiRosGAADs=) no-repeat right 7px;\n    color: rgb(34, 34, 34);\n    margin: 2px 2px 1px 5px;\n    overflow: hidden;\n    position: relative;\n    white-space: nowrap;\n}\n\ndiv.CanvasXpressTableCellSortDesc {\n    box-sizing: content-box;\n    background: url(data:image/gif;base64,R0lGODlhDQAFAIcAAGGQzUD/QOPu+wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAMAAAEALAAAAAANAAUAAAgeAAUAGEgQgIAACBEKLHgwYcKFBh1KFNhQosOKEgMCADs=) no-repeat right 7px;\n    color: rgb(34, 34, 34);\n    margin: 2px 2px 1px 5px;\n    overflow: hidden;\n    position: relative;\n    white-space: nowrap;\n}\n\n/*\n * Configurator\n */\n\ndiv.CanvasXpressConfigurator {\n    box-sizing: content-box;\n    background-color: rgba(255, 255, 255, 0.95);\n    border-radius: 5px;\n    border: 1px solid rgb(51, 122, 183);\n    box-shadow: rgba(154, 154, 154, 0.2) 3px 3px;\n    color: rgb(34, 34, 34);\n    cursor: default;\n    font: normal 12px arial, tahoma, sans-serif;\n    opacity: 0.95;\n    line-height: 24px;\n    text-align: left;\n    -ms-user-select: none;\n    -moz-user-select: none;\n    -khtml-user-select: none;\n    -webkit-user-select: none;\n    -o-user-select: none;\n}\n\nspan.CanvasXpressConfigurator {\n    cursor: default;\n    font: normal 12px arial, tahoma, sans-serif;\n    color: rgb(34, 34, 34);\n    -moz-user-select: none;\n    -khtml-user-select: none;\n    -webkit-user-select: none;\n    -o-user-select: none;\n}\n\ntextarea.CanvasXpressConfigurator {\n    background-color: rgba(255, 255, 255, 0.95);\n    border-radius: 5px;\n    border: 1px solid rgb(51, 122, 183);\n    box-shadow: rgba(154, 154, 154, 0.2) 3px 3px;\n    color: rgb(34, 34, 34);\n    cursor: default;\n    font: normal 12px arial, tahoma, sans-serif;\n}\n\nimg.CanvasXpressConfigurator, svg.CanvasXpressConfigurator {\n    background: rgba(0, 0, 0, 0) !important;\n    border: 0px none !important;\n    box-shadow: 0 0 0px rgba(0, 0, 0, 0) !important;\n    cursor: default;\n    float: right;\n    margin: 0px 0px 0px 5px !important;\n    -moz-user-select: none;\n    -khtml-user-select: none;\n    -webkit-user-select: none;\n    -o-user-select: none;\n}\n\nselect.CanvasXpressConfigurator {\n    background-color: rgba(255, 255, 255, 0.95);\n    border: 1px solid rgb(51, 122, 183);\n    color: rgb(34, 34, 34);\n    cursor: default;\n    font: normal 12px arial, tahoma, sans-serif;\n    padding-left: 3px;\n}\n\ninput.CanvasXpressConfigurator {\n    background-color: rgba(255, 255, 255, 0.95);\n    border: 1px solid rgb(51, 122, 183);\n    color: rgb(34, 34, 34);\n    cursor: default;\n    font: normal 12px arial, tahoma, sans-serif;\n    padding-left: 3px;\n}\n\ndiv.CanvasXpressConfiguratorOptions {\n    box-sizing: content-box;\n    cursor: default;\n    font: normal 12px arial, tahoma, sans-serif;\n    color: rgb(34, 34, 34);\n    height: 100px;\n    margin-top: 8px;\n    overflow: auto;\n    width: 180px;\n}\n\ndiv.CanvasXpressConfiguratorFilter {\n    box-sizing: content-box;\n    background-color: rgba(255, 255, 255, 0.95);\n    border-radius: 5px;\n    border: 1px solid rgb(51, 122, 183);\n    box-shadow: rgba(154, 154, 154, 0.2) 3px 3px;\n    color: rgb(34, 34, 34);\n    font: normal 12px arial, tahoma, sans-serif;\n}\n\nselect.CanvasXpressConfiguratorFilter {\n    border: 1px solid rgb(51, 122, 183);\n    font: normal 12px arial, tahoma, sans-serif;\n    color: rgb(34, 34, 34);\n}\n\ninput.CanvasXpressConfiguratorFilter {\n    border: 1px solid rgb(51, 122, 183);\n    font: normal 12px arial, tahoma, sans-serif;\n    color: rgb(34, 34, 34);\n}\n\ndiv.CanvasXpressConfiguratorExample {\n    box-sizing: content-box;\n    background-color: rgba(255, 255, 255, 0.95);\n    border-radius: 5px;\n    border: 1px solid rgb(51, 122, 183);\n    box-shadow: rgba(154, 154, 154, 0.2) 3px 3px;\n    color: rgb(34, 34, 34);\n    font: normal 12px arial, tahoma, sans-serif;\n    overflow-y: scroll;\n    overflow-x: hidden;\n}\n\nspan.CanvasXpressConfiguratorExample {\n    cursor: default;\n    font: bold 14px arial, tahoma, sans-serif;\n    color: rgb(34, 34, 34);\n    line-height: 18px;\n    -moz-user-select: none;\n    -khtml-user-select: none;\n    -webkit-user-select: none;\n    -o-user-select: none;\n}\n\ndiv.CanvasXpressConfiguratorExampleContent {\n    overflow: hidden;\n}\n\ndiv.CanvasXpressConfiguratorColor {\n    box-sizing: content-box;\n    border: 1px solid rgb(51, 122, 183);\n    font: normal 12px arial, tahoma, sans-serif;\n    color: rgb(34, 34, 34);\n    line-height: 18px;\n}\n\ndiv.CanvasXpressConfiguratorColorMain {\n    box-sizing: content-box;\n    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALUAAABlCAIAAACEDzXRAAAKQ0lEQVR42u2d23IjKwxFBeRh5v8/9uQlzXlI2gGELoCEm6pxubp6PI69WoV3C20uIQPAH4A/AH/p41/pDcTxP4BPGDtq3vYJGPpv8craeRdo/fyTI8ZhHnodOGgcV/3rnx8QI0SABO2xfAbiCfVR8Wj+CD8jenbRJNyGOxLoAaH1iLu4EUEHAv1+MsQ4zLE4AiIOcpibv4u9OET6+cP4ASnJ1JH4/G60A9km+GbBxLlpKAkADoR2JnaBrvWD/x1GCZn9EYLEHqVfI6Efx0D7E9tDF/rBSJ54l8FqTUse0J+EvxPrdK0fD4aOLXQi7zyGxMaRvvWjjH2U8o9I44OKnf+wyCpHoR/Phk6d/COq8481YrNI3/qR2B+kMl1Fl6J8o/JrU/GEA6HdiB2ha/0YBVx7rFwNHAj9JuIl6EI/qKyJug4Yvg7xA0QEpB8nQe8itoQu9EOT8M3mTsqUSUzykH6cBO1PbA9d91+ShDzV9xrtcgW21IT6L0yfcS90FKCdw+wS6Q9ISWjVfLTVVT2mdiPGGRduFKWm7dBStWlLmI0j/QExdgp7gT5qCu2BLKiLqtc94hI7PB8auQP4KuyIvSJ960fUqXWcd2F48Khr1bHSj2dDp/afmg7tMrFxpG/9mHMFuqrH3spFw0s0Bgr9OAzamdgFutaPpMuqo6WVEXWJdSL14xhof2J76MKfS2yXWGOVB1WXXGOVdxFSx587CXoLsTE0689RH7VW4RMLeKI9wPpzz4XeS2wDzdbXR52AWStjwiSAA6HdiB2h1f6cqT0whzzuzz0LejuxATTy90Xt40v7CzdGRvKS4O/zQ0AiXaRW5x/dv4vS4A/a308LYR5pFquRRvlHIrKWoCj5woCVId4eR/KPNDjURg2tdEC7rSQN5B9DYR70X5YivVxft7AyrOvrD4V2JnaBJurr+qpemLEywlRhT6qvPx16C7ExdK0fSjcj0maAzsqgBt7rfIxGP46B9iT2gi70I842bNj0U4wd/WAG/L5VP3p0W4iNoYv6Oh6eoJmSMW5laIzF8iT1TtgeV9RZoZ7QvdEUzsQu0CP+HOMKDFoZvDFg6s89CNqf2B5a4e8Hts84W0pgeohBtspBXYp8H3Tk/H23MBtHuvbn5mp7dlU9TUkP+XNJMabzHdCIbnuYDSItzZ+bdgUWrAwNPhwInRxw1/wXuYGj+4vo7flboRpjEQ6EjgojYK9/K04NFfNTauEBypXQWQLAfqQoHl9CfvpQ6C3ExtC9/q2YW2u6X1JWzfsYFPKX3L99LrQ/sT10XR+jKh+UN2AxlDOyXfLQaxxf/fkvT4d2JnaBZv258M6h4IFu2Em7/sezoLcQG0Mjfy6xrqLnVBLGWHw1i69WP5LCCn0TNEL3DLNXpCV/n5oo5jAVLY5Em6i8Pwm6uSNuCrNxpNX+nDira20qqyZriv384xhoZ2IX6Lr/wg8eiwpXYGQqPEgjsBrX+er3X46B9ie2h6bX/4i6IfcLS2mIY++7TfoCuLj6hwgN89CwBJ3Gx8rOVsn0kQ48tDS/4X1L8SzMb3BbkGdtwsD05AbP9YOU8xui+uljZei/P/3qx2HQbsSO0Ar/lveHLZYCVK4GeN1P5N+eAb2R2Aya9ueUY+8dlhLtdhWvgfEfz4AeGf9hR2wcaeTPpacvRdzLTx8J/Qq1Ij995PrJ3/mp0p8LO5YyF0s215g/9yxoZ2IXaLo+FiwtgTlvIAznp4+G3khsBk3Pf5mYvqOwMqZnNnw3i9cRDoT2JPaCZuvreskDuXkHxfQMvfbBgdBbiI2hC/3QLCg6lESZZkrfJ7nSj3gWNEMcRkYJsf5L0BXENBl1WV8/aquMLM9/eSJ0UtxZmFGGg4MigZ75ovHnvsOcUX09zRbzjCrU/K/Rev0gT2i2vu4cZrNI1+sH2e49Yb3lRC6e9fSS9ETohjj7hdkx0rQ/57/rxIrhBQdCv494Hlrtz1lo30Qjz1z+cRh02ndTNIMm1j8NxtmePs+76i+/esJHrH/6dGh/YntoRf9l2RtQWgJXzY4bdtbqx0OhnYldoHv7I79jf4+rOGGaRWr14yToLcTG0Ky/v32rjAsdX9S5vgI4ENqT2Asa7Z/9vq0yStiGNNVHkOe/RGmqwBQ0jEDHFpoJ85BLN+jPaRoHGWl2/2yx3msxVRHjZ0Td4GfV/Bf9bCM1dBiBfrHeJ1HR6dKEedDf5yPdBLilp/efC3Ribb1VxlUHGQe8iTb0598+Hdqf2B6a3b9SOerezsoIBWaJ3IBn1fp0j4PeQmwMzc5/idLK3UZWRkmKX2zA4Vc/DoPeSGwGrdvfY24RpKmVjrLuCQdCuxE7Qkv64TZ3Z44dVPrxUOh3EK9C1/lHGpz7ZzpVsYTF7K8Hyj+Ogd5FbAk9uL9H9LIyYg821sjo13gYtD+xPbRU/9Ds/b1sZTTIr5OStMGHA6GdiV2gUf2UmQcfJdUbXOoe6HoN1A0b2uQD4EBosXJqQTwKnXvXAEX+oZlfGaS9ewetDGCLeV1exH4e9Mr+2TDpv2iggYFW+LdBsTbngv/yUroGH0jleEX7MOgtxMbQ7PzKoMuajKyM8pYIiB194HnQzsQu0Gp/LvpulVHylsgK/TgG2p/YHrqXf6T3bJUBhfxFWUDPg95CbAytm/+ycasM9WOxWu0PnTniLWE2iLRi/4Z3bJXRvY76s0+Arl93I3aMNOHPBce2PdSkL7Kpnwe9l9gGutCPoFgkUtytXAGbex0vKCznSOs00o+ToLcQG0N/QErCrG6jrTIynVUDwo896vCzssPrNnAYtD+xPfR9fwmKeu/CVhm5OAn1STPkvhxBW1KXjeP60Y/DoJ2JXaAL/RCPy+PXc80L9d7OV294dVPbC/fb4EDoLcTG0IV+TCDrrIxMHIFg512BWj9OgvYk9oK+9SMoZG55q/JMiGS40/sLjacu28T3MVfd0Aha+u3QJXr+0Q//MBtHutaPQOzh3H0RBoZS5OJ/MjqJ9x2vQb7qgSuvX0StH0+FLptzrvTDh9gl0oV+iAbi2lAsqNmbK3yBAyLNdbRzW8Y6Btqf2B76A2IURE2zZY16KGfZlwqofJSL4feABka+xCNX+ekx0LuILaFr/Zit7s4ZA7y5Qg2sDr/t4zDodxCvQt/6occctDKGriMPzH85D9qN2BG61g/QwcLSVDSGl78C6LePY6A3EptBf0BKcjWWH/GqyJqoxKnMufEVBLJxAJwJ7U9sDH3fX0CxnIB4orMyuilTyRh6g+0bfDgQ2p/YHrrQD+jV6qb/SdRrMit8TRWwyEabxgFwJrQnsQt0rR+LR3VqFNiGHRBv73ge9EZiM+haPyicuRcVmIxzAMTMl9wfi3sGtBuxF3ShH92C29yJTteU+ohbRrZk3Qe9hdgY+tYPnOqanA+mTN33ZGKE06HQbsQu0LV+MF8+94rU5dK8B8/KyJaI+6D9ie2hC/3Q12QnSnYLn5p9P/6d0D7EltAh5wz/Hv8exON/LUjHOuz5CksAAAAASUVORK5CYII=);\n    background-repeat: no-repeat;\n    box-sizing: content-box;\n    border: none;\n    font: normal 12px arial, tahoma, sans-serif;\n    color: rgb(34, 34, 34);\n    float: left;\n    cursor: crosshair;\n}\n\ndiv.CanvasXpressConfiguratorColorExtra {\n    box-sizing: content-box;\n    background-image: url(data:image/gif;base64,R0lGODlhDwAPAKEBAAAAAP///////////yH5BAEKAAIALAAAAAAPAA8AAAIklB8Qx53b4otSUWcvyiz4/4AeQJbmKY4p1HHapBlwPL/uVRsFADs=);\n    background-repeat: no-repeat;\n    border: none;\n    font: normal 12px arial, tahoma, sans-serif;\n    color: rgb(34, 34, 34);\n    cursor: crosshair;\n    overflow: hidden;\n}\n\ndiv.accordionHead {\n    box-sizing: content-box;\n    margin-top: 2px;\n    height: 24px;\n    overflow: hidden;\n    float: left;\n    cursor: pointer;\n    vertical-align: middle;\n    text-align: left;\n    display: table-cell;\n    -moz-user-select: none;\n    -khtml-user-select: none;\n    -webkit-user-select: none;\n    -o-user-select: none;\n}\n\ndiv.accordionContent {\n    box-sizing: content-box;\n    overflow: auto;\n}\n\ndiv.hoverable:hover {\n    box-sizing: content-box;\n    background-color: #dfe8f6;\n}\n\ndiv.CanvasXpressContainer {\n    box-sizing: content-box;\n    position: relative;\n    float: left;\n}\n\ndiv.CanvasXpressContainerNT {\n    box-sizing: content-box;\n    position: relative;\n    float: left;\n}\n\ndiv.CanvasXpressHandlerVerticalOpen {\n    box-sizing: content-box;\n    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAHCAYAAAAxrNxjAAAANklEQVR42mNkIBIwgoi0tLT/IHrWrFmMyJLI4igKkRWjizGi60YHMI1YrUJXhKEQn3sxFOICAH1yHAgCw6JnAAAAAElFTkSuQmCC);\n    position: relative;\n    float: left;\n    background-position: 50% 50%;\n    background-repeat: no-repeat;\n}\n\ndiv.CanvasXpressHandlerVerticalClose {\n    box-sizing: content-box;\n    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAHCAYAAAAxrNxjAAAAN0lEQVR42mNkIBIwogukpaX9B9GzZs1ixKkQpggGkBUz4lKErpgRXRFMAl0MRRDdXcjijAxEAgClNhwIDjZ11QAAAABJRU5ErkJggg==);\n    position: relative;\n    float: left;\n    background-position: 50% 50%;\n    background-repeat: no-repeat;\n}\n\ndiv.CanvasXpressHandlerHorizontalOpen {\n    box-sizing: content-box;\n    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAKCAYAAAB4zEQNAAAAMElEQVR42mNkwAMYQURaWtp/ED1r1ixGnJLoCuAMbApQjEFXQJwkTmPxOgivV3ABAClDIAsKqUy5AAAAAElFTkSuQmCC);\n    position: relative;\n    float: left;\n    background-position: 50% 50%;\n    background-repeat: no-repeat;\n}\n\ndiv.CanvasXpressHandlerHorizontalClose {\n    box-sizing: content-box;\n    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAKCAYAAAB4zEQNAAAAL0lEQVR42mNkwAMY0QXS0tL+g+hZs2YxMmKTwJBEl4Abi02COEm8xhJ0EEGvoAMAyTQgC6MMiAUAAAAASUVORK5CYII=);\n    position: relative;\n    float: left;\n    background-position: 50% 50%;\n    background-repeat: no-repeat;\n}\n\ndiv.CanvasXpressWrapper {\n    box-sizing: content-box;\n    position: relative;\n    float: left;\n    line-height: 100%;\n}\n\n/***************/\n/* Data Filter */\n/***************/\n\ndiv.CanvasXpressDataFilter {\n    box-sizing: content-box;\n    color: rgb(34, 34, 34);\n    font: normal 12px arial, tahoma, sans-serif;\n    line-height: 100%;\n    margin: 0px;\n    padding: 0px;\n    position: absolute;\n    -moz-user-select: none;\n    -khtml-user-select: none;\n    -webkit-user-select: none;\n    -o-user-select: none;\n}\n\ndiv.CanvasXpressDataFilterToolbar {\n    box-sizing: content-box;\n    /*background: linear-gradient(rgb(240, 240, 240), rgb(230,230,230));*/\n    border: 1px solid rgb(51, 122, 183);\n    border-radius: 4px;\n    color: rgb(34, 34, 34);\n    cursor: move;\n    font: normal 12px arial, tahoma, sans-serif;\n    height: 32px;\n    left: 0px;\n    line-height: 100%;\n    margin: 0px;\n    padding: 2px;\n    position: absolute;\n    opacity: 0.95;\n    top: 0px;\n}\n\nspan.CanvasXpressDataFilterToolbarText {\n    font: normal 12px arial, tahoma, sans-serif;\n    color: rgb(34, 34, 34);\n    left: 8px;\n    line-height: 100%;\n    position: relative;\n    top: 9px;\n}\n\nimg.CanvasXpressDataFilterToolbarImage, svg.CanvasXpressDataFilterToolbarImage {\n    background: rgba(0, 0, 0, 0) !important;\n    border: 0px none !important;\n    box-shadow: 0 0 0px rgba(0, 0, 0, 0) !important;\n    cursor: pointer;\n    margin: 5px 8px 0px 0px !important;\n    float: right;\n}\n\nspan.CanvasXpressDataFilterText {\n    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAASElEQVR42mNkoBAwUt2A/0AAlgACsg0A6QWZQ4whOA2AsgkagtcAYgwhaAAhQ4gyAJ8htHcBRWFAUSxQlA7AEuSmRFLBwBsAAMDpRxF7e4BAAAAAAElFTkSuQmCC);\n    background-repeat: no-repeat;\n    background-position: -3px;\n    font: normal 12px arial, tahoma, sans-serif;\n    color: rgb(34, 34, 34);\n    left: 8px;\n    line-height: 100%;\n    position: relative;\n    top: 9px;\n}\n\nspan.CanvasXpressDataFilterTextActive {\n    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAASUlEQVR42mNkoBAwjhqAMOA/EBCtCQiwGoAkjhOA7MFqADGGoGvGGga4DMGmGWcgohuCSzNOA5ANwacZrwFIhuBVM4gS0oAZAAD1oisRsByngAAAAABJRU5ErkJggg==);\n    background-repeat: no-repeat;\n    background-position: -3px;\n    font: normal 12px arial, tahoma, sans-serif;\n    color: rgb(34, 34, 34);\n    left: 8px;\n    line-height: 100%;\n    position: relative;\n    top: 9px;\n}\n\ndiv.CanvasXpressDataFilterContainer {\n    box-sizing: content-box;\n    border: 0px;\n    left: 0px;\n    margin: 0px;\n    padding: 0px;\n    position: absolute;\n    top: 38px;\n}\n\ninput[type=checkbox].CanvasXpressCheckbox {\n    position: absolute;\n    overflow: hidden;\n    clip: rect(0, 0, 0, 0);\n    height: 1px;\n    width: 1px;\n    margin: -1px;\n    padding: 0;\n    border: 0;\n}\n\ninput[type=checkbox].CanvasXpressDataFilterContainerItem {\n    position: absolute;\n    overflow: hidden;\n    clip: rect(0, 0, 0, 0);\n    height: 1px;\n    width: 1px;\n    margin: -1px;\n    padding: 0;\n    border: 0;\n}\n\ninput[type=checkbox].CanvasXpressDataFilterContainerItemSelected {\n    position: absolute;\n    overflow: hidden;\n    clip: rect(0, 0, 0, 0);\n    height: 1px;\n    width: 1px;\n    margin: -1px;\n    padding: 0;\n    border: 0;\n}\n\ninput[type=checkbox].CanvasXpressCheckbox+label.CanvasXpressCheckboxLabel {\n    padding-left: 18px;\n    height: 13px;\n    display: inline-block;\n    line-height: 24px;\n    background-repeat: no-repeat;\n    background-position: 0 0;\n    font: normal 12px arial, tahoma, sans-serif;\n    color: rgb(34, 34, 34);\n    vertical-align: middle;\n    margin: 2px;\n    cursor: pointer;\n}\n\ninput[type=checkbox].CanvasXpressDataFilterContainerItem+label.CanvasXpressCheckboxLabel {\n    padding-left: 18px;\n    height: 13px;\n    display: inline-block;\n    line-height: 24px;\n    background-repeat: no-repeat;\n    background-position: 0 0;\n    font: normal 12px arial, tahoma, sans-serif;\n    color: rgb(34, 34, 34);\n    vertical-align: middle;\n    margin: 2px;\n    cursor: pointer;\n}\n\ninput[type=checkbox].CanvasXpressDataFilterContainerItemSelected+label.CanvasXpressCheckboxLabel {\n    padding-left: 18px;\n    height: 13px;\n    display: inline-block;\n    line-height: 24px;\n    background-repeat: no-repeat;\n    background-position: 0 0;\n    font: normal 12px arial, tahoma, sans-serif;\n    color: rgb(34, 34, 34);\n    vertical-align: middle;\n    margin: 2px;\n    cursor: pointer;\n}\n\ninput[type=checkbox].CanvasXpressCheckbox:checked+label.CanvasXpressCheckboxLabel {\n    background-position: 0 -13px;\n}\n\ninput[type=checkbox].CanvasXpressDataFilterContainerItemSelected:checked+label.CanvasXpressCheckboxLabel {\n    background-position: 0 -13px;\n}\n\nlabel.CanvasXpressCheckboxLabel {\n    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAA0CAYAAABRnrIZAAACXElEQVR42uWUT2iSYRzHv+8Sm3O2aYSMBJU8jOqyRhc1ELGCBZuH/mCYB7WiY4XQNTpKdAtmuoMJwuogDUYHUSMlIoajSx2EKXMLOvhvW0OU94n3ffPd1uvr+3Zc+x1e3ufh+Tzv+zy/D18KfyqXy5FSqYR6vY6/S6vVwmKxwOFwUMyYfSQSCWI2m2Gz2SiIVD6fJ+VyGV6vl6KYLygUCtjtdlFgP9jpdEDFYjESCAQkgV4x66lwOExCoZBsiFn/X0LRaJQEg8F/u71MJkOYgdPplASz2SyhaZozIh6PE4PBMBBkNq9Wq/D5fBS/KJ1Ok0qlglqtJgB0Oh2MRiNcLteee0wdUmGffd4mp9UU/OfVFH/lg5q7Vm+Tq0vbmDMrEb6kofjmDoJuv2+Q73Uab66ocOakqj/09FOLTGqHcGtylPq4/osEsrt4cE6Jh9MaflMB9PhDkyxVupg1KbC5Q2Njh2Dx8jD0YyPiEFPzq03y/GuXfX9hVeKaRXPg10WFXdnYIvPfuoi4tIKzHglhrVar6HkKhQIEwk5NX5S6BxRXvoAX1u2+Lgn0KpV6C7a5fv892dDCQoSD7vjuyoZex19xkMfjkQ0lk0kOmnV7ZUPvUgkOmpm5KRtaXl4EK+zUBadsaLWYBS/s2LhJEmg1KxAIqzo+IQrstn/gSAv7snQMTMLOTXBhIylsa2gYvYR9cpZm5ySFfVQEegmr7rbZOYGwsfUTYBLWNtrAGtGhl7A39E1+I4Gwkc0R9EvYxs89qK+w+c449iesqX2w2eLC6k+BSdj7OmGjD4GwvwHoyQhLMetK1QAAAABJRU5ErkJggg==);\n    background-repeat: no-repeat;\n    white-space: nowrap;\n}\n\ndiv.CanvasXpressDataFilterContainerMaskNoOverflow {\n    box-sizing: content-box;\n    border: 1px solid #d0d0d0;\n    margin: 5px;\n    overflow: hidden;\n}\n\ndiv.CanvasXpressDataFilterContainerMaskNoOverflowOut {\n    box-sizing: content-box;\n    border: none;\n    margin: 5px;\n    overflow: hidden;\n}\n\ndiv.CanvasXpressDataFilterContainerMask {\n    box-sizing: content-box;\n    border: 1px solid #d0d0d0;\n    margin: 5px;\n    overflow-x: hidden;\n    overflow-y: scroll;\n}\n\ndiv.CanvasXpressDataFilterContainerItem {\n    box-sizing: content-box;\n    color: #4181ba;\n    height: 15px;\n    padding: 1px 0px 0px 1px;\n    overflow: hidden;\n    white-space: nowrap;\n}\n\ndiv.CanvasXpressDataFilterContainerItemSelected {\n    box-sizing: content-box;\n    background-color: #dfe8f6;\n    color: #4181ba;\n    height: 15px;\n    padding: 1px 0px 0px 1px;\n    overflow: hidden;\n    white-space: nowrap;\n}\n\ndiv.CanvasXpressDataFilterContainerHoverable {\n    box-sizing: content-box;\n    border: 1px solid rgb(51, 122, 183);\n    margin: 2px;\n    margin-bottom: 4px;\n}\n\ndiv.CanvasXpressDataFilterContainerHoverableOut {\n    box-sizing: content-box;\n    border: none;\n    margin: 2px;\n    margin-bottom: 4px;\n}\n\ndiv.CanvasXpressDataFilterContainerHoverable:hover {\n    box-sizing: content-box;\n    background-color: #dfe8f6;\n}\n\ndiv.CanvasXpressDataFilterContainerNumeric {\n    box-sizing: content-box;\n    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAOCAYAAADuQ3ZcAAAAF0lEQVR42mNkAAJGNOLChQv/cRNYdAAA0dgUqRX/AM0AAAAASUVORK5CYII=);\n    background-repeat: repeat-x;\n    clear: both;\n    height: 18px;\n    margin: 2px;\n}\n\ndiv.CanvasXpressDataFilterContainerMin {\n    box-sizing: content-box;\n    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAlUlEQVR42mNkgIIDBw78ZyACODg4MCLzGWGa7e3tidHPcPDgQRRDGEGaTc0tidIMA6dPHocbAjZAV9eQJAMuXz5PZQM0NA1IMuDG9QuoBqioqJBkwJ07d1ANkJRWJ8mA509vUtkAUVFFkgx4/fo+qgG8fHIkGfD50yMqGgAiQIaws4oTpfnn75eoSRnGoCgzUQIoNgAAbjRcEcsB8BEAAAAASUVORK5CYII=);\n    background-repeat: no-repeat;\n    float: left;\n    height: 14px;\n    position: relative;\n    width: 14px;\n    z-index: 10002;\n}\n\ndiv.CanvasXpressDataFilterContainerMax {\n    box-sizing: content-box;\n    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAlUlEQVR42mNkgIIDBw78ZyACODg4MCLzGWGa7e3tidHPcPDgQRRDGEGaTc0tidIMA6dPHocbAjZAV9eQJAMuXz5PZQM0NA1IMuDG9QuoBqioqJBkwJ07d1ANkJRWJ8mA509vUtkAUVFFkgx4/fo+qgG8fHIkGfD50yMqGgAiQIaws4oTpfnn75eoSRnGoCgzUQIoNgAAbjRcEcsB8BEAAAAASUVORK5CYII=);\n    background-repeat: no-repeat;\n    float: left;\n    height: 14px;\n    position: relative;\n    width: 14px;\n    z-index: 10002;\n}\n\ndiv.CanvasXpressDataFilterContainerRange {\n    box-sizing: content-box;\n    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAOCAYAAADuQ3ZcAAAAFklEQVR42mNkAAJGNMKxcdd/3AQWHQAD/g7xOirtNAAAAABJRU5ErkJggg==);\n    background-repeat: repeat-x;\n    float: left;\n    height: 14px;\n    left: 0px;\n    position: relative;\n    z-index: 10001;\n}\n\ninput.CanvasXpressDataFilterContainerMinValue {\n    border: 1px solid rgba(255, 255, 255, 0.95);\n    color: rgb(51, 122, 183);\n    float: left;\n    font: normal 12px arial, tahoma, sans-serif;\n    margin-bottom: 2px;\n    margin-left: 1px;\n    line-height: 100%;\n    width: 40px;\n}\n\ninput.CanvasXpressDataFilterContainerMaxValue {\n    border: 1px solid rgba(255, 255, 255, 0.95);\n    color: rgb(51, 122, 183);\n    float: right;\n    font: normal 12px arial, tahoma, sans-serif;\n    margin-bottom: 2px;\n    margin-right: 1px;\n    line-height: 100%;\n    text-align: right;\n    width: 40px;\n}\n\ndiv.CanvasXpressDataFilterContainerScaleNone {\n    box-sizing: content-box;\n    background-image: url(data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==);\n    background-repeat: no-repeat;\n    background-position: 98% 50%;\n}\n\ndiv.CanvasXpressDataFilterContainerScaleLinearLog {\n    box-sizing: content-box;\n    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAQCAYAAAAMJL+VAAAAcElEQVR42mNkoDFgpIsFa9eu/R8cHEyqZf+JcSDdLWAC4n8kWgDS8xeXZRg+ALFBNC4+AR+AxAqBuB9KT0CxgBCNxwJsbDA9zC0gIQ6ItwCmGxufbAuQUtR/ZBMIBBFRAK8muliAI3ioYwE1AM0tAAB/xqIRdKGeOwAAAABJRU5ErkJggg==);\n    background-repeat: no-repeat;\n    background-position: 98% 50%;\n}\n\ndiv.CanvasXpressDataFilterContainerScaleLogLinear {\n    box-sizing: content-box;\n    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAQCAYAAAAMJL+VAAAAdElEQVR42mNkoDFgpJcF/0m1bO3atf+Dg4MJ6qG7BUxA/I9EC5iA7L+4LMPmAxC7EIgn4ODj9AFIDJkPkke3gBCN1QJsbBg9/C2AyVUCcQe1LEBOAO1AXIGWIMiygAGLBdh8RjIgpIkuFhCjjmwLKAY0twAAISOOEQIlMUAAAAAASUVORK5CYII=);\n    background-repeat: no-repeat;\n    background-position: 98% 50%;\n}\n\nselect.CanvasXpressDataFilterContainerString {\n    background-color: rgba(255, 255, 255, 0.95);\n    font: normal 12px arial, tahoma, sans-serif;\n    color: rgb(34, 34, 34);\n    margin-left: 3px;\n    margin-bottom: 3px;\n}\n\ndiv.CanvasXpressDataFilterHead {\n    box-sizing: content-box;\n    /*background: linear-gradient(rgb(240, 240, 240), rgb(230,230,230));*/\n    border: 1px solid rgb(51, 122, 183);\n    border-radius: 4px;\n    color: rgb(34, 34, 34);\n    cursor: pointer;\n    float: left;\n    height: 30px;\n    margin-top: 2px;\n    overflow: hidden;\n    opacity: 0.95;\n    padding: 2px;\n    text-align: left;\n    vertical-align: middle;\n    -moz-user-select: none;\n    -khtml-user-select: none;\n    -webkit-user-select: none;\n    -o-user-select: none;\n}\n\ndiv.CanvasXpressDataFilterHeadActive {\n    box-sizing: content-box;\n    background: linear-gradient(rgb(243, 253, 255), rgb(217, 232, 251));\n    border: 1px solid rgb(51, 122, 183);\n    border-radius: 4px 4px 0px 0px;\n    color: rgb(34, 34, 34);\n    cursor: pointer;\n    float: left;\n    height: 30px;\n    margin-top: 2px;\n    overflow: hidden;\n    opacity: 0.95;\n    padding: 2px;\n    text-align: left;\n    vertical-align: middle;\n    -moz-user-select: none;\n    -khtml-user-select: none;\n    -webkit-user-select: none;\n    -o-user-select: none;\n}\n\ndiv.CanvasXpressDataFilterContent {\n    box-sizing: content-box;\n    background-color: rgba(255, 255, 255, 0.95);\n    border: 1px solid rgb(51, 122, 183);\n    border-radius: 0px 0px 4px 4px;\n    border-top: 0px;\n    color: rgb(51, 122, 183);\n    font: normal 12px arial, tahoma, sans-serif;\n    overflow-y: scroll;\n    overflow-x: hidden;\n    padding: 2px;\n}\n\n\n/**\n * Scrollbars\n */\n\n\n/* All scrollbar buttons*/\n\ndiv.CanvasXpressDataTableHorizontal::-webkit-scrollbar-button,\ndiv.CanvasXpressDataTableVertical::-webkit-scrollbar-button,\ndiv.CanvasXpressDataFilterContent::-webkit-scrollbar-button,\ndiv.CanvasXpressDataFilterContainerMask::-webkit-scrollbar-button,\ndiv.CanvasXpressDataFilterContainerMaskNoOverflow::-webkit-scrollbar-button,\ndiv.CanvasXpressDataExplorer::-webkit-scrollbar-button,\ndiv.CanvasXpressDataCustomizer::-webkit-scrollbar-button,\nselect.CanvasXpressSearchCustomizer::-webkit-scrollbar-button,\nselect.CanvasXpressConfigurator::-webkit-scrollbar-button,\ndiv.CanvasXpressConfiguratorExample::-webkit-scrollbar-button,\ndiv.CanvasXpressConfiguratorExampleContent::-webkit-scrollbar-button,\nselect.CanvasXpressSlider::-webkit-scrollbar-button,\ndiv.CanvasXpressBinNameContainer::-webkit-scrollbar-button {\n    width: 4px;\n    height: 4px;\n}\n\n\n/* Tracks can be of two different colors */\n\ndiv.CanvasXpressDataFilterContent::-webkit-scrollbar-track,\ndiv.CanvasXpressDataFilterContainerMask::-webkit-scrollbar-track,\ndiv.CanvasXpressDataFilterContainerMaskNoOverflow::-webkit-scrollbar-track,\nselect.CanvasXpressSearchCustomizer::-webkit-scrollbar-track,\nselect.CanvasXpressConfigurator::-webkit-scrollbar-track,\nselect.CanvasXpressSlider::-webkit-scrollbar-track {\n    background-color: #FFFFFF;\n}\n\ndiv.CanvasXpressDataTableHorizontal::-webkit-scrollbar-track,\ndiv.CanvasXpressDataTableVertical::-webkit-scrollbar-track,\ndiv.CanvasXpressDataExplorer::-webkit-scrollbar-track,\ndiv.CanvasXpressDataCustomizer::-webkit-scrollbar-track,\ndiv.CanvasXpressConfiguratorExample::-webkit-scrollbar-track,\ndiv.CanvasXpressConfiguratorExampleContent::-webkit-scrollbar-track,\ndiv.CanvasXpressBinNameContainer::-webkit-scrollbar-track {\n    background-color: #F5F5F5;\n}\n\n\n/* All tracks -hovers */\n\ndiv.CanvasXpressDataTableHorizontal::-webkit-scrollbar-track:hover,\ndiv.CanvasXpressDataTableVertical::-webkit-scrollbar-track:hover,\ndiv.CanvasXpressDataFilterContent::-webkit-scrollbar-track:hover,\ndiv.CanvasXpressDataFilterContainerMask::-webkit-scrollbar-track:hover,\ndiv.CanvasXpressDataFilterContainerMaskNoOverflow::-webkit-scrollbar-track:hover,\ndiv.CanvasXpressDataExplorer::-webkit-scrollbar-track:hover,\ndiv.CanvasXpressDataCustomizer::-webkit-scrollbar-track:hover,\nselect.CanvasXpressSearchCustomizer::-webkit-scrollbar-track:hover,\nselect.CanvasXpressConfigurator::-webkit-scrollbar-track:hover,\ndiv.CanvasXpressConfiguratorExample::-webkit-scrollbar-track:hover,\ndiv.CanvasXpressConfiguratorExampleContent::-webkit-scrollbar-track:hover,\nselect.CanvasXpressSlider::-webkit-scrollbar-track:hover,\ndiv.CanvasXpressBinNameContainer::-webkit-scrollbar-track:hover {\n    background-color: #BEBEBE;\n    border-radius: 8px;\n}\n\n\n/* scrollbar background could be of two different colors but match the style tracks above */\n\ndiv.CanvasXpressDataFilterContent::-webkit-scrollbar,\ndiv.CanvasXpressDataFilterContainerMask::-webkit-scrollbar,\ndiv.CanvasXpressDataFilterContainerMaskNoOverflow::-webkit-scrollbar,\nselect.CanvasXpressSearchCustomizer::-webkit-scrollbar,\nselect.CanvasXpressConfigurator::-webkit-scrollbar,\nselect.CanvasXpressSlider::-webkit-scrollbar {\n    width: 8px;\n    height: 8px;\n    background-color: #FFFFFF;\n}\n\ndiv.CanvasXpressDataTableHorizontal::-webkit-scrollbar,\ndiv.CanvasXpressDataTableVertical::-webkit-scrollbar,\ndiv.CanvasXpressDataExplorer::-webkit-scrollbar,\ndiv.CanvasXpressDataCustomizer::-webkit-scrollbar,\ndiv.CanvasXpressConfiguratorExample::-webkit-scrollbar,\ndiv.CanvasXpressConfiguratorExampleContent::-webkit-scrollbar,\ndiv.CanvasXpressBinNameContainer::-webkit-scrollbar {\n    width: 8px;\n    height: 8px;\n    background-color: #F5F5F5;\n}\n\n\n/* All tracks thumbs */\n\ndiv.CanvasXpressDataTableHorizontal::-webkit-scrollbar-thumb,\ndiv.CanvasXpressDataTableVertical::-webkit-scrollbar-thumb,\ndiv.CanvasXpressDataFilterContent::-webkit-scrollbar-thumb,\ndiv.CanvasXpressDataFilterContainerMask::-webkit-scrollbar-thumb,\ndiv.CanvasXpressDataFilterContainerMaskNoOverflow::-webkit-scrollbar-thumb,\ndiv.CanvasXpressDataExplorer::-webkit-scrollbar-thumb,\ndiv.CanvasXpressDataCustomizer::-webkit-scrollbar-thumb,\nselect.CanvasXpressSearchCustomizer::-webkit-scrollbar-thumb,\nselect.CanvasXpressConfigurator::-webkit-scrollbar-thumb,\ndiv.CanvasXpressConfiguratorExample::-webkit-scrollbar-thumb,\ndiv.CanvasXpressConfiguratorExampleContent::-webkit-scrollbar-thumb,\nselect.CanvasXpressSlider::-webkit-scrollbar-thumb,\ndiv.CanvasXpressBinNameContainer::-webkit-scrollbar-thumb {\n    background-color: #337AB7;\n    border-radius: 4px;\n    border: none;\n}\n\ndiv.CanvasXpressDataFilter::selection,\ndiv.CanvasXpressDataFilterToolbar::selection {\n    background: rgba(0, 0, 0, 0);\n    color: rgb(34, 34, 34);\n}\n\ndiv.CanvasXpressDataFilterContainerItem::selection {\n    background: rgba(0, 0, 0, 0);\n    color: #4181ba;\n}\n\n\n/*\n * Menu\n */\n\ndiv.CanvasXpressLink {\n    box-sizing: content-box;\n    background-color: rgba(255, 255, 255, 0.95);\n    background-image: url(data:image/gif;base64,R0lGODlh+gABAIcAAOLj4/Dw8P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAAAAP8ALAAAAAD6AAEAAAgfAAMIHEiwoMGBAAQcXMiwocOHECNKnEixosWLGCMGBAA7);\n    background-repeat: repeat-y;\n    border: 1px solid rgb(51, 122, 183);\n    border-radius: 3px;\n    box-shadow: rgba(154, 154, 154, 0.2) 3px 3px;\n    color: rgb(34, 34, 34);\n    cursor: default;\n    font: normal 12px arial, tahoma, sans-serif;\n    line-height: 100%;\n    margin: 0px;\n    opacity: 0.95;\n    padding: 0px;\n    position: absolute;\n    -moz-box-shadow: rgba(154, 154, 154, 0.2) 3px 3px;\n}\n\ndiv.CanvasXpressTabMenuConfigurator {\n    box-sizing: content-box;\n    position: relative;\n}\n\ninput.CanvasXpressTabMenuConfigurator {\n    display: none;\n}\n\ninput:not(:checked).CanvasXpressTabMenuConfigurator+section.CanvasXpressTabMenuConfigurator>div.CanvasXpressTabMenuConfigurator {\n    display: none;\n}\n\nsection.CanvasXpressTabMenuConfigurator>h1.CanvasXpressTabMenuConfigurator {\n    float: left;\n}\n\nsection.CanvasXpressTabMenuConfigurator>div.CanvasXpressTabMenuConfigurator {\n    float: right;\n    width: 100%;\n    margin: 22 0 0 -100%;\n}\n\nsection.CanvasXpressTabMenuConfigurator>h1.CanvasXpressTabMenuConfigurator>label.CanvasXpressTabMenuConfigurator {\n    cursor: pointer;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    -webkit-user-select: none;\n}\n\nsection.CanvasXpressTabMenuConfigurator>div.CanvasXpressTabMenuConfigurator {\n    box-sizing: border-box;\n    padding: 0.5px;\n    border: 1px solid #ddd;\n    border-radius: 4px;\n    background: #fff;\n}\n\nsection.CanvasXpressTabMenuConfigurator>h1.CanvasXpressTabMenuConfigurator {\n    box-sizing: border-box;\n    margin: 0;\n    padding: 0.5px;\n    overflow: hidden;\n    font: normal 12px arial, tahoma, sans-serif;\n    color: rgb(34, 34, 34);\n    line-height: 100%;\n}\n\nsection.CanvasXpressTabMenuConfigurator>h1.CanvasXpressTabMenuConfigurator>label.CanvasXpressTabMenuConfigurator {\n    display: block;\n    padding: 5px;\n    border: 1px solid #ddd;\n    border-bottom: none;\n    border-top-left-radius: 4px;\n    border-top-right-radius: 4px;\n    background: #fff;\n}\n\ninput:first-child.CanvasXpressTabMenuConfigurator+section.CanvasXpressTabMenuConfigurator>h1.CanvasXpressTabMenuConfigurator {\n    padding-left: 0;\n}\n\nsection.CanvasXpressTabMenuConfigurator>div.CanvasXpressTabMenuConfigurator {\n    position: relative;\n    z-index: 1;\n}\n\ninput:checked.CanvasXpressTabMenuConfigurator+section.CanvasXpressTabMenuConfigurator>h1.CanvasXpressTabMenuConfigurator {\n    position: relative;\n    z-index: 2;\n}\n\ndiv.CanvasXpressMenu {\n    box-sizing: content-box;\n    background-color: rgba(255, 255, 255, 0.95);\n    border: 1px solid rgb(51, 122, 183);\n    border-radius: 3px;\n    box-shadow: rgba(154, 154, 154, 0.2) 3px 3px;\n    color: rgb(34, 34, 34);\n    cursor: default;\n    font: normal 12px arial, tahoma, sans-serif;\n    line-height: 100%;\n    margin: 0px;\n    padding: 0px;\n    position: absolute;\n    opacity: 0.95;\n    -moz-box-shadow: rgba(154, 154, 154, 0.2) 3px 3px;\n}\n\nul.CanvasXpressList {\n    background: transparent;\n    border: 0px none;\n    cursor: default;\n    list-style: none;\n    margin: 0px;\n    overflow: auto;\n    padding: 2px;\n    height: calc(100% - 100px);\n}\n\nli.CanvasXpressListItemSep {\n    cursor: default;\n    display: block;\n    font: normal 12px arial, tahoma, sans-serif;\n    color: rgb(34, 34, 34);\n    font-size: 1px;\n    height: 100%;\n    line-height: 1px;\n    list-style: none;\n    margin: 0px;\n    padding: 1px;\n    /* width: 100%; */\n    white-space: nowrap;\n}\n\ninput.CanvasXpressListItem {\n    cursor: default;\n    display: block;\n    font: normal 12px arial, tahoma, sans-serif;\n    color: rgb(34, 34, 34);\n    line-height: 100%;\n    list-style: none;\n    margin: 0px;\n    padding: 1px;\n    white-space: nowrap;\n}\n\ninput[type=file] {\n    display: block;\n}\n\ndiv.CanvasXpressListItem {\n    box-sizing: content-box;\n    border: 1px solid rgb(51, 122, 183);\n    font: normal 12px arial, tahoma, sans-serif;\n    color: rgb(34, 34, 34);\n    line-height: 24px;\n}\n\nli.CanvasXpressListItem {\n    border-color: rgba(0, 0, 0, 0);\n    border-style: solid;\n    border-width: 1px 0px;\n    cursor: default;\n    display: block;\n    font: normal 12px arial, tahoma, sans-serif;\n    color: rgb(34, 34, 34);\n    height: 100%;\n    line-height: 100%;\n    list-style: none;\n    margin: 0px;\n    padding: 0px;\n    width: 100%;\n    white-space: nowrap;\n    text-align: left;\n}\n\nli.CanvasXpressListItemActive {\n    background: linear-gradient(rgb(243, 253, 255), rgb(217, 232, 251));\n    border-color: rgb(170, 204, 246);\n    border-style: solid;\n    border-width: 1px 0px;\n    cursor: default;\n    display: block;\n    font: normal 12px arial, tahoma, sans-serif;\n    color: rgb(34, 34, 34);\n    height: 100%;\n    line-height: 100%;\n    list-style: none;\n    margin: 0px;\n    padding: 0px;\n    width: 100%;\n    white-space: nowrap;\n    text-align: left;\n}\n\nli.CanvasXpressListItemScrollTop {\n    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAFCAYAAACw/UeDAAAARUlEQVR42mNkQAMXL178z0Ah0NfXZ0Tmo3BAFkhLS+M1IDw8kmHlyuV41Tx9+hTFIjiDWAtggBSLGMmxgFSLGKkRB4QAAILWJXgE49MrAAAAAElFTkSuQmCC);\n    background-repeat: no-repeat;\n    background-position: 50% 50%;\n    border: 0px;\n    cursor: pointer;\n    height: 9px;\n    line-height: 9px;\n    width: 100%;\n    -moz-user-select: none;\n    -khtml-user-select: none;\n    -webkit-user-select: none;\n    -o-user-select: none;\n}\n\nli.CanvasXpressListItemScrollTopActive {\n    background-color: rgb(219, 236, 244);\n    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAFCAYAAACw/UeDAAAAbUlEQVR42mNkQAOHb/38z0AhsFVjZ0Tmo3BAFmjIsOHULMLJwKDs1sFwd1cFw5vvuC258eQXikWMyBYoSOC2QIYXYgEMgCx68hm3RQ9eICxihFkgzI/bAk0xVAuQLbr+CrdFbz9CLGKkRhwQAgBYqyubRxy5uAAAAABJRU5ErkJggg==);\n    background-repeat: no-repeat;\n    background-position: 50% 50%;\n    border: 1px;\n    border-color: rgb(170, 204, 246);\n    border-style: solid;\n    cursor: pointer;\n    height: 9px;\n    line-height: 9px;\n    width: 100%;\n    -moz-user-select: none;\n    -khtml-user-select: none;\n    -webkit-user-select: none;\n    -o-user-select: none;\n}\n\nli.CanvasXpressListItemScrollBottom {\n    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAFCAYAAACw/UeDAAAASUlEQVR42mO8ePHifwYaA0YQAbJIWloar8Lw8EgMsZUrl+PV8/TpUwZ9fX1GRpgAqRYRawHcJ6RaRIoFGJbALCIcyvgBsgUgAACiryV42XltywAAAABJRU5ErkJggg==);\n    background-repeat: no-repeat;\n    background-position: 50% 50%;\n    border: 0px;\n    cursor: pointer;\n    height: 9px;\n    line-height: 9px;\n    width: 100%;\n    -moz-user-select: none;\n    -khtml-user-select: none;\n    -webkit-user-select: none;\n    -o-user-select: none;\n}\n\nli.CanvasXpressListItemScrollBottomActive {\n    background-color: rgb(219, 236, 244);\n    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAFCAYAAACw/UeDAAAAcklEQVR42mM8fOvnfwYaA0YQAbJImJ8NpyJNMQYGZbcODPG7uyoYrr/Cbfjbj78YbNXYGRlhAiCLFCRwWyTDi2oRyIInn3Fb8OAFxAK4T5At0pDBbZEIJ8QikAVvvuO24MYThAUYlsAsIjPo4QDZAhAAAK/AK5vjVTSgAAAAAElFTkSuQmCC);\n    background-repeat: no-repeat;\n    background-position: 50% 50%;\n    border: 1px;\n    border-color: rgb(170, 204, 246);\n    border-style: solid;\n    cursor: pointer;\n    height: 9px;\n    line-height: 9px;\n    width: 100%;\n    -moz-user-select: none;\n    -khtml-user-select: none;\n    -webkit-user-select: none;\n    -o-user-select: none;\n}\n\nli.CanvasXpressListItemScrollSearch {\n    border-color: rgb(170, 204, 246);\n    border-style: solid;\n    border-width: 1px;\n    width: 100%;\n}\n\ninput.CanvasXpressListItemScrollSearch {\n    color: rgb(34, 34, 34);\n    cursor: default;\n    font: normal 12px arial, tahoma, sans-serif;\n    line-height: 24px;\n    list-style: none;\n    margin: 3px;\n    outline-style: none;\n    outline-width: 0px;\n    padding-left: 5px;\n    width: 93%;\n}\n\na.CanvasXpressListItemA {\n    border-color: rgba(0, 0, 0, 0);\n    border-style: solid;\n    border-width: 0px 1px;\n    color: rgb(34, 34, 34);\n    cursor: pointer;\n    display: block;\n    font: normal 12px arial, tahoma, sans-serif;\n    line-height: 24px;\n    list-style: none;\n    margin: 0px;\n    outline-style: none;\n    outline-width: 0px;\n    padding: 3px 3px 3px 38px;\n    position: relative;\n    text-decoration: none;\n    white-space: nowrap;\n}\n\na.CanvasXpressListItemAActive {\n    border-color: rgb(170, 204, 246);\n    border-style: solid;\n    border-width: 0px 1px;\n    color: rgb(34, 34, 34);\n    cursor: pointer;\n    display: block;\n    font: normal 12px arial, tahoma, sans-serif;\n    line-height: 24px;\n    list-style: none;\n    margin: 0px;\n    outline-style: none;\n    outline-width: 0px;\n    padding: 3px 3px 3px 38px;\n    position: relative;\n    text-decoration: none !important;\n    white-space: nowrap;\n}\n\na.CanvasXpressListItemAArrow {\n    background: url(data:image/gif;base64,R0lGODlhDAAJAIcAACluvipxvzJ1vyxwwCt1yjp6zkD/QDiC1jmE0zyE0z2I3UeLyUGJ2VWUzlKg7FSg6Weg1WKq8Y7D9orD/JXL/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAMAAAYALAAAAAAMAAkAAAgzAA8YGEiwoAEFCQwaJEABgUKCBCRMYPDQAIEHESAIeEjAQYMAFQksAFDR4oCSBgqgNBAQADs=) no-repeat scroll right 50% transparent;\n    border-color: rgba(0, 0, 0, 0);\n    border-style: solid;\n    border-width: 0px 1px;\n    color: rgb(34, 34, 34);\n    cursor: pointer;\n    display: block;\n    font: normal 12px arial, tahoma, sans-serif;\n    line-height: 24px;\n    list-style: none;\n    margin: 0px;\n    outline-style: none;\n    outline-width: 0px;\n    padding: 3px 3px 3px 38px;\n    position: relative;\n    text-decoration: none;\n    white-space: nowrap;\n}\n\na.CanvasXpressListItemAArrowActive {\n    background: url(data:image/gif;base64,R0lGODlhDAAJAIcAACluvipxvzJ1vyxwwCt1yjp6zkD/QDiC1jmE0zyE0z2I3UeLyUGJ2VWUzlKg7FSg6Weg1WKq8Y7D9orD/JXL/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAMAAAYALAAAAAAMAAkAAAgzAA8YGEiwoAEFCQwaJEABgUKCBCRMYPDQAIEHESAIeEjAQYMAFQksAFDR4oCSBgqgNBAQADs=) no-repeat scroll right 50% transparent;\n    border-color: rgb(170, 204, 246);\n    border-style: solid;\n    border-width: 0px 1px;\n    color: rgb(34, 34, 34);\n    cursor: pointer;\n    display: block;\n    font: normal 12px arial, tahoma, sans-serif;\n    line-height: 24px;\n    list-style: none;\n    margin: 0px;\n    outline-style: none;\n    outline-width: 0px;\n    padding: 3px 3px 3px 38px;\n    position: relative;\n    text-decoration: none !important;\n    white-space: nowrap;\n}\n\nimg.CanvasXpressListIcon, svg.CanvasXpressListIcon {\n    background-position: center;\n    border: 0px none !important;\n    color: rgb(34, 34, 34);\n    cursor: pointer;\n    font: normal 12px arial, tahoma, sans-serif;\n    height: 24px;\n    line-height: 24px;\n    list-style: none;\n    left: 3px;\n    margin: 0px !important;\n    padding: 0px;\n    position: absolute;\n    top: 3px;\n    vertical-align: top;\n    width: 24px;\n    white-space: nowrap;\n    background: rgba(0, 0, 0, 0) !important;\n    box-shadow: 0 0 0px rgba(0, 0, 0, 0) !important;\n}\n\nspan.CanvasXpressListItemText {\n    color: rgb(34, 34, 34);\n    cursor: pointer;\n    font: normal 12px arial, tahoma, sans-serif;\n    line-height: 24px;\n    list-style: none;\n    margin-right: 10px;\n    white-space: nowrap;\n}\n\ninput.CanvasXpressListItemText {\n    color: rgb(34, 34, 34);\n    cursor: pointer;\n    font: normal 12px arial, tahoma, sans-serif;\n    line-height: 24px;\n    list-style: none;\n    white-space: nowrap;\n}\n\nspan.CanvasXpressListItemTextShort {\n    color: rgb(34, 34, 34);\n    cursor: pointer;\n    float: right;\n    font: italic 9px arial, tahoma, sans-serif;\n    line-height: 24px;\n    list-style: none;\n    margin-left: 10px;\n    white-space: nowrap;\n}\n\nspan.CanvasXpressListItemTextSep {\n    background-color: rgb(224, 224, 224);\n    border-bottom: 1px solid;\n    border-bottom-color: rgb(255, 255, 255);\n    cursor: default;\n    display: block;\n    font: normal 12px arial, tahoma, sans-serif;\n    color: rgb(34, 34, 34);\n    font-size: 1px;\n    line-height: 1px;\n    list-style: none;\n    margin: 2px 3px;\n    overflow: hidden;\n    white-space: nowrap;\n}\n\ntable.CanvasXpressListItemTable {\n    border: collapse;\n    line-height: 20px;\n    color: rgb(34, 34, 34);\n    cursor: default;\n    font: normal 12px arial, tahoma, sans-serif;\n    color: rgb(34, 34, 34);\n    line-height: 24px;\n    padding-left: 3px;\n    -moz-user-select: none;\n    -khtml-user-select: none;\n    -webkit-user-select: none;\n    -o-user-select: none;\n}\n\nimg.CanvasXpressToolbarHelp, svg.CanvasXpressToolbarHelp {\n    background: rgba(0, 0, 0, 0) !important;\n    border: 0px none !important;\n    box-shadow: 0 0 0px rgba(0, 0, 0, 0) !important;\n    cursor: default;\n    float: right;\n    margin: 0px 0px 0px 2px !important;\n    -moz-user-select: none;\n    -khtml-user-select: none;\n    -webkit-user-select: none;\n    -o-user-select: none;\n    -ms-user-select: none;\n}\n\ndiv.CanvasXpressToolbarHelp {\n    box-sizing: content-box;\n    background-color: rgba(255, 255, 255, 0.95);\n    border-radius: 5px;\n    border: 1px solid rgb(51, 122, 183);\n    box-shadow: rgba(154, 154, 154, 0.2) 3px 3px;\n    color: rgb(34, 34, 34);\n    cursor: default;\n    font: normal 12px arial, tahoma, sans-serif;\n    line-height: 24px;\n    -moz-user-select: none;\n    -khtml-user-select: none;\n    -webkit-user-select: none;\n    -o-user-select: none;\n    -ms-user-select: none;\n}\n\np.CanvasXpressToolbarHelp {\n    cursor: default;\n    font: normal 12px arial, tahoma, sans-serif;\n    color: rgb(34, 34, 34);\n    line-height: 24px;\n    margin: 0px;\n    padding: 5px 5px 5px 20px;\n}\n\ndiv.CanvasXpressForm {\n    box-sizing: content-box;\n    border: 1px solid rgb(51, 122, 183);\n    border-radius: 5px;\n    background-color: rgba(255, 255, 255, 0.95);\n    color: rgb(34, 34, 34);\n    cursor: move;\n    font: normal 12px arial, tahoma, sans-serif;\n    margin: 8px;\n    padding: 8px;\n    position: absolute;\n    white-space: nowrap;\n}\n\ninput.CanvasXpressFormButton {\n    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAeCAYAAADtlXTHAAAAFklEQVR42mP88OHDf0aSiGfPntGaAAAL8XAJa+SuYgAAAABJRU5ErkJggg==);\n    background-repeat: repeat-x;\n    border: 1px solid rgb(51, 122, 183);\n    border-radius: 5px 5px 5px 5px;\n    color: rgb(34, 34, 34);\n    cursor: pointer;\n    float: left;\n    height: 22px;\n    margin-top: 2px;\n    overflow: hidden;\n    padding: 2px;\n    vertical-align: middle;\n    -moz-user-select: none;\n    -khtml-user-select: none;\n    -webkit-user-select: none;\n    -o-user-select: none;\n    -ms-user-select: none;\n}\n\ninput.CanvasXpressFormButtonActive {\n    background-color: rgba(255, 255, 255, 0.95);\n    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAeCAYAAADtlXTHAAAAFklEQVR42mN89fnvf0aSiBvPf9GaAABVL3D5nF6uqAAAAABJRU5ErkJggg==);\n    background-repeat: repeat-x;\n    border: 1px solid rgb(51, 122, 183);\n    border-radius: 5px 5px 0px 0px;\n    color: rgb(34, 34, 34);\n    cursor: pointer;\n    float: left;\n    height: 22px;\n    margin-top: 2px;\n    overflow: hidden;\n    opacity: 0.95;\n    padding: 2px;\n    vertical-align: middle;\n    -moz-user-select: none;\n    -khtml-user-select: none;\n    -webkit-user-select: none;\n    -o-user-select: none;\n    -ms-user-select: none;\n}\n\ninput.CanvasXpressFormText {\n    background-color: rgba(255, 255, 255, 0.95);\n    border: 1px solid rgb(51, 122, 183);\n    color: rgb(34, 34, 34);\n    cursor: default;\n    font: normal 12px arial, tahoma, sans-serif;\n    line-height: 24px;\n    padding-left: 3px;\n}\n\nform.CanvasXpressFormForm {\n    background-color: rgba(255, 255, 255, 0.95);\n    border: 1px solid rgb(51, 122, 183);\n    color: rgb(34, 34, 34);\n    cursor: default;\n    font: normal 12px arial, tahoma, sans-serif;\n    line-height: 24px;\n    margin: 8px;\n    overflow: auto;\n    padding-left: 3px;\n}\n\n\n/*\n * Slider\n */\n\ndiv.CanvasXpressSlider {\n    background: rgba(0, 0, 0, 0);\n    border: 1px solid rgba(35, 82, 124, 0.2);\n    border-radius: 50%;\n    height: 36px;\n    position: absolute;\n    margin-left: 3px;\n    margin-right: 3px;\n    width: 36px;\n}\n\ndiv.CanvasXpressSliderRemote {\n    background: rgba(0, 0, 0, 0);\n    height: 36px;\n    position: absolute;\n    margin-left: 3px;\n    margin-right: 3px;\n    width: 36px;\n}\n\ndiv.CanvasXpressSlider:hover {\n    background: rgba(0, 0, 0, 0.4);\n}\n\n@media screen and (max-width: 480px) {\n    div.CanvasXpressSlider {\n        width: 20px;\n        height: 20px;\n    }\n}\n\ndiv.CanvasXpressSliderLeft {\n    left: -50px;\n}\n\ndiv.CanvasXpressSliderLeft img, div.CanvasXpressSliderLeft svg {\n    margin: 5px 5px 3px 3px;\n}\n\n@media screen and (max-width: 480px) {\n    div.CanvasXpressSliderLeft {\n        left: -25px;\n    }\n    div.CanvasXpressSliderLeft img, div.CanvasXpressSliderLeft svg {\n        margin: -4px 0px 0px -2px;\n    }\n}\n\ndiv.CanvasXpressSliderRight {\n    right: -50px;\n}\n\ndiv.CanvasXpressSliderRight img, div.CanvasXpressSliderRight svg {\n    margin: 5px 3px 3px 8px;\n}\n\n@media screen and (max-width: 480px) {\n    div.CanvasXpressSliderRight {\n        right: -25px;\n    }\n    div.CanvasXpressSliderRight img, div.CanvasXpressSliderRight svg {\n        margin: -4px -2px 0px 2px;\n    }\n}\n\ndiv.CanvasXpressSliderDotsContainer {\n    top: 25%;\n}\n\ndiv.CanvasXpressSliderDots {\n    width: 10px;\n    height: 10px;\n}\n\n@media screen and (max-width: 480px) {\n    div.CanvasXpressSliderDots {\n        width: 5px;\n        height: 5px;\n        margin-left: 1px;\n        margin-right: 1px;\n    }\n}\n\ninput.CanvasXpressSlider,\nselect.CanvasXpressSlider {\n    padding: 2px 3px 2px 2px;\n    cursor: default;\n    color: rgb(34, 34, 34);\n    border-left: none;\n    border-right: none;\n    border-top: none;\n    border-bottom: 1px solid rgb(51, 122, 183);\n    background: rgba(0, 0, 0, 0);\n    width: 100%;\n    max-Width: 100%;\n    line-height: 22px;\n    margin: 0;\n}\n\ninput.CanvasXpressSlider:focus,\nselect.CanvasXpressSlider:focus {\n    outline: 0;\n}\n\n\n/*\n@media (max-width: 480px) {\n  img {\n    height : 16px;\n    width : 16px;\n  }\n}\n*/\n\n\n/*\n * Parent Node\n */\n\ndiv.CanvasXpress-ParentNode {\n    margin: auto;\n    display: table;\n    padding: 0;\n}\n\n/*\n * CanvasXpress\n */\n\ncanvas.CanvasXpress {\n    -moz-user-select: none;\n    -khtml-user-select: none;\n    -webkit-user-select: none;\n    -o-user-select: none;\n    user-select: none;\n    -ms-user-select: none;\n}\n\ncanvas.CanvasXpress:hover {\n    border: 1px solid rgba(35, 82, 124, 0.2);\n    border-radius: 6px;\n    margin: -1px;\n}\n\ncanvas.CanvasXpressUpload {\n    border: 1px solid rgba(35, 82, 124, 0.2);\n    border-radius: 6px;\n    margin: -1px;\n    background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAAQn0lEQVR4nO3dX4gd133A8W/CLSztUrZ0Hzbgh01Z6BZUWIpKHKKHDcigB1EMVcAPwmxBUIea1g95UMFNEEENJhFFEa6dGOMoxijCMW4QJlHjoAZHyK1TFOqAFCSQiAwrWIMMa1jDCrYPZxcvK91zZu6dmTNz5/uBQbZXvvu7c+f3u2fOnD8gSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSVJffSZ3AOqFWWARmN8+/hSY2f7v03v+7ifA3e0/V4HfAx8A17f/VIUsAKraDLAMfBH4K2CJkOhV+Bj4LfAu8N/bf96u6LUljehR4CTwHrDV8HEDOAMcBAZ1v1FJwT7gOeAOzSf9sGMNeInQApFUsSngKHCF/MmeOq4BXyPckkgawwxwnNAplzuxyx7rwGlgrvKzIk24KeAEcI/8iTzusYGF4AE+BdAwx4BvUk/CfLR93B7y8zlCq6Ou330K+A7hUWOvWQC01xLwAqFnf1wfAr8C/g94n/As/zbhcV4RA2Bh+1gEvgDsJ4wlGNdN4KvA2xW8ltR5U4Rvxk3Ga2b/FHiakLB1mQNWgFcZ//bkLHYUqueWgKuMlkCbhKQ/yoOj+powIIwBeJVQgEZ5D3fw0aF66hijJc4qYfDPI82HPNQMofVxg9EK2YnmQ87LPoA8Zgn3sY8QLtoZ4I+3f/b77T9vE8a+36wphgHwMvBkyf/vLmEA0Iu0uxPtceAbhNZNGf8J/C3F+ymkpEcJz9EvEEarlb2vvkoY7voE1YyrnwMul4xjDXiG0FfQJUco3yK4Ruh4lEa2TBiWWjbhizRV3wGeYrTOqwXCBV7m950e8Xe1xRShAK9T7hZnf45g1V1ThHvQMgk2zrFBaMYX7XFfpNxovqtMVhLMA5co/v7XgQM5AlW3DAjN45xDZc8Tb7aWSf5Nwn3+pM6ue5riHZ8WAUUdZLRe5zqOncTde59eJvlXt9/TpFui+OdmEdADpgmDSHIn/cOOW3x6wc5RPPnfo12P9eo2DVyk2Lm5R72Dm9Qh+wlJljvRU62Bk4QhuEX+/hvkGciT2wB4nmLn6A5OJuq9o4w+4myD0An1bcIjvZ1x7bvvtXfWzztE6Fc4R/2LbjzP5N7vF/U1ireSuvYoVBU5zmhJf44wMGWcC2cf8CzVtzxOjxHTpHmGYufsbK4Alc9pyiXWKqFgVLUg5m6HKPc4y+QvrmgROJYrQDXvBOW+8U/QTDPxIMXv8fcerzUQX1edJH3+1rFTsBeOUTypLlHNXPUyBoT71zL9Er/Ae/6UIk94ruJ5nGjLFJsfv0lo7udU9Ln2Dbo9rLcpA4otfvpsrgBVr1mKPT9fpz0DZ2aAXxKPdV+26LqnyBiKDZw4NJHeIp38q5Sfblq3AeGZvh1X1ThI+jr4abboVIujdLsT6GFF4HzWiLqtyBOgQ9miU6VmSDf7Nmn/2PDdReAW3vePY4r0DM/3sUNwIjxHuto/lS26cgaEb/62F6suKHIrsJIrOFVjjvTjtDeyRafczpN+wmIroMNOEf+A16hnZJ+6YZ70F8TjuYLTeKZIrzFvL7pSHYJX8oWmcaRG/DnqS1DsNnGSllHrjXeIf6hH8oWmlkm1Ar6XLzSNYo74B3oLv/31qXniQ8TX6ciaAZ/NHUBLHE78/GXgfhOBqBNuAz+L/Hya9DWlFjlHvAXgWG/tdZj4NfN6vtBUVmzJrfczxqX2GhDf9KUTtwHeAoTn+rGVcN0/Xg9zH/hR5OfTdGAEZp86tuYITfmF7X/+I0Lip1Z5vVxzXOqunxA2GRnmMfwCyWKeMKPvDGFgRpk94fYebZ3xp/wGxK8tBwU1ZIowHfMFql81V4p5k+HXzib93GuhMcvAK4z3DZ96/i/FpFYRbn0/QNfMEBbBbGIH3qsNvSd116PEr6Fn8oWW1qVOwDngn4EnaW5xi48a+j3qrt8QnggMy6U/bzCWiTRDWKRj1O24xjlc601FxPZmeCdjXEltbgEMCDP0vkk9c/DvAx9Efj4L3K3h92ryXGf4asvzDcZRWlsLwBLwEtVMq7wN/Br4X8IHdZOQ+DbvVZWbkZ/1abv1sQ0I22oV2Yxj2HEPeJUwDsCtnNWEp4lfk/PZIuuQecLWy6Mk/QYh6Q/S3laNJtcR4tdn2/aOaJ3DpJfjethxg/CYxSWvldMy8et0OVdgXVBm593dib+C3/Zqh9RYgOVskbXYgLBFdZnEX8XEV/vME79uXU5uj2nCFtVFE3+TsA6bTX210Tzx63clV2BtNE2YYls0+a/hKqtqt3lsARRSNvlP04FVVdR7B7APIGkAXKRY4q9j1VR3LGMBSDpLseS/xfBhlVIbOQ4g4VmKJf9VHL2n7nEkYMQhiiX/ZVw9Rd30LeLXdm/NU2yEn8mvLnud4df2nYxxZTUgvd/eFmEutcmvLuvsegB1KnLffwfv+dVtU8Rnr76QL7R8FklP6V3H3lF1337i13mr1wSsyxXS3/5PZItOqo6rAu+xQjr53T9dk8J9AXaZJszYiyX/NXp2UjSxUjsD9W5Z+dTc/k3C3GlpEhwkfr2fyhda82ZIP/N/Plt0UvVOE7/eD+ULrXmpb/81nM/fNqdw0tWoBsRvd9fp0UzWKUKCxwpAbBtlNW/n22sTi8AoDhO/3l/PF1rzniJ+Mm7gMl5tsrfpahEoL9b737vH3KnlvFeyRaa9ht23WgSKmyc+0K1Xzf/USKhV/PZvi1SnlUWgmNR5/Dn1bGfXSqmTcTxfaNol9TlZBIqZo/hGtdeAM0z4hjV3iF9MTvbJr2jyWwTSyp7LnWONMAJ2oua/pBZDfDNfaNo26gVrEXhQmW//2HEJeLzh2GtxkvgbnYg32WGjJr9F4OHGPZ97jyt0fLJQrPd/gx71hLZQVRerRSCo6tv/YcdrdLDTcIb4m7qQL7Teq/qbyiJQ/Tnde6yRocU8Ts9kquny1hivrdGdBv6x4tccAOe2//nHFb92V1whzO6bBf5w+7/9CeGLcBZ4BFhg9Jmus4Q+s+8D/wDcHyfYJqTu/xfzhdZbdX9L2RJI20cY+HaO+FTh2HGZDjw9u8DwN3AvY1x9VXfyWwTKmyI06y+QXiJv73GN0KJorVsMD977/2YVTf5V4lO2b1DsQrUIlLdA2B2rTCFYpaUt6SnigX87X2i9Uyb5F4kX7lcIiW0RqM8iYahwmSLQutuBfcSDPpYvtF4pm/yQLgBgEWjCCsX7CFq3jF5qu6/lbJH1xyjJD8UKAFgEmjBPeLJQ5HO8SIvmE6wQD3Y+V2A9MWryQ/ECABaBJkwDb1Ds8zyRKcYHHCceaGsq1QQaJ/mhXAEAi0ATBsDLFDvHrVhU9+vEA1U9xk1+KF8AwCLQlPOkz/E1WjDEPlYAbmWMa5JVkfwwWgEAi0ATBoR7/dQ5PpkrwB2vYAFoUlXJD6MXALAINGGGMB4jdn43CEOPs7EANKfK5IfxCgBYBJqwRPocn80WHfCtIUFZAKpVdfLD+AUALAJNKLLLVrahwrE+gI1cQU2YOpIfqikAYBGo2xTpW4HTuYLzKUC96kp+qK4AgEWgbo8TP6/3yPREYCURWNYOio6rM/mh2gIAFoG6pUYKruQIKlWZ9ucIagLUnfxQfQEAi0CdjhA/pz/PEVRqMxA/5PKaSH6opwCARaAuqU1IN8kwUWg2EtAWbgZSVlPJD/UVALAI1OU5WviFG1tYolc7o46pyeSHegsAWATqkGpxn8kR1JVIQDdyBNRBTSc/1F8AwCJQh9htwNUcAZ2JBLRFGNKo4XIkPzRTAMAiULXXiZ/DxmfgrkQC2sJdgWJyJT80VwDAIlClZ4ifw31NB7SYCOiFpgPqiJzJD80WALAIVCW1CtfhHEHF7kvu5Aio5XInPzRfAMAiUIV54ufuqRxBvZIIaqK2Qh5TG5If8hQAsAiMa0D8vH09R1BHE0GdyhFUC6VGTjaV/JCvAEDxIrBBC5fCboHY5qRZCsB0IqhVXB9wR6oF0NQmEDkLAKSLgC2A4WKf3Uu5gnozEtQWfpi7DSsCTe4Ak7sAwPAiYPLHtbIAPBEJagu4lCuwltpbBJre/qkNBQAeLAImf1rrbgEgzEeODQvews7AvXaKQI6939pSAODTImDyFxPLsWwFANL3t2/mC621TpBn48c2FQAIiW/yp80Tz7EsjwF3LAwJylZA+7StAKiYWgYCfbai4G4C/5H4O/9W0e+S+ig11Pf2KC9aVQGA9L5ly4QOQ0nlfSHys0+A600FEpN6JHgHZwnm5i1AN60x/HN7b9QXrbIFAOlWwCNkXMpY6qgDhFW4hvnVqC9cdQH4DfDDxN95kkwzl6SO+kri579sJIqC5kiPC1jDpcNz8RagW1KLgm4wxqKgVbcAAO4C/5L4O7OE/oLs2xxLLXeE+MSonwEfNxRLKZdIjw14LVt0/WULoFtSG4O09snaPLBOughk3+u8ZywA3ZGaZ7NGy1vRK6QLwBZhvTM1wwLQDVPEP6stOrLexlksAm1iAeiGU8TzpTOLpkwRBioUKQLuKFQ/C0D7HSC9clKnxtPMEX+Usfv4Hq4iVCcLQLvNEUbMxnLkHh359t9tkWKdglvAL4iPfNLoLADtNQAuM8Et5QMULwK3gEfzhDnRLADtNADeIJ0XV+l4C7lMEdgkzC/o9BtuGQtA+xRN/k0mZF2NMkVgp+rtzxLp5LEAtMs0cJFieTBRT8r2U7xjcKf6vUwHOz9axgLQHvuAaxS7/s9nirFWCxQ/ATvHOuG2wHUFRmMBaIenKd4KvsIYE37abhp4i3JFYIvwKOQ0YcixirMA5LUEvEPx6/waPWn1HqfYtlEPuzW4QJg11epx0S1hAchjgTAqtsw13pvk37Gf8rcEe28PXiVMovAW4eEsAM2ZIuwLeYHy1/L79Cz5d0wRxkGP0hrYe1wFzhAmJS1hCwEsAHVbJFxv5yj3pGv3cZGG7vk/08QvGdESIXkPVPy6H2wfd4GPCIsprFX8O3L6IfElom8xvN/kB8DfRf7fJeBvRglqQv0BYWWracI5XWT8xP1X4BvA/TFfZ2I8Adxg/NZAX47lxPkcpwWw0oL3N6nHHcLmH42qY0mwqv0I+AvCN9PNzLFIdfg+8JeE5b0a1YUCAKE59ANCIfgK8G7WaKRq/Bfw18DfE25HG9eVArDjPvBj4IuEivld4MOsEUnlvQ18efv4dc5AulYAdvst8E/A54DHgBcJnXtSG30I/Dvhi+sxwrd/dpMwy+4+oaK+DXyV0BO7DHyJMJ14IVtk6rvrhOvyJ4SEb13P/iQUgL2ubx8vbv/7NGHSxQLwZ8DnE///NPUuRjJLvc94P6nxtT9mxF1oJ9wnhMfKN4HfEa6/d/H2VC00zmNATZgu9wFIGpMFQOoxC4DUYxYAqccsAFKPWQCkHrMASD1mAZB6zAIg9ZgFQOoxC4DUYxYAqccsAFKPWQCkHrMASD1mAZB6zAIg9ZgFQOoxC4DUYxYAqccsAFKPWQCkHrMASD1mAZB6zAIg9ZgFQOoxC4DUYxYAqccsAFKPWQCkHrMASD02yB2AGvc/wO0hP/tdg3FIkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRJkiRl9P8s0/RVv6+5CQAAAABJRU5ErkJggg==\');\n    background-size: contain;\n    background-repeat: no-repeat;\n}\n\ncanvas.CanvasXpress::selection {\n    background: rgba(0, 0, 0, 0);\n    color: rgb(0, 0, 0);\n}\n\ndiv.CanvasXpressPlay {\n  background-color: rgba(0, 0, 0, 0.1);\n  background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAARtElEQVR42u2dB7gdRRXHT0AUMdIEARF5IBEpIh9GQIh4RSw0AwjYKIpUQQUpghUbICIWLIiU2OgoVQxFnijSFKWpFOGpFCUiLQpY0Pm92U0um5md2Tpz793/950vedvu7MzZmdNnigwfpihaWdFaisYSepGiZRN6nqJnK3qGoqnJPXMV/UfR44oeVDQnoT8pmkjoluTv/4V+wbo7a9CxvKIZijZStIGitRUt3tBvParoZkXXKfqFop8r+kvoDqiCQWSAZyrqKXqjos0VrRG4Pb9TdLGi2YrGFf0rcHsKYVAYgOn6dYrermgbRUuEbpAFjyg6V9Fpii4XvaxEjdgZ4MWKdkto+dCNKQiWhpMVnaTortCNsSFWBugpOkjRFhXbiHA3kdC9ogU86CFFTyl6MrnuWYoWUrSUaCERWlHmC5FTvX9xQSA0XqToC6KXiKgQEwPQljcr+qii6SXuR2pHKENAu0m0sPbnmtq2kqKXKVpH0fqihc5lSzznl4o+o+i8OjuuCmJhgM0UfVrRhgXuQWUbFy2AXaLotpbbvLqiN4gWRHuiVUtfXKPoY4oua7nNCyA0A7xE0bGKtvS8/gnR0+lZyb9zA7c/xdTkHXZI/l3U8z7e4QBFd4RqeCgGoIM+oeiDotU6F5jOT1T0PUV/D9RmXyytaCdFu4teNlxAbeQjOFzmyyStIQQD9BSdoGia4zqEJ6Z3OufyAO2sA6iuCLPYLFx9zSywp7QsKLbJAEjaRyra3/G7DDxC0icV/abNzmgQ64qe8WZ6vPuXFB0qLRmU2mKANUUbR9ZxXDcueln4dUvtahvriVYHe47rblT0DkW/bbpBbTAAghEGkTxd+m5FByr6YQvtiQHbKTpG0So51yDgYgA7q8mGNMkACys6SvTA2n4HU+mXFX1c0T+bfNEIsZiiT4leEhe2XMOSwIzBkvDfJhrRFAOgEzPlz8y5BifKzop+1VAbBgWvEK3dvDTnGvwLLAmP1/3jTTDAMqKl9zxr3vGiZ4ZR++ptYDbgS98755rrRZvG/1bnD9fNANjPsW7ZuLmVdW2AsaNo55FNXmLWfL1ov0YtqJMBVhXtE1/Ncv52RdtKC5LtgINIJoRhm53kTtEm6Lvr+LG6GIAvf1zsg/8z0YP/YF29NOTAG8m6P8NyHiboSQ0zQR0MwJrPANum/TMU7SoBzJwDDgxn3xG9LJjAcrCJVJQJqjIA0v6VYhf4sN8j2DSiwowAUA+/qeg9lvMIhq+RCtpBFQagceeIXdX7hqJ9ZciiaAOAMfqaon0s51kqtpeSH1kVBvi8aEeHCXz5ODa6wa8HjBN9upvlPFbFg8s+uAww755pOcea/07ppv26wYx7qphlAj60t0oJ9boMA+DYuVbMuirCIHpqJ/A1AwRD7Cwm7QAbC3kRhdTsogxAA4i5M3n10PNJzuhUvWaBini1mO0EeBFhAu8PsCgDEJxxgOF4Ke7rUBoYi4grNM3CXxTtUvdCEQboKfqJ5R7Wpc682y7o8zMMx5EHNhXPyCJfBkDfZ3oxTTs4dvbxfE6HeoGqbXIgEV7GMv2E6wG+DIBf/0OG41ijMAJ1Xr0wwIuIO91khWXMDnM9wIcBCN0mKjcbvUswx4bS+fNDg3gCtLJsUAkxhWRK54ac+zDAhWKO2y9tfOhQOxiLAw3HGbut8250MQAZO5cajuOKhLtCTP3owGOibQ5/DPD7MYKlgAIWphhD7DLWDKQ8BuAcRRBM6VoENYYI4ETg3Cv5P1PccaLj6h4N0JbYwJicYziOuvgq2015DICT51zD8XFFrw3wgki1NxqOPyA6oZRImqcCtCsmXCHmkHPG8nzTDXkMgKsx6+ZFx0ToCBG3b2PIFCSRvF/00jCqYGwYt+y4kpX8StMNNgboieamLBiAbQO9nIsBUuCkOkRGVz5gad7GcJxZezx70MYAJsmfr5/MllDpWr4MAAiQwF39ORk9GwVpaDfIgmNr1AhMDEBZljsM534k/mncTaAIA6S4R7QBixyFUYpNICz/TZljvD8xm08rV2NigM8q+rDhOCphyCxdGwMg+C3kuBdthgyc6wO2v02QlWxS/Y5Q9JH+A1kGWER0McRsQSYsga7EzqZhYwAEVdLLNnbcD6MQZEma1V8Dv0sboExOtj4BhasodzOvelmWAchj/7HhYUjXxwV+IRsDTEmIiJijkxfMw2OiZzncpgNV068gPiA61TwLlobZ6R9ZBvi2ol0yx/AoEfcfujJHHgOkwCJ2SEKumj2shfjNoynYVDOoVELeQLZczSxF707/6O88on2YGrNFGLEubR/6bcSPAVIwC6AF7ChuczdrJUEut4R+wQZwtqK3ZI5RzHI5SaKG+juHdKPZhoe8TcyBB22jCAOkwG+AfLCe49msicTfk6YeeqarEyyLpxuOM9aTPp7+zmNN3D9zIfo09fD+EfpNpBwDADQEpjzW/eUc1zL4h4sOtIi+zKsHCBnDVJ5dDgntm/Qe9nce8XzZwsvok1uEfosEZRkgBUsbKhDCkasy2a2il4VLXQ8dAGC/2TxzjEAeorvndd4Kiu4z3ByD9J+iKgOkIKyNXPytPa7FgYKg+IfQL18B71P0FcPxFyi6P+08hDxTUCfVMG8P/QYJ6mKAFKyDLHtrOq5DVUSdosTrY6E7oQQYw98bjpPcc3baeaZwb9YO15rZJupmAEAZ+veKXveXclyLhoSFdJYMntuZsczWNp4MH0877yrRSR39wKu0XeiW96EJBkhBsgW1ivcQzRR5IAYSOeKq0B1SAPRbNomX9s9IrWgPy4LbrBBRelTolvehSQZIQZgbauOmjutwrKBe4WiqqyJ5k8D8fWTmGFFUS9J5Y2IuN4L0f3HolvehDQZIQcwDgZarOq7D1Xx0QrVX8KoReHEvNBxfZUrOSXbaiom722QAgAkVuwjr/nMd1+JAw/xMMEqMbueVkjZmsSWdRxGHr2ZOzPV46bbRNgOkQF3CiLSrx2+xYQWqc4ylbhnT52SO7ccLmQo9YBf3KXXeJkIxQApi6tCnXZtaoCGcInrmeKC13nEDl/7amWPH0HnY+bNFBy4QvX1LTAjNAOlvUbGTULMVHdciZGE7wIbw7xbbaANjulXm2Jm8EBm/2TBvHCN7+zy1RcTAACmYSpGssae73M53JNddEKCd/WBM98wcu4LOM00NC4QORYCYGCAFW9SyhO7gcS2eVszKoWooMKbZZNFb6Dx8ACtkTsCxxwZqqA0xMkAKSrUx1a/ruA4P49dFWx4farmNjOkxmWOTvgAasmTmBO7TWS030IWYGQCQnUs9PyyKz3dcSxkdhMRvSXtqIxXGTsoce5jOw8GRLTXyLtHhYTEhdgZIwcfElnB44RZxXHu46K1x2gBq7KzMscfoPBMHskfv6a4ntoxBYYAU1FVgWdg85xpmgmVaag9jemr2YMcAzcGHAajzW2YH0jKwMkC3BNQLIo/YIWw/cS8BaFpHtNQu6xLQCYH1IBUCMf64vmoshNgRTmmxfVYhsFMDqwM1EDfyyx3XEV2EORkmeaTlNlrVwM4QVB5jol3BPoYgPK4YgkLtE2w1BJmqSnSm4HyQgYQez4C6TMFE4BJuN9v10IZhNQWbnEHO6lIBEAMD8FtUQidSyuUMQrZCx6fWfww5BlZnUOcO9oOvO5jBxsJHllGtW7xVhNUd3AWE5AMBmXi6XTx+i+WUgNGbW+8dN8juWixzbL8uJMwOkmVZuxGGpzqujX3vY8bSVDNpMiSM4oJ3mU6KTiuKBTEGhTJTEi6Gxc9ZmDkgcoNCu7Dw+UDuYTB9wsKpNoImcJ/roREgNywcdIkh/okhVN5knb8udIcUQG5iCOhSw9ypYVTb4Ev6vsQZ+p0HZ2qYLTmUOvS3hW59giaSQ5nu13BcR8IHHwhTaAx1EorCKzl01NLDGdCtPK6lxAol8SdCv3wFeKWHg2EvEIGQS6QOTO0qEEFRatb5n4Z+6RrgVSACUDQhu9sU0x/xbXNDv4VUKxGDKxQPnEummSPzK48Pw8aXhUrEDGORqFeLXuddRaJI3MAayt4DD4d+0RphKxI1bxOJYS0Th+ULN61PmTiWOTSgWITdOlGoTByYJTp0qB9YuBAY2o5jz8KHAZjqyNn3KRTJgDPwMaXA1wnUWgT7bKFIopDmbULtWyoWgcgkSbYJn1KxeDZf6HgOUzxTPVN+DDl7TaFUqdhBLRYNc27kuJ+s3dRNG1PWblMwuX+dxaLBMJaLR53ji7hRRgOly8WDYdowYkK0IefsgO0OAduGEYzt08oB2SRkU/jQIG0Zg8kW0y36bsy1e5pA5S1jQE8Gc9MomJTsF7SAQXDTNgHbplE9MVg2h2nbONyzrPPXBGhbLKht2zgQ28aRBGvcZDjOl47QSoDGoLlp60atG0fGuHUsuvu+yf+xZKVu2kGs4Vs3sPiZhN3SW8eCGDeP5mWI1WM9uyfA78cIon0pcT9mOFd68+gUtu3j8R4e5HF/h+bR2PbxgAAKEkWyPnTcpRuILp7cIRwQ/K4VnZ3cDxJRmaVzcxF9gylYZw81HCewAE1h1LZnjQVM/ej8qxvOEdF9mOsBvgyAZw0z6jTDueMV7RO6J0YU7G1kSuLlq8d348xVKBJP1xNdVNJ0D564M0P3xoiBWAdToA6qMGq6Vzhb0YBKU/g4IGQMdfHW0L0yIlhLtHpnSlmbDPf2fVBRBiBqCIubyTXMtAMTDNO+ezGCJJarxbwcs0wjmD/p+7AyMfVEkyJ1mriPcumbFWlAh0Iguge7zAzDOWbh9UUL5t4om1RBUsEZlvuRBaioPQxRtTEBNQ9H146Gc6z7yGFnFXqiVEurMhWWSEFY9R7S2ebrAuN0ovTF8mWAIejgsg8uCziSiOGZlvOoKNjtOyaoBsaIMjM2VRuHHVHbpWbcqpm1GCJQN6ZbzjMT7FW2cR0mP7ITxP7l4/rtSQVDXB2p1WSdXik6kdQEZIKdRZsmO/gD0/t3xbzmA4Q96hPOqfIjdRVXoGLWuKLVLOfRDlgqOhXRD0srOk/M0j64U/SXf2/VH6qzugalZi4ROxNgJyCcrDMW5QMjD7EW0yznGXxcvBN1/Fjd9XWYCfA925YDdFXq6XZmYzOY7pGbbEWpmPYZ/MpffoomCiwhExBCPj3nGhxImCtHLWLXBoRp4ivyqrMi8BGXUWnNz6KpEmu8EKVUtsm5hqoVO0kXT4A/n75aPecaVD0qlNbudm+yyCIqDD7pA3N+B/WQ/DUKN4zabICLncJUbE+7sOUabCjMDMRiNKJKt1FmFbPxyZJfbJEYQ6yKP2ihPTGAAE6sd2M51yAvof8XNu8WQVt1dnEgnSbuBNNx0TPGDS21q20w3TPwPcd1ePXY4qWQY6cM2qy0jSuZ0LL9Hb/LtIcOTKXtUGlodYN0LbaRmenx7iyJhHK14lENUWu/J9q8Oc1xHZ1BHjtfTMis5CogS5eljboLrr7GTkI9//E2Gxhqtw0EIPL0UQVdFbsAue7ox2T/hK5U4gKVOagsvrssmJ9vAiZyIq2Y8VqvNxx6vx1mAUKYfNPO6aCLRAtGxLzHUriRzaTJpt4heZdFPe8LvY1McAZIQRQRKpFrM4Z+oDaOi86FxwTddpEn9HYqq1GDryfumkT9IJ4P1feyAvc0glgYIAVCEnX6ppe4FwsZuYx0LksGiaR17XdAWRU0GBJUYVLK0ZTZ8JEsXRj9/BL3NoLYGCBFT7Q6uGXFNrJEYGOYEG0/xxvJdq3IERhWUhc1cgjGGNZvgi7xxuHXGBOdh7hYgd/MAmGWZQuDznjrPelArAyQgs7HeYRBZPmKz2obFGTCAIbwelfFZzWG2BkgBdXL2MSBqqW4lJeo9rjGQBFGXLlU5ySJJvoydIPCAP3AoLSJ6CJICGCucu9NA2sdgij1FYmMGqiQ+EFkgCwodb+xaMGMuHgEtcUrPdEOtllBwCQ5BoGTXTfuD90BVTAMDGB6p5VF+x+IUhoTXTt42YQQ8lDZ2C0kdVDheKF4IqolQuKchCiaOSFakKScPjtvDVWU8/8BFWavcIiHLzgAAAAASUVORK5CYII=\');\n  background-position-x: 50%;\n  background-position-y: center;\n  background-size: 25%;\n  background-repeat: no-repeat;\n  position: absolute;\n}\n\ndiv.CanvasXpressPlay:hover {\n  background-color: rgba(0, 0, 0, 0);\n}\n\n/*\n * full-screen-warning-container\n */\n\n#full-screen-warning-container {\n    background-color: transparent !important;\n    opacity: 0.4 !important;\n}\n\n#full-screen-warning-container[fade-warning-out] {\n    transition-property: opacity !important;\n    transition-duration: 1ms !important;\n    opacity: 0.0 !important;\n}\n\n#full-screen-warning-message {\n    padding: 15px !important;\n}\n\n.full-screen-description {\n    font-size: 100% !important;\n}\n\n#full-screen-domain-text {\n    font-size: 100% !important;\n    font-weight: bold !important;\n}\n\n.full-screen-approval-button,\n#full-screen-remember-decision {\n    font-size: 100% !important;\n}\n\n@media (min-width: 300px) {\n    div.CanvasXpressBin {\n        transform: scale(0.5);\n    }\n}\n\n@media (min-width: 450px) {\n    div.CanvasXpressBin {\n        transform: scale(0.75);\n    }\n}\n\n@media (min-width: 600px) {\n    div.CanvasXpressBin {\n        transform: scale(1);\n    }\n}\n\n\n/* Genie Effect */\n\n.genie {\n    position: relative;\n    background-repeat: no-repeat;\n    background-size: cover;\n}\n\n.genie .genie-step {\n    background-repeat: no-repeat;\n    background-image: inherit;\n    position: absolute;\n}\n\n.genie.genie-expand .genie-step {\n    -moz-transition: background-position 800ms ease-in-out;\n    -webkit-transition: background-position 800ms ease-in-out;\n    -o-transition: background-position 800ms ease-in-out;\n    -ms-transition: background-position 800ms ease-in-out;\n    transition: background-position 800ms ease-in-out;\n}\n\n.genie.genie-collapse .genie-step {\n    -moz-transition: all 300ms ease-in-out;\n    -webkit-transition: all 300ms ease-in-out;\n    -o-transition: all 300ms ease-in-out;\n    -ms-transition: all 300ms ease-in-out;\n    transition: all 300ms ease-in-out;\n}\n\n.genie.genie-collapse.change-pace .genie-step {\n    -moz-transition: background-position 800ms ease-in-out;\n    -webkit-transition: background-position 800ms ease-in-out;\n    -o-transition: background-position 800ms ease-in-out;\n    -ms-transition: background-position 800ms ease-in-out;\n    transition: background-position 800ms ease-in-out;\n}\n\n.genie.genie-expand.change-pace .genie-step {\n    -moz-transition: all 300ms ease-in-out;\n    -webkit-transition: all 300ms ease-in-out;\n    -o-transition: all 300ms ease-in-out;\n    -ms-transition: all 300ms ease-in-out;\n    transition: all 300ms ease-in-out;\n}\n\n\n/* Magic Effects */\n\n\n/*\nMagic - Ver 1.3.0 - https://minimamente.com\nLicensed under the MIT license\nCopyright (c) 2018 Christian Pucci\n*/\n\n.magictime {\n    -webkit-animation-duration: 1s;\n    animation-duration: 1s;\n    -webkit-animation-fill-mode: both;\n    animation-fill-mode: both;\n}\n\n.puffIn {\n    -webkit-animation-name: puffIn;\n    animation-name: puffIn;\n}\n\n@-webkit-keyframes puffIn {\n    0% {\n        opacity: 0;\n        -webkit-transform-origin: 50% 50%;\n        transform-origin: 50% 50%;\n        -webkit-transform: scale(2, 2);\n        transform: scale(2, 2);\n        -webkit-filter: blur(2px);\n        filter: blur(2px);\n    }\n    100% {\n        opacity: 1;\n        -webkit-transform-origin: 50% 50%;\n        transform-origin: 50% 50%;\n        -webkit-transform: scale(1, 1);\n        transform: scale(1, 1);\n        -webkit-filter: blur(0px);\n        filter: blur(0px);\n    }\n}\n\n@keyframes puffIn {\n    0% {\n        opacity: 0;\n        -webkit-transform-origin: 50% 50%;\n        transform-origin: 50% 50%;\n        -webkit-transform: scale(2, 2);\n        transform: scale(2, 2);\n        -webkit-filter: blur(2px);\n        filter: blur(2px);\n    }\n    100% {\n        opacity: 1;\n        -webkit-transform-origin: 50% 50%;\n        transform-origin: 50% 50%;\n        -webkit-transform: scale(1, 1);\n        transform: scale(1, 1);\n        -webkit-filter: blur(0px);\n        filter: blur(0px);\n    }\n}\n\n.puffOut {\n    -webkit-animation-name: puffOut;\n    animation-name: puffOut;\n}\n\n@-webkit-keyframes puffOut {\n    0% {\n        opacity: 1;\n        -webkit-transform-origin: 50% 50%;\n        transform-origin: 50% 50%;\n        -webkit-transform: scale(1, 1);\n        transform: scale(1, 1);\n        -webkit-filter: blur(0px);\n        filter: blur(0px);\n    }\n    100% {\n        opacity: 0;\n        -webkit-transform-origin: 50% 50%;\n        transform-origin: 50% 50%;\n        -webkit-transform: scale(2, 2);\n        transform: scale(2, 2);\n        -webkit-filter: blur(2px);\n        filter: blur(2px);\n    }\n}\n\n@keyframes puffOut {\n    0% {\n        opacity: 1;\n        -webkit-transform-origin: 50% 50%;\n        transform-origin: 50% 50%;\n        -webkit-transform: scale(1, 1);\n        transform: scale(1, 1);\n        -webkit-filter: blur(0px);\n        filter: blur(0px);\n    }\n    100% {\n        opacity: 0;\n        -webkit-transform-origin: 50% 50%;\n        transform-origin: 50% 50%;\n        -webkit-transform: scale(2, 2);\n        transform: scale(2, 2);\n        -webkit-filter: blur(2px);\n        filter: blur(2px);\n    }\n}\n\n.vanishIn {\n    -webkit-animation-name: vanishIn;\n    animation-name: vanishIn;\n}\n\n@-webkit-keyframes vanishIn {\n    0% {\n        opacity: 0;\n        -webkit-transform-origin: 50% 50%;\n        transform-origin: 50% 50%;\n        -webkit-transform: scale(2, 2);\n        transform: scale(2, 2);\n        -webkit-filter: blur(90px);\n        filter: blur(90px);\n    }\n    100% {\n        opacity: 1;\n        -webkit-transform-origin: 50% 50%;\n        transform-origin: 50% 50%;\n        -webkit-transform: scale(1, 1);\n        transform: scale(1, 1);\n        -webkit-filter: blur(0px);\n        filter: blur(0px);\n    }\n}\n\n@keyframes vanishIn {\n    0% {\n        opacity: 0;\n        -webkit-transform-origin: 50% 50%;\n        transform-origin: 50% 50%;\n        -webkit-transform: scale(2, 2);\n        transform: scale(2, 2);\n        -webkit-filter: blur(90px);\n        filter: blur(90px);\n    }\n    100% {\n        opacity: 1;\n        -webkit-transform-origin: 50% 50%;\n        transform-origin: 50% 50%;\n        -webkit-transform: scale(1, 1);\n        transform: scale(1, 1);\n        -webkit-filter: blur(0px);\n        filter: blur(0px);\n    }\n}\n\n.vanishOut {\n    -webkit-animation-name: vanishOut;\n    animation-name: vanishOut;\n}\n\n@-webkit-keyframes vanishOut {\n    0% {\n        opacity: 1;\n        -webkit-transform-origin: 50% 50%;\n        transform-origin: 50% 50%;\n        -webkit-transform: scale(1, 1);\n        transform: scale(1, 1);\n        -webkit-filter: blur(0px);\n        filter: blur(0px);\n    }\n    100% {\n        opacity: 0;\n        -webkit-transform-origin: 50% 50%;\n        transform-origin: 50% 50%;\n        -webkit-transform: scale(2, 2);\n        transform: scale(2, 2);\n        -webkit-filter: blur(20px);\n        filter: blur(20px);\n    }\n}\n\n@keyframes vanishOut {\n    0% {\n        opacity: 1;\n        -webkit-transform-origin: 50% 50%;\n        transform-origin: 50% 50%;\n        -webkit-transform: scale(1, 1);\n        transform: scale(1, 1);\n        -webkit-filter: blur(0px);\n        filter: blur(0px);\n    }\n    100% {\n        opacity: 0;\n        -webkit-transform-origin: 50% 50%;\n        transform-origin: 50% 50%;\n        -webkit-transform: scale(2, 2);\n        transform: scale(2, 2);\n        -webkit-filter: blur(20px);\n        filter: blur(20px);\n    }\n}\n\n.boingInUp {\n    -webkit-animation-name: boingInUp;\n    animation-name: boingInUp;\n}\n\n@-webkit-keyframes boingInUp {\n    0% {\n        opacity: 0;\n        -webkit-transform-origin: 50% 0%;\n        transform-origin: 50% 0%;\n        -webkit-transform: perspective(800px) rotateX(-90deg);\n        transform: perspective(800px) rotateX(-90deg);\n    }\n    50% {\n        opacity: 1;\n        -webkit-transform-origin: 50% 0%;\n        transform-origin: 50% 0%;\n        -webkit-transform: perspective(800px) rotateX(50deg);\n        transform: perspective(800px) rotateX(50deg);\n    }\n    100% {\n        opacity: 1;\n        -webkit-transform-origin: 50% 0%;\n        transform-origin: 50% 0%;\n        -webkit-transform: perspective(800px) rotateX(0deg);\n        transform: perspective(800px) rotateX(0deg);\n    }\n}\n\n@keyframes boingInUp {\n    0% {\n        opacity: 0;\n        -webkit-transform-origin: 50% 0%;\n        transform-origin: 50% 0%;\n        -webkit-transform: perspective(800px) rotateX(-90deg);\n        transform: perspective(800px) rotateX(-90deg);\n    }\n    50% {\n        opacity: 1;\n        -webkit-transform-origin: 50% 0%;\n        transform-origin: 50% 0%;\n        -webkit-transform: perspective(800px) rotateX(50deg);\n        transform: perspective(800px) rotateX(50deg);\n    }\n    100% {\n        opacity: 1;\n        -webkit-transform-origin: 50% 0%;\n        transform-origin: 50% 0%;\n        -webkit-transform: perspective(800px) rotateX(0deg);\n        transform: perspective(800px) rotateX(0deg);\n    }\n}\n\n.boingOutDown {\n    -webkit-animation-name: boingOutDown;\n    animation-name: boingOutDown;\n}\n\n@-webkit-keyframes boingOutDown {\n    0% {\n        opacity: 1;\n        -webkit-transform-origin: 100% 100%;\n        transform-origin: 100% 100%;\n        -webkit-transform: perspective(800px) rotateX(0deg) rotateY(0deg);\n        transform: perspective(800px) rotateX(0deg) rotateY(0deg);\n    }\n    20% {\n        opacity: 1;\n        -webkit-transform-origin: 100% 100%;\n        transform-origin: 100% 100%;\n        -webkit-transform: perspective(800px) rotateX(0deg) rotateY(10deg);\n        transform: perspective(800px) rotateX(0deg) rotateY(10deg);\n    }\n    30% {\n        opacity: 1;\n        -webkit-transform-origin: 0% 100%;\n        transform-origin: 0% 100%;\n        -webkit-transform: perspective(800px) rotateX(0deg) rotateY(0deg);\n        transform: perspective(800px) rotateX(0deg) rotateY(0deg);\n    }\n    40% {\n        opacity: 1;\n        -webkit-transform-origin: 0% 100%;\n        transform-origin: 0% 100%;\n        -webkit-transform: perspective(800px) rotateX(10deg) rotateY(10deg);\n        transform: perspective(800px) rotateX(10deg) rotateY(10deg);\n    }\n    100% {\n        opacity: 0;\n        -webkit-transform-origin: 100% 100%;\n        transform-origin: 100% 100%;\n        -webkit-transform: perspective(800px) rotateX(90deg) rotateY(0deg);\n        transform: perspective(800px) rotateX(90deg) rotateY(0deg);\n    }\n}\n\n@keyframes boingOutDown {\n    0% {\n        opacity: 1;\n        -webkit-transform-origin: 100% 100%;\n        transform-origin: 100% 100%;\n        -webkit-transform: perspective(800px) rotateX(0deg) rotateY(0deg);\n        transform: perspective(800px) rotateX(0deg) rotateY(0deg);\n    }\n    20% {\n        opacity: 1;\n        -webkit-transform-origin: 100% 100%;\n        transform-origin: 100% 100%;\n        -webkit-transform: perspective(800px) rotateX(0deg) rotateY(10deg);\n        transform: perspective(800px) rotateX(0deg) rotateY(10deg);\n    }\n    30% {\n        opacity: 1;\n        -webkit-transform-origin: 0% 100%;\n        transform-origin: 0% 100%;\n        -webkit-transform: perspective(800px) rotateX(0deg) rotateY(0deg);\n        transform: perspective(800px) rotateX(0deg) rotateY(0deg);\n    }\n    40% {\n        opacity: 1;\n        -webkit-transform-origin: 0% 100%;\n        transform-origin: 0% 100%;\n        -webkit-transform: perspective(800px) rotateX(10deg) rotateY(10deg);\n        transform: perspective(800px) rotateX(10deg) rotateY(10deg);\n    }\n    100% {\n        opacity: 0;\n        -webkit-transform-origin: 100% 100%;\n        transform-origin: 100% 100%;\n        -webkit-transform: perspective(800px) rotateX(90deg) rotateY(0deg);\n        transform: perspective(800px) rotateX(90deg) rotateY(0deg);\n    }\n}\n\n.foolishIn {\n    -webkit-animation-name: foolishIn;\n    animation-name: foolishIn;\n}\n\n@-webkit-keyframes foolishIn {\n    0% {\n        opacity: 0;\n        -webkit-transform-origin: 50% 50%;\n        transform-origin: 50% 50%;\n        -webkit-transform: scale(0, 0) rotate(360deg);\n        transform: scale(0, 0) rotate(360deg);\n    }\n    20% {\n        opacity: 1;\n        -webkit-transform-origin: 0% 100%;\n        transform-origin: 0% 100%;\n        -webkit-transform: scale(0.5, 0.5) rotate(0deg);\n        transform: scale(0.5, 0.5) rotate(0deg);\n    }\n    40% {\n        opacity: 1;\n        -webkit-transform-origin: 100% 100%;\n        transform-origin: 100% 100%;\n        -webkit-transform: scale(0.5, 0.5) rotate(0deg);\n        transform: scale(0.5, 0.5) rotate(0deg);\n    }\n    60% {\n        opacity: 1;\n        -webkit-transform-origin: 0%;\n        transform-origin: 0%;\n        -webkit-transform: scale(0.5, 0.5) rotate(0deg);\n        transform: scale(0.5, 0.5) rotate(0deg);\n    }\n    80% {\n        opacity: 1;\n        -webkit-transform-origin: 0% 0%;\n        transform-origin: 0% 0%;\n        -webkit-transform: scale(0.5, 0.5) rotate(0deg);\n        transform: scale(0.5, 0.5) rotate(0deg);\n    }\n    100% {\n        opacity: 1;\n        -webkit-transform-origin: 50% 50%;\n        transform-origin: 50% 50%;\n        -webkit-transform: scale(1, 1) rotate(0deg);\n        transform: scale(1, 1) rotate(0deg);\n    }\n}\n\n@keyframes foolishIn {\n    0% {\n        opacity: 0;\n        -webkit-transform-origin: 50% 50%;\n        transform-origin: 50% 50%;\n        -webkit-transform: scale(0, 0) rotate(360deg);\n        transform: scale(0, 0) rotate(360deg);\n    }\n    20% {\n        opacity: 1;\n        -webkit-transform-origin: 0% 100%;\n        transform-origin: 0% 100%;\n        -webkit-transform: scale(0.5, 0.5) rotate(0deg);\n        transform: scale(0.5, 0.5) rotate(0deg);\n    }\n    40% {\n        opacity: 1;\n        -webkit-transform-origin: 100% 100%;\n        transform-origin: 100% 100%;\n        -webkit-transform: scale(0.5, 0.5) rotate(0deg);\n        transform: scale(0.5, 0.5) rotate(0deg);\n    }\n    60% {\n        opacity: 1;\n        -webkit-transform-origin: 0%;\n        transform-origin: 0%;\n        -webkit-transform: scale(0.5, 0.5) rotate(0deg);\n        transform: scale(0.5, 0.5) rotate(0deg);\n    }\n    80% {\n        opacity: 1;\n        -webkit-transform-origin: 0% 0%;\n        transform-origin: 0% 0%;\n        -webkit-transform: scale(0.5, 0.5) rotate(0deg);\n        transform: scale(0.5, 0.5) rotate(0deg);\n    }\n    100% {\n        opacity: 1;\n        -webkit-transform-origin: 50% 50%;\n        transform-origin: 50% 50%;\n        -webkit-transform: scale(1, 1) rotate(0deg);\n        transform: scale(1, 1) rotate(0deg);\n    }\n}\n\n.foolishOut {\n    -webkit-animation-name: foolishOut;\n    animation-name: foolishOut;\n}\n\n@-webkit-keyframes foolishOut {\n    0% {\n        opacity: 1;\n        -webkit-transform-origin: 50% 50%;\n        transform-origin: 50% 50%;\n        -webkit-transform: scale(1, 1) rotate(360deg);\n        transform: scale(1, 1) rotate(360deg);\n    }\n    20% {\n        opacity: 1;\n        -webkit-transform-origin: 0% 0%;\n        transform-origin: 0% 0%;\n        -webkit-transform: scale(0.5, 0.5) rotate(0deg);\n        transform: scale(0.5, 0.5) rotate(0deg);\n    }\n    40% {\n        opacity: 1;\n        -webkit-transform-origin: 100% 0%;\n        transform-origin: 100% 0%;\n        -webkit-transform: scale(0.5, 0.5) rotate(0deg);\n        transform: scale(0.5, 0.5) rotate(0deg);\n    }\n    60% {\n        opacity: 1;\n        -webkit-transform-origin: 0%;\n        transform-origin: 0%;\n        -webkit-transform: scale(0.5, 0.5) rotate(0deg);\n        transform: scale(0.5, 0.5) rotate(0deg);\n    }\n    80% {\n        opacity: 1;\n        -webkit-transform-origin: 0% 100%;\n        transform-origin: 0% 100%;\n        -webkit-transform: scale(0.5, 0.5) rotate(0deg);\n        transform: scale(0.5, 0.5) rotate(0deg);\n    }\n    100% {\n        opacity: 0;\n        -webkit-transform-origin: 50% 50%;\n        transform-origin: 50% 50%;\n        -webkit-transform: scale(0, 0) rotate(0deg);\n        transform: scale(0, 0) rotate(0deg);\n    }\n}\n\n@keyframes foolishOut {\n    0% {\n        opacity: 1;\n        -webkit-transform-origin: 50% 50%;\n        transform-origin: 50% 50%;\n        -webkit-transform: scale(1, 1) rotate(360deg);\n        transform: scale(1, 1) rotate(360deg);\n    }\n    20% {\n        opacity: 1;\n        -webkit-transform-origin: 0% 0%;\n        transform-origin: 0% 0%;\n        -webkit-transform: scale(0.5, 0.5) rotate(0deg);\n        transform: scale(0.5, 0.5) rotate(0deg);\n    }\n    40% {\n        opacity: 1;\n        -webkit-transform-origin: 100% 0%;\n        transform-origin: 100% 0%;\n        -webkit-transform: scale(0.5, 0.5) rotate(0deg);\n        transform: scale(0.5, 0.5) rotate(0deg);\n    }\n    60% {\n        opacity: 1;\n        -webkit-transform-origin: 0%;\n        transform-origin: 0%;\n        -webkit-transform: scale(0.5, 0.5) rotate(0deg);\n        transform: scale(0.5, 0.5) rotate(0deg);\n    }\n    80% {\n        opacity: 1;\n        -webkit-transform-origin: 0% 100%;\n        transform-origin: 0% 100%;\n        -webkit-transform: scale(0.5, 0.5) rotate(0deg);\n        transform: scale(0.5, 0.5) rotate(0deg);\n    }\n    100% {\n        opacity: 0;\n        -webkit-transform-origin: 50% 50%;\n        transform-origin: 50% 50%;\n        -webkit-transform: scale(0, 0) rotate(0deg);\n        transform: scale(0, 0) rotate(0deg);\n    }\n}\n\n.holeIn {\n    -webkit-animation-name: holeIn;\n    animation-name: holeIn;\n}\n\n@-webkit-keyframes holeIn {\n    0% {\n        opacity: 0;\n        -webkit-transform-origin: 50% 50%;\n        transform-origin: 50% 50%;\n        -webkit-transform: scale(0, 0) rotateY(360deg);\n        transform: scale(0, 0) rotateY(360deg);\n    }\n    100% {\n        opacity: 1;\n        -webkit-transform-origin: 50% 50%;\n        transform-origin: 50% 50%;\n        -webkit-transform: scale(1, 1) rotateY(0deg);\n        transform: scale(1, 1) rotateY(0deg);\n    }\n}\n\n@keyframes holeIn {\n    0% {\n        opacity: 0;\n        -webkit-transform-origin: 50% 50%;\n        transform-origin: 50% 50%;\n        -webkit-transform: scale(0, 0) rotateY(360deg);\n        transform: scale(0, 0) rotateY(360deg);\n    }\n    100% {\n        opacity: 1;\n        -webkit-transform-origin: 50% 50%;\n        transform-origin: 50% 50%;\n        -webkit-transform: scale(1, 1) rotateY(0deg);\n        transform: scale(1, 1) rotateY(0deg);\n    }\n}\n\n.holeOut {\n    -webkit-animation-name: holeOut;\n    animation-name: holeOut;\n}\n\n@-webkit-keyframes holeOut {\n    0% {\n        opacity: 1;\n        -webkit-transform-origin: 50% 50%;\n        transform-origin: 50% 50%;\n        -webkit-transform: scale(1, 1) rotateY(0deg);\n        transform: scale(1, 1) rotateY(0deg);\n    }\n    100% {\n        opacity: 0;\n        -webkit-transform-origin: 50% 50%;\n        transform-origin: 50% 50%;\n        -webkit-transform: scale(0, 0) rotateY(180deg);\n        transform: scale(0, 0) rotateY(180deg);\n    }\n}\n\n@keyframes holeOut {\n    0% {\n        opacity: 1;\n        -webkit-transform-origin: 50% 50%;\n        transform-origin: 50% 50%;\n        -webkit-transform: scale(1, 1) rotateY(0deg);\n        transform: scale(1, 1) rotateY(0deg);\n    }\n    100% {\n        opacity: 0;\n        -webkit-transform-origin: 50% 50%;\n        transform-origin: 50% 50%;\n        -webkit-transform: scale(0, 0) rotateY(180deg);\n        transform: scale(0, 0) rotateY(180deg);\n    }\n}\n\n.swashIn {\n    -webkit-animation-name: swashIn;\n    animation-name: swashIn;\n}\n\n@-webkit-keyframes swashIn {\n    0% {\n        opacity: 0;\n        -webkit-transform-origin: 50% 50%;\n        transform-origin: 50% 50%;\n        -webkit-transform: scale(0, 0);\n        transform: scale(0, 0);\n    }\n    90% {\n        opacity: 1;\n        -webkit-transform-origin: 50% 50%;\n        transform-origin: 50% 50%;\n        -webkit-transform: scale(0.9, 0.9);\n        transform: scale(0.9, 0.9);\n    }\n    100% {\n        opacity: 1;\n        -webkit-transform-origin: 50% 50%;\n        transform-origin: 50% 50%;\n        -webkit-transform: scale(1, 1);\n        transform: scale(1, 1);\n    }\n}\n\n@keyframes swashIn {\n    0% {\n        opacity: 0;\n        -webkit-transform-origin: 50% 50%;\n        transform-origin: 50% 50%;\n        -webkit-transform: scale(0, 0);\n        transform: scale(0, 0);\n    }\n    90% {\n        opacity: 1;\n        -webkit-transform-origin: 50% 50%;\n        transform-origin: 50% 50%;\n        -webkit-transform: scale(0.9, 0.9);\n        transform: scale(0.9, 0.9);\n    }\n    100% {\n        opacity: 1;\n        -webkit-transform-origin: 50% 50%;\n        transform-origin: 50% 50%;\n        -webkit-transform: scale(1, 1);\n        transform: scale(1, 1);\n    }\n}\n\n.swashOut {\n    -webkit-animation-name: swashOut;\n    animation-name: swashOut;\n}\n\n@-webkit-keyframes swashOut {\n    0% {\n        opacity: 1;\n        -webkit-transform-origin: 50% 50%;\n        transform-origin: 50% 50%;\n        -webkit-transform: scale(1, 1);\n        transform: scale(1, 1);\n    }\n    80% {\n        opacity: 1;\n        -webkit-transform-origin: 50% 50%;\n        transform-origin: 50% 50%;\n        -webkit-transform: scale(0.9, 0.9);\n        transform: scale(0.9, 0.9);\n    }\n    100% {\n        opacity: 0;\n        -webkit-transform-origin: 50% 50%;\n        transform-origin: 50% 50%;\n        -webkit-transform: scale(0, 0);\n        transform: scale(0, 0);\n    }\n}\n\n@keyframes swashOut {\n    0% {\n        opacity: 1;\n        -webkit-transform-origin: 50% 50%;\n        transform-origin: 50% 50%;\n        -webkit-transform: scale(1, 1);\n        transform: scale(1, 1);\n    }\n    80% {\n        opacity: 1;\n        -webkit-transform-origin: 50% 50%;\n        transform-origin: 50% 50%;\n        -webkit-transform: scale(0.9, 0.9);\n        transform: scale(0.9, 0.9);\n    }\n    100% {\n        opacity: 0;\n        -webkit-transform-origin: 50% 50%;\n        transform-origin: 50% 50%;\n        -webkit-transform: scale(0, 0);\n        transform: scale(0, 0);\n    }\n}\n\n.bombLeftOut {\n    -webkit-animation-name: bombLeftOut;\n    animation-name: bombLeftOut;\n}\n\n@-webkit-keyframes bombLeftOut {\n    0% {\n        opacity: 1;\n        -webkit-transform-origin: 50% 50%;\n        transform-origin: 50% 50%;\n        -webkit-transform: rotate(0deg);\n        transform: rotate(0deg);\n        -webkit-filter: blur(0px);\n        filter: blur(0px);\n    }\n    50% {\n        opacity: 1;\n        -webkit-transform-origin: -100% 50%;\n        transform-origin: -100% 50%;\n        -webkit-transform: rotate(-160deg);\n        transform: rotate(-160deg);\n        -webkit-filter: blur(0px);\n        filter: blur(0px);\n    }\n    100% {\n        opacity: 0;\n        -webkit-transform-origin: -100% 50%;\n        transform-origin: -100% 50%;\n        -webkit-transform: rotate(-160deg);\n        transform: rotate(-160deg);\n        -webkit-filter: blur(20px);\n        filter: blur(20px);\n    }\n}\n\n@keyframes bombLeftOut {\n    0% {\n        opacity: 1;\n        -webkit-transform-origin: 50% 50%;\n        transform-origin: 50% 50%;\n        -webkit-transform: rotate(0deg);\n        transform: rotate(0deg);\n        -webkit-filter: blur(0px);\n        filter: blur(0px);\n    }\n    50% {\n        opacity: 1;\n        -webkit-transform-origin: -100% 50%;\n        transform-origin: -100% 50%;\n        -webkit-transform: rotate(-160deg);\n        transform: rotate(-160deg);\n        -webkit-filter: blur(0px);\n        filter: blur(0px);\n    }\n    100% {\n        opacity: 0;\n        -webkit-transform-origin: -100% 50%;\n        transform-origin: -100% 50%;\n        -webkit-transform: rotate(-160deg);\n        transform: rotate(-160deg);\n        -webkit-filter: blur(20px);\n        filter: blur(20px);\n    }\n}\n\n.bombRightOut {\n    -webkit-animation-name: bombRightOut;\n    animation-name: bombRightOut;\n}\n\n@-webkit-keyframes bombRightOut {\n    0% {\n        opacity: 1;\n        -webkit-transform-origin: 50% 50%;\n        transform-origin: 50% 50%;\n        -webkit-transform: rotate(0deg);\n        transform: rotate(0deg);\n        -webkit-filter: blur(0px);\n        filter: blur(0px);\n    }\n    50% {\n        opacity: 1;\n        -webkit-transform-origin: 200% 50%;\n        transform-origin: 200% 50%;\n        -webkit-transform: rotate(160deg);\n        transform: rotate(160deg);\n        -webkit-filter: blur(0px);\n        filter: blur(0px);\n    }\n    100% {\n        opacity: 0;\n        -webkit-transform-origin: 200% 50%;\n        transform-origin: 200% 50%;\n        -webkit-transform: rotate(160deg);\n        transform: rotate(160deg);\n        -webkit-filter: blur(20px);\n        filter: blur(20px);\n    }\n}\n\n@keyframes bombRightOut {\n    0% {\n        opacity: 1;\n        -webkit-transform-origin: 50% 50%;\n        transform-origin: 50% 50%;\n        -webkit-transform: rotate(0deg);\n        transform: rotate(0deg);\n        -webkit-filter: blur(0px);\n        filter: blur(0px);\n    }\n    50% {\n        opacity: 1;\n        -webkit-transform-origin: 200% 50%;\n        transform-origin: 200% 50%;\n        -webkit-transform: rotate(160deg);\n        transform: rotate(160deg);\n        -webkit-filter: blur(0px);\n        filter: blur(0px);\n    }\n    100% {\n        opacity: 0;\n        -webkit-transform-origin: 200% 50%;\n        transform-origin: 200% 50%;\n        -webkit-transform: rotate(160deg);\n        transform: rotate(160deg);\n        -webkit-filter: blur(20px);\n        filter: blur(20px);\n    }\n}\n\n.magic {\n    -webkit-animation-name: magic;\n    animation-name: magic;\n}\n\n@-webkit-keyframes magic {\n    0% {\n        opacity: 1;\n        -webkit-transform-origin: 100% 200%;\n        transform-origin: 100% 200%;\n        -webkit-transform: scale(1, 1) rotate(0deg);\n        transform: scale(1, 1) rotate(0deg);\n    }\n    100% {\n        opacity: 0;\n        -webkit-transform-origin: 200% 500%;\n        transform-origin: 200% 500%;\n        -webkit-transform: scale(0, 0) rotate(270deg);\n        transform: scale(0, 0) rotate(270deg);\n    }\n}\n\n@keyframes magic {\n    0% {\n        opacity: 1;\n        -webkit-transform-origin: 100% 200%;\n        transform-origin: 100% 200%;\n        -webkit-transform: scale(1, 1) rotate(0deg);\n        transform: scale(1, 1) rotate(0deg);\n    }\n    100% {\n        opacity: 0;\n        -webkit-transform-origin: 200% 500%;\n        transform-origin: 200% 500%;\n        -webkit-transform: scale(0, 0) rotate(270deg);\n        transform: scale(0, 0) rotate(270deg);\n    }\n}\n\n.swap {\n    -webkit-animation-name: swap;\n    animation-name: swap;\n}\n\n@-webkit-keyframes swap {\n    0% {\n        opacity: 0;\n        -webkit-transform-origin: 0 100%;\n        transform-origin: 0 100%;\n        -webkit-transform: scale(0, 0) translate(-700px, 0px);\n        transform: scale(0, 0) translate(-700px, 0px);\n    }\n    100% {\n        opacity: 1;\n        -webkit-transform-origin: 100% 100%;\n        transform-origin: 100% 100%;\n        -webkit-transform: scale(1, 1) translate(0px, 0px);\n        transform: scale(1, 1) translate(0px, 0px);\n    }\n}\n\n@keyframes swap {\n    0% {\n        opacity: 0;\n        -webkit-transform-origin: 0 100%;\n        transform-origin: 0 100%;\n        -webkit-transform: scale(0, 0) translate(-700px, 0px);\n        transform: scale(0, 0) translate(-700px, 0px);\n    }\n    100% {\n        opacity: 1;\n        -webkit-transform-origin: 100% 100%;\n        transform-origin: 100% 100%;\n        -webkit-transform: scale(1, 1) translate(0px, 0px);\n        transform: scale(1, 1) translate(0px, 0px);\n    }\n}\n\n.twisterInDown {\n    -webkit-animation-name: twisterInDown;\n    animation-name: twisterInDown;\n}\n\n@-webkit-keyframes twisterInDown {\n    0% {\n        opacity: 0;\n        -webkit-transform-origin: 0 100%;\n        transform-origin: 0 100%;\n        -webkit-transform: scale(0, 0) rotate(360deg) translateY(-100%);\n        transform: scale(0, 0) rotate(360deg) translateY(-100%);\n    }\n    30% {\n        -webkit-transform-origin: 0 100%;\n        transform-origin: 0 100%;\n        -webkit-transform: scale(0, 0) rotate(360deg) translateY(-100%);\n        transform: scale(0, 0) rotate(360deg) translateY(-100%);\n    }\n    100% {\n        opacity: 1;\n        -webkit-transform-origin: 100% 100%;\n        transform-origin: 100% 100%;\n        -webkit-transform: scale(1, 1) rotate(0deg) translateY(0%);\n        transform: scale(1, 1) rotate(0deg) translateY(0%);\n    }\n}\n\n@keyframes twisterInDown {\n    0% {\n        opacity: 0;\n        -webkit-transform-origin: 0 100%;\n        transform-origin: 0 100%;\n        -webkit-transform: scale(0, 0) rotate(360deg) translateY(-100%);\n        transform: scale(0, 0) rotate(360deg) translateY(-100%);\n    }\n    30% {\n        -webkit-transform-origin: 0 100%;\n        transform-origin: 0 100%;\n        -webkit-transform: scale(0, 0) rotate(360deg) translateY(-100%);\n        transform: scale(0, 0) rotate(360deg) translateY(-100%);\n    }\n    100% {\n        opacity: 1;\n        -webkit-transform-origin: 100% 100%;\n        transform-origin: 100% 100%;\n        -webkit-transform: scale(1, 1) rotate(0deg) translateY(0%);\n        transform: scale(1, 1) rotate(0deg) translateY(0%);\n    }\n}\n\n.twisterInUp {\n    -webkit-animation-name: twisterInUp;\n    animation-name: twisterInUp;\n}\n\n@-webkit-keyframes twisterInUp {\n    0% {\n        opacity: 0;\n        -webkit-transform-origin: 100% 0;\n        transform-origin: 100% 0;\n        -webkit-transform: scale(0, 0) rotate(360deg) translateY(100%);\n        transform: scale(0, 0) rotate(360deg) translateY(100%);\n    }\n    30% {\n        -webkit-transform-origin: 100% 0;\n        transform-origin: 100% 0;\n        -webkit-transform: scale(0, 0) rotate(360deg) translateY(100%);\n        transform: scale(0, 0) rotate(360deg) translateY(100%);\n    }\n    100% {\n        opacity: 1;\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: scale(1, 1) rotate(0deg) translateY(0);\n        transform: scale(1, 1) rotate(0deg) translateY(0);\n    }\n}\n\n@keyframes twisterInUp {\n    0% {\n        opacity: 0;\n        -webkit-transform-origin: 100% 0;\n        transform-origin: 100% 0;\n        -webkit-transform: scale(0, 0) rotate(360deg) translateY(100%);\n        transform: scale(0, 0) rotate(360deg) translateY(100%);\n    }\n    30% {\n        -webkit-transform-origin: 100% 0;\n        transform-origin: 100% 0;\n        -webkit-transform: scale(0, 0) rotate(360deg) translateY(100%);\n        transform: scale(0, 0) rotate(360deg) translateY(100%);\n    }\n    100% {\n        opacity: 1;\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: scale(1, 1) rotate(0deg) translateY(0);\n        transform: scale(1, 1) rotate(0deg) translateY(0);\n    }\n}\n\n.spaceInDown {\n    -webkit-animation-name: spaceInDown;\n    animation-name: spaceInDown;\n}\n\n@-webkit-keyframes spaceInDown {\n    0% {\n        opacity: 0;\n        -webkit-transform-origin: 50% 100%;\n        transform-origin: 50% 100%;\n        -webkit-transform: scale(.2) translate(0%, 200%);\n        transform: scale(.2) translate(0%, 200%);\n    }\n    100% {\n        opacity: 1;\n        -webkit-transform-origin: 50% 100%;\n        transform-origin: 50% 100%;\n        -webkit-transform: scale(1) translate(0%, 0%);\n        transform: scale(1) translate(0%, 0%);\n    }\n}\n\n@keyframes spaceInDown {\n    0% {\n        opacity: 0;\n        -webkit-transform-origin: 50% 100%;\n        transform-origin: 50% 100%;\n        -webkit-transform: scale(.2) translate(0%, 200%);\n        transform: scale(.2) translate(0%, 200%);\n    }\n    100% {\n        opacity: 1;\n        -webkit-transform-origin: 50% 100%;\n        transform-origin: 50% 100%;\n        -webkit-transform: scale(1) translate(0%, 0%);\n        transform: scale(1) translate(0%, 0%);\n    }\n}\n\n.spaceInLeft {\n    -webkit-animation-name: spaceInLeft;\n    animation-name: spaceInLeft;\n}\n\n@-webkit-keyframes spaceInLeft {\n    0% {\n        opacity: 0;\n        -webkit-transform-origin: 0% 50%;\n        transform-origin: 0% 50%;\n        -webkit-transform: scale(.2) translate(-200%, 0%);\n        transform: scale(.2) translate(-200%, 0%);\n    }\n    100% {\n        opacity: 1;\n        -webkit-transform-origin: 0% 50%;\n        transform-origin: 0% 50%;\n        -webkit-transform: scale(1) translate(0%, 0%);\n        transform: scale(1) translate(0%, 0%);\n    }\n}\n\n@keyframes spaceInLeft {\n    0% {\n        opacity: 0;\n        -webkit-transform-origin: 0% 50%;\n        transform-origin: 0% 50%;\n        -webkit-transform: scale(.2) translate(-200%, 0%);\n        transform: scale(.2) translate(-200%, 0%);\n    }\n    100% {\n        opacity: 1;\n        -webkit-transform-origin: 0% 50%;\n        transform-origin: 0% 50%;\n        -webkit-transform: scale(1) translate(0%, 0%);\n        transform: scale(1) translate(0%, 0%);\n    }\n}\n\n.spaceInRight {\n    -webkit-animation-name: spaceInRight;\n    animation-name: spaceInRight;\n}\n\n@-webkit-keyframes spaceInRight {\n    0% {\n        opacity: 0;\n        -webkit-transform-origin: 100% 50%;\n        transform-origin: 100% 50%;\n        -webkit-transform: scale(.2) translate(200%, 0%);\n        transform: scale(.2) translate(200%, 0%);\n    }\n    100% {\n        opacity: 1;\n        -webkit-transform-origin: 100% 50%;\n        transform-origin: 100% 50%;\n        -webkit-transform: scale(1) translate(0%, 0%);\n        transform: scale(1) translate(0%, 0%);\n    }\n}\n\n@keyframes spaceInRight {\n    0% {\n        opacity: 0;\n        -webkit-transform-origin: 100% 50%;\n        transform-origin: 100% 50%;\n        -webkit-transform: scale(.2) translate(200%, 0%);\n        transform: scale(.2) translate(200%, 0%);\n    }\n    100% {\n        opacity: 1;\n        -webkit-transform-origin: 100% 50%;\n        transform-origin: 100% 50%;\n        -webkit-transform: scale(1) translate(0%, 0%);\n        transform: scale(1) translate(0%, 0%);\n    }\n}\n\n.spaceInUp {\n    -webkit-animation-name: spaceInUp;\n    animation-name: spaceInUp;\n}\n\n@-webkit-keyframes spaceInUp {\n    0% {\n        opacity: 0;\n        -webkit-transform-origin: 50% 0%;\n        transform-origin: 50% 0%;\n        -webkit-transform: scale(.2) translate(0%, -200%);\n        transform: scale(.2) translate(0%, -200%);\n    }\n    100% {\n        opacity: 1;\n        -webkit-transform-origin: 50% 0%;\n        transform-origin: 50% 0%;\n        -webkit-transform: scale(1) translate(0%, 0%);\n        transform: scale(1) translate(0%, 0%);\n    }\n}\n\n@keyframes spaceInUp {\n    0% {\n        opacity: 0;\n        -webkit-transform-origin: 50% 0%;\n        transform-origin: 50% 0%;\n        -webkit-transform: scale(.2) translate(0%, -200%);\n        transform: scale(.2) translate(0%, -200%);\n    }\n    100% {\n        opacity: 1;\n        -webkit-transform-origin: 50% 0%;\n        transform-origin: 50% 0%;\n        -webkit-transform: scale(1) translate(0%, 0%);\n        transform: scale(1) translate(0%, 0%);\n    }\n}\n\n.spaceOutDown {\n    -webkit-animation-name: spaceOutDown;\n    animation-name: spaceOutDown;\n}\n\n@-webkit-keyframes spaceOutDown {\n    0% {\n        opacity: 1;\n        -webkit-transform-origin: 50% 100%;\n        transform-origin: 50% 100%;\n        -webkit-transform: scale(1) translate(0%, 0%);\n        transform: scale(1) translate(0%, 0%);\n    }\n    100% {\n        opacity: 0;\n        -webkit-transform-origin: 50% 100%;\n        transform-origin: 50% 100%;\n        -webkit-transform: scale(.2) translate(0%, 200%);\n        transform: scale(.2) translate(0%, 200%);\n    }\n}\n\n@keyframes spaceOutDown {\n    0% {\n        opacity: 1;\n        -webkit-transform-origin: 50% 100%;\n        transform-origin: 50% 100%;\n        -webkit-transform: scale(1) translate(0%, 0%);\n        transform: scale(1) translate(0%, 0%);\n    }\n    100% {\n        opacity: 0;\n        -webkit-transform-origin: 50% 100%;\n        transform-origin: 50% 100%;\n        -webkit-transform: scale(.2) translate(0%, 200%);\n        transform: scale(.2) translate(0%, 200%);\n    }\n}\n\n.spaceOutLeft {\n    -webkit-animation-name: spaceOutLeft;\n    animation-name: spaceOutLeft;\n}\n\n@-webkit-keyframes spaceOutLeft {\n    0% {\n        opacity: 1;\n        -webkit-transform-origin: 0% 50%;\n        transform-origin: 0% 50%;\n        -webkit-transform: scale(1) translate(0%, 0%);\n        transform: scale(1) translate(0%, 0%);\n    }\n    100% {\n        opacity: 0;\n        -webkit-transform-origin: 0% 50%;\n        transform-origin: 0% 50%;\n        -webkit-transform: scale(.2) translate(-200%, 0%);\n        transform: scale(.2) translate(-200%, 0%);\n    }\n}\n\n@keyframes spaceOutLeft {\n    0% {\n        opacity: 1;\n        -webkit-transform-origin: 0% 50%;\n        transform-origin: 0% 50%;\n        -webkit-transform: scale(1) translate(0%, 0%);\n        transform: scale(1) translate(0%, 0%);\n    }\n    100% {\n        opacity: 0;\n        -webkit-transform-origin: 0% 50%;\n        transform-origin: 0% 50%;\n        -webkit-transform: scale(.2) translate(-200%, 0%);\n        transform: scale(.2) translate(-200%, 0%);\n    }\n}\n\n.spaceOutRight {\n    -webkit-animation-name: spaceOutRight;\n    animation-name: spaceOutRight;\n}\n\n@-webkit-keyframes spaceOutRight {\n    0% {\n        opacity: 1;\n        -webkit-transform-origin: 100% 50%;\n        transform-origin: 100% 50%;\n        -webkit-transform: scale(1) translate(0%, 0%);\n        transform: scale(1) translate(0%, 0%);\n    }\n    100% {\n        opacity: 0;\n        -webkit-transform-origin: 100% 50%;\n        transform-origin: 100% 50%;\n        -webkit-transform: scale(.2) translate(200%, 0%);\n        transform: scale(.2) translate(200%, 0%);\n    }\n}\n\n@keyframes spaceOutRight {\n    0% {\n        opacity: 1;\n        -webkit-transform-origin: 100% 50%;\n        transform-origin: 100% 50%;\n        -webkit-transform: scale(1) translate(0%, 0%);\n        transform: scale(1) translate(0%, 0%);\n    }\n    100% {\n        opacity: 0;\n        -webkit-transform-origin: 100% 50%;\n        transform-origin: 100% 50%;\n        -webkit-transform: scale(.2) translate(200%, 0%);\n        transform: scale(.2) translate(200%, 0%);\n    }\n}\n\n.spaceOutUp {\n    -webkit-animation-name: spaceOutUp;\n    animation-name: spaceOutUp;\n}\n\n@-webkit-keyframes spaceOutUp {\n    0% {\n        opacity: 1;\n        -webkit-transform-origin: 50% 0%;\n        transform-origin: 50% 0%;\n        -webkit-transform: scale(1) translate(0%, 0%);\n        transform: scale(1) translate(0%, 0%);\n    }\n    100% {\n        opacity: 0;\n        -webkit-transform-origin: 50% 0%;\n        transform-origin: 50% 0%;\n        -webkit-transform: scale(.2) translate(0%, -200%);\n        transform: scale(.2) translate(0%, -200%);\n    }\n}\n\n@keyframes spaceOutUp {\n    0% {\n        opacity: 1;\n        -webkit-transform-origin: 50% 0%;\n        transform-origin: 50% 0%;\n        -webkit-transform: scale(1) translate(0%, 0%);\n        transform: scale(1) translate(0%, 0%);\n    }\n    100% {\n        opacity: 0;\n        -webkit-transform-origin: 50% 0%;\n        transform-origin: 50% 0%;\n        -webkit-transform: scale(.2) translate(0%, -200%);\n        transform: scale(.2) translate(0%, -200%);\n    }\n}\n\n.perspectiveDown {\n    -webkit-animation-name: perspectiveDown;\n    animation-name: perspectiveDown;\n}\n\n@-webkit-keyframes perspectiveDown {\n    0% {\n        -webkit-transform-origin: 0 100%;\n        transform-origin: 0 100%;\n        -webkit-transform: perspective(800px) rotateX(0deg);\n        transform: perspective(800px) rotateX(0deg);\n    }\n    100% {\n        -webkit-transform-origin: 0 100%;\n        transform-origin: 0 100%;\n        -webkit-transform: perspective(800px) rotateX(-180deg);\n        transform: perspective(800px) rotateX(-180deg);\n    }\n}\n\n@keyframes perspectiveDown {\n    0% {\n        -webkit-transform-origin: 0 100%;\n        transform-origin: 0 100%;\n        -webkit-transform: perspective(800px) rotateX(0deg);\n        transform: perspective(800px) rotateX(0deg);\n    }\n    100% {\n        -webkit-transform-origin: 0 100%;\n        transform-origin: 0 100%;\n        -webkit-transform: perspective(800px) rotateX(-180deg);\n        transform: perspective(800px) rotateX(-180deg);\n    }\n}\n\n.perspectiveDownReturn {\n    -webkit-animation-name: perspectiveDownReturn;\n    animation-name: perspectiveDownReturn;\n}\n\n@-webkit-keyframes perspectiveDownReturn {\n    0% {\n        -webkit-transform-origin: 0 100%;\n        transform-origin: 0 100%;\n        -webkit-transform: perspective(800px) rotateX(-180deg);\n        transform: perspective(800px) rotateX(-180deg);\n    }\n    100% {\n        -webkit-transform-origin: 0 100%;\n        transform-origin: 0 100%;\n        -webkit-transform: perspective(800px) rotateX(0deg);\n        transform: perspective(800px) rotateX(0deg);\n    }\n}\n\n@keyframes perspectiveDownReturn {\n    0% {\n        -webkit-transform-origin: 0 100%;\n        transform-origin: 0 100%;\n        -webkit-transform: perspective(800px) rotateX(-180deg);\n        transform: perspective(800px) rotateX(-180deg);\n    }\n    100% {\n        -webkit-transform-origin: 0 100%;\n        transform-origin: 0 100%;\n        -webkit-transform: perspective(800px) rotateX(0deg);\n        transform: perspective(800px) rotateX(0deg);\n    }\n}\n\n.perspectiveLeft {\n    -webkit-animation-name: perspectiveLeft;\n    animation-name: perspectiveLeft;\n}\n\n@-webkit-keyframes perspectiveLeft {\n    0% {\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: perspective(800px) rotateY(0deg);\n        transform: perspective(800px) rotateY(0deg);\n    }\n    100% {\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: perspective(800px) rotateY(-180deg);\n        transform: perspective(800px) rotateY(-180deg);\n    }\n}\n\n@keyframes perspectiveLeft {\n    0% {\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: perspective(800px) rotateY(0deg);\n        transform: perspective(800px) rotateY(0deg);\n    }\n    100% {\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: perspective(800px) rotateY(-180deg);\n        transform: perspective(800px) rotateY(-180deg);\n    }\n}\n\n.perspectiveLeftReturn {\n    -webkit-animation-name: perspectiveLeftReturn;\n    animation-name: perspectiveLeftReturn;\n}\n\n@-webkit-keyframes perspectiveLeftReturn {\n    0% {\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: perspective(800px) rotateY(-180deg);\n        transform: perspective(800px) rotateY(-180deg);\n    }\n    100% {\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: perspective(800px) rotateY(0deg);\n        transform: perspective(800px) rotateY(0deg);\n    }\n}\n\n@keyframes perspectiveLeftReturn {\n    0% {\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: perspective(800px) rotateY(-180deg);\n        transform: perspective(800px) rotateY(-180deg);\n    }\n    100% {\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: perspective(800px) rotateY(0deg);\n        transform: perspective(800px) rotateY(0deg);\n    }\n}\n\n.perspectiveRight {\n    -webkit-animation-name: perspectiveRight;\n    animation-name: perspectiveRight;\n}\n\n@-webkit-keyframes perspectiveRight {\n    0% {\n        -webkit-transform-origin: 100% 0;\n        transform-origin: 100% 0;\n        -webkit-transform: perspective(800px) rotateY(0deg);\n        transform: perspective(800px) rotateY(0deg);\n    }\n    100% {\n        -webkit-transform-origin: 100% 0;\n        transform-origin: 100% 0;\n        -webkit-transform: perspective(800px) rotateY(180deg);\n        transform: perspective(800px) rotateY(180deg);\n    }\n}\n\n@keyframes perspectiveRight {\n    0% {\n        -webkit-transform-origin: 100% 0;\n        transform-origin: 100% 0;\n        -webkit-transform: perspective(800px) rotateY(0deg);\n        transform: perspective(800px) rotateY(0deg);\n    }\n    100% {\n        -webkit-transform-origin: 100% 0;\n        transform-origin: 100% 0;\n        -webkit-transform: perspective(800px) rotateY(180deg);\n        transform: perspective(800px) rotateY(180deg);\n    }\n}\n\n.perspectiveRightReturn {\n    -webkit-animation-name: perspectiveRightReturn;\n    animation-name: perspectiveRightReturn;\n}\n\n@-webkit-keyframes perspectiveRightReturn {\n    0% {\n        -webkit-transform-origin: 100% 0;\n        transform-origin: 100% 0;\n        -webkit-transform: perspective(800px) rotateY(180deg);\n        transform: perspective(800px) rotateY(180deg);\n    }\n    100% {\n        -webkit-transform-origin: 100% 0;\n        transform-origin: 100% 0;\n        -webkit-transform: perspective(800px) rotateY(0deg);\n        transform: perspective(800px) rotateY(0deg);\n    }\n}\n\n@keyframes perspectiveRightReturn {\n    0% {\n        -webkit-transform-origin: 100% 0;\n        transform-origin: 100% 0;\n        -webkit-transform: perspective(800px) rotateY(180deg);\n        transform: perspective(800px) rotateY(180deg);\n    }\n    100% {\n        -webkit-transform-origin: 100% 0;\n        transform-origin: 100% 0;\n        -webkit-transform: perspective(800px) rotateY(0deg);\n        transform: perspective(800px) rotateY(0deg);\n    }\n}\n\n.perspectiveUp {\n    -webkit-animation-name: perspectiveUp;\n    animation-name: perspectiveUp;\n}\n\n@-webkit-keyframes perspectiveUp {\n    0% {\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: perspective(800px) rotateX(0deg);\n        transform: perspective(800px) rotateX(0deg);\n    }\n    100% {\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: perspective(800px) rotateX(180deg);\n        transform: perspective(800px) rotateX(180deg);\n    }\n}\n\n@keyframes perspectiveUp {\n    0% {\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: perspective(800px) rotateX(0deg);\n        transform: perspective(800px) rotateX(0deg);\n    }\n    100% {\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: perspective(800px) rotateX(180deg);\n        transform: perspective(800px) rotateX(180deg);\n    }\n}\n\n.perspectiveUpReturn {\n    -webkit-animation-name: perspectiveUpReturn;\n    animation-name: perspectiveUpReturn;\n}\n\n@-webkit-keyframes perspectiveUpReturn {\n    0% {\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: perspective(800px) rotateX(180deg);\n        transform: perspective(800px) rotateX(180deg);\n    }\n    100% {\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: perspective(800px) rotateX(0deg);\n        transform: perspective(800px) rotateX(0deg);\n    }\n}\n\n@keyframes perspectiveUpReturn {\n    0% {\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: perspective(800px) rotateX(180deg);\n        transform: perspective(800px) rotateX(180deg);\n    }\n    100% {\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: perspective(800px) rotateX(0deg);\n        transform: perspective(800px) rotateX(0deg);\n    }\n}\n\n.rotateDown {\n    -webkit-animation-name: rotateDown;\n    animation-name: rotateDown;\n}\n\n@-webkit-keyframes rotateDown {\n    0% {\n        opacity: 1;\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: perspective(800px) rotateX(0deg) translateZ(0px);\n        transform: perspective(800px) rotateX(0deg) translateZ(0px);\n    }\n    100% {\n        opacity: 0;\n        -webkit-transform-origin: 50% 100%;\n        transform-origin: 50% 100%;\n        -webkit-transform: perspective(800px) rotateX(-180deg) translateZ(300px);\n        transform: perspective(800px) rotateX(-180deg) translateZ(300px);\n    }\n}\n\n@keyframes rotateDown {\n    0% {\n        opacity: 1;\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: perspective(800px) rotateX(0deg) translateZ(0px);\n        transform: perspective(800px) rotateX(0deg) translateZ(0px);\n    }\n    100% {\n        opacity: 0;\n        -webkit-transform-origin: 50% 100%;\n        transform-origin: 50% 100%;\n        -webkit-transform: perspective(800px) rotateX(-180deg) translateZ(300px);\n        transform: perspective(800px) rotateX(-180deg) translateZ(300px);\n    }\n}\n\n.rotateLeft {\n    -webkit-animation-name: rotateLeft;\n    animation-name: rotateLeft;\n}\n\n@-webkit-keyframes rotateLeft {\n    0% {\n        opacity: 1;\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: perspective(800px) rotateY(0deg) translateZ(0px);\n        transform: perspective(800px) rotateY(0deg) translateZ(0px);\n    }\n    100% {\n        opacity: 0;\n        -webkit-transform-origin: 50% 0;\n        transform-origin: 50% 0;\n        -webkit-transform: perspective(800px) rotateY(-180deg) translateZ(300px);\n        transform: perspective(800px) rotateY(-180deg) translateZ(300px);\n    }\n}\n\n@keyframes rotateLeft {\n    0% {\n        opacity: 1;\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: perspective(800px) rotateY(0deg) translateZ(0px);\n        transform: perspective(800px) rotateY(0deg) translateZ(0px);\n    }\n    100% {\n        opacity: 0;\n        -webkit-transform-origin: 50% 0;\n        transform-origin: 50% 0;\n        -webkit-transform: perspective(800px) rotateY(-180deg) translateZ(300px);\n        transform: perspective(800px) rotateY(-180deg) translateZ(300px);\n    }\n}\n\n.rotateRight {\n    -webkit-animation-name: rotateRight;\n    animation-name: rotateRight;\n}\n\n@-webkit-keyframes rotateRight {\n    0% {\n        opacity: 1;\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: perspective(800px) rotateY(0deg) translate3d(0px);\n        transform: perspective(800px) rotateY(0deg) translate3d(0px);\n    }\n    100% {\n        opacity: 0;\n        -webkit-transform-origin: 50% 0;\n        transform-origin: 50% 0;\n        -webkit-transform: perspective(800px) rotateY(180deg) translateZ(150px);\n        transform: perspective(800px) rotateY(180deg) translateZ(150px);\n    }\n}\n\n@keyframes rotateRight {\n    0% {\n        opacity: 1;\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: perspective(800px) rotateY(0deg) translate3d(0px);\n        transform: perspective(800px) rotateY(0deg) translate3d(0px);\n    }\n    100% {\n        opacity: 0;\n        -webkit-transform-origin: 50% 0;\n        transform-origin: 50% 0;\n        -webkit-transform: perspective(800px) rotateY(180deg) translateZ(150px);\n        transform: perspective(800px) rotateY(180deg) translateZ(150px);\n    }\n}\n\n.rotateUp {\n    -webkit-animation-name: rotateUp;\n    animation-name: rotateUp;\n}\n\n@-webkit-keyframes rotateUp {\n    0% {\n        opacity: 1;\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: perspective(800px) rotateX(0deg) translateZ(0px);\n        transform: perspective(800px) rotateX(0deg) translateZ(0px);\n    }\n    100% {\n        opacity: 0;\n        -webkit-transform-origin: 50% 0;\n        transform-origin: 50% 0;\n        -webkit-transform: perspective(800px) rotateX(180deg) translateZ(100px);\n        transform: perspective(800px) rotateX(180deg) translateZ(100px);\n    }\n}\n\n@keyframes rotateUp {\n    0% {\n        opacity: 1;\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: perspective(800px) rotateX(0deg) translateZ(0px);\n        transform: perspective(800px) rotateX(0deg) translateZ(0px);\n    }\n    100% {\n        opacity: 0;\n        -webkit-transform-origin: 50% 0;\n        transform-origin: 50% 0;\n        -webkit-transform: perspective(800px) rotateX(180deg) translateZ(100px);\n        transform: perspective(800px) rotateX(180deg) translateZ(100px);\n    }\n}\n\n.slideDown {\n    -webkit-animation-name: slideDown;\n    animation-name: slideDown;\n}\n\n@-webkit-keyframes slideDown {\n    0% {\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: translateY(0%);\n        transform: translateY(0%);\n    }\n    100% {\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: translateY(100%);\n        transform: translateY(100%);\n    }\n}\n\n@keyframes slideDown {\n    0% {\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: translateY(0%);\n        transform: translateY(0%);\n    }\n    100% {\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: translateY(100%);\n        transform: translateY(100%);\n    }\n}\n\n.slideDownReturn {\n    -webkit-animation-name: slideDownReturn;\n    animation-name: slideDownReturn;\n}\n\n@-webkit-keyframes slideDownReturn {\n    0% {\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: translateY(100%);\n        transform: translateY(100%);\n    }\n    100% {\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: translateY(0%);\n        transform: translateY(0%);\n    }\n}\n\n@keyframes slideDownReturn {\n    0% {\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: translateY(100%);\n        transform: translateY(100%);\n    }\n    100% {\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: translateY(0%);\n        transform: translateY(0%);\n    }\n}\n\n.slideLeft {\n    -webkit-animation-name: slideLeft;\n    animation-name: slideLeft;\n}\n\n@-webkit-keyframes slideLeft {\n    0% {\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: translateX(0%);\n        transform: translateX(0%);\n    }\n    100% {\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: translateX(-100%);\n        transform: translateX(-100%);\n    }\n}\n\n@keyframes slideLeft {\n    0% {\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: translateX(0%);\n        transform: translateX(0%);\n    }\n    100% {\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: translateX(-100%);\n        transform: translateX(-100%);\n    }\n}\n\n.slideLeftReturn {\n    -webkit-animation-name: slideLeftReturn;\n    animation-name: slideLeftReturn;\n}\n\n@-webkit-keyframes slideLeftReturn {\n    0% {\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: translateX(-100%);\n        transform: translateX(-100%);\n    }\n    100% {\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: translateX(0%);\n        transform: translateX(0%);\n    }\n}\n\n@keyframes slideLeftReturn {\n    0% {\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: translateX(-100%);\n        transform: translateX(-100%);\n    }\n    100% {\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: translateX(0%);\n        transform: translateX(0%);\n    }\n}\n\n.slideRight {\n    -webkit-animation-name: slideRight;\n    animation-name: slideRight;\n}\n\n@-webkit-keyframes slideRight {\n    0% {\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: translateX(0%);\n        transform: translateX(0%);\n    }\n    100% {\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: translateX(100%);\n        transform: translateX(100%);\n    }\n}\n\n@keyframes slideRight {\n    0% {\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: translateX(0%);\n        transform: translateX(0%);\n    }\n    100% {\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: translateX(100%);\n        transform: translateX(100%);\n    }\n}\n\n.slideRightReturn {\n    -webkit-animation-name: slideRightReturn;\n    animation-name: slideRightReturn;\n}\n\n@-webkit-keyframes slideRightReturn {\n    0% {\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: translateX(100%);\n        transform: translateX(100%);\n    }\n    100% {\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: translateX(0%);\n        transform: translateX(0%);\n    }\n}\n\n@keyframes slideRightReturn {\n    0% {\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: translateX(100%);\n        transform: translateX(100%);\n    }\n    100% {\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: translateX(0%);\n        transform: translateX(0%);\n    }\n}\n\n.slideUp {\n    -webkit-animation-name: slideUp;\n    animation-name: slideUp;\n}\n\n@-webkit-keyframes slideUp {\n    0% {\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: translateY(0%);\n        transform: translateY(0%);\n    }\n    100% {\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: translateY(-100%);\n        transform: translateY(-100%);\n    }\n}\n\n@keyframes slideUp {\n    0% {\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: translateY(0%);\n        transform: translateY(0%);\n    }\n    100% {\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: translateY(-100%);\n        transform: translateY(-100%);\n    }\n}\n\n.slideUp2 {\n    -webkit-animation-name: slideUp2;\n    animation-name: slideUp2;\n}\n\n@-webkit-keyframes slideUp2 {\n    0% {\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: translateY(0%);\n        transform: translateY(0%);\n    }\n    100% {\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: translateY(-100%);\n        transform: translateY(-100%);\n    }\n}\n\n@keyframes slideUp2 {\n    0% {\n        opacity: 1;\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: translateY(0%);\n        transform: translateY(0%);\n    }\n    100% {\n        opacity: 0;\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: translateY(-100%);\n        transform: translateY(-100%);\n    }\n}\n\n.slideUpReturn {\n    -webkit-animation-name: slideUpReturn;\n    animation-name: slideUpReturn;\n}\n\n@-webkit-keyframes slideUpReturn {\n    0% {\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: translateY(-100%);\n        transform: translateY(-100%);\n    }\n    100% {\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: translateY(0%);\n        transform: translateY(0%);\n    }\n}\n\n@keyframes slideUpReturn {\n    0% {\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: translateY(-100%);\n        transform: translateY(-100%);\n    }\n    100% {\n        -webkit-transform-origin: 0 0;\n        transform-origin: 0 0;\n        -webkit-transform: translateY(0%);\n        transform: translateY(0%);\n    }\n}\n\n.openDownLeft {\n    -webkit-animation-name: openDownLeft;\n    animation-name: openDownLeft;\n}\n\n@-webkit-keyframes openDownLeft {\n    0% {\n        -webkit-transform-origin: bottom left;\n        transform-origin: bottom left;\n        -webkit-transform: rotate(0deg);\n        transform: rotate(0deg);\n        -webkit-animation-timing-function: ease-out;\n        animation-timing-function: ease-out;\n    }\n    100% {\n        -webkit-transform-origin: bottom left;\n        transform-origin: bottom left;\n        -webkit-transform: rotate(-110deg);\n        transform: rotate(-110deg);\n        -webkit-animation-timing-function: ease-in-out;\n        animation-timing-function: ease-in-out;\n    }\n}\n\n@keyframes openDownLeft {\n    0% {\n        -webkit-transform-origin: bottom left;\n        transform-origin: bottom left;\n        -webkit-transform: rotate(0deg);\n        transform: rotate(0deg);\n        -webkit-animation-timing-function: ease-out;\n        animation-timing-function: ease-out;\n    }\n    100% {\n        -webkit-transform-origin: bottom left;\n        transform-origin: bottom left;\n        -webkit-transform: rotate(-110deg);\n        transform: rotate(-110deg);\n        -webkit-animation-timing-function: ease-in-out;\n        animation-timing-function: ease-in-out;\n    }\n}\n\n.openDownLeftReturn {\n    -webkit-animation-name: openDownLeftReturn;\n    animation-name: openDownLeftReturn;\n}\n\n@-webkit-keyframes openDownLeftReturn {\n    0% {\n        -webkit-transform-origin: bottom left;\n        transform-origin: bottom left;\n        -webkit-transform: rotate(-110deg);\n        transform: rotate(-110deg);\n        -webkit-animation-timing-function: ease-in-out;\n        animation-timing-function: ease-in-out;\n    }\n    100% {\n        -webkit-transform-origin: bottom left;\n        transform-origin: bottom left;\n        -webkit-transform: rotate(0deg);\n        transform: rotate(0deg);\n        -webkit-animation-timing-function: ease-out;\n        animation-timing-function: ease-out;\n    }\n}\n\n@keyframes openDownLeftReturn {\n    0% {\n        -webkit-transform-origin: bottom left;\n        transform-origin: bottom left;\n        -webkit-transform: rotate(-110deg);\n        transform: rotate(-110deg);\n        -webkit-animation-timing-function: ease-in-out;\n        animation-timing-function: ease-in-out;\n    }\n    100% {\n        -webkit-transform-origin: bottom left;\n        transform-origin: bottom left;\n        -webkit-transform: rotate(0deg);\n        transform: rotate(0deg);\n        -webkit-animation-timing-function: ease-out;\n        animation-timing-function: ease-out;\n    }\n}\n\n.openDownRight {\n    -webkit-animation-name: openDownRight;\n    animation-name: openDownRight;\n}\n\n@-webkit-keyframes openDownRight {\n    0% {\n        -webkit-transform-origin: bottom right;\n        transform-origin: bottom right;\n        -webkit-transform: rotate(0deg);\n        transform: rotate(0deg);\n        -webkit-animation-timing-function: ease-out;\n        animation-timing-function: ease-out;\n    }\n    100% {\n        -webkit-transform-origin: bottom right;\n        transform-origin: bottom right;\n        -webkit-transform: rotate(110deg);\n        transform: rotate(110deg);\n        -webkit-animation-timing-function: ease-in-out;\n        animation-timing-function: ease-in-out;\n    }\n}\n\n@keyframes openDownRight {\n    0% {\n        -webkit-transform-origin: bottom right;\n        transform-origin: bottom right;\n        -webkit-transform: rotate(0deg);\n        transform: rotate(0deg);\n        -webkit-animation-timing-function: ease-out;\n        animation-timing-function: ease-out;\n    }\n    100% {\n        -webkit-transform-origin: bottom right;\n        transform-origin: bottom right;\n        -webkit-transform: rotate(110deg);\n        transform: rotate(110deg);\n        -webkit-animation-timing-function: ease-in-out;\n        animation-timing-function: ease-in-out;\n    }\n}\n\n.openDownRightReturn {\n    -webkit-animation-name: openDownRightReturn;\n    animation-name: openDownRightReturn;\n}\n\n@-webkit-keyframes openDownRightReturn {\n    0% {\n        -webkit-transform-origin: bottom right;\n        transform-origin: bottom right;\n        -webkit-transform: rotate(110deg);\n        transform: rotate(110deg);\n        -webkit-animation-timing-function: ease-in-out;\n        animation-timing-function: ease-in-out;\n    }\n    100% {\n        -webkit-transform-origin: bottom right;\n        transform-origin: bottom right;\n        -webkit-transform: rotate(0deg);\n        transform: rotate(0deg);\n        -webkit-animation-timing-function: ease-out;\n        animation-timing-function: ease-out;\n    }\n}\n\n@keyframes openDownRightReturn {\n    0% {\n        -webkit-transform-origin: bottom right;\n        transform-origin: bottom right;\n        -webkit-transform: rotate(110deg);\n        transform: rotate(110deg);\n        -webkit-animation-timing-function: ease-in-out;\n        animation-timing-function: ease-in-out;\n    }\n    100% {\n        -webkit-transform-origin: bottom right;\n        transform-origin: bottom right;\n        -webkit-transform: rotate(0deg);\n        transform: rotate(0deg);\n        -webkit-animation-timing-function: ease-out;\n        animation-timing-function: ease-out;\n    }\n}\n\n.openUpLeft {\n    -webkit-animation-name: openUpLeft;\n    animation-name: openUpLeft;\n}\n\n@-webkit-keyframes openUpLeft {\n    0% {\n        -webkit-transform-origin: top left;\n        transform-origin: top left;\n        -webkit-transform: rotate(0deg);\n        transform: rotate(0deg);\n        -webkit-animation-timing-function: ease-out;\n        animation-timing-function: ease-out;\n    }\n    100% {\n        -webkit-transform-origin: top left;\n        transform-origin: top left;\n        -webkit-transform: rotate(110deg);\n        transform: rotate(110deg);\n        -webkit-animation-timing-function: ease-in-out;\n        animation-timing-function: ease-in-out;\n    }\n}\n\n@keyframes openUpLeft {\n    0% {\n        -webkit-transform-origin: top left;\n        transform-origin: top left;\n        -webkit-transform: rotate(0deg);\n        transform: rotate(0deg);\n        -webkit-animation-timing-function: ease-out;\n        animation-timing-function: ease-out;\n    }\n    100% {\n        -webkit-transform-origin: top left;\n        transform-origin: top left;\n        -webkit-transform: rotate(110deg);\n        transform: rotate(110deg);\n        -webkit-animation-timing-function: ease-in-out;\n        animation-timing-function: ease-in-out;\n    }\n}\n\n.openUpLeftReturn {\n    -webkit-animation-name: openUpLeftReturn;\n    animation-name: openUpLeftReturn;\n}\n\n@-webkit-keyframes openUpLeftReturn {\n    0% {\n        -webkit-transform-origin: top left;\n        transform-origin: top left;\n        -webkit-transform: rotate(110deg);\n        transform: rotate(110deg);\n        -webkit-animation-timing-function: ease-in-out;\n        animation-timing-function: ease-in-out;\n    }\n    100% {\n        -webkit-transform-origin: top left;\n        transform-origin: top left;\n        -webkit-transform: rotate(0deg);\n        transform: rotate(0deg);\n        -webkit-animation-timing-function: ease-out;\n        animation-timing-function: ease-out;\n    }\n}\n\n@keyframes openUpLeftReturn {\n    0% {\n        -webkit-transform-origin: top left;\n        transform-origin: top left;\n        -webkit-transform: rotate(110deg);\n        transform: rotate(110deg);\n        -webkit-animation-timing-function: ease-in-out;\n        animation-timing-function: ease-in-out;\n    }\n    100% {\n        -webkit-transform-origin: top left;\n        transform-origin: top left;\n        -webkit-transform: rotate(0deg);\n        transform: rotate(0deg);\n        -webkit-animation-timing-function: ease-out;\n        animation-timing-function: ease-out;\n    }\n}\n\n.openUpRight {\n    -webkit-animation-name: openUpRight;\n    animation-name: openUpRight;\n}\n\n@-webkit-keyframes openUpRight {\n    0% {\n        -webkit-transform-origin: top right;\n        transform-origin: top right;\n        -webkit-transform: rotate(0deg);\n        transform: rotate(0deg);\n        -webkit-animation-timing-function: ease-out;\n        animation-timing-function: ease-out;\n    }\n    100% {\n        -webkit-transform-origin: top right;\n        transform-origin: top right;\n        -webkit-transform: rotate(-110deg);\n        transform: rotate(-110deg);\n        -webkit-animation-timing-function: ease-in-out;\n        animation-timing-function: ease-in-out;\n    }\n}\n\n@keyframes openUpRight {\n    0% {\n        -webkit-transform-origin: top right;\n        transform-origin: top right;\n        -webkit-transform: rotate(0deg);\n        transform: rotate(0deg);\n        -webkit-animation-timing-function: ease-out;\n        animation-timing-function: ease-out;\n    }\n    100% {\n        -webkit-transform-origin: top right;\n        transform-origin: top right;\n        -webkit-transform: rotate(-110deg);\n        transform: rotate(-110deg);\n        -webkit-animation-timing-function: ease-in-out;\n        animation-timing-function: ease-in-out;\n    }\n}\n\n.openUpRightReturn {\n    -webkit-animation-name: openUpRightReturn;\n    animation-name: openUpRightReturn;\n}\n\n@-webkit-keyframes openUpRightReturn {\n    0% {\n        -webkit-transform-origin: top right;\n        transform-origin: top right;\n        -webkit-transform: rotate(-110deg);\n        transform: rotate(-110deg);\n        -webkit-animation-timing-function: ease-in-out;\n        animation-timing-function: ease-in-out;\n    }\n    100% {\n        -webkit-transform-origin: top right;\n        transform-origin: top right;\n        -webkit-transform: rotate(0deg);\n        transform: rotate(0deg);\n        -webkit-animation-timing-function: ease-out;\n        animation-timing-function: ease-out;\n    }\n}\n\n@keyframes openUpRightReturn {\n    0% {\n        -webkit-transform-origin: top right;\n        transform-origin: top right;\n        -webkit-transform: rotate(-110deg);\n        transform: rotate(-110deg);\n        -webkit-animation-timing-function: ease-in-out;\n        animation-timing-function: ease-in-out;\n    }\n    100% {\n        -webkit-transform-origin: top right;\n        transform-origin: top right;\n        -webkit-transform: rotate(0deg);\n        transform: rotate(0deg);\n        -webkit-animation-timing-function: ease-out;\n        animation-timing-function: ease-out;\n    }\n}\n\n.openDownLeftOut {\n    -webkit-animation-name: openDownLeftOut;\n    animation-name: openDownLeftOut;\n}\n\n@-webkit-keyframes openDownLeftOut {\n    0% {\n        opacity: 1;\n        -webkit-transform-origin: bottom left;\n        transform-origin: bottom left;\n        -webkit-transform: rotate(0deg);\n        transform: rotate(0deg);\n        -webkit-animation-timing-function: ease-out;\n        animation-timing-function: ease-out;\n    }\n    100% {\n        opacity: 0;\n        -webkit-transform-origin: bottom left;\n        transform-origin: bottom left;\n        -webkit-transform: rotate(-110deg);\n        transform: rotate(-110deg);\n        -webkit-animation-timing-function: ease-in-out;\n        animation-timing-function: ease-in-out;\n    }\n}\n\n@keyframes openDownLeftOut {\n    0% {\n        opacity: 1;\n        -webkit-transform-origin: bottom left;\n        transform-origin: bottom left;\n        -webkit-transform: rotate(0deg);\n        transform: rotate(0deg);\n        -webkit-animation-timing-function: ease-out;\n        animation-timing-function: ease-out;\n    }\n    100% {\n        opacity: 0;\n        -webkit-transform-origin: bottom left;\n        transform-origin: bottom left;\n        -webkit-transform: rotate(-110deg);\n        transform: rotate(-110deg);\n        -webkit-animation-timing-function: ease-in-out;\n        animation-timing-function: ease-in-out;\n    }\n}\n\n.openDownRightOut {\n    -webkit-animation-name: openDownRightOut;\n    animation-name: openDownRightOut;\n}\n\n@-webkit-keyframes openDownRightOut {\n    0% {\n        opacity: 1;\n        -webkit-transform-origin: bottom right;\n        transform-origin: bottom right;\n        -webkit-transform: rotate(0deg);\n        transform: rotate(0deg);\n        -webkit-animation-timing-function: ease-out;\n        animation-timing-function: ease-out;\n    }\n    100% {\n        opacity: 0;\n        -webkit-transform-origin: bottom right;\n        transform-origin: bottom right;\n        -webkit-transform: rotate(110deg);\n        transform: rotate(110deg);\n        -webkit-animation-timing-function: ease-in-out;\n        animation-timing-function: ease-in-out;\n    }\n}\n\n@keyframes openDownRightOut {\n    0% {\n        opacity: 1;\n        -webkit-transform-origin: bottom right;\n        transform-origin: bottom right;\n        -webkit-transform: rotate(0deg);\n        transform: rotate(0deg);\n        -webkit-animation-timing-function: ease-out;\n        animation-timing-function: ease-out;\n    }\n    100% {\n        opacity: 0;\n        -webkit-transform-origin: bottom right;\n        transform-origin: bottom right;\n        -webkit-transform: rotate(110deg);\n        transform: rotate(110deg);\n        -webkit-animation-timing-function: ease-in-out;\n        animation-timing-function: ease-in-out;\n    }\n}\n\n.openUpLeftOut {\n    -webkit-animation-name: openUpLeftOut;\n    animation-name: openUpLeftOut;\n}\n\n@-webkit-keyframes openUpLeftOut {\n    0% {\n        opacity: 1;\n        -webkit-transform-origin: top left;\n        transform-origin: top left;\n        -webkit-transform: rotate(0deg);\n        transform: rotate(0deg);\n        -webkit-animation-timing-function: ease-out;\n        animation-timing-function: ease-out;\n    }\n    100% {\n        opacity: 0;\n        -webkit-transform-origin: top left;\n        transform-origin: top left;\n        -webkit-transform: rotate(110deg);\n        transform: rotate(110deg);\n        -webkit-animation-timing-function: ease-in-out;\n        animation-timing-function: ease-in-out;\n    }\n}\n\n@keyframes openUpLeftOut {\n    0% {\n        opacity: 1;\n        -webkit-transform-origin: top left;\n        transform-origin: top left;\n        -webkit-transform: rotate(0deg);\n        transform: rotate(0deg);\n        -webkit-animation-timing-function: ease-out;\n        animation-timing-function: ease-out;\n    }\n    100% {\n        opacity: 0;\n        -webkit-transform-origin: top left;\n        transform-origin: top left;\n        -webkit-transform: rotate(110deg);\n        transform: rotate(110deg);\n        -webkit-animation-timing-function: ease-in-out;\n        animation-timing-function: ease-in-out;\n    }\n}\n\n.openUpRightOut {\n    -webkit-animation-name: openUpRightOut;\n    animation-name: openUpRightOut;\n}\n\n@-webkit-keyframes openUpRightOut {\n    0% {\n        opacity: 1;\n        -webkit-transform-origin: top right;\n        transform-origin: top right;\n        -webkit-transform: rotate(0deg);\n        transform: rotate(0deg);\n        -webkit-animation-timing-function: ease-out;\n        animation-timing-function: ease-out;\n    }\n    100% {\n        opacity: 0;\n        -webkit-transform-origin: top right;\n        transform-origin: top right;\n        -webkit-transform: rotate(-110deg);\n        transform: rotate(-110deg);\n        -webkit-animation-timing-function: ease-in-out;\n        animation-timing-function: ease-in-out;\n    }\n}\n\n@keyframes openUpRightOut {\n    0% {\n        opacity: 1;\n        -webkit-transform-origin: top right;\n        transform-origin: top right;\n        -webkit-transform: rotate(0deg);\n        transform: rotate(0deg);\n        -webkit-animation-timing-function: ease-out;\n        animation-timing-function: ease-out;\n    }\n    100% {\n        opacity: 0;\n        -webkit-transform-origin: top right;\n        transform-origin: top right;\n        -webkit-transform: rotate(-110deg);\n        transform: rotate(-110deg);\n        -webkit-animation-timing-function: ease-in-out;\n        animation-timing-function: ease-in-out;\n    }\n}\n\n.tinDownIn {\n    -webkit-animation-name: tinDownIn;\n    animation-name: tinDownIn;\n}\n\n@-webkit-keyframes tinDownIn {\n    0% {\n        opacity: 0;\n        -webkit-transform: scale(1, 1) translateY(900%);\n        transform: scale(1, 1) translateY(900%);\n    }\n    50%,\n    70%,\n    90% {\n        opacity: 1;\n        -webkit-transform: scale(1.1, 1.1) translateY(0);\n        transform: scale(1.1, 1.1) translateY(0);\n    }\n    60%,\n    80%,\n    100% {\n        opacity: 1;\n        -webkit-transform: scale(1, 1) translateY(0);\n        transform: scale(1, 1) translateY(0);\n    }\n}\n\n@keyframes tinDownIn {\n    0% {\n        opacity: 0;\n        -webkit-transform: scale(1, 1) translateY(900%);\n        transform: scale(1, 1) translateY(900%);\n    }\n    50%,\n    70%,\n    90% {\n        opacity: 1;\n        -webkit-transform: scale(1.1, 1.1) translateY(0);\n        transform: scale(1.1, 1.1) translateY(0);\n    }\n    60%,\n    80%,\n    100% {\n        opacity: 1;\n        -webkit-transform: scale(1, 1) translateY(0);\n        transform: scale(1, 1) translateY(0);\n    }\n}\n\n.tinDownOut {\n    -webkit-animation-name: tinDownOut;\n    animation-name: tinDownOut;\n}\n\n@-webkit-keyframes tinDownOut {\n    0%,\n    20%,\n    40%,\n    50% {\n        opacity: 1;\n        -webkit-transform: scale(1, 1) translateY(0);\n        transform: scale(1, 1) translateY(0);\n    }\n    10%,\n    30% {\n        opacity: 1;\n        -webkit-transform: scale(1.1, 1.1) translateY(0);\n        transform: scale(1.1, 1.1) translateY(0);\n    }\n    100% {\n        opacity: 0;\n        -webkit-transform: scale(1, 1) translateY(900%);\n        transform: scale(1, 1) translateY(900%);\n    }\n}\n\n@keyframes tinDownOut {\n    0%,\n    20%,\n    40%,\n    50% {\n        opacity: 1;\n        -webkit-transform: scale(1, 1) translateY(0);\n        transform: scale(1, 1) translateY(0);\n    }\n    10%,\n    30% {\n        opacity: 1;\n        -webkit-transform: scale(1.1, 1.1) translateY(0);\n        transform: scale(1.1, 1.1) translateY(0);\n    }\n    100% {\n        opacity: 0;\n        -webkit-transform: scale(1, 1) translateY(900%);\n        transform: scale(1, 1) translateY(900%);\n    }\n}\n\n.tinLeftIn {\n    -webkit-animation-name: tinLeftIn;\n    animation-name: tinLeftIn;\n}\n\n@-webkit-keyframes tinLeftIn {\n    0% {\n        opacity: 0;\n        -webkit-transform: scale(1, 1) translateX(-900%);\n        transform: scale(1, 1) translateX(-900%);\n    }\n    50%,\n    70%,\n    90% {\n        opacity: 1;\n        -webkit-transform: scale(1.1, 1.1) translateX(0);\n        transform: scale(1.1, 1.1) translateX(0);\n    }\n    60%,\n    80%,\n    100% {\n        opacity: 1;\n        -webkit-transform: scale(1, 1) translateX(0);\n        transform: scale(1, 1) translateX(0);\n    }\n}\n\n@keyframes tinLeftIn {\n    0% {\n        opacity: 0;\n        -webkit-transform: scale(1, 1) translateX(-900%);\n        transform: scale(1, 1) translateX(-900%);\n    }\n    50%,\n    70%,\n    90% {\n        opacity: 1;\n        -webkit-transform: scale(1.1, 1.1) translateX(0);\n        transform: scale(1.1, 1.1) translateX(0);\n    }\n    60%,\n    80%,\n    100% {\n        opacity: 1;\n        -webkit-transform: scale(1, 1) translateX(0);\n        transform: scale(1, 1) translateX(0);\n    }\n}\n\n.tinLeftOut {\n    -webkit-animation-name: tinLeftOut;\n    animation-name: tinLeftOut;\n}\n\n@-webkit-keyframes tinLeftOut {\n    0%,\n    20%,\n    40%,\n    50% {\n        opacity: 1;\n        -webkit-transform: scale(1, 1) translateX(0);\n        transform: scale(1, 1) translateX(0);\n    }\n    10%,\n    30% {\n        opacity: 1;\n        -webkit-transform: scale(1.1, 1.1) translateX(0);\n        transform: scale(1.1, 1.1) translateX(0);\n    }\n    100% {\n        opacity: 0;\n        -webkit-transform: scale(1, 1) translateX(-900%);\n        transform: scale(1, 1) translateX(-900%);\n    }\n}\n\n@keyframes tinLeftOut {\n    0%,\n    20%,\n    40%,\n    50% {\n        opacity: 1;\n        -webkit-transform: scale(1, 1) translateX(0);\n        transform: scale(1, 1) translateX(0);\n    }\n    10%,\n    30% {\n        opacity: 1;\n        -webkit-transform: scale(1.1, 1.1) translateX(0);\n        transform: scale(1.1, 1.1) translateX(0);\n    }\n    100% {\n        opacity: 0;\n        -webkit-transform: scale(1, 1) translateX(-900%);\n        transform: scale(1, 1) translateX(-900%);\n    }\n}\n\n.tinRightIn {\n    -webkit-animation-name: tinRightIn;\n    animation-name: tinRightIn;\n}\n\n@-webkit-keyframes tinRightIn {\n    0% {\n        opacity: 0;\n        -webkit-transform: scale(1, 1) translateX(900%);\n        transform: scale(1, 1) translateX(900%);\n    }\n    50%,\n    70%,\n    90% {\n        opacity: 1;\n        -webkit-transform: scale(1.1, 1.1) translateX(0);\n        transform: scale(1.1, 1.1) translateX(0);\n    }\n    60%,\n    80%,\n    100% {\n        opacity: 1;\n        -webkit-transform: scale(1, 1) translateX(0);\n        transform: scale(1, 1) translateX(0);\n    }\n}\n\n@keyframes tinRightIn {\n    0% {\n        opacity: 0;\n        -webkit-transform: scale(1, 1) translateX(900%);\n        transform: scale(1, 1) translateX(900%);\n    }\n    50%,\n    70%,\n    90% {\n        opacity: 1;\n        -webkit-transform: scale(1.1, 1.1) translateX(0);\n        transform: scale(1.1, 1.1) translateX(0);\n    }\n    60%,\n    80%,\n    100% {\n        opacity: 1;\n        -webkit-transform: scale(1, 1) translateX(0);\n        transform: scale(1, 1) translateX(0);\n    }\n}\n\n.tinRightOut {\n    -webkit-animation-name: tinRightOut;\n    animation-name: tinRightOut;\n}\n\n@-webkit-keyframes tinRightOut {\n    0%,\n    20%,\n    40%,\n    50% {\n        opacity: 1;\n        -webkit-transform: scale(1, 1) translateX(0);\n        transform: scale(1, 1) translateX(0);\n    }\n    10%,\n    30% {\n        opacity: 1;\n        -webkit-transform: scale(1.1, 1.1) translateX(0);\n        transform: scale(1.1, 1.1) translateX(0);\n    }\n    100% {\n        opacity: 0;\n        -webkit-transform: scale(1, 1) translateX(900%);\n        transform: scale(1, 1) translateX(900%);\n    }\n}\n\n@keyframes tinRightOut {\n    0%,\n    20%,\n    40%,\n    50% {\n        opacity: 1;\n        -webkit-transform: scale(1, 1) translateX(0);\n        transform: scale(1, 1) translateX(0);\n    }\n    10%,\n    30% {\n        opacity: 1;\n        -webkit-transform: scale(1.1, 1.1) translateX(0);\n        transform: scale(1.1, 1.1) translateX(0);\n    }\n    100% {\n        opacity: 0;\n        -webkit-transform: scale(1, 1) translateX(900%);\n        transform: scale(1, 1) translateX(900%);\n    }\n}\n\n.tinUpIn {\n    -webkit-animation-name: tinUpIn;\n    animation-name: tinUpIn;\n}\n\n@-webkit-keyframes tinUpIn {\n    0% {\n        opacity: 0;\n        -webkit-transform: scale(1, 1) translateY(-900%);\n        transform: scale(1, 1) translateY(-900%);\n    }\n    50%,\n    70%,\n    90% {\n        opacity: 1;\n        -webkit-transform: scale(1.1, 1.1) translateY(0);\n        transform: scale(1.1, 1.1) translateY(0);\n    }\n    60%,\n    80%,\n    100% {\n        opacity: 1;\n        -webkit-transform: scale(1, 1) translateY(0);\n        transform: scale(1, 1) translateY(0);\n    }\n}\n\n@keyframes tinUpIn {\n    0% {\n        opacity: 0;\n        -webkit-transform: scale(1, 1) translateY(-900%);\n        transform: scale(1, 1) translateY(-900%);\n    }\n    50%,\n    70%,\n    90% {\n        opacity: 1;\n        -webkit-transform: scale(1.1, 1.1) translateY(0);\n        transform: scale(1.1, 1.1) translateY(0);\n    }\n    60%,\n    80%,\n    100% {\n        opacity: 1;\n        -webkit-transform: scale(1, 1) translateY(0);\n        transform: scale(1, 1) translateY(0);\n    }\n}\n\n.tinUpOut {\n    -webkit-animation-name: tinUpOut;\n    animation-name: tinUpOut;\n}\n\n@-webkit-keyframes tinUpOut {\n    0%,\n    20%,\n    40%,\n    50% {\n        opacity: 1;\n        -webkit-transform: scale(1, 1) translateY(0);\n        transform: scale(1, 1) translateY(0);\n    }\n    10%,\n    30% {\n        opacity: 1;\n        -webkit-transform: scale(1.1, 1.1) translateY(0);\n        transform: scale(1.1, 1.1) translateY(0);\n    }\n    100% {\n        opacity: 0;\n        -webkit-transform: scale(1, 1) translateY(-900%);\n        transform: scale(1, 1) translateY(-900%);\n    }\n}\n\n@keyframes tinUpOut {\n    0%,\n    20%,\n    40%,\n    50% {\n        opacity: 1;\n        -webkit-transform: scale(1, 1) translateY(0);\n        transform: scale(1, 1) translateY(0);\n    }\n    10%,\n    30% {\n        opacity: 1;\n        -webkit-transform: scale(1.1, 1.1) translateY(0);\n        transform: scale(1.1, 1.1) translateY(0);\n    }\n    100% {\n        opacity: 0;\n        -webkit-transform: scale(1, 1) translateY(-900%);\n        transform: scale(1, 1) translateY(-900%);\n    }\n}\n',""]),t.exports=e},function(t,e,i){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var i=function(t,e){var i=t[1]||"",s=t[3];if(!s)return i;if(e&&"function"==typeof btoa){var a=function(t){var e=btoa(unescape(encodeURIComponent(JSON.stringify(t)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(e);return"/*# ".concat(i," */")}(s),r=s.sources.map((function(t){return"/*# sourceURL=".concat(s.sourceRoot||"").concat(t," */")}));return[i].concat(r).concat([a]).join("\n")}return[i].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(i,"}"):i})).join("")},e.i=function(t,i,s){"string"==typeof t&&(t=[[null,t,""]]);var a={};if(s)for(var r=0;r<this.length;r++){var n=this[r][0];null!=n&&(a[n]=!0)}for(var o=0;o<t.length;o++){var h=[].concat(t[o]);s&&a[h[0]]||(i&&(h[2]?h[2]="".concat(i," and ").concat(h[2]):h[2]=i),e.push(h))}},e}},function(t,e,i){var s,a={},r=function(t){var e;return function(){return void 0===e&&(e=t.apply(this,arguments)),e}}((function(){return window&&document&&document.all&&!window.atob})),n=function(t,e){return e?e.querySelector(t):document.querySelector(t)},o=(s={},function(t,e){if("function"==typeof t)return t();if(void 0===s[t]){var i=n.call(this,t,e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}s[t]=i}return s[t]}),h=null,l=0,c=[],d=i(11);function p(t,e){for(var i=0;i<t.length;i++){var s=t[i],r=a[s.id];if(r){r.refs++;for(var n=0;n<r.parts.length;n++)r.parts[n](s.parts[n]);for(;n<s.parts.length;n++)r.parts.push(x(s.parts[n],e))}else{var o=[];for(n=0;n<s.parts.length;n++)o.push(x(s.parts[n],e));a[s.id]={id:s.id,refs:1,parts:o}}}}function g(t,e){for(var i=[],s={},a=0;a<t.length;a++){var r=t[a],n=e.base?r[0]+e.base:r[0],o={css:r[1],media:r[2],sourceMap:r[3]};s[n]?s[n].parts.push(o):i.push(s[n]={id:n,parts:[o]})}return i}function u(t,e){var i=o(t.insertInto);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var s=c[c.length-1];if("top"===t.insertAt)s?s.nextSibling?i.insertBefore(e,s.nextSibling):i.appendChild(e):i.insertBefore(e,i.firstChild),c.push(e);else if("bottom"===t.insertAt)i.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var a=o(t.insertAt.before,i);i.insertBefore(e,a)}}function m(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=c.indexOf(t);e>=0&&c.splice(e,1)}function f(t){var e=document.createElement("style");if(void 0===t.attrs.type&&(t.attrs.type="text/css"),void 0===t.attrs.nonce){var s=function(){0;return i.nc}();s&&(t.attrs.nonce=s)}return y(e,t.attrs),u(t,e),e}function y(t,e){Object.keys(e).forEach((function(i){t.setAttribute(i,e[i])}))}function x(t,e){var i,s,a,r;if(e.transform&&t.css){if(!(r="function"==typeof e.transform?e.transform(t.css):e.transform.default(t.css)))return function(){};t.css=r}if(e.singleton){var n=l++;i=h||(h=f(e)),s=A.bind(null,i,n,!1),a=A.bind(null,i,n,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(i=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",y(e,t.attrs),u(t,e),e}(e),s=C.bind(null,i,e),a=function(){m(i),i.href&&URL.revokeObjectURL(i.href)}):(i=f(e),s=w.bind(null,i),a=function(){m(i)});return s(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;s(t=e)}else a()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=r()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var i=g(t,e);return p(i,e),function(t){for(var s=[],r=0;r<i.length;r++){var n=i[r];(o=a[n.id]).refs--,s.push(o)}t&&p(g(t,e),e);for(r=0;r<s.length;r++){var o;if(0===(o=s[r]).refs){for(var h=0;h<o.parts.length;h++)o.parts[h]();delete a[o.id]}}}};var v,b=(v=[],function(t,e){return v[t]=e,v.filter(Boolean).join("\n")});function A(t,e,i,s){var a=i?"":s.css;if(t.styleSheet)t.styleSheet.cssText=b(e,a);else{var r=document.createTextNode(a),n=t.childNodes;n[e]&&t.removeChild(n[e]),n.length?t.insertBefore(r,n[e]):t.appendChild(r)}}function w(t,e){var i=e.css,s=e.media;if(s&&t.setAttribute("media",s),t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}function C(t,e,i){var s=i.css,a=i.sourceMap,r=void 0===e.convertToAbsoluteUrls&&a;(e.convertToAbsoluteUrls||r)&&(s=d(s)),a&&(s+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */");var n=new Blob([s],{type:"text/css"}),o=t.href;t.href=URL.createObjectURL(n),o&&URL.revokeObjectURL(o)}},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var i=e.protocol+"//"+e.host,s=i+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(t,e){var a,r=e.trim().replace(/^"(.*)"$/,(function(t,e){return e})).replace(/^'(.*)'$/,(function(t,e){return e}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(r)?t:(a=0===r.indexOf("//")?r:0===r.indexOf("/")?i+r:s+r.replace(/^\.\//,""),"url("+JSON.stringify(a)+")")}))}}]);
//# sourceMappingURL=cxdash.min.js.map
//# sourceMappingURL=cxdash.min.js.map